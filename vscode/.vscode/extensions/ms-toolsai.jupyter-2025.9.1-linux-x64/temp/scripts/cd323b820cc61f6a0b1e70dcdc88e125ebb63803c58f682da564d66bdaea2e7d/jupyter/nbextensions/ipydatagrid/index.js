/*! For license information please see index.js.LICENSE.txt */
define(["@jupyter-widgets/base"],(e=>(()=>{var t={5936:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n.lm-AccordionPanel .lm-AccordionPanel-title {\n  box-sizing: border-box;\n  padding: 0px 10px;\n  background: #e5e5e5;\n  border: 1px solid #c0c0c0;\n  border-bottom: none;\n  font:\n    12px Helvetica,\n    Arial,\n    sans-serif;\n  min-height: 22px;\n  max-height: 22px;\n  min-width: 35px;\n  line-height: 20px;\n  margin: 0px;\n}\n\n.lm-AccordionPanel .lm-AccordionPanel-title:focus,\n.lm-AccordionPanel .lm-AccordionPanel-title:hover {\n  background: #dbdbdb;\n}\n\n.lm-AccordionPanel .lm-AccordionPanel-title:focus,\n.lm-AccordionPanel\n  .lm-AccordionPanel-title:last-of-type:focus:not(.lm-mod-expanded) {\n  border: 1px solid lightskyblue;\n}\n\n.lm-AccordionPanel .lm-AccordionPanel-title:last-of-type:not(.lm-mod-expanded) {\n  border-bottom: 1px solid #c0c0c0;\n}\n\n.lm-AccordionPanel\n  .lm-AccordionPanel-title.lm-mod-expanded\n  .lm-AccordionPanel-titleCollapser:before {\n  content: '\\f0d8';\n  font-family: FontAwesome;\n}\n\n.lm-AccordionPanel\n  .lm-AccordionPanel-title\n  .lm-AccordionPanel-titleCollapser:before {\n  content: '\\f0d7';\n  font-family: FontAwesome;\n  position: absolute;\n  right: 10px;\n}\n\n.lm-AccordionPanel .lm-AccordionPanel-titleLabel {\n  padding: 0px 5px;\n}\n",""]);const o=a},9812:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-CommandPalette {\n  font-family: sans-serif;\n  background: #f5f5f5;\n}\n\n.lm-CommandPalette-search {\n  padding: 8px;\n}\n\n.lm-CommandPalette-wrapper {\n  padding: 4px 6px;\n  background: white;\n  border: 1px solid #e0e0e0;\n  position: relative;\n}\n\n.lm-CommandPalette-input {\n  width: 92%;\n  border: none;\n  outline: none;\n  font-size: 16px;\n}\n\n.lm-CommandPalette-header {\n  padding: 4px;\n  color: #757575;\n  font-size: 12px;\n  font-weight: 600;\n  background: #e1e1e1;\n  cursor: pointer;\n}\n\n.lm-CommandPalette-header:hover::before {\n  content: '\\2026'; /* ellipsis */\n  float: right;\n  margin-right: 4px;\n}\n\n.lm-CommandPalette-header > mark {\n  background-color: transparent;\n  font-weight: bold;\n}\n\n.lm-CommandPalette-item {\n  padding: 4px 8px;\n  color: #757575;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.lm-CommandPalette-emptyMessage {\n  padding: 4px;\n  color: #757575;\n  font-size: 12px;\n  font-weight: 600;\n  text-align: center;\n}\n\n.lm-CommandPalette-item.lm-mod-disabled {\n  color: rgba(0, 0, 0, 0.25);\n}\n\n.lm-CommandPalette-item.lm-mod-active {\n  background: #7fdbff;\n}\n\n.lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled) {\n  background: #e5e5e5;\n}\n\n.lm-CommandPalette-itemIcon {\n  display: none;\n}\n\n.lm-CommandPalette-itemLabel > mark {\n  background-color: transparent;\n  font-weight: bold;\n}\n\n.lm-CommandPalette-item.lm-mod-disabled mark {\n  color: rgba(0, 0, 0, 0.4);\n}\n\n.lm-CommandPalette-itemCaption {\n  color: #9e9e9e;\n  font-size: 11px;\n  font-weight: 400;\n}\n",""]);const o=a},5032:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2018, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-DataGrid {\n  min-width: 64px;\n  min-height: 64px;\n  border: 1px solid #a0a0a0;\n}\n\n.lm-DataGrid-scrollCorner {\n  background-color: #f0f0f0;\n}\n\n.lm-DataGrid-scrollCorner::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 1px;\n  height: 1px;\n  background-color: #a0a0a0;\n}\n\n.lm-DataGrid-cellEditorOccluder {\n  pointer-events: none;\n  position: absolute;\n  overflow: hidden;\n}\n\n.lm-DataGrid-cellEditorContainer {\n  pointer-events: auto;\n  position: absolute;\n  background-color: #ffffff;\n  box-sizing: border-box;\n  box-shadow: 0px 0px 6px #006bf7;\n  border: 2px solid #006bf7;\n}\n\n.lm-DataGrid-cellEditorContainer.lm-mod-invalid {\n  box-shadow: 0px 0px 6px red;\n  border: 2px solid red;\n}\n\n.lm-DataGrid-cellEditorContainer > form {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n.lm-DataGrid-cellEditorWidget {\n  width: 100%;\n  height: 100%;\n  outline: none;\n  box-sizing: border-box;\n}\n\n.lm-DataGrid-cellEditorInput {\n  background-color: #ffffff;\n  border: 0;\n}\n\n.lm-DataGrid-cellEditorCheckbox {\n  margin: 0;\n}\n\n.lm-DataGrid-notification {\n  position: absolute;\n  display: flex;\n  overflow: visible;\n  animation: fade-in 300ms ease-out;\n}\n\n.lm-DataGrid-notificationContainer {\n  box-shadow: 0px 2px 5px #999999;\n  border-radius: 3px;\n  background-color: white;\n  color: black;\n  border: 1px solid black;\n  font-family: sans-serif;\n  font-size: 13px;\n  padding: 4px;\n}\n\n@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0.7;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n",""]);const o=a},3099:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-DockPanel-overlay {\n  background: rgba(255, 255, 255, 0.6);\n  border: 1px dashed black;\n  transition-property: top, left, right, bottom;\n  transition-duration: 150ms;\n  transition-timing-function: ease;\n}\n",""]);const o=a},838:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s),o=n(1266),l=n(3210),c=n(5936),u=n(9812),h=n(5032),d=n(3099),f=n(6337),p=n(9094),m=n(4544),_=n(8560),g=a()(r());g.i(o.A),g.i(l.A),g.i(c.A),g.i(u.A),g.i(h.A),g.i(d.A),g.i(f.A),g.i(p.A),g.i(m.A),g.i(_.A),g.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2018, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n",""]);const y=g},6337:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-Menu {\n  padding: 3px 0px;\n  background: white;\n  color: rgba(0, 0, 0, 0.87);\n  border: 1px solid #c0c0c0;\n  font:\n    12px Helvetica,\n    Arial,\n    sans-serif;\n  box-shadow: 0px 1px 6px rgba(0, 0, 0, 0.2);\n}\n\n.lm-Menu-item.lm-mod-active {\n  background: #e5e5e5;\n}\n\n.lm-Menu-item.lm-mod-disabled {\n  color: rgba(0, 0, 0, 0.25);\n}\n\n.lm-Menu-itemIcon {\n  width: 21px;\n  padding: 4px 2px;\n}\n\n.lm-Menu-itemLabel {\n  padding: 4px 35px 4px 2px;\n}\n\n.lm-Menu-itemMnemonic {\n  text-decoration: underline;\n}\n\n.lm-Menu-itemShortcut {\n  padding: 4px 0px;\n}\n\n.lm-Menu-itemSubmenuIcon {\n  width: 16px;\n  padding: 4px 0px;\n}\n\n.lm-Menu-item[data-type='separator'] > div {\n  padding: 0;\n  height: 9px;\n}\n\n.lm-Menu-item[data-type='separator'] > div::after {\n  content: '';\n  display: block;\n  position: relative;\n  top: 4px;\n  border-top: 1px solid #dddddd;\n}\n\n.lm-Menu-itemIcon::before,\n.lm-Menu-itemSubmenuIcon::before {\n  font-family: FontAwesome;\n}\n\n.lm-Menu-item.lm-mod-toggled > .lm-Menu-itemIcon::before {\n  content: '\\f00c';\n}\n\n.lm-Menu-item[data-type='submenu'] > .lm-Menu-itemSubmenuIcon::before {\n  content: '\\f0da';\n}\n",""]);const o=a},9094:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-MenuBar {\n  padding-left: 5px;\n  background: #fafafa;\n  color: rgba(0, 0, 0, 0.87);\n  border-bottom: 1px solid #dddddd;\n  font:\n    13px Helvetica,\n    Arial,\n    sans-serif;\n}\n\n.lm-MenuBar-menu {\n  transform: translateY(-1px);\n}\n\n.lm-MenuBar-item {\n  padding: 4px 8px;\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n\n.lm-MenuBar-item.lm-mod-active {\n  background: #e5e5e5;\n}\n\n.lm-MenuBar.lm-mod-active .lm-MenuBar-item.lm-mod-active {\n  z-index: 10001;\n  background: white;\n  border-left: 1px solid #c0c0c0;\n  border-right: 1px solid #c0c0c0;\n  box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.2);\n}\n\n.lm-MenuBar-item:focus-visible {\n  outline: 2px solid #333;\n  outline-offset: -2px;\n}\n\n.lm-MenuBar-item[aria-disabled='true'] {\n  color: rgba(0, 0, 0, 0.37);\n}\n",""]);const o=a},4544:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s),o=n(3960),l=n.n(o),c=new URL(n(3860),n.b),u=new URL(n(2577),n.b),h=new URL(n(576),n.b),d=new URL(n(2515),n.b),f=a()(r()),p=l()(c),m=l()(u),_=l()(h),g=l()(d);f.push([e.id,`/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-ScrollBar[data-orientation='horizontal'] {\n  min-height: 16px;\n  max-height: 16px;\n  min-width: 45px;\n  border-top: 1px solid #a0a0a0;\n}\n\n.lm-ScrollBar[data-orientation='vertical'] {\n  min-width: 16px;\n  max-width: 16px;\n  min-height: 45px;\n  border-left: 1px solid #a0a0a0;\n}\n\n.lm-ScrollBar-button {\n  background-color: #f0f0f0;\n  background-position: center center;\n  min-height: 15px;\n  max-height: 15px;\n  min-width: 15px;\n  max-width: 15px;\n}\n\n.lm-ScrollBar-button:hover {\n  background-color: #dadada;\n}\n\n.lm-ScrollBar-button.lm-mod-active {\n  background-color: #cdcdcd;\n}\n\n.lm-ScrollBar-track {\n  background: #f0f0f0;\n}\n\n.lm-ScrollBar-thumb {\n  background: #cdcdcd;\n}\n\n.lm-ScrollBar-thumb:hover {\n  background: #bababa;\n}\n\n.lm-ScrollBar-thumb.lm-mod-active {\n  background: #a0a0a0;\n}\n\n.lm-ScrollBar[data-orientation='horizontal'] .lm-ScrollBar-thumb {\n  height: 100%;\n  min-width: 15px;\n  border-left: 1px solid #a0a0a0;\n  border-right: 1px solid #a0a0a0;\n}\n\n.lm-ScrollBar[data-orientation='vertical'] .lm-ScrollBar-thumb {\n  width: 100%;\n  min-height: 15px;\n  border-top: 1px solid #a0a0a0;\n  border-bottom: 1px solid #a0a0a0;\n}\n\n.lm-ScrollBar[data-orientation='horizontal']\n  .lm-ScrollBar-button[data-action='decrement'] {\n  background-image: url(${p});\n}\n\n.lm-ScrollBar[data-orientation='horizontal']\n  .lm-ScrollBar-button[data-action='increment'] {\n  background-image: url(${m});\n}\n\n.lm-ScrollBar[data-orientation='vertical']\n  .lm-ScrollBar-button[data-action='decrement'] {\n  background-image: url(${_});\n}\n\n.lm-ScrollBar[data-orientation='vertical']\n  .lm-ScrollBar-button[data-action='increment'] {\n  background-image: url(${g});\n}\n`,""]);const y=f},8560:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-TabBar {\n  min-height: 24px;\n  max-height: 24px;\n}\n\n.lm-TabBar-content {\n  min-width: 0;\n  min-height: 0;\n  align-items: flex-end;\n  border-bottom: 1px solid #c0c0c0;\n}\n\n.lm-TabBar-tab {\n  padding: 0px 10px;\n  background: #e5e5e5;\n  border: 1px solid #c0c0c0;\n  border-bottom: none;\n  font:\n    12px Helvetica,\n    Arial,\n    sans-serif;\n  flex: 0 1 125px;\n  min-height: 20px;\n  max-height: 20px;\n  min-width: 35px;\n  margin-left: -1px;\n  line-height: 20px;\n}\n\n.lm-TabBar-tabLabel .lm-TabBar-tabInput {\n  padding: 0px;\n  border: 0px;\n  font:\n    12px Helvetica,\n    Arial,\n    sans-serif;\n}\n\n.lm-TabBar-tab.lm-mod-current {\n  background: white;\n}\n\n.lm-TabBar-tab:hover:not(.lm-mod-current) {\n  background: #f0f0f0;\n}\n\n.lm-TabBar-tab:first-child {\n  margin-left: 0;\n}\n\n.lm-TabBar-tab.lm-mod-current {\n  min-height: 23px;\n  max-height: 23px;\n  transform: translateY(1px);\n}\n\n.lm-TabBar-tabIcon,\n.lm-TabBar-tabLabel,\n.lm-TabBar-tabCloseIcon {\n  display: inline-block;\n}\n\n.lm-TabBar-tab.lm-mod-closable > .lm-TabBar-tabCloseIcon {\n  margin-left: 4px;\n}\n\n.lm-TabBar .lm-TabBar-addButton {\n  padding: 0px 6px;\n  border-bottom: 1px solid #c0c0c0;\n}\n\n.lm-TabBar-tab.lm-mod-closable > .lm-TabBar-tabCloseIcon:before {\n  content: '\\f00d';\n  font-family: FontAwesome;\n}\n\n.lm-TabBar .lm-TabBar-addButton:before {\n  content: '\\f067';\n  font-family: FontAwesome;\n}\n\n.lm-TabBar-tab.lm-mod-drag-image {\n  min-height: 23px;\n  max-height: 23px;\n  min-width: 125px;\n  border: none;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);\n}\n",""]);const o=a},1266:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-cursor-backdrop {\n  top: 0px;\n  left: 0px;\n  position: fixed;\n  width: 200px;\n  height: 200px;\n  margin-top: -100px;\n  margin-left: -100px;\n  will-change: transform;\n  z-index: 100;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  overflow: scroll;\n}\n\n.lm-cursor-backdrop::after {\n  content: '';\n  height: 1200px;\n  width: 1200px;\n  display: block;\n}\n\n.lm-cursor-backdrop::-webkit-scrollbar {\n  display: none;\n}\n\n.lm-mod-drag-image {\n  top: 0px;\n  left: 0px;\n  will-change: transform;\n}\n",""]);const o=a},588:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n.lm-AccordionPanel[data-orientation='horizontal'] > .lm-AccordionPanel-title {\n  /* Title is rotated for horizontal accordion panel using CSS */\n  display: block;\n  transform-origin: top left;\n  transform: rotate(-90deg) translate(-100%);\n}\n",""]);const o=a},5864:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-CommandPalette {\n  display: flex;\n  flex-direction: column;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.lm-CommandPalette-search {\n  flex: 0 0 auto;\n}\n\n.lm-CommandPalette-content {\n  flex: 1 1 auto;\n  margin: 0;\n  padding: 0;\n  min-height: 0;\n  overflow: auto;\n  list-style-type: none;\n}\n\n.lm-CommandPalette-header {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.lm-CommandPalette-item {\n  display: flex;\n  flex-direction: row;\n}\n\n.lm-CommandPalette-itemIcon {\n  flex: 0 0 auto;\n}\n\n.lm-CommandPalette-itemContent {\n  flex: 1 1 auto;\n  overflow: hidden;\n}\n\n.lm-CommandPalette-itemShortcut {\n  flex: 0 0 auto;\n}\n\n.lm-CommandPalette-itemLabel {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.lm-close-icon {\n  border: 1px solid transparent;\n  background-color: transparent;\n  position: absolute;\n  z-index: 1;\n  right: 3%;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  padding: 7px 0;\n  display: none;\n  vertical-align: middle;\n  outline: 0;\n  cursor: pointer;\n}\n.lm-close-icon:after {\n  content: 'X';\n  display: block;\n  width: 15px;\n  height: 15px;\n  text-align: center;\n  color: #000;\n  font-weight: normal;\n  font-size: 12px;\n  cursor: pointer;\n}\n",""]);const o=a},4063:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-DockPanel {\n  z-index: 0;\n}\n\n.lm-DockPanel-widget {\n  z-index: 0;\n}\n\n.lm-DockPanel-tabBar {\n  z-index: 1;\n}\n\n.lm-DockPanel-handle {\n  z-index: 2;\n}\n\n.lm-DockPanel-handle.lm-mod-hidden {\n  display: none !important;\n}\n\n.lm-DockPanel-handle:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  content: '';\n}\n\n.lm-DockPanel-handle[data-orientation='horizontal'] {\n  cursor: ew-resize;\n}\n\n.lm-DockPanel-handle[data-orientation='vertical'] {\n  cursor: ns-resize;\n}\n\n.lm-DockPanel-handle[data-orientation='horizontal']:after {\n  left: 50%;\n  min-width: 8px;\n  transform: translateX(-50%);\n}\n\n.lm-DockPanel-handle[data-orientation='vertical']:after {\n  top: 50%;\n  min-height: 8px;\n  transform: translateY(-50%);\n}\n\n.lm-DockPanel-overlay {\n  z-index: 3;\n  box-sizing: border-box;\n  pointer-events: none;\n}\n\n.lm-DockPanel-overlay.lm-mod-hidden {\n  display: none !important;\n}\n",""]);const o=a},3210:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s),o=n(8728),l=n(588),c=n(5864),u=n(4063),h=n(8117),d=n(578),f=n(6884),p=n(9106),m=n(9068),_=n(3285),g=a()(r());g.i(o.A),g.i(l.A),g.i(c.A),g.i(u.A),g.i(h.A),g.i(d.A),g.i(f.A),g.i(p.A),g.i(m.A),g.i(_.A),g.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n",""]);const y=g},8117:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-Menu {\n  z-index: 10000;\n  position: absolute;\n  white-space: nowrap;\n  overflow-x: hidden;\n  overflow-y: auto;\n  outline: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.lm-Menu-content {\n  margin: 0;\n  padding: 0;\n  display: table;\n  list-style-type: none;\n}\n\n.lm-Menu-item {\n  display: table-row;\n}\n\n.lm-Menu-item.lm-mod-hidden,\n.lm-Menu-item.lm-mod-collapsed {\n  display: none !important;\n}\n\n.lm-Menu-itemIcon,\n.lm-Menu-itemSubmenuIcon {\n  display: table-cell;\n  text-align: center;\n}\n\n.lm-Menu-itemLabel {\n  display: table-cell;\n  text-align: left;\n}\n\n.lm-Menu-itemShortcut {\n  display: table-cell;\n  text-align: right;\n}\n",""]);const o=a},578:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-MenuBar {\n  outline: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.lm-MenuBar-content {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: row;\n  list-style-type: none;\n}\n\n.lm-MenuBar-item {\n  box-sizing: border-box;\n}\n\n.lm-MenuBar-itemIcon,\n.lm-MenuBar-itemLabel {\n  display: inline-block;\n}\n",""]);const o=a},6884:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-ScrollBar {\n  display: flex;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.lm-ScrollBar[data-orientation='horizontal'] {\n  flex-direction: row;\n}\n\n.lm-ScrollBar[data-orientation='vertical'] {\n  flex-direction: column;\n}\n\n.lm-ScrollBar-button {\n  box-sizing: border-box;\n  flex: 0 0 auto;\n}\n\n.lm-ScrollBar-track {\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  flex: 1 1 auto;\n}\n\n.lm-ScrollBar-thumb {\n  box-sizing: border-box;\n  position: absolute;\n}\n",""]);const o=a},9106:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-SplitPanel-child {\n  z-index: 0;\n}\n\n.lm-SplitPanel-handle {\n  z-index: 1;\n}\n\n.lm-SplitPanel-handle.lm-mod-hidden {\n  display: none !important;\n}\n\n.lm-SplitPanel-handle:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  content: '';\n}\n\n.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {\n  cursor: ew-resize;\n}\n\n.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {\n  cursor: ns-resize;\n}\n\n.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {\n  left: 50%;\n  min-width: 8px;\n  transform: translateX(-50%);\n}\n\n.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {\n  top: 50%;\n  min-height: 8px;\n  transform: translateY(-50%);\n}\n",""]);const o=a},9068:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-TabBar {\n  display: flex;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.lm-TabBar[data-orientation='horizontal'] {\n  flex-direction: row;\n  align-items: flex-end;\n}\n\n.lm-TabBar[data-orientation='vertical'] {\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.lm-TabBar-content {\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex: 1 1 auto;\n  list-style-type: none;\n}\n\n.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {\n  flex-direction: row;\n}\n\n.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {\n  flex-direction: column;\n}\n\n.lm-TabBar-tab {\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  overflow: hidden;\n  touch-action: none; /* Disable native Drag/Drop */\n}\n\n.lm-TabBar-tabIcon,\n.lm-TabBar-tabCloseIcon {\n  flex: 0 0 auto;\n}\n\n.lm-TabBar-tabLabel {\n  flex: 1 1 auto;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.lm-TabBar-tabInput {\n  user-select: all;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.lm-TabBar-tab.lm-mod-hidden {\n  display: none !important;\n}\n\n.lm-TabBar-addButton.lm-mod-hidden {\n  display: none !important;\n}\n\n.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {\n  position: relative;\n}\n\n.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {\n  left: 0;\n  transition: left 150ms ease;\n}\n\n.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {\n  top: 0;\n  transition: top 150ms ease;\n}\n\n.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {\n  transition: none;\n}\n\n.lm-TabBar-tabLabel .lm-TabBar-tabInput {\n  user-select: all;\n  width: 100%;\n  box-sizing: border-box;\n  background: inherit;\n}\n",""]);const o=a},3285:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-TabPanel-tabBar {\n  z-index: 1;\n}\n\n.lm-TabPanel-stackedPanel {\n  z-index: 0;\n}\n",""]);const o=a},8728:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,"/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n\n.lm-Widget {\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n}\n\n.lm-Widget.lm-mod-hidden {\n  display: none !important;\n}\n",""]);const o=a},6379:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s),o=n(3960),l=n.n(o),c=new URL(n(5838),n.b),u=new URL(n(9357),n.b),h=new URL(n(198),n.b),d=new URL(n(9218),n.b),f=new URL(n(8886),n.b),p=new URL(n(6815),n.b),m=a()(r()),_=l()(c),g=l()(u),y=l()(h),v=l()(d),b=l()(f),x=l()(p);m.push([e.id,`:root {\n  --ipydatagrid-ui-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,\n    Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  --ipydatagrid-ui-font-size0: 0.83333em;\n  --ipydatagrid-ui-font-size1: 13px; /* Base font size */\n  --ipydatagrid-ui-font-size2: 1.2em;\n  --ipydatagrid-ui-font-size3: 1.44em;\n  --ipydatagrid-padding: 3px;\n  --ipydatagrid-filter-dialog-width: 220px;\n  --ipydatagrid-filter-icon-light: url(${_});\n  --ipydatagrid-sort-asc-icon-light: url(${g});\n  --ipydatagrid-sort-desc-icon-light: url(${y});\n  --ipydatagrid-filter-icon-dark: url(${v});\n  --ipydatagrid-sort-asc-icon-dark: url(${b});\n  --ipydatagrid-sort-desc-icon-dark: url(${x});\n  --ipydatagrid-filter-icon: var(--ipydatagrid-filter-icon-light);\n  --ipydatagrid-sort-asc-icon: var(--ipydatagrid-sort-asc-icon-light);\n  --ipydatagrid-sort-desc-icon: var(--ipydatagrid-sort-desc-icon-light);\n\n  --ipydatagrid-layout-color0: white;\n  --ipydatagrid-layout-color1: white;\n  --ipydatagrid-layout-color2: #eeeeee;\n  --ipydatagrid-layout-color3: #bdbdbd;\n  --ipydatagrid-layout-color4: #757575;\n\n  --ipydatagrid-ui-font-color0: rgba(0, 0, 0, 1);\n  --ipydatagrid-ui-font-color1: rgba(0, 0, 0, 0.87);\n  --ipydatagrid-ui-font-color2: rgba(0, 0, 0, 0.54);\n  --ipydatagrid-ui-font-color3: rgba(0, 0, 0, 0.38);\n\n  --ipydatagrid-border-color0: #bdbdbd;\n  --ipydatagrid-border-color1: #bdbdbd;\n  --ipydatagrid-border-color2: #e0e0e0;\n  --ipydatagrid-border-color3: #eeeeee;\n\n  --ipydatagrid-brand-color0: #1976d2;\n  --ipydatagrid-brand-color1: #2196f3;\n  --ipydatagrid-brand-color2: #64b5f6;\n  --ipydatagrid-brand-color3: #bbdefb;\n  --ipydatagrid-brand-color4: #e3f2fd;\n  --ipydatagrid-brand-color5: #00e6ff;\n  --ipydatagrid-brand-color6: #ffe100;\n  --ipydatagrid-brand-color7: #009eb0;\n  --ipydatagrid-brand-color8: #b09b00;\n\n  --ipydatagrid-menu-bgcolor: white;\n  --ipydatagrid-menu-border-color: #bdbdbd;\n  --ipydatagrid-filter-dlg-textcolor: black;\n  --ipydatagrid-filter-dlg-bgcolor: white;\n}\n\n.ipydatagrid-widget {\n  width: 100%;\n  height: 100%;\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n}\n\n.ipydatagrid-widget > div {\n  width: 100%;\n  height: 100%;\n  padding: var(--ipydatagrid-padding);\n  border: none;\n  font-family: "Lato", Helvetica, sans-serif;\n}\n\n.lm-DataGrid-cellEditorOccluder {\n  margin: var(--ipydatagrid-padding);\n}\n\n.ipydatagrid-filterMenu {\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n  border: 1px solid var(--ipydatagrid-menu-border-color, #bdbdbd);\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, .2);\n  background: var(--ipydatagrid-menu-bgcolor, white);\n  z-index: 10;\n  padding: 5px;\n  min-height: 143px;\n}\n\n.ipydatagrid-filterMenu select, .ipydatagrid-filterMenu input, .ipydatagrid-filterMenu button {\n  color: var(--ipydatagrid-ui-font-color0, black) !important;\n  background: var(--ipydatagrid-menu-bgcolor, white);\n  font-size: var(--ipydatagrid-ui-font-size1);\n}\n\n.ipydatagrid-filterMenuIcon {\n  background-size: 21px;\n  background-repeat: no-repeat;\n}\n\n.ipydatagrid-filterMenuIcon-filter {\n  background-image: var(--ipydatagrid-filter-icon);\n}\n\n.ipydatagrid-filterMenuIcon-sortAsc {\n  background-image: var(--ipydatagrid-sort-asc-icon);\n}\n\n.ipydatagrid-filterMenuIcon-sortDesc {\n  background-image: var(--ipydatagrid-sort-desc-icon);\n}\n\n.ipydatagrid-unique-value-grid {\n  min-height: 165px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n  z-index: 1;\n}\n\n.ipydatagrid-filter-title {\n  min-height: 25px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n}\n\n.ipydatagrid-filter-apply {\n  min-height: 20px;\n}\n\n.ipydatagrid-filter-condition-select {\n  min-height: 35px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n}\n\n.ipydatagrid-context-menu {\n  border: 1px solid var(--ipydatagrid-menu-border-color, #bdbdbd);\n  background-color: var(--ipydatagrid-menu-bgcolor, white) !important;\n  color: var(--ipydatagrid-ui-font-color0, black) !important;\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n  padding-top: 7px;\n  padding-bottom: 4px;\n  padding-left: 3px;\n}\n\n.ipydatagrid-context-menu .lm-Menu-item.lm-mod-active, .ipydatagrid-context-menu .p-Menu-item.p-mod-active {\n  background-color: var(--ipydatagrid-layout-color2);\n}\n\n.ipydatagrid-text-input-filter {\n  transform: translate(5px, 0px);\n}\n`,""]);const M=m},2624:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6388),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([e.id,".datagrid-container {\n  width: 100%;\n  height: 500px;\n}\n",""]);const o=a},5358:(e,t,n)=>{var i={"./af":1e3,"./af.js":1e3,"./ar":3204,"./ar-dz":8011,"./ar-dz.js":8011,"./ar-kw":3663,"./ar-kw.js":3663,"./ar-ly":6150,"./ar-ly.js":6150,"./ar-ma":7583,"./ar-ma.js":7583,"./ar-sa":5285,"./ar-sa.js":5285,"./ar-tn":8927,"./ar-tn.js":8927,"./ar.js":3204,"./az":2636,"./az.js":2636,"./be":6686,"./be.js":6686,"./bg":2804,"./bg.js":2804,"./bm":7878,"./bm.js":7878,"./bn":1347,"./bn-bd":1150,"./bn-bd.js":1150,"./bn.js":1347,"./bo":5884,"./bo.js":5884,"./br":5215,"./br.js":5215,"./bs":600,"./bs.js":600,"./ca":5747,"./ca.js":5747,"./cs":4821,"./cs.js":4821,"./cv":1642,"./cv.js":1642,"./cy":8811,"./cy.js":8811,"./da":7568,"./da.js":7568,"./de":9996,"./de-at":6272,"./de-at.js":6272,"./de-ch":4374,"./de-ch.js":4374,"./de.js":9996,"./dv":3941,"./dv.js":3941,"./el":5630,"./el.js":5630,"./en-au":8751,"./en-au.js":8751,"./en-ca":4933,"./en-ca.js":4933,"./en-gb":1102,"./en-gb.js":1102,"./en-ie":935,"./en-ie.js":935,"./en-il":3672,"./en-il.js":3672,"./en-in":434,"./en-in.js":434,"./en-nz":3409,"./en-nz.js":3409,"./en-sg":8167,"./en-sg.js":8167,"./eo":1643,"./eo.js":1643,"./es":279,"./es-do":4125,"./es-do.js":4125,"./es-mx":709,"./es-mx.js":709,"./es-us":2140,"./es-us.js":2140,"./es.js":279,"./et":3126,"./et.js":3126,"./eu":5045,"./eu.js":5045,"./fa":1774,"./fa.js":1774,"./fi":4998,"./fi.js":4998,"./fil":8304,"./fil.js":8304,"./fo":6912,"./fo.js":6912,"./fr":1883,"./fr-ca":3072,"./fr-ca.js":3072,"./fr-ch":7887,"./fr-ch.js":7887,"./fr.js":1883,"./fy":9350,"./fy.js":9350,"./ga":5535,"./ga.js":5535,"./gd":5812,"./gd.js":5812,"./gl":6364,"./gl.js":6364,"./gom-deva":4349,"./gom-deva.js":4349,"./gom-latn":5830,"./gom-latn.js":5830,"./gu":2699,"./gu.js":2699,"./he":4320,"./he.js":4320,"./hi":5668,"./hi.js":5668,"./hr":9541,"./hr.js":9541,"./hu":7328,"./hu.js":7328,"./hy-am":9431,"./hy-am.js":9431,"./id":1002,"./id.js":1002,"./is":8931,"./is.js":8931,"./it":4714,"./it-ch":1124,"./it-ch.js":1124,"./it.js":4714,"./ja":9226,"./ja.js":9226,"./jv":8851,"./jv.js":8851,"./ka":9211,"./ka.js":9211,"./kk":2450,"./kk.js":2450,"./km":9639,"./km.js":9639,"./kn":4538,"./kn.js":4538,"./ko":7321,"./ko.js":7321,"./ku":7359,"./ku.js":7359,"./ky":867,"./ky.js":867,"./lb":2593,"./lb.js":2593,"./lo":294,"./lo.js":294,"./lt":1192,"./lt.js":1192,"./lv":2717,"./lv.js":2717,"./me":5213,"./me.js":5213,"./mi":8377,"./mi.js":8377,"./mk":1735,"./mk.js":1735,"./ml":2166,"./ml.js":2166,"./mn":6764,"./mn.js":6764,"./mr":5528,"./mr.js":5528,"./ms":9455,"./ms-my":2177,"./ms-my.js":2177,"./ms.js":9455,"./mt":1950,"./mt.js":1950,"./my":1273,"./my.js":1273,"./nb":1523,"./nb.js":1523,"./ne":4010,"./ne.js":4010,"./nl":3105,"./nl-be":5907,"./nl-be.js":5907,"./nl.js":3105,"./nn":2703,"./nn.js":2703,"./oc-lnc":4535,"./oc-lnc.js":4535,"./pa-in":274,"./pa-in.js":274,"./pl":567,"./pl.js":567,"./pt":8287,"./pt-br":8820,"./pt-br.js":8820,"./pt.js":8287,"./ro":1340,"./ro.js":1340,"./ru":2878,"./ru.js":2878,"./sd":8736,"./sd.js":8736,"./se":5607,"./se.js":5607,"./si":3227,"./si.js":3227,"./sk":5437,"./sk.js":5437,"./sl":3352,"./sl.js":3352,"./sq":9811,"./sq.js":9811,"./sr":6342,"./sr-cyrl":425,"./sr-cyrl.js":425,"./sr.js":6342,"./ss":8405,"./ss.js":8405,"./sv":2298,"./sv.js":2298,"./sw":2553,"./sw.js":2553,"./ta":6064,"./ta.js":6064,"./te":812,"./te.js":812,"./tet":7882,"./tet.js":7882,"./tg":7254,"./tg.js":7254,"./th":879,"./th.js":879,"./tk":4082,"./tk.js":4082,"./tl-ph":768,"./tl-ph.js":768,"./tlh":6259,"./tlh.js":6259,"./tr":2025,"./tr.js":2025,"./tzl":5817,"./tzl.js":5817,"./tzm":3034,"./tzm-latn":7706,"./tzm-latn.js":7706,"./tzm.js":3034,"./ug-cn":5029,"./ug-cn.js":5029,"./uk":9807,"./uk.js":9807,"./ur":5664,"./ur.js":5664,"./uz":9512,"./uz-latn":8968,"./uz-latn.js":8968,"./uz.js":9512,"./vi":9366,"./vi.js":9366,"./x-pseudo":3702,"./x-pseudo.js":3702,"./yo":7535,"./yo.js":7535,"./zh-cn":4383,"./zh-cn.js":4383,"./zh-hk":447,"./zh-hk.js":447,"./zh-mo":6810,"./zh-mo.js":6810,"./zh-tw":3367,"./zh-tw.js":3367};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=5358},2410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="#define SCALE_TYPE_LINEAR 1\n#define SCALE_TYPE_LOG 2\n\nfloat scale_transform_linear(float domain_value, vec2 range, vec2 domain) {\n    float normalized = (domain_value - domain[0]) / (domain[1] - domain[0]);\n    float range_value = normalized * (range[1] - range[0]) + range[0];\n    return range_value;\n}\n\nfloat scale_transform_linear_inverse(float range_value, vec2 range, vec2 domain) {\n    float normalized = (range_value - range[0]) / (range[1] - range[0]);\n    float domain_value = normalized * (domain[1] - domain[0]) + domain[0];\n    return domain_value;\n}\n\nfloat scale_transform_log(float domain_value, vec2 range, vec2 domain) {\n    float normalized = (log(domain_value) - log(domain[0])) / (log(domain[1]) - log(domain[0]));\n    float range_value = normalized * (range[1] - range[0]) + range[0];\n    return range_value;\n}\n\nfloat scale_transform_log_inverse(float range_value, vec2 range, vec2 domain) {\n    float normalized = (range_value - range[0]) / (range[1] - range[0]);\n    float domain_value = exp(normalized * (log(domain[1]) - log(domain[0])) + log(domain[0]));\n    return domain_value;\n}"},9676:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i="precision highp float;\nprecision highp int;\n\n#define FAST_CIRCLE 1\n#define FAST_SQUARE 2\n#define FAST_ARROW 3\n#define FAST_CROSS 4\n#define FAST_TRIANGLE_UP 5\n#define FAST_TRIANGLE_DOWN 6\n\n// This parameter is used for reducing aliasing\n#define SMOOTH_PIXELS 1.0\n\n// ANGLE_X = X * PI / 180.\n#define ANGLE_20 0.3490658503988659\n#define ANGLE_60 1.0471975511965976\n\nvarying vec4 v_fill_color;\nvarying vec4 v_stroke_color;\nvarying float v_inner_size;\nvarying float v_outer_size;\nvarying vec2 v_pixel;\n\nuniform float stroke_width;\n\n\n/*\n * Rotate a point in the 2-D plane, given an angle in radians\n */\nvec2 rotate_xy(vec2 x, float angle) {\n    float sina = sin(angle);\n    float cosa = cos(angle);\n    mat2 m = mat2(cosa, -sina, sina, cosa);\n    return m * x.xy;\n}\n\n/*\n * Returns 1.0 if pixel inside of a circle (0.0 otherwise) given the circle radius and the\n * pixel position.\n */\nfloat smooth_circle(in float radius, in vec2 pixel_position) {\n    // This function does not use the ellipse function for optimization purpose\n    // Circle equation: x^2 + y^2 = radius^2\n    float d = dot(pixel_position, pixel_position);\n    float r1 = pow(radius - SMOOTH_PIXELS, 2.0);\n    float r2 = pow(radius + SMOOTH_PIXELS, 2.0);\n    return 1.0 - smoothstep(r1, r2, d);\n}\n\n/*\n * Returns 1.0 if pixel inside of an ellipse (0.0 otherwise) given the ellipse radius and the\n * pixel position.\n */\nfloat smooth_ellipse(in float a, in float b, in vec2 pixel_position) {\n    // Ellipse equation: b^2 * x^2 + a^2 * y^2 = a^2 * b^2\n    float r_x = pow(a, 2.0);\n    float r_y = pow(b, 2.0);\n    float d = r_y * pow(pixel_position.x, 2.0) + r_x * pow(pixel_position.y, 2.0);\n    float r1 = pow(a - SMOOTH_PIXELS, 2.0) * pow(b - SMOOTH_PIXELS, 2.0);\n    float r2 = pow(a + SMOOTH_PIXELS, 2.0) * pow(b + SMOOTH_PIXELS, 2.0);\n    return 1.0 - smoothstep(r1, r2, d);\n}\n\n/*\n * Returns 1.0 if pixel inside of a rectangle (0.0 otherwise) given the rectangle half-size\n * on the x and y axes and the pixel position.\n */\nfloat smooth_rectangle(in vec2 size, in vec2 pixel_position) {\n    vec2 rec = smoothstep(vec2(-SMOOTH_PIXELS), vec2(SMOOTH_PIXELS), size - abs(pixel_position));\n    return rec.x * rec.y;\n}\n\n/*\n * Returns 1.0 if pixel inside of a rectangle (0.0 otherwise) given the rectangle half-size\n * on the x and y axes and the pixel position.\n */\nfloat rectangle(in vec2 size, in vec2 pixel_position) {\n    vec2 rec = step(0.0, size - abs(pixel_position));\n    return rec.x * rec.y;\n}\n\n/*\n * Returns 1.0 if pixel inside of a square (0.0 otherwise) given the square half-size\n * and the pixel position.\n */\nfloat smooth_square(in float size, in vec2 pixel_position) {\n    return smooth_rectangle(vec2(size), pixel_position);\n}\n\nfloat smooth_isosceles_triangle(in float angle, in float height, in vec2 pixel_position) {\n    float half_angle = angle / 2.0;\n\n    // The triangle center is on vec2(0.0, -height/3.0)\n    vec2 translated_pixel = vec2(pixel_position.x, pixel_position.y - height / 3.0);\n\n    vec2 pixel_left = rotate_xy(translated_pixel, -half_angle);\n    vec2 pixel_right = rotate_xy(translated_pixel, half_angle);\n\n    float half_height = height * 0.5;\n\n    float half_bottom = half_height * tan(half_angle);\n\n    return smoothstep(-SMOOTH_PIXELS, SMOOTH_PIXELS, half_bottom + pixel_left.x) *\n           smoothstep(-SMOOTH_PIXELS, SMOOTH_PIXELS, half_bottom - pixel_right.x) *\n           smoothstep(-SMOOTH_PIXELS, SMOOTH_PIXELS, translated_pixel.y + half_height);\n}\n\n\n/*\n * Returns 1.0 if pixel inside of a cross shape (0.0 otherwise) given the cross half-size\n * on the x and y axes and the pixel position.\n */\nfloat cross(in vec2 size, in vec2 pixel_position) {\n    float cross_shape = rectangle(size.xy, pixel_position) +\n                        rectangle(size.yx, pixel_position);\n    return clamp(cross_shape, 0.0, 1.0);\n}\n\n\nvoid main(void) {\n    // fill_weight and stroke_weight are color factors\n    // e.g. if fill_weight == 1.0 then the pixel color will be v_fill_color\n    // e.g. if stroke_weight == 1.0 then the pixel color will be v_stroke_color\n    float fill_weight = 0.0;\n    float stroke_weight = 0.0;\n\n    // Note for the reader: In the following code,\n    // - `1.0`     -> True\n    // - `0.0`     -> False\n    // - `1.0 - A` -> NOT A\n    // - `A + B`   -> A OR B\n    // - `A * B`   -> A AND B\n\n    float inner_shape = 0.0;\n    float outer_shape = 0.0;\n\n#if FAST_DRAW == FAST_CIRCLE\n\n    inner_shape = smooth_circle(v_inner_size, v_pixel);\n    outer_shape = smooth_circle(v_outer_size, v_pixel);\n\n#elif FAST_DRAW == FAST_SQUARE\n\n    inner_shape = smooth_square(v_inner_size, v_pixel);\n    outer_shape = 1.0; // Always in the outer_shape\n\n#elif FAST_DRAW == FAST_CROSS\n\n    float r = v_outer_size / 3.0;\n\n    inner_shape = cross(vec2(v_inner_size, r - 2.0 * stroke_width), v_pixel);\n    outer_shape = cross(vec2(r, v_outer_size), v_pixel);\n\n#elif FAST_DRAW == FAST_ARROW\n\n    inner_shape = smooth_isosceles_triangle(ANGLE_20, v_inner_size, v_pixel);\n    outer_shape = smooth_isosceles_triangle(ANGLE_20, v_outer_size, v_pixel);\n\n#elif FAST_DRAW == FAST_TRIANGLE_UP\n\n    inner_shape = smooth_isosceles_triangle(ANGLE_60, v_inner_size, v_pixel);\n    outer_shape = smooth_isosceles_triangle(ANGLE_60, v_outer_size, v_pixel);\n\n#elif FAST_DRAW == FAST_TRIANGLE_DOWN\n\n    vec2 reversed_pixel = vec2(v_pixel.x, -v_pixel.y);\n\n    inner_shape = smooth_isosceles_triangle(ANGLE_60, v_inner_size, reversed_pixel);\n    outer_shape = smooth_isosceles_triangle(ANGLE_60, v_outer_size, reversed_pixel);\n\n#endif\n\n    // `inner_shape` is the shape without the stroke, `outer_shape` is the shape with the stroke\n    // note that the stroke is always drawn, only that it has the `v_fill_color` if stroke is None\n    fill_weight = inner_shape;\n    stroke_weight = (1.0 - inner_shape) * outer_shape;\n\n#if !FILL\n    fill_weight = 0.0;\n#endif\n\n    gl_FragColor = v_fill_color * fill_weight + v_stroke_color * stroke_weight;\n}\n"},4558:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i='#include <scales>\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\n // for animation, all between 0 and 1\nuniform float animation_time_x;\nuniform float animation_time_y;\nuniform float animation_time_z;\nuniform float animation_time_size;\nuniform float animation_time_rotation;\nuniform float animation_time_opacity;\n\n#ifdef HAS_DEFAULT_STROKE_COLOR\nuniform vec4 default_stroke_color;\n#endif\n\nuniform bool has_selection;\nuniform bool has_hover;\n\n// maybe faster to use #IFDEFS\nuniform bool has_selected_fill;\nuniform vec4 selected_fill;\nuniform bool has_selected_stroke;\nuniform vec4 selected_stroke;\nuniform bool has_selected_opacity;\nuniform float selected_opacity;\n\nuniform bool has_unselected_fill;\nuniform vec4 unselected_fill;\nuniform bool has_unselected_stroke;\nuniform vec4 unselected_stroke;\nuniform bool has_unselected_opacity;\nuniform float unselected_opacity;\n\n\nuniform bool has_hovered_fill;\nuniform vec4 hovered_fill;\nuniform bool has_hovered_stroke;\nuniform vec4 hovered_stroke;\nuniform bool has_hovered_opacity;\nuniform float hovered_opacity;\n\nuniform bool has_unhovered_fill;\nuniform vec4 unhovered_fill;\nuniform bool has_unhovered_stroke;\nuniform vec4 unhovered_stroke;\nuniform bool has_unhovered_opacity;\nuniform float unhovered_opacity;\n\nuniform vec2 domain_x;\nuniform vec2 domain_y;\nuniform vec2 domain_z;\nuniform vec2 domain_size;\nuniform vec2 domain_rotation;\nuniform vec2 domain_opacity;\n\nuniform vec2 range_x;\nuniform vec2 range_y;\nuniform vec2 range_z;\nuniform vec2 range_size;\nuniform vec2 range_rotation;\nuniform vec2 range_opacity;\n\nuniform bool fill;\nuniform float stroke_width;\nuniform float marker_scale;\n\nvarying vec4 v_fill_color;\nvarying vec4 v_stroke_color;\nvarying float v_inner_size;\nvarying float v_outer_size;\nvarying vec2 v_pixel;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nattribute float x;\nattribute float x_previous;\nattribute float y;\nattribute float y_previous;\n\nattribute float size;\nattribute float size_previous;\n\nattribute float rotation;\nattribute float rotation_previous;\n\nattribute float opacity;\nattribute float opacity_previous;\n\n// Boolean or int not supported for attributes, using a float instead\nattribute float selected;\n\nuniform sampler2D colormap;\nuniform vec2 domain_color;\n\n#ifdef USE_COLORMAP\nattribute float color;\n#else\nattribute vec3 color;\n#endif\n\n#if SCALE_TYPE_x == SCALE_TYPE_LINEAR\n    #define SCALE_X(x) scale_transform_linear(x, range_x, domain_x)\n#elif SCALE_TYPE_x == SCALE_TYPE_LOG\n    #define SCALE_X(x) scale_transform_log(x, range_x, domain_x)\n#endif\n\n#if SCALE_TYPE_y == SCALE_TYPE_LINEAR\n    #define SCALE_Y(x) scale_transform_linear(x, range_y, domain_y)\n#elif SCALE_TYPE_y == SCALE_TYPE_LOG\n    #define SCALE_Y(x) scale_transform_log(x, range_y, domain_y)\n#endif\n\n#define SCALE_SIZE(x) scale_transform_linear(x, range_size, domain_size)\n#define SCALE_ROTATION(x) scale_transform_linear(x, range_rotation, domain_rotation)\n#define SCALE_OPACITY(x) scale_transform_linear(x, range_opacity, domain_opacity)\n\nvec3 rotate_xy(vec3 x, float angle) {\n    float sina = sin(angle);\n    float cosa = cos(angle);\n    mat2 m = mat2(cosa, -sina, sina, cosa);\n    return vec3(m * x.xy, x.z);\n}\n\nvoid main(void) {\n\n    vec3 animation_time = vec3(animation_time_x, animation_time_y, animation_time_z);\n\n    vec3 center = mix(vec3(x_previous, y_previous, 0), vec3(x, y, 0), animation_time);\n\n    // times 2 because the normalized coordinates go from [-1, 1]\n    vec3 center_pixels = vec3(SCALE_X(center.x), SCALE_Y(center.y), 0) * 2.;\n\n    // times 4 because of the normalized coordinates, and radius vs diameter use\n    float marker_size = sqrt(mix(SCALE_SIZE(size_previous), SCALE_SIZE(size), animation_time_size)) * marker_scale * 4.;\n    // we draw larger than the size for the stroke_width (on both side)\n\n    // `v_inner_size` is the marker "radius" without the stroke, `v_outer_size` is the marker "radius" with the stroke\n    v_inner_size = marker_size * 0.5 - stroke_width;\n    v_outer_size = marker_size * 0.5 + stroke_width;\n\n    // `full_size` is the marker "diameter" with the stroke\n    float full_size = marker_size + 2.0 * stroke_width;\n\n    // `v_pixel` is the pixel position relatively to the marker,\n    // e.g. vec2(0.) would be the center of the square marker\n    // e.g. vec2(0.5 * full_size) would be the top-right pixel of the square marker\n    v_pixel = (uv - 0.5) * (full_size);\n\n    float angle = SCALE_ROTATION(mix(rotation_previous, rotation, animation_time_rotation));\n    vec3 model_pos = rotate_xy(position, 1.) * full_size + center_pixels;\n\n#ifdef USE_COLORMAP\n    float color_index = (color - domain_color.x) / (domain_color.y - domain_color.x);\n    vec4 color_rgba = texture2D(colormap, vec2(color_index, 0));\n#else\n    vec4 color_rgba = vec4(color, 1.0);\n#endif\n\n    v_fill_color = color_rgba;\n    v_stroke_color = color_rgba;\n\n#ifdef HAS_DEFAULT_STROKE_COLOR\n    v_stroke_color = default_stroke_color;\n#endif\n\n    float opacity_value = SCALE_OPACITY(mix(opacity_previous, opacity, animation_time_opacity));\n    v_fill_color.a *= opacity_value;\n    v_stroke_color.a *= opacity_value;\n\n    if(has_selection) {\n        if(has_selected_fill && selected > 0.5 )\n            v_fill_color = selected_fill;\n        if(has_unselected_fill && selected < 0.5 )\n            v_fill_color = unselected_fill;\n        if(has_selected_stroke && selected > 0.5 )\n            v_stroke_color = selected_stroke;\n        if(has_unselected_stroke && selected < 0.5 )\n            v_stroke_color = unselected_stroke;\n        if(has_selected_opacity && selected > 0.5 ) {\n            v_stroke_color.a *= selected_opacity;\n            v_fill_color.a *= selected_opacity;\n        }\n        if(has_unselected_opacity && selected < 0.5 ) {\n            v_stroke_color.a *= unselected_opacity;\n            v_fill_color.a *= unselected_opacity;\n        }\n    }\n\n    v_fill_color.rgb *= v_fill_color.a;\n    v_stroke_color.rgb *= v_stroke_color.a;\n\n    gl_Position = projectionMatrix * vec4(rotate_xy(position, angle) * full_size, 1.0) +\n                  projectionMatrix * modelViewMatrix * vec4(center_pixels, 1.0);\n}\n'},5057:(e,t,n)=>{"use strict";var i,r,s;function*a(...e){for(const t of e)yield*t}function*o(){}function*l(e,t=0){for(const n of e)yield[t++,n]}function*c(e,t){let n=0;for(const i of e)t(i,n++)&&(yield i)}function u(e,t){let n=0;for(const i of e)if(t(i,n++))return i}function h(e,t){let n=0;for(const i of e)if(t(i,n++))return n-1;return-1}function d(e,t){let n;for(const i of e)void 0!==n?t(i,n)<0&&(n=i):n=i;return n}function f(e,t){let n;for(const i of e)void 0!==n?t(i,n)>0&&(n=i):n=i;return n}function p(e,t){let n,i,r=!0;for(const s of e)r?(n=s,i=s,r=!1):t(s,n)<0?n=s:t(s,i)>0&&(i=s);return r?void 0:[n,i]}function m(e){return Array.from(e)}function _(e){const t={};for(const[n,i]of e)t[n]=i;return t}function g(e,t){let n=0;for(const i of e)if(!1===t(i,n++))return}function y(e,t){let n=0;for(const i of e)if(!1===t(i,n++))return!1;return!0}function v(e,t){let n=0;for(const i of e)if(t(i,n++))return!0;return!1}function*b(e,t){let n=0;for(const i of e)yield t(i,n++)}function*x(e,t,n){void 0===t?(t=e,e=0,n=1):void 0===n&&(n=1);const i=r.rangeLength(e,t,n);for(let t=0;t<i;t++)yield e+n*t}function M(e,t,n){const i=e[Symbol.iterator]();let r=0,s=i.next();if(s.done&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(s.done)return n;let a,o,l=i.next();if(l.done&&void 0===n)return s.value;if(l.done)return t(n,s.value,r++);for(a=t(void 0===n?s.value:t(n,s.value,r++),l.value,r++);!(o=i.next()).done;)a=t(a,o.value,r++);return a}function*w(e,t){for(;0<t--;)yield e}function*S(e){yield e}function*L(e){if("function"==typeof e.retro)yield*e.retro();else for(let t=e.length-1;t>-1;t--)yield e[t]}function T(e){let t=[],n=new Set,i=new Map;for(const t of e)r(t);for(const[e]of i)s(e);return t;function r(e){let[t,n]=e,r=i.get(n);r?r.push(t):i.set(n,[t])}function s(e){if(n.has(e))return;n.add(e);let r=i.get(e);if(r)for(const e of r)s(e);t.push(e)}}function*k(e,t){let n=0;for(const i of e)0==n++%t&&(yield i)}function*A(e,t){if(t<1)return;const n=e[Symbol.iterator]();let i;for(;0<t--&&!(i=n.next()).done;)yield i.value}function*E(...e){const t=e.map((e=>e[Symbol.iterator]()));let n=t.map((e=>e.next()));for(;y(n,(e=>!e.done));n=t.map((e=>e.next())))yield n.map((e=>e.value))}n.r(t),n.d(t,{ArrayExt:()=>i,StringExt:()=>s,chain:()=>a,each:()=>g,empty:()=>o,enumerate:()=>l,every:()=>y,filter:()=>c,find:()=>u,findIndex:()=>h,map:()=>b,max:()=>f,min:()=>d,minmax:()=>p,once:()=>S,range:()=>x,reduce:()=>M,repeat:()=>w,retro:()=>L,some:()=>v,stride:()=>k,take:()=>A,toArray:()=>m,toObject:()=>_,topologicSort:()=>T,zip:()=>E}),function(e){function t(e,t,n=0,i=-1){let r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(let i=0;i<r;++i){let r=(n+i)%s;if(e[r]===t)return r}return-1}function n(e,t,n=-1,i=0){let r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(let i=0;i<r;++i){let r=(n-i+s)%s;if(e[r]===t)return r}return-1}function i(e,t,n=0,i=-1){let r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(let i=0;i<r;++i){let r=(n+i)%s;if(t(e[r],r))return r}return-1}function r(e,t,n=-1,i=0){let r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(let i=0;i<r;++i){let r=(n-i+s)%s;if(t(e[r],r))return r}return-1}function s(e,t=0,n=-1){let i=e.length;if(!(i<=1))for(t=t<0?Math.max(0,t+i):Math.min(t,i-1),n=n<0?Math.max(0,n+i):Math.min(n,i-1);t<n;){let i=e[t],r=e[n];e[t++]=r,e[n--]=i}}function a(e,t){let n=e.length;if(t<0&&(t+=n),t<0||t>=n)return;let i=e[t];for(let i=t+1;i<n;++i)e[i-1]=e[i];return e.length=n-1,i}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=i,e.findLastIndex=r,e.findFirstValue=function(e,t,n=0,r=-1){let s=i(e,t,n,r);return-1!==s?e[s]:void 0},e.findLastValue=function(e,t,n=-1,i=0){let s=r(e,t,n,i);return-1!==s?e[s]:void 0},e.lowerBound=function(e,t,n,i=0,r=-1){let s=e.length;if(0===s)return 0;let a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;for(;o>0;){let i=o>>1,r=a+i;n(e[r],t)<0?(a=r+1,o-=i+1):o=i}return a},e.upperBound=function(e,t,n,i=0,r=-1){let s=e.length;if(0===s)return 0;let a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;for(;o>0;){let i=o>>1,r=a+i;n(e[r],t)>0?o=i:(a=r+1,o-=i+1)}return a},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;++i)if(n?!n(e[i],t[i]):e[i]!==t[i])return!1;return!0},e.slice=function(e,t={}){let{start:n,stop:i,step:r}=t;if(void 0===r&&(r=1),0===r)throw new Error("Slice `step` cannot be zero.");let s,a=e.length;void 0===n?n=r<0?a-1:0:n<0?n=Math.max(n+a,r<0?-1:0):n>=a&&(n=r<0?a-1:a),void 0===i?i=r<0?-1:a:i<0?i=Math.max(i+a,r<0?-1:0):i>=a&&(i=r<0?a-1:a),s=r<0&&i>=n||r>0&&n>=i?0:r<0?Math.floor((i-n+1)/r+1):Math.floor((i-n-1)/r+1);let o=[];for(let t=0;t<s;++t)o[t]=e[n+t*r];return o},e.move=function(e,t,n){let i=e.length;if(i<=1)return;if((t=t<0?Math.max(0,t+i):Math.min(t,i-1))===(n=n<0?Math.max(0,n+i):Math.min(n,i-1)))return;let r=e[t],s=t<n?1:-1;for(let i=t;i!==n;i+=s)e[i]=e[i+s];e[n]=r},e.reverse=s,e.rotate=function(e,t,n=0,i=-1){let r=e.length;if(r<=1)return;if((n=n<0?Math.max(0,n+r):Math.min(n,r-1))>=(i=i<0?Math.max(0,i+r):Math.min(i,r-1)))return;let a=i-n+1;if(t>0?t%=a:t<0&&(t=(t%a+a)%a),0===t)return;let o=n+t;s(e,n,o-1),s(e,o,i),s(e,n,i)},e.fill=function(e,t,n=0,i=-1){let r,s=e.length;if(0!==s){n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(let i=0;i<r;++i)e[(n+i)%s]=t}},e.insert=function(e,t,n){let i=e.length;t=t<0?Math.max(0,t+i):Math.min(t,i);for(let n=i;n>t;--n)e[n]=e[n-1];e[t]=n},e.removeAt=a,e.removeFirstOf=function(e,n,i=0,r=-1){let s=t(e,n,i,r);return-1!==s&&a(e,s),s},e.removeLastOf=function(e,t,i=-1,r=0){let s=n(e,t,i,r);return-1!==s&&a(e,s),s},e.removeAllOf=function(e,t,n=0,i=-1){let r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);let s=0;for(let a=0;a<r;++a)n<=i&&a>=n&&a<=i&&e[a]===t||i<n&&(a<=i||a>=n)&&e[a]===t?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=r-s),s},e.removeFirstWhere=function(e,t,n=0,r=-1){let s,o=i(e,t,n,r);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeLastWhere=function(e,t,n=-1,i=0){let s,o=r(e,t,n,i);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeAllWhere=function(e,t,n=0,i=-1){let r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);let s=0;for(let a=0;a<r;++a)n<=i&&a>=n&&a<=i&&t(e[a],a)||i<n&&(a<=i||a>=n)&&t(e[a],a)?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=r-s),s}}(i||(i={})),function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(r||(r={})),function(e){function t(e,t,n=0){let i=new Array(t.length);for(let r=0,s=n,a=t.length;r<a;++r,++s){if(s=e.indexOf(t[r],s),-1===s)return null;i[r]=s}return i}e.findIndices=t,e.matchSumOfSquares=function(e,n,i=0){let r=t(e,n,i);if(!r)return null;let s=0;for(let e=0,t=r.length;e<t;++e){let t=r[e]-i;s+=t*t}return{score:s,indices:r}},e.matchSumOfDeltas=function(e,n,i=0){let r=t(e,n,i);if(!r)return null;let s=0,a=i-1;for(let e=0,t=r.length;e<t;++e){let t=r[e];s+=t-a-1,a=t}return{score:s,indices:r}},e.highlight=function(e,t,n){let i=[],r=0,s=0,a=t.length;for(;r<a;){let o=t[r],l=t[r];for(;++r<a&&t[r]===l+1;)l++;s<o&&i.push(e.slice(s,o)),o<l+1&&i.push(n(e.slice(o,l+1))),s=l+1}return s<e.length&&i.push(e.slice(s)),i},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(s||(s={}))},8142:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CommandRegistry:()=>u});var i,r=n(5057),s=n(2006),a=n(6038),o=n(9327),l=n(3871),c=n(8418);class u{constructor(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=new Map,this._commandChanged=new c.Signal(this),this._commandExecuted=new c.Signal(this),this._keyBindingChanged=new c.Signal(this)}get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Array.from(this._commands.keys())}hasCommand(e){return this._commands.has(e)}addCommand(e,t){if(this._commands.has(e))throw new Error(`Command '${e}' already registered.`);return this._commands.set(e,i.createCommand(t)),this._commandChanged.emit({id:e,type:"added"}),new a.At((()=>{this._commands.delete(e),this._commandChanged.emit({id:e,type:"removed"})}))}notifyCommandChanged(e){if(void 0!==e&&!this._commands.has(e))throw new Error(`Command '${e}' is not registered.`);this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})}describedBy(e,t=s.JSONExt.emptyObject){var n;let i=this._commands.get(e);return Promise.resolve(null!==(n=null==i?void 0:i.describedBy.call(void 0,t))&&void 0!==n?n:{args:null})}label(e,t=s.JSONExt.emptyObject){var n;let i=this._commands.get(e);return null!==(n=null==i?void 0:i.label.call(void 0,t))&&void 0!==n?n:""}mnemonic(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.mnemonic.call(void 0,t):-1}icon(e,t=s.JSONExt.emptyObject){var n;return null===(n=this._commands.get(e))||void 0===n?void 0:n.icon.call(void 0,t)}iconClass(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.iconClass.call(void 0,t):""}iconLabel(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.iconLabel.call(void 0,t):""}caption(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.caption.call(void 0,t):""}usage(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.usage.call(void 0,t):""}className(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.className.call(void 0,t):""}dataset(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return n?n.dataset.call(void 0,t):{}}isEnabled(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return!!n&&n.isEnabled.call(void 0,t)}isToggled(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return!!n&&n.isToggled.call(void 0,t)}isToggleable(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return!!n&&n.isToggleable}isVisible(e,t=s.JSONExt.emptyObject){let n=this._commands.get(e);return!!n&&n.isVisible.call(void 0,t)}execute(e,t=s.JSONExt.emptyObject){let n,i=this._commands.get(e);if(!i)return Promise.reject(new Error(`Command '${e}' not registered.`));try{n=i.execute.call(void 0,t)}catch(e){n=Promise.reject(e)}let r=Promise.resolve(n);return this._commandExecuted.emit({id:e,args:t,result:r}),r}addKeyBinding(e){let t=i.createKeyBinding(e);return this._keyBindings.push(t),this._keyBindingChanged.emit({binding:t,type:"added"}),new a.At((()=>{r.ArrayExt.removeFirstOf(this._keyBindings,t),this._keyBindingChanged.emit({binding:t,type:"removed"})}))}processKeydownEvent(e){if(this._replaying||u.isModifierKeyPressed(e))return;let t=u.keystrokeForKeydownEvent(e);if(!t)return this._replayKeydownEvents(),void this._clearPendingState();this._keystrokes.push(t);let{exact:n,partial:r}=i.matchKeyBinding(this._keyBindings,this._keystrokes,e);return n||r?(e.preventDefault(),e.stopPropagation(),n&&!r?(this._executeKeyBinding(n),void this._clearPendingState()):(n&&(this._exactKeyMatch=n),this._keydownEvents.push(e),void this._startTimer())):(this._replayKeydownEvents(),void this._clearPendingState())}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout((()=>{this._onPendingTimeout()}),i.CHORD_TIMEOUT)}_clearTimer(){0!==this._timerID&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){0!==this._keydownEvents.length&&(this._replaying=!0,this._keydownEvents.forEach(i.replayKeyEvent),this._replaying=!1)}_executeKeyBinding(e){let{command:t,args:n}=e,i={_luminoEvent:{type:"keybinding",keys:e.keys},...n};if(this.hasCommand(t)&&this.isEnabled(t,i))this.execute(t,i);else{let n=this.hasCommand(t)?"enabled":"registered",i=`Cannot execute key binding '${e.keys.join(", ")}':`,r=`command '${t}' is not ${n}.`;console.warn(`${i} ${r}`)}}_clearPendingState(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}}!function(e){function t(e){let t="",n=!1,i=!1,r=!1,s=!1;for(let a of e.split(/\s+/))"Accel"===a?o.Platform.IS_MAC?i=!0:r=!0:"Alt"===a?n=!0:"Cmd"===a?i=!0:"Ctrl"===a?r=!0:"Shift"===a?s=!0:a.length>0&&(t=a);return{cmd:i,ctrl:r,alt:n,shift:s,key:t}}function n(e){let n="",i=t(e);return i.ctrl&&(n+="Ctrl "),i.alt&&(n+="Alt "),i.shift&&(n+="Shift "),i.cmd&&o.Platform.IS_MAC&&(n+="Cmd "),n+i.key}e.parseKeystroke=t,e.normalizeKeystroke=n,e.normalizeKeys=function(e){let t;return t=o.Platform.IS_WIN?e.winKeys||e.keys:o.Platform.IS_MAC?e.macKeys||e.keys:e.linuxKeys||e.keys,t.map(n)},e.formatKeystroke=function(e){return"string"==typeof e?n(e):e.map(n).join(", ");function n(e){let n=[],r=o.Platform.IS_MAC?" ":"+",s=t(e);return s.ctrl&&n.push("Ctrl"),s.alt&&n.push("Alt"),s.shift&&n.push("Shift"),o.Platform.IS_MAC&&s.cmd&&n.push("Cmd"),n.push(s.key),n.map(i.formatKey).join(r)}},e.isModifierKeyPressed=function(e){let t=(0,l.mM)(),n=t.keyForKeydownEvent(e);return t.isModifierKey(n)},e.keystrokeForKeydownEvent=function(e){let t=(0,l.mM)(),n=t.keyForKeydownEvent(e);if(!n||t.isModifierKey(n))return"";let i=[];return e.ctrlKey&&i.push("Ctrl"),e.altKey&&i.push("Alt"),e.shiftKey&&i.push("Shift"),e.metaKey&&o.Platform.IS_MAC&&i.push("Cmd"),i.push(n),i.join(" ")}}(u||(u={})),function(e){e.CHORD_TIMEOUT=1e3,e.createCommand=function(e){return{execute:e.execute,describedBy:d("function"==typeof e.describedBy?e.describedBy:{args:null,...e.describedBy},(()=>({args:null}))),label:d(e.label,i),mnemonic:d(e.mnemonic,r),icon:d(e.icon,h),iconClass:d(e.iconClass,i),iconLabel:d(e.iconLabel,i),caption:d(e.caption,i),usage:d(e.usage,i),className:d(e.className,i),dataset:d(e.dataset,c),isEnabled:e.isEnabled||a,isToggled:e.isToggled||l,isToggleable:e.isToggleable||!!e.isToggled,isVisible:e.isVisible||a}},e.createKeyBinding=function(e){return{keys:u.normalizeKeys(e),selector:f(e),command:e.command,args:e.args||s.JSONExt.emptyObject}},e.matchKeyBinding=function(e,t,n){let i=null,r=!1,s=1/0,a=0;for(let l=0,c=e.length;l<c;++l){let c=e[l],u=p(c.keys,t);if(0===u)continue;if(2===u){r||-1===m(c.selector,n)||(r=!0);continue}let h=m(c.selector,n);if(-1===h||h>s)continue;let d=o.Selector.calculateSpecificity(c.selector);(!i||h<s||d>=a)&&(i=c,s=h,a=d)}return{exact:i,partial:r}},e.replayKeyEvent=function(e){e.target.dispatchEvent(function(e){let t=document.createEvent("Event"),n=e.bubbles||!0,i=e.cancelable||!0;return t.initEvent(e.type||"keydown",n,i),t.key=e.key||"",t.keyCode=e.keyCode||0,t.which=e.keyCode||0,t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.view=e.view||window,t}(e))},e.formatKey=function(e){return o.Platform.IS_MAC?t.hasOwnProperty(e)?t[e]:e:n.hasOwnProperty(e)?n[e]:e};const t={Backspace:"",Tab:"",Enter:"",Shift:"",Ctrl:"",Alt:"",Escape:"",PageUp:"",PageDown:"",End:"",Home:"",ArrowLeft:"",ArrowUp:"",ArrowRight:"",ArrowDown:"",Delete:"",Cmd:""},n={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},i=()=>"",r=()=>-1,a=()=>!0,l=()=>!1,c=()=>({}),h=()=>{};function d(e,t){return void 0===e?t:"function"==typeof e?e:()=>e}function f(e){if(-1!==e.selector.indexOf(","))throw new Error(`Selector cannot contain commas: ${e.selector}`);if(!o.Selector.isValid(e.selector))throw new Error(`Invalid selector: ${e.selector}`);return e.selector}function p(e,t){if(e.length<t.length)return 0;for(let n=0,i=t.length;n<i;++n)if(e[n]!==t[n])return 0;return e.length>t.length?2:1}function m(e,t){let n=t.target,i=t.currentTarget;for(let t=0;null!==n;n=n.parentElement,++t){if(n.hasAttribute("data-lm-suppress-shortcuts"))return-1;if(o.Selector.matches(n,e))return t;if(n===i)return-1}return-1}}(i||(i={}))},2006:function(e,t){!function(e){"use strict";e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}function i(e,r){if(e===r)return!0;if(t(e)||t(r))return!1;let s=n(e),a=n(r);return s===a&&(s&&a?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;++n)if(!i(e[n],t[n]))return!1;return!0}(e,r):function(e,t){if(e===t)return!0;for(let n in e)if(void 0!==e[n]&&!(n in t))return!1;for(let n in t)if(void 0!==t[n]&&!(n in e))return!1;for(let n in e){let r=e[n],s=t[n];if(void 0!==r||void 0!==s){if(void 0===r||void 0===s)return!1;if(!i(r,s))return!1}}return!0}(e,r))}function r(e){return t(e)?e:n(e)?function(e){let t=new Array(e.length);for(let n=0,i=e.length;n<i;++n)t[n]=r(e[n]);return t}(e):function(e){let t={};for(let n in e){let i=e[n];void 0!==i&&(t[n]=r(i))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=i,e.deepCopy=r}(e.JSONExt||(e.JSONExt={}));function t(e){let t=0;for(let n=0,i=e.length;n<i;++n)n%4==0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=(()=>{const e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:t})(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=function(e){const t=new Uint8Array(16),n=new Array(256);for(let e=0;e<16;++e)n[e]="0"+e.toString(16);for(let e=16;e<256;++e)n[e]=e.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(e.Random.getRandomValues),e.MimeData=class{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(e){return-1!==this._types.indexOf(e)}getData(e){let t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0}setData(e,t){this.clearData(e),this._types.push(e),this._values.push(t)}clearData(e){let t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))}clear(){this._types.length=0,this._values.length=0}},e.PromiseDelegate=class{constructor(){this.promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){(0,this._resolve)(e)}reject(e){(0,this._reject)(e)}},e.Token=class{constructor(e,t){this.name=e,this.description=null!=t?t:"",this._tokenStructuralPropertyT=null}}}(t)},9952:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AsyncCellRenderer:()=>M,BasicKeyHandler:()=>m,BasicMouseHandler:()=>v,BasicSelectionModel:()=>x,BooleanCellEditor:()=>R,CellEditor:()=>A,CellEditorController:()=>F,CellGroup:()=>r,CellRenderer:()=>_,DataGrid:()=>X,DataModel:()=>N,DateCellEditor:()=>P,DynamicOptionCellEditor:()=>B,GraphicsContext:()=>H,HyperlinkRenderer:()=>y,ImageRenderer:()=>Z,InputCellEditor:()=>E,IntegerCellEditor:()=>O,IntegerInputValidator:()=>T,JSONModel:()=>$,MutableDataModel:()=>I,NumberCellEditor:()=>D,NumberInputValidator:()=>k,OptionCellEditor:()=>z,PassInputValidator:()=>S,RendererMap:()=>V,SectionList:()=>q,SelectionModel:()=>b,TextCellEditor:()=>C,TextInputValidator:()=>L,TextRenderer:()=>g,resolveOption:()=>Y});var i,r,s,a,o=n(9327),l=n(3871),c=n(7481),u=n(5057),h=n(8418),d=n(4704),f=n(270),p=n(2006);class m{constructor(){this._disposed=!1}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}onKeyDown(e,t){if(e.editable&&-1!==e.selectionModel.cursorRow&&-1!==e.selectionModel.cursorColumn){const n=String.fromCharCode(t.keyCode);if(/[a-zA-Z0-9-_ ]/.test(n)){const n={grid:e,row:e.selectionModel.cursorRow,column:e.selectionModel.cursorColumn};return e.editorController.edit(n),void("Space"===(0,l.mM)().keyForKeydownEvent(t)&&(t.stopPropagation(),t.preventDefault()))}}switch((0,l.mM)().keyForKeydownEvent(t)){case"ArrowLeft":this.onArrowLeft(e,t);break;case"ArrowRight":this.onArrowRight(e,t);break;case"ArrowUp":this.onArrowUp(e,t);break;case"ArrowDown":this.onArrowDown(e,t);break;case"PageUp":this.onPageUp(e,t);break;case"PageDown":this.onPageDown(e,t);break;case"Escape":this.onEscape(e,t);break;case"Delete":this.onDelete(e,t);break;case"C":this.onKeyC(e,t);break;case"Enter":e.selectionModel&&(e.moveCursor(t.shiftKey?"up":"down"),e.scrollToCursor());break;case"Tab":e.selectionModel&&(e.moveCursor(t.shiftKey?"left":"right"),e.scrollToCursor(),t.stopPropagation(),t.preventDefault())}}onArrowLeft(e,t){t.preventDefault(),t.stopPropagation();let n=e.selectionModel,i=t.shiftKey,r=o.Platform.accelKey(t);if(!n&&r)return void e.scrollTo(0,e.scrollY);if(!n)return void e.scrollByStep("left");let s=n.selectionMode;if("row"===s&&r)return void e.scrollTo(0,e.scrollY);if("row"===s)return void e.scrollByStep("left");let a,l,c,u,h,d,f,p=n.cursorRow,m=n.cursorColumn,_=n.currentSelection();r&&i?(a=_?_.r1:0,l=_?_.r2:0,c=_?_.c1:0,u=0,h=p,d=m,f="current"):i?(a=_?_.r1:0,l=_?_.r2:0,c=_?_.c1:0,u=_?_.c2-1:0,h=p,d=m,f="current"):r?(a=p,l=p,c=0,u=0,h=a,d=c,f="all"):(a=p,l=p,c=m-1,u=m-1,h=a,d=c,f="all"),n.select({r1:a,c1:c,r2:l,c2:u,cursorRow:h,cursorColumn:d,clear:f}),_=n.currentSelection(),_&&(i||"column"===s?e.scrollToColumn(_.c2):e.scrollToCursor())}onArrowRight(e,t){t.preventDefault(),t.stopPropagation();let n=e.selectionModel,i=t.shiftKey,r=o.Platform.accelKey(t);if(!n&&r)return void e.scrollTo(e.maxScrollX,e.scrollY);if(!n)return void e.scrollByStep("right");let s=n.selectionMode;if("row"===s&&r)return void e.scrollTo(e.maxScrollX,e.scrollY);if("row"===s)return void e.scrollByStep("right");let a,l,c,u,h,d,f,p=n.cursorRow,m=n.cursorColumn,_=n.currentSelection();r&&i?(a=_?_.r1:0,l=_?_.r2:0,c=_?_.c1:0,u=1/0,h=p,d=m,f="current"):i?(a=_?_.r1:0,l=_?_.r2:0,c=_?_.c1:0,u=_?_.c2+1:0,h=p,d=m,f="current"):r?(a=p,l=p,c=1/0,u=1/0,h=a,d=c,f="all"):(a=p,l=p,c=m+1,u=m+1,h=a,d=c,f="all"),n.select({r1:a,c1:c,r2:l,c2:u,cursorRow:h,cursorColumn:d,clear:f}),_=n.currentSelection(),_&&(i||"column"===s?e.scrollToColumn(_.c2):e.scrollToCursor())}onArrowUp(e,t){t.preventDefault(),t.stopPropagation();let n=e.selectionModel,i=t.shiftKey,r=o.Platform.accelKey(t);if(!n&&r)return void e.scrollTo(e.scrollX,0);if(!n)return void e.scrollByStep("up");let s=n.selectionMode;if("column"===s&&r)return void e.scrollTo(e.scrollX,0);if("column"===s)return void e.scrollByStep("up");let a,l,c,u,h,d,f,p=n.cursorRow,m=n.cursorColumn,_=n.currentSelection();r&&i?(a=_?_.r1:0,l=0,c=_?_.c1:0,u=_?_.c2:0,h=p,d=m,f="current"):i?(a=_?_.r1:0,l=_?_.r2-1:0,c=_?_.c1:0,u=_?_.c2:0,h=p,d=m,f="current"):r?(a=0,l=0,c=m,u=m,h=a,d=c,f="all"):(a=p-1,l=p-1,c=m,u=m,h=a,d=c,f="all"),n.select({r1:a,c1:c,r2:l,c2:u,cursorRow:h,cursorColumn:d,clear:f}),_=n.currentSelection(),_&&(i||"row"===s?e.scrollToRow(_.r2):e.scrollToCursor())}onArrowDown(e,t){t.preventDefault(),t.stopPropagation();let n=e.selectionModel,i=t.shiftKey,r=o.Platform.accelKey(t);if(!n&&r)return void e.scrollTo(e.scrollX,e.maxScrollY);if(!n)return void e.scrollByStep("down");let s=n.selectionMode;if("column"===s&&r)return void e.scrollTo(e.scrollX,e.maxScrollY);if("column"===s)return void e.scrollByStep("down");let a,l,c,u,h,d,f,p=n.cursorRow,m=n.cursorColumn,_=n.currentSelection();r&&i?(a=_?_.r1:0,l=1/0,c=_?_.c1:0,u=_?_.c2:0,h=p,d=m,f="current"):i?(a=_?_.r1:0,l=_?_.r2+1:0,c=_?_.c1:0,u=_?_.c2:0,h=p,d=m,f="current"):r?(a=1/0,l=1/0,c=m,u=m,h=a,d=c,f="all"):(a=p+1,l=p+1,c=m,u=m,h=a,d=c,f="all"),n.select({r1:a,c1:c,r2:l,c2:u,cursorRow:h,cursorColumn:d,clear:f}),_=n.currentSelection(),_&&(i||"row"===s?e.scrollToRow(_.r2):e.scrollToCursor())}onPageUp(e,t){if(o.Platform.accelKey(t))return;t.preventDefault(),t.stopPropagation();let n=e.selectionModel;if(!n||"column"===n.selectionMode)return void e.scrollByPage("up");let i,r,s,a,l,c,u,h=Math.floor(e.pageHeight/e.defaultSizes.rowHeight),d=n.cursorRow,f=n.cursorColumn,p=n.currentSelection();t.shiftKey?(i=p?p.r1:0,r=p?p.r2-h:0,s=p?p.c1:0,a=p?p.c2:0,l=d,c=f,u="current"):(i=p?p.r1-h:0,r=i,s=f,a=f,l=i,c=f,u="all"),n.select({r1:i,c1:s,r2:r,c2:a,cursorRow:l,cursorColumn:c,clear:u}),p=n.currentSelection(),p&&e.scrollToRow(p.r2)}onPageDown(e,t){if(o.Platform.accelKey(t))return;t.preventDefault(),t.stopPropagation();let n=e.selectionModel;if(!n||"column"===n.selectionMode)return void e.scrollByPage("down");let i,r,s,a,l,c,u,h=Math.floor(e.pageHeight/e.defaultSizes.rowHeight),d=n.cursorRow,f=n.cursorColumn,p=n.currentSelection();t.shiftKey?(i=p?p.r1:0,r=p?p.r2+h:0,s=p?p.c1:0,a=p?p.c2:0,l=d,c=f,u="current"):(i=p?p.r1+h:0,r=i,s=f,a=f,l=i,c=f,u="all"),n.select({r1:i,c1:s,r2:r,c2:a,cursorRow:l,cursorColumn:c,clear:u}),p=n.currentSelection(),p&&e.scrollToRow(p.r2)}onEscape(e,t){e.selectionModel&&e.selectionModel.clear()}onDelete(e,t){if(e.editable&&!e.selectionModel.isEmpty){const t=e.dataModel;let n=t.rowCount("body")-1,i=t.columnCount("body")-1;for(let r of e.selectionModel.selections()){let e=Math.max(0,Math.min(r.r1,n)),s=Math.max(0,Math.min(r.c1,i)),a=Math.max(0,Math.min(r.r2,n)),o=Math.max(0,Math.min(r.c2,i));for(let n=e;n<=a;++n)for(let e=s;e<=o;++e)t.setData("body",n,e,null)}}}onKeyC(e,t){!t.shiftKey&&o.Platform.accelKey(t)&&(t.preventDefault(),t.stopPropagation(),e.copyToClipboard())}}class _{}!function(e){e.resolveOption=function(e,t){return"function"==typeof e?e(t):e}}(_||(_={}));class g extends _{constructor(e={}){super(),this.font=e.font||"12px sans-serif",this.textColor=e.textColor||"#000000",this.backgroundColor=e.backgroundColor||"",this.verticalAlignment=e.verticalAlignment||"center",this.horizontalAlignment=e.horizontalAlignment||"left",this.horizontalPadding=e.horizontalPadding||8,this.format=e.format||g.formatGeneric(),this.elideDirection=e.elideDirection||"none",this.wrapText=e.wrapText||!1}paint(e,t){this.drawBackground(e,t),this.drawText(e,t)}drawBackground(e,t){let n=_.resolveOption(this.backgroundColor,t);n&&(e.fillStyle=n,e.fillRect(t.x,t.y,t.width,t.height))}getText(e){return this.format(e)}drawText(e,t){let n=_.resolveOption(this.font,t);if(!n)return;let i=_.resolveOption(this.textColor,t);if(!i)return;let r=this.getText(t);if(!r)return;let s=_.resolveOption(this.verticalAlignment,t),a=_.resolveOption(this.horizontalAlignment,t),o=_.resolveOption(this.elideDirection,t),l=_.resolveOption(this.wrapText,t),c=t.height-("center"===s?1:2);if(c<=0)return;let u,h,d,f=g.measureFontHeight(n);switch(s){case"top":h=t.y+2+f;break;case"center":h=t.y+t.height/2+f/2;break;case"bottom":h=t.y+t.height-2;break;default:throw"unreachable"}switch(a){case"left":u=t.x+this.horizontalPadding,d=t.width-14;break;case"center":u=t.x+t.width/2,d=t.width;break;case"right":u=t.x+t.width-this.horizontalPadding,d=t.width-14;break;default:throw"unreachable"}if(f>c&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=n,e.fillStyle=i,e.textAlign=a,e.textBaseline="bottom","none"===o&&!l)return void e.fillText(r,u,h);let p=e.measureText(r).width;if(l&&p>d){e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip();const n=r.split(/\s(?=\b)/);let i=h,s=n.shift();if(0===n.length){let t=e.measureText(s).width;for(;t>d&&""!==s;)for(let n=s.length;n>0;n--){const r=s.substring(0,n);if(e.measureText(r).width<d||1===r.length){const a=s.substring(n,s.length);s=a,t=e.measureText(s).width,e.fillText(r,u,i),i+=f;break}}}else for(;0!==n.length;){const t=n.shift(),r=[s,t].join(" ");e.measureText(r).width>d?(e.fillText(s,u,i),i+=f,s=t):s=r}return void e.fillText(s,u,i)}const m="";for(;p>d&&r.length>1;){const t=[...r];r="right"===o?t.length>4&&p>=2*d?t.slice(0,Math.floor(t.length/2+1)).join("")+m:t.slice(0,t.length-2).join("")+m:t.length>4&&p>=2*d?m+t.slice(Math.floor(t.length/2)).join(""):m+t.slice(2).join(""),p=e.measureText(r).width}e.fillText(r,u,h)}}!function(e){e.formatGeneric=function(e={}){let t=e.missing||"";return({value:e})=>null==e?t:String(e)},e.formatFixed=function(e={}){let t=e.digits,n=e.missing||"";return({value:e})=>null==e?n:Number(e).toFixed(t)},e.formatPrecision=function(e={}){let t=e.digits,n=e.missing||"";return({value:e})=>null==e?n:Number(e).toPrecision(t)},e.formatExponential=function(e={}){let t=e.digits,n=e.missing||"";return({value:e})=>null==e?n:Number(e).toExponential(t)},e.formatIntlNumber=function(e={}){let t=e.missing||"",n=new Intl.NumberFormat(e.locales,e.options);return({value:e})=>null==e?t:n.format(e)},e.formatDate=function(e={}){let t=e.missing||"";return({value:e})=>null==e?t:e instanceof Date?e.toDateString():new Date(e).toDateString()},e.formatTime=function(e={}){let t=e.missing||"";return({value:e})=>null==e?t:e instanceof Date?e.toTimeString():new Date(e).toTimeString()},e.formatISODateTime=function(e={}){let t=e.missing||"";return({value:e})=>null==e?t:e instanceof Date?e.toISOString():new Date(e).toISOString()},e.formatUTCDateTime=function(e={}){let t=e.missing||"";return({value:e})=>null==e?t:e instanceof Date?e.toUTCString():new Date(e).toUTCString()},e.formatIntlDateTime=function(e={}){let t=e.missing||"",n=new Intl.DateTimeFormat(e.locales,e.options);return({value:e})=>null==e?t:n.format(e)},e.measureFontHeight=function(e){let t=i.fontHeightCache[e];if(void 0!==t)return t;i.fontMeasurementGC.font=e;let n=i.fontMeasurementGC.font;return i.fontMeasurementNode.style.font=n,document.body.appendChild(i.fontMeasurementNode),t=i.fontMeasurementNode.offsetHeight,document.body.removeChild(i.fontMeasurementNode),i.fontHeightCache[e]=t,i.fontHeightCache[n]=t,t}}(g||(g={})),function(e){e.fontHeightCache=Object.create(null),e.fontMeasurementNode=(()=>{let e=document.createElement("div");return e.style.position="absolute",e.style.top="-99999px",e.style.left="-99999px",e.style.visibility="hidden",e.textContent="M",e})(),e.fontMeasurementGC=(()=>{let e=document.createElement("canvas");return e.width=0,e.height=0,e.getContext("2d")})()}(i||(i={}));class y extends g{constructor(e={}){e.textColor=e.textColor||"navy",e.font=e.font||"bold 12px sans-serif",super(e),this.url=e.url,this.urlName=e.urlName}getText(e){let t=_.resolveOption(this.urlName,e);return t?this.format({...e,value:t}):this.format(e)}drawText(e,t){let n=_.resolveOption(this.font,t);if(!n)return;let i=_.resolveOption(this.textColor,t);if(!i)return;let r=this.getText(t);if(!r)return;let s=_.resolveOption(this.verticalAlignment,t),a=_.resolveOption(this.horizontalAlignment,t),o=_.resolveOption(this.elideDirection,t),l=_.resolveOption(this.wrapText,t),c=t.height-("center"===s?1:2);if(c<=0)return;let u,h,d,f=y.measureFontHeight(n);switch(s){case"top":h=t.y+2+f;break;case"center":h=t.y+t.height/2+f/2;break;case"bottom":h=t.y+t.height-2;break;default:throw"unreachable"}switch(a){case"left":u=t.x+8,d=t.width-14;break;case"center":u=t.x+t.width/2,d=t.width;break;case"right":u=t.x+t.width-8,d=t.width-14;break;default:throw"unreachable"}if(f>c&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=n,e.fillStyle=i,e.textAlign=a,e.textBaseline="bottom","none"===o&&!l)return void e.fillText(r,u,h);let p=e.measureText(r).width;if(l&&p>d){e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip();const n=r.split(/\s(?=\b)/);let i=h,s=n.shift();if(0===n.length){let t=e.measureText(s).width;for(;t>d&&""!==s;)for(let n=s.length;n>0;n--){const r=s.substring(0,n);if(e.measureText(r).width<d||1===r.length){const a=s.substring(n,s.length);s=a,t=e.measureText(s).width,e.fillText(r,u,i),i+=f;break}}}else for(;0!==n.length;){const t=n.shift(),r=[s,t].join(" ");e.measureText(r).width>d?(e.fillText(s,u,i),i+=f,s=t):s=r}return void e.fillText(s,u,i)}let m="";if("right"===o)for(;p>d&&r.length>1;)r=r.length>4&&p>=2*d?r.substring(0,r.length/2+1)+m:r.substring(0,r.length-2)+m,p=e.measureText(r).width;else for(;p>d&&r.length>1;)r=r.length>4&&p>=2*d?m+r.substring(r.length/2):m+r.substring(2),p=e.measureText(r).width;e.fillText(r,u,h)}}!function(e){function t(e,t){return(e.r1>=t.r1&&e.r1<=t.r2||e.r2>=t.r1&&e.r2<=t.r2||t.r1>=e.r1&&t.r1<=e.r2||t.r2>=e.r1&&t.r2<=e.r2)&&(e.c1>=t.c1&&e.c1<=t.c2||e.c2>=t.c1&&e.c2<=t.c2||t.c1>=e.c1&&t.c1<=e.c2||t.c2>=e.c1&&t.c2<=e.c2)}function n(e,t,n,i){const r=e.groupCount(t);for(let s=0;s<r;s++){const r=e.group(t,s);if(n>=r.r1&&n<=r.r2&&i>=r.c1&&i<=r.c2)return s}return-1}function i(e,t){let n=[];const i=e.groupCount(t);for(let r=0;r<i;r++){const i=e.group(t,r);n.push(i)}return n}function r(e){let t=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MAX_VALUE,r=Number.MIN_VALUE;for(const s of e)t=Math.min(t,s.r1),n=Math.max(n,s.r2),i=Math.min(i,s.c1),r=Math.max(r,s.c2);return{r1:t,r2:n,c1:i,c2:r}}e.areCellGroupsIntersectingAtAxis=function(e,t,n){return"row"===n?e.r1>=t.r1&&e.r1<=t.r2||e.r2>=t.r1&&e.r2<=t.r2||t.r1>=e.r1&&t.r1<=e.r2||t.r2>=e.r1&&t.r2<=e.r2:e.c1>=t.c1&&e.c1<=t.c2||e.c2>=t.c1&&e.c2<=t.c2||t.c1>=e.c1&&t.c1<=e.c2||t.c2>=e.c1&&t.c2<=e.c2},e.areCellGroupsIntersecting=t,e.getGroupIndex=n,e.getGroup=function(e,t,i,r){const s=n(e,t,i,r);return-1===s?null:e.group(t,s)},e.getCellGroupsAtRegion=i,e.joinCellGroups=r,e.joinCellGroupWithMergedCellGroups=function(e,n,s){let a={...n};const o=i(e,s);for(let e=0;e<o.length;e++){const n=o[e];t(a,n)&&(a=r([a,n]))}return a},e.getCellGroupsAtRow=function(e,t,n){let i=[];const r=e.groupCount(t);for(let s=0;s<r;s++){const r=e.group(t,s);n>=r.r1&&n<=r.r2&&i.push(r)}return i},e.getCellGroupsAtColumn=function(e,t,n){let i=[];const r=e.groupCount(t);for(let s=0;s<r;s++){const r=e.group(t,s);n>=r.c1&&n<=r.c2&&i.push(r)}return i},e.joinCellGroupsIntersectingAtAxis=function(t,n,i,r){let s=[];if("row"===i)for(const i of n)for(let n=r.r1;n<=r.r2;n++)s=s.concat(e.getCellGroupsAtRow(t,i,n));else for(const i of n)for(let n=r.c1;n<=r.c2;n++)s=s.concat(e.getCellGroupsAtColumn(t,i,n));let a=e.joinCellGroups(s);if(s.length>0){let r=[];for(const i of n)r=r.concat(e.getCellGroupsAtRegion(t,i));for(let t=0;t<r.length;t++){const n=r[t];e.areCellGroupsIntersectingAtAxis(a,n,i)&&(a=e.joinCellGroups([n,a]),r.splice(t,1),t=0)}}return a}}(r||(r={}));class v{constructor(){this._disposed=!1,this._pressData=null}dispose(){this._disposed||(this.release(),this._disposed=!0)}get isDisposed(){return this._disposed}release(){this._pressData&&("select"===this._pressData.type&&(this._pressData.timeout=-1),this._pressData.override.dispose(),this._pressData=null)}onMouseHover(e,t){let n=e.hitTest(t.clientX,t.clientY),i=s.resizeHandleForHitTest(n),r=this.cursorForHandle(i);const a=s.createCellConfigObject(e,n);a&&e.cellRenderers.get(a)instanceof y&&(r=this.cursorForHandle("hyperlink")),e.viewport.node.style.cursor=r}onMouseLeave(e,t){e.viewport.node.style.cursor=""}onMouseDown(e,t){let{clientX:n,clientY:i}=t,a=e.hitTest(n,i);const{region:l,row:u,column:h}=a;if("void"===l)return;let d=t.shiftKey,f=o.Platform.accelKey(t);if(e){const t=s.createCellConfigObject(e,a);let n=e.cellRenderers.get(t);if(n instanceof y){let i=_.resolveOption(n.url,t);if(i||(i=g.formatGeneric()(t)),f){window.open(i);const t=this.cursorForHandle("none");return void(e.viewport.node.style.cursor=t)}}}if("body"===l){let t=e.selectionModel;if(!t)return;let n,i,r,s,a,o,p,m=c.X.overrideCursor("default");return this._pressData={type:"select",region:l,row:u,column:h,override:m,localX:-1,localY:-1,timeout:-1},f?(n=u,r=u,i=h,s=h,a=u,o=h,p="none"):d?(n=t.cursorRow,r=u,i=t.cursorColumn,s=h,a=t.cursorRow,o=t.cursorColumn,p="current"):(n=u,r=u,i=h,s=h,a=u,o=h,p="all"),void t.select({r1:n,c1:i,r2:r,c2:s,cursorRow:a,cursorColumn:o,clear:p})}let p=s.resizeHandleForHitTest(a),m=this.cursorForHandle(p);if("left"===p||"right"===p){const t="column-resize";let i="column-header"===l?"body":"row-header",r="left"===p?h-1:h,s=e.columnSize(i,r),a=c.X.overrideCursor(m);return void(this._pressData={type:t,region:i,index:r,size:s,clientX:n,override:a})}if("top"===p||"bottom"===p){const t="row-resize";let n="row-header"===l?"body":"column-header",r="top"===p?u-1:u,s=e.rowSize(n,r),a=c.X.overrideCursor(m);return void(this._pressData={type:t,region:n,index:r,size:s,clientY:i,override:a})}let v=e.selectionModel;if(!v)return;let b,x,M,w,S,L,T,k=c.X.overrideCursor("default");if(this._pressData={type:"select",region:l,row:u,column:h,override:k,localX:-1,localY:-1,timeout:-1},"corner-header"===l)b=0,M=1/0,x=0,w=1/0,S=f?0:d?v.cursorRow:0,L=f?0:d?v.cursorColumn:0,T=f?"none":d?"current":"all";else if("row-header"===l){b=f?u:d?v.cursorRow:u,M=u;const t={r1:b,c1:0,r2:M,c2:0},n=r.joinCellGroupsIntersectingAtAxis(e.dataModel,["row-header","body"],"row",t);n.r1!=Number.MAX_VALUE&&(b=n.r1,M=n.r2),x=0,w=1/0,S=f?u:d?v.cursorRow:u,L=f?0:d?v.cursorColumn:0,T=f?"none":d?"current":"all"}else if("column-header"===l){b=0,M=1/0,x=f?h:d?v.cursorColumn:h,w=h;const t={r1:0,c1:x,r2:0,c2:w},n=r.joinCellGroupsIntersectingAtAxis(e.dataModel,["column-header","body"],"column",t);n.c1!=Number.MAX_VALUE&&(x=n.c1,w=n.c2),S=f?0:d?v.cursorRow:0,L=f?h:d?v.cursorColumn:h,T=f?"none":d?"current":"all"}else b=f?u:d?v.cursorRow:u,M=u,x=f?h:d?v.cursorColumn:h,w=h,S=f?u:d?v.cursorRow:u,L=f?h:d?v.cursorColumn:h,T=f?"none":d?"current":"all";v.select({r1:b,c1:x,r2:M,c2:w,cursorRow:S,cursorColumn:L,clear:T})}onMouseMove(e,t){const n=this._pressData;if(!n)return;if("row-resize"===n.type){let i=t.clientY-n.clientY;return void e.resizeRow(n.region,n.index,n.size+i)}if("column-resize"===n.type){let i=t.clientX-n.clientX;return void e.resizeColumn(n.region,n.index,n.size+i)}if("corner-header"===n.region)return;let i=e.selectionModel;if(!i)return;let{lx:a,ly:o}=e.mapToLocal(t.clientX,t.clientY);n.localX=a,n.localY=o;let l=e.headerWidth,c=e.headerHeight,u=e.viewportWidth,h=e.viewportHeight,d=e.scrollX,f=e.scrollY,p=e.maxScrollY,m=e.maxScrollY,_=i.selectionMode,g=-1;if("row-header"===n.region||"row"===_?o<c&&f>0?g=s.computeTimeout(c-o):o>=h&&f<m&&(g=s.computeTimeout(o-h)):"column-header"===n.region||"column"===_?a<l&&d>0?g=s.computeTimeout(l-a):a>=u&&d<p&&(g=s.computeTimeout(a-u)):a<l&&d>0?g=s.computeTimeout(l-a):a>=u&&d<p?g=s.computeTimeout(a-u):o<c&&f>0?g=s.computeTimeout(c-o):o>=h&&f<m&&(g=s.computeTimeout(o-h)),g>=0)return void(n.timeout<0?(n.timeout=g,setTimeout((()=>{s.autoselect(e,n)}),g)):n.timeout=g);n.timeout=-1;let y,v,b,x,{vx:M,vy:w}=e.mapToVirtual(t.clientX,t.clientY);M=Math.max(0,Math.min(M,e.bodyWidth-1)),w=Math.max(0,Math.min(w,e.bodyHeight-1));let S=i.cursorRow,L=i.cursorColumn;if("row-header"===n.region||"row"===_){y=n.row,b=e.rowAt("body",w);const t={r1:y,c1:0,r2:b,c2:0},i=r.joinCellGroupsIntersectingAtAxis(e.dataModel,["row-header","body"],"row",t);i.r1!=Number.MAX_VALUE&&(y=Math.min(y,i.r1),b=Math.max(b,i.r2)),v=0,x=1/0}else if("column-header"===n.region||"column"===_){y=0,b=1/0,v=n.column,x=e.columnAt("body",M);const t={r1:0,c1:v,r2:0,c2:x},i=r.joinCellGroupsIntersectingAtAxis(e.dataModel,["column-header","body"],"column",t);i.c1!=Number.MAX_VALUE&&(v=i.c1,x=i.c2)}else y=S,b=e.rowAt("body",w),v=L,x=e.columnAt("body",M);i.select({r1:y,c1:v,r2:b,c2:x,cursorRow:S,cursorColumn:L,clear:"current"})}onMouseUp(e,t){this.release()}onMouseDoubleClick(e,t){if(!e.dataModel)return void this.release();let{clientX:n,clientY:i}=t,r=e.hitTest(n,i),{region:a,row:o,column:l}=r;if("void"!==a){if("column-header"===a||"corner-header"===a){const t=s.resizeHandleForHitTest(r);if("left"===t||"right"===t){let n="left"===t?l-1:l,i="column-header"===a?"body":"row-header";if(n<0){if("column-header"!==a)return;n=e.dataModel.columnCount("row-header")-1,i="row-header"}e.resizeColumn(i,n,null)}}if("body"===a&&e.editable){const t={grid:e,row:o,column:l};e.editorController.edit(t)}this.release()}else this.release()}onContextMenu(e,t){}onWheel(e,t){if(this._pressData)return;let n=t.deltaX,i=t.deltaY;switch(t.deltaMode){case 0:break;case 1:{let t=e.defaultSizes;n*=t.columnWidth,i*=t.rowHeight;break}case 2:n*=e.pageWidth,i*=e.pageHeight;break;default:throw"unreachable"}(n<0&&0!==e.scrollX||n>0&&e.scrollX!==e.maxScrollX||i<0&&0!==e.scrollY||i>0&&e.scrollY!==e.maxScrollY)&&(t.preventDefault(),t.stopPropagation(),e.scrollBy(n,i))}cursorForHandle(e){return s.cursorMap[e]}get pressData(){return this._pressData}}!function(e){e.createCellConfigObject=function(e,t){const{region:n,row:i,column:r}=t;if("void"===n)return;const s=e.dataModel.data(n,i,r),a=e.dataModel.metadata(n,i,r);return{...t,value:s,metadata:a}},e.resizeHandleForHitTest=function(e){let t,n=e.row,i=e.column,r=e.x,s=e.y,a=e.width-e.x,o=e.height-e.y;switch(e.region){case"corner-header":case"column-header":case"row-header":t=i>0&&r<=5?"left":a<=6?"right":n>0&&s<=5?"top":o<=6?"bottom":"none";break;case"body":case"void":t="none";break;default:throw"unreachable"}return t},e.autoselect=function e(t,n){if(n.timeout<0)return;let i=t.selectionModel;if(!i)return;let r=i.currentSelection();if(!r)return;let s=n.localX,a=n.localY,o=r.r1,l=r.c1,c=r.r2,u=r.c2,h=i.cursorRow,d=i.cursorColumn,f=t.headerWidth,p=t.headerHeight,m=t.viewportWidth,_=t.viewportHeight,g=i.selectionMode;"row-header"===n.region||"row"===g?c+=a<=p?-1:a>=_?1:0:("column-header"===n.region||"column"===g||(c+=a<=p?-1:a>=_?1:0),u+=s<=f?-1:s>=m?1:0),i.select({r1:o,c1:l,r2:c,c2:u,cursorRow:h,cursorColumn:d,clear:"current"}),r=i.currentSelection(),r&&("row-header"===n.region||"row"===g?t.scrollToRow(r.r2):"column-header"===n.region||"column"==g?t.scrollToColumn(r.c2):"cell"===g&&t.scrollToCell(r.r2,r.c2),setTimeout((()=>{e(t,n)}),n.timeout))},e.computeTimeout=function(e){return 5+120*(1-Math.min(128,Math.abs(e))/128)},e.cursorMap={top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom:"ns-resize",hyperlink:"pointer",none:"default"}}(s||(s={}));class b{constructor(e){this._changed=new h.Signal(this),this._selectionMode="cell",this.dataModel=e.dataModel,this._selectionMode=e.selectionMode||"cell",this.dataModel.changed.connect(this.onDataModelChanged,this)}get changed(){return this._changed}get selectionMode(){return this._selectionMode}set selectionMode(e){this._selectionMode!==e&&(this._selectionMode=e,this.clear())}isRowSelected(e){return(0,u.some)(this.selections(),(t=>a.containsRow(t,e)))}isColumnSelected(e){return(0,u.some)(this.selections(),(t=>a.containsColumn(t,e)))}isCellSelected(e,t){return(0,u.some)(this.selections(),(n=>a.containsCell(n,e,t)))}onDataModelChanged(e,t){}emitChanged(){this._changed.emit(void 0)}}!function(e){function t(e,t){let{r1:n,r2:i}=e;return t>=n&&t<=i||t>=i&&t<=n}function n(e,t){let{c1:n,c2:i}=e;return t>=n&&t<=i||t>=i&&t<=n}e.containsRow=t,e.containsColumn=n,e.containsCell=function(e,i,r){return t(e,i)&&n(e,r)}}(a||(a={}));class x extends b{constructor(){super(...arguments),this._cursorRow=-1,this._cursorColumn=-1,this._cursorRectIndex=-1,this._selections=[]}get isEmpty(){return 0===this._selections.length}get cursorRow(){return this._cursorRow}get cursorColumn(){return this._cursorColumn}moveCursorWithinSelections(e){if(this.isEmpty||-1===this.cursorRow||-1===this._cursorColumn)return;const t=this._selections[0];if(1===this._selections.length&&t.r1===t.r2&&t.c1===t.c2)return;-1===this._cursorRectIndex&&(this._cursorRectIndex=this._selections.length-1);let n=this._selections[this._cursorRectIndex];const i="down"===e?1:"up"===e?-1:0,r="right"===e?1:"left"===e?-1:0;let s=this._cursorRow+i,a=this._cursorColumn+r;const o=Math.min(n.r1,n.r2),l=Math.max(n.r1,n.r2),c=Math.min(n.c1,n.c2),u=Math.max(n.c1,n.c2),h=()=>{this._cursorRectIndex=(this._cursorRectIndex+1)%this._selections.length,n=this._selections[this._cursorRectIndex],s=Math.min(n.r1,n.r2),a=Math.min(n.c1,n.c2)},d=()=>{this._cursorRectIndex=0===this._cursorRectIndex?this._selections.length-1:this._cursorRectIndex-1,n=this._selections[this._cursorRectIndex],s=Math.max(n.r1,n.r2),a=Math.max(n.c1,n.c2)};s>l?(s=o,a+=1,a>u&&h()):s<o?(s=l,a-=1,a<c&&d()):a>u?(a=c,s+=1,s>l&&h()):a<c&&(a=u,s-=1,s<o&&d()),this._cursorRow=s,this._cursorColumn=a,this.emitChanged()}currentSelection(){return this._selections[this._selections.length-1]||null}*selections(){yield*this._selections}select(e){let t=this.dataModel.rowCount("body"),n=this.dataModel.columnCount("body");if(t<=0||n<=0)return;let{r1:i,c1:r,r2:s,c2:a,cursorRow:o,cursorColumn:l,clear:c}=e;"all"===c?this._selections.length=0:"current"===c&&this._selections.pop(),i=Math.max(0,Math.min(i,t-1)),s=Math.max(0,Math.min(s,t-1)),r=Math.max(0,Math.min(r,n-1)),a=Math.max(0,Math.min(a,n-1));let u=!1;"row"===this.selectionMode?(r=0,a=n-1,u=0!==this._selections.filter((e=>e.r1===i)).length,this._selections=u?this._selections.filter((e=>e.r1!==i)):this._selections):"column"===this.selectionMode&&(i=0,s=t-1,u=0!==this._selections.filter((e=>e.c1===r)).length,this._selections=u?this._selections.filter((e=>e.c1!==r)):this._selections);let h=o,d=l;(h<0||h<i&&h<s||h>i&&h>s)&&(h=i),(d<0||d<r&&d<a||d>r&&d>a)&&(d=r),this._cursorRow=h,this._cursorColumn=d,this._cursorRectIndex=this._selections.length,u||this._selections.push({r1:i,c1:r,r2:s,c2:a}),this.emitChanged()}clear(){0!==this._selections.length&&(this._cursorRow=-1,this._cursorColumn=-1,this._cursorRectIndex=-1,this._selections.length=0,this.emitChanged())}onDataModelChanged(e,t){if(0===this._selections.length)return;if("cells-changed"===t.type)return;if("rows-moved"===t.type||"columns-moved"===t.type)return;let n=e.rowCount("body")-1,i=e.columnCount("body")-1;if(n<0||i<0)return this._selections.length=0,void this.emitChanged();let r=this.selectionMode,s=0;for(let e=0,t=this._selections.length;e<t;++e){let{r1:t,c1:a,r2:o,c2:l}=this._selections[e];n<t&&n<o||i<a&&i<l||("row"===r?(t=Math.max(0,Math.min(t,n)),o=Math.max(0,Math.min(o,n)),a=0,l=i):"column"===r?(t=0,o=n,a=Math.max(0,Math.min(a,i)),l=Math.max(0,Math.min(l,i))):(t=Math.max(0,Math.min(t,n)),o=Math.max(0,Math.min(o,n)),a=Math.max(0,Math.min(a,i)),l=Math.max(0,Math.min(l,i))),this._selections[s++]={r1:t,c1:a,r2:o,c2:l})}this._selections.length=s,this.emitChanged()}}class M extends _{}const w="Invalid input!";class S{validate(e,t){return{valid:!0}}}class L{constructor(){this.minLength=Number.NaN,this.maxLength=Number.NaN,this.pattern=null}validate(e,t){return null===t?{valid:!0}:"string"!=typeof t?{valid:!1,message:"Input must be valid text"}:!isNaN(this.minLength)&&t.length<this.minLength?{valid:!1,message:`Text length must be greater than ${this.minLength}`}:!isNaN(this.maxLength)&&t.length>this.maxLength?{valid:!1,message:`Text length must be less than ${this.maxLength}`}:this.pattern&&!this.pattern.test(t)?{valid:!1,message:"Text doesn't match the required pattern"}:{valid:!0}}}class T{constructor(){this.min=Number.NaN,this.max=Number.NaN}validate(e,t){return null===t?{valid:!0}:isNaN(t)||t%1!=0?{valid:!1,message:"Input must be valid integer"}:!isNaN(this.min)&&t<this.min?{valid:!1,message:`Input must be greater than ${this.min}`}:!isNaN(this.max)&&t>this.max?{valid:!1,message:`Input must be less than ${this.max}`}:{valid:!0}}}class k{constructor(){this.min=Number.NaN,this.max=Number.NaN}validate(e,t){return null===t?{valid:!0}:isNaN(t)?{valid:!1,message:"Input must be valid number"}:!isNaN(this.min)&&t<this.min?{valid:!1,message:`Input must be greater than ${this.min}`}:!isNaN(this.max)&&t>this.max?{valid:!1,message:`Input must be less than ${this.max}`}:{valid:!0}}}class A{constructor(){this.inputChanged=new h.Signal(this),this.validityNotification=null,this._disposed=!1,this._validInput=!0,this._gridWheelEventHandler=null,this.inputChanged.connect((()=>{this.validate()}))}get isDisposed(){return this._disposed}dispose(){this._disposed||(this._gridWheelEventHandler&&(this.cell.grid.node.removeEventListener("wheel",this._gridWheelEventHandler),this._gridWheelEventHandler=null),this._closeValidityNotification(),this._disposed=!0,this.cell.grid.node.removeChild(this.viewportOccluder))}edit(e,t){this.cell=e,this.onCommit=t&&t.onCommit,this.onCancel=t&&t.onCancel,this.validator=t&&t.validator?t.validator:this.createValidatorBasedOnType(),this._gridWheelEventHandler=()=>{this._closeValidityNotification(),this.updatePosition()},e.grid.node.addEventListener("wheel",this._gridWheelEventHandler),this._addContainer(),this.updatePosition(),this.startEditing()}cancel(){this._disposed||(this.dispose(),this.onCancel&&this.onCancel())}get validInput(){return this._validInput}validate(){let e;try{e=this.getInput()}catch(e){return console.log(`Input error: ${e.message}`),void this.setValidity(!1,e.message||w)}if(this.validator){const t=this.validator.validate(this.cell,e);t.valid?this.setValidity(!0):this.setValidity(!1,t.message||w)}else this.setValidity(!0)}setValidity(e,t=""){this._validInput=e,this._closeValidityNotification(),e?this.editorContainer.classList.remove("lm-mod-invalid"):(this.editorContainer.classList.add("lm-mod-invalid"),""!==t&&(this.validityNotification=new A.Notification({target:this.editorContainer,message:t,placement:"bottom",timeout:5e3}),this.validityNotification.show()))}createValidatorBasedOnType(){const e=this.cell,t=e.grid.dataModel.metadata("body",e.row,e.column);switch(t&&t.type){case"string":{const e=new L;if("string"==typeof t.format)switch(t.format){case"email":e.pattern=new RegExp("^([a-z0-9_.-]+)@([da-z.-]+).([a-z.]{2,6})$");break;case"uuid":e.pattern=new RegExp("[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}")}return t.constraint&&(void 0!==t.constraint.minLength&&(e.minLength=t.constraint.minLength),void 0!==t.constraint.maxLength&&(e.maxLength=t.constraint.maxLength),"string"==typeof t.constraint.pattern&&(e.pattern=new RegExp(t.constraint.pattern))),e}case"number":{const e=new k;return t.constraint&&(void 0!==t.constraint.minimum&&(e.min=t.constraint.minimum),void 0!==t.constraint.maximum&&(e.max=t.constraint.maximum)),e}case"integer":{const e=new T;return t.constraint&&(void 0!==t.constraint.minimum&&(e.min=t.constraint.minimum),void 0!==t.constraint.maximum&&(e.max=t.constraint.maximum)),e}}}getCellInfo(e){const{grid:t,row:n,column:i}=e;let s,a,o,l,c;const u=r.getGroup(t.dataModel,"body",n,i);if(u){a=t.headerWidth-t.scrollX+t.columnOffset("body",u.c1),o=t.headerHeight-t.scrollY+t.rowOffset("body",u.r1),l=0,c=0;for(let e=u.r1;e<=u.r2;e++)c+=t.rowSize("body",e);for(let e=u.c1;e<=u.c2;e++)l+=t.columnSize("body",e);s=t.dataModel.data("body",u.r1,u.c1)}else a=t.headerWidth-t.scrollX+t.columnOffset("body",i),o=t.headerHeight-t.scrollY+t.rowOffset("body",n),l=t.columnSize("body",i),c=t.rowSize("body",n),s=t.dataModel.data("body",n,i);return{grid:t,row:n,column:i,data:s,x:a,y:o,width:l,height:c}}updatePosition(){const e=this.cell.grid,t=this.getCellInfo(this.cell),n=e.headerHeight,i=e.headerWidth;this.viewportOccluder.style.top=n+"px",this.viewportOccluder.style.left=i+"px",this.viewportOccluder.style.width=e.viewportWidth-i+"px",this.viewportOccluder.style.height=e.viewportHeight-n+"px",this.viewportOccluder.style.position="absolute",this.editorContainer.style.left=t.x-1-i+"px",this.editorContainer.style.top=t.y-1-n+"px",this.editorContainer.style.width=t.width+1+"px",this.editorContainer.style.height=t.height+1+"px",this.editorContainer.style.visibility="visible",this.editorContainer.style.position="absolute"}commit(e="none"){if(this.validate(),!this._validInput)return!1;let t;try{t=this.getInput()}catch(e){return console.log(`Input error: ${e.message}`),!1}return this.dispose(),this.onCommit&&this.onCommit({cell:this.cell,value:t,cursorMovement:e}),!0}_addContainer(){this.viewportOccluder=document.createElement("div"),this.viewportOccluder.className="lm-DataGrid-cellEditorOccluder",this.cell.grid.node.appendChild(this.viewportOccluder),this.editorContainer=document.createElement("div"),this.editorContainer.className="lm-DataGrid-cellEditorContainer",this.viewportOccluder.appendChild(this.editorContainer),this.editorContainer.addEventListener("mouseleave",(e=>{this.viewportOccluder.style.pointerEvents=this._validInput?"none":"auto"})),this.editorContainer.addEventListener("mouseenter",(e=>{this.viewportOccluder.style.pointerEvents="none"}))}_closeValidityNotification(){this.validityNotification&&(this.validityNotification.close(),this.validityNotification=null)}}class E extends A{handleEvent(e){switch(e.type){case"keydown":this._onKeyDown(e);break;case"blur":this._onBlur(e);break;case"input":this._onInput(e)}}dispose(){this.isDisposed||(this._unbindEvents(),super.dispose())}startEditing(){this.createWidget();const e=this.cell,t=this.getCellInfo(e);this.input.value=this.deserialize(t.data),this.editorContainer.appendChild(this.input),this.input.focus(),this.input.select(),this.bindEvents()}deserialize(e){return null==e?"":e.toString()}createWidget(){const e=document.createElement("input");e.classList.add("lm-DataGrid-cellEditorWidget"),e.classList.add("lm-DataGrid-cellEditorInput"),e.spellcheck=!1,e.type=this.inputType,this.input=e}bindEvents(){this.input.addEventListener("keydown",this),this.input.addEventListener("blur",this),this.input.addEventListener("input",this)}_unbindEvents(){this.input.removeEventListener("keydown",this),this.input.removeEventListener("blur",this),this.input.removeEventListener("input",this)}_onKeyDown(e){switch((0,l.mM)().keyForKeydownEvent(e)){case"Enter":this.commit(e.shiftKey?"up":"down");break;case"Tab":this.commit(e.shiftKey?"left":"right"),e.stopPropagation(),e.preventDefault();break;case"Escape":this.cancel()}}_onBlur(e){this.isDisposed||this.commit()||(e.preventDefault(),e.stopPropagation(),this.input.focus())}_onInput(e){this.inputChanged.emit(void 0)}}class C extends E{constructor(){super(...arguments),this.inputType="text"}getInput(){return this.input.value}}class D extends E{constructor(){super(...arguments),this.inputType="number"}startEditing(){super.startEditing(),this.input.step="any";const e=this.cell,t=e.grid.dataModel.metadata("body",e.row,e.column).constraint;t&&(t.minimum&&(this.input.min=t.minimum),t.maximum&&(this.input.max=t.maximum))}getInput(){let e=this.input.value;if(""===e.trim())return null;const t=parseFloat(e);if(isNaN(t))throw new Error("Invalid input");return t}}class O extends E{constructor(){super(...arguments),this.inputType="number"}startEditing(){super.startEditing(),this.input.step="1";const e=this.cell,t=e.grid.dataModel.metadata("body",e.row,e.column).constraint;t&&(t.minimum&&(this.input.min=t.minimum),t.maximum&&(this.input.max=t.maximum))}getInput(){let e=this.input.value;if(""===e.trim())return null;let t=parseInt(e);if(isNaN(t))throw new Error("Invalid input");return t}}class P extends A{handleEvent(e){switch(e.type){case"keydown":this._onKeyDown(e);break;case"blur":this._onBlur(e)}}dispose(){this.isDisposed||(this._unbindEvents(),super.dispose())}startEditing(){this._createWidget();const e=this.cell,t=this.getCellInfo(e);this._input.value=this._deserialize(t.data),this.editorContainer.appendChild(this._input),this._input.focus(),this._bindEvents()}getInput(){return this._input.value}_deserialize(e){return null==e?"":e.toString()}_createWidget(){const e=document.createElement("input");e.type="date",e.pattern="d{4}-d{2}-d{2}",e.classList.add("lm-DataGrid-cellEditorWidget"),e.classList.add("lm-DataGrid-cellEditorInput"),this._input=e}_bindEvents(){this._input.addEventListener("keydown",this),this._input.addEventListener("blur",this)}_unbindEvents(){this._input.removeEventListener("keydown",this),this._input.removeEventListener("blur",this)}_onKeyDown(e){switch((0,l.mM)().keyForKeydownEvent(e)){case"Enter":this.commit(e.shiftKey?"up":"down");break;case"Tab":this.commit(e.shiftKey?"left":"right"),e.stopPropagation(),e.preventDefault();break;case"Escape":this.cancel()}}_onBlur(e){this.isDisposed||this.commit()||(e.preventDefault(),e.stopPropagation(),this._input.focus())}}class R extends A{handleEvent(e){switch(e.type){case"keydown":this._onKeyDown(e);break;case"mousedown":this._input.focus(),e.stopPropagation(),e.preventDefault();break;case"blur":this._onBlur(e)}}dispose(){this.isDisposed||(this._unbindEvents(),super.dispose())}startEditing(){this._createWidget();const e=this.cell,t=this.getCellInfo(e);this._input.checked=this._deserialize(t.data),this.editorContainer.appendChild(this._input),this._input.focus(),this._bindEvents()}getInput(){return this._input.checked}_deserialize(e){return null!=e&&1==e}_createWidget(){const e=document.createElement("input");e.classList.add("lm-DataGrid-cellEditorWidget"),e.classList.add("lm-DataGrid-cellEditorCheckbox"),e.type="checkbox",e.spellcheck=!1,this._input=e}_bindEvents(){this._input.addEventListener("keydown",this),this._input.addEventListener("mousedown",this),this._input.addEventListener("blur",this)}_unbindEvents(){this._input.removeEventListener("keydown",this),this._input.removeEventListener("mousedown",this),this._input.removeEventListener("blur",this)}_onKeyDown(e){switch((0,l.mM)().keyForKeydownEvent(e)){case"Enter":this.commit(e.shiftKey?"up":"down");break;case"Tab":this.commit(e.shiftKey?"left":"right"),e.stopPropagation(),e.preventDefault();break;case"Escape":this.cancel()}}_onBlur(e){this.isDisposed||this.commit()||(e.preventDefault(),e.stopPropagation(),this._input.focus())}}class z extends A{constructor(){super(...arguments),this._isMultiSelect=!1}dispose(){this.isDisposed||(super.dispose(),this._isMultiSelect&&document.body.removeChild(this._select))}startEditing(){const e=this.cell,t=this.getCellInfo(e),n=e.grid.dataModel.metadata("body",e.row,e.column);if(this._isMultiSelect="array"===n.type,this._createWidget(),this._isMultiSelect){this._select.multiple=!0;const e=this._deserialize(t.data);for(let t=0;t<this._select.options.length;++t){const n=this._select.options.item(t);n.selected=-1!==e.indexOf(n.value)}document.body.appendChild(this._select)}else this._select.value=this._deserialize(t.data),this.editorContainer.appendChild(this._select);this._select.focus(),this._bindEvents(),this.updatePosition()}getInput(){if(this._isMultiSelect){const e=[];for(let t=0;t<this._select.selectedOptions.length;++t)e.push(this._select.selectedOptions.item(t).value);return e}return this._select.value}updatePosition(){if(super.updatePosition(),!this._isMultiSelect)return;const e=this.getCellInfo(this.cell);this._select.style.position="absolute";const t=this.editorContainer.getBoundingClientRect();this._select.style.left=t.left+"px",this._select.style.top=t.top+e.height+"px",this._select.style.width=t.width+"px",this._select.style.maxHeight="60px",this.editorContainer.style.visibility="hidden"}_deserialize(e){if(null==e)return"";if(this._isMultiSelect){const t=[];if(Array.isArray(e))for(let n of e)t.push(n.toString());return t}return e.toString()}_createWidget(){const e=this.cell,t=e.grid.dataModel.metadata("body",e.row,e.column).constraint.enum,n=document.createElement("select");n.classList.add("lm-DataGrid-cellEditorWidget");for(let e of t){const t=document.createElement("option");t.value=e,t.text=e,n.appendChild(t)}this._select=n}_bindEvents(){this._select.addEventListener("keydown",this._onKeyDown.bind(this)),this._select.addEventListener("blur",this._onBlur.bind(this))}_onKeyDown(e){switch((0,l.mM)().keyForKeydownEvent(e)){case"Enter":this.commit(e.shiftKey?"up":"down");break;case"Tab":this.commit(e.shiftKey?"left":"right"),e.stopPropagation(),e.preventDefault();break;case"Escape":this.cancel()}}_onBlur(e){this.isDisposed||this.commit()||(e.preventDefault(),e.stopPropagation(),this._select.focus())}}class B extends A{handleEvent(e){switch(e.type){case"keydown":this._onKeyDown(e);break;case"blur":this._onBlur(e)}}dispose(){this.isDisposed||(this._unbindEvents(),super.dispose())}startEditing(){this._createWidget();const e=this.cell,t=this.getCellInfo(e);this._input.value=this._deserialize(t.data),this.editorContainer.appendChild(this._input),this._input.focus(),this._input.select(),this._bindEvents()}getInput(){return this._input.value}_deserialize(e){return null==e?"":e.toString()}_createWidget(){const e=this.cell,t=e.grid.dataModel,n=t.rowCount("body"),i="cell-editor-list",r=document.createElement("datalist");r.id=i;const s=document.createElement("input");s.classList.add("lm-DataGrid-cellEditorWidget"),s.classList.add("lm-DataGrid-cellEditorInput");const a=new Set;for(let i=0;i<n;++i){const n=t.data("body",i,e.column);n&&a.add(n)}a.forEach((e=>{const t=document.createElement("option");t.value=e,t.text=e,r.appendChild(t)})),this.editorContainer.appendChild(r),s.setAttribute("list",i),this._input=s}_bindEvents(){this._input.addEventListener("keydown",this),this._input.addEventListener("blur",this)}_unbindEvents(){this._input.removeEventListener("keydown",this),this._input.removeEventListener("blur",this)}_onKeyDown(e){switch((0,l.mM)().keyForKeydownEvent(e)){case"Enter":this.commit(e.shiftKey?"up":"down");break;case"Tab":this.commit(e.shiftKey?"left":"right"),e.stopPropagation(),e.preventDefault();break;case"Escape":this.cancel()}}_onBlur(e){this.isDisposed||this.commit()||(e.preventDefault(),e.stopPropagation(),this._input.focus())}}function Y(e,t){return"function"==typeof e?e(t):e}!function(e){class t extends d.Widget{constructor(e){super({node:t.createNode()}),this._message="",this.addClass("lm-DataGrid-notification"),this.setFlag(d.Widget.Flag.DisallowLayout),this._target=e.target,this._message=e.message||"",this._placement=e.placement||"bottom",d.Widget.attach(this,document.body),e.timeout&&e.timeout>0&&setTimeout((()=>{this.close()}),e.timeout)}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}get placement(){return this._placement}set placement(e){this._placement!==e&&(this._placement=e,this.update())}get message(){return this._message}set message(e){this._message!==e&&(this._message=e,this.update())}get messageNode(){return this.node.getElementsByClassName("lm-DataGrid-notificationMessage")[0]}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.update()}onAfterDetach(e){this.node.removeEventListener("mousedown",this)}onUpdateRequest(e){const t=this._target.getBoundingClientRect(),n=this.node.style;switch(this._placement){case"bottom":n.left=t.left+"px",n.top=t.bottom+"px";break;case"top":n.left=t.left+"px",n.height=t.top+"px",n.top="0",n.alignItems="flex-end",n.justifyContent="flex-end";break;case"left":n.left="0",n.width=t.left+"px",n.top=t.top+"px",n.alignItems="flex-end",n.justifyContent="flex-end";break;case"right":n.left=t.right+"px",n.top=t.top+"px"}this.messageNode.innerHTML=this._message}_evtMouseDown(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this.close())}}e.Notification=t,function(e){e.createNode=function(){const e=document.createElement("div"),t=document.createElement("div");t.className="lm-DataGrid-notificationContainer";const n=document.createElement("span");return n.className="lm-DataGrid-notificationMessage",t.appendChild(n),e.appendChild(t),e}}(t=e.Notification||(e.Notification={}))}(A||(A={}));class F{constructor(){this._editor=null,this._cell=null,this._typeBasedOverrides=new Map,this._metadataBasedOverrides=new Map}setEditor(e,t){if("string"==typeof e)this._typeBasedOverrides.set(e,t);else{const n=this._metadataIdentifierToKey(e);this._metadataBasedOverrides.set(n,[e,t])}}edit(e,t){if(!e.grid.editable)return console.error("Grid cannot be edited!"),!1;if(this.cancel(),this._cell=e,(t=t||{}).onCommit=t.onCommit||this._onCommit.bind(this),t.onCancel=t.onCancel||this._onCancel.bind(this),t.editor)return this._editor=t.editor,t.editor.edit(e,t),!0;const n=this._getEditor(e);return!!n&&(this._editor=n,n.edit(e,t),!0)}cancel(){this._editor&&(this._editor.cancel(),this._editor=null),this._cell=null}_onCommit(e){const t=this._cell;if(!t)return;const n=t.grid,i=n.dataModel;let s=t.row,a=t.column;const o=r.getGroup(n.dataModel,"body",s,a);o&&(s=o.r1,a=o.c1),i.setData("body",s,a,e.value),n.viewport.node.focus(),"none"!==e.cursorMovement&&(n.moveCursor(e.cursorMovement),n.scrollToCursor())}_onCancel(){this._cell&&this._cell.grid.viewport.node.focus()}_getDataTypeKey(e){const t=e.grid.dataModel?e.grid.dataModel.metadata("body",e.row,e.column):null;if(!t)return"default";let n="";return t&&(n=t.type),t.constraint&&t.constraint.enum&&("dynamic"===t.constraint.enum?n+=":dynamic-option":n+=":option"),n}_objectToKey(e){let t="";for(let n in e){const i=e[n];t+="object"==typeof i?`${n}:${this._objectToKey(i)}`:`[${n}:${i}]`}return t}_metadataIdentifierToKey(e){return this._objectToKey(e)}_metadataMatchesIdentifier(e,t){for(let n in t){if(!e.hasOwnProperty(n))return!1;const i=t[n],r=e[n];if("object"==typeof i){if(!this._metadataMatchesIdentifier(r,i))return!1}else if(r!==i)return!1}return!0}_getMetadataBasedEditor(e){let t;const n=e.grid.dataModel.metadata("body",e.row,e.column);return n&&this._metadataBasedOverrides.forEach((i=>{if(!t){let[r,s]=i;this._metadataMatchesIdentifier(n,r)&&(t=Y(s,e))}})),t}_getEditor(e){const t=this._getDataTypeKey(e);if(this._typeBasedOverrides.has(t))return Y(this._typeBasedOverrides.get(t),e);if(this._metadataBasedOverrides.size>0){const t=this._getMetadataBasedEditor(e);if(t)return t}switch(t){case"string":return new C;case"number":return new D;case"integer":return new O;case"boolean":return new R;case"date":return new P;case"string:option":case"number:option":case"integer:option":case"date:option":case"array:option":return new z;case"string:dynamic-option":case"number:dynamic-option":case"integer:dynamic-option":case"date:dynamic-option":return new B}if(this._typeBasedOverrides.has("default"))return Y(this._typeBasedOverrides.get("default"),e);const n=e.grid.dataModel.data("body",e.row,e.column);return n&&"object"==typeof n?void 0:new C}}class N{constructor(){this._changed=new h.Signal(this)}get changed(){return this._changed}groupCount(e){return 0}metadata(e,t,n){return N.emptyMetadata}group(e,t){return null}emitChanged(e){this._changed.emit(e)}}class I extends N{}!function(e){e.emptyMetadata=Object.freeze({})}(N||(N={}));class H{constructor(e){this._disposed=!1,this._context=e,this._state=j.State.create(e)}dispose(){if(!this._disposed)for(this._disposed=!0;this._state.next;)this._state=this._state.next,this._context.restore()}get isDisposed(){return this._disposed}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._state.fillStyle!==e&&(this._state.fillStyle=e,this._context.fillStyle=e)}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._state.strokeStyle!==e&&(this._state.strokeStyle=e,this._context.strokeStyle=e)}get font(){return this._context.font}set font(e){this._state.font!==e&&(this._state.font=e,this._context.font=e)}get textAlign(){return this._context.textAlign}set textAlign(e){this._state.textAlign!==e&&(this._state.textAlign=e,this._context.textAlign=e)}get textBaseline(){return this._context.textBaseline}set textBaseline(e){this._state.textBaseline!==e&&(this._state.textBaseline=e,this._context.textBaseline=e)}get lineCap(){return this._context.lineCap}set lineCap(e){this._state.lineCap!==e&&(this._state.lineCap=e,this._context.lineCap=e)}get lineDashOffset(){return this._context.lineDashOffset}set lineDashOffset(e){this._state.lineDashOffset!==e&&(this._state.lineDashOffset=e,this._context.lineDashOffset=e)}get lineJoin(){return this._context.lineJoin}set lineJoin(e){this._state.lineJoin!==e&&(this._state.lineJoin=e,this._context.lineJoin=e)}get lineWidth(){return this._context.lineWidth}set lineWidth(e){this._state.lineWidth!==e&&(this._state.lineWidth=e,this._context.lineWidth=e)}get miterLimit(){return this._context.miterLimit}set miterLimit(e){this._state.miterLimit!==e&&(this._state.miterLimit=e,this._context.miterLimit=e)}get shadowBlur(){return this._context.shadowBlur}set shadowBlur(e){this._state.shadowBlur!==e&&(this._state.shadowBlur=e,this._context.shadowBlur=e)}get shadowColor(){return this._context.shadowColor}set shadowColor(e){this._state.shadowColor!==e&&(this._state.shadowColor=e,this._context.shadowColor=e)}get shadowOffsetX(){return this._context.shadowOffsetX}set shadowOffsetX(e){this._state.shadowOffsetX!==e&&(this._state.shadowOffsetX=e,this._context.shadowOffsetX=e)}get shadowOffsetY(){return this._context.shadowOffsetY}set shadowOffsetY(e){this._state.shadowOffsetY!==e&&(this._state.shadowOffsetY=e,this._context.shadowOffsetY=e)}get imageSmoothingEnabled(){return this._context.imageSmoothingEnabled}set imageSmoothingEnabled(e){this._state.imageSmoothingEnabled!==e&&(this._state.imageSmoothingEnabled=e,this._context.imageSmoothingEnabled=e)}get globalAlpha(){return this._context.globalAlpha}set globalAlpha(e){this._state.globalAlpha!==e&&(this._state.globalAlpha=e,this._context.globalAlpha=e)}get globalCompositeOperation(){return this._context.globalCompositeOperation}set globalCompositeOperation(e){this._state.globalCompositeOperation!==e&&(this._state.globalCompositeOperation=e,this._context.globalCompositeOperation=e)}getLineDash(){return this._context.getLineDash()}setLineDash(e){this._context.setLineDash(e)}rotate(e){this._context.rotate(e)}scale(e,t){this._context.scale(e,t)}transform(e,t,n,i,r,s){this._context.transform(e,t,n,i,r,s)}translate(e,t){this._context.translate(e,t)}setTransform(e,t,n,i,r,s){this._context.setTransform(e,t,n,i,r,s)}save(){this._state=j.State.push(this._state),this._context.save()}restore(){this._state.next&&(this._state=j.State.pop(this._state),this._context.restore())}beginPath(){return this._context.beginPath()}closePath(){this._context.closePath()}isPointInPath(e,t,n){let i;return i=2===arguments.length?this._context.isPointInPath(e,t):this._context.isPointInPath(e,t,n),i}arc(e,t,n,i,r,s){5===arguments.length?this._context.arc(e,t,n,i,r):this._context.arc(e,t,n,i,r,s)}arcTo(e,t,n,i,r){this._context.arcTo(e,t,n,i,r)}bezierCurveTo(e,t,n,i,r,s){this._context.bezierCurveTo(e,t,n,i,r,s)}ellipse(e,t,n,i,r,s,a,o){7===arguments.length?this._context.ellipse(e,t,n,i,r,s,a):this._context.ellipse(e,t,n,i,r,s,a,o)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._context.quadraticCurveTo(e,t,n,i)}rect(e,t,n,i){this._context.rect(e,t,n,i)}clip(e){0===arguments.length?this._context.clip():this._context.clip(e)}fill(e){0===arguments.length?this._context.fill():this._context.fill(e)}stroke(){this._context.stroke()}clearRect(e,t,n,i){return this._context.clearRect(e,t,n,i)}fillRect(e,t,n,i){this._context.fillRect(e,t,n,i)}fillText(e,t,n,i){3===arguments.length?this._context.fillText(e,t,n):this._context.fillText(e,t,n,i)}strokeRect(e,t,n,i){this._context.strokeRect(e,t,n,i)}strokeText(e,t,n,i){3===arguments.length?this._context.strokeText(e,t,n):this._context.strokeText(e,t,n,i)}measureText(e){return this._context.measureText(e)}createLinearGradient(e,t,n,i){return this._context.createLinearGradient(e,t,n,i)}createRadialGradient(e,t,n,i,r,s){return this._context.createRadialGradient(e,t,n,i,r,s)}createPattern(e,t){return this._context.createPattern(e,t)}createImageData(){return this._context.createImageData.apply(this._context,arguments)}getImageData(e,t,n,i){return this._context.getImageData(e,t,n,i)}putImageData(){this._context.putImageData.apply(this._context,arguments)}drawImage(){this._context.drawImage.apply(this._context,arguments)}drawFocusIfNeeded(e){this._context.drawFocusIfNeeded(e)}}var j,U,W,G;!function(e){let t=-1;const n=[];class i{static create(e){let r=t<0?new i:n[t--];return r.next=null,r.fillStyle=e.fillStyle,r.font=e.font,r.globalAlpha=e.globalAlpha,r.globalCompositeOperation=e.globalCompositeOperation,r.imageSmoothingEnabled=e.imageSmoothingEnabled,r.lineCap=e.lineCap,r.lineDashOffset=e.lineDashOffset,r.lineJoin=e.lineJoin,r.lineWidth=e.lineWidth,r.miterLimit=e.miterLimit,r.shadowBlur=e.shadowBlur,r.shadowColor=e.shadowColor,r.shadowOffsetX=e.shadowOffsetX,r.shadowOffsetY=e.shadowOffsetY,r.strokeStyle=e.strokeStyle,r.textAlign=e.textAlign,r.textBaseline=e.textBaseline,r}static push(e){let r=t<0?new i:n[t--];return r.next=e,r.fillStyle=e.fillStyle,r.font=e.font,r.globalAlpha=e.globalAlpha,r.globalCompositeOperation=e.globalCompositeOperation,r.imageSmoothingEnabled=e.imageSmoothingEnabled,r.lineCap=e.lineCap,r.lineDashOffset=e.lineDashOffset,r.lineJoin=e.lineJoin,r.lineWidth=e.lineWidth,r.miterLimit=e.miterLimit,r.shadowBlur=e.shadowBlur,r.shadowColor=e.shadowColor,r.shadowOffsetX=e.shadowOffsetX,r.shadowOffsetY=e.shadowOffsetY,r.strokeStyle=e.strokeStyle,r.textAlign=e.textAlign,r.textBaseline=e.textBaseline,r}static pop(e){return e.fillStyle="",e.strokeStyle="",n[++t]=e,e.next}}e.State=i}(j||(j={}));class V{constructor(e={},t){this._changed=new h.Signal(this),this._values={...e},this._fallback=t||new g}get changed(){return this._changed}get(e){let t=this._values[e.region];if("function"==typeof t)try{t=t(e)}catch(e){t=void 0,console.error(e)}return t||this._fallback}update(e={},t){this._values={...this._values,...e},this._fallback=t||this._fallback,this._changed.emit(void 0)}}class q{constructor(e){this._count=0,this._length=0,this._sections=[],this._minimumSize=e.minimumSize||2,this._defaultSize=Math.max(this._minimumSize,Math.floor(e.defaultSize))}get length(){return this._length}get count(){return this._count}get minimumSize(){return this._minimumSize}set minimumSize(e){e=Math.max(2,Math.floor(e)),this._minimumSize!==e&&(this._minimumSize=e,e>this._defaultSize&&(this.defaultSize=e))}get defaultSize(){return this._defaultSize}set defaultSize(e){if(e=Math.max(this._minimumSize,Math.floor(e)),this._defaultSize===e)return;let t=e-this._defaultSize;if(this._defaultSize=e,this._length+=t*(this._count-this._sections.length),0!==this._sections.length)for(let t=0,n=this._sections.length;t<n;++t){let n=this._sections[t-1],i=this._sections[t];if(n){let t=i.index-n.index-1;i.offset=n.offset+n.size+t*e}else i.offset=i.index*e}}clampSize(e){return Math.max(this._minimumSize,Math.floor(e))}indexOf(e){if(e<0||e>=this._length||0===this._count)return-1;if(0===this._sections.length)return Math.floor(e/this._defaultSize);let t=u.ArrayExt.lowerBound(this._sections,e,U.offsetCmp);if(t<this._sections.length&&this._sections[t].offset<=e)return this._sections[t].index;if(0===t)return Math.floor(e/this._defaultSize);let n=this._sections[t-1],i=e-(n.offset+n.size);return n.index+Math.floor(i/this._defaultSize)+1}offsetOf(e){if(e<0||e>=this._count)return-1;if(0===this._sections.length)return e*this._defaultSize;let t=u.ArrayExt.lowerBound(this._sections,e,U.indexCmp);if(t<this._sections.length&&this._sections[t].index===e)return this._sections[t].offset;if(0===t)return e*this._defaultSize;let n=this._sections[t-1],i=e-n.index-1;return n.offset+n.size+i*this._defaultSize}extentOf(e){if(e<0||e>=this._count)return-1;if(0===this._sections.length)return(e+1)*this._defaultSize-1;let t=u.ArrayExt.lowerBound(this._sections,e,U.indexCmp);if(t<this._sections.length&&this._sections[t].index===e)return this._sections[t].offset+this._sections[t].size-1;if(0===t)return(e+1)*this._defaultSize-1;let n=this._sections[t-1],i=e-n.index;return n.offset+n.size+i*this._defaultSize-1}sizeOf(e){if(e<0||e>=this._count)return-1;if(0===this._sections.length)return this._defaultSize;let t=u.ArrayExt.lowerBound(this._sections,e,U.indexCmp);return t<this._sections.length&&this._sections[t].index===e?this._sections[t].size:this._defaultSize}resize(e,t){if(e<0||e>=this._count)return;t=Math.max(this._minimumSize,Math.floor(t));let n,i=u.ArrayExt.lowerBound(this._sections,e,U.indexCmp);if(i<this._sections.length&&this._sections[i].index===e){let e=this._sections[i];n=t-e.size,e.size=t}else if(0===i){let r=e*this._defaultSize;u.ArrayExt.insert(this._sections,i,{index:e,offset:r,size:t}),n=t-this._defaultSize}else{let r=this._sections[i-1],s=e-r.index-1,a=r.offset+r.size+s*this._defaultSize;u.ArrayExt.insert(this._sections,i,{index:e,offset:a,size:t}),n=t-this._defaultSize}this._length+=n;for(let e=i+1,t=this._sections.length;e<t;++e)this._sections[e].offset+=n}insert(e,t){if(t<=0)return;e=Math.max(0,Math.min(e,this._count));let n=t*this._defaultSize;if(this._count+=t,this._length+=n,0===this._sections.length)return;let i=u.ArrayExt.lowerBound(this._sections,e,U.indexCmp);for(let e=this._sections.length;i<e;++i){let e=this._sections[i];e.index+=t,e.offset+=n}}remove(e,t){if(e<0||e>=this._count||t<=0)return;if(t=Math.min(this._count-e,t),0===this._sections.length)return this._count-=t,void(this._length-=t*this._defaultSize);if(t===this._count)return this._length=0,this._count=0,void(this._sections.length=0);let n=u.ArrayExt.lowerBound(this._sections,e,U.indexCmp),i=u.ArrayExt.lowerBound(this._sections,e+t,U.indexCmp),r=this._sections.splice(n,i-n),s=(t-r.length)*this._defaultSize;for(let e=0,t=r.length;e<t;++e)s+=r[e].size;this._count-=t,this._length-=s;for(let e=n,i=this._sections.length;e<i;++e){let n=this._sections[e];n.index-=t,n.offset-=s}}move(e,t,n){if(e<0||e>=this._count||t<=0)return;if(0===this._sections.length)return;if(t=Math.min(t,this._count-e),e===(n=Math.min(Math.max(0,n),this._count-t)))return;let i=Math.min(e,n),r=u.ArrayExt.lowerBound(this._sections,i,U.indexCmp);if(r===this._sections.length)return;let s=Math.max(e+t-1,n+t-1),a=u.ArrayExt.upperBound(this._sections,s,U.indexCmp)-1;if(a<r)return;let o=n<e?e:e+t,l=o-i,c=s-o+1,h=l*this._defaultSize,d=c*this._defaultSize;for(let e=r;e<=a;++e){let t=this._sections[e];t.index<o?h+=t.size-this._defaultSize:d+=t.size-this._defaultSize}let f=u.ArrayExt.lowerBound(this._sections,o,U.indexCmp);r<=f&&f<=a&&u.ArrayExt.rotate(this._sections,f-r,r,a);for(let e=r;e<=a;++e){let t=this._sections[e];t.index<o?(t.index+=c,t.offset+=d):(t.index-=l,t.offset-=h)}}reset(){this._sections.length=0,this._length=this._count*this._defaultSize}clear(){this._count=0,this._length=0,this._sections.length=0}}!function(e){e.offsetCmp=function(e,t){return t<e.offset?1:e.offset+e.size<=t?-1:0},e.indexCmp=function(e,t){return e.index-t}}(U||(U={}));class X extends d.Widget{constructor(e={}){super(),this._scrollX=0,this._scrollY=0,this._viewportWidth=0,this._viewportHeight=0,this._mousedown=!1,this._keyHandler=null,this._mouseHandler=null,this._vScrollBarMinWidth=0,this._hScrollBarMinHeight=0,this._dpiRatio=Math.ceil(window.devicePixelRatio),this._dataModel=null,this._selectionModel=null,this._editingEnabled=!1,this.addClass("lm-DataGrid"),this._style=e.style||X.defaultStyle,this._stretchLastRow=e.stretchLastRow||!1,this._stretchLastColumn=e.stretchLastColumn||!1,this._headerVisibility=e.headerVisibility||"all",this._cellRenderers=e.cellRenderers||new V,this._copyConfig=e.copyConfig||X.defaultCopyConfig,this._cellRenderers.changed.connect(this._onRenderersChanged,this);let t=e.defaultSizes||X.defaultSizes,n=e.minimumSizes||X.minimumSizes;this._rowSections=new q({defaultSize:t.rowHeight,minimumSize:n.rowHeight}),this._columnSections=new q({defaultSize:t.columnWidth,minimumSize:n.columnWidth}),this._rowHeaderSections=new q({defaultSize:t.rowHeaderWidth,minimumSize:n.rowHeaderWidth}),this._columnHeaderSections=new q({defaultSize:t.columnHeaderHeight,minimumSize:n.columnHeaderHeight}),this._canvas=W.createCanvas(),this._buffer=W.createCanvas(),this._overlay=W.createCanvas(),this._canvasGC=this._canvas.getContext("2d"),this._bufferGC=this._buffer.getContext("2d"),this._overlayGC=this._overlay.getContext("2d"),this._canvas.style.position="absolute",this._canvas.style.top="0px",this._canvas.style.left="0px",this._canvas.style.width="0px",this._canvas.style.height="0px",this._overlay.style.position="absolute",this._overlay.style.top="0px",this._overlay.style.left="0px",this._overlay.style.width="0px",this._overlay.style.height="0px",this._viewport=new d.Widget,this._viewport.node.tabIndex=-1,this._viewport.node.style.outline="none",this._vScrollBar=new d.ScrollBar({orientation:"vertical"}),this._hScrollBar=new d.ScrollBar({orientation:"horizontal"}),this._scrollCorner=new d.Widget,this._editorController=new F,this._viewport.addClass("lm-DataGrid-viewport"),this._vScrollBar.addClass("lm-DataGrid-scrollBar"),this._hScrollBar.addClass("lm-DataGrid-scrollBar"),this._scrollCorner.addClass("lm-DataGrid-scrollCorner"),this._viewport.node.appendChild(this._canvas),this._viewport.node.appendChild(this._overlay),f.MessageLoop.installMessageHook(this._viewport,this),f.MessageLoop.installMessageHook(this._hScrollBar,this),f.MessageLoop.installMessageHook(this._vScrollBar,this),this._vScrollBar.hide(),this._hScrollBar.hide(),this._scrollCorner.hide(),this._vScrollBar.thumbMoved.connect(this._onThumbMoved,this),this._hScrollBar.thumbMoved.connect(this._onThumbMoved,this),this._vScrollBar.pageRequested.connect(this._onPageRequested,this),this._hScrollBar.pageRequested.connect(this._onPageRequested,this),this._vScrollBar.stepRequested.connect(this._onStepRequested,this),this._hScrollBar.stepRequested.connect(this._onStepRequested,this),d.GridLayout.setCellConfig(this._viewport,{row:0,column:0}),d.GridLayout.setCellConfig(this._vScrollBar,{row:0,column:1}),d.GridLayout.setCellConfig(this._hScrollBar,{row:1,column:0}),d.GridLayout.setCellConfig(this._scrollCorner,{row:1,column:1});let i=new d.GridLayout({rowCount:2,columnCount:2,rowSpacing:0,columnSpacing:0,fitPolicy:"set-no-constraint"});i.setRowStretch(0,1),i.setRowStretch(1,0),i.setColumnStretch(0,1),i.setColumnStretch(1,0),i.addWidget(this._viewport),i.addWidget(this._vScrollBar),i.addWidget(this._hScrollBar),i.addWidget(this._scrollCorner),this.layout=i}dispose(){this._releaseMouse(),this._keyHandler&&this._keyHandler.dispose(),this._mouseHandler&&this._mouseHandler.dispose(),this._keyHandler=null,this._mouseHandler=null,this._dataModel=null,this._selectionModel=null,this._rowSections.clear(),this._columnSections.clear(),this._rowHeaderSections.clear(),this._columnHeaderSections.clear(),super.dispose()}get dataModel(){return this._dataModel}set dataModel(e){this._dataModel!==e&&(this._releaseMouse(),this.selectionModel=null,this._dataModel&&this._dataModel.changed.disconnect(this._onDataModelChanged,this),e&&e.changed.connect(this._onDataModelChanged,this),this._dataModel=e,this._rowSections.clear(),this._columnSections.clear(),this._rowHeaderSections.clear(),this._columnHeaderSections.clear(),e&&(this._rowSections.insert(0,e.rowCount("body")),this._columnSections.insert(0,e.columnCount("body")),this._rowHeaderSections.insert(0,e.columnCount("row-header")),this._columnHeaderSections.insert(0,e.rowCount("column-header"))),this._scrollX=0,this._scrollY=0,this._syncViewport())}get selectionModel(){return this._selectionModel}set selectionModel(e){if(this._selectionModel!==e){if(this._releaseMouse(),e&&e.dataModel!==this._dataModel)throw new Error("SelectionModel.dataModel !== DataGrid.dataModel");this._selectionModel&&this._selectionModel.changed.disconnect(this._onSelectionsChanged,this),e&&e.changed.connect(this._onSelectionsChanged,this),this._selectionModel=e,this.repaintOverlay()}}get keyHandler(){return this._keyHandler}set keyHandler(e){this._keyHandler=e}get mouseHandler(){return this._mouseHandler}set mouseHandler(e){this._mouseHandler!==e&&(this._releaseMouse(),this._mouseHandler=e)}get style(){return this._style}set style(e){this._style!==e&&(this._style={...e},this.repaintContent(),this.repaintOverlay())}get cellRenderers(){return this._cellRenderers}set cellRenderers(e){this._cellRenderers!==e&&(this._cellRenderers.changed.disconnect(this._onRenderersChanged,this),e.changed.connect(this._onRenderersChanged,this),this._cellRenderers=e,this.repaintContent())}get headerVisibility(){return this._headerVisibility}set headerVisibility(e){this._headerVisibility!==e&&(this._headerVisibility=e,this._syncViewport())}get defaultSizes(){return{rowHeight:this._rowSections.defaultSize,columnWidth:this._columnSections.defaultSize,rowHeaderWidth:this._rowHeaderSections.defaultSize,columnHeaderHeight:this._columnHeaderSections.defaultSize}}set defaultSizes(e){this._rowSections.defaultSize=e.rowHeight,this._columnSections.defaultSize=e.columnWidth,this._rowHeaderSections.defaultSize=e.rowHeaderWidth,this._columnHeaderSections.defaultSize=e.columnHeaderHeight,this._syncViewport()}get minimumSizes(){return{rowHeight:this._rowSections.minimumSize,columnWidth:this._columnSections.minimumSize,rowHeaderWidth:this._rowHeaderSections.minimumSize,columnHeaderHeight:this._columnHeaderSections.minimumSize}}set minimumSizes(e){this._rowSections.minimumSize=e.rowHeight,this._columnSections.minimumSize=e.columnWidth,this._rowHeaderSections.minimumSize=e.rowHeaderWidth,this._columnHeaderSections.minimumSize=e.columnHeaderHeight,this._syncViewport()}get copyConfig(){return this._copyConfig}set copyConfig(e){this._copyConfig=e}get stretchLastRow(){return this._stretchLastRow}set stretchLastRow(e){e!==this._stretchLastRow&&(this._stretchLastRow=e,this._syncViewport())}get stretchLastColumn(){return this._stretchLastColumn}set stretchLastColumn(e){e!==this._stretchLastColumn&&(this._stretchLastColumn=e,this._syncViewport())}get headerWidth(){return"none"===this._headerVisibility||"column"===this._headerVisibility?0:this._rowHeaderSections.length}get headerHeight(){return"none"===this._headerVisibility||"row"===this._headerVisibility?0:this._columnHeaderSections.length}get bodyWidth(){return this._columnSections.length}get bodyHeight(){return this._rowSections.length}get totalWidth(){return this.headerWidth+this.bodyWidth}get totalHeight(){return this.headerHeight+this.bodyHeight}get viewportWidth(){return this._viewportWidth}get viewportHeight(){return this._viewportHeight}get pageWidth(){return Math.max(0,this.viewportWidth-this.headerWidth)}get pageHeight(){return Math.max(0,this.viewportHeight-this.headerHeight)}get scrollX(){return this._hScrollBar.value}get scrollY(){return this._vScrollBar.value}get maxScrollX(){return Math.max(0,this.bodyWidth-this.pageWidth-1)}get maxScrollY(){return Math.max(0,this.bodyHeight-this.pageHeight-1)}get viewport(){return this._viewport}get editorController(){return this._editorController}set editorController(e){this._editorController=e}get editingEnabled(){return this._editingEnabled}set editingEnabled(e){this._editingEnabled=e}get editable(){return this._editingEnabled&&null!==this._selectionModel&&null!==this._editorController&&this.dataModel instanceof I}get canvasGC(){return this._canvasGC}get rowSections(){return this._rowSections}get columnSections(){return this._columnSections}get rowHeaderSections(){return this._rowHeaderSections}get columnHeaderSections(){return this._columnHeaderSections}scrollToRow(e){let t=this._rowSections.count;if(0===t)return;e=Math.floor(e),e=Math.max(0,Math.min(e,t-1));let n=this._rowSections.offsetOf(e),i=this._rowSections.extentOf(e),r=this._scrollY,s=this._scrollY+this.pageHeight-1,a=0;n<r?a=n-r-10:i>s&&(a=i-s+10),0!==a&&this.scrollBy(0,a)}scrollToColumn(e){let t=this._columnSections.count;if(0===t)return;e=Math.floor(e),e=Math.max(0,Math.min(e,t-1));let n=this._columnSections.offsetOf(e),i=this._columnSections.extentOf(e),r=this._scrollX,s=this._scrollX+this.pageWidth-1,a=0;n<r?a=n-r-10:i>s&&(a=i-s+10),0!==a&&this.scrollBy(a,0)}scrollToCell(e,t){let n=this._rowSections.count,i=this._columnSections.count;if(0===n||0===i)return;e=Math.floor(e),t=Math.floor(t),e=Math.max(0,Math.min(e,n-1)),t=Math.max(0,Math.min(t,i-1));let r=this._columnSections.offsetOf(t),s=this._columnSections.extentOf(t),a=this._rowSections.offsetOf(e),o=this._rowSections.extentOf(e),l=this._scrollX,c=this._scrollX+this.pageWidth-1,u=this._scrollY,h=this._scrollY+this.pageHeight-1,d=0,f=0;r<l?d=r-l-10:s>c&&(d=s-c+10),a<u?f=a-u-10:o>h&&(f=o-h+10),0===d&&0===f||this.scrollBy(d,f)}moveCursor(e){if(!this.dataModel||!this._selectionModel||this._selectionModel.isEmpty)return;const t=this._selectionModel.selections();if(t.next()&&!t.next()){const t=this._selectionModel.currentSelection();if(t.r1===t.r2&&t.c1===t.c2){const n="down"===e?1:"up"===e?-1:0,i="right"===e?1:"left"===e?-1:0;let r=t.r1+n,s=t.c1+i;const a=this.dataModel.rowCount("body"),o=this.dataModel.columnCount("body");return r>=a?(r=0,s+=1):-1===r&&(r=a-1,s-=1),s>=o?(s=0,r+=1,r>=a&&(r=0)):-1===s&&(s=o-1,r-=1,-1===r&&(r=a-1)),void this._selectionModel.select({r1:r,c1:s,r2:r,c2:s,cursorRow:r,cursorColumn:s,clear:"all"})}}this._selectionModel.moveCursorWithinSelections(e)}scrollToCursor(){if(!this._selectionModel)return;let e=this._selectionModel.cursorRow,t=this._selectionModel.cursorColumn;this.scrollToCell(e,t)}scrollBy(e,t){this.scrollTo(this.scrollX+e,this.scrollY+t)}scrollByPage(e){let t=0,n=0;switch(e){case"up":n=-this.pageHeight;break;case"down":n=this.pageHeight;break;case"left":t=-this.pageWidth;break;case"right":t=this.pageWidth;break;default:throw"unreachable"}this.scrollTo(this.scrollX+t,this.scrollY+n)}scrollByStep(e){let t,n,i=this.scrollX,r=this.scrollY,s=this._rowSections,a=this._columnSections;switch(e){case"up":t=s.indexOf(r-1),r=t<0?r:s.offsetOf(t);break;case"down":t=s.indexOf(r),r=t<0?r:s.offsetOf(t)+s.sizeOf(t);break;case"left":n=a.indexOf(i-1),i=n<0?i:a.offsetOf(n);break;case"right":n=a.indexOf(i),i=n<0?i:a.offsetOf(n)+a.sizeOf(n);break;default:throw"unreachable"}this.scrollTo(i,r)}scrollTo(e,t){e=Math.max(0,Math.min(Math.floor(e),this.maxScrollX)),t=Math.max(0,Math.min(Math.floor(t),this.maxScrollY)),this._hScrollBar.value=e,this._vScrollBar.value=t,f.MessageLoop.postMessage(this._viewport,W.ScrollRequest)}rowCount(e){let t;return t="body"===e?this._rowSections.count:this._columnHeaderSections.count,t}columnCount(e){let t;return t="body"===e?this._columnSections.count:this._rowHeaderSections.count,t}rowAt(e,t){if(t<0)return-1;if("column-header"===e)return this._columnHeaderSections.indexOf(t);let n=this._rowSections.indexOf(t);if(n>=0)return n;if(!this._stretchLastRow)return-1;let i=this.bodyHeight,r=this.pageHeight;return r<=i||t>=r?-1:this._rowSections.count-1}columnAt(e,t){if(t<0)return-1;if("row-header"===e)return this._rowHeaderSections.indexOf(t);let n=this._columnSections.indexOf(t);if(n>=0)return n;if(!this._stretchLastColumn)return-1;let i=this.bodyWidth,r=this.pageWidth;return r<=i||t>=r?-1:this._columnSections.count-1}rowOffset(e,t){let n;return n="body"===e?this._rowSections.offsetOf(t):this._columnHeaderSections.offsetOf(t),n}columnOffset(e,t){let n;return n="body"===e?this._columnSections.offsetOf(t):this._rowHeaderSections.offsetOf(t),n}rowSize(e,t){if("column-header"===e)return this._columnHeaderSections.sizeOf(t);let n=this._rowSections.sizeOf(t);if(n<0)return n;if(!this._stretchLastRow)return n;if(t<this._rowSections.count-1)return n;let i=this.bodyHeight,r=this.pageHeight;return r<=i?n:n+(r-i)}columnSize(e,t){if("row-header"===e)return this._rowHeaderSections.sizeOf(t);let n=this._columnSections.sizeOf(t);if(n<0)return n;if(!this._stretchLastColumn)return n;if(t<this._columnSections.count-1)return n;let i=this.bodyWidth,r=this.pageWidth;return r<=i?n:n+(r-i)}resizeRow(e,t,n){let i=new W.RowResizeRequest(e,t,n);f.MessageLoop.postMessage(this._viewport,i)}resizeColumn(e,t,n){let i=new W.ColumnResizeRequest(e,t,n);f.MessageLoop.postMessage(this._viewport,i)}resetRows(e){switch(e){case"all":this._rowSections.reset(),this._columnHeaderSections.reset();break;case"body":this._rowSections.reset();break;case"column-header":this._columnHeaderSections.reset();break;default:throw"unreachable"}this.repaintContent(),this.repaintOverlay()}resetColumns(e){switch(e){case"all":this._columnSections.reset(),this._rowHeaderSections.reset();break;case"body":this._columnSections.reset();break;case"row-header":this._rowHeaderSections.reset();break;default:throw"unreachable"}this.repaintContent(),this.repaintOverlay()}fitColumnNames(e="all",t=15,n){if(this.dataModel){let i=void 0===n||n<0?void 0:n;if("row-header"===e||"all"===e)if(void 0!==i){const e=this.dataModel.columnCount("row-header");i-e<0?(this._fitRowColumnHeaders(this.dataModel,t,i),i=0):(this._fitRowColumnHeaders(this.dataModel,t,e),i-=e)}else this._fitRowColumnHeaders(this.dataModel,t);if("body"===e||"all"===e)if(void 0!==i){const e=this.dataModel.columnCount("body");i-e<0?this._fitBodyColumnHeaders(this.dataModel,t,i):this._fitBodyColumnHeaders(this.dataModel,t,Math.min(i,e))}else this._fitBodyColumnHeaders(this.dataModel,t)}}mapToLocal(e,t){let n=this._viewport.node.getBoundingClientRect(),{left:i,top:r}=n;return i=Math.floor(i),r=Math.floor(r),{lx:e-i,ly:t-r}}mapToVirtual(e,t){let{lx:n,ly:i}=this.mapToLocal(e,t);return{vx:n+this.scrollX-this.headerWidth,vy:i+this.scrollY-this.headerHeight}}hitTest(e,t){let{lx:n,ly:i}=this.mapToLocal(e,t),r=this.headerWidth,s=this.headerHeight,a=this.bodyWidth,o=this.bodyHeight,l=this.pageHeight,c=this.pageWidth;if(this._stretchLastColumn&&c>a&&(a=c),this._stretchLastRow&&l>o&&(o=l),n>=0&&n<r&&i>=0&&i<s){let e=n,t=i,r=this.rowAt("column-header",t),s=this.columnAt("row-header",e);return{region:"corner-header",row:r,column:s,x:e-this.columnOffset("row-header",s),y:t-this.rowOffset("column-header",r),width:this.columnSize("row-header",s),height:this.rowSize("column-header",r)}}if(i>=0&&i<s&&n>=0&&n<r+a){let e=n+this._scrollX-r,t=i,s=this.rowAt("column-header",t),a=this.columnAt("body",e);return{region:"column-header",row:s,column:a,x:e-this.columnOffset("body",a),y:t-this.rowOffset("column-header",s),width:this.columnSize("body",a),height:this.rowSize("column-header",s)}}if(n>=0&&n<r&&i>=0&&i<s+o){let e=n,t=i+this._scrollY-s,r=this.rowAt("body",t),a=this.columnAt("row-header",e);return{region:"row-header",row:r,column:a,x:e-this.columnOffset("row-header",a),y:t-this.rowOffset("body",r),width:this.columnSize("row-header",a),height:this.rowSize("body",r)}}if(n>=r&&n<r+a&&i>=s&&i<s+o){let e=n+this._scrollX-r,t=i+this._scrollY-s,a=this.rowAt("body",t),o=this.columnAt("body",e);return{region:"body",row:a,column:o,x:e-this.columnOffset("body",o),y:t-this.rowOffset("body",a),width:this.columnSize("body",o),height:this.rowSize("body",a)}}return{region:"void",row:-1,column:-1,x:-1,y:-1,width:-1,height:-1}}copyToClipboard(){let e=this._dataModel;if(!e)return;let t=this._selectionModel;if(!t)return;let n=Array.from(t.selections());if(0===n.length)return;if(n.length>1)return void alert("Cannot copy multiple grid selections.");let i=e.rowCount("body"),r=e.columnCount("body");if(0===i||0===r)return;let{r1:s,c1:a,r2:l,c2:c}=n[0];s=Math.max(0,Math.min(s,i-1)),a=Math.max(0,Math.min(a,r-1)),l=Math.max(0,Math.min(l,i-1)),c=Math.max(0,Math.min(c,r-1)),l<s&&([s,l]=[l,s]),c<a&&([a,c]=[c,a]);let u=e.columnCount("row-header"),h=e.rowCount("column-header"),d=this._copyConfig.separator,f=this._copyConfig.format,p=this._copyConfig.headers,m=this._copyConfig.warningThreshold,_=l-s+1,g=c-a+1;switch(p){case"none":u=0,h=0;break;case"row":h=0,g+=u;break;case"column":u=0,_+=h;break;case"all":_+=h,g+=u;break;default:throw"unreachable"}let y=_*g;if(y>m){let e=`Copying ${y} cells may take a while. Continue?`;if(!window.confirm(e))return}let v={region:"body",row:0,column:0,value:null,metadata:{}},b=new Array(_);for(let t=0;t<_;++t){let n=new Array(g);for(let i=0;i<g;++i){let r,o,l;t<h&&i<u?(r="corner-header",o=t,l=i):t<h?(r="column-header",o=t,l=i-u+a):i<u?(r="row-header",o=t-h+s,l=i):(r="body",o=t-h+s,l=i-u+a),v.region=r,v.row=o,v.column=l,v.value=e.data(r,o,l),v.metadata=e.metadata(r,o,l),n[i]=f(v)}b[t]=n}let x=b.map((e=>e.join(d))).join("\n");o.ClipboardExt.copyText(x)}processMessage(e){if("child-shown"!==e.type&&"child-hidden"!==e.type){if("fit-request"===e.type){let e=o.ElementExt.sizeLimits(this._vScrollBar.node),t=o.ElementExt.sizeLimits(this._hScrollBar.node);this._vScrollBarMinWidth=e.minWidth,this._hScrollBarMinHeight=t.minHeight}super.processMessage(e)}}messageHook(e,t){return e===this._viewport?(this._processViewportMessage(t),!0):e===this._hScrollBar&&"activate-request"===t.type?(this.activate(),!1):e!==this._vScrollBar||"activate-request"!==t.type||(this.activate(),!1)}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"dblclick":this._evtMouseDoubleClick(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"contextmenu":this._evtContextMenu(e);break;case"wheel":this._evtWheel(e);break;case"resize":this._refreshDPI()}}onActivateRequest(e){this.viewport.node.focus({preventScroll:!0})}onBeforeAttach(e){window.addEventListener("resize",this),this.node.addEventListener("wheel",this),this._viewport.node.addEventListener("keydown",this),this._viewport.node.addEventListener("mousedown",this),this._viewport.node.addEventListener("mousemove",this),this._viewport.node.addEventListener("dblclick",this),this._viewport.node.addEventListener("mouseleave",this),this._viewport.node.addEventListener("contextmenu",this),this.repaintContent(),this.repaintOverlay()}onAfterDetach(e){window.removeEventListener("resize",this),this.node.removeEventListener("wheel",this),this._viewport.node.removeEventListener("keydown",this),this._viewport.node.removeEventListener("mousedown",this),this._viewport.node.removeEventListener("mousemove",this),this._viewport.node.removeEventListener("mouseleave",this),this._viewport.node.removeEventListener("dblclick",this),this._viewport.node.removeEventListener("contextmenu",this),this._releaseMouse()}onBeforeShow(e){this.repaintContent(),this.repaintOverlay()}onResize(e){this._editorController&&this._editorController.cancel(),this._syncScrollState()}repaintContent(){let e=new W.PaintRequest("all",0,0,0,0);f.MessageLoop.postMessage(this._viewport,e)}repaintRegion(e,t,n,i,r){let s=new W.PaintRequest(e,t,n,i,r);f.MessageLoop.postMessage(this._viewport,s)}repaintOverlay(){f.MessageLoop.postMessage(this._viewport,W.OverlayPaintRequest)}_getMaxWidthInColumn(e,t){const n=this.dataModel;if(!n)return null;const i="row-header"==t?"corner-header":"column-header";return Math.max(this._getMaxWidthInArea(n,e,i,"column-header"),this._getMaxWidthInArea(n,e,t,"body"))}_getMaxWidthInArea(e,t,n,i){const r=e.rowCount(i),s=Array.from({length:Math.min(r,1e6)},((i,r)=>X._getConfig(e,r,t,n)));r>1e5&&s.sort((e=>-this._getTextToRender(e).length));let a=0;for(let e=0;e<r&&e<1e5;++e){const t=this._getCellTextWidth(s[e]);a=Math.max(a,t)}return a}static _getConfig(e,t,n,i){return{x:0,y:0,width:0,height:0,region:i,row:t,column:n,value:X._getCellValue(e,i,t,n),metadata:X._getCellMetadata(e,i,t,n)}}_getTextToRender(e){return this.cellRenderers.get(e).getText(e)}_getCellTextWidth(e){const t=this.cellRenderers.get(e),n=this.canvasGC;n.font=_.resolveOption(t.font,e),n.fillStyle=_.resolveOption(t.textColor,e),n.textAlign=_.resolveOption(t.horizontalAlignment,e),n.textBaseline="bottom";const i=this._getTextToRender(e);return n.measureText(i).width+2*t.horizontalPadding}_resizeCanvasIfNeeded(e,t){e*=this._dpiRatio,t*=this._dpiRatio;let n=512*(Math.ceil((e+1)/512)+1),i=512*(Math.ceil((t+1)/512)+1),r=this._canvas.width,s=this._canvas.height;if(r>=e&&s>=t&&r<=n&&s<=i)return;let a=n-512,o=i-512;this._canvasGC.setTransform(1,0,0,1,0,0),this._bufferGC.setTransform(1,0,0,1,0,0),this._overlayGC.setTransform(1,0,0,1,0,0),r<e?this._buffer.width=a:r>n&&(this._buffer.width=n),s<t?this._buffer.height=o:s>i&&(this._buffer.height=i);let l=r>0&&s>0&&e>0&&t>0;l&&this._bufferGC.drawImage(this._canvas,0,0),r<e?(this._canvas.width=a,this._canvas.style.width=a/this._dpiRatio+"px"):r>n&&(this._canvas.width=n,this._canvas.style.width=n/this._dpiRatio+"px"),s<t?(this._canvas.height=o,this._canvas.style.height=o/this._dpiRatio+"px"):s>i&&(this._canvas.height=i,this._canvas.style.height=i/this._dpiRatio+"px"),l&&this._canvasGC.drawImage(this._buffer,0,0),l&&this._bufferGC.drawImage(this._overlay,0,0),r<e?(this._overlay.width=a,this._overlay.style.width=a/this._dpiRatio+"px"):r>n&&(this._overlay.width=n,this._overlay.style.width=n/this._dpiRatio+"px"),s<t?(this._overlay.height=o,this._overlay.style.height=o/this._dpiRatio+"px"):s>i&&(this._overlay.height=i,this._overlay.style.height=i/this._dpiRatio+"px"),l&&this._overlayGC.drawImage(this._buffer,0,0)}_syncScrollState(){let e=this.bodyWidth,t=this.bodyHeight,n=this.pageWidth,i=this.pageHeight,r=!this._vScrollBar.isHidden,s=!this._hScrollBar.isHidden,a=this._vScrollBarMinWidth,o=this._hScrollBarMinHeight,l=n+(r?a:0),c=i+(s?o:0),u=c<t-1,h=l<e-1;u&&!h&&(h=l-a<e-1),h&&!u&&(u=c-o<t-1),u===r&&h===s||(this._vScrollBar.setHidden(!u),this._hScrollBar.setHidden(!h),this._scrollCorner.setHidden(!u||!h),f.MessageLoop.sendMessage(this,d.Widget.Msg.FitRequest)),this._vScrollBar.maximum=this.maxScrollY,this._vScrollBar.page=this.pageHeight,this._hScrollBar.maximum=this.maxScrollX,this._hScrollBar.page=this.pageWidth,this._scrollTo(this._scrollX,this._scrollY)}_syncViewport(){this.repaintContent(),this.repaintOverlay(),this._syncScrollState()}_processViewportMessage(e){switch(e.type){case"resize":this._onViewportResize(e);break;case"scroll-request":this._onViewportScrollRequest(e);break;case"paint-request":this._onViewportPaintRequest(e);break;case"overlay-paint-request":this._onViewportOverlayPaintRequest(e);break;case"row-resize-request":this._onViewportRowResizeRequest(e);break;case"column-resize-request":this._onViewportColumnResizeRequest(e)}}_onViewportResize(e){if(!this._viewport.isVisible)return;let{width:t,height:n}=e;-1===t&&(t=this._viewport.node.offsetWidth),-1===n&&(n=this._viewport.node.offsetHeight),t=Math.round(t),n=Math.round(n);let i=this._viewportWidth,r=this._viewportHeight;if(this._viewportWidth=t,this._viewportHeight=n,this._resizeCanvasIfNeeded(t,n),0!==t&&0!==n){if(0===i||0===r)return this.paintContent(0,0,t,n),void this._paintOverlay();if(this._stretchLastColumn&&this.pageWidth>this.bodyWidth){let e=this._columnSections.offsetOf(this._columnSections.count-1),r=Math.min(this.headerWidth+e,i);this.paintContent(r,0,t-r,n)}else t>i&&this.paintContent(i,0,t-i+1,n);if(this._stretchLastRow&&this.pageHeight>this.bodyHeight){let e=this._rowSections.offsetOf(this._rowSections.count-1),i=Math.min(this.headerHeight+e,r);this.paintContent(0,i,t,n-i)}else n>r&&this.paintContent(0,r,t,n-r+1);this._paintOverlay()}}_onViewportScrollRequest(e){this._scrollTo(this._hScrollBar.value,this._vScrollBar.value)}_onViewportPaintRequest(e){if(!this._viewport.isVisible)return;if(0===this._viewportWidth||0===this._viewportHeight)return;let t,n,i,r,s=this._viewportWidth-1,a=this._viewportHeight-1,o=this._scrollX,l=this._scrollY,c=this.headerWidth,u=this.headerHeight,h=this._rowSections,d=this._columnSections,f=this._rowHeaderSections,p=this._columnHeaderSections,{region:m,r1:_,c1:g,r2:y,c2:v}=e;switch(m){case"all":t=0,n=0,i=s,r=a;break;case"body":_=Math.max(0,Math.min(_,h.count)),g=Math.max(0,Math.min(g,d.count)),y=Math.max(0,Math.min(y,h.count)),v=Math.max(0,Math.min(v,d.count)),t=d.offsetOf(g)-o+c,n=h.offsetOf(_)-l+u,i=d.extentOf(v)-o+c,r=h.extentOf(y)-l+u;break;case"row-header":_=Math.max(0,Math.min(_,h.count)),g=Math.max(0,Math.min(g,f.count)),y=Math.max(0,Math.min(y,h.count)),v=Math.max(0,Math.min(v,f.count)),t=f.offsetOf(g),n=h.offsetOf(_)-l+u,i=f.extentOf(v),r=h.extentOf(y)-l+u;break;case"column-header":_=Math.max(0,Math.min(_,p.count)),g=Math.max(0,Math.min(g,d.count)),y=Math.max(0,Math.min(y,p.count)),v=Math.max(0,Math.min(v,d.count)),t=d.offsetOf(g)-o+c,n=p.offsetOf(_),i=d.extentOf(v)-o+c,r=p.extentOf(y);break;case"corner-header":_=Math.max(0,Math.min(_,p.count)),g=Math.max(0,Math.min(g,f.count)),y=Math.max(0,Math.min(y,p.count)),v=Math.max(0,Math.min(v,f.count)),t=f.offsetOf(g),n=p.offsetOf(_),i=f.extentOf(v),r=p.extentOf(y);break;default:throw"unreachable"}i<0||r<0||t>s||n>a||(t=Math.max(0,Math.min(t,s)),n=Math.max(0,Math.min(n,a)),i=Math.max(0,Math.min(i,s)),r=Math.max(0,Math.min(r,a)),this.paintContent(t,n,i-t+1,r-n+1))}_onViewportOverlayPaintRequest(e){this._viewport.isVisible&&0!==this._viewportWidth&&0!==this._viewportHeight&&this._paintOverlay()}_onViewportRowResizeRequest(e){"body"===e.region?this._resizeRow(e.index,e.size):this._resizeColumnHeader(e.index,e.size)}_onViewportColumnResizeRequest(e){"body"===e.region?this._resizeColumn(e.index,e.size):this._resizeRowHeader(e.index,e.size)}_onThumbMoved(e){f.MessageLoop.postMessage(this._viewport,W.ScrollRequest)}_onPageRequested(e,t){e===this._vScrollBar?this.scrollByPage("decrement"===t?"up":"down"):this.scrollByPage("decrement"===t?"left":"right")}_onStepRequested(e,t){e===this._vScrollBar?this.scrollByStep("decrement"===t?"up":"down"):this.scrollByStep("decrement"===t?"left":"right")}_onDataModelChanged(e,t){switch(t.type){case"rows-inserted":this._onRowsInserted(t);break;case"columns-inserted":this._onColumnsInserted(t);break;case"rows-removed":this._onRowsRemoved(t);break;case"columns-removed":this._onColumnsRemoved(t);break;case"rows-moved":this._onRowsMoved(t);break;case"columns-moved":this._onColumnsMoved(t);break;case"cells-changed":this._onCellsChanged(t);break;case"model-reset":this._onModelReset(t);break;default:throw"unreachable"}}_onSelectionsChanged(e){this.repaintOverlay()}_onRowsInserted(e){let t,{region:n,index:i,span:r}=e;r<=0||(t="body"===n?this._rowSections:this._columnHeaderSections,this._scrollY===this.maxScrollY&&this.maxScrollY>0?(t.insert(i,r),this._scrollY=this.maxScrollY):t.insert(i,r),this._syncViewport())}_onColumnsInserted(e){let t,{region:n,index:i,span:r}=e;r<=0||(t="body"===n?this._columnSections:this._rowHeaderSections,this._scrollX===this.maxScrollX&&this.maxScrollX>0?(t.insert(i,r),this._scrollX=this.maxScrollX):t.insert(i,r),this._syncViewport())}_onRowsRemoved(e){let t,{region:n,index:i,span:r}=e;r<=0||(t="body"===n?this._rowSections:this._columnHeaderSections,i<0||i>=t.count||(this._scrollY===this.maxScrollY&&this.maxScrollY>0?(t.remove(i,r),this._scrollY=this.maxScrollY):t.remove(i,r),this._syncViewport()))}_onColumnsRemoved(e){let t,{region:n,index:i,span:r}=e;r<=0||(t="body"===n?this._columnSections:this._rowHeaderSections,i<0||i>=t.count||(this._scrollX===this.maxScrollX&&this.maxScrollX>0?(t.remove(i,r),this._scrollX=this.maxScrollX):t.remove(i,r),this._syncViewport()))}_onRowsMoved(e){let t,{region:n,index:i,span:r,destination:s}=e;if(r<=0)return;if(t="body"===n?this._rowSections:this._columnHeaderSections,i<0||i>=t.count)return;if(r=Math.min(r,t.count-i),s=Math.min(Math.max(0,s),t.count-r),i===s)return;let a=Math.min(i,s),o=Math.max(i+r-1,s+r-1);t.move(i,r,s),"body"===n?(this.repaintRegion("body",a,0,o,1/0),this.repaintRegion("row-header",a,0,o,1/0)):(this.repaintRegion("column-header",a,0,o,1/0),this.repaintRegion("corner-header",a,0,o,1/0)),this._syncViewport()}_onColumnsMoved(e){let t,{region:n,index:i,span:r,destination:s}=e;if(r<=0)return;if(t="body"===n?this._columnSections:this._rowHeaderSections,i<0||i>=t.count)return;if(r=Math.min(r,t.count-i),s=Math.min(Math.max(0,s),t.count-r),i===s)return;t.move(i,r,s);let a=Math.min(i,s),o=Math.max(i+r-1,s+r-1);"body"===n?(this.repaintRegion("body",0,a,1/0,o),this.repaintRegion("column-header",0,a,1/0,o)):(this.repaintRegion("row-header",0,a,1/0,o),this.repaintRegion("corner-header",0,a,1/0,o)),this._syncViewport()}_onCellsChanged(e){let{region:t,row:n,column:i,rowSpan:r,columnSpan:s}=e;if(r<=0&&s<=0)return;let a=n,o=i,l=a+r-1,c=o+s-1;this.repaintRegion(t,a,o,l,c)}_onModelReset(e){let t=this._rowSections.count,n=this._columnSections.count,i=this._rowHeaderSections.count,r=this._columnHeaderSections.count,s=this._dataModel.rowCount("body")-t,a=this._dataModel.columnCount("body")-n,o=this._dataModel.columnCount("row-header")-i,l=this._dataModel.rowCount("column-header")-r;s>0?this._rowSections.insert(t,s):s<0&&this._rowSections.remove(t+s,-s),a>0?this._columnSections.insert(n,a):a<0&&this._columnSections.remove(n+a,-a),o>0?this._rowHeaderSections.insert(i,o):o<0&&this._rowHeaderSections.remove(i+o,-o),l>0?this._columnHeaderSections.insert(r,l):l<0&&this._columnHeaderSections.remove(r+l,-l),this._syncViewport()}_onRenderersChanged(){this.repaintContent()}_evtKeyDown(e){this._mousedown?(e.preventDefault(),e.stopPropagation()):this._keyHandler&&this._keyHandler.onKeyDown(this,e)}_evtMouseDown(e){0===e.button&&(this.activate(),e.preventDefault(),e.stopPropagation(),document.addEventListener("keydown",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("contextmenu",this,!0),this._mousedown=!0,this._mouseHandler&&this._mouseHandler.onMouseDown(this,e))}_evtMouseMove(e){this._mousedown&&(e.preventDefault(),e.stopPropagation()),this._mouseHandler&&(this._mousedown?this._mouseHandler.onMouseMove(this,e):this._mouseHandler.onMouseHover(this,e))}_evtMouseUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._mouseHandler&&this._mouseHandler.onMouseUp(this,e),this._releaseMouse())}_evtMouseDoubleClick(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._mouseHandler&&this._mouseHandler.onMouseDoubleClick(this,e),this._releaseMouse())}_evtMouseLeave(e){this._mousedown?(e.preventDefault(),e.stopPropagation()):this._mouseHandler&&this._mouseHandler.onMouseLeave(this,e)}_evtContextMenu(e){this._mousedown?(e.preventDefault(),e.stopPropagation()):this._mouseHandler&&this._mouseHandler.onContextMenu(this,e)}_evtWheel(e){o.Platform.accelKey(e)||this._mouseHandler&&this._mouseHandler.onWheel(this,e)}_releaseMouse(){this._mousedown=!1,this._mouseHandler&&this._mouseHandler.release(),document.removeEventListener("keydown",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("contextmenu",this,!0)}_refreshDPI(){let e=Math.ceil(window.devicePixelRatio);this._dpiRatio!==e&&(this._dpiRatio=e,this.repaintContent(),this.repaintOverlay(),this._resizeCanvasIfNeeded(this._viewportWidth,this._viewportHeight),this._canvas.style.width=this._canvas.width/this._dpiRatio+"px",this._canvas.style.height=this._canvas.height/this._dpiRatio+"px",this._overlay.style.width=this._overlay.width/this._dpiRatio+"px",this._overlay.style.height=this._overlay.height/this._dpiRatio+"px")}_resizeRow(e,t){let n=this._rowSections;if(e<0||e>=n.count)return;let i=n.sizeOf(e),s=n.clampSize(t);if(i===s)return;n.resize(e,s);let a=this._viewportWidth,o=this._viewportHeight;if(!this._viewport.isVisible||0===a||0===o)return void this._syncScrollState();let l=s-i,c=this.headerHeight,u=n.offsetOf(e)+c-this._scrollY;if(c>=o||u>=o)return void this._syncScrollState();if(u+i<=c)return this._scrollY+=l,void this._syncScrollState();let h=Math.max(c,u);if(u+i>=o||u+s>=o)return this.paintContent(0,h,a,o-h),this._paintOverlay(),void this._syncScrollState();let d,f,p,m=a;if(u+s<=c?(d=c-l,f=o-d,p=c):(d=u+i,f=o-d,p=d+l),this._blitContent(this._canvas,0,d,m,f,0,p),s>0&&u+s>c&&this.paintContent(0,h,a,u+s-h),this._stretchLastRow&&this.pageHeight>this.bodyHeight){let e=this._rowSections.count-1,t=c+this._rowSections.offsetOf(e);this.paintContent(0,t,a,o-t)}else l<0&&this.paintContent(0,o+l,a,-l);for(const t of["body","row-header"]){const n=r.getCellGroupsAtRow(this.dataModel,t,e);let i,s={region:t,xMin:0,xMax:0,yMin:0,yMax:0};switch(t){case"body":s.xMin=this.headerWidth,s.xMax=this.headerWidth+this.bodyWidth,s.yMin=this.headerHeight,s.yMax=this.headerHeight+this.bodyHeight,i=this._style.backgroundColor;break;case"row-header":s.xMin=0,s.xMax=this.headerWidth,s.yMin=this.headerHeight,s.yMax=this.headerHeight+this.bodyHeight,i=this._style.headerBackgroundColor}this._paintMergedCells(n,s,i)}this._paintOverlay(),this._syncScrollState()}_resizeColumn(e,t){let n=this._columnSections;if(e<0||e>=n.count)return;const i=null!=t?t:this._getMaxWidthInColumn(e,"body");if(!i||0==i)return;let s=n.sizeOf(e),a=n.clampSize(i);if(s===a)return;n.resize(e,a);let o=this._viewportWidth,l=this._viewportHeight;if(!this._viewport.isVisible||0===o||0===l)return void this._syncScrollState();let c=a-s,u=this.headerWidth,h=n.offsetOf(e)+u-this._scrollX;if(u>=o||h>=o)return void this._syncScrollState();if(h+s<=u)return this._scrollX+=c,void this._syncScrollState();let d=Math.max(u,h);if(h+s>=o||h+a>=o)return this.paintContent(d,0,o-d,l),this._paintOverlay(),void this._syncScrollState();let f,p,m,_=l;if(h+a<=u?(f=u-c,p=o-f,m=u):(f=h+s,p=o-f,m=f+c),this._blitContent(this._canvas,f,0,p,_,m,0),a>0&&h+a>u&&this.paintContent(d,0,h+a-d,l),this._stretchLastColumn&&this.pageWidth>this.bodyWidth){let e=this._columnSections.count-1,t=u+this._columnSections.offsetOf(e);this.paintContent(t,0,o-t,l)}else c<0&&this.paintContent(o+c,0,-c,l);for(const t of["body","column-header"]){const n=r.getCellGroupsAtColumn(this.dataModel,t,e);let i,s={region:t,xMin:0,xMax:0,yMin:0,yMax:0};switch(t){case"body":s.xMin=this.headerWidth,s.xMax=this.headerWidth+this.bodyWidth,s.yMin=this.headerHeight,s.yMax=this.headerHeight+this.bodyHeight,i=this._style.backgroundColor;break;case"column-header":s.xMin=this.headerWidth,s.xMax=this.headerWidth+this.bodyWidth,s.yMin=0,s.yMax=this.headerHeight,i=this._style.headerBackgroundColor}this._paintMergedCells(n,s,i)}this._paintOverlay(),this._syncScrollState()}_resizeRowHeader(e,t){let n=this._rowHeaderSections;if(e<0||e>=n.count)return;const i=null!=t?t:this._getMaxWidthInColumn(e,"row-header");if(!i||0==i)return;let s=n.sizeOf(e),a=n.clampSize(i);if(s===a)return;n.resize(e,a);let o=this._viewportWidth,l=this._viewportHeight;if(!this._viewport.isVisible||0===o||0===l)return void this._syncScrollState();let c=a-s,u=n.offsetOf(e);if(u>=o)return void this._syncScrollState();if(u+s>=o||u+a>=o)return this.paintContent(u,0,o-u,l),this._paintOverlay(),void this._syncScrollState();let h=u+s,d=o-h,f=l,p=h+c;if(this._blitContent(this._canvas,h,0,d,f,p,0),a>0&&this.paintContent(u,0,a,l),this._stretchLastColumn&&this.pageWidth>this.bodyWidth){let e=this._columnSections.count-1,t=this.headerWidth+this._columnSections.offsetOf(e);this.paintContent(t,0,o-t,l)}else c<0&&this.paintContent(o+c,0,-c,l);for(const t of["corner-header","row-header"]){const n=r.getCellGroupsAtColumn(this.dataModel,t,e);let i={region:t,xMin:0,xMax:0,yMin:0,yMax:0};switch(t){case"corner-header":i.xMin=0,i.xMax=this.headerWidth,i.yMin=0,i.yMax=this.headerHeight;break;case"row-header":i.xMin=0,i.xMax=this.headerWidth,i.yMin=this.headerHeight,i.yMax=this.headerHeight+this.bodyHeight}this._paintMergedCells(n,i,this._style.headerBackgroundColor)}this._paintOverlay(),this._syncScrollState()}_resizeColumnHeader(e,t){let n=this._columnHeaderSections;if(e<0||e>=n.count)return;let i=n.sizeOf(e),s=n.clampSize(t);if(i===s)return;n.resize(e,s);let a=this._viewportWidth,o=this._viewportHeight;if(!this._viewport.isVisible||0===a||0===o)return void this._syncScrollState();this._paintOverlay();let l=s-i,c=n.offsetOf(e);if(c>=o)return void this._syncScrollState();if(c+i>=o||c+s>=o)return this.paintContent(0,c,a,o-c),this._paintOverlay(),void this._syncScrollState();let u=c+i,h=a,d=o-u,f=u+l;if(this._blitContent(this._canvas,0,u,h,d,0,f),s>0&&this.paintContent(0,c,a,s),this._stretchLastRow&&this.pageHeight>this.bodyHeight){let e=this._rowSections.count-1,t=this.headerHeight+this._rowSections.offsetOf(e);this.paintContent(0,t,a,o-t)}else l<0&&this.paintContent(0,o+l,a,-l);for(const t of["corner-header","column-header"]){const n=r.getCellGroupsAtRow(this.dataModel,t,e);let i={region:t,xMin:0,xMax:0,yMin:0,yMax:0};switch(t){case"corner-header":i.xMin=0,i.xMax=this.headerWidth,i.yMin=0,i.yMax=this.headerHeight;break;case"column-header":i.xMin=this.headerWidth,i.xMax=this.headerWidth+this.bodyWidth,i.yMin=0,i.yMax=this.headerHeight}this._paintMergedCells(n,i,this._style.headerBackgroundColor)}this._paintOverlay(),this._syncScrollState()}_scrollTo(e,t){if(!this.dataModel)return;e=Math.max(0,Math.min(Math.floor(e),this.maxScrollX)),t=Math.max(0,Math.min(Math.floor(t),this.maxScrollY)),this._hScrollBar.value=e,this._vScrollBar.value=t;let n=e-this._scrollX,i=t-this._scrollY;if(0===n&&0===i)return;if(!this._viewport.isVisible)return this._scrollX=e,void(this._scrollY=t);let s=this._viewportWidth,a=this._viewportHeight;if(0===s||0===a)return this._scrollX=e,void(this._scrollY=t);let o=this.headerWidth,l=this.headerHeight,c=s-o,u=a-l;if(c<=0&&u<=0)return this._scrollX=e,void(this._scrollY=t);let h=0;0!==n&&c>0&&(h=Math.abs(n)>=c?c*a:Math.abs(n)*a);let d=0;if(0!==i&&u>0&&(d=Math.abs(i)>=u?s*u:s*Math.abs(i)),h+d>=s*a)return this._scrollX=e,this._scrollY=t,this.paintContent(0,0,s,a),void this._paintOverlay();if(this._scrollY=t,0!==i&&u>0)if(Math.abs(i)>=u)this.paintContent(0,l,s,u);else{const e=0,t=i<0?l:l+i,n=s,o=u-Math.abs(i);this._blitContent(this._canvas,e,t,n,o,e,t-i),this.paintContent(0,i<0?l:a-i,s,Math.abs(i));for(const e of["body","row-header"]){const t=r.getCellGroupsAtRegion(this.dataModel,e);let n,i={region:e,xMin:0,xMax:0,yMin:0,yMax:0};switch(e){case"body":i.xMin=this.headerWidth,i.xMax=this.headerWidth+this.bodyWidth,i.yMin=this.headerHeight,i.yMax=this.headerHeight+this.bodyHeight,n=this._style.backgroundColor;break;case"row-header":i.xMin=0,i.xMax=this.headerWidth,i.yMin=this.headerHeight,i.yMax=this.headerHeight+this.bodyHeight,n=this._style.headerBackgroundColor}this._paintMergedCells(t,i,n)}}if(this._scrollX=e,0!==n&&c>0)if(Math.abs(n)>=c)this.paintContent(o,0,c,a);else{const e=n<0?o:o+n,t=0,i=c-Math.abs(n),l=a;this._blitContent(this._canvas,e,t,i,l,e-n,t),this.paintContent(n<0?o:s-n,0,Math.abs(n),a);for(const e of["body","column-header"]){const t=r.getCellGroupsAtRegion(this.dataModel,e);let n,i={region:e,xMin:0,xMax:0,yMin:0,yMax:0};switch(e){case"body":i.xMin=this.headerWidth,i.xMax=this.headerWidth+this.bodyWidth,i.yMin=this.headerHeight,i.yMax=this.headerHeight+this.bodyHeight,n=this._style.backgroundColor;break;case"column-header":i.xMin=this.headerWidth,i.xMax=this.headerWidth+this.bodyWidth,i.yMin=0,i.yMax=this.headerHeight,n=this._style.headerBackgroundColor}this._paintMergedCells(t,i,n)}}this._paintOverlay()}_blitContent(e,t,n,i,r,s,a){t*=this._dpiRatio,n*=this._dpiRatio,i*=this._dpiRatio,r*=this._dpiRatio,s*=this._dpiRatio,a*=this._dpiRatio,this._canvasGC.save(),this._canvasGC.setTransform(1,0,0,1,0,0),this._canvasGC.drawImage(e,t,n,i,r,s,a,i,r),this._canvasGC.restore()}paintContent(e,t,n,i){this._canvasGC.setTransform(this._dpiRatio,0,0,this._dpiRatio,0,0),this._bufferGC.setTransform(this._dpiRatio,0,0,this._dpiRatio,0,0),this._canvasGC.clearRect(e,t,n,i),this._drawVoidRegion(e,t,n,i),this._drawBodyRegion(e,t,n,i),this._drawRowHeaderRegion(e,t,n,i),this._drawColumnHeaderRegion(e,t,n,i),this.drawCornerHeaderRegion(e,t,n,i)}_fitBodyColumnHeaders(e,t,n){const i=void 0===n?e.columnCount("body"):n;for(let n=0;n<i;n++){const i=e.rowCount("column-header");let r=0;for(let t=0;t<i;t++){const i=X._getConfig(e,t,n,"column-header"),s=this._getCellTextWidth(i);r=Math.max(r,s)}this.resizeColumn("body",n,r+t)}}_fitRowColumnHeaders(e,t,n){const i=void 0===n?e.columnCount("row-header"):n;for(let n=0;n<i;n++){const i=e.rowCount("column-header");let r=0;for(let t=0;t<i;t++){const i=X._getConfig(e,t,n,"corner-header"),s=this._getCellTextWidth(i);r=Math.max(r,s)}this.resizeColumn("row-header",n,r+t)}}_paintOverlay(){this._overlayGC.setTransform(this._dpiRatio,0,0,this._dpiRatio,0,0),this._overlayGC.clearRect(0,0,this._overlay.width,this._overlay.height),this._drawBodySelections(),this._drawRowHeaderSelections(),this._drawColumnHeaderSelections(),this._drawCursor(),this._drawShadows()}_drawVoidRegion(e,t,n,i){let r=this._style.voidColor;r&&(this._canvasGC.fillStyle=r,this._canvasGC.fillRect(e,t,n,i))}_drawBodyRegion(e,t,n,i){let s=this._columnSections.length-this._scrollX,a=this._rowSections.length-this._scrollY;if(s<=0||a<=0)return;let o=this.headerWidth,l=this.headerHeight;if(e+n<=o)return;if(t+i<=l)return;if(e>=o+s)return;if(t>=l+a)return;let c=this.bodyHeight,u=this.bodyWidth,h=this.pageHeight,d=this.pageWidth,f=Math.max(e,o),p=Math.max(t,l),m=Math.min(e+n-1,o+s-1),_=Math.min(t+i-1,l+a-1),g=this._rowSections.indexOf(p-l+this._scrollY),y=this._columnSections.indexOf(f-o+this._scrollX),v=this._rowSections.indexOf(_-l+this._scrollY),b=this._columnSections.indexOf(m-o+this._scrollX),x=this._rowSections.count-1,M=this._columnSections.count-1;v<0&&(v=x),b<0&&(b=M);let w=this._columnSections.offsetOf(y)+o-this._scrollX,S=this._rowSections.offsetOf(g)+l-this._scrollY,L=0,T=0,k=new Array(v-g+1),A=new Array(b-y+1);for(let e=g;e<=v;++e){let t=this._rowSections.sizeOf(e);k[e-g]=t,T+=t}for(let e=y;e<=b;++e){let t=this._columnSections.sizeOf(e);A[e-y]=t,L+=t}if(this._stretchLastRow&&h>c&&v===x){let e=this.pageHeight-this.bodyHeight;k[k.length-1]+=e,T+=e,_+=e}if(this._stretchLastColumn&&d>u&&b===M){let e=this.pageWidth-this.bodyWidth;A[A.length-1]+=e,L+=e,m+=e}let E={region:"body",xMin:f,yMin:p,xMax:m,yMax:_,x:w,y:S,width:L,height:T,row:g,column:y,rowSizes:k,columnSizes:A};this._drawBackground(E,this._style.backgroundColor),this._drawRowBackground(E,this._style.rowBackgroundColor),this._drawColumnBackground(E,this._style.columnBackgroundColor),this._drawCells(E),this._drawHorizontalGridLines(E,this._style.horizontalGridLineColor||this._style.gridLineColor),this._drawVerticalGridLines(E,this._style.verticalGridLineColor||this._style.gridLineColor);const C=r.getCellGroupsAtRegion(this.dataModel,E.region).filter((e=>this.cellGroupInteresectsRegion(e,E)));this._paintMergedCells(C,E,this._style.backgroundColor)}_drawRowHeaderRegion(e,t,n,i){let s=this.headerWidth,a=this.bodyHeight-this._scrollY;if(s<=0||a<=0)return;let o=this.headerHeight;if(e+n<=0)return;if(t+i<=o)return;if(e>=0+s)return;if(t>=o+a)return;let l=this.bodyHeight,c=this.pageHeight,u=e,h=Math.max(t,o),d=Math.min(e+n-1,0+s-1),f=Math.min(t+i-1,o+a-1),p=this._rowSections.indexOf(h-o+this._scrollY),m=this._rowHeaderSections.indexOf(u),_=this._rowSections.indexOf(f-o+this._scrollY),g=this._rowHeaderSections.indexOf(d),y=this._rowSections.count-1,v=this._rowHeaderSections.count-1;_<0&&(_=y),g<0&&(g=v);let b=this._rowHeaderSections.offsetOf(m),x=this._rowSections.offsetOf(p)+o-this._scrollY,M=0,w=0,S=new Array(_-p+1),L=new Array(g-m+1);for(let e=p;e<=_;++e){let t=this._rowSections.sizeOf(e);S[e-p]=t,w+=t}for(let e=m;e<=g;++e){let t=this._rowHeaderSections.sizeOf(e);L[e-m]=t,M+=t}if(this._stretchLastRow&&c>l&&_===y){let e=this.pageHeight-this.bodyHeight;S[S.length-1]+=e,w+=e,f+=e}let T={region:"row-header",xMin:u,yMin:h,xMax:d,yMax:f,x:b,y:x,width:M,height:w,row:p,column:m,rowSizes:S,columnSizes:L};this._drawBackground(T,this._style.headerBackgroundColor),this._drawCells(T),this._drawHorizontalGridLines(T,this._style.headerHorizontalGridLineColor||this._style.headerGridLineColor),this._drawVerticalGridLines(T,this._style.headerVerticalGridLineColor||this._style.headerGridLineColor);const k=r.getCellGroupsAtRegion(this.dataModel,T.region).filter((e=>this.cellGroupInteresectsRegion(e,T)));this._paintMergedCells(k,T,this._style.headerBackgroundColor)}_drawColumnHeaderRegion(e,t,n,i){let s=this.bodyWidth-this._scrollX,a=this.headerHeight;if(s<=0||a<=0)return;let o=this.headerWidth;if(e+n<=o)return;if(t+i<=0)return;if(e>=o+s)return;if(t>=0+a)return;let l=this.bodyWidth,c=this.pageWidth,u=Math.max(e,o),h=t,d=Math.min(e+n-1,o+s-1),f=Math.min(t+i-1,0+a-1),p=this._columnHeaderSections.indexOf(h),m=this._columnSections.indexOf(u-o+this._scrollX),_=this._columnHeaderSections.indexOf(f),g=this._columnSections.indexOf(d-o+this._scrollX),y=this._columnHeaderSections.count-1,v=this._columnSections.count-1;_<0&&(_=y),g<0&&(g=v);let b=this._columnSections.offsetOf(m)+o-this._scrollX,x=this._columnHeaderSections.offsetOf(p),M=0,w=0,S=new Array(_-p+1),L=new Array(g-m+1);for(let e=p;e<=_;++e){let t=this._columnHeaderSections.sizeOf(e);S[e-p]=t,w+=t}for(let e=m;e<=g;++e){let t=this._columnSections.sizeOf(e);L[e-m]=t,M+=t}if(this._stretchLastColumn&&c>l&&g===v){let e=this.pageWidth-this.bodyWidth;L[L.length-1]+=e,M+=e,d+=e}let T={region:"column-header",xMin:u,yMin:h,xMax:d,yMax:f,x:b,y:x,width:M,height:w,row:p,column:m,rowSizes:S,columnSizes:L};this._drawBackground(T,this._style.headerBackgroundColor),this._drawCells(T),this._drawHorizontalGridLines(T,this._style.headerHorizontalGridLineColor||this._style.headerGridLineColor),this._drawVerticalGridLines(T,this._style.headerVerticalGridLineColor||this._style.headerGridLineColor);const k=r.getCellGroupsAtRegion(this.dataModel,T.region).filter((e=>this.cellGroupInteresectsRegion(e,T)));this._paintMergedCells(k,T,this._style.headerBackgroundColor)}drawCornerHeaderRegion(e,t,n,i){let s=this.headerWidth,a=this.headerHeight;if(s<=0||a<=0)return;if(e+n<=0)return;if(t+i<=0)return;if(e>=0+s)return;if(t>=0+a)return;let o=e,l=t,c=Math.min(e+n-1,0+s-1),u=Math.min(t+i-1,0+a-1),h=this._columnHeaderSections.indexOf(l),d=this._rowHeaderSections.indexOf(o),f=this._columnHeaderSections.indexOf(u),p=this._rowHeaderSections.indexOf(c);f<0&&(f=this._columnHeaderSections.count-1),p<0&&(p=this._rowHeaderSections.count-1);let m=this._rowHeaderSections.offsetOf(d),_=this._columnHeaderSections.offsetOf(h),g=0,y=0,v=new Array(f-h+1),b=new Array(p-d+1);for(let e=h;e<=f;++e){let t=this._columnHeaderSections.sizeOf(e);v[e-h]=t,y+=t}for(let e=d;e<=p;++e){let t=this._rowHeaderSections.sizeOf(e);b[e-d]=t,g+=t}let x={region:"corner-header",xMin:o,yMin:l,xMax:c,yMax:u,x:m,y:_,width:g,height:y,row:h,column:d,rowSizes:v,columnSizes:b};this._drawBackground(x,this._style.headerBackgroundColor),this._drawCells(x),this._drawHorizontalGridLines(x,this._style.headerHorizontalGridLineColor||this._style.headerGridLineColor),this._drawVerticalGridLines(x,this._style.headerVerticalGridLineColor||this._style.headerGridLineColor);const M=r.getCellGroupsAtRegion(this.dataModel,x.region).filter((e=>this.cellGroupInteresectsRegion(e,x)));this._paintMergedCells(M,x,this._style.headerBackgroundColor)}_drawBackground(e,t){if(!t)return;let{xMin:n,yMin:i,xMax:r,yMax:s}=e;this._canvasGC.fillStyle=t,this._canvasGC.fillRect(n,i,r-n+1,s-i+1)}_drawRowBackground(e,t){if(!t)return;let n=Math.max(e.xMin,e.x),i=Math.min(e.x+e.width-1,e.xMax);for(let r=e.y,s=0,a=e.rowSizes.length;s<a;++s){let a=e.rowSizes[s];if(0===a)continue;let o=t(e.row+s);if(o){let t=Math.max(e.yMin,r),s=Math.min(r+a-1,e.yMax);this._canvasGC.fillStyle=o,this._canvasGC.fillRect(n,t,i-n+1,s-t+1)}r+=a}}_drawColumnBackground(e,t){if(!t)return;let n=Math.max(e.yMin,e.y),i=Math.min(e.y+e.height-1,e.yMax);for(let r=e.x,s=0,a=e.columnSizes.length;s<a;++s){let a=e.columnSizes[s];if(0===a)continue;let o=t(e.column+s);if(o){let t=Math.max(e.xMin,r),s=Math.min(r+a-1,e.xMax);this._canvasGC.fillStyle=o,this._canvasGC.fillRect(t,n,s-t+1,i-n+1)}r+=a}}_getColumnSize(e,t){return"corner-header"===e?this._rowHeaderSections.sizeOf(t):this.columnSize(e,t)}_getRowSize(e,t){return"corner-header"===e?this._columnHeaderSections.sizeOf(t):this.rowSize(e,t)}_drawCells(e){if(!this._dataModel)return;let t={x:0,y:0,width:0,height:0,region:e.region,row:0,column:0,value:null,metadata:N.emptyMetadata},n=-1;this._bufferGC.save();let i=new H(this._bufferGC),s=0;for(let a=e.x,o=0,l=e.columnSizes.length;o<l;++o){let l=e.columnSizes[o];if(0===l)continue;let c=e.column+o;t.x=a,t.width=l,t.column=c;for(let o=e.y,u=0,h=e.rowSizes.length;u<h;++u){if(s=e.rowSizes[u],0===s)continue;let h=e.row+u;if(n=r.getGroupIndex(this.dataModel,t.region,h,c),-1!==n){o+=s;continue}i.clearRect(a,o,l,s);let d=X._getCellValue(this.dataModel,e.region,h,c),f=X._getCellMetadata(this.dataModel,e.region,h,c);t.y=o,t.height=s,t.width=l,t.row=h,t.value=d,t.metadata=f;let p=this._cellRenderers.get(t);i.save();try{p instanceof M?p.isReady(t)?p.paint(i,t):(p.paintPlaceholder(i,t),p.load(t).then((()=>{const t=h,n=h+1,i=c,r=c+1;this.repaintRegion(e.region,t,i,n,r)}))):p.paint(i,t)}catch(e){console.error(e)}i.restore();let m=Math.max(e.xMin,t.x),_=Math.min(t.x+t.width-1,e.xMax),g=Math.max(e.yMin,t.y),y=Math.min(t.y+t.height-1,e.yMax);this._blitContent(this._buffer,m,g,_-m+1,y-g+1,m,g),o+=s}i.restore(),a+=l}i.dispose(),this._bufferGC.restore()}cellGroupInteresectsRegion(e,t){const n=t.row,i=t.row+t.rowSizes.length,r=t.column,s=t.column+t.columnSizes.length,a=Math.min(e.r2,i)-Math.max(e.r1,n),o=Math.min(e.c2,s)-Math.max(e.c1,r);return a>=0&&o>=0}static _getCellValue(e,t,n,i){try{return e.data(t,n,i)}catch(e){return console.error(e),null}}static _getCellMetadata(e,t,n,i){try{return e.metadata(t,n,i)}catch(e){return console.error(e),N.emptyMetadata}}_paintMergedCells(e,t,n){if(!this._dataModel)return;let i={x:0,y:0,width:0,height:0,region:t.region,row:0,column:0,value:null,metadata:N.emptyMetadata};n&&(this._canvasGC.fillStyle=n),this._canvasGC.lineWidth=1,this._bufferGC.save();let r=new H(this._bufferGC);for(const s of e){let e=0;for(let n=s.c1;n<=s.c2;n++)e+=this._getColumnSize(t.region,n);let a=0;for(let e=s.r1;e<=s.r2;e++)a+=this._getRowSize(t.region,e);let o=X._getCellValue(this.dataModel,t.region,s.r1,s.c1),l=X._getCellMetadata(this.dataModel,t.region,s.r1,s.c2),c=0,u=0;switch(t.region){case"body":c=this._columnSections.offsetOf(s.c1)+this.headerWidth-this._scrollX,u=this._rowSections.offsetOf(s.r1)+this.headerHeight-this._scrollY;break;case"column-header":c=this._columnSections.offsetOf(s.c1)+this.headerWidth-this._scrollX,u=this._rowSections.offsetOf(s.r1);break;case"row-header":c=this._columnSections.offsetOf(s.c1),u=this._rowSections.offsetOf(s.r1)+this.headerHeight-this._scrollY;break;case"corner-header":c=this._columnSections.offsetOf(s.c1),u=this._rowSections.offsetOf(s.r1)}i.x=c,i.y=u,i.width=e,i.height=a,i.region=t.region,i.row=s.r1,i.column=s.c1,i.value=o,i.metadata=l;const h=Math.max(t.xMin,c),d=Math.min(c+e-2,t.xMax),f=Math.max(t.yMin,u),p=Math.min(u+a-2,t.yMax);if(d<=h||p<=f)continue;n&&this._canvasGC.fillRect(h,f,d-h+1,p-f+1);let m=this._cellRenderers.get(i);r.clearRect(i.x,i.y,e,a),r.save();try{if(m instanceof M)if(m.isReady(i))m.paint(r,i);else{m.paintPlaceholder(r,i);const e=s.r1,n=s.r2,a=s.c1,o=s.c2;m.load(i).then((()=>{this.repaintRegion(t.region,e,a,n,o)}))}else m.paint(r,i)}catch(e){console.error(e)}r.restore(),this._blitContent(this._buffer,h,f,d-h+1,p-f+1,h,f)}r.dispose(),this._bufferGC.restore()}_drawHorizontalGridLines(e,t){if(!t)return;const n=Math.max(e.xMin,e.x),i=Math.min(e.x+e.width,e.xMax+1);this._canvasGC.beginPath(),this._canvasGC.lineWidth=1;const r=this.bodyHeight,s=this.pageHeight;let a=e.rowSizes.length;this._stretchLastRow&&s>r&&e.row+a===this._rowSections.count&&(a-=1);for(let t=e.y,r=0;r<a;++r){let s=e.rowSizes[r];if(0===s)continue;let a=t+s-1;a>=e.yMin&&a<=e.yMax&&(this._canvasGC.moveTo(n,a+.5),this._canvasGC.lineTo(i,a+.5)),t+=s}this._canvasGC.strokeStyle=t,this._canvasGC.stroke()}_drawVerticalGridLines(e,t){if(!t)return;const n=Math.max(e.yMin,e.y),i=Math.min(e.y+e.height,e.yMax+1);this._canvasGC.beginPath(),this._canvasGC.lineWidth=1;const r=this.bodyWidth,s=this.pageWidth;let a=e.columnSizes.length;this._stretchLastColumn&&s>r&&e.column+a===this._columnSections.count&&(a-=1);for(let t=e.x,r=0;r<a;++r){let s=e.columnSizes[r];if(0===s)continue;let a=t+s-1;a>=e.xMin&&a<=e.xMax&&(this._canvasGC.moveTo(a+.5,n),this._canvasGC.lineTo(a+.5,i)),t+=s}this._canvasGC.strokeStyle=t,this._canvasGC.stroke()}_drawBodySelections(){let e=this._selectionModel;if(!e||e.isEmpty)return;let t=this._style.selectionFillColor,n=this._style.selectionBorderColor;if(!t&&!n)return;let i=this._scrollX,s=this._scrollY,a=this._rowSections.indexOf(s),o=this._columnSections.indexOf(i);if(a<0||o<0)return;let l=this.bodyWidth,c=this.bodyHeight,u=this.pageWidth,h=this.pageHeight,d=this.headerWidth,f=this.headerHeight,p=this._rowSections.indexOf(s+h),m=this._columnSections.indexOf(i+u),_=this._rowSections.count-1,g=this._columnSections.count-1;p=p<0?_:p,m=m<0?g:m;let y=this._overlayGC;y.save(),y.beginPath(),y.rect(d,f,u,h),y.clip(),t&&(y.fillStyle=t),n&&(y.strokeStyle=n,y.lineWidth=1);for(let v of e.selections()){if(v.r1<a&&v.r2<a)continue;if(v.r1>p&&v.r2>p)continue;if(v.c1<o&&v.c2<o)continue;if(v.c1>m&&v.c2>m)continue;let e,b=Math.max(0,Math.min(v.r1,_)),x=Math.max(0,Math.min(v.c1,g)),M=Math.max(0,Math.min(v.r2,_)),w=Math.max(0,Math.min(v.c2,g));b>M&&(e=b,b=M,M=e),x>w&&(e=x,x=w,w=e);const S=r.joinCellGroupWithMergedCellGroups(this.dataModel,{r1:b,r2:M,c1:x,c2:w},"body");b=S.r1,M=S.r2,x=S.c1,w=S.c2;let L=this._columnSections.offsetOf(x)-i+d,T=this._rowSections.offsetOf(b)-s+f,k=this._columnSections.extentOf(w)-i+d,A=this._rowSections.extentOf(M)-s+f;this._stretchLastColumn&&u>l&&w===g&&(k=d+u-1),this._stretchLastRow&&h>c&&M===_&&(A=f+h-1),L=Math.max(d-1,L),T=Math.max(f-1,T),k=Math.min(d+u+1,k),A=Math.min(f+h+1,A),k<L||A<T||(t&&y.fillRect(L,T,k-L+1,A-T+1),n&&y.strokeRect(L-.5,T-.5,k-L+1,A-T+1))}y.restore()}_drawRowHeaderSelections(){let e=this._selectionModel;if(!e||e.isEmpty||"column"==e.selectionMode)return;if(0===this.headerWidth||0===this.pageHeight)return;let t=this._style.headerSelectionFillColor,n=this._style.headerSelectionBorderColor;if(!t&&!n)return;let i=this._scrollY,r=this.bodyHeight,s=this.pageHeight,a=this.headerWidth,o=this.headerHeight,l=this._rowSections,c=this._overlayGC;c.save(),c.beginPath(),c.rect(0,o,a,s),c.clip(),t&&(c.fillStyle=t),n&&(c.strokeStyle=n,c.lineWidth=1);let u=l.count-1,h=l.indexOf(i),d=l.indexOf(i+s-1);d=d<0?u:d;for(let f=h;f<=d;++f){if(!e.isRowSelected(f))continue;let h=l.offsetOf(f)-i+o,d=l.sizeOf(f);this._stretchLastRow&&s>r&&f===u&&(d=o+s-h),0!==d&&(t&&c.fillRect(0,h,a,d),n&&(c.beginPath(),c.moveTo(a-.5,h-1),c.lineTo(a-.5,h+d),c.stroke()))}c.restore()}_drawColumnHeaderSelections(){let e=this._selectionModel;if(!e||e.isEmpty||"row"==e.selectionMode)return;if(0===this.headerHeight||0===this.pageWidth)return;let t=this._style.headerSelectionFillColor,n=this._style.headerSelectionBorderColor;if(!t&&!n)return;let i=this._scrollX,r=this.bodyWidth,s=this.pageWidth,a=this.headerWidth,o=this.headerHeight,l=this._columnSections,c=this._overlayGC;c.save(),c.beginPath(),c.rect(a,0,s,o),c.clip(),t&&(c.fillStyle=t),n&&(c.strokeStyle=n,c.lineWidth=1);let u=l.count-1,h=l.indexOf(i),d=l.indexOf(i+s-1);d=d<0?u:d;for(let f=h;f<=d;++f){if(!e.isColumnSelected(f))continue;let h=l.offsetOf(f)-i+a,d=l.sizeOf(f);this._stretchLastColumn&&s>r&&f===u&&(d=a+s-h),0!==d&&(t&&c.fillRect(h,0,d,o),n&&(c.beginPath(),c.moveTo(h-1,o-.5),c.lineTo(h+d,o-.5),c.stroke()))}c.restore()}_drawCursor(){let e=this._selectionModel;if(!e||e.isEmpty||"cell"!==e.selectionMode)return;let t=this._style.cursorFillColor,n=this._style.cursorBorderColor;if(!t&&!n)return;let i=e.cursorRow,s=e.cursorColumn,a=this._rowSections.count-1,o=this._columnSections.count-1;if(i<0||i>a)return;if(s<0||s>o)return;let l=i,c=s;const u=r.joinCellGroupWithMergedCellGroups(this.dataModel,{r1:i,r2:l,c1:s,c2:c},"body");i=u.r1,l=u.r2,s=u.c1,c=u.c2;let h=this._scrollX,d=this._scrollY,f=this.bodyWidth,p=this.bodyHeight,m=this.pageWidth,_=this.pageHeight,g=this.headerWidth,y=this.headerHeight,v=this._viewportWidth,b=this._viewportHeight,x=this._columnSections.offsetOf(s)-h+g,M=this._columnSections.extentOf(c)-h+g,w=this._rowSections.offsetOf(i)-d+y,S=this._rowSections.extentOf(l)-d+y;if(this._stretchLastColumn&&m>f&&s===o&&(M=v-1),this._stretchLastRow&&_>p&&i===a&&(S=b-1),M<x||S<w)return;if(x-1>=v||w-1>=b||M+1<g||S+1<y)return;let L=this._overlayGC;L.save(),L.beginPath(),L.rect(g,y,m,_),L.clip(),L.clearRect(x,w,M-x+1,S-w+1),t&&(L.fillStyle=t,L.fillRect(x,w,M-x+1,S-w+1)),n&&(L.strokeStyle=n,L.lineWidth=2,L.strokeRect(x,w,M-x,S-w)),L.restore()}_drawShadows(){let e=this._style.scrollShadow;if(!e)return;let t=this._scrollX,n=this._scrollY,i=this.maxScrollX,r=this.maxScrollY,s=this.headerWidth,a=this.headerHeight,o=this.pageWidth,l=this.pageHeight,c=this._viewportWidth,u=this._viewportHeight,h=this.bodyWidth,d=this.bodyHeight;this._stretchLastRow&&l>d&&(d=l),this._stretchLastColumn&&o>h&&(h=o);let f=this._overlayGC;if(f.save(),n>0){let n=0,i=a,r=0,l=i+e.size,c=f.createLinearGradient(n,i,r,l);c.addColorStop(0,e.color1),c.addColorStop(.5,e.color2),c.addColorStop(1,e.color3);let u=0,d=a,p=s+Math.min(o,h-t),m=e.size;f.fillStyle=c,f.fillRect(u,d,p,m)}if(t>0){let t=s,i=0,r=t+e.size,o=0,c=f.createLinearGradient(t,i,r,o);c.addColorStop(0,e.color1),c.addColorStop(.5,e.color2),c.addColorStop(1,e.color3);let u=s,h=0,p=e.size,m=a+Math.min(l,d-n);f.fillStyle=c,f.fillRect(u,h,p,m)}if(n<r){let n=0,i=u,r=0,a=u-e.size,l=f.createLinearGradient(n,i,r,a);l.addColorStop(0,e.color1),l.addColorStop(.5,e.color2),l.addColorStop(1,e.color3);let c=0,d=u-e.size,p=s+Math.min(o,h-t),m=e.size;f.fillStyle=l,f.fillRect(c,d,p,m)}if(t<i){let t=c,i=0,r=c-e.size,s=0,o=f.createLinearGradient(t,i,r,s);o.addColorStop(0,e.color1),o.addColorStop(.5,e.color2),o.addColorStop(1,e.color3);let u=c-e.size,h=0,p=e.size,m=a+Math.min(l,d-n);f.fillStyle=o,f.fillRect(u,h,p,m)}f.restore()}}!function(e){function t(e){return null===e.value||void 0===e.value?"":String(e.value)}e.copyFormatGeneric=t,e.defaultStyle={voidColor:"#F3F3F3",backgroundColor:"#FFFFFF",gridLineColor:"rgba(20, 20, 20, 0.15)",headerBackgroundColor:"#F3F3F3",headerGridLineColor:"rgba(20, 20, 20, 0.25)",selectionFillColor:"rgba(49, 119, 229, 0.2)",selectionBorderColor:"rgba(0, 107, 247, 1.0)",cursorBorderColor:"rgba(0, 107, 247, 1.0)",headerSelectionFillColor:"rgba(20, 20, 20, 0.1)",headerSelectionBorderColor:"rgba(0, 107, 247, 1.0)",scrollShadow:{size:10,color1:"rgba(0, 0, 0, 0.20)",color2:"rgba(0, 0, 0, 0.05)",color3:"rgba(0, 0, 0, 0.00)"}},e.defaultSizes={rowHeight:20,columnWidth:64,rowHeaderWidth:64,columnHeaderHeight:20},e.minimumSizes={rowHeight:20,columnWidth:10,rowHeaderWidth:10,columnHeaderHeight:20},e.defaultCopyConfig={separator:"\t",format:t,headers:"none",warningThreshold:1e6}}(X||(X={})),function(e){e.ScrollRequest=new f.ConflatableMessage("scroll-request"),e.OverlayPaintRequest=new f.ConflatableMessage("overlay-paint-request"),e.createCanvas=function(){let e=document.createElement("canvas");return e.width=0,e.height=0,e},e.regionHasMergedCells=function(e,t){return r.getCellGroupsAtRegion(e,t).length>0};class t extends f.ConflatableMessage{constructor(e,t,n,i,r){super("paint-request"),this._region=e,this._r1=t,this._c1=n,this._r2=i,this._c2=r}get region(){return this._region}get r1(){return this._r1}get c1(){return this._c1}get r2(){return this._r2}get c2(){return this._c2}conflate(e){return"all"===this._region||("all"===e._region?(this._region="all",!0):this._region===e._region&&(this._r1=Math.min(this._r1,e._r1),this._c1=Math.min(this._c1,e._c1),this._r2=Math.max(this._r2,e._r2),this._c2=Math.max(this._c2,e._c2),!0))}}e.PaintRequest=t;class n extends f.ConflatableMessage{constructor(e,t,n){super("row-resize-request"),this._region=e,this._index=t,this._size=n}get region(){return this._region}get index(){return this._index}get size(){return this._size}conflate(e){return this._region===e._region&&this._index===e._index&&(this._size=e._size,!0)}}e.RowResizeRequest=n;class i extends f.ConflatableMessage{constructor(e,t,n){super("column-resize-request"),this._region=e,this._index=t,this._size=n}get region(){return this._region}get index(){return this._index}get size(){return this._size}conflate(e){return this._region===e._region&&this._index===e._index&&(this._size=e._size,!0)}}e.ColumnResizeRequest=i}(W||(W={}));class $ extends N{constructor(e){super();let t=G.splitFields(e.schema);this._data=e.data,this._bodyFields=t.bodyFields,this._headerFields=t.headerFields,this._missingValues=G.createMissingMap(e.schema)}rowCount(e){return"body"===e?this._data.length:1}columnCount(e){return"body"===e?this._bodyFields.length:this._headerFields.length}data(e,t,n){let i,r;switch(e){case"body":i=this._bodyFields[n],r=this._data[t][i.name];break;case"column-header":i=this._bodyFields[n],r=i.title||i.name;break;case"row-header":i=this._headerFields[n],r=this._data[t][i.name];break;case"corner-header":i=this._headerFields[n],r=i.title||i.name;break;default:throw"unreachable"}return null!==this._missingValues&&"string"==typeof r&&!0===this._missingValues[r]?null:r}metadata(e,t,n){return"body"===e||"column-header"===e?this._bodyFields[n]:this._headerFields[n]}}!function(e){e.splitFields=function(e){let t;t=void 0===e.primaryKey?[]:"string"==typeof e.primaryKey?[e.primaryKey]:e.primaryKey;let n=[],i=[];for(let r of e.fields)-1===t.indexOf(r.name)?n.push(r):i.push(r);return{bodyFields:n,headerFields:i}},e.createMissingMap=function(e){if(!e.missingValues||0===e.missingValues.length)return null;let t=Object.create(null);for(let n of e.missingValues)t[n]=!0;return t}}(G||(G={}));const J=/^(\d+(\.\d+)?)%$/,K=/^(\d+(\.\d+)?)px$/;class Z extends M{constructor(e={}){super(),this.backgroundColor=e.backgroundColor||"",this.textColor=e.textColor||"#000000",this.placeholder=e.placeholder||"...",this.width=e.width||"",this.height=void 0===e.height?"100%":e.height}isReady(e){return!e.value||void 0!==Z.dataCache.get(e.value)}async load(e){if(!e.value)return;const t=e.value,n=new p.PromiseDelegate;Z.dataCache.set(t,void 0);const i=new Image;return i.onload=()=>{Z.dataCache.set(t,i),n.resolve()},i.src=t,n.promise}paintPlaceholder(e,t){this.drawBackground(e,t),this.drawPlaceholder(e,t)}paint(e,t){this.drawBackground(e,t),this.drawImage(e,t)}drawBackground(e,t){const n=_.resolveOption(this.backgroundColor,t);n&&(e.fillStyle=n,e.fillRect(t.x,t.y,t.width,t.height))}drawPlaceholder(e,t){const n=_.resolveOption(this.placeholder,t),i=_.resolveOption(this.textColor,t),r=t.x+t.width/2,s=t.y+t.height/2;e.fillStyle=i,e.fillText(n,r,s)}drawImage(e,t){if(!t.value)return;const n=Z.dataCache.get(t.value);if(!n)return this.drawPlaceholder(e,t);const i=_.resolveOption(this.width,t),r=_.resolveOption(this.height,t);if(!i&&!r)return void e.drawImage(n,t.x,t.y);let s,a,o,l,c=n.width,u=n.height;(s=i.match(J))?c=parseFloat(s[1])/100*t.width:(a=i.match(K))&&(c=parseFloat(a[1])),(o=r.match(J))?u=parseFloat(o[1])/100*t.height:(l=r.match(K))&&(u=parseFloat(l[1])),i||(c=n.width/n.height*u),r||(u=n.height/n.width*c),e.drawImage(n,t.x,t.y,c,u)}}Z.dataCache=new Map},6038:(e,t,n)=>{"use strict";n.d(t,{At:()=>r});var i=n(8418);class r{constructor(e){this._fn=e}get isDisposed(){return!this._fn}dispose(){if(!this._fn)return;let e=this._fn;this._fn=null,e()}}class s{constructor(){this._isDisposed=!1,this._items=new Set}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((e=>{e.dispose()})),this._items.clear())}contains(e){return this._items.has(e)}add(e){this._items.add(e)}remove(e){this._items.delete(e)}clear(){this._items.clear()}}!function(e){e.from=function(t){let n=new e;for(const e of t)n.add(e);return n}}(s||(s={}));class a extends s{constructor(){super(...arguments),this._disposed=new i.Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),i.Signal.clearData(this))}}!function(e){e.from=function(t){let n=new e;for(const e of t)n.add(e);return n}}(a||(a={}))},9327:(e,t,n)=>{"use strict";var i,r,s,a,o;n.r(t),n.d(t,{ClipboardExt:()=>i,ElementExt:()=>r,Platform:()=>s,Selector:()=>a}),function(e){e.copyText=function(e){const t=document.body,n=i=>{i.preventDefault(),i.stopPropagation(),i.clipboardData.setData("text",e),t.removeEventListener("copy",n,!0)};t.addEventListener("copy",n,!0),document.execCommand("copy")}}(i||(i={})),function(e){e.boxSizing=function(e){let t=window.getComputedStyle(e),n=parseFloat(t.borderTopWidth)||0,i=parseFloat(t.borderLeftWidth)||0,r=parseFloat(t.borderRightWidth)||0,s=parseFloat(t.borderBottomWidth)||0,a=parseFloat(t.paddingTop)||0,o=parseFloat(t.paddingLeft)||0,l=parseFloat(t.paddingRight)||0,c=parseFloat(t.paddingBottom)||0;return{borderTop:n,borderLeft:i,borderRight:r,borderBottom:s,paddingTop:a,paddingLeft:o,paddingRight:l,paddingBottom:c,horizontalSum:i+o+l+r,verticalSum:n+a+c+s}},e.sizeLimits=function(e){let t=window.getComputedStyle(e),n=parseFloat(t.minWidth)||0,i=parseFloat(t.minHeight)||0,r=parseFloat(t.maxWidth)||1/0,s=parseFloat(t.maxHeight)||1/0;return r=Math.max(n,r),s=Math.max(i,s),{minWidth:n,minHeight:i,maxWidth:r,maxHeight:s}},e.hitTest=function(e,t,n){let i=e.getBoundingClientRect();return t>=i.left&&t<i.right&&n>=i.top&&n<i.bottom},e.scrollIntoViewIfNeeded=function(e,t){let n=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<=n.top&&i.bottom>=n.bottom||(i.top<n.top&&i.height<=n.height||i.bottom>n.bottom&&i.height>=n.height?e.scrollTop-=n.top-i.top:(i.top<n.top&&i.height>n.height||i.bottom>n.bottom&&i.height<n.height)&&(e.scrollTop-=n.bottom-i.bottom))}}(r||(r={})),function(e){e.IS_MAC=!!navigator.platform.match(/Mac/i),e.IS_WIN=!!navigator.platform.match(/Win/i),e.IS_IE=/Trident/.test(navigator.userAgent),e.IS_EDGE=/Edge/.test(navigator.userAgent),e.accelKey=function(t){return e.IS_MAC?t.metaKey:t.ctrlKey}}(s||(s={})),function(e){e.calculateSpecificity=function(e){if(e in o.specificityCache)return o.specificityCache[e];let t=o.calculateSingle(e);return o.specificityCache[e]=t},e.isValid=function(e){if(e in o.validityCache)return o.validityCache[e];let t=!0;try{o.testElem.querySelector(e)}catch(e){t=!1}return o.validityCache[e]=t},e.matches=function(e,t){return o.protoMatchFunc.call(e,t)}}(a||(a={})),function(e){e.specificityCache=Object.create(null),e.validityCache=Object.create(null),e.testElem=document.createElement("div"),e.protoMatchFunc=(()=>{let e=Element.prototype;return e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){let t=this,n=t.ownerDocument?t.ownerDocument.querySelectorAll(e):[];return-1!==Array.prototype.indexOf.call(n,t)}})(),e.calculateSingle=function(e){let c=0,u=0,h=0;function d(t){let n=e.match(t);return null!==n&&(e=e.slice(n[0].length),!0)}for(e=(e=e.split(",",1)[0]).replace(l," $1 ");e.length>0;)if(d(t))c++;else if(d(n))u++;else if(d(i))u++;else if(d(s))h++;else if(d(a))u++;else if(d(r))h++;else if(!d(o))return 0;return c=Math.min(c,255),u=Math.min(u,255),h=Math.min(h,255),c<<16|u<<8|h};const t=/^#[^\s\+>~#\.\[:]+/,n=/^\.[^\s\+>~#\.\[:]+/,i=/^\[[^\]]+\]/,r=/^[^\s\+>~#\.\[:]+/,s=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,a=/^:[^\s\+>~#\.\[:]+/,o=/^[\s\+>~\*]+/,l=/:not\(([^\)]+)\)/g}(o||(o={}))},7481:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var i,r=n(6038);class s{constructor(e){this._onScrollFrame=()=>{if(!this._scrollTarget)return;let{element:e,edge:t,distance:n}=this._scrollTarget,r=i.SCROLL_EDGE_SIZE-n,s=Math.pow(r/i.SCROLL_EDGE_SIZE,2),a=Math.max(1,Math.round(s*i.SCROLL_EDGE_SIZE));switch(t){case"top":e.scrollTop-=a;break;case"left":e.scrollLeft-=a;break;case"right":e.scrollLeft+=a;break;case"bottom":e.scrollTop+=a}requestAnimationFrame(this._onScrollFrame)},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}dispose(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){let e=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:-1,clientY:-1});i.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}}get isDisposed(){return this._disposed}start(e,t){if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,t),this._promise=new Promise((e=>{this._resolve=e}));let n=new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:e,clientY:t});return document.dispatchEvent(n),this._promise}handleEvent(e){switch(e.type){case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation()}}moveDragImage(e,t){this.dragImage&&(this.dragImage.style.transform=`translate(${e}px, ${t}px)`)}_evtPointerMove(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)}_evtPointerUp(e){if(e.preventDefault(),e.stopPropagation(),0!==e.button)return;if(this._updateCurrentTarget(e),!this._currentTarget)return void this._finalize("none");if("none"===this._dropAction)return i.dispatchDragLeave(this,this._currentTarget,null,e),void this._finalize("none");let t=i.dispatchDrop(this,this._currentTarget,e);this._finalize(t)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.dispose()}_addListeners(){document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)}_removeListeners(){document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)}_updateDragScroll(e){let t=i.findScrollTarget(e);(this._scrollTarget||t)&&(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=t)}_updateCurrentTarget(e){let t=this._currentTarget,n=this._currentTarget,r=this._currentElement,s=i.findElementBehindBackdrop(e,this.document);this._currentElement=s,s!==r&&s!==n&&i.dispatchDragExit(this,n,s,e),s!==r&&s!==n&&(n=i.dispatchDragEnter(this,s,n,e)),n!==t&&(this._currentTarget=n,i.dispatchDragLeave(this,t,n,e));let a=i.dispatchDragOver(this,n,e);this._setDropAction(a)}_attachDragImage(e,t){if(!this.dragImage)return;this.dragImage.classList.add("lm-mod-drag-image");let n=this.dragImage.style;n.pointerEvents="none",n.position="fixed",n.transform=`translate(${e}px, ${t}px)`,(this.document instanceof Document?this.document.body:this.document.firstElementChild).appendChild(this.dragImage)}_detachDragImage(){if(!this.dragImage)return;let e=this.dragImage.parentNode;e&&e.removeChild(this.dragImage)}_setDropAction(e){if(e=i.validateAction(e,this.supportedActions),!this._override||this._dropAction!==e)switch(e){case"none":this._dropAction=e,this._override=s.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=e,this._override=s.overrideCursor("copy",this.document);break;case"link":this._dropAction=e,this._override=s.overrideCursor("alias",this.document);break;case"move":this._dropAction=e,this._override=s.overrideCursor("move",this.document)}}_finalize(e){let t=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,t&&t(e)}}!function(e){class t extends DragEvent{constructor(e,t){super(t.type,{bubbles:!0,cancelable:!0,altKey:e.altKey,button:e.button,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:0,metaKey:e.metaKey,relatedTarget:t.related,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,view:window});const{drag:n}=t;this.dropAction="none",this.mimeData=n.mimeData,this.proposedAction=n.proposedAction,this.supportedActions=n.supportedActions,this.source=n.source}}e.Event=t,e.overrideCursor=function(e,t=document){return i.overrideCursor(e,t)}}(s||(s={})),function(e){function t(t,r=document){if(t){if(n&&t==n.event)return n.element;e.cursorBackdrop.style.zIndex="-1000";const i=r.elementFromPoint(t.clientX,t.clientY);return e.cursorBackdrop.style.zIndex="",n={event:t,element:i},i}{const t=e.cursorBackdrop.style.transform;if(i&&t===i.transform)return i.element;const n=e.cursorBackdrop.getBoundingClientRect();e.cursorBackdrop.style.zIndex="-1000";const s=r.elementFromPoint(n.left+n.width/2,n.top+n.height/2);return e.cursorBackdrop.style.zIndex="",i={transform:t,element:s},s}}e.SCROLL_EDGE_SIZE=20,e.validateAction=function(e,t){return a[e]&o[t]?e:"none"},e.findElementBehindBackdrop=t;let n=null,i=null;e.findScrollTarget=function(n){let i=n.clientX,r=n.clientY,s=t(n);for(;s;s=s.parentElement){if(!s.hasAttribute("data-lm-dragscroll"))continue;let t=0,n=0;s===document.body&&(t=window.pageXOffset,n=window.pageYOffset);let a=s.getBoundingClientRect(),o=a.top+n,l=a.left+t,c=l+a.width,u=o+a.height;if(i<l||i>=c||r<o||r>=u)continue;let h,d=i-l+1,f=r-o+1,p=c-i,m=u-r,_=Math.min(d,f,p,m);if(_>e.SCROLL_EDGE_SIZE)continue;switch(_){case m:h="bottom";break;case f:h="top";break;case p:h="right";break;case d:h="left";break;default:throw"unreachable"}let g,y=s.scrollWidth-s.clientWidth,v=s.scrollHeight-s.clientHeight;switch(h){case"top":g=v>0&&s.scrollTop>0;break;case"left":g=y>0&&s.scrollLeft>0;break;case"right":g=y>0&&s.scrollLeft<y;break;case"bottom":g=v>0&&s.scrollTop<v;break;default:throw"unreachable"}if(g)return{element:s,edge:h,distance:_}}return null},e.dispatchDragEnter=function(e,t,n,i){if(!t)return null;let r=new s.Event(i,{drag:e,related:n,type:"lm-dragenter"});if(!t.dispatchEvent(r))return t;const a=e.document instanceof Document?e.document.body:e.document.firstElementChild;return t===a?n:(r=new s.Event(i,{drag:e,related:n,type:"lm-dragenter"}),a.dispatchEvent(r),a)},e.dispatchDragExit=function(e,t,n,i){if(!t)return;let r=new s.Event(i,{drag:e,related:n,type:"lm-dragexit"});t.dispatchEvent(r)},e.dispatchDragLeave=function(e,t,n,i){if(!t)return;let r=new s.Event(i,{drag:e,related:n,type:"lm-dragleave"});t.dispatchEvent(r)},e.dispatchDragOver=function(e,t,n){if(!t)return"none";let i=new s.Event(n,{drag:e,related:null,type:"lm-dragover"});return t.dispatchEvent(i)?"none":i.dropAction},e.dispatchDrop=function(e,t,n){if(!t)return"none";let i=new s.Event(n,{drag:e,related:null,type:"lm-drop"});return t.dispatchEvent(i)?"none":i.dropAction};const a={none:0,copy:1,link:2,move:4},o={none:a.none,copy:a.copy,link:a.link,move:a.move,"copy-link":a.copy|a.link,"copy-move":a.copy|a.move,"link-move":a.link|a.move,all:a.copy|a.link|a.move};function l(t){e.cursorBackdrop&&(e.cursorBackdrop.style.transform=`translate(${t.clientX}px, ${t.clientY}px)`)}function c(n){if(!e.cursorBackdrop)return;let i=t();if(!i)return;const r=i.closest("[data-lm-dragscroll]");r&&(r.scrollTop+=e.cursorBackdrop.scrollTop-h,r.scrollLeft+=e.cursorBackdrop.scrollLeft-h,u())}function u(){e.cursorBackdrop.scrollTop=h,e.cursorBackdrop.scrollLeft=h}e.overrideCursor=function(t,n=document){let i=++d;const s=n instanceof Document?n.body:n.firstElementChild;return e.cursorBackdrop.isConnected||(e.cursorBackdrop.style.transform="scale(0)",s.appendChild(e.cursorBackdrop),u(),document.addEventListener("pointermove",l,{capture:!0,passive:!0}),e.cursorBackdrop.addEventListener("scroll",c,{capture:!0,passive:!0})),e.cursorBackdrop.style.cursor=t,new r.At((()=>{i===d&&e.cursorBackdrop.isConnected&&(document.removeEventListener("pointermove",l,!0),e.cursorBackdrop.removeEventListener("scroll",c,!0),s.removeChild(e.cursorBackdrop))}))};const h=500;let d=0;e.cursorBackdrop=function(){const e=document.createElement("div");return e.classList.add("lm-cursor-backdrop"),e}()}(i||(i={}))},3871:(e,t,n)=>{"use strict";function i(){return a.keyboardLayout}n.d(t,{mM:()=>i});class r{constructor(e,t,n=[]){this.name=e,this._codes=t,this._keys=r.extractKeys(t),this._modifierKeys=r.convertToKeySet(n)}keys(){return Object.keys(this._keys)}isValidKey(e){return e in this._keys}isModifierKey(e){return e in this._modifierKeys}keyForKeydownEvent(e){return this._codes[e.keyCode]||""}}!function(e){e.extractKeys=function(e){let t=Object.create(null);for(let n in e)t[e[n]]=!0;return t},e.convertToKeySet=function(e){let t=Object(null);for(let n=0,i=e.length;n<i;++n)t[e[n]]=!0;return t}}(r||(r={}));const s=new r("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]);var a;!function(e){e.keyboardLayout=s}(a||(a={}))},270:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ConflatableMessage:()=>l,Message:()=>o,MessageLoop:()=>r});var i,r,s=n(5057);class a{constructor(){this._first=null,this._last=null,this._size=0}get isEmpty(){return 0===this._size}get size(){return this._size}get length(){return this._size}get first(){return this._first?this._first.value:void 0}get last(){return this._last?this._last.value:void 0}get firstNode(){return this._first}get lastNode(){return this._last}*[Symbol.iterator](){let e=this._first;for(;e;)yield e.value,e=e.next}*retro(){let e=this._last;for(;e;)yield e.value,e=e.prev}*nodes(){let e=this._first;for(;e;)yield e,e=e.next}*retroNodes(){let e=this._last;for(;e;)yield e,e=e.prev}assign(e){this.clear();for(const t of e)this.addLast(t)}push(e){this.addLast(e)}pop(){return this.removeLast()}shift(e){this.addFirst(e)}unshift(){return this.removeFirst()}addFirst(e){let t=new i.LinkedListNode(this,e);return this._first?(t.next=this._first,this._first.prev=t,this._first=t):(this._first=t,this._last=t),this._size++,t}addLast(e){let t=new i.LinkedListNode(this,e);return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,t}insertBefore(e,t){if(!t||t===this._first)return this.addFirst(e);if(!(t instanceof i.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");let n=new i.LinkedListNode(this,e),r=t,s=r.prev;return n.next=r,n.prev=s,r.prev=n,s.next=n,this._size++,n}insertAfter(e,t){if(!t||t===this._last)return this.addLast(e);if(!(t instanceof i.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");let n=new i.LinkedListNode(this,e),r=t,s=r.next;return n.next=s,n.prev=r,r.next=n,s.prev=n,this._size++,n}removeFirst(){let e=this._first;if(e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value}removeLast(){let e=this._last;if(e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value}removeNode(e){if(!(e instanceof i.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");let t=e;t===this._first&&t===this._last?(this._first=null,this._last=null):t===this._first?(this._first=t.next,this._first.prev=null):t===this._last?(this._last=t.prev,this._last.next=null):(t.next.prev=t.prev,t.prev.next=t.next),t.list=null,t.next=null,t.prev=null,this._size--}clear(){let e=this._first;for(;e;){let t=e.next;e.list=null,e.prev=null,e.next=null,e=t}this._first=null,this._last=null,this._size=0}}!function(e){e.from=function(t){let n=new e;return n.assign(t),n}}(a||(a={})),function(e){e.LinkedListNode=class{constructor(e,t){this.list=null,this.next=null,this.prev=null,this.list=e,this.value=t}}}(i||(i={}));class o{constructor(e){this.type=e}get isConflatable(){return!1}conflate(e){return!1}}class l extends o{get isConflatable(){return!0}conflate(e){return!0}}!function(e){let t=null;const n=(i=Promise.resolve(),e=>{let t=!1;return i.then((()=>!t&&e())),()=>{t=!0}});var i;function r(e,t){let n=l.get(e);if(!n||0===n.length)return void d(e,t);let i=(0,s.every)((0,s.retro)(n),(n=>!n||function(e,t,n){let i=!0;try{i="function"==typeof e?e(t,n):e.messageHook(t,n)}catch(e){u(e)}return i}(n,e,t)));i&&d(e,t)}e.sendMessage=r,e.postMessage=function(e,t){t.isConflatable&&(0,s.some)(o,(n=>n.handler===e&&!!n.msg&&n.msg.type===t.type&&!!n.msg.isConflatable&&n.msg.conflate(t)))||f(e,t)},e.installMessageHook=function(e,t){let n=l.get(e);n&&-1!==n.indexOf(t)||(n?n.push(t):l.set(e,[t]))},e.removeMessageHook=function(e,t){let n=l.get(e);if(!n)return;let i=n.indexOf(t);-1!==i&&(n[i]=null,m(n))},e.clearData=function(e){let t=l.get(e);t&&t.length>0&&(s.ArrayExt.fill(t,null),m(t));for(const t of o)t.handler===e&&(t.handler=null,t.msg=null)},e.flush=function(){h||null===t||(t(),t=null,h=!0,p(),h=!1)},e.getExceptionHandler=function(){return u},e.setExceptionHandler=function(e){let t=u;return u=e,t};const o=new a,l=new WeakMap,c=new Set;let u=e=>{console.error(e)},h=!1;function d(e,t){try{e.processMessage(t)}catch(e){u(e)}}function f(e,i){o.addLast({handler:e,msg:i}),null===t&&(t=n(p))}function p(){if(t=null,o.isEmpty)return;let e={handler:null,msg:null};for(o.addLast(e);;){let t=o.removeFirst();if(t===e)return;t.handler&&t.msg&&r(t.handler,t.msg)}}function m(e){0===c.size&&n(_),c.add(e)}function _(){c.forEach(g),c.clear()}function g(e){s.ArrayExt.removeAllWhere(e,y)}function y(e){return null===e}}(r||(r={}))},1067:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Debouncer:()=>l,Poll:()=>a,RateLimiter:()=>o,Throttler:()=>c});var i,r=n(2006),s=n(8418);class a{constructor(e){var t;this._disposed=new s.Signal(this),this._lingered=0,this._tick=new r.PromiseDelegate,this._ticked=new s.Signal(this),this._factory=e.factory,this._linger=null!==(t=e.linger)&&void 0!==t?t:i.DEFAULT_LINGER,this._standby=e.standby||i.DEFAULT_STANDBY,this._state={...i.DEFAULT_STATE,timestamp:(new Date).getTime()};const n=e.frequency||{},a=Math.max(n.interval||0,n.max||0,i.DEFAULT_FREQUENCY.max);this.frequency={...i.DEFAULT_FREQUENCY,...n,max:a},this.name=e.name||i.DEFAULT_NAME,"auto"in e&&!e.auto||setTimeout((()=>this.start()))}get disposed(){return this._disposed}get frequency(){return this._frequency}set frequency(e){if(this.isDisposed||r.JSONExt.deepEqual(e,this.frequency||{}))return;let{backoff:t,interval:n,max:i}=e;if(n=Math.round(n),i=Math.round(i),"number"==typeof t&&t<1)throw new Error("Poll backoff growth factor must be at least 1");if((n<0||n>i)&&n!==a.NEVER)throw new Error("Poll interval must be between 0 and max");if(i>a.MAX_INTERVAL&&i!==a.NEVER)throw new Error(`Max interval must be less than ${a.MAX_INTERVAL}`);this._frequency={backoff:t,interval:n,max:i}}get isDisposed(){return"disposed"===this.state.phase}get standby(){return this._standby}set standby(e){this.isDisposed||this.standby===e||(this._standby=e)}get state(){return this._state}get tick(){return this._tick.promise}get ticked(){return this._ticked}async*[Symbol.asyncIterator](){for(;!this.isDisposed;)yield this.state,await this.tick.catch((()=>{}))}dispose(){this.isDisposed||(this._state={...i.DISPOSED_STATE,timestamp:(new Date).getTime()},this._tick.promise.catch((e=>{})),this._tick.reject(new Error(`Poll (${this.name}) is disposed.`)),this._disposed.emit(void 0),s.Signal.clearData(this))}refresh(){return this.schedule({cancel:({phase:e})=>"refreshed"===e,interval:a.IMMEDIATE,phase:"refreshed"})}async schedule(e={}){if(this.isDisposed)return;if(e.cancel&&e.cancel(this.state))return;const t=this._tick,n=new r.PromiseDelegate,i={interval:this.frequency.interval,payload:null,phase:"standby",timestamp:(new Date).getTime(),...e};this._state=i,this._tick=n,clearTimeout(this._timeout),this._ticked.emit(this.state),t.resolve(this),await t.promise,i.interval!==a.NEVER?this._timeout=setTimeout((()=>{this.isDisposed||this.tick!==n.promise||this._execute()}),i.interval):this._timeout=void 0}start(){return this.schedule({cancel:({phase:e})=>"constructed"!==e&&"standby"!==e&&"stopped"!==e,interval:a.IMMEDIATE,phase:"started"})}stop(){return this.schedule({cancel:({phase:e})=>"stopped"===e,interval:a.NEVER,phase:"stopped"})}get hidden(){return i.hidden}_execute(){let e="function"==typeof this.standby?this.standby():this.standby;if("never"===e?e=!1:"when-hidden"===e&&(this.hidden?e=++this._lingered>this._linger:(this._lingered=0,e=!1)),e)return void this.schedule();const t=this.tick;this._factory(this.state).then((e=>{this.isDisposed||this.tick!==t||this.schedule({payload:e,phase:"rejected"===this.state.phase?"reconnected":"resolved"})})).catch((e=>{this.isDisposed||this.tick!==t||this.schedule({interval:i.sleep(this.frequency,this.state),payload:e,phase:"rejected"})}))}}!function(e){e.IMMEDIATE=0,e.MAX_INTERVAL=2147483647,e.NEVER=1/0}(a||(a={})),function(e){e.DEFAULT_BACKOFF=3,e.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},e.DEFAULT_LINGER=1,e.DEFAULT_NAME="unknown",e.DEFAULT_STANDBY="when-hidden",e.DEFAULT_STATE={interval:a.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},e.DISPOSED_STATE={interval:a.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()},e.sleep=function(t,n){const{backoff:i,interval:r,max:s}=t;if(r===a.NEVER)return r;const o=!0===i?e.DEFAULT_BACKOFF:!1===i?1:i,l=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(r,n.interval*o);return Math.min(s,l)},e.hidden="undefined"!=typeof document&&(document.addEventListener("visibilitychange",(()=>{e.hidden="hidden"===document.visibilityState})),document.addEventListener("pagehide",(()=>{e.hidden="hidden"===document.visibilityState})),"hidden"===document.visibilityState)}(i||(i={}));class o{constructor(e,t=500){this.args=void 0,this.payload=null,this.limit=t,this.poll=new a({auto:!1,factory:async()=>{const{args:t}=this;return this.args=void 0,e(...t)},frequency:{backoff:!1,interval:a.NEVER,max:a.NEVER},standby:"never"}),this.payload=new r.PromiseDelegate,this.poll.ticked.connect(((e,t)=>{const{payload:n}=this;return"resolved"===t.phase?(this.payload=new r.PromiseDelegate,void n.resolve(t.payload)):"rejected"===t.phase||"stopped"===t.phase?(this.payload=new r.PromiseDelegate,n.promise.catch((e=>{})),void n.reject(t.payload)):void 0}),this)}get isDisposed(){return null===this.payload}dispose(){this.isDisposed||(this.args=void 0,this.payload=null,this.poll.dispose())}async stop(){return this.poll.stop()}}class l extends o{invoke(...e){return this.args=e,this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise}}class c extends o{constructor(e,t){super(e,"number"==typeof t?t:t&&t.limit),this._trailing=!1,"number"!=typeof t&&t&&"trailing"===t.edge&&(this._trailing=!0),this._interval=this._trailing?this.limit:a.IMMEDIATE}invoke(...e){const t="invoked"!==this.poll.state.phase;return(t||this._trailing)&&(this.args=e),t&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise}}},8418:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Signal:()=>a,Stream:()=>o});var i,r=n(5057),s=n(2006);class a{constructor(e){this.sender=e}connect(e,t){return i.connect(this,e,t)}disconnect(e,t){return i.disconnect(this,e,t)}emit(e){i.emit(this,e)}}!function(e){e.disconnectBetween=function(e,t){i.disconnectBetween(e,t)},e.disconnectSender=function(e){i.disconnectSender(e)},e.disconnectReceiver=function(e){i.disconnectReceiver(e)},e.disconnectAll=function(e){i.disconnectAll(e)},e.clearData=function(e){i.disconnectAll(e)},e.getExceptionHandler=function(){return i.exceptionHandler},e.setExceptionHandler=function(e){let t=i.exceptionHandler;return i.exceptionHandler=e,t}}(a||(a={}));class o extends a{constructor(){super(...arguments),this._pending=new s.PromiseDelegate}async*[Symbol.asyncIterator](){let e=this._pending;for(;;)try{const{args:t,next:n}=await e.promise;e=n,yield t}catch(e){return}}emit(e){const t=this._pending,n=this._pending=new s.PromiseDelegate;t.resolve({args:e,next:n}),super.emit(e)}stop(){this._pending.promise.catch((()=>{})),this._pending.reject("stop"),this._pending=new s.PromiseDelegate}}!function(e){function t(e){let t=i.get(e);if(t&&0!==t.length){for(const e of t){if(!e.signal)continue;let t=e.thisArg||e.slot;e.signal=null,u(s.get(t))}u(t)}}function n(e){let t=s.get(e);if(t&&0!==t.length){for(const e of t){if(!e.signal)continue;let t=e.signal.sender;e.signal=null,u(i.get(t))}u(t)}}e.exceptionHandler=e=>{console.error(e)},e.connect=function(e,t,n){n=n||void 0;let r=i.get(e.sender);if(r||(r=[],i.set(e.sender,r)),l(r,e,t,n))return!1;let a=n||t,o=s.get(a);o||(o=[],s.set(a,o));let c={signal:e,slot:t,thisArg:n};return r.push(c),o.push(c),!0},e.disconnect=function(e,t,n){n=n||void 0;let r=i.get(e.sender);if(!r||0===r.length)return!1;let a=l(r,e,t,n);if(!a)return!1;let o=n||t,c=s.get(o);return a.signal=null,u(r),u(c),!0},e.disconnectBetween=function(e,t){let n=i.get(e);if(!n||0===n.length)return;let r=s.get(t);if(r&&0!==r.length){for(const t of r)t.signal&&t.signal.sender===e&&(t.signal=null);u(n),u(r)}},e.disconnectSender=t,e.disconnectReceiver=n,e.disconnectAll=function(e){t(e),n(e)},e.emit=function(e,t){let n=i.get(e.sender);if(n&&0!==n.length)for(let i=0,r=n.length;i<r;++i){let r=n[i];r.signal===e&&c(r,t)}};const i=new WeakMap,s=new WeakMap,a=new Set,o="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function l(e,t,n,i){return(0,r.find)(e,(e=>e.signal===t&&e.slot===n&&e.thisArg===i))}function c(t,n){let{signal:i,slot:r,thisArg:s}=t;try{r.call(s,i.sender,n)}catch(t){e.exceptionHandler(t)}}function u(e){0===a.size&&o(h),a.add(e)}function h(){a.forEach(d),a.clear()}function d(e){r.ArrayExt.removeAllWhere(e,f)}function f(e){return null===e.signal}}(i||(i={}))},3975:(e,t,n)=>{"use strict";n.r(t),n.d(t,{VirtualDOM:()=>i,VirtualElement:()=>o,VirtualElementPass:()=>l,VirtualText:()=>a,h:()=>c,hpass:()=>u});var i,r,s=n(5057);class a{constructor(e){this.type="text",this.content=e}}class o{constructor(e,t,n,i){this.type="element",this.tag=e,this.attrs=t,this.children=n,this.renderer=i}}class l extends o{constructor(e,t,n){super(e,t,[],n||void 0)}}function c(e){let t,n={},i=[];for(let e=1,s=arguments.length;e<s;++e){let s=arguments[e];"string"==typeof s?i.push(new a(s)):s instanceof a||s instanceof o?i.push(s):s instanceof Array?r(i,s):1!==e&&2!==e||!s||"object"!=typeof s||("render"in s?t=s:n=s)}return new o(e,n,i,t);function r(e,t){for(let n of t)"string"==typeof n?e.push(new a(n)):(n instanceof a||n instanceof o)&&e.push(n)}}function u(e){let t={},n=null;if(2===arguments.length){const e=arguments[1];"render"in e?n=e:t=e}else if(3===arguments.length)t=arguments[1],n=arguments[2];else if(arguments.length>3)throw new Error("hpass() should be called with 1, 2, or 3 arguments");return new l(e,t,n)}!function(e){e.a=e.bind(void 0,"a"),e.abbr=e.bind(void 0,"abbr"),e.address=e.bind(void 0,"address"),e.area=e.bind(void 0,"area"),e.article=e.bind(void 0,"article"),e.aside=e.bind(void 0,"aside"),e.audio=e.bind(void 0,"audio"),e.b=e.bind(void 0,"b"),e.bdi=e.bind(void 0,"bdi"),e.bdo=e.bind(void 0,"bdo"),e.blockquote=e.bind(void 0,"blockquote"),e.br=e.bind(void 0,"br"),e.button=e.bind(void 0,"button"),e.canvas=e.bind(void 0,"canvas"),e.caption=e.bind(void 0,"caption"),e.cite=e.bind(void 0,"cite"),e.code=e.bind(void 0,"code"),e.col=e.bind(void 0,"col"),e.colgroup=e.bind(void 0,"colgroup"),e.data=e.bind(void 0,"data"),e.datalist=e.bind(void 0,"datalist"),e.dd=e.bind(void 0,"dd"),e.del=e.bind(void 0,"del"),e.dfn=e.bind(void 0,"dfn"),e.div=e.bind(void 0,"div"),e.dl=e.bind(void 0,"dl"),e.dt=e.bind(void 0,"dt"),e.em=e.bind(void 0,"em"),e.embed=e.bind(void 0,"embed"),e.fieldset=e.bind(void 0,"fieldset"),e.figcaption=e.bind(void 0,"figcaption"),e.figure=e.bind(void 0,"figure"),e.footer=e.bind(void 0,"footer"),e.form=e.bind(void 0,"form"),e.h1=e.bind(void 0,"h1"),e.h2=e.bind(void 0,"h2"),e.h3=e.bind(void 0,"h3"),e.h4=e.bind(void 0,"h4"),e.h5=e.bind(void 0,"h5"),e.h6=e.bind(void 0,"h6"),e.header=e.bind(void 0,"header"),e.hr=e.bind(void 0,"hr"),e.i=e.bind(void 0,"i"),e.iframe=e.bind(void 0,"iframe"),e.img=e.bind(void 0,"img"),e.input=e.bind(void 0,"input"),e.ins=e.bind(void 0,"ins"),e.kbd=e.bind(void 0,"kbd"),e.label=e.bind(void 0,"label"),e.legend=e.bind(void 0,"legend"),e.li=e.bind(void 0,"li"),e.main=e.bind(void 0,"main"),e.map=e.bind(void 0,"map"),e.mark=e.bind(void 0,"mark"),e.meter=e.bind(void 0,"meter"),e.nav=e.bind(void 0,"nav"),e.noscript=e.bind(void 0,"noscript"),e.object=e.bind(void 0,"object"),e.ol=e.bind(void 0,"ol"),e.optgroup=e.bind(void 0,"optgroup"),e.option=e.bind(void 0,"option"),e.output=e.bind(void 0,"output"),e.p=e.bind(void 0,"p"),e.param=e.bind(void 0,"param"),e.pre=e.bind(void 0,"pre"),e.progress=e.bind(void 0,"progress"),e.q=e.bind(void 0,"q"),e.rp=e.bind(void 0,"rp"),e.rt=e.bind(void 0,"rt"),e.ruby=e.bind(void 0,"ruby"),e.s=e.bind(void 0,"s"),e.samp=e.bind(void 0,"samp"),e.section=e.bind(void 0,"section"),e.select=e.bind(void 0,"select"),e.small=e.bind(void 0,"small"),e.source=e.bind(void 0,"source"),e.span=e.bind(void 0,"span"),e.strong=e.bind(void 0,"strong"),e.sub=e.bind(void 0,"sub"),e.summary=e.bind(void 0,"summary"),e.sup=e.bind(void 0,"sup"),e.table=e.bind(void 0,"table"),e.tbody=e.bind(void 0,"tbody"),e.td=e.bind(void 0,"td"),e.textarea=e.bind(void 0,"textarea"),e.tfoot=e.bind(void 0,"tfoot"),e.th=e.bind(void 0,"th"),e.thead=e.bind(void 0,"thead"),e.time=e.bind(void 0,"time"),e.title=e.bind(void 0,"title"),e.tr=e.bind(void 0,"tr"),e.track=e.bind(void 0,"track"),e.u=e.bind(void 0,"u"),e.ul=e.bind(void 0,"ul"),e.var_=e.bind(void 0,"var"),e.video=e.bind(void 0,"video"),e.wbr=e.bind(void 0,"wbr")}(c||(c={})),function(e){e.realize=function(e){return r.createDOMNode(e)},e.render=function(e,t){let n=r.hostMap.get(t)||[],i=r.asContentArray(e);r.hostMap.set(t,i),r.updateContent(t,n,i)}}(i||(i={})),function(e){function t(e){let n=arguments[1]||null;const r=arguments[2]||null;if(n)n.insertBefore(t(e),r);else{if("text"===e.type)return document.createTextNode(e.content);if(n=document.createElement(e.tag),function(e,t){for(let n in t)n in i||("on"===n.substr(0,2)?e[n]=t[n]:e.setAttribute(n,t[n]));void 0!==t.className&&e.setAttribute("class",t.className),void 0!==t.htmlFor&&e.setAttribute("for",t.htmlFor),t.dataset&&function(e,t){for(let n in t)e.setAttribute(`data-${n}`,t[n])}(e,t.dataset),t.style&&function(e,t){let n,i=e.style;for(n in t)i[n]=t[n]}(e,t.style)}(n,e.attrs),e.renderer)return e.renderer.render(n,{attrs:e.attrs,children:e.children}),n;for(let i=0,r=e.children.length;i<r;++i)t(e.children[i],n)}return n}function n(e,t,i,r){for(let s=t.length-1;s>=i;--s){const i=t[s],a=r?e.lastChild:e.childNodes[s];"text"===i.type||(i.renderer&&i.renderer.unrender?i.renderer.unrender(a,{attrs:i.attrs,children:i.children}):n(a,i.children,0,!1)),r&&e.removeChild(a)}}e.hostMap=new WeakMap,e.asContentArray=function(e){return e?e instanceof Array?e:[e]:[]},e.createDOMNode=t,e.updateContent=function e(i,a,o){if(a===o)return;let l=function(e,t){let n=e.firstChild,i=Object.create(null);for(let e of t)"element"===e.type&&e.attrs.key&&(i[e.attrs.key]={vNode:e,element:n}),n=n.nextSibling;return i}(i,a),c=a.slice(),u=i.firstChild,h=o.length;for(let n=0;n<h;++n){if(n>=c.length){t(o[n],i);continue}let a=c[n],h=o[n];if(a===h){u=u.nextSibling;continue}if("text"===a.type&&"text"===h.type){u.textContent!==h.content&&(u.textContent=h.content),u=u.nextSibling;continue}if("text"===a.type||"text"===h.type){s.ArrayExt.insert(c,n,h),t(h,i,u);continue}if(!a.renderer!=!h.renderer){s.ArrayExt.insert(c,n,h),t(h,i,u);continue}let d=h.attrs.key;if(d&&d in l){let e=l[d];e.vNode!==a&&(s.ArrayExt.move(c,c.indexOf(e.vNode,n+1),n),i.insertBefore(e.element,u),a=e.vNode,u=e.element)}if(a===h){u=u.nextSibling;continue}let f=a.attrs.key;f&&f!==d?(s.ArrayExt.insert(c,n,h),t(h,i,u)):a.tag===h.tag?(r(u,a.attrs,h.attrs),h.renderer?h.renderer.render(u,{attrs:h.attrs,children:h.children}):e(u,a.children,h.children),u=u.nextSibling):(s.ArrayExt.insert(c,n,h),t(h,i,u))}n(i,c,h,!0)};const i={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function r(e,t,n){if(t===n)return;let r;for(r in t)r in i||r in n||("on"===r.substr(0,2)?e[r]=null:e.removeAttribute(r));for(r in n)r in i||t[r]===n[r]||("on"===r.substr(0,2)?e[r]=n[r]:e.setAttribute(r,n[r]));t.className!==n.className&&(void 0!==n.className?e.setAttribute("class",n.className):e.removeAttribute("class")),t.htmlFor!==n.htmlFor&&(void 0!==n.htmlFor?e.setAttribute("for",n.htmlFor):e.removeAttribute("for")),t.dataset!==n.dataset&&function(e,t,n){for(let i in t)i in n||e.removeAttribute(`data-${i}`);for(let i in n)t[i]!==n[i]&&e.setAttribute(`data-${i}`,n[i])}(e,t.dataset||{},n.dataset||{}),t.style!==n.style&&function(e,t,n){let i,r=e.style;for(i in t)i in n||(r[i]="");for(i in n)t[i]!==n[i]&&(r[i]=n[i])}(e,t.style||{},n.style||{})}}(r||(r={}))},4704:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AccordionLayout:()=>Y,AccordionPanel:()=>I,BoxEngine:()=>c,BoxLayout:()=>H,BoxPanel:()=>j,BoxSizer:()=>v,CommandPalette:()=>U,ContextMenu:()=>G,DockLayout:()=>ne,DockPanel:()=>ie,FocusTracker:()=>re,GridLayout:()=>se,Layout:()=>M,LayoutItem:()=>w,Menu:()=>W,MenuBar:()=>ae,Panel:()=>F,PanelLayout:()=>S,ScrollBar:()=>oe,SingletonLayout:()=>le,SplitLayout:()=>B,SplitPanel:()=>N,StackedLayout:()=>ce,StackedPanel:()=>ue,TabBar:()=>q,TabPanel:()=>he,Title:()=>b,Widget:()=>x});var i,r=n(5057),s=n(2006),a=n(9327),o=n(270);class l{constructor(e){this._pid=i.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}get(e){let t,n=i.ensureMap(e);return t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e),t}set(e,t){let n,r=i.ensureMap(e);n=this._pid in r?r[this._pid]:r[this._pid]=this._createValue(e);let s=this._coerceValue(e,t);this._maybeNotify(e,n,r[this._pid]=s)}coerce(e){let t,n=i.ensureMap(e);t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e);let r=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=r)}_createValue(e){return(0,this._create)(e)}_coerceValue(e,t){let n=this._coerce;return n?n(e,t):t}_compareValue(e,t){let n=this._compare;return n?n(e,t):e===t}_maybeNotify(e,t,n){let i=this._changed;i&&!this._compareValue(t,n)&&i(e,t,n)}}!function(e){e.clearData=function(e){i.ownerData.delete(e)}}(l||(l={})),function(e){e.ownerData=new WeakMap,e.nextPID=(()=>{let e=0;return()=>`pid-${`${Math.random()}`.slice(2)}-${e++}`})(),e.ensureMap=function(t){let n=e.ownerData.get(t);return n||(n=Object.create(null),e.ownerData.set(t,n),n)}}(i||(i={}));var c,u,h,d,f=n(8418),p=n(7481),m=n(8142),_=n(3975),g=n(6038),y=n(3871);class v{constructor(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1}}!function(e){e.calc=function(e,t){let n=e.length;if(0===n)return t;let i=0,r=0,s=0,a=0,o=0;for(let t=0;t<n;++t){let n=e[t],l=n.minSize,c=n.maxSize,u=n.sizeHint;n.done=!1,n.size=Math.max(l,Math.min(u,c)),s+=n.size,i+=l,r+=c,n.stretch>0&&(a+=n.stretch,o++)}if(t===s)return 0;if(t<=i){for(let t=0;t<n;++t){let n=e[t];n.size=n.minSize}return t-i}if(t>=r){for(let t=0;t<n;++t){let n=e[t];n.size=n.maxSize}return t-r}let l=.01,c=n;if(t<s){let i=s-t;for(;o>0&&i>l;){let t=i,r=a;for(let s=0;s<n;++s){let n=e[s];if(n.done||0===n.stretch)continue;let l=n.stretch*t/r;n.size-l<=n.minSize?(i-=n.size-n.minSize,a-=n.stretch,n.size=n.minSize,n.done=!0,c--,o--):(i-=l,n.size-=l)}}for(;c>0&&i>l;){let t=i/c;for(let r=0;r<n;++r){let n=e[r];n.done||(n.size-t<=n.minSize?(i-=n.size-n.minSize,n.size=n.minSize,n.done=!0,c--):(i-=t,n.size-=t))}}}else{let i=t-s;for(;o>0&&i>l;){let t=i,r=a;for(let s=0;s<n;++s){let n=e[s];if(n.done||0===n.stretch)continue;let l=n.stretch*t/r;n.size+l>=n.maxSize?(i-=n.maxSize-n.size,a-=n.stretch,n.size=n.maxSize,n.done=!0,c--,o--):(i-=l,n.size+=l)}}for(;c>0&&i>l;){let t=i/c;for(let r=0;r<n;++r){let n=e[r];n.done||(n.size+t>=n.maxSize?(i-=n.maxSize-n.size,n.size=n.maxSize,n.done=!0,c--):(i-=t,n.size+=t))}}}return 0},e.adjust=function(e,t,n){0!==e.length&&0!==n&&(n>0?function(e,t,n){let i=0;for(let n=0;n<=t;++n){let t=e[n];i+=t.maxSize-t.size}let r=0;for(let n=t+1,i=e.length;n<i;++n){let t=e[n];r+=t.size-t.minSize}let s=n=Math.min(n,i,r);for(let n=t;n>=0&&s>0;--n){let t=e[n],i=t.maxSize-t.size;i>=s?(t.sizeHint=t.size+s,s=0):(t.sizeHint=t.size+i,s-=i)}let a=n;for(let n=t+1,i=e.length;n<i&&a>0;++n){let t=e[n],i=t.size-t.minSize;i>=a?(t.sizeHint=t.size-a,a=0):(t.sizeHint=t.size-i,a-=i)}}(e,t,n):function(e,t,n){let i=0;for(let n=t+1,r=e.length;n<r;++n){let t=e[n];i+=t.maxSize-t.size}let r=0;for(let n=0;n<=t;++n){let t=e[n];r+=t.size-t.minSize}let s=n=Math.min(n,i,r);for(let n=t+1,i=e.length;n<i&&s>0;++n){let t=e[n],i=t.maxSize-t.size;i>=s?(t.sizeHint=t.size+s,s=0):(t.sizeHint=t.size+i,s-=i)}let a=n;for(let n=t;n>=0&&a>0;--n){let t=e[n],i=t.size-t.minSize;i>=a?(t.sizeHint=t.size-a,a=0):(t.sizeHint=t.size-i,a-=i)}}(e,t,-n))}}(c||(c={}));class b{constructor(e){this._label="",this._caption="",this._mnemonic=-1,this._icon=void 0,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new f.Signal(this),this._isDisposed=!1,this.owner=e.owner,void 0!==e.label&&(this._label=e.label),void 0!==e.mnemonic&&(this._mnemonic=e.mnemonic),void 0!==e.icon&&(this._icon=e.icon),void 0!==e.iconClass&&(this._iconClass=e.iconClass),void 0!==e.iconLabel&&(this._iconLabel=e.iconLabel),void 0!==e.caption&&(this._caption=e.caption),void 0!==e.className&&(this._className=e.className),void 0!==e.closable&&(this._closable=e.closable),this._dataset=e.dataset||{}}get changed(){return this._changed}get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))}get icon(){return this._icon}set icon(e){this._icon!==e&&(this._icon=e,this._changed.emit(void 0))}get iconClass(){return this._iconClass}set iconClass(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))}get caption(){return this._caption}set caption(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))}get className(){return this._className}set className(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))}get closable(){return this._closable}set closable(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,f.Signal.clearData(this))}}class x{constructor(e={}){this._flags=0,this._layout=null,this._parent=null,this._disposed=new f.Signal(this),this._hiddenMode=x.HiddenMode.Display,this.node=u.createNode(e),this.addClass("lm-Widget")}dispose(){this.isDisposed||(this.setFlag(x.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&x.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),f.Signal.clearData(this),o.MessageLoop.clearData(this),l.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this.testFlag(x.Flag.IsDisposed)}get isAttached(){return this.testFlag(x.Flag.IsAttached)}get isHidden(){return this.testFlag(x.Flag.IsHidden)}get isVisible(){return this.testFlag(x.Flag.IsVisible)}get title(){return u.titleProperty.get(this)}get id(){return this.node.id}set id(e){this.node.id=e}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this.isHidden&&this._toggleHidden(!1),e==x.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=e,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let e=new x.ChildMessage("child-removed",this);o.MessageLoop.sendMessage(this._parent,e)}if(this._parent=e,this._parent&&!this._parent.isDisposed){let e=new x.ChildMessage("child-added",this);o.MessageLoop.sendMessage(this._parent,e)}this.isDisposed||o.MessageLoop.sendMessage(this,x.Msg.ParentChanged)}}get layout(){return this._layout}set layout(e){if(this._layout!==e){if(this.testFlag(x.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}}*children(){this._layout&&(yield*this._layout)}contains(e){for(let t=e;t;t=t._parent)if(t===this)return!0;return!1}hasClass(e){return this.node.classList.contains(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e,t){return!0===t?(this.node.classList.add(e),!0):!1===t?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)}update(){o.MessageLoop.postMessage(this,x.Msg.UpdateRequest)}fit(){o.MessageLoop.postMessage(this,x.Msg.FitRequest)}activate(){o.MessageLoop.postMessage(this,x.Msg.ActivateRequest)}close(){o.MessageLoop.sendMessage(this,x.Msg.CloseRequest)}show(){if(this.testFlag(x.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||o.MessageLoop.sendMessage(this,x.Msg.BeforeShow),this.clearFlag(x.Flag.IsHidden),this._toggleHidden(!1),!this.isAttached||this.parent&&!this.parent.isVisible||o.MessageLoop.sendMessage(this,x.Msg.AfterShow),this.parent)){let e=new x.ChildMessage("child-shown",this);o.MessageLoop.sendMessage(this.parent,e)}}hide(){if(!this.testFlag(x.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||o.MessageLoop.sendMessage(this,x.Msg.BeforeHide),this.setFlag(x.Flag.IsHidden),this._toggleHidden(!0),!this.isAttached||this.parent&&!this.parent.isVisible||o.MessageLoop.sendMessage(this,x.Msg.AfterHide),this.parent)){let e=new x.ChildMessage("child-hidden",this);o.MessageLoop.sendMessage(this.parent,e)}}setHidden(e){e?this.hide():this.show()}testFlag(e){return!!(this._flags&e)}setFlag(e){this._flags|=e}clearFlag(e){this._flags&=~e}processMessage(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(x.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(x.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":this.isHidden||this.parent&&!this.parent.isVisible||this.setFlag(x.Flag.IsVisible),this.setFlag(x.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(x.Flag.IsVisible),this.clearFlag(x.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e)}}notifyLayout(e){this._layout&&this._layout.processParentMessage(e)}onCloseRequest(e){this.parent?this.parent=null:this.isAttached&&x.detach(this)}onResize(e){}onUpdateRequest(e){}onFitRequest(e){}onActivateRequest(e){}onBeforeShow(e){}onAfterShow(e){}onBeforeHide(e){}onAfterHide(e){}onBeforeAttach(e){}onAfterAttach(e){}onBeforeDetach(e){}onAfterDetach(e){}onChildAdded(e){}onChildRemoved(e){}_toggleHidden(e){if(e)switch(this._hiddenMode){case x.HiddenMode.Display:this.addClass("lm-mod-hidden");break;case x.HiddenMode.Scale:this.node.style.transform="scale(0)",this.node.setAttribute("aria-hidden","true");break;case x.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1"}else switch(this._hiddenMode){case x.HiddenMode.Display:this.removeClass("lm-mod-hidden");break;case x.HiddenMode.Scale:this.node.style.transform="",this.node.removeAttribute("aria-hidden");break;case x.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex=""}}}!function(e){var t,n,i;(t=e.HiddenMode||(e.HiddenMode={}))[t.Display=0]="Display",t[t.Scale=1]="Scale",t[t.ContentVisibility=2]="ContentVisibility",(n=e.Flag||(e.Flag={}))[n.IsDisposed=1]="IsDisposed",n[n.IsAttached=2]="IsAttached",n[n.IsHidden=4]="IsHidden",n[n.IsVisible=8]="IsVisible",n[n.DisallowLayout=16]="DisallowLayout",(i=e.Msg||(e.Msg={})).BeforeShow=new o.Message("before-show"),i.AfterShow=new o.Message("after-show"),i.BeforeHide=new o.Message("before-hide"),i.AfterHide=new o.Message("after-hide"),i.BeforeAttach=new o.Message("before-attach"),i.AfterAttach=new o.Message("after-attach"),i.BeforeDetach=new o.Message("before-detach"),i.AfterDetach=new o.Message("after-detach"),i.ParentChanged=new o.Message("parent-changed"),i.UpdateRequest=new o.ConflatableMessage("update-request"),i.FitRequest=new o.ConflatableMessage("fit-request"),i.ActivateRequest=new o.ConflatableMessage("activate-request"),i.CloseRequest=new o.ConflatableMessage("close-request");class r extends o.Message{constructor(e,t){super(e),this.child=t}}e.ChildMessage=r;class s extends o.Message{constructor(e,t){super("resize"),this.width=e,this.height=t}}e.ResizeMessage=s,function(e){e.UnknownSize=new e(-1,-1)}(s=e.ResizeMessage||(e.ResizeMessage={})),e.attach=function(t,n,i=null){if(t.parent)throw new Error("Cannot attach a child widget.");if(t.isAttached||t.node.isConnected)throw new Error("Widget is already attached.");if(!n.isConnected)throw new Error("Host is not attached.");o.MessageLoop.sendMessage(t,e.Msg.BeforeAttach),n.insertBefore(t.node,i),o.MessageLoop.sendMessage(t,e.Msg.AfterAttach)},e.detach=function(t){if(t.parent)throw new Error("Cannot detach a child widget.");if(!t.isAttached||!t.node.isConnected)throw new Error("Widget is not attached.");o.MessageLoop.sendMessage(t,e.Msg.BeforeDetach),t.node.parentNode.removeChild(t.node),o.MessageLoop.sendMessage(t,e.Msg.AfterDetach)}}(x||(x={})),function(e){e.titleProperty=new l({name:"title",create:e=>new b({owner:e})}),e.createNode=function(e){return e.node||document.createElement(e.tag||"div")}}(u||(u={}));class M{constructor(e={}){this._disposed=!1,this._parent=null,this._fitPolicy=e.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,f.Signal.clearData(this),l.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){let e=this._parent.node.style;e.minWidth="",e.minHeight="",e.maxWidth="",e.maxHeight="",this._parent.fit()}}processParentMessage(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e)}}init(){for(const e of this)e.parent=this.parent}onResize(e){for(const e of this)o.MessageLoop.sendMessage(e,x.ResizeMessage.UnknownSize)}onUpdateRequest(e){for(const e of this)o.MessageLoop.sendMessage(e,x.ResizeMessage.UnknownSize)}onBeforeAttach(e){for(const t of this)o.MessageLoop.sendMessage(t,e)}onAfterAttach(e){for(const t of this)o.MessageLoop.sendMessage(t,e)}onBeforeDetach(e){for(const t of this)o.MessageLoop.sendMessage(t,e)}onAfterDetach(e){for(const t of this)o.MessageLoop.sendMessage(t,e)}onBeforeShow(e){for(const t of this)t.isHidden||o.MessageLoop.sendMessage(t,e)}onAfterShow(e){for(const t of this)t.isHidden||o.MessageLoop.sendMessage(t,e)}onBeforeHide(e){for(const t of this)t.isHidden||o.MessageLoop.sendMessage(t,e)}onAfterHide(e){for(const t of this)t.isHidden||o.MessageLoop.sendMessage(t,e)}onChildRemoved(e){this.removeWidget(e.child)}onFitRequest(e){}onChildShown(e){}onChildHidden(e){}}!function(e){e.getHorizontalAlignment=function(e){return h.horizontalAlignmentProperty.get(e)},e.setHorizontalAlignment=function(e,t){h.horizontalAlignmentProperty.set(e,t)},e.getVerticalAlignment=function(e){return h.verticalAlignmentProperty.get(e)},e.setVerticalAlignment=function(e,t){h.verticalAlignmentProperty.set(e,t)}}(M||(M={}));class w{constructor(e){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=e,this.widget.node.style.position="absolute",this.widget.node.style.contain="strict"}dispose(){if(this._disposed)return;this._disposed=!0;let e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height="",e.contain=""}get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let e=a.ElementExt.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight}update(e,t,n,i){let r=Math.max(this._minWidth,Math.min(n,this._maxWidth)),s=Math.max(this._minHeight,Math.min(i,this._maxHeight));if(r<n)switch(M.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(n-r)/2;break;case"right":e+=n-r;break;default:throw"unreachable"}if(s<i)switch(M.getVerticalAlignment(this.widget)){case"top":break;case"center":t+=(i-s)/2;break;case"bottom":t+=i-s;break;default:throw"unreachable"}let a=!1,l=this.widget.node.style;if(this._top!==t&&(this._top=t,l.top=`${t}px`),this._left!==e&&(this._left=e,l.left=`${e}px`),this._width!==r&&(a=!0,this._width=r,l.width=`${r}px`),this._height!==s&&(a=!0,this._height=s,l.height=`${s}px`),a){let e=new x.ResizeMessage(r,s);o.MessageLoop.sendMessage(this.widget,e)}}}!function(e){function t(e){e.parent&&e.parent.layout&&e.parent.update()}e.horizontalAlignmentProperty=new l({name:"horizontalAlignment",create:()=>"center",changed:t}),e.verticalAlignmentProperty=new l({name:"verticalAlignment",create:()=>"top",changed:t})}(h||(h={}));class S extends M{constructor(){super(...arguments),this._widgets=[]}dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}*[Symbol.iterator](){yield*this._widgets}addWidget(e){this.insertWidget(this._widgets.length,e)}insertWidget(e,t){t.parent=this.parent;let n=this._widgets.indexOf(t),i=Math.max(0,Math.min(e,this._widgets.length));if(-1===n)return r.ArrayExt.insert(this._widgets,i,t),void(this.parent&&this.attachWidget(i,t));i===this._widgets.length&&i--,n!==i&&(r.ArrayExt.move(this._widgets,n,i),this.parent&&this.moveWidget(n,i,t))}removeWidget(e){this.removeWidgetAt(this._widgets.indexOf(e))}removeWidgetAt(e){let t=r.ArrayExt.removeAt(this._widgets,e);t&&this.parent&&this.detachWidget(e,t)}init(){super.init();let e=0;for(const t of this)this.attachWidget(e++,t)}attachWidget(e,t){let n=this.parent.node.children[e];this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeAttach),this.parent.node.insertBefore(t.node,n),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterAttach)}moveWidget(e,t,n){this.parent.isAttached&&o.MessageLoop.sendMessage(n,x.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&o.MessageLoop.sendMessage(n,x.Msg.AfterDetach);let i=this.parent.node.children[t];this.parent.isAttached&&o.MessageLoop.sendMessage(n,x.Msg.BeforeAttach),this.parent.node.insertBefore(n.node,i),this.parent.isAttached&&o.MessageLoop.sendMessage(n,x.Msg.AfterAttach)}detachWidget(e,t){this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterDetach)}}!function(e){e.clampDimension=function(e){return Math.max(0,Math.floor(e))}}(d||(d={}));var L,T,k,A,E,C,D,O,P,R,z=d;class B extends S{constructor(e){super(),this.widgetOffset=0,this._fixed=0,this._spacing=4,this._dirty=!1,this._hasNormedSizes=!1,this._sizers=[],this._items=[],this._handles=[],this._box=null,this._alignment="start",this._orientation="horizontal",this.renderer=e.renderer,void 0!==e.orientation&&(this._orientation=e.orientation),void 0!==e.alignment&&(this._alignment=e.alignment),void 0!==e.spacing&&(this._spacing=d.clampDimension(e.spacing))}dispose(){for(const e of this._items)e.dispose();this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=d.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map((e=>e.size))}relativeSizes(){return L.normalize(this._sizers.map((e=>e.size)))}setRelativeSizes(e,t=!0){let n=this._sizers.length,i=e.slice(0,n);for(;i.length<n;)i.push(0);let r=L.normalize(i);for(let e=0;e<n;++e){let t=this._sizers[e];t.sizeHint=r[e],t.size=r[e]}this._hasNormedSizes=!0,t&&this.parent&&this.parent.update()}moveHandle(e,t){let n,i=this._handles[e];if(i&&!i.classList.contains("lm-mod-hidden")&&(n="horizontal"===this._orientation?t-i.offsetLeft:t-i.offsetTop,0!==n)){for(let e of this._sizers)e.size>0&&(e.sizeHint=e.size);c.adjust(this._sizers,e,n),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,t){let n=new w(t),i=L.createHandle(this.renderer),s=L.averageSize(this._sizers),a=L.createSizer(s);r.ArrayExt.insert(this._items,e,n),r.ArrayExt.insert(this._sizers,e,a),r.ArrayExt.insert(this._handles,e,i),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.node.appendChild(i),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,n){r.ArrayExt.move(this._items,e,t),r.ArrayExt.move(this._sizers,e,t),r.ArrayExt.move(this._handles,e,t),this.parent.fit()}detachWidget(e,t){let n=r.ArrayExt.removeAt(this._items,e),i=r.ArrayExt.removeAt(this._handles,e);r.ArrayExt.removeAt(this._sizers,e),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.node.removeChild(i),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterDetach),n.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}updateItemPosition(e,t,n,i,r,s,a){const o=this._items[e];if(o.isHidden)return;let l=this._handles[e].style;t?(n+=this.widgetOffset,o.update(n,i,a,r),n+=a,l.top=`${i}px`,l.left=`${n}px`,l.width=`${this._spacing}px`,l.height=`${r}px`):(i+=this.widgetOffset,o.update(n,i,s,a),i+=a,l.top=`${i}px`,l.left=`${n}px`,l.width=`${s}px`,l.height=`${this._spacing}px`)}_fit(){let e=0,t=-1;for(let n=0,i=this._items.length;n<i;++n)this._items[n].isHidden?this._handles[n].classList.add("lm-mod-hidden"):(this._handles[n].classList.remove("lm-mod-hidden"),t=n,e++);-1!==t&&this._handles[t].classList.add("lm-mod-hidden"),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;let n="horizontal"===this._orientation,i=n?this._fixed:0,r=n?0:this._fixed;for(let e=0,t=this._items.length;e<t;++e){let t=this._items[e],s=this._sizers[e];s.size>0&&(s.sizeHint=s.size),t.isHidden?(s.minSize=0,s.maxSize=0):(t.fit(),s.stretch=B.getStretch(t.widget),n?(s.minSize=t.minWidth,s.maxSize=t.maxWidth,i+=t.minWidth,r=Math.max(r,t.minHeight)):(s.minSize=t.minHeight,s.maxSize=t.maxHeight,r+=t.minHeight,i=Math.max(i,t.minWidth)))}let s=this._box=a.ElementExt.boxSizing(this.parent.node);i+=s.horizontalSum,r+=s.verticalSum;let l=this.parent.node.style;l.minWidth=`${i}px`,l.minHeight=`${r}px`,this._dirty=!0,this.parent.parent&&o.MessageLoop.sendMessage(this.parent.parent,x.Msg.FitRequest),this._dirty&&o.MessageLoop.sendMessage(this.parent,x.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let n=0;for(let e=0,t=this._items.length;e<t;++e)n+=+!this._items[e].isHidden;if(0===n&&0===this.widgetOffset)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));let i=this._box.paddingTop,r=this._box.paddingLeft,s=e-this._box.horizontalSum,o=t-this._box.verticalSum,l=0,u=0,h="horizontal"===this._orientation;if(n>0){let e;if(e=h?Math.max(0,s-this._fixed):Math.max(0,o-this._fixed),this._hasNormedSizes){for(let t of this._sizers)t.sizeHint*=e;this._hasNormedSizes=!1}let t=c.calc(this._sizers,e);if(t>0)switch(this._alignment){case"start":break;case"center":l=0,u=t/2;break;case"end":l=0,u=t;break;case"justify":l=t/n,u=0;break;default:throw"unreachable"}}for(let e=0,t=this._items.length;e<t;++e){const t=this._items[e].isHidden?0:this._sizers[e].size+l;this.updateItemPosition(e,h,h?r+u:r,h?i:i+u,o,s,t);const n=this.widgetOffset+(this._handles[e].classList.contains("lm-mod-hidden")?0:this._spacing);h?r+=t+n:i+=t+n}}}!function(e){e.getStretch=function(e){return L.stretchProperty.get(e)},e.setStretch=function(e,t){L.stretchProperty.set(e,t)}}(B||(B={})),function(e){e.stretchProperty=new l({name:"stretch",create:()=>0,coerce:(e,t)=>Math.max(0,Math.floor(t)),changed:function(e){e.parent&&e.parent.layout instanceof B&&e.parent.fit()}}),e.createSizer=function(e){let t=new v;return t.sizeHint=Math.floor(e),t},e.createHandle=function(e){let t=e.createHandle();return t.style.position="absolute",t.style.contain="style",t},e.averageSize=function(e){return e.reduce(((e,t)=>e+t.size),0)/e.length||0},e.normalize=function(e){let t=e.length;if(0===t)return[];let n=e.reduce(((e,t)=>e+Math.abs(t)),0);return 0===n?e.map((e=>1/t)):e.map((e=>e/n))}}(L||(L={}));class Y extends B{constructor(e){super({...e,orientation:e.orientation||"vertical"}),this._titles=[],this.titleSpace=e.titleSpace||22}get titleSpace(){return this.widgetOffset}set titleSpace(e){e=z.clampDimension(e),this.widgetOffset!==e&&(this.widgetOffset=e,this.parent&&this.parent.fit())}get titles(){return this._titles}dispose(){this.isDisposed||(this._titles.length=0,super.dispose())}updateTitle(e,t){const n=this._titles[e],i=n.classList.contains("lm-mod-expanded"),r=T.createTitle(this.renderer,t.title,i);this._titles[e]=r,this.parent.node.replaceChild(r,n)}insertWidget(e,t){t.id||(t.id=`id-${s.UUID.uuid4()}`),super.insertWidget(e,t)}attachWidget(e,t){const n=T.createTitle(this.renderer,t.title);r.ArrayExt.insert(this._titles,e,n),this.parent.node.appendChild(n),t.node.setAttribute("role","region"),t.node.setAttribute("aria-labelledby",n.id),super.attachWidget(e,t)}moveWidget(e,t,n){r.ArrayExt.move(this._titles,e,t),super.moveWidget(e,t,n)}detachWidget(e,t){const n=r.ArrayExt.removeAt(this._titles,e);this.parent.node.removeChild(n),super.detachWidget(e,t)}updateItemPosition(e,t,n,i,r,s,a){const o=this._titles[e].style;o.top=`${i}px`,o.left=`${n}px`,o.height=`${this.widgetOffset}px`,o.width=t?`${r}px`:`${s}px`,super.updateItemPosition(e,t,n,i,r,s,a)}}!function(e){e.createTitle=function(e,t,n=!0){const i=e.createSectionTitle(t);return i.style.position="absolute",i.style.contain="strict",i.setAttribute("aria-label",`${t.label} Section`),i.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-controls",t.owner.id),n&&i.classList.add("lm-mod-expanded"),i}}(T||(T={}));class F extends x{constructor(e={}){super(),this.addClass("lm-Panel"),this.layout=k.createLayout(e)}get widgets(){return this.layout.widgets}addWidget(e){this.layout.addWidget(e)}insertWidget(e,t){this.layout.insertWidget(e,t)}}!function(e){e.createLayout=function(e){return e.layout||new S}}(k||(k={}));class N extends F{constructor(e={}){super({layout:A.createLayout(e)}),this._handleMoved=new f.Signal(this),this._pressData=null,this.addClass("lm-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(e){this.layout.orientation=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(e,t=!0){this.layout.setRelativeSizes(e,t)}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){e.child.addClass("lm-SplitPanel-child"),this._releaseMouse()}onChildRemoved(e){e.child.removeClass("lm-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),27===e.keyCode&&this._releaseMouse()}_evtPointerDown(e){if(0!==e.button)return;let t,n=this.layout,i=r.ArrayExt.findFirstIndex(n.handles,(t=>t.contains(e.target)));if(-1===i)return;e.preventDefault(),e.stopPropagation(),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let s=n.handles[i],a=s.getBoundingClientRect();t="horizontal"===n.orientation?e.clientX-a.left:e.clientY-a.top;let o=window.getComputedStyle(s),l=p.X.overrideCursor(o.cursor);this._pressData={index:i,delta:t,override:l}}_evtPointerMove(e){let t;e.preventDefault(),e.stopPropagation();let n=this.layout,i=this.node.getBoundingClientRect();t="horizontal"===n.orientation?e.clientX-i.left-this._pressData.delta:e.clientY-i.top-this._pressData.delta,n.moveHandle(this._pressData.index,t)}_evtPointerUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}}!function(e){class t{createHandle(){let e=document.createElement("div");return e.className="lm-SplitPanel-handle",e}}e.Renderer=t,e.defaultRenderer=new t,e.getStretch=function(e){return B.getStretch(e)},e.setStretch=function(e,t){B.setStretch(e,t)}}(N||(N={})),function(e){e.createLayout=function(e){return e.layout||new B({renderer:e.renderer||N.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing})}}(A||(A={}));class I extends N{constructor(e={}){super({...e,layout:E.createLayout(e)}),this._widgetSizesCache=new WeakMap,this._expansionToggled=new f.Signal(this),this.addClass("lm-AccordionPanel")}get renderer(){return this.layout.renderer}get titleSpace(){return this.layout.titleSpace}set titleSpace(e){this.layout.titleSpace=e}get titles(){return this.layout.titles}get expansionToggled(){return this._expansionToggled}addWidget(e){super.addWidget(e),e.title.changed.connect(this._onTitleChanged,this)}collapse(e){const t=this.layout.widgets[e];t&&!t.isHidden&&this._toggleExpansion(e)}expand(e){const t=this.layout.widgets[e];t&&t.isHidden&&this._toggleExpansion(e)}insertWidget(e,t){super.insertWidget(e,t),t.title.changed.connect(this._onTitleChanged,this)}handleEvent(e){switch(super.handleEvent(e),e.type){case"click":this._evtClick(e);break;case"keydown":this._eventKeyDown(e)}}onBeforeAttach(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),super.onBeforeAttach(e)}onAfterDetach(e){super.onAfterDetach(e),this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this)}_onTitleChanged(e){const t=r.ArrayExt.findFirstIndex(this.widgets,(t=>t.contains(e.owner)));t>=0&&(this.layout.updateTitle(t,e.owner),this.update())}_computeWidgetSize(e){const t=this.layout,n=t.widgets[e];if(!n)return;const i=n.isHidden,r=t.absoluteSizes(),s=(i?-1:1)*this.spacing,a=r.reduce(((e,t)=>e+t));let o=[...r];if(i){const t=this._widgetSizesCache.get(n);if(!t)return;o[e]+=t;const i=o.map((e=>e-t>0)).lastIndexOf(!0);-1===i?o.forEach(((n,i)=>{i!==e&&(o[i]-=r[i]/a*(t-s))})):o[i]-=t-s}else{const t=r[e];this._widgetSizesCache.set(n,t),o[e]=0;const i=o.map((e=>e>0)).lastIndexOf(!0);if(-1===i)return;o[i]=r[i]+t+s}return o.map((e=>e/(a+s)))}_evtClick(e){const t=e.target;if(t){const n=r.ArrayExt.findFirstIndex(this.titles,(e=>e.contains(t)));n>=0&&(e.preventDefault(),e.stopPropagation(),this._toggleExpansion(n))}}_eventKeyDown(e){if(e.defaultPrevented)return;const t=e.target;let n=!1;if(t){const i=r.ArrayExt.findFirstIndex(this.titles,(e=>e.contains(t)));if(i>=0){const r=e.keyCode.toString();if(e.key.match(/Space|Enter/)||r.match(/13|32/))t.click(),n=!0;else if("horizontal"===this.orientation?e.key.match(/ArrowLeft|ArrowRight/)||r.match(/37|39/):e.key.match(/ArrowUp|ArrowDown/)||r.match(/38|40/)){const t=e.key.match(/ArrowLeft|ArrowUp/)||r.match(/37|38/)?-1:1,s=this.titles.length,a=(i+s+t)%s;this.titles[a].focus(),n=!0}else"End"===e.key||"35"===r?(this.titles[this.titles.length-1].focus(),n=!0):"Home"!==e.key&&"36"!==r||(this.titles[0].focus(),n=!0)}n&&e.preventDefault()}}_toggleExpansion(e){const t=this.titles[e],n=this.layout.widgets[e],i=this._computeWidgetSize(e);i&&this.setRelativeSizes(i,!1),n.isHidden?(t.classList.add("lm-mod-expanded"),t.setAttribute("aria-expanded","true"),n.show()):(t.classList.remove("lm-mod-expanded"),t.setAttribute("aria-expanded","false"),n.hide()),this._expansionToggled.emit(e)}}!function(e){class t extends N.Renderer{constructor(){super(),this.titleClassName="lm-AccordionPanel-title",this._titleID=0,this._titleKeys=new WeakMap,this._uuid=++t._nInstance}createCollapseIcon(e){return document.createElement("span")}createSectionTitle(e){const t=document.createElement("h3");t.setAttribute("tabindex","0"),t.id=this.createTitleKey(e),t.className=this.titleClassName;for(const n in e.dataset)t.dataset[n]=e.dataset[n];t.appendChild(this.createCollapseIcon(e)).className="lm-AccordionPanel-titleCollapser";const n=t.appendChild(document.createElement("span"));return n.className="lm-AccordionPanel-titleLabel",n.textContent=e.label,n.title=e.caption||e.label,t}createTitleKey(e){let t=this._titleKeys.get(e);return void 0===t&&(t=`title-key-${this._uuid}-${this._titleID++}`,this._titleKeys.set(e,t)),t}}t._nInstance=0,e.Renderer=t,e.defaultRenderer=new t}(I||(I={})),function(e){e.createLayout=function(e){return e.layout||new Y({renderer:e.renderer||I.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing,titleSpace:e.titleSpace})}}(E||(E={}));class H extends S{constructor(e={}){super(),this._fixed=0,this._spacing=4,this._dirty=!1,this._sizers=[],this._items=[],this._box=null,this._alignment="start",this._direction="top-to-bottom",void 0!==e.direction&&(this._direction=e.direction),void 0!==e.alignment&&(this._alignment=e.alignment),void 0!==e.spacing&&(this._spacing=z.clampDimension(e.spacing))}dispose(){for(const e of this._items)e.dispose();this._box=null,this._items.length=0,this._sizers.length=0,super.dispose()}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(this.parent.dataset.direction=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=z.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}init(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,t){r.ArrayExt.insert(this._items,e,new w(t)),r.ArrayExt.insert(this._sizers,e,new v),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,n){r.ArrayExt.move(this._items,e,t),r.ArrayExt.move(this._sizers,e,t),this.parent.update()}detachWidget(e,t){let n=r.ArrayExt.removeAt(this._items,e);r.ArrayExt.removeAt(this._sizers,e),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterDetach),n.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){let e=0;for(let t=0,n=this._items.length;t<n;++t)e+=+!this._items[t].isHidden;this._fixed=this._spacing*Math.max(0,e-1);let t=C.isHorizontal(this._direction),n=t?this._fixed:0,i=t?0:this._fixed;for(let e=0,r=this._items.length;e<r;++e){let r=this._items[e],s=this._sizers[e];r.isHidden?(s.minSize=0,s.maxSize=0):(r.fit(),s.sizeHint=H.getSizeBasis(r.widget),s.stretch=H.getStretch(r.widget),t?(s.minSize=r.minWidth,s.maxSize=r.maxWidth,n+=r.minWidth,i=Math.max(i,r.minHeight)):(s.minSize=r.minHeight,s.maxSize=r.maxHeight,i+=r.minHeight,n=Math.max(n,r.minWidth)))}let r=this._box=a.ElementExt.boxSizing(this.parent.node);n+=r.horizontalSum,i+=r.verticalSum;let s=this.parent.node.style;s.minWidth=`${n}px`,s.minHeight=`${i}px`,this._dirty=!0,this.parent.parent&&o.MessageLoop.sendMessage(this.parent.parent,x.Msg.FitRequest),this._dirty&&o.MessageLoop.sendMessage(this.parent,x.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let n=0;for(let e=0,t=this._items.length;e<t;++e)n+=+!this._items[e].isHidden;if(0===n)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));let i,r=this._box.paddingTop,s=this._box.paddingLeft,o=e-this._box.horizontalSum,l=t-this._box.verticalSum;switch(this._direction){case"left-to-right":i=c.calc(this._sizers,Math.max(0,o-this._fixed));break;case"top-to-bottom":i=c.calc(this._sizers,Math.max(0,l-this._fixed));break;case"right-to-left":i=c.calc(this._sizers,Math.max(0,o-this._fixed)),s+=o;break;case"bottom-to-top":i=c.calc(this._sizers,Math.max(0,l-this._fixed)),r+=l;break;default:throw"unreachable"}let u=0,h=0;if(i>0)switch(this._alignment){case"start":break;case"center":u=0,h=i/2;break;case"end":u=0,h=i;break;case"justify":u=i/n,h=0;break;default:throw"unreachable"}for(let e=0,t=this._items.length;e<t;++e){let t=this._items[e];if(t.isHidden)continue;let n=this._sizers[e].size;switch(this._direction){case"left-to-right":t.update(s+h,r,n+u,l),s+=n+u+this._spacing;break;case"top-to-bottom":t.update(s,r+h,o,n+u),r+=n+u+this._spacing;break;case"right-to-left":t.update(s-h-n-u,r,n+u,l),s-=n+u+this._spacing;break;case"bottom-to-top":t.update(s,r-h-n-u,o,n+u),r-=n+u+this._spacing;break;default:throw"unreachable"}}}}!function(e){e.getStretch=function(e){return C.stretchProperty.get(e)},e.setStretch=function(e,t){C.stretchProperty.set(e,t)},e.getSizeBasis=function(e){return C.sizeBasisProperty.get(e)},e.setSizeBasis=function(e,t){C.sizeBasisProperty.set(e,t)}}(H||(H={})),function(e){function t(e){e.parent&&e.parent.layout instanceof H&&e.parent.fit()}e.stretchProperty=new l({name:"stretch",create:()=>0,coerce:(e,t)=>Math.max(0,Math.floor(t)),changed:t}),e.sizeBasisProperty=new l({name:"sizeBasis",create:()=>0,coerce:(e,t)=>Math.max(0,Math.floor(t)),changed:t}),e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(C||(C={}));class j extends F{constructor(e={}){super({layout:D.createLayout(e)}),this.addClass("lm-BoxPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}onChildAdded(e){e.child.addClass("lm-BoxPanel-child")}onChildRemoved(e){e.child.removeClass("lm-BoxPanel-child")}}!function(e){e.getStretch=function(e){return H.getStretch(e)},e.setStretch=function(e,t){H.setStretch(e,t)},e.getSizeBasis=function(e){return H.getSizeBasis(e)},e.setSizeBasis=function(e,t){H.setSizeBasis(e,t)}}(j||(j={})),function(e){e.createLayout=function(e){return e.layout||new H(e)}}(D||(D={}));class U extends x{constructor(e){super({node:O.createNode()}),this._activeIndex=-1,this._items=[],this._results=null,this.addClass("lm-CommandPalette"),this.setFlag(x.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||U.defaultRenderer,this.commands.commandChanged.connect(this._onGenericChange,this),this.commands.keyBindingChanged.connect(this._onGenericChange,this)}dispose(){this._items.length=0,this._results=null,super.dispose()}get searchNode(){return this.node.getElementsByClassName("lm-CommandPalette-search")[0]}get inputNode(){return this.node.getElementsByClassName("lm-CommandPalette-input")[0]}get contentNode(){return this.node.getElementsByClassName("lm-CommandPalette-content")[0]}get items(){return this._items}addItem(e){let t=O.createItem(this.commands,e);return this._items.push(t),this.refresh(),t}addItems(e){const t=e.map((e=>O.createItem(this.commands,e)));return t.forEach((e=>this._items.push(e))),this.refresh(),t}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){r.ArrayExt.removeAt(this._items,e)&&this.refresh()}clearItems(){0!==this._items.length&&(this._items.length=0,this.refresh())}refresh(){this._results=null,""!==this.inputNode.value?this.node.getElementsByClassName("lm-close-icon")[0].style.display="inherit":this.node.getElementsByClassName("lm-close-icon")[0].style.display="none",this.update()}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;case"keydown":this._evtKeyDown(e);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused()}}onBeforeAttach(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)}onAfterDetach(e){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)}onAfterShow(e){this.update(),super.onAfterShow(e)}onActivateRequest(e){if(this.isAttached){let e=this.inputNode;e.focus(),e.select()}}onUpdateRequest(e){if(this.isHidden)return;let t=this.inputNode.value,n=this.contentNode,i=this._results;if(i||(i=this._results=O.search(this._items,t),this._activeIndex=t?r.ArrayExt.findFirstIndex(i,O.canActivate):-1),!t&&0===i.length)return void _.VirtualDOM.render(null,n);if(t&&0===i.length){let e=this.renderer.renderEmptyMessage({query:t});return void _.VirtualDOM.render(e,n)}let s=this.renderer,o=this._activeIndex,l=new Array(i.length);for(let e=0,t=i.length;e<t;++e){let t=i[e];if("header"===t.type){let n=t.indices,i=t.category;l[e]=s.renderHeader({category:i,indices:n})}else{let n=t.item,i=t.indices,r=e===o;l[e]=s.renderItem({item:n,indices:i,active:r})}}if(_.VirtualDOM.render(l,n),o<0||o>=i.length)n.scrollTop=0;else{let e=n.children[o];a.ElementExt.scrollIntoViewIfNeeded(n,e)}}_evtClick(e){if(0!==e.button)return;if(e.target.classList.contains("lm-close-icon"))return this.inputNode.value="",void this.refresh();let t=r.ArrayExt.findFirstIndex(this.contentNode.children,(t=>t.contains(e.target)));-1!==t&&(e.preventDefault(),e.stopPropagation(),this._execute(t))}_evtKeyDown(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),this._execute(this._activeIndex);break;case 38:e.preventDefault(),e.stopPropagation(),this._activatePreviousItem();break;case 40:e.preventDefault(),e.stopPropagation(),this._activateNextItem()}}_activateNextItem(){if(!this._results||0===this._results.length)return;let e=this._activeIndex,t=this._results.length,n=e<t-1?e+1:0,i=0===n?t-1:n-1;this._activeIndex=r.ArrayExt.findFirstIndex(this._results,O.canActivate,n,i),this.update()}_activatePreviousItem(){if(!this._results||0===this._results.length)return;let e=this._activeIndex,t=this._results.length,n=e<=0?t-1:e-1,i=n===t-1?0:n+1;this._activeIndex=r.ArrayExt.findLastIndex(this._results,O.canActivate,n,i),this.update()}_execute(e){if(!this._results)return;let t=this._results[e];if(t){if("header"===t.type){let e=this.inputNode;return e.value=`${t.category.toLowerCase()} `,e.focus(),void this.refresh()}t.item.isEnabled&&(this.commands.execute(t.item.command,t.item.args),this.inputNode.value="",this.refresh())}}_toggleFocused(){let e=document.activeElement===this.inputNode;this.toggleClass("lm-mod-focused",e)}_onGenericChange(){this.refresh()}}!function(e){class t{renderHeader(e){let t=this.formatHeader(e);return _.h.li({className:"lm-CommandPalette-header"},t)}renderItem(e){let t=this.createItemClass(e),n=this.createItemDataset(e);return e.item.isToggleable?_.h.li({className:t,dataset:n,role:"menuitemcheckbox","aria-checked":`${e.item.isToggled}`},this.renderItemIcon(e),this.renderItemContent(e),this.renderItemShortcut(e)):_.h.li({className:t,dataset:n,role:"menuitem"},this.renderItemIcon(e),this.renderItemContent(e),this.renderItemShortcut(e))}renderEmptyMessage(e){let t=this.formatEmptyMessage(e);return _.h.li({className:"lm-CommandPalette-emptyMessage"},t)}renderItemIcon(e){let t=this.createIconClass(e);return _.h.div({className:t},e.item.icon,e.item.iconLabel)}renderItemContent(e){return _.h.div({className:"lm-CommandPalette-itemContent"},this.renderItemLabel(e),this.renderItemCaption(e))}renderItemLabel(e){let t=this.formatItemLabel(e);return _.h.div({className:"lm-CommandPalette-itemLabel"},t)}renderItemCaption(e){let t=this.formatItemCaption(e);return _.h.div({className:"lm-CommandPalette-itemCaption"},t)}renderItemShortcut(e){let t=this.formatItemShortcut(e);return _.h.div({className:"lm-CommandPalette-itemShortcut"},t)}createItemClass(e){let t="lm-CommandPalette-item";e.item.isEnabled||(t+=" lm-mod-disabled"),e.item.isToggled&&(t+=" lm-mod-toggled"),e.active&&(t+=" lm-mod-active");let n=e.item.className;return n&&(t+=` ${n}`),t}createItemDataset(e){return{...e.item.dataset,command:e.item.command}}createIconClass(e){let t="lm-CommandPalette-itemIcon",n=e.item.iconClass;return n?`${t} ${n}`:t}formatHeader(e){return e.indices&&0!==e.indices.length?r.StringExt.highlight(e.category,e.indices,_.h.mark):e.category}formatEmptyMessage(e){return`No commands found that match '${e.query}'`}formatItemShortcut(e){let t=e.item.keyBinding;return t?m.CommandRegistry.formatKeystroke(t.keys):null}formatItemLabel(e){return e.indices&&0!==e.indices.length?r.StringExt.highlight(e.item.label,e.indices,_.h.mark):e.item.label}formatItemCaption(e){return e.item.caption}}e.Renderer=t,e.defaultRenderer=new t}(U||(U={})),function(e){function t(e,t){let n=e.category.toLowerCase(),i=`${n} ${e.label.toLowerCase()}`,s=1/0,a=null,o=/\b\w/g;for(;;){let e=o.exec(i);if(!e)break;let n=r.StringExt.matchSumOfDeltas(i,t,e.index);if(!n)break;n.score<=s&&(s=n.score,a=n.indices)}if(!a||s===1/0)return null;let l=n.length+1,c=r.ArrayExt.lowerBound(a,l,((e,t)=>e-t)),u=a.slice(0,c),h=a.slice(c);for(let e=0,t=h.length;e<t;++e)h[e]-=l;return 0===u.length?{matchType:0,categoryIndices:null,labelIndices:h,score:s,item:e}:0===h.length?{matchType:1,categoryIndices:u,labelIndices:null,score:s,item:e}:{matchType:2,categoryIndices:u,labelIndices:h,score:s,item:e}}function n(e,t){let n=e.matchType-t.matchType;if(0!==n)return n;let i=e.score-t.score;if(0!==i)return i;let r=0,s=0;switch(e.matchType){case 0:r=e.labelIndices[0],s=t.labelIndices[0];break;case 1:case 2:r=e.categoryIndices[0],s=t.categoryIndices[0]}if(r!==s)return r-s;let a=e.item.category.localeCompare(t.item.category);if(0!==a)return a;let o=e.item.rank,l=t.item.rank;return o!==l?o<l?-1:1:e.item.label.localeCompare(t.item.label)}e.createNode=function(){let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("input"),r=document.createElement("ul"),s=document.createElement("button");return t.className="lm-CommandPalette-search",n.className="lm-CommandPalette-wrapper",i.className="lm-CommandPalette-input",s.className="lm-close-icon",r.className="lm-CommandPalette-content",r.setAttribute("role","menu"),i.spellcheck=!1,n.appendChild(i),n.appendChild(s),t.appendChild(n),e.appendChild(t),e.appendChild(r),e},e.createItem=function(e,t){return new i(e,t)},e.search=function(e,i){let s=function(e,n){n=n.replace(/\s+/g,"").toLowerCase();let i=[];for(let r=0,s=e.length;r<s;++r){let s=e[r];if(!s.isVisible)continue;if(!n){i.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:s});continue}let a=t(s,n);a&&(s.isEnabled||(a.score+=1e3),i.push(a))}return i}(e,i);return s.sort(n),function(e){let t=new Array(e.length);r.ArrayExt.fill(t,!1);let n=[];for(let i=0,r=e.length;i<r;++i){if(t[i])continue;let{item:s,categoryIndices:a}=e[i],o=s.category;n.push({type:"header",category:o,indices:a});for(let s=i;s<r;++s){if(t[s])continue;let{item:i,labelIndices:r}=e[s];i.category===o&&(n.push({type:"item",item:i,indices:r}),t[s]=!0)}}return n}(s)},e.canActivate=function(e){return"item"===e.type&&e.item.isEnabled};class i{constructor(e,t){this._commands=e,this.category=t.category.trim().replace(/\s+/g," "),this.command=t.command,this.args=t.args||s.JSONExt.emptyObject,this.rank=void 0!==t.rank?t.rank:1/0}get label(){return this._commands.label(this.command,this.args)}get icon(){return this._commands.icon(this.command,this.args)}get iconClass(){return this._commands.iconClass(this.command,this.args)}get iconLabel(){return this._commands.iconLabel(this.command,this.args)}get caption(){return this._commands.caption(this.command,this.args)}get className(){return this._commands.className(this.command,this.args)}get dataset(){return this._commands.dataset(this.command,this.args)}get isEnabled(){return this._commands.isEnabled(this.command,this.args)}get isToggled(){return this._commands.isToggled(this.command,this.args)}get isToggleable(){return this._commands.isToggleable(this.command,this.args)}get isVisible(){return this._commands.isVisible(this.command,this.args)}get keyBinding(){let{command:e,args:t}=this;return r.ArrayExt.findLastValue(this._commands.keyBindings,(n=>n.command===e&&s.JSONExt.deepEqual(n.args,t)))||null}}}(O||(O={}));class W extends x{constructor(e){super({node:P.createNode()}),this._childIndex=-1,this._activeIndex=-1,this._openTimerID=0,this._closeTimerID=0,this._items=[],this._childMenu=null,this._parentMenu=null,this._aboutToClose=new f.Signal(this),this._menuRequested=new f.Signal(this),this.addClass("lm-Menu"),this.setFlag(x.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||W.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}get leafMenu(){let e=this;for(;e._childMenu;)e=e._childMenu;return e}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(e){this.activeIndex=e?this._items.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._items.length)&&(e=-1),-1===e||P.canActivate(this._items[e])||(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let e=this._items.length,t=this._activeIndex,n=t<e-1?t+1:0,i=0===n?e-1:n-1;this.activeIndex=r.ArrayExt.findFirstIndex(this._items,P.canActivate,n,i)}activatePreviousItem(){let e=this._items.length,t=this._activeIndex,n=t<=0?e-1:t-1,i=n===e-1?0:n+1;this.activeIndex=r.ArrayExt.findLastIndex(this._items,P.canActivate,n,i)}triggerActiveItem(){if(!this.isAttached)return;let e=this.activeItem;if(!e)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),"submenu"===e.type)return void this._openChildMenu(!0);this.rootMenu.close();let{command:t,args:n}=e;this.commands.isEnabled(t,n)?this.commands.execute(t,n):console.log(`Command '${t}' is disabled.`)}addItem(e){return this.insertItem(this._items.length,e)}insertItem(e,t){this.isAttached&&this.close(),this.activeIndex=-1;let n=Math.max(0,Math.min(e,this._items.length)),i=P.createItem(this,t);return r.ArrayExt.insert(this._items,n,i),this.update(),i}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){this.isAttached&&this.close(),this.activeIndex=-1,r.ArrayExt.removeAt(this._items,e)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,0!==this._items.length&&(this._items.length=0,this.update())}open(e,t,n={}){if(this.isAttached)return;let i=n.forceX||!1,r=n.forceY||!1;P.openRootMenu(this,e,t,i,r),this.activate()}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(e){this.isAttached&&this.node.focus()}onUpdateRequest(e){let t=this._items,n=this.renderer,i=this._activeIndex,r=P.computeCollapsed(t),s=new Array(t.length);for(let e=0,a=t.length;e<a;++e){let a=t[e],o=e===i,l=r[e];s[e]=n.renderItem({item:a,active:o,collapsed:l,onfocus:()=>{this.activeIndex=e}})}_.VirtualDOM.render(s,this.contentNode)}onCloseRequest(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let t=this._childMenu;t&&(this._childIndex=-1,this._childMenu=null,t._parentMenu=null,t.close());let n=this._parentMenu;n&&(this._parentMenu=null,n._childIndex=-1,n._childMenu=null,n.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(e)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation();let t=e.keyCode;if(13===t)return void this.triggerActiveItem();if(27===t)return void this.close();if(37===t)return void(this._parentMenu?this.close():this._menuRequested.emit("previous"));if(38===t)return void this.activatePreviousItem();if(39===t){let e=this.activeItem;return void(e&&"submenu"===e.type?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next"))}if(40===t)return void this.activateNextItem();let n=(0,y.mM)().keyForKeydownEvent(e);if(!n)return;let i=this._activeIndex+1,r=P.findMnemonic(this._items,n,i);-1===r.index||r.multiple?-1!==r.index?this.activeIndex=r.index:-1!==r.auto&&(this.activeIndex=r.auto):(this.activeIndex=r.index,this.triggerActiveItem())}_evtMouseUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(e){let t=r.ArrayExt.findFirstIndex(this.contentNode.children,(t=>a.ElementExt.hitTest(t,e.clientX,e.clientY)));if(t===this._activeIndex)return;if(this.activeIndex=t,t=this.activeIndex,t===this._childIndex)return this._cancelOpenTimer(),void this._cancelCloseTimer();-1!==this._childIndex&&this._startCloseTimer(),this._cancelOpenTimer();let n=this.activeItem;n&&"submenu"===n.type&&n.submenu&&this._startOpenTimer()}_evtMouseEnter(e){for(let e=this._parentMenu;e;e=e._parentMenu)e._cancelOpenTimer(),e._cancelCloseTimer(),e.activeIndex=e._childIndex}_evtMouseLeave(e){if(this._cancelOpenTimer(),!this._childMenu)return void(this.activeIndex=-1);let{clientX:t,clientY:n}=e;a.ElementExt.hitTest(this._childMenu.node,t,n)?this._cancelCloseTimer():(this.activeIndex=-1,this._startCloseTimer())}_evtMouseDown(e){this._parentMenu||(P.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())}_openChildMenu(e=!1){let t=this.activeItem;if(!t||"submenu"!==t.type||!t.submenu)return void this._closeChildMenu();let n=t.submenu;if(n===this._childMenu)return;W.saveWindowData(),this._closeChildMenu(),this._childMenu=n,this._childIndex=this._activeIndex,n._parentMenu=this,o.MessageLoop.sendMessage(this,x.Msg.UpdateRequest);let i=this.contentNode.children[this._activeIndex];P.openSubmenu(n,i),e&&(n.activeIndex=-1,n.activateNextItem()),n.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){0===this._openTimerID&&(this._openTimerID=window.setTimeout((()=>{this._openTimerID=0,this._openChildMenu()}),P.TIMER_DELAY))}_startCloseTimer(){0===this._closeTimerID&&(this._closeTimerID=window.setTimeout((()=>{this._closeTimerID=0,this._closeChildMenu()}),P.TIMER_DELAY))}_cancelOpenTimer(){0!==this._openTimerID&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){0!==this._closeTimerID&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){P.saveWindowData()}}!function(e){class t{renderItem(e){let t=this.createItemClass(e),n=this.createItemDataset(e),i=this.createItemARIA(e);return _.h.li({className:t,dataset:n,tabindex:"0",onfocus:e.onfocus,...i},this.renderIcon(e),this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))}renderIcon(e){let t=this.createIconClass(e);return _.h.div({className:t},e.item.icon,e.item.iconLabel)}renderLabel(e){let t=this.formatLabel(e);return _.h.div({className:"lm-Menu-itemLabel"},t)}renderShortcut(e){let t=this.formatShortcut(e);return _.h.div({className:"lm-Menu-itemShortcut"},t)}renderSubmenu(e){return _.h.div({className:"lm-Menu-itemSubmenuIcon"})}createItemClass(e){let t="lm-Menu-item";e.item.isEnabled||(t+=" lm-mod-disabled"),e.item.isToggled&&(t+=" lm-mod-toggled"),e.item.isVisible||(t+=" lm-mod-hidden"),e.active&&(t+=" lm-mod-active"),e.collapsed&&(t+=" lm-mod-collapsed");let n=e.item.className;return n&&(t+=` ${n}`),t}createItemDataset(e){let t,{type:n,command:i,dataset:r}=e.item;return t="command"===n?{...r,type:n,command:i}:{...r,type:n},t}createIconClass(e){let t="lm-Menu-itemIcon",n=e.item.iconClass;return n?`${t} ${n}`:t}createItemARIA(e){let t={};switch(e.item.type){case"separator":t.role="presentation";break;case"submenu":t["aria-haspopup"]="true",e.item.isEnabled||(t["aria-disabled"]="true");break;default:e.item.isEnabled||(t["aria-disabled"]="true"),t.role="menuitem"}return t}formatLabel(e){let{label:t,mnemonic:n}=e.item;if(n<0||n>=t.length)return t;let i=t.slice(0,n),r=t.slice(n+1),s=t[n];return[i,_.h.span({className:"lm-Menu-itemMnemonic"},s),r]}formatShortcut(e){let t=e.item.keyBinding;return t?m.CommandRegistry.formatKeystroke(t.keys):null}}e.Renderer=t,e.defaultRenderer=new t}(W||(W={})),function(e){e.TIMER_DELAY=300,e.SUBMENU_OVERLAP=3;let t=null,n=0;function i(){return n>0?(n--,t):c()}function l(e){return"separator"!==e.type&&e.isEnabled&&e.isVisible}function c(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}e.saveWindowData=function(){t=c(),n++},e.createNode=function(){let e=document.createElement("div"),t=document.createElement("ul");return t.className="lm-Menu-content",e.appendChild(t),t.setAttribute("role","menu"),e.tabIndex=0,e},e.canActivate=l,e.createItem=function(e,t){return new u(e.commands,t)},e.hitTestMenus=function(e,t,n){for(let i=e;i;i=i.childMenu)if(a.ElementExt.hitTest(i.node,t,n))return!0;return!1},e.computeCollapsed=function(e){let t=new Array(e.length);r.ArrayExt.fill(t,!1);let n=0,i=e.length;for(;n<i;++n){let i=e[n];if(i.isVisible){if("separator"!==i.type)break;t[n]=!0}}let s=i-1;for(;s>=0;--s){let n=e[s];if(n.isVisible){if("separator"!==n.type)break;t[s]=!0}}let a=!1;for(;++n<s;){let i=e[n];i.isVisible&&("separator"!==i.type?a=!1:a?t[n]=!0:a=!0)}return t},e.openRootMenu=function(e,t,n,r,s){const a=i();let l=a.pageXOffset,c=a.pageYOffset,u=a.clientWidth,h=a.clientHeight;o.MessageLoop.sendMessage(e,x.Msg.UpdateRequest);let d=h-(s?n:0),f=e.node,p=f.style;p.opacity="0",p.maxHeight=`${d}px`,x.attach(e,document.body);let{width:m,height:_}=f.getBoundingClientRect();!r&&t+m>l+u&&(t=l+u-m),!s&&n+_>c+h&&(n>c+h?n=c+h-_:n-=_),p.transform=`translate(${Math.max(0,t)}px, ${Math.max(0,n)}px`,p.opacity="1"},e.openSubmenu=function(t,n){const r=i();let s=r.pageXOffset,l=r.pageYOffset,c=r.clientWidth,u=r.clientHeight;o.MessageLoop.sendMessage(t,x.Msg.UpdateRequest);let h=u,d=t.node,f=d.style;f.opacity="0",f.maxHeight=`${h}px`,x.attach(t,document.body);let{width:p,height:m}=d.getBoundingClientRect(),_=a.ElementExt.boxSizing(t.node),g=n.getBoundingClientRect(),y=g.right-e.SUBMENU_OVERLAP;y+p>s+c&&(y=g.left+e.SUBMENU_OVERLAP-p);let v=g.top-_.borderTop-_.paddingTop;v+m>l+u&&(v=g.bottom+_.borderBottom+_.paddingBottom-m),f.transform=`translate(${Math.max(0,y)}px, ${Math.max(0,v)}px`,f.opacity="1"},e.findMnemonic=function(e,t,n){let i=-1,r=-1,s=!1,a=t.toUpperCase();for(let t=0,o=e.length;t<o;++t){let c=(t+n)%o,u=e[c];if(!l(u))continue;let h=u.label;if(0===h.length)continue;let d=u.mnemonic;d>=0&&d<h.length?h[d].toUpperCase()===a&&(-1===i?i=c:s=!0):-1===r&&h[0].toUpperCase()===a&&(r=c)}return{index:i,multiple:s,auto:r}};class u{constructor(e,t){this._commands=e,this.type=t.type||"command",this.command=t.command||"",this.args=t.args||s.JSONExt.emptyObject,this.submenu=t.submenu||null}get label(){return"command"===this.type?this._commands.label(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.label:""}get mnemonic(){return"command"===this.type?this._commands.mnemonic(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return"command"===this.type?this._commands.icon(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.icon:void 0}get iconClass(){return"command"===this.type?this._commands.iconClass(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return"command"===this.type?this._commands.iconLabel(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return"command"===this.type?this._commands.caption(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.caption:""}get className(){return"command"===this.type?this._commands.className(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.className:""}get dataset(){return"command"===this.type?this._commands.dataset(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return"command"===this.type?this._commands.isEnabled(this.command,this.args):"submenu"!==this.type||null!==this.submenu}get isToggled(){return"command"===this.type&&this._commands.isToggled(this.command,this.args)}get isVisible(){return"command"===this.type?this._commands.isVisible(this.command,this.args):"submenu"!==this.type||null!==this.submenu}get keyBinding(){if("command"===this.type){let{command:e,args:t}=this;return r.ArrayExt.findLastValue(this._commands.keyBindings,(n=>n.command===e&&s.JSONExt.deepEqual(n.args,t)))||null}return null}}}(P||(P={}));class G{constructor(e){this._groupByTarget=!0,this._idTick=0,this._items=[],this._sortBySelector=!0;const{groupByTarget:t,sortBySelector:n,...i}=e;this.menu=new W(i),this._groupByTarget=!1!==t,this._sortBySelector=!1!==n}addItem(e){let t=R.createItem(e,this._idTick++);return this._items.push(t),new g.At((()=>{r.ArrayExt.removeFirstOf(this._items,t)}))}open(e){if(W.saveWindowData(),this.menu.clearItems(),0===this._items.length)return!1;let t=R.matchItems(this._items,e,this._groupByTarget,this._sortBySelector);if(!t||0===t.length)return!1;for(const e of t)this.menu.addItem(e);return this.menu.open(e.clientX,e.clientY),!0}}!function(e){function t(e,t){let n=e.rank,i=t.rank;return n!==i?n<i?-1:1:e.id-t.id}function n(e,n){let i=a.Selector.calculateSpecificity(e.selector),r=a.Selector.calculateSpecificity(n.selector);return i!==r?r-i:t(e,n)}e.createItem=function(e,t){let n=function(e){if(-1!==e.indexOf(","))throw new Error(`Selector cannot contain commas: ${e}`);if(!a.Selector.isValid(e))throw new Error(`Invalid selector: ${e}`);return e}(e.selector),i=void 0!==e.rank?e.rank:1/0;return{...e,selector:n,rank:i,id:t}},e.matchItems=function(e,i,r,s){let o=i.target;if(!o)return null;let l=i.currentTarget;if(!l)return null;if(!l.contains(o)&&(o=document.elementFromPoint(i.clientX,i.clientY),!o||!l.contains(o)))return null;let c=[],u=e.slice();for(;null!==o;){let e=[];for(let t=0,n=u.length;t<n;++t){let n=u[t];n&&a.Selector.matches(o,n.selector)&&(e.push(n),u[t]=null)}if(0!==e.length&&(r&&e.sort(s?n:t),c.push(...e)),o===l)break;o=o.parentElement}return r||c.sort(s?n:t),c}}(R||(R={}));const V=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End"];class q extends x{constructor(e={}){super({node:X.createNode()}),this._currentIndex=-1,this._titles=[],this._titlesEditable=!1,this._previousTitle=null,this._dragData=null,this._addButtonEnabled=!1,this._tabMoved=new f.Signal(this),this._currentChanged=new f.Signal(this),this._addRequested=new f.Signal(this),this._tabCloseRequested=new f.Signal(this),this._tabDetachRequested=new f.Signal(this),this._tabActivateRequested=new f.Signal(this),this.addClass("lm-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(x.Flag.DisallowLayout),this._document=e.document||document,this.tabsMovable=e.tabsMovable||!1,this.titlesEditable=e.titlesEditable||!1,this.allowDeselect=e.allowDeselect||!1,this.addButtonEnabled=e.addButtonEnabled||!1,this.insertBehavior=e.insertBehavior||"select-tab-if-needed",this.name=e.name||"",this.orientation=e.orientation||"horizontal",this.removeBehavior=e.removeBehavior||"select-tab-after",this.renderer=e.renderer||q.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}get document(){return this._document}get titlesEditable(){return this._titlesEditable}set titlesEditable(e){this._titlesEditable=e}get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(e){this.currentIndex=e?this._titles.indexOf(e):-1}get currentIndex(){return this._currentIndex}set currentIndex(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex===e)return;let t=this._currentIndex,n=this._titles[t]||null,i=e,r=this._titles[i]||null;this._currentIndex=i,this._previousTitle=n,this.update(),this._currentChanged.emit({previousIndex:t,previousTitle:n,currentIndex:i,currentTitle:r})}get name(){return this._name}set name(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(e){return this.insertTab(this._titles.length,e)}insertTab(e,t){this._releaseMouse();let n=X.asTitle(t),i=this._titles.indexOf(n),s=Math.max(0,Math.min(e,this._titles.length));return-1===i?(r.ArrayExt.insert(this._titles,s,n),n.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(s,n),n):(s===this._titles.length&&s--,i===s||(r.ArrayExt.move(this._titles,i,s),this.update(),this._adjustCurrentForMove(i,s)),n)}removeTab(e){this.removeTabAt(this._titles.indexOf(e))}removeTabAt(e){this._releaseMouse();let t=r.ArrayExt.removeAt(this._titles,e);t&&(t.changed.disconnect(this._onTitleChanged,this),t===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,t))}clearTabs(){if(0===this._titles.length)return;this._releaseMouse();for(let e of this._titles)e.changed.disconnect(this._onTitleChanged,this);let e=this.currentIndex,t=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),-1!==e&&this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":e.eventPhase===Event.CAPTURING_PHASE?this._evtKeyDownCapturing(e):this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this),this.node.addEventListener("keydown",this)}onAfterDetach(e){this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this.node.removeEventListener("keydown",this),this._releaseMouse()}onUpdateRequest(e){var t;let n=this._titles,i=this.renderer,r=this.currentTitle,s=new Array(n.length);const a=null!==(t=this._getCurrentTabindex())&&void 0!==t?t:this._currentIndex>-1?this._currentIndex:0;for(let e=0,t=n.length;e<t;++e){let o=n[e],l=o===r,c=l?t:t-e-1,u=a===e?0:-1;s[e]=i.renderTab({title:o,current:l,zIndex:c,tabIndex:u})}_.VirtualDOM.render(s,this.contentNode)}_getCurrentTabindex(){let e=null;const t=this.contentNode.querySelector('li[tabindex="0"]');return t?e=[...this.contentNode.children].indexOf(t):this._addButtonEnabled&&"0"===this.addButtonNode.getAttribute("tabindex")&&(e=-1),e}_evtDblClick(e){if(!this.titlesEditable)return;let t=this.contentNode.children,n=r.ArrayExt.findFirstIndex(t,(t=>a.ElementExt.hitTest(t,e.clientX,e.clientY)));if(-1===n)return;let i=this.titles[n],s=t[n].querySelector(".lm-TabBar-tabLabel");if(s&&s.contains(e.target)){let e=i.label||"",t=s.innerHTML;s.innerHTML="";let n=document.createElement("input");n.classList.add("lm-TabBar-tabInput"),n.value=e,s.appendChild(n);let r=()=>{n.removeEventListener("blur",r),s.innerHTML=t,this.node.addEventListener("keydown",this)};n.addEventListener("dblclick",(e=>e.stopPropagation())),n.addEventListener("blur",r),n.addEventListener("keydown",(e=>{"Enter"===e.key?(""!==n.value&&(i.label=i.caption=n.value),r()):"Escape"===e.key&&r()})),this.node.removeEventListener("keydown",this),n.select(),n.focus(),s.children.length>0&&s.children[0].focus()}}_evtKeyDownCapturing(e){e.eventPhase===Event.CAPTURING_PHASE&&(e.preventDefault(),e.stopPropagation(),"Escape"===e.key&&this._releaseMouse())}_evtKeyDown(e){var t,n,i;if("Tab"!==e.key&&e.eventPhase!==Event.CAPTURING_PHASE)if("Enter"===e.key||"Spacebar"===e.key||" "===e.key){const t=document.activeElement;if(this.addButtonEnabled&&this.addButtonNode.contains(t))e.preventDefault(),e.stopPropagation(),this._addRequested.emit();else{const n=r.ArrayExt.findFirstIndex(this.contentNode.children,(e=>e.contains(t)));n>=0&&(e.preventDefault(),e.stopPropagation(),this.currentIndex=n)}}else if(V.includes(e.key)){const r=[...this.contentNode.children];if(this.addButtonEnabled&&r.push(this.addButtonNode),r.length<=1)return;e.preventDefault(),e.stopPropagation();let s,a=r.indexOf(document.activeElement);-1===a&&(a=this._currentIndex),"ArrowRight"===e.key&&"horizontal"===this._orientation||"ArrowDown"===e.key&&"vertical"===this._orientation?s=null!==(t=r[a+1])&&void 0!==t?t:r[0]:"ArrowLeft"===e.key&&"horizontal"===this._orientation||"ArrowUp"===e.key&&"vertical"===this._orientation?s=null!==(n=r[a-1])&&void 0!==n?n:r[r.length-1]:"Home"===e.key?s=r[0]:"End"===e.key&&(s=r[r.length-1]),s&&(null===(i=r[a])||void 0===i||i.setAttribute("tabindex","-1"),null==s||s.setAttribute("tabindex","0"),s.focus())}}_evtPointerDown(e){if(0!==e.button&&1!==e.button)return;if(this._dragData)return;if(e.target.classList.contains("lm-TabBar-tabInput"))return;let t=this.addButtonEnabled&&this.addButtonNode.contains(e.target),n=this.contentNode.children,i=r.ArrayExt.findFirstIndex(n,(t=>a.ElementExt.hitTest(t,e.clientX,e.clientY)));if(-1===i&&!t)return;if(e.preventDefault(),e.stopPropagation(),this._dragData={tab:n[i],index:i,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("pointerup",this,!0),1===e.button||t)return;let s=n[i].querySelector(this.renderer.closeIconSelector);s&&s.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===i?this.currentIndex=-1:this.currentIndex=i,-1!==this.currentIndex&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtPointerMove(e){let t=this._dragData;if(!t)return;e.preventDefault(),e.stopPropagation();let n=this.contentNode.children;if(t.dragActive||X.dragExceeded(t,e)){if(!t.dragActive){let e=t.tab.getBoundingClientRect();"horizontal"===this._orientation?(t.tabPos=t.tab.offsetLeft,t.tabSize=e.width,t.tabPressPos=t.pressX-e.left):(t.tabPos=t.tab.offsetTop,t.tabSize=e.height,t.tabPressPos=t.pressY-e.top),t.tabPressOffset={x:t.pressX-e.left,y:t.pressY-e.top},t.tabLayout=X.snapTabLayout(n,this._orientation),t.contentRect=this.contentNode.getBoundingClientRect(),t.override=p.X.overrideCursor("default"),t.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),t.dragActive=!0}if(!t.detachRequested&&X.detachExceeded(t,e)){t.detachRequested=!0;let i=t.index,r=e.clientX,s=e.clientY,a=n[i],o=this._titles[i];if(this._tabDetachRequested.emit({index:i,title:o,tab:a,clientX:r,clientY:s,offset:t.tabPressOffset}),t.dragAborted)return}X.layoutTabs(n,t,e,this._orientation)}}_evtPointerUp(e){if(0!==e.button&&1!==e.button)return;const t=this._dragData;if(!t)return;if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!t.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target))return void this._addRequested.emit(void 0);let n=this.contentNode.children,i=r.ArrayExt.findFirstIndex(n,(t=>a.ElementExt.hitTest(t,e.clientX,e.clientY)));if(i!==t.index)return;let s=this._titles[i];if(!s.closable)return;if(1===e.button)return void this._tabCloseRequested.emit({index:i,title:s});let o=n[i].querySelector(this.renderer.closeIconSelector);return o&&o.contains(e.target)?void this._tabCloseRequested.emit({index:i,title:s}):void 0}if(0!==e.button)return;X.finalizeTabPosition(t,this._orientation),t.tab.classList.remove("lm-mod-dragging");let n=X.parseTransitionDuration(t.tab);setTimeout((()=>{if(t.dragAborted)return;this._dragData=null,X.resetTabPositions(this.contentNode.children,this._orientation),t.override.dispose(),this.removeClass("lm-mod-dragging");let e=t.index,n=t.targetIndex;-1!==n&&e!==n&&(r.ArrayExt.move(this._titles,e,n),this._adjustCurrentForMove(e,n),this._tabMoved.emit({fromIndex:e,toIndex:n,title:this._titles[n]}),o.MessageLoop.sendMessage(this,x.Msg.UpdateRequest))}),n)}_releaseMouse(){let e=this._dragData;e&&(this._dragData=null,this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(X.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging")))}_adjustCurrentForInsert(e,t){let n=this.currentTitle,i=this._currentIndex,r=this.insertBehavior;if("select-tab"===r||"select-tab-if-needed"===r&&-1===i)return this._currentIndex=e,this._previousTitle=n,void this._currentChanged.emit({previousIndex:i,previousTitle:n,currentIndex:e,currentTitle:t});i>=e&&this._currentIndex++}_adjustCurrentForMove(e,t){this._currentIndex===e?this._currentIndex=t:this._currentIndex<e&&this._currentIndex>=t?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=t&&this._currentIndex--}_adjustCurrentForRemove(e,t){let n=this._currentIndex,i=this.removeBehavior;if(n===e){if(0===this._titles.length)return this._currentIndex=-1,void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null});if("select-tab-after"===i)return this._currentIndex=Math.min(e,this._titles.length-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-tab-before"===i)return this._currentIndex=Math.max(0,e-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-previous-tab"===i)return this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}else n>e&&this._currentIndex--}_onTitleChanged(e){this.update()}}var X,$,J,K,Z,Q,ee,te;!function(e){class t{constructor(){this.closeIconSelector=".lm-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=new WeakMap,this._uuid=++t._nInstance}renderTab(e){let t=e.title.caption,n=this.createTabKey(e),i=n,r=this.createTabStyle(e),s=this.createTabClass(e),a=this.createTabDataset(e),o=this.createTabARIA(e);return e.title.closable?_.h.li({id:i,key:n,className:s,title:t,style:r,dataset:a,...o},this.renderIcon(e),this.renderLabel(e),this.renderCloseIcon(e)):_.h.li({id:i,key:n,className:s,title:t,style:r,dataset:a,...o},this.renderIcon(e),this.renderLabel(e))}renderIcon(e){const{title:t}=e;let n=this.createIconClass(e);return _.h.div({className:n},t.icon,t.iconLabel)}renderLabel(e){return _.h.div({className:"lm-TabBar-tabLabel"},e.title.label)}renderCloseIcon(e){return _.h.div({className:"lm-TabBar-tabCloseIcon"})}createTabKey(e){let t=this._tabKeys.get(e.title);return void 0===t&&(t=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(e.title,t)),t}createTabStyle(e){return{zIndex:`${e.zIndex}`}}createTabClass(e){let t="lm-TabBar-tab";return e.title.className&&(t+=` ${e.title.className}`),e.title.closable&&(t+=" lm-mod-closable"),e.current&&(t+=" lm-mod-current"),t}createTabDataset(e){return e.title.dataset}createTabARIA(e){var t;return{role:"tab","aria-selected":e.current.toString(),tabindex:`${null!==(t=e.tabIndex)&&void 0!==t?t:"-1"}`}}createIconClass(e){let t="lm-TabBar-tabIcon",n=e.title.iconClass;return n?`${t} ${n}`:t}}t._nInstance=0,e.Renderer=t,e.defaultRenderer=new t,e.addButtonSelector=".lm-TabBar-addButton"}(q||(q={})),function(e){e.DRAG_THRESHOLD=5,e.DETACH_THRESHOLD=20,e.createNode=function(){let e=document.createElement("div"),t=document.createElement("ul");t.setAttribute("role","tablist"),t.className="lm-TabBar-content",e.appendChild(t);let n=document.createElement("div");return n.className="lm-TabBar-addButton lm-mod-hidden",n.setAttribute("tabindex","-1"),n.setAttribute("role","button"),e.appendChild(n),e},e.asTitle=function(e){return e instanceof b?e:new b(e)},e.parseTransitionDuration=function(e){let t=window.getComputedStyle(e);return 1e3*(parseFloat(t.transitionDuration)||0)},e.snapTabLayout=function(e,t){let n=new Array(e.length);for(let i=0,r=e.length;i<r;++i){let r=e[i],s=window.getComputedStyle(r);n[i]="horizontal"===t?{pos:r.offsetLeft,size:r.offsetWidth,margin:parseFloat(s.marginLeft)||0}:{pos:r.offsetTop,size:r.offsetHeight,margin:parseFloat(s.marginTop)||0}}return n},e.dragExceeded=function(t,n){let i=Math.abs(n.clientX-t.pressX),r=Math.abs(n.clientY-t.pressY);return i>=e.DRAG_THRESHOLD||r>=e.DRAG_THRESHOLD},e.detachExceeded=function(t,n){let i=t.contentRect;return n.clientX<i.left-e.DETACH_THRESHOLD||n.clientX>=i.right+e.DETACH_THRESHOLD||n.clientY<i.top-e.DETACH_THRESHOLD||n.clientY>=i.bottom+e.DETACH_THRESHOLD},e.layoutTabs=function(e,t,n,i){let r,s,a,o;"horizontal"===i?(r=t.pressX,s=n.clientX-t.contentRect.left,a=n.clientX,o=t.contentRect.width):(r=t.pressY,s=n.clientY-t.contentRect.top,a=n.clientY,o=t.contentRect.height);let l=t.index,c=s-t.tabPressPos,u=c+t.tabSize;for(let n=0,s=e.length;n<s;++n){let s,h=t.tabLayout[n],d=h.pos+(h.size>>1);if(n<t.index&&c<d)s=`${t.tabSize+t.tabLayout[n+1].margin}px`,l=Math.min(l,n);else if(n>t.index&&u>d)s=-t.tabSize-h.margin+"px",l=Math.max(l,n);else if(n===t.index){let e=a-r,n=o-(t.tabPos+t.tabSize);s=`${Math.max(-t.tabPos,Math.min(e,n))}px`}else s="";"horizontal"===i?e[n].style.left=s:e[n].style.top=s}t.targetIndex=l},e.finalizeTabPosition=function(e,t){let n,i;if(n="horizontal"===t?e.contentRect.width:e.contentRect.height,e.targetIndex===e.index)i=0;else if(e.targetIndex>e.index){let t=e.tabLayout[e.targetIndex];i=t.pos+t.size-e.tabSize-e.tabPos}else i=e.tabLayout[e.targetIndex].pos-e.tabPos;let r=n-(e.tabPos+e.tabSize),s=Math.max(-e.tabPos,Math.min(i,r));"horizontal"===t?e.tab.style.left=`${s}px`:e.tab.style.top=`${s}px`},e.resetTabPositions=function(e,t){for(const n of e)"horizontal"===t?n.style.left="":n.style.top=""}}(X||(X={}));class ne extends M{constructor(e){super(),this._spacing=4,this._dirty=!1,this._root=null,this._box=null,this._items=new Map,this.renderer=e.renderer,void 0!==e.spacing&&(this._spacing=z.clampDimension(e.spacing)),this._document=e.document||document,this._hiddenMode=void 0!==e.hiddenMode?e.hiddenMode:x.HiddenMode.Display}dispose(){let e=this[Symbol.iterator]();this._items.forEach((e=>{e.dispose()})),this._box=null,this._root=null,this._items.clear();for(const t of e)t.dispose();super.dispose()}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){if(this._hiddenMode!==e){this._hiddenMode=e;for(const e of this.tabBars())if(e.titles.length>1)for(const t of e.titles)t.owner.hiddenMode=this._hiddenMode}}get spacing(){return this._spacing}set spacing(e){e=z.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get isEmpty(){return null===this._root}[Symbol.iterator](){return this._root?this._root.iterAllWidgets():(0,r.empty)()}widgets(){return this._root?this._root.iterUserWidgets():(0,r.empty)()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():(0,r.empty)()}tabBars(){return this._root?this._root.iterTabBars():(0,r.empty)()}handles(){return this._root?this._root.iterHandles():(0,r.empty)()}moveHandle(e,t,n){let i=e.classList.contains("lm-mod-hidden");if(!this._root||i)return;let r,s=this._root.findSplitNode(e);s&&(r="horizontal"===s.node.orientation?t-e.offsetLeft:n-e.offsetTop,0!==r&&(s.node.holdSizes(),c.adjust(s.node.sizers,s.index,r),this.parent&&this.parent.update()))}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(e){let t,n=new Set;t=e.main?$.normalizeAreaConfig(e.main,n):null;let i=this.widgets(),r=this.tabBars(),s=this.handles();this._root=null;for(const e of i)n.has(e)||(e.parent=null);for(const e of r)e.dispose();for(const e of s)e.parentNode&&e.parentNode.removeChild(e);for(const e of n)e.parent=this.parent;this._root=t?$.realizeAreaConfig(t,{createTabBar:e=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):null,this.parent&&(n.forEach((e=>{this.attachWidget(e)})),this.parent.fit())}addWidget(e,t={}){let n=t.ref||null,i=t.mode||"tab-after",r=null;if(this._root&&n&&(r=this._root.findTabNode(n)),n&&!r)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,i){case"tab-after":this._insertTab(e,n,r,!0);break;case"tab-before":this._insertTab(e,n,r,!1);break;case"split-top":this._insertSplit(e,n,r,"vertical",!1);break;case"split-left":this._insertSplit(e,n,r,"horizontal",!1);break;case"split-right":this._insertSplit(e,n,r,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,n,r,"vertical",!0);break;case"merge-top":this._insertSplit(e,n,r,"vertical",!1,!0);break;case"merge-left":this._insertSplit(e,n,r,"horizontal",!1,!0);break;case"merge-right":this._insertSplit(e,n,r,"horizontal",!0,!0);break;case"merge-bottom":this._insertSplit(e,n,r,"vertical",!0,!0)}this.parent&&(this.attachWidget(e),this.parent.fit())}removeWidget(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())}hitTestTabAreas(e,t){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));let n=this.parent.node.getBoundingClientRect(),i=e-n.left-this._box.borderLeft,r=t-n.top-this._box.borderTop,s=this._root.hitTestTabNodes(i,r);if(!s)return null;let{tabBar:o,top:l,left:c,width:u,height:h}=s,d=this._box.borderLeft+this._box.borderRight,f=this._box.borderTop+this._box.borderBottom;return{tabBar:o,x:i,y:r,top:l,left:c,right:n.width-d-(c+u),bottom:n.height-f-(l+h),width:u,height:h}}init(){super.init();for(const e of this)this.attachWidget(e);for(const e of this.handles())this.parent.node.appendChild(e);this.parent.fit()}attachWidget(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new w(e)),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.AfterAttach))}detachWidget(e){if(this.parent.node!==e.node.parentNode)return;this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.AfterDetach);let t=this._items.get(e);t&&(this._items.delete(e),t.dispose())}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_removeWidget(e){if(!this._root)return;let t=this._root.findTabNode(e);if(!t)return;if($.removeAria(e),t.tabBar.titles.length>1)return t.tabBar.removeTab(e.title),void(this._hiddenMode===x.HiddenMode.Scale&&1==t.tabBar.titles.length&&(t.tabBar.titles[0].owner.hiddenMode=x.HiddenMode.Display));if(t.tabBar.dispose(),this._root===t)return void(this._root=null);this._root.holdAllSizes();let n=t.parent;t.parent=null;let i=r.ArrayExt.removeFirstOf(n.children,t),s=r.ArrayExt.removeAt(n.handles,i);if(r.ArrayExt.removeAt(n.sizers,i),s.parentNode&&s.parentNode.removeChild(s),n.children.length>1)return void n.syncHandles();let a=n.parent;n.parent=null;let o=n.children[0],l=n.handles[0];if(n.children.length=0,n.handles.length=0,n.sizers.length=0,l.parentNode&&l.parentNode.removeChild(l),this._root===n)return o.parent=null,void(this._root=o);let c=a,u=c.children.indexOf(n);if(o instanceof $.TabLayoutNode)return o.parent=c,void(c.children[u]=o);let h=r.ArrayExt.removeAt(c.handles,u);r.ArrayExt.removeAt(c.children,u),r.ArrayExt.removeAt(c.sizers,u),h.parentNode&&h.parentNode.removeChild(h);for(let e=0,t=o.children.length;e<t;++e){let t=o.children[e],n=o.handles[e],i=o.sizers[e];r.ArrayExt.insert(c.children,u+e,t),r.ArrayExt.insert(c.handles,u+e,n),r.ArrayExt.insert(c.sizers,u+e,i),t.parent=c}o.children.length=0,o.handles.length=0,o.sizers.length=0,o.parent=null,c.syncHandles()}_createTabNode(e){let t=new $.TabLayoutNode(this._createTabBar());return t.tabBar.addTab(e.title),$.addAria(e,t.tabBar),t}_insertTab(e,t,n,i){if(e===t)return;if(!this._root){let t=new $.TabLayoutNode(this._createTabBar());return t.tabBar.addTab(e.title),this._root=t,void $.addAria(e,t.tabBar)}let r;n||(n=this._root.findFirstTabNode()),-1===n.tabBar.titles.indexOf(e.title)&&(this._removeWidget(e),e.hide()),r=t?n.tabBar.titles.indexOf(t.title):n.tabBar.currentIndex,this._hiddenMode===x.HiddenMode.Scale?0===n.tabBar.titles.length?e.hiddenMode=x.HiddenMode.Display:1==n.tabBar.titles.length?n.tabBar.titles[0].owner.hiddenMode=x.HiddenMode.Scale:e.hiddenMode=x.HiddenMode.Scale:e.hiddenMode=this._hiddenMode,n.tabBar.insertTab(r+(i?1:0),e.title),$.addAria(e,n.tabBar)}_insertSplit(e,t,n,i,s,a=!1){if(e===t&&n&&1===n.tabBar.titles.length)return;if(this._removeWidget(e),!this._root)return void(this._root=this._createTabNode(e));if(!n||!n.parent){let t=this._splitRoot(i),a=s?t.children.length:0;t.normalizeSizes();let o=$.createSizer(n?1:$.GOLDEN_RATIO),l=this._createTabNode(e);return r.ArrayExt.insert(t.children,a,l),r.ArrayExt.insert(t.sizers,a,o),r.ArrayExt.insert(t.handles,a,this._createHandle()),l.parent=t,t.normalizeSizes(),void t.syncHandles()}let o=n.parent;if(o.orientation===i){let t=o.children.indexOf(n);if(a){let n=t+(s?1:-1),i=o.children[n];if(i instanceof $.TabLayoutNode)return this._insertTab(e,null,i,!0),void++i.tabBar.currentIndex}o.normalizeSizes();let i=o.sizers[t].sizeHint/=2,l=t+(s?1:0),c=this._createTabNode(e);return r.ArrayExt.insert(o.children,l,c),r.ArrayExt.insert(o.sizers,l,$.createSizer(i)),r.ArrayExt.insert(o.handles,l,this._createHandle()),c.parent=o,void o.syncHandles()}let l=r.ArrayExt.removeFirstOf(o.children,n),c=new $.SplitLayoutNode(i);c.normalized=!0,c.children.push(n),c.sizers.push($.createSizer(.5)),c.handles.push(this._createHandle()),n.parent=c;let u=s?1:0,h=this._createTabNode(e);r.ArrayExt.insert(c.children,u,h),r.ArrayExt.insert(c.sizers,u,$.createSizer(.5)),r.ArrayExt.insert(c.handles,u,this._createHandle()),h.parent=c,c.syncHandles(),r.ArrayExt.insert(o.children,l,c),c.parent=o}_splitRoot(e){let t=this._root;if(t instanceof $.SplitLayoutNode&&t.orientation===e)return t;let n=this._root=new $.SplitLayoutNode(e);return t&&(n.children.push(t),n.sizers.push($.createSizer(0)),n.handles.push(this._createHandle()),t.parent=n),n}_fit(){let e=0,t=0;if(this._root){let n=this._root.fit(this._spacing,this._items);e=n.minWidth,t=n.minHeight}let n=this._box=a.ElementExt.boxSizing(this.parent.node);e+=n.horizontalSum,t+=n.verticalSum;let i=this.parent.node.style;i.minWidth=`${e}px`,i.minHeight=`${t}px`,this._dirty=!0,this.parent.parent&&o.MessageLoop.sendMessage(this.parent.parent,x.Msg.FitRequest),this._dirty&&o.MessageLoop.sendMessage(this.parent,x.Msg.UpdateRequest)}_update(e,t){if(this._dirty=!1,!this._root)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));let n=this._box.paddingTop,i=this._box.paddingLeft,r=e-this._box.horizontalSum,s=t-this._box.verticalSum;this._root.update(n,i,r,s,this._spacing,this._items)}_createTabBar(){let e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&this.attachWidget(e),e}_createHandle(){let e=this.renderer.createHandle(),t=e.style;return t.position="absolute",t.contain="strict",t.top="0",t.left="0",t.width="0",t.height="0",this.parent&&this.parent.node.appendChild(e),e}}!function(e){function t(e){let t=new v;return t.sizeHint=e,t.size=e,t}e.GOLDEN_RATIO=.618,e.createSizer=t,e.normalizeAreaConfig=function e(t,n){let i;return i="tab-area"===t.type?function(e,t){if(0===e.widgets.length)return null;let n=[];for(const i of e.widgets)t.has(i)||(t.add(i),n.push(i));if(0===n.length)return null;let i=e.currentIndex;return-1!==i&&(i<0||i>=n.length)&&(i=0),{type:"tab-area",widgets:n,currentIndex:i}}(t,n):function(t,n){let i=t.orientation,r=[],s=[];for(let a=0,o=t.children.length;a<o;++a){let o=e(t.children[a],n);o&&("tab-area"===o.type||o.orientation!==i?(r.push(o),s.push(Math.abs(t.sizes[a]||0))):(r.push(...o.children),s.push(...o.sizes)))}return 0===r.length?null:1===r.length?r[0]:{type:"split-area",orientation:i,children:r,sizes:s}}(t,n),i},e.realizeAreaConfig=function r(s,a,o){let l;return l="tab-area"===s.type?function(t,i,r){let s=i.createTabBar(r);for(const n of t.widgets)n.hide(),s.addTab(n.title),e.addAria(n,s);return s.currentIndex=t.currentIndex,new n(s)}(s,a,o):function(e,n,s){let a=new i(e.orientation);return e.children.forEach(((i,o)=>{let l=r(i,n,s),c=t(e.sizes[o]),u=n.createHandle();a.children.push(l),a.handles.push(u),a.sizers.push(c),l.parent=a})),a.syncHandles(),a.normalizeSizes(),a}(s,a,o),l};class n{constructor(e){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;let t=new v,n=new v;t.stretch=0,n.stretch=1,this.tabBar=e,this.sizers=[t,n]}get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}*iterAllWidgets(){yield this.tabBar,yield*this.iterUserWidgets()}*iterUserWidgets(){for(const e of this.tabBar.titles)yield e.owner}*iterSelectedWidgets(){let e=this.tabBar.currentTitle;e&&(yield e.owner)}*iterTabBars(){yield this.tabBar}*iterHandles(){}findTabNode(e){return-1!==this.tabBar.titles.indexOf(e.title)?this:null}findSplitNode(e){return null}findFirstTabNode(){return this}hitTestTabNodes(e,t){return e<this._left||e>=this._left+this._width||t<this._top||t>=this._top+this._height?null:this}createConfig(){return{type:"tab-area",widgets:this.tabBar.titles.map((e=>e.owner)),currentIndex:this.tabBar.currentIndex}}holdAllSizes(){}fit(e,t){let n=0,i=0,r=t.get(this.tabBar),s=this.tabBar.currentTitle,a=s?t.get(s.owner):void 0,[o,l]=this.sizers;return r&&r.fit(),a&&a.fit(),r&&!r.isHidden?(n=Math.max(n,r.minWidth),i+=r.minHeight,o.minSize=r.minHeight,o.maxSize=r.maxHeight):(o.minSize=0,o.maxSize=0),a&&!a.isHidden?(n=Math.max(n,a.minWidth),i+=a.minHeight,l.minSize=a.minHeight,l.maxSize=1/0):(l.minSize=0,l.maxSize=1/0),{minWidth:n,minHeight:i,maxWidth:1/0,maxHeight:1/0}}update(e,t,n,i,r,s){this._top=t,this._left=e,this._width=n,this._height=i;let a=s.get(this.tabBar),o=this.tabBar.currentTitle,l=o?s.get(o.owner):void 0;if(c.calc(this.sizers,i),a&&!a.isHidden){let i=this.sizers[0].size;a.update(e,t,n,i),t+=i}if(l&&!l.isHidden){let i=this.sizers[1].size;l.update(e,t,n,i)}}}e.TabLayoutNode=n;class i{constructor(e){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=e}*iterAllWidgets(){for(const e of this.children)yield*e.iterAllWidgets()}*iterUserWidgets(){for(const e of this.children)yield*e.iterUserWidgets()}*iterSelectedWidgets(){for(const e of this.children)yield*e.iterSelectedWidgets()}*iterTabBars(){for(const e of this.children)yield*e.iterTabBars()}*iterHandles(){yield*this.handles;for(const e of this.children)yield*e.iterHandles()}findTabNode(e){for(let t=0,n=this.children.length;t<n;++t){let n=this.children[t].findTabNode(e);if(n)return n}return null}findSplitNode(e){let t=this.handles.indexOf(e);if(-1!==t)return{index:t,node:this};for(let t=0,n=this.children.length;t<n;++t){let n=this.children[t].findSplitNode(e);if(n)return n}return null}findFirstTabNode(){return 0===this.children.length?null:this.children[0].findFirstTabNode()}hitTestTabNodes(e,t){for(let n=0,i=this.children.length;n<i;++n){let i=this.children[n].hitTestTabNodes(e,t);if(i)return i}return null}createConfig(){let e=this.orientation,t=this.createNormalizedSizes();return{type:"split-area",orientation:e,children:this.children.map((e=>e.createConfig())),sizes:t}}syncHandles(){this.handles.forEach(((e,t)=>{e.setAttribute("data-orientation",this.orientation),t===this.handles.length-1?e.classList.add("lm-mod-hidden"):e.classList.remove("lm-mod-hidden")}))}holdSizes(){for(const e of this.sizers)e.sizeHint=e.size}holdAllSizes(){for(const e of this.children)e.holdAllSizes();this.holdSizes()}normalizeSizes(){let e=this.sizers.length;if(0===e)return;this.holdSizes();let t=this.sizers.reduce(((e,t)=>e+t.sizeHint),0);if(0===t)for(const t of this.sizers)t.size=t.sizeHint=1/e;else for(const e of this.sizers)e.size=e.sizeHint/=t;this.normalized=!0}createNormalizedSizes(){let e=this.sizers.length;if(0===e)return[];let t=this.sizers.map((e=>e.size)),n=t.reduce(((e,t)=>e+t),0);if(0===n)for(let n=t.length-1;n>-1;n--)t[n]=1/e;else for(let e=t.length-1;e>-1;e--)t[e]/=n;return t}fit(e,t){let n="horizontal"===this.orientation,i=Math.max(0,this.children.length-1)*e,r=n?i:0,s=n?0:i;for(let i=0,a=this.children.length;i<a;++i){let a=this.children[i].fit(e,t);n?(s=Math.max(s,a.minHeight),r+=a.minWidth,this.sizers[i].minSize=a.minWidth):(r=Math.max(r,a.minWidth),s+=a.minHeight,this.sizers[i].minSize=a.minHeight)}return{minWidth:r,minHeight:s,maxWidth:1/0,maxHeight:1/0}}update(e,t,n,i,r,s){let a="horizontal"===this.orientation,o=Math.max(0,this.children.length-1)*r,l=Math.max(0,(a?n:i)-o);if(this.normalized){for(const e of this.sizers)e.sizeHint*=l;this.normalized=!1}c.calc(this.sizers,l);for(let o=0,l=this.children.length;o<l;++o){let l=this.children[o],c=this.sizers[o].size,u=this.handles[o].style;a?(l.update(e,t,c,i,r,s),e+=c,u.top=`${t}px`,u.left=`${e}px`,u.width=`${r}px`,u.height=`${i}px`,e+=r):(l.update(e,t,n,c,r,s),t+=c,u.top=`${t}px`,u.left=`${e}px`,u.width=`${n}px`,u.height=`${r}px`,t+=r)}}}e.SplitLayoutNode=i,e.addAria=function(e,t){e.node.setAttribute("role","tabpanel");let n=t.renderer;if(n instanceof q.Renderer){let t=n.createTabKey({title:e.title,current:!1,zIndex:0});e.node.setAttribute("aria-labelledby",t)}},e.removeAria=function(e){e.node.removeAttribute("role"),e.node.removeAttribute("aria-labelledby")}}($||($={}));class ie extends x{constructor(e={}){super(),this._drag=null,this._tabsMovable=!0,this._tabsConstrained=!1,this._addButtonEnabled=!1,this._pressData=null,this._layoutModified=new f.Signal(this),this._addRequested=new f.Signal(this),this.addClass("lm-DockPanel"),this._document=e.document||document,this._mode=e.mode||"multiple-document",this._renderer=e.renderer||ie.defaultRenderer,this._edges=e.edges||J.DEFAULT_EDGES,void 0!==e.tabsMovable&&(this._tabsMovable=e.tabsMovable),void 0!==e.tabsConstrained&&(this._tabsConstrained=e.tabsConstrained),void 0!==e.addButtonEnabled&&(this._addButtonEnabled=e.addButtonEnabled),this.dataset.mode=this._mode;let t={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new ne({document:this._document,renderer:t,spacing:e.spacing,hiddenMode:e.hiddenMode}),this.overlay=e.overlay||new ie.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get mode(){return this._mode}set mode(e){if(this._mode===e)return;this._mode=e,this.dataset.mode=e;let t=this.layout;switch(e){case"multiple-document":for(const e of t.tabBars())e.show();break;case"single-document":t.restoreLayout(J.createSingleDocumentConfig(this));break;default:throw"unreachable"}o.MessageLoop.postMessage(this,J.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(e){this._tabsMovable=e;for(const t of this.tabBars())t.tabsMovable=e}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(e){this._tabsConstrained=e}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled=e;for(const t of this.tabBars())t.addButtonEnabled=e}get isEmpty(){return this.layout.isEmpty}*widgets(){yield*this.layout.widgets()}*selectedWidgets(){yield*this.layout.selectedWidgets()}*tabBars(){yield*this.layout.tabBars()}*handles(){yield*this.layout.handles()}selectWidget(e){let t=(0,r.find)(this.tabBars(),(t=>-1!==t.titles.indexOf(e.title)));if(!t)throw new Error("Widget is not contained in the dock panel.");t.currentTitle=e.title}activateWidget(e){this.selectWidget(e),e.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(e){this._mode="multiple-document",this.layout.restoreLayout(e),(a.Platform.IS_EDGE||a.Platform.IS_IE)&&o.MessageLoop.flush(),o.MessageLoop.postMessage(this,J.LayoutModified)}addWidget(e,t={}){"single-document"===this._mode?this.layout.addWidget(e):this.layout.addWidget(e,t),o.MessageLoop.postMessage(this,J.LayoutModified)}processMessage(e){"layout-modified"===e.type?this._layoutModified.emit(void 0):super.processMessage(e)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){J.isGeneratedTabBarProperty.get(e.child)||e.child.addClass("lm-DockPanel-widget")}onChildRemoved(e){J.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),o.MessageLoop.postMessage(this,J.LayoutModified))}_evtDragEnter(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||(e.stopPropagation(),this.overlay.hide(1))}_evtDragOver(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||"invalid"===this._showOverlay(e.clientX,e.clientY)?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)}_evtDrop(e){if(e.preventDefault(),this.overlay.hide(0),"none"===e.proposedAction)return void(e.dropAction="none");let{clientX:t,clientY:n}=e,{zone:i,target:r}=J.findDropTarget(this,t,n,this._edges);if(this._tabsConstrained&&e.source!==this||"invalid"===i)return void(e.dropAction="none");let s=e.mimeData.getData("application/vnd.lumino.widget-factory");if("function"!=typeof s)return void(e.dropAction="none");let a=s();if(!(a instanceof x))return void(e.dropAction="none");if(a.contains(this))return void(e.dropAction="none");let o=r?J.getDropRef(r.tabBar):null;switch(i){case"root-all":this.addWidget(a);break;case"root-top":this.addWidget(a,{mode:"split-top"});break;case"root-left":this.addWidget(a,{mode:"split-left"});break;case"root-right":this.addWidget(a,{mode:"split-right"});break;case"root-bottom":this.addWidget(a,{mode:"split-bottom"});break;case"widget-all":case"widget-tab":this.addWidget(a,{mode:"tab-after",ref:o});break;case"widget-top":this.addWidget(a,{mode:"split-top",ref:o});break;case"widget-left":this.addWidget(a,{mode:"split-left",ref:o});break;case"widget-right":this.addWidget(a,{mode:"split-right",ref:o});break;case"widget-bottom":this.addWidget(a,{mode:"split-bottom",ref:o});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(a)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&(this._releaseMouse(),o.MessageLoop.postMessage(this,J.LayoutModified))}_evtPointerDown(e){if(0!==e.button)return;let t=this.layout,n=e.target,i=(0,r.find)(t.handles(),(e=>e.contains(n)));if(!i)return;e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let s=i.getBoundingClientRect(),a=e.clientX-s.left,o=e.clientY-s.top,l=window.getComputedStyle(i),c=p.X.overrideCursor(l.cursor,this._document);this._pressData={handle:i,deltaX:a,deltaY:o,override:c}}_evtPointerMove(e){if(!this._pressData)return;e.preventDefault(),e.stopPropagation();let t=this.node.getBoundingClientRect(),n=e.clientX-t.left-this._pressData.deltaX,i=e.clientY-t.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,n,i)}_evtPointerUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),o.MessageLoop.postMessage(this,J.LayoutModified))}_releaseMouse(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(e,t){let n,i,r,s,{zone:o,target:l}=J.findDropTarget(this,e,t,this._edges);if("invalid"===o)return this.overlay.hide(100),o;let c=a.ElementExt.boxSizing(this.node),u=this.node.getBoundingClientRect();switch(o){case"root-all":n=c.paddingTop,i=c.paddingLeft,r=c.paddingRight,s=c.paddingBottom;break;case"root-top":n=c.paddingTop,i=c.paddingLeft,r=c.paddingRight,s=u.height*J.GOLDEN_RATIO;break;case"root-left":n=c.paddingTop,i=c.paddingLeft,r=u.width*J.GOLDEN_RATIO,s=c.paddingBottom;break;case"root-right":n=c.paddingTop,i=u.width*J.GOLDEN_RATIO,r=c.paddingRight,s=c.paddingBottom;break;case"root-bottom":n=u.height*J.GOLDEN_RATIO,i=c.paddingLeft,r=c.paddingRight,s=c.paddingBottom;break;case"widget-all":n=l.top,i=l.left,r=l.right,s=l.bottom;break;case"widget-top":n=l.top,i=l.left,r=l.right,s=l.bottom+l.height/2;break;case"widget-left":n=l.top,i=l.left,r=l.right+l.width/2,s=l.bottom;break;case"widget-right":n=l.top,i=l.left+l.width/2,r=l.right,s=l.bottom;break;case"widget-bottom":n=l.top+l.height/2,i=l.left,r=l.right,s=l.bottom;break;case"widget-tab":{const e=l.tabBar.node.getBoundingClientRect().height;n=l.top,i=l.left,r=l.right,s=l.bottom+l.height-e;break}default:throw"unreachable"}return this.overlay.show({top:n,left:i,right:r,bottom:s}),o}_createTabBar(){let e=this._renderer.createTabBar(this._document);return J.isGeneratedTabBarProperty.set(e,!0),"single-document"===this._mode&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){o.MessageLoop.postMessage(this,J.LayoutModified)}_onCurrentChanged(e,t){let{previousTitle:n,currentTitle:i}=t;n&&n.owner.hide(),i&&i.owner.show(),(a.Platform.IS_EDGE||a.Platform.IS_IE)&&o.MessageLoop.flush(),o.MessageLoop.postMessage(this,J.LayoutModified)}_onTabAddRequested(e){this._addRequested.emit(e)}_onTabActivateRequested(e,t){t.title.owner.activate()}_onTabCloseRequested(e,t){t.title.owner.close()}_onTabDetachRequested(e,t){if(this._drag)return;e.releaseMouse();let{title:n,tab:i,clientX:r,clientY:a,offset:o}=t,l=new s.MimeData;l.setData("application/vnd.lumino.widget-factory",(()=>n.owner));let c=i.cloneNode(!0);o&&(c.style.top=`-${o.y}px`,c.style.left=`-${o.x}px`),this._drag=new p.X({document:this._document,mimeData:l,dragImage:c,proposedAction:"move",supportedActions:"move",source:this}),i.classList.add("lm-mod-hidden"),this._drag.start(r,a).then((()=>{this._drag=null,i.classList.remove("lm-mod-hidden")}))}}!function(e){e.Overlay=class{constructor(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.style.position="absolute",this.node.style.contain="strict"}show(e){let t=this.node.style;t.top=`${e.top}px`,t.left=`${e.left}px`,t.right=`${e.right}px`,t.bottom=`${e.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"))}hide(e){if(!this._hidden)return e<=0?(clearTimeout(this._timer),this._timer=-1,this._hidden=!0,void this.node.classList.add("lm-mod-hidden")):void(-1===this._timer&&(this._timer=window.setTimeout((()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden")}),e)))}};class t{createTabBar(e){let t=new q({document:e});return t.addClass("lm-DockPanel-tabBar"),t}createHandle(){let e=document.createElement("div");return e.className="lm-DockPanel-handle",e}}e.Renderer=t,e.defaultRenderer=new t}(ie||(ie={})),function(e){e.GOLDEN_RATIO=.618,e.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},e.LayoutModified=new o.ConflatableMessage("layout-modified"),e.isGeneratedTabBarProperty=new l({name:"isGeneratedTabBar",create:()=>!1}),e.createSingleDocumentConfig=function(e){if(e.isEmpty)return{main:null};let t=Array.from(e.widgets()),n=e.selectedWidgets().next().value,i=n?t.indexOf(n):-1;return{main:{type:"tab-area",widgets:t,currentIndex:i}}},e.findDropTarget=function(e,t,n,i){if(!a.ElementExt.hitTest(e.node,t,n))return{zone:"invalid",target:null};let r=e.layout;if(r.isEmpty)return{zone:"root-all",target:null};if("multiple-document"===e.mode){let r=e.node.getBoundingClientRect(),s=t-r.left+1,a=n-r.top+1,o=r.right-t,l=r.bottom-n;switch(Math.min(a,o,l,s)){case a:if(a<i.top)return{zone:"root-top",target:null};break;case o:if(o<i.right)return{zone:"root-right",target:null};break;case l:if(l<i.bottom)return{zone:"root-bottom",target:null};break;case s:if(s<i.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let s=r.hitTestTabAreas(t,n);if(!s)return{zone:"invalid",target:null};if("single-document"===e.mode)return{zone:"widget-all",target:s};let o=s.x-s.left+1,l=s.y-s.top+1,c=s.left+s.width-s.x,u=s.top+s.height-s.y;if(l<s.tabBar.node.getBoundingClientRect().height)return{zone:"widget-tab",target:s};let h,d=Math.round(s.width/3),f=Math.round(s.height/3);if(o>d&&c>d&&l>f&&u>f)return{zone:"widget-all",target:s};switch(o/=d,l/=f,c/=d,u/=f,Math.min(o,l,c,u)){case o:h="widget-left";break;case l:h="widget-top";break;case c:h="widget-right";break;case u:h="widget-bottom";break;default:throw"unreachable"}return{zone:h,target:s}},e.getDropRef=function(e){return 0===e.titles.length?null:e.currentTitle?e.currentTitle.owner:e.titles[e.titles.length-1].owner}}(J||(J={}));class re{constructor(){this._counter=0,this._widgets=[],this._activeWidget=null,this._currentWidget=null,this._numbers=new Map,this._nodes=new Map,this._activeChanged=new f.Signal(this),this._currentChanged=new f.Signal(this)}dispose(){if(!(this._counter<0)){this._counter=-1,f.Signal.clearData(this);for(const e of this._widgets)e.node.removeEventListener("focus",this,!0),e.node.removeEventListener("blur",this,!0);this._activeWidget=null,this._currentWidget=null,this._nodes.clear(),this._numbers.clear(),this._widgets.length=0}}get currentChanged(){return this._currentChanged}get activeChanged(){return this._activeChanged}get isDisposed(){return this._counter<0}get currentWidget(){return this._currentWidget}get activeWidget(){return this._activeWidget}get widgets(){return this._widgets}focusNumber(e){let t=this._numbers.get(e);return void 0===t?-1:t}has(e){return this._numbers.has(e)}add(e){if(this._numbers.has(e))return;let t=e.node.contains(document.activeElement),n=t?this._counter++:-1;this._widgets.push(e),this._numbers.set(e,n),this._nodes.set(e.node,e),e.node.addEventListener("focus",this,!0),e.node.addEventListener("blur",this,!0),e.disposed.connect(this._onWidgetDisposed,this),t&&this._setWidgets(e,e)}remove(e){if(!this._numbers.has(e))return;if(e.disposed.disconnect(this._onWidgetDisposed,this),e.node.removeEventListener("focus",this,!0),e.node.removeEventListener("blur",this,!0),r.ArrayExt.removeFirstOf(this._widgets,e),this._nodes.delete(e.node),this._numbers.delete(e),this._currentWidget!==e)return;let t=this._widgets.filter((e=>-1!==this._numbers.get(e))),n=(0,r.max)(t,((e,t)=>this._numbers.get(e)-this._numbers.get(t)))||null;this._setWidgets(n,null)}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e)}}_setWidgets(e,t){let n=this._currentWidget;this._currentWidget=e;let i=this._activeWidget;this._activeWidget=t,n!==e&&this._currentChanged.emit({oldValue:n,newValue:e}),i!==t&&this._activeChanged.emit({oldValue:i,newValue:t})}_evtFocus(e){let t=this._nodes.get(e.currentTarget);t!==this._currentWidget&&this._numbers.set(t,this._counter++),this._setWidgets(t,t)}_evtBlur(e){let t=this._nodes.get(e.currentTarget),n=e.relatedTarget;n&&(t.node.contains(n)||(0,r.find)(this._widgets,(e=>e.node.contains(n))))||this._setWidgets(this._currentWidget,null)}_onWidgetDisposed(e){this.remove(e)}}class se extends M{constructor(e={}){super(e),this._dirty=!1,this._rowSpacing=4,this._columnSpacing=4,this._items=[],this._rowStarts=[],this._columnStarts=[],this._rowSizers=[new v],this._columnSizers=[new v],this._box=null,void 0!==e.rowCount&&K.reallocSizers(this._rowSizers,e.rowCount),void 0!==e.columnCount&&K.reallocSizers(this._columnSizers,e.columnCount),void 0!==e.rowSpacing&&(this._rowSpacing=K.clampValue(e.rowSpacing)),void 0!==e.columnSpacing&&(this._columnSpacing=K.clampValue(e.columnSpacing))}dispose(){for(const e of this._items){let t=e.widget;e.dispose(),t.dispose()}this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,super.dispose()}get rowCount(){return this._rowSizers.length}set rowCount(e){e!==this.rowCount&&(K.reallocSizers(this._rowSizers,e),this.parent&&this.parent.fit())}get columnCount(){return this._columnSizers.length}set columnCount(e){e!==this.columnCount&&(K.reallocSizers(this._columnSizers,e),this.parent&&this.parent.fit())}get rowSpacing(){return this._rowSpacing}set rowSpacing(e){e=K.clampValue(e),this._rowSpacing!==e&&(this._rowSpacing=e,this.parent&&this.parent.fit())}get columnSpacing(){return this._columnSpacing}set columnSpacing(e){e=K.clampValue(e),this._columnSpacing!==e&&(this._columnSpacing=e,this.parent&&this.parent.fit())}rowStretch(e){let t=this._rowSizers[e];return t?t.stretch:-1}setRowStretch(e,t){let n=this._rowSizers[e];n&&(t=K.clampValue(t),n.stretch!==t&&(n.stretch=t,this.parent&&this.parent.update()))}columnStretch(e){let t=this._columnSizers[e];return t?t.stretch:-1}setColumnStretch(e,t){let n=this._columnSizers[e];n&&(t=K.clampValue(t),n.stretch!==t&&(n.stretch=t,this.parent&&this.parent.update()))}*[Symbol.iterator](){for(const e of this._items)yield e.widget}addWidget(e){-1===r.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e))&&(this._items.push(new w(e)),this.parent&&this.attachWidget(e))}removeWidget(e){let t=r.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e));if(-1===t)return;let n=r.ArrayExt.removeAt(this._items,t);this.parent&&this.detachWidget(e),n.dispose()}init(){super.init();for(const e of this)this.attachWidget(e)}attachWidget(e){this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.AfterAttach),this.parent.fit()}detachWidget(e){this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.AfterDetach),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){for(let e=0,t=this.rowCount;e<t;++e)this._rowSizers[e].minSize=0;for(let e=0,t=this.columnCount;e<t;++e)this._columnSizers[e].minSize=0;let e=this._items.filter((e=>!e.isHidden));for(let t=0,n=e.length;t<n;++t)e[t].fit();let t=this.rowCount-1,n=this.columnCount-1;e.sort(K.rowSpanCmp);for(let n=0,i=e.length;n<i;++n){let i=e[n],r=se.getCellConfig(i.widget),s=Math.min(r.row,t),a=Math.min(r.row+r.rowSpan-1,t);K.distributeMin(this._rowSizers,s,a,i.minHeight)}e.sort(K.columnSpanCmp);for(let t=0,i=e.length;t<i;++t){let i=e[t],r=se.getCellConfig(i.widget),s=Math.min(r.column,n),a=Math.min(r.column+r.columnSpan-1,n);K.distributeMin(this._columnSizers,s,a,i.minWidth)}if("set-no-constraint"===this.fitPolicy)return void o.MessageLoop.sendMessage(this.parent,x.Msg.UpdateRequest);let i=t*this._rowSpacing,r=n*this._columnSpacing;for(let e=0,t=this.rowCount;e<t;++e)i+=this._rowSizers[e].minSize;for(let e=0,t=this.columnCount;e<t;++e)r+=this._columnSizers[e].minSize;let s=this._box=a.ElementExt.boxSizing(this.parent.node);r+=s.horizontalSum,i+=s.verticalSum;let l=this.parent.node.style;l.minWidth=`${r}px`,l.minHeight=`${i}px`,this._dirty=!0,this.parent.parent&&o.MessageLoop.sendMessage(this.parent.parent,x.Msg.FitRequest),this._dirty&&o.MessageLoop.sendMessage(this.parent,x.Msg.UpdateRequest)}_update(e,t){this._dirty=!1,e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));let n=this._box.paddingTop,i=this._box.paddingLeft,r=e-this._box.horizontalSum,s=t-this._box.verticalSum,o=this.rowCount-1,l=this.columnCount-1,u=o*this._rowSpacing,h=l*this._columnSpacing;c.calc(this._rowSizers,Math.max(0,s-u)),c.calc(this._columnSizers,Math.max(0,r-h));for(let e=0,t=n,i=this.rowCount;e<i;++e)this._rowStarts[e]=t,t+=this._rowSizers[e].size+this._rowSpacing;for(let e=0,t=i,n=this.columnCount;e<n;++e)this._columnStarts[e]=t,t+=this._columnSizers[e].size+this._columnSpacing;for(let e=0,t=this._items.length;e<t;++e){let t=this._items[e];if(t.isHidden)continue;let n=se.getCellConfig(t.widget),i=Math.min(n.row,o),r=Math.min(n.column,l),s=Math.min(n.row+n.rowSpan-1,o),a=Math.min(n.column+n.columnSpan-1,l),c=this._columnStarts[r],u=this._rowStarts[i],h=this._columnStarts[a]+this._columnSizers[a].size-c,d=this._rowStarts[s]+this._rowSizers[s].size-u;t.update(c,u,h,d)}}}!function(e){e.getCellConfig=function(e){return K.cellConfigProperty.get(e)},e.setCellConfig=function(e,t){K.cellConfigProperty.set(e,K.normalizeConfig(t))}}(se||(se={})),function(e){e.cellConfigProperty=new l({name:"cellConfig",create:()=>({row:0,column:0,rowSpan:1,columnSpan:1}),changed:function(e){e.parent&&e.parent.layout instanceof se&&e.parent.fit()}}),e.normalizeConfig=function(e){return{row:Math.max(0,Math.floor(e.row||0)),column:Math.max(0,Math.floor(e.column||0)),rowSpan:Math.max(1,Math.floor(e.rowSpan||0)),columnSpan:Math.max(1,Math.floor(e.columnSpan||0))}},e.clampValue=function(e){return Math.max(0,Math.floor(e))},e.rowSpanCmp=function(t,n){let i=e.cellConfigProperty.get(t.widget),r=e.cellConfigProperty.get(n.widget);return i.rowSpan-r.rowSpan},e.columnSpanCmp=function(t,n){let i=e.cellConfigProperty.get(t.widget),r=e.cellConfigProperty.get(n.widget);return i.columnSpan-r.columnSpan},e.reallocSizers=function(e,t){for(t=Math.max(1,Math.floor(t));e.length<t;)e.push(new v);e.length>t&&(e.length=t)},e.distributeMin=function(e,t,n,i){if(n<t)return;if(t===n){let n=e[t];return void(n.minSize=Math.max(n.minSize,i))}let r=0;for(let i=t;i<=n;++i)r+=e[i].minSize;if(r>=i)return;let s=(i-r)/(n-t+1);for(let i=t;i<=n;++i)e[i].minSize+=s}}(K||(K={}));class ae extends x{constructor(e={}){super({node:Z.createNode()}),this._activeIndex=-1,this._tabFocusIndex=0,this._menus=[],this._childMenu=null,this._overflowMenu=null,this._menuItemSizes=[],this._overflowIndex=-1,this.addClass("lm-MenuBar"),this.setFlag(x.Flag.DisallowLayout),this.renderer=e.renderer||ae.defaultRenderer,this._forceItemsPosition=e.forceItemsPosition||{forceX:!0,forceY:!0},this._overflowMenuOptions=e.overflowMenuOptions||{isVisible:!0}}dispose(){this._closeChildMenu(),this._menus.length=0,super.dispose()}get childMenu(){return this._childMenu}get overflowIndex(){return this._overflowIndex}get overflowMenu(){return this._overflowMenu}get contentNode(){return this.node.getElementsByClassName("lm-MenuBar-content")[0]}get activeMenu(){return this._menus[this._activeIndex]||null}set activeMenu(e){this.activeIndex=e?this._menus.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._menus.length)&&(e=-1),e>-1&&0===this._menus[e].items.length&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this.update())}get menus(){return this._menus}openActiveMenu(){-1!==this._activeIndex&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))}addMenu(e,t=!0){this.insertMenu(this._menus.length,e,t)}insertMenu(e,t,n=!0){this._closeChildMenu();let i=this._menus.indexOf(t),s=Math.max(0,Math.min(e,this._menus.length));if(-1===i)return r.ArrayExt.insert(this._menus,s,t),t.addClass("lm-MenuBar-menu"),t.aboutToClose.connect(this._onMenuAboutToClose,this),t.menuRequested.connect(this._onMenuMenuRequested,this),t.title.changed.connect(this._onTitleChanged,this),void(n&&this.update());s===this._menus.length&&s--,i!==s&&(r.ArrayExt.move(this._menus,i,s),n&&this.update())}removeMenu(e,t=!0){this.removeMenuAt(this._menus.indexOf(e),t)}removeMenuAt(e,t=!0){this._closeChildMenu();let n=r.ArrayExt.removeAt(this._menus,e);n&&(n.aboutToClose.disconnect(this._onMenuAboutToClose,this),n.menuRequested.disconnect(this._onMenuMenuRequested,this),n.title.changed.disconnect(this._onTitleChanged,this),n.removeClass("lm-MenuBar-menu"),t&&this.update())}clearMenus(){if(0!==this._menus.length){this._closeChildMenu();for(let e of this._menus)e.aboutToClose.disconnect(this._onMenuAboutToClose,this),e.menuRequested.disconnect(this._onMenuMenuRequested,this),e.title.changed.disconnect(this._onTitleChanged,this),e.removeClass("lm-MenuBar-menu");this._menus.length=0,this.update()}}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"focusout":this._evtFocusOut(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("focusout",this),this.node.addEventListener("contextmenu",this)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("focusout",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()}onActivateRequest(e){this.isAttached&&this._focusItemAt(0)}onResize(e){this.update(),super.onResize(e)}onUpdateRequest(e){var t;let n=this._menus,i=this.renderer,r=this._activeIndex,s=this._tabFocusIndex>=0&&this._tabFocusIndex<n.length?this._tabFocusIndex:0,a=this._overflowIndex>-1?this._overflowIndex:n.length,o=0,l=!1;a=null!==this._overflowMenu?a-1:a;let c=new Array(a);for(let e=0;e<a;++e)c[e]=i.renderItem({title:n[e].title,active:e===r,tabbable:e===s,disabled:0===n[e].items.length,onfocus:()=>{this._tabFocusIndex=e,this.activeIndex=e}}),o+=this._menuItemSizes[e],n[e].title.label===this._overflowMenuOptions.title&&(l=!0,a--);if(this._overflowMenuOptions.isVisible)if(this._overflowIndex>-1&&!l){if(null===this._overflowMenu){const e=null!==(t=this._overflowMenuOptions.title)&&void 0!==t?t:"...";this._overflowMenu=new W({commands:new m.CommandRegistry}),this._overflowMenu.title.label=e,this._overflowMenu.title.mnemonic=0,this.addMenu(this._overflowMenu,!1)}for(let e=n.length-2;e>=a;e--){const t=this.menus[e];t.title.mnemonic=0,this._overflowMenu.insertItem(0,{type:"submenu",submenu:t}),this.removeMenu(t,!1)}c[a]=i.renderItem({title:this._overflowMenu.title,active:a===r&&0!==n[a].items.length,tabbable:a===s,disabled:0===n[a].items.length,onfocus:()=>{this._tabFocusIndex=a,this.activeIndex=a}}),a++}else if(null!==this._overflowMenu){let e=this._overflowMenu.items,t=this.node.offsetWidth,r=this._overflowMenu.items.length;for(let l=0;l<r;++l){let r=n.length-1-l;if(t-o>this._menuItemSizes[r]){let t=e[0].submenu;this._overflowMenu.removeItemAt(0),this.insertMenu(a,t,!1),c[a]=i.renderItem({title:t.title,active:!1,tabbable:a===s,disabled:0===n[a].items.length,onfocus:()=>{this._tabFocusIndex=a,this.activeIndex=a}}),a++}}0===this._overflowMenu.items.length&&(this.removeMenu(this._overflowMenu,!1),c.pop(),this._overflowMenu=null,this._overflowIndex=-1)}_.VirtualDOM.render(c,this.contentNode),this._updateOverflowIndex()}_updateOverflowIndex(){if(!this._overflowMenuOptions.isVisible)return;const e=this.contentNode.childNodes;let t=this.node.offsetWidth,n=0,i=-1,r=e.length;if(0==this._menuItemSizes.length)for(let s=0;s<r;s++){let r=e[s];n+=r.offsetWidth,this._menuItemSizes.push(r.offsetWidth),n>t&&-1===i&&(i=s)}else for(let e=0;e<this._menuItemSizes.length;e++)if(n+=this._menuItemSizes[e],n>t){i=e;break}this._overflowIndex=i}_evtKeyDown(e){let t=e.keyCode;if(9===t)return void(this.activeIndex=-1);if(e.preventDefault(),e.stopPropagation(),13===t||32===t||38===t||40===t){if(this.activeIndex=this._tabFocusIndex,this.activeIndex!==this._tabFocusIndex)return;return void this.openActiveMenu()}if(27===t)return this._closeChildMenu(),void this._focusItemAt(this.activeIndex);if(37===t||39===t){let e=37===t?-1:1,n=this._tabFocusIndex+e,i=this._menus.length;for(let t=0;t<i;t++){let r=(i+n+e*t)%i;if(this._menus[r].items.length)return void this._focusItemAt(r)}return}let n=(0,y.mM)().keyForKeydownEvent(e);if(!n)return;let i=this._activeIndex+1,r=Z.findMnemonic(this._menus,n,i);-1===r.index||r.multiple?-1!==r.index?(this.activeIndex=r.index,this._focusItemAt(this.activeIndex)):-1!==r.auto&&(this.activeIndex=r.auto,this._focusItemAt(this.activeIndex)):(this.activeIndex=r.index,this.openActiveMenu())}_evtMouseDown(e){if(!a.ElementExt.hitTest(this.node,e.clientX,e.clientY))return;e.stopPropagation(),e.stopImmediatePropagation();let t=r.ArrayExt.findFirstIndex(this.contentNode.children,(t=>a.ElementExt.hitTest(t,e.clientX,e.clientY)));if(-1!==t){if(0===e.button)if(this._childMenu)this._closeChildMenu(),this.activeIndex=t;else{e.preventDefault();const n=this._positionForMenu(t);W.saveWindowData(),this.activeIndex=t,this._openChildMenu(n)}}else this._closeChildMenu()}_evtMouseMove(e){let t=r.ArrayExt.findFirstIndex(this.contentNode.children,(t=>a.ElementExt.hitTest(t,e.clientX,e.clientY)));if(t===this._activeIndex)return;if(-1===t&&this._childMenu)return;const n=t>=0&&this._childMenu?this._positionForMenu(t):null;W.saveWindowData(),this.activeIndex=t,n&&this._openChildMenu(n)}_positionForMenu(e){let t=this.contentNode.children[e],{left:n,bottom:i}=t.getBoundingClientRect();return{top:i,left:n}}_evtFocusOut(e){this._childMenu||this.node.contains(e.relatedTarget)||(this.activeIndex=-1)}_focusItemAt(e){const t=this.contentNode.childNodes[e];t&&t.focus()}_openChildMenu(e={}){let t=this.activeMenu;if(!t)return void this._closeChildMenu();let n=this._childMenu;if(n===t)return;this._childMenu=t,n?n.close():document.addEventListener("mousedown",this,!0),this._tabFocusIndex=this.activeIndex,o.MessageLoop.sendMessage(this,x.Msg.UpdateRequest);let{left:i,top:r}=e;void 0!==i&&void 0!==r||({left:i,top:r}=this._positionForMenu(this._activeIndex)),n||this.addClass("lm-mod-active"),t.items.length>0&&t.open(i,r,this._forceItemsPosition)}_closeChildMenu(){if(!this._childMenu)return;this.removeClass("lm-mod-active"),document.removeEventListener("mousedown",this,!0);let e=this._childMenu;this._childMenu=null,e.close(),this.activeIndex=-1}_onMenuAboutToClose(e){e===this._childMenu&&(this.removeClass("lm-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)}_onMenuMenuRequested(e,t){if(e!==this._childMenu)return;let n=this._activeIndex,i=this._menus.length;switch(t){case"next":this.activeIndex=n===i-1?0:n+1;break;case"previous":this.activeIndex=0===n?i-1:n-1}this.openActiveMenu()}_onTitleChanged(){this.update()}}!function(e){class t{renderItem(e){let t=this.createItemClass(e),n=this.createItemDataset(e),i=this.createItemARIA(e);return _.h.li({className:t,dataset:n,...e.disabled?{}:{tabindex:e.tabbable?"0":"-1"},onfocus:e.onfocus,...i},this.renderIcon(e),this.renderLabel(e))}renderIcon(e){let t=this.createIconClass(e);return _.h.div({className:t},e.title.icon,e.title.iconLabel)}renderLabel(e){let t=this.formatLabel(e);return _.h.div({className:"lm-MenuBar-itemLabel"},t)}createItemClass(e){let t="lm-MenuBar-item";return e.title.className&&(t+=` ${e.title.className}`),e.active&&!e.disabled&&(t+=" lm-mod-active"),t}createItemDataset(e){return e.title.dataset}createItemARIA(e){return{role:"menuitem","aria-haspopup":"true","aria-disabled":e.disabled?"true":"false"}}createIconClass(e){let t="lm-MenuBar-itemIcon",n=e.title.iconClass;return n?`${t} ${n}`:t}formatLabel(e){let{label:t,mnemonic:n}=e.title;if(n<0||n>=t.length)return t;let i=t.slice(0,n),r=t.slice(n+1),s=t[n];return[i,_.h.span({className:"lm-MenuBar-itemMnemonic"},s),r]}}e.Renderer=t,e.defaultRenderer=new t}(ae||(ae={})),function(e){e.createNode=function(){let e=document.createElement("div"),t=document.createElement("ul");return t.className="lm-MenuBar-content",e.appendChild(t),t.setAttribute("role","menubar"),e},e.findMnemonic=function(e,t,n){let i=-1,r=-1,s=!1,a=t.toUpperCase();for(let t=0,o=e.length;t<o;++t){let l=(t+n)%o,c=e[l].title;if(0===c.label.length)continue;let u=c.mnemonic;u>=0&&u<c.label.length?c.label[u].toUpperCase()===a&&(-1===i?i=l:s=!0):-1===r&&c.label[0].toUpperCase()===a&&(r=l)}return{index:i,multiple:s,auto:r}}}(Z||(Z={}));class oe extends x{constructor(e={}){super({node:Q.createNode()}),this._onRepeat=()=>{if(this._repeatTimer=-1,!this._pressData)return;let e=this._pressData.part;if("thumb"===e)return;this._repeatTimer=window.setTimeout(this._onRepeat,20);let t=this._pressData.mouseX,n=this._pressData.mouseY;if("decrement"!==e)if("increment"!==e){if("track"===e){if(!a.ElementExt.hitTest(this.trackNode,t,n))return;let e=this.thumbNode;if(a.ElementExt.hitTest(e,t,n))return;let i,r=e.getBoundingClientRect();return i="horizontal"===this._orientation?t<r.left?"decrement":"increment":n<r.top?"decrement":"increment",void this._pageRequested.emit(i)}}else{if(!a.ElementExt.hitTest(this.incrementNode,t,n))return;this._stepRequested.emit("increment")}else{if(!a.ElementExt.hitTest(this.decrementNode,t,n))return;this._stepRequested.emit("decrement")}},this._value=0,this._page=10,this._maximum=100,this._repeatTimer=-1,this._pressData=null,this._thumbMoved=new f.Signal(this),this._stepRequested=new f.Signal(this),this._pageRequested=new f.Signal(this),this.addClass("lm-ScrollBar"),this.setFlag(x.Flag.DisallowLayout),this._orientation=e.orientation||"vertical",this.dataset.orientation=this._orientation,void 0!==e.maximum&&(this._maximum=Math.max(0,e.maximum)),void 0!==e.page&&(this._page=Math.max(0,e.page)),void 0!==e.value&&(this._value=Math.max(0,Math.min(e.value,this._maximum)))}get thumbMoved(){return this._thumbMoved}get stepRequested(){return this._stepRequested}get pageRequested(){return this._pageRequested}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.update())}get value(){return this._value}set value(e){e=Math.max(0,Math.min(e,this._maximum)),this._value!==e&&(this._value=e,this.update())}get page(){return this._page}set page(e){e=Math.max(0,e),this._page!==e&&(this._page=e,this.update())}get maximum(){return this._maximum}set maximum(e){e=Math.max(0,e),this._maximum!==e&&(this._maximum=e,this._value=Math.min(this._value,e),this.update())}get decrementNode(){return this.node.getElementsByClassName("lm-ScrollBar-button")[0]}get incrementNode(){return this.node.getElementsByClassName("lm-ScrollBar-button")[1]}get trackNode(){return this.node.getElementsByClassName("lm-ScrollBar-track")[0]}get thumbNode(){return this.node.getElementsByClassName("lm-ScrollBar-thumb")[0]}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("mousedown",this),this.update()}onAfterDetach(e){this.node.removeEventListener("mousedown",this),this._releaseMouse()}onUpdateRequest(e){let t=100*this._value/this._maximum,n=100*this._page/(this._page+this._maximum);t=Math.max(0,Math.min(t,100)),n=Math.max(0,Math.min(n,100));let i=this.thumbNode.style;"horizontal"===this._orientation?(i.top="",i.height="",i.left=`${t}%`,i.width=`${n}%`,i.transform=`translate(${-t}%, 0%)`):(i.left="",i.width="",i.top=`${t}%`,i.height=`${n}%`,i.transform=`translate(0%, ${-t}%)`)}_evtKeyDown(e){if(e.preventDefault(),e.stopPropagation(),27!==e.keyCode)return;let t=this._pressData?this._pressData.value:-1;this._releaseMouse(),-1!==t&&this._moveThumb(t)}_evtMouseDown(e){if(0!==e.button)return;if(this.activate(),this._pressData)return;let t=Q.findPart(this,e.target);if(!t)return;e.preventDefault(),e.stopPropagation();let n=p.X.overrideCursor("default");if(this._pressData={part:t,override:n,delta:-1,value:-1,mouseX:e.clientX,mouseY:e.clientY},document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0),"thumb"===t){let t=this.thumbNode,n=t.getBoundingClientRect();return"horizontal"===this._orientation?this._pressData.delta=e.clientX-n.left:this._pressData.delta=e.clientY-n.top,t.classList.add("lm-mod-active"),void(this._pressData.value=this._value)}if("track"===t){let t,n=this.thumbNode.getBoundingClientRect();return t="horizontal"===this._orientation?e.clientX<n.left?"decrement":"increment":e.clientY<n.top?"decrement":"increment",this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._pageRequested.emit(t)}return"decrement"===t?(this.decrementNode.classList.add("lm-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._stepRequested.emit("decrement")):"increment"===t?(this.incrementNode.classList.add("lm-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._stepRequested.emit("increment")):void 0}_evtMouseMove(e){if(!this._pressData)return;if(e.preventDefault(),e.stopPropagation(),this._pressData.mouseX=e.clientX,this._pressData.mouseY=e.clientY,"thumb"!==this._pressData.part)return;let t,n,i=this.thumbNode.getBoundingClientRect(),r=this.trackNode.getBoundingClientRect();"horizontal"===this._orientation?(t=e.clientX-r.left-this._pressData.delta,n=r.width-i.width):(t=e.clientY-r.top-this._pressData.delta,n=r.height-i.height);let s=0===n?0:t*this._maximum/n;this._moveThumb(s)}_evtMouseUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){this._pressData&&(clearTimeout(this._repeatTimer),this._repeatTimer=-1,this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),this.thumbNode.classList.remove("lm-mod-active"),this.decrementNode.classList.remove("lm-mod-active"),this.incrementNode.classList.remove("lm-mod-active"))}_moveThumb(e){e=Math.max(0,Math.min(e,this._maximum)),this._value!==e&&(this._value=e,this.update(),this._thumbMoved.emit(e))}}!function(e){e.createNode=function(){let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");return t.className="lm-ScrollBar-button",n.className="lm-ScrollBar-button",t.dataset.action="decrement",n.dataset.action="increment",i.className="lm-ScrollBar-track",r.className="lm-ScrollBar-thumb",i.appendChild(r),e.appendChild(t),e.appendChild(i),e.appendChild(n),e},e.findPart=function(e,t){return e.thumbNode.contains(t)?"thumb":e.trackNode.contains(t)?"track":e.decrementNode.contains(t)?"decrement":e.incrementNode.contains(t)?"increment":null}}(Q||(Q={}));class le extends M{constructor(){super(...arguments),this._widget=null}dispose(){if(this._widget){let e=this._widget;this._widget=null,e.dispose()}super.dispose()}get widget(){return this._widget}set widget(e){e&&(e.parent=this.parent),this._widget!==e&&(this._widget&&this._widget.dispose(),this._widget=e,this.parent&&e&&this.attachWidget(e))}*[Symbol.iterator](){this._widget&&(yield this._widget)}removeWidget(e){this._widget===e&&(this._widget=null,this.parent&&this.detachWidget(e))}init(){super.init();for(const e of this)this.attachWidget(e)}attachWidget(e){this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.AfterAttach)}detachWidget(e){this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&o.MessageLoop.sendMessage(e,x.Msg.AfterDetach)}}class ce extends S{constructor(e={}){super(e),this._dirty=!1,this._items=[],this._box=null,this._hiddenMode=void 0!==e.hiddenMode?e.hiddenMode:x.HiddenMode.Display}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this._hiddenMode=e,this.widgets.length>1&&this.widgets.forEach((e=>{e.hiddenMode=this._hiddenMode})))}dispose(){for(const e of this._items)e.dispose();this._box=null,this._items.length=0,super.dispose()}attachWidget(e,t){this._hiddenMode===x.HiddenMode.Scale&&this._items.length>0?(1===this._items.length&&(this.widgets[0].hiddenMode=x.HiddenMode.Scale),t.hiddenMode=x.HiddenMode.Scale):t.hiddenMode=x.HiddenMode.Display,r.ArrayExt.insert(this._items,e,new w(t)),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,n){r.ArrayExt.move(this._items,e,t),this.parent.update()}detachWidget(e,t){let n=r.ArrayExt.removeAt(this._items,e);this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&o.MessageLoop.sendMessage(t,x.Msg.AfterDetach),n.widget.node.style.zIndex="",this._hiddenMode===x.HiddenMode.Scale&&(t.hiddenMode=x.HiddenMode.Display,1===this._items.length&&(this._items[0].widget.hiddenMode=x.HiddenMode.Display)),n.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){let e=0,t=0;for(let n=0,i=this._items.length;n<i;++n){let i=this._items[n];i.isHidden||(i.fit(),e=Math.max(e,i.minWidth),t=Math.max(t,i.minHeight))}let n=this._box=a.ElementExt.boxSizing(this.parent.node);e+=n.horizontalSum,t+=n.verticalSum;let i=this.parent.node.style;i.minWidth=`${e}px`,i.minHeight=`${t}px`,this._dirty=!0,this.parent.parent&&o.MessageLoop.sendMessage(this.parent.parent,x.Msg.FitRequest),this._dirty&&o.MessageLoop.sendMessage(this.parent,x.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let n=0;for(let e=0,t=this._items.length;e<t;++e)n+=+!this._items[e].isHidden;if(0===n)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));let i=this._box.paddingTop,r=this._box.paddingLeft,s=e-this._box.horizontalSum,o=t-this._box.verticalSum;for(let e=0,t=this._items.length;e<t;++e){let t=this._items[e];t.isHidden||(t.widget.node.style.zIndex=`${e}`,t.update(r,i,s,o))}}}class ue extends F{constructor(e={}){super({layout:ee.createLayout(e)}),this._widgetRemoved=new f.Signal(this),this.addClass("lm-StackedPanel")}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get widgetRemoved(){return this._widgetRemoved}onChildAdded(e){e.child.addClass("lm-StackedPanel-child")}onChildRemoved(e){e.child.removeClass("lm-StackedPanel-child"),this._widgetRemoved.emit(e.child)}}!function(e){e.createLayout=function(e){return e.layout||new ce}}(ee||(ee={}));class he extends x{constructor(e={}){super(),this._currentChanged=new f.Signal(this),this._addRequested=new f.Signal(this),this.addClass("lm-TabPanel"),this.tabBar=new q(e),this.tabBar.addClass("lm-TabPanel-tabBar"),this.stackedPanel=new ue,this.stackedPanel.addClass("lm-TabPanel-stackedPanel"),this.tabBar.tabMoved.connect(this._onTabMoved,this),this.tabBar.currentChanged.connect(this._onCurrentChanged,this),this.tabBar.tabCloseRequested.connect(this._onTabCloseRequested,this),this.tabBar.tabActivateRequested.connect(this._onTabActivateRequested,this),this.tabBar.addRequested.connect(this._onTabAddRequested,this),this.stackedPanel.widgetRemoved.connect(this._onWidgetRemoved,this),this._tabPlacement=e.tabPlacement||"top";let t=te.directionFromPlacement(this._tabPlacement),n=te.orientationFromPlacement(this._tabPlacement);this.tabBar.orientation=n,this.tabBar.dataset.placement=this._tabPlacement;let i=new H({direction:t,spacing:0});H.setStretch(this.tabBar,0),H.setStretch(this.stackedPanel,1),i.addWidget(this.tabBar),i.addWidget(this.stackedPanel),this.layout=i}get currentChanged(){return this._currentChanged}get currentIndex(){return this.tabBar.currentIndex}set currentIndex(e){this.tabBar.currentIndex=e}get currentWidget(){let e=this.tabBar.currentTitle;return e?e.owner:null}set currentWidget(e){this.tabBar.currentTitle=e?e.title:null}get tabsMovable(){return this.tabBar.tabsMovable}set tabsMovable(e){this.tabBar.tabsMovable=e}get addButtonEnabled(){return this.tabBar.addButtonEnabled}set addButtonEnabled(e){this.tabBar.addButtonEnabled=e}get tabPlacement(){return this._tabPlacement}set tabPlacement(e){if(this._tabPlacement===e)return;this._tabPlacement=e;let t=te.directionFromPlacement(e),n=te.orientationFromPlacement(e);this.tabBar.orientation=n,this.tabBar.dataset.placement=e,this.layout.direction=t}get addRequested(){return this._addRequested}get widgets(){return this.stackedPanel.widgets}addWidget(e){this.insertWidget(this.widgets.length,e)}insertWidget(e,t){t!==this.currentWidget&&t.hide(),this.stackedPanel.insertWidget(e,t),this.tabBar.insertTab(e,t.title),t.node.setAttribute("role","tabpanel");let n=this.tabBar.renderer;if(n instanceof q.Renderer){let e=n.createTabKey({title:t.title,current:!1,zIndex:0});t.node.setAttribute("aria-labelledby",e)}}_onCurrentChanged(e,t){let{previousIndex:n,previousTitle:i,currentIndex:r,currentTitle:s}=t,l=i?i.owner:null,c=s?s.owner:null;l&&l.hide(),c&&c.show(),this._currentChanged.emit({previousIndex:n,previousWidget:l,currentIndex:r,currentWidget:c}),(a.Platform.IS_EDGE||a.Platform.IS_IE)&&o.MessageLoop.flush()}_onTabAddRequested(e,t){this._addRequested.emit(e)}_onTabActivateRequested(e,t){t.title.owner.activate()}_onTabCloseRequested(e,t){t.title.owner.close()}_onTabMoved(e,t){this.stackedPanel.insertWidget(t.toIndex,t.title.owner)}_onWidgetRemoved(e,t){t.node.removeAttribute("role"),t.node.removeAttribute("aria-labelledby"),this.tabBar.removeTab(t.title)}}!function(e){e.orientationFromPlacement=function(e){return t[e]},e.directionFromPlacement=function(e){return n[e]};const t={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},n={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}}(te||(te={}))},8937:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=void 0;const a=n(2055),o=s(n(9163)),l=s(n(8435)),c=s(n(6731)),u=n(8435),h=n(2765),d=n(9460),f=n(1160),p=n(2739),m=n(7243),_=n(9023);Math.log10=Math.log10||function(e){return Math.log(e)/Math.LN10};const g=["em","ex","px"];class y extends a.WidgetView{initialize(){this.setElement(document.createElementNS(o.namespaces.svg,"g")),this.d3el=o.select(this.el),super.initialize.apply(this,arguments)}render(){this.d3el.style("display",this.model.get("visible")?"inline":"none"),this.parent=this.options.parent;const e=this.set_scale_promise(this.model.get("scale")),t=this.get_offset_promise();Promise.all([e,t]).then((()=>{this.create_listeners(),this.create_axis(),this.set_scales_range(),this.update_scales(),this.set_tick_values(),this.tickformat_changed(),this.append_axis()}))}create_listeners(){this.listenTo(this.model,"change:scale",((e,t)=>{this.update_scale(e.previous("scale"),t),this.axis.scale(this.axis_scale.scale),this.rescale_axis()})),this.listenTo(this.model,"change:tick_values",this.set_tick_values),this.listenTo(this.model,"change:tick_format",this.tickformat_changed),this.listenTo(this.model,"change:tick_labels",this.tick_labels_changed),this.listenTo(this.model,"change:num_ticks",this.set_tick_values),this.listenTo(this.model,"change:tick_rotate",this.apply_tick_styling),this.listenTo(this.model,"change:tick_style",this.apply_tick_styling),this.model.on_some_change(["label","label_color"],this.update_label,this),this.listenTo(this.model,"change:color",this.update_color),this.model.on_some_change(["grid_color","grid_lines"],this.update_grid_lines,this),this.listenTo(this.model,"change:label_location",this.update_label_location),this.listenTo(this.model,"change:label_offset",this.update_label_offset),this.listenTo(this.model,"change:visible",this.update_visibility),this.model.on_some_change(["side","orientation"],this.update_display,this),this.listenTo(this.model,"change:offset",this.update_offset),this.listenTo(this.parent,"margin_updated",this.parent_margin_updated)}update_offset(){this.get_offset_promise().then((()=>{this.set_scales_range(),this.update_offset_scale_domain(),this.g_axisline.attr("transform",this.get_axis_transform()),this.update_grid_lines()}))}update_display(){this.g_axisline.remove(),this.create_axis(),this.set_tick_values(),this.set_scales_range(),this.tickformat_changed(),this.append_axis()}set_tick_values(e){let t=[];const n=this.model.get("tick_values"),i=this.model.get("num_ticks");if(null!=n&&n.length>0)this.axis.tickValues(this.get_ticks_from_array_or_length(n));else if(null!=i)this.axis.tickValues(this.get_ticks_from_array_or_length());else if(d.isDateScale(this.axis_scale)){const e=this.width<500?5:void 0,t=this.axis_scale.scale;this.axis.tickValues(t.ticks(e))}else if(h.isOrdinalScale(this.axis_scale))this.axis.tickValues(this.axis_scale.scale.domain());else if(f.isLogScale(this.axis_scale)){let e,n;const i=this.axis_scale.scale,r=i.ticks(),s=Math.abs(Math.log10(i.domain()[1]/i.domain()[0]));if(s<2)this.axis.tickValues(r);else if(s<7){for(t=[],e=0;e<r.length;e++)n=Math.abs(Math.log10(r[e])%1),(Math.abs(n)<.001||Math.abs(n-1)<.001||Math.abs(n-.30103)<.001||Math.abs(n-.69897)<.001)&&t.push(r[e]);this.axis.tickValues(t)}else{t=[];const i=Math.round(s/10);for(e=0;e<r.length;e++)n=Math.abs(Math.log10(r[e])%i),(Math.abs(n)<.001||Math.abs(n-i)<.001)&&t.push(r[e]);this.axis.tickValues(t)}}else(p.isLinearScale(this.axis_scale)||_.isColorScale(this.axis_scale))&&this.axis.tickValues(this.axis_scale.scale.ticks());this.g_axisline&&(this.g_axisline.transition("set_tick_values").duration(!0===e?this.parent.model.get("animation_duration"):0).call(this.axis),this.apply_tick_styling())}tickformat_changed(){this.tick_format=this.generate_tick_formatter(),this.axis.tickFormat(this.tick_format),this.g_axisline&&this.g_axisline.call(this.axis),this.apply_tick_styling()}tick_labels_changed(){this.tickformat_changed()}apply_tick_styling(){if(this.g_axisline){const e=this.g_axisline.selectAll(".tick text");u.applyStyles(e,this.model.get("tick_style")),e.attr("transform",this.get_tick_transforms())}}get_tick_transforms(){return`rotate(${this.model.get("tick_rotate")})`}update_scales(){this.update_scale_domain(),this.update_offset_scale_domain()}update_scale_domain(){const e="vertical"===this.model.get("orientation"),t=e?this.parent.padded_range("y",this.axis_scale.model):this.parent.padded_range("x",this.axis_scale.model),n=e?this.parent.range("y"):this.parent.range("x");this.axis_scale.expand_domain(t,n),this.axis.scale(this.axis_scale.scale)}update_offset_scale_domain(){const e="vertical"===this.model.get("orientation");if(this.offset_scale){const t=e?this.parent.padded_range("x",this.offset_scale.model):this.parent.padded_range("y",this.offset_scale.model),n=e?this.parent.range("x"):this.parent.range("y");this.offset_scale.expand_domain(t,n)}}generate_tick_formatter(){const e=this.generate_default_tick_formatter(),t=this.model.get("tick_labels");return t&&Object.keys(t).length>0?n=>{let i=t[n];return void 0===i?e(n):i}:e}generate_default_tick_formatter(){if(d.isDateScale(this.axis_scale)||m.isDateColorScale(this.axis_scale))return this.model.get("tick_format")?o.utcFormat(this.model.get("tick_format")):this.guess_tick_format();if(h.isOrdinalScale(this.axis_scale)){const e=this.model.get("tick_format");return e?l.is_valid_time_format(e)?o.utcFormat(e):o.format(e):e=>e}return this.model.get("tick_format")?o.format(this.model.get("tick_format")):this.guess_tick_format()}set_scales_range(){const e="vertical"===this.model.get("orientation");this.axis_scale.set_range(e?[this.height,0]:[0,this.width]),this.offset_scale&&this.offset_scale.set_range(e?[0,this.width]:[this.height,0])}create_axis(){const e="vertical"===this.model.get("orientation"),t=this.model.get("side");this.axis=e?"right"===t?o.axisRight(this.axis_scale.scale):o.axisLeft(this.axis_scale.scale):"top"===t?o.axisTop(this.axis_scale.scale):o.axisBottom(this.axis_scale.scale)}append_axis(){this.update_scales(),this.g_axisline=this.d3el.append("g").attr("class","axis").attr("transform",this.get_axis_transform()).call(this.axis);const e=this.g_axisline.append("text").attr("class","axislabel").text(this.model.get("label"));u.applyStyles(e,this.get_text_styling()),u.applyAttrs(e,this.get_label_attributes()),this.update_grid_lines(),this.update_color(),this.apply_tick_styling(),this.update_label()}get_offset_promise(){let e=Promise.resolve();const t=this.model.get("offset"),n="vertical"===this.model.get("orientation");return void 0!==t.value&&null!==t.value?(void 0===t.scale?this.offset_scale=n?this.parent.scale_x:this.parent.scale_y:e=this.create_child_view(t.scale).then((e=>{this.offset_scale=e,(p.isLinearScale(this.offset_scale)||d.isDateScale(this.offset_scale)||f.isLogScale(this.offset_scale))&&this.offset_scale.scale.clamp(!0),this.offset_scale.on("domain_changed",(()=>{this.update_offset_scale_domain(),this.g_axisline.attr("transform",this.get_axis_transform()),this.update_grid_lines()}))})),this.offset_value=t.value):this.offset_scale=this.offset_value=void 0,e}highlight(){this.g_axisline.classed("axisbold",!0)}unhighlight(){this.g_axisline.classed("axisbold",!1)}get_basic_transform(){const e="vertical"===this.model.get("orientation"),t=this.model.get("side");return e?"right"===t?this.width:0:"top"===t?0:this.height}get_axis_transform(){return"vertical"===this.model.get("orientation")?"translate("+this.process_offset()+", 0)":"translate(0, "+this.process_offset()+")"}process_offset(){if(void 0===this.offset_scale||null===this.offset_scale)return this.get_basic_transform();{let e=this.offset_scale.scale(this.offset_value);return e=void 0===e?this.get_basic_transform():e,this.offset_scale.offset+e}}get_label_attributes(){let e=0;const t=this.model.get("label_location"),n=this.calculate_label_offset(),i="vertical"===this.model.get("orientation"),r=this.model.get("side");return i?("start"===t?e=-this.height:"middle"===t&&(e=-this.height/2),"right"===r?{transform:"rotate(-90)",x:e,y:n,dy:"1ex",dx:"0em"}:{transform:"rotate(-90)",x:e,y:n,dy:"0em",dx:"0em"}):("middle"===t?e=this.width/2:"end"===t&&(e=this.width),"top"===r?{x:e,y:n,dy:"0.75ex",dx:"0em",transform:""}:{x:e,y:n,dy:"0.25ex",dx:"0em",transform:""})}get_text_styling(){const e=this.model.get("label_location");return"start"===e?{"text-anchor":"start"}:"end"===e?{"text-anchor":"end"}:{"text-anchor":"middle"}}update_label(){this.g_axisline.select("text.axislabel").text(this.model.get("label")),this.d3el.selectAll(".axislabel").selectAll("text"),""!==this.model.get("label_color")&&null!==this.model.get("label_color")&&(this.g_axisline.select("text.axislabel").style("fill",this.model.get("label_color")),this.d3el.selectAll(".axislabel").selectAll("text").style("fill",this.model.get("label_color")))}update_label_location(){const e=this.g_axisline.select("text.axislabel");u.applyStyles(e,this.get_text_styling()),u.applyAttrs(e,this.get_label_attributes())}update_label_offset(e,t){this.label_offset=this.calculate_label_offset(),this.g_axisline.select("text.axislabel").attr("y",this.label_offset)}calculate_label_offset(){let e=this.model.get("label_offset");const t="vertical"===this.model.get("orientation"),n=this.model.get("side");e||(e=t?"4ex":"2em");let i=-1;for(let t=0;t<g.length&&-1===i;t++)i=e.indexOf(g[t]);if(-1===i)return e;if("top"===n||"left"===n){const t=-1*parseInt(e.substring(0,i));e=t+e.substring(i)}return e}update_grid_lines(e){const t=this.model.get("grid_lines"),n=this.model.get("side"),i=this.model.get("orientation"),r="vertical"!==i,s=!0===e?this.parent.model.get("animation_duration"):0;let a="vertical"===i?-this.width:-this.height,o=0;if(this.offset_scale){const e=this.offset_scale.scale(this.offset_value);"bottom"===n||"right"==n?(a=-e,o=r?this.height-e:this.width-e):(a+=e,o=-e)}"none"!==t?this.axis.tickSizeInner(a).tickSizeOuter(6):this.axis.tickSize(6),this.g_axisline.selectAll(".tick").classed("short","none"===t),this.g_axisline.transition("update_grid_lines").duration(s).call(this.axis).selectAll(".tick line").attr(r?"y1":"x1",this.offset_scale&&"none"!==t?o:null).style("stroke-dasharray","dashed"===t?"5, 5":null),this.apply_tick_styling(),this.model.get("grid_color")&&this.g_axisline.selectAll(".tick line").style("stroke",this.model.get("grid_color"))}update_color(){this.model.get("color")&&(this.d3el.selectAll(".tick").selectAll("text").style("fill",this.model.get("color")),this.d3el.selectAll(".domain").style("stroke",this.model.get("color")))}redraw_axisline(){this.update_scales();const e=!0;this.set_tick_values(e),this.tickformat_changed(),this.update_grid_lines(e)}rescale_axis(){this.set_scales_range(),this.update_axis_domain(),this.update_scales(),this.g_axisline.attr("transform",this.get_axis_transform()),this.g_axisline.call(this.axis);const e=this.g_axisline.select("text.axislabel");u.applyAttrs(e,this.get_label_attributes()),u.applyStyles(e,this.get_text_styling()),this.set_tick_values(),this.update_grid_lines(),this.apply_tick_styling()}update_axis_domain(){const e=this.vertical?this.parent.padded_range("y",this.axis_scale.model):this.parent.padded_range("x",this.axis_scale.model),t=this.vertical?this.parent.range("y"):this.parent.range("x");this.axis_scale.expand_domain(e,t),this.axis.scale(this.axis_scale.scale)}parent_margin_updated(){this.rescale_axis()}update_visibility(e,t){this.d3el.style("display",t?"inline":"none")}get_ticks_from_array_or_length(e){let t,n;const i=this.model.get("num_ticks");if(h.isOrdinalScale(this.axis_scale)&&(e=this.axis_scale.scale.domain()),null!=i&&i<2)return[];if(e)return null==i||null==i||e.length<=i?e:(t=Math.floor(e.length/(i-1)),c.range(0,e.length,t).map((t=>e[t])));const r=this.axis_scale.scale.domain(),s=this.axis_scale.scale.domain().length-1;return t=(r[s]-r[0])/(i-1),d.isDateScale(this.axis_scale)||m.isDateColorScale(this.axis_scale)?(r[0]=r[0].getTime(),r[s]=r[s].getTime(),n=r[s]+.5*t,c.range(r[0],n,t).map((e=>new Date(e)))):(n=r[s]+.5*t,c.range(r[0],n,t))}set_scale_promise(e){return this.axis_scale&&this.axis_scale.remove(),this.create_child_view(e).then((e=>{this.displayed.then((()=>{e.trigger("displayed")})),this.axis_scale=e,this.axis_scale.on("domain_changed",this.redraw_axisline,this),this.axis_scale.on("highlight_axis",this.highlight,this),this.axis_scale.on("unhighlight_axis",this.unhighlight,this)}))}update_scale(e,t){this.axis_scale.off(),this.set_scale_promise(t)}_get_digits(e){return 0===e?1:Math.floor(Math.log10(Math.abs(e)))+1}_replace_trailing_zeros(e){const t=e.search("e");return-1!=t?e.substring(0,t).replace(/(\.[0-9]*?)0+$/gi,"$1").replace(/\.$/,"")+e.substring(t):e.replace(/(\.[0-9]*?)0+$/gi,"$1").replace(/\.$/,"")}get_format_func(e){if(0===e)return e=>o.format("d")(Math.round(e));const t=-1==e?"":"."+e;return e=>{const n=o.format(t+"g")(e);if(n.replace(/-|\.|e/gi,"").length<6)return this._replace_trailing_zeros(n);if(""===t){let n=o.format(t+"e")(e);return n.length>=7&&(n=o.format(".6e")(e)),this._replace_trailing_zeros(n)}return this._replace_trailing_zeros(o.format(t+"e")(e))}}_linear_scale_precision(){if(!p.isLinearScale(this.axis_scale)&&!_.isColorScale(this.axis_scale))return-1;let e=this.axis.tickValues();if(1===e.length)return 1;const t=Math.abs(e[1]-e[0]),n=Math.max(Math.abs(e[0]),Math.abs(e[e.length-1])),i=this._get_digits(n),r=this._get_digits(t),s=Math.abs(i-r);return i>=0&&r>0?i<=6?0:Math.min(s,6)+1:r<=0?Math.min(Math.abs(r)+i,6)+1:void 0}linear_sc_format(){return this.get_format_func(this._linear_scale_precision())}date_sc_format(){if(!d.isDateScale(this.axis_scale))return;let e=this.axis.tickValues();const t=Math.abs(e[1]-e[0]),n=o.utcFormat(".%L"),i=o.utcFormat(":%S"),r=o.utcFormat("%I:%M"),s=o.utcFormat("%I %p"),a=o.utcFormat("%b %d"),l=o.utcFormat("%b %Y"),c=o.utcFormat("%Y");return e=>{let u=1e3;return 0===Math.floor(t/u)?o.utcSecond(e)<e?n(e):o.utcMinute(e)<e?i(e):r(e):0===Math.floor(t/(u*=60))?o.utcMinute(e)<e?i(e):r(e):0===Math.floor(t/(u*=60))?o.utcHour(e)<e?r(e):s(e):0===Math.floor(t/(u*=24))?o.utcDay(e)<e?s(e):a(e):0===Math.floor(t/(u*=27))||0===Math.floor(t/(u*=12))?o.utcMonth(e)<e?a(e):l(e):o.utcMonth(e)<e?a(e):o.utcYear(e)<e?l(e):c(e)}}log_sc_format(){return this.get_format_func(this._log_sc_precision())}_log_sc_precision(){if(!f.isLogScale(this.axis_scale))return-1;let e=this.axis.tickValues();return Math.abs(Math.log10(e[1]/e[0]))>=.301?-1:3}guess_tick_format(){return d.isDateScale(this.axis_scale)||m.isDateColorScale(this.axis_scale)?this.date_sc_format():p.isLinearScale(this.axis_scale)||_.isColorScale(this.axis_scale)?this.linear_sc_format():f.isLogScale(this.axis_scale)?this.log_sc_format():void 0}get width(){return this.parent.width-this.parent.margin.right-this.parent.margin.left}get height(){return this.parent.height-this.parent.margin.top-this.parent.margin.bottom}get margin(){return this.parent.margin}}t.Axis=y},3600:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorAxisModel=t.AxisModel=void 0;const a=s(n(2055)),o=s(n(7308)),l=n(5734);class c extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},a.WidgetModel.prototype.defaults()),{_model_name:"AxisModel",_view_name:"Axis",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:l.semver_range,_view_module_version:l.semver_range,orientation:"horizontal",side:null,label:"",grid_lines:"solid",tick_format:null,tick_labels:null,scale:void 0,num_ticks:null,tick_values:[],offset:{},label_location:"middle",label_color:null,grid_color:null,color:null,label_offset:null,visible:!0,tick_style:{},tick_rotate:0})}initialize(e,t){super.initialize(e,t),this.on("change:side",this.validate_orientation,this),this.on("change:orientation",this.validate_side,this),this.validate_orientation(),this.validate_side()}validate_side(){const e=this.get("orientation"),t=this.get("side");"vertical"===e?"left"!==t&&"right"!==t&&this.set("side","left"):"bottom"!==t&&"top"!==t&&this.set("side","bottom"),this.save_changes()}validate_orientation(){const e=this.get("side");e&&("left"===e||"right"===e?this.set("orientation","vertical"):this.set("orientation","horizontal"),this.save_changes())}}t.AxisModel=c,c.serializers=Object.assign(Object.assign({},a.WidgetModel.serializers),{scale:{deserialize:a.unpack_models},offset:{deserialize:a.unpack_models},tick_values:o.array_or_json_serializer}),t.ColorAxisModel=class extends c{defaults(){return Object.assign(Object.assign({},c.prototype.defaults()),{_model_name:"ColorAxisModel",_view_name:"ColorAxis"})}}},4878:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Bars=void 0;const o=s(n(9163)),l=n(8435),c=s(n(6731)),u=n(5321),h=n(8435),d=n(2765);class f extends u.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.apply(this);this.stackedScale=o.scaleBand(),this.groupedScale=o.scaleBand(),this.selected_indices=this.model.get("selected"),this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.display_el_classes=["bar","legendtext"],this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw(!1)}))}setScaleOrientation(){this.domScale=this.scales.x,this.rangeScale=this.scales.y}set_ranges(){const e=this.model.get("orientation");this.setScaleOrientation();const t="vertical"===e?"x":"y",n="vertical"===e?"y":"x";d.isOrdinalScale(this.domScale)?this.domScale.set_range(this.parent.padded_range(t,this.domScale.model),this.model.get("padding")):this.domScale.set_range(this.parent.padded_range(t,this.domScale.model)),this.rangeScale.set_range(this.parent.padded_range(n,this.rangeScale.model)),this.domOffset=0}set_positional_scales(){const e=this.scales.x,t=this.scales.y;this.listenTo(e,"domain_changed",(function(){this.model.dirty||this.draw(!0)})),this.listenTo(t,"domain_changed",(function(){this.model.dirty||this.draw(!0)}))}adjustOffset(){d.isOrdinalScale(this.domScale)?"center"===this.align?this.domOffset=0:"left"===this.align?this.domOffset=-this.stackedScale.bandwidth()/2:this.domOffset=this.stackedScale.bandwidth()/2:"center"===this.align?this.domOffset=-(this.stackedScale.bandwidth()/2).toFixed(2):"left"===this.align?this.domOffset=-this.stackedScale.bandwidth().toFixed(2):this.domOffset=0}create_listeners(){super.create_listeners.apply(this),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"data_updated",(()=>{this.draw(!0)})),this.listenTo(this.model,"change:colors",this.updateColors),this.listenTo(this.model,"change:opacities",this.updateColors),this.listenTo(this.model,"colors_updated",this.updateColors),this.listenTo(this.model,"change:type",this.updateType),this.listenTo(this.model,"change:align",this.relayout),this.listenTo(this.model,"change:padding",this.relayout),this.listenTo(this.model,"change:orientation",this.relayout),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.model.on_some_change(["stroke","fill","stroke_width"],this.apply_styles,this),this.listenTo(this.model,"change:selected",this.updateSelected),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")})),this.model.on_some_change(["label_display_format","label_font_style","label_display","label_display_vertical_offset","label_display_horizontal_offset"],this.draw,this)}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.reset_selection,this.event_listeners.element_clicked=this.bar_click_handler)}drawZeroLine(){this.setScaleOrientation();const e=this.rangeScale.scale;"vertical"===this.model.get("orientation")?this.d3el.select(".zeroLine").attr("x1",0).attr("x2",this.parent.plotarea_width).attr("y1",e(this.model.baseValue)).attr("y2",e(this.model.baseValue)):this.d3el.select(".zeroLine").attr("x1",e(this.model.baseValue)).attr("x2",e(this.model.baseValue)).attr("y1",0).attr("y2",this.parent.plotarea_height)}updateInternalScales(){this.stackedScale.rangeRound(this.set_x_range());const e=this.model.get("padding");this.stackedScale.paddingInner(e),this.stackedScale.paddingOuter(e/2),this.adjustOffset(),this.groupedScale.rangeRound([0,Math.round(100*this.stackedScale.bandwidth())/100])}relayout(){this.set_ranges(),this.compute_view_padding(),this.drawZeroLine(),this.updateInternalScales(),this.drawBars()}invert_point(e){if(void 0===e)return this.model.set("selected",null),void this.touch();const t=this.xPixels.map((t=>Math.abs(t-e)));this.model.set("selected",new Uint32Array([t.indexOf(o.min(t))])),this.touch()}selector_changed(e,t){if(void 0===e)return this.model.set("selected",null),this.touch(),[];const n=this.pixelCoords,i=new Uint32Array(c.range(n.length)).filter((e=>{const i=n[e];for(let e=0;e<i.length;e++)if(t(i[e]))return!0;return!1}));this.model.set("selected",i),this.touch()}updateSelected(){this.selected_indices=this.model.get("selected"),this.apply_styles()}draw(e){this.set_ranges();let t=this.d3el.selectAll(".bargroup").data(this.model.mark_data,(e=>e.key));if(d.isOrdinalScale(this.domScale))this.stackedScale.domain(this.domScale.scale.domain());else{const e=this.model.mark_data.map((e=>e.key));this.stackedScale.domain(e)}this.updateInternalScales(),this.model.mark_data.length>0&&this.groupedScale.domain(c.range(this.model.mark_data[0].values.length)).rangeRound([0,Math.round(100*this.stackedScale.bandwidth())/100]),t.exit().remove(),t=t.enter().append("g").attr("class","bargroup").merge(t),t.order(),t.on("click",((e,t)=>this.event_dispatcher("element_clicked",{data:e,index:t})));const n=t.selectAll(".bar").data((e=>e.values));if(n.enter().append("rect").attr("class","bar").attr("width",0).attr("height",0),n.exit().remove(),this.model.get("label_display")||t.selectAll("text").remove(),this.model.get("label_display")){const e=t.selectAll(".bar_label").data((e=>e.values));e.exit().remove(),e.enter().append("text").attr("class","bar_label").attr("width",0).attr("height",0)}this.drawBars(e),this.apply_styles(),this.d3el.selectAll(".zeroLine").remove(),this.d3el.append("g").append("line").attr("class","zeroLine"),this.drawZeroLine()}drawBars(e){const t=this.d3el.selectAll(".bargroup"),n=t.selectAll(".bar"),i=!0===e?this.parent.model.get("animation_duration"):0,r=this.domScale,s=this.rangeScale.scale,a="vertical"===this.orientation?"x":"y",l="vertical"===this.orientation?"y":"x",c="vertical"===this.orientation?"width":"height",u="vertical"===this.orientation?"height":"width";if(d.isOrdinalScale(r)){const e=o.max(this.parent.range(a));t.attr("transform",(t=>"vertical"===this.orientation?"translate("+((void 0!==r.scale(t.key)?r.scale(t.key):e)+this.domOffset)+", 0)":"translate(0, "+((void 0!==r.scale(t.key)?r.scale(t.key):e)+this.domOffset)+")"))}else t.attr("transform",(e=>"vertical"===this.orientation?"translate("+(r.scale(e.key)+this.domOffset)+", 0)":"translate(0, "+(r.scale(e.key)+this.domOffset)+")"));const h="stacked"===this.model.get("type");let f=1;h?(f=Math.max(1,this.stackedScale.bandwidth()),n.transition().duration(i).attr(a,0).attr(c,f.toFixed(2)).attr(l,(e=>s("y"===l?e.y1:e.y0))).attr(u,(e=>Math.abs(s(e.y0)-s(e.y1))))):(f=Math.max(1,this.groupedScale.bandwidth()),n.transition().duration(i).attr(a,((e,t)=>this.groupedScale(t))).attr(c,f.toFixed(2)).attr(l,(e=>o.min([s(e.y),s(this.model.baseValue)]))).attr(u,(e=>Math.abs(s(this.model.baseValue)-s(e.y))))),this.manageBarLabels(t,f,a,l),this.pixelCoords=this.model.mark_data.map((e=>{const t=e.key,n=r.scale(t)+this.domOffset;return e.values.map((e=>{const t={x:0,y:0,width:0,height:0};return t[a]=h?n:n+this.groupedScale(e.subIndex),t[l]=h?s("y"===l?e.y1:e.y0):o.min([s(e.y),s(this.model.baseValue)]),t[c]=f,t[u]=h?Math.abs(s(e.y0)-s(e.y1)):Math.abs(s(this.model.baseValue)-s(e.y)),[[t.x,t.x+t.width],[t.y,t.y+t.height]]}))})),this.xPixels=this.model.mark_data.map((e=>r.scale(e.key)+r.offset))}get offsetVertical(){return this.model.get("label_display_vertical_offset")}get offsetHorizontal(){return this.model.get("label_display_horizontal_offset")}get baseLine(){return this.model.get("base")}get orientation(){return this.model.get("orientation")}get align(){return this.model.get("align")}manageBarLabels(e,t,n,i){this.model.get("label_display")&&("stacked"===this.model.get("type")?this.stackedBarLabels(e,t,n,i):this.groupedBarLabels(e,t),this.updateBarLabelsStyle())}stackedBarLabels(e,t,n,i){e.selectAll(".bar_label").attr(n,(e=>0)).attr(i,(e=>e.y<=this.baseLine?this.rangeScale.scale(e.y0):this.rangeScale.scale(e.y1))).style("font-weight","400").style("text-anchor",(e=>this.styleBarLabelTextAnchor(e))).style("dominant-baseline",(e=>this.styleBarLabelDominantBaseline(e))).attr("transform",((e,n)=>this.transformBarLabel(e,this.offsetHorizontal,this.offsetVertical,t)))}groupedBarLabels(e,t){e.selectAll(".bar_label").attr("x",((e,t)=>"horizontal"===this.orientation?this.rangeScale.scale(e.y):this.groupedScale(t))).attr("y",((e,t)=>"horizontal"===this.orientation?this.groupedScale(t):this.rangeScale.scale(e.y))).style("font-weight","400").style("text-anchor",(e=>this.styleBarLabelTextAnchor(e))).style("dominant-baseline",(e=>this.styleBarLabelDominantBaseline(e))).attr("transform",(e=>this.transformBarLabel(e,this.offsetHorizontal,this.offsetVertical,t)))}transformBarLabel(e,t,n,i){return"horizontal"===this.orientation?e.y<=this.baseLine?`translate(${e.y0<=this.baseLine?0-n:0+n}, ${i/2+t})`:`translate(${e.y1<=this.baseLine?0-n:0+n}, ${i/2+t})`:e.y<=this.baseLine?`translate(${i/2+t},\n                ${e.y0<=this.baseLine?0-n:0+n})`:`translate(${i/2+t},\n                ${e.y1<=this.baseLine?0-n:0+n})`}styleBarLabelTextAnchor(e){return"horizontal"===this.orientation?e.y<=this.baseLine?"start":"end":"middle"}styleBarLabelDominantBaseline(e){return"horizontal"===this.orientation?"central":e.y<=this.baseLine?"text-after-edge":"text-before-edge"}updateBarLabelsStyle(){const e=this.model.get("label_display_format"),t=e?o.format(e):null;let n=this.d3el.selectAll(".bar_label").text(((e,n)=>t?t(e.y):null));const i=this.model.get("label_font_style");for(const e in i)n=n.style(e,i[e])}updateType(){this.model.update_domains(),this.draw()}updateColors(){const e=this.model.get("stroke");this.model.mark_data.length>0&&(this.model.yIs2d?this.d3el.selectAll(".bargroup").selectAll(".bar").style("fill",this.get_mark_color.bind(this)).style("stroke",e||this.get_mark_color.bind(this)).style("opacity",this.get_mark_opacity.bind(this)):this.d3el.selectAll(".bar").style("fill",this.get_mark_color.bind(this)).style("stroke",e||this.get_mark_color.bind(this)).style("opacity",this.get_mark_opacity.bind(this))),this.legendEl&&(this.legendEl.selectAll(".legendrect").style("fill",this.get_mark_color.bind(this)).style("stroke",e||this.get_mark_color.bind(this)).style("opacity",this.get_mark_opacity.bind(this)),this.legendEl.selectAll(".legendtext").style("fill",this.get_mark_color.bind(this)).style("stroke",e||this.get_mark_color.bind(this)).style("opacity",this.get_mark_opacity.bind(this)))}draw_legend(e,t,n,i,r){if(!this.model.yIs2d&&1!==this.model.get("colors").length&&"element"!==this.model.get("color_mode"))return[0,0];const s=this.model.mark_data[0].values.map((e=>({index:e.subIndex,colorIndex:e.colorIndex,opacityIndex:e.opacityIndex})));this.legendEl=e.selectAll(".legend"+this.uuid).data(s);const a=.8*r,l=this.legendEl.enter().append("g").attr("class","legend"+this.uuid).attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).on("mouseover",(()=>{this.event_dispatcher("legend_mouse_over")})).on("mouseout",(()=>{this.event_dispatcher("legend_mouse_out")})).on("click",(()=>{this.event_dispatcher("legend_clicked")}));l.append("rect").classed("legendrect",!0).style("fill",this.get_mark_color.bind(this)).attr("x",0).attr("y",0).attr("width",a).attr("height",a),l.append("text").attr("class","legendtext").attr("x",1.2*a).attr("y",a/2).attr("dy","0.35em").text(((e,t)=>this.model.get("labels")[t])).style("fill",this.get_mark_color.bind(this)),this.legendEl=l.merge(this.legendEl);const c=o.max(this.model.get("labels"),(e=>e.length));return this.legendEl.exit().remove(),[this.model.mark_data[0].values.length,c]}clear_style(e,t){if(!t||0===t.length)return;if(0===Object.keys(e).length)return;const n=this.d3el.selectAll(".bargroup").filter(((e,n)=>-1!==t.indexOf(n))),i={};for(const t in e)i[t]=null;h.applyStyles(n.selectAll(".bar"),i)}set_style_on_elements(e,t){if(!t||0===t.length)return;if(0===Object.keys(e).length)return;const n=this.d3el.selectAll(".bargroup").filter(((e,n)=>-1!==t.indexOf(n)));h.applyStyles(n.selectAll(".bar"),e)}set_default_style(e){if(!e||0===e.length)return;const t=this.model.get("fill"),n=this.model.get("stroke"),i=this.model.get("stroke_width");this.d3el.selectAll(".bargroup").filter(((t,n)=>-1!==e.indexOf(n))).selectAll(".bar").style("fill",t?this.get_mark_color.bind(this):"none").style("stroke",n||"none").style("opacity",this.get_mark_opacity.bind(this)).style("stroke-width",i)}get_mark_color(e,t){return super.get_mark_color(e,e.colorIndex)}get_mark_opacity(e,t){return super.get_mark_opacity(e,e.opacityIndex)}set_x_range(){const e=this.domScale;return d.isOrdinalScale(e)?e.scale.range():[e.scale(o.min(this.stackedScale.domain())),e.scale(o.max(this.stackedScale.domain()))]}bar_click_handler(e){const t=e.index,n=this.model.get("selected")||[];let i=Array.from(n);const r=i.indexOf(t),s=l.d3GetEvent().ctrlKey||l.d3GetEvent().metaKey;if(r>-1&&s)i.splice(r,1);else if(l.d3GetEvent().shiftKey){if(r>-1)return;const e=0!==i.length?o.min(i):-1,n=0!==i.length?o.max(i):this.model.mark_data.length;t>n?c.range(n+1,t+1).forEach((e=>{i.push(e)})):t<e&&c.range(t,e).forEach((e=>{i.push(e)}))}else s||(i=[]),i.push(t);this.model.set("selected",0===i.length?null:new Uint32Array(i),{updated_view:this}),this.touch();const a=l.d3GetEvent();void 0!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault()}reset_selection(){this.model.set("selected",null),this.selected_indices=null,this.touch()}compute_view_padding(){const e=this.domScale,t=this.model.get("orientation");let n=0;const i="vertical"===t?this.parent.plotarea_width:this.parent.plotarea_height;e&&null!==this.stackedScale&&void 0!==this.stackedScale&&0!==this.stackedScale.domain().length&&(d.isOrdinalScale(e)?"left"!==this.align&&"right"!==this.align||(n=parseFloat((this.stackedScale.bandwidth()/2).toFixed(2))):"center"===this.align?n=i/(2*this.stackedScale.domain().length)+1:"left"!==this.align&&"right"!==this.align||(n=i/this.stackedScale.domain().length+1)),"vertical"===t?n!==this.xPadding&&(this.xPadding=n,this.trigger("mark_padding_updated")):n!==this.yPadding&&(this.yPadding=n,this.trigger("mark_padding_updated"))}}t.Bars=f},1925:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BarsModel=void 0;const a=s(n(9163)),o=s(n(6731)),l=n(6032),c=s(n(7308));class u extends l.MarkModel{defaults(){return Object.assign(Object.assign({},l.MarkModel.prototype.defaults()),{_model_name:"BarsModel",_view_name:"Bars",x:[],y:[],color:null,scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"},color:{dimension:"color"}},color_mode:"auto",opacity_mode:"auto",type:"stacked",colors:["steelblue"],padding:.05,fill:!0,stroke:null,stroke_width:1,base:0,opacities:[],orientation:"vertical",align:"center",label_display:!1,label_display_format:".2f",label_display_font_style:{},label_display_horizontal_offset:0,label_display_vertical_offset:0})}initialize(e,t){super.initialize(e,t),this.yIs2d=!1,this.on_some_change(["x","y","base"],this.update_data,this),this.on_some_change(["color","opacities","color_mode","opacity_mode"],(function(){this.update_color(),this.trigger("colors_updated")}),this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data(),this.update_color(),this.update_domains()}update_data(){let e=this.get("x"),t=this.get("y");t=0!==t.length&&o.isNumber(t[0])?[t]:t,this.baseValue=this.get("base"),void 0!==this.baseValue&&null!==this.baseValue||(this.baseValue=0),0===e.length||0===t.length?(this.mark_data=[],this.yIs2d=!1):(e=e.slice(0,a.min(t.map((e=>e.length)))),this.mark_data=Array.prototype.map.call(e,((e,n)=>{const i={};i.key=e;let r=this.baseValue,s=this.baseValue;i.values=Array.prototype.map.call(t,((t,i)=>{let a,o;const l=isNaN(t[n])?0:t[n]-this.baseValue;return l>=0?(a=r,isNaN(t[n])||(r+=l),o=r):(o=s,isNaN(t[n])||(s+=l),a=s),{index:n,subIndex:i,x:e,y0:a,y1:o,y:t[n]}}));let o=[this.baseValue,s,r];return i.posMax=a.max(o),i.negMax=a.min(o),i})),this.yIs2d=this.mark_data[0].values.length>1,this.update_color()),this.update_domains(),this.trigger("data_updated")}get_data_dict(e,t){return e}update_color(){if(!this.mark_data)return;const e=this.get("color")||[],t=this.get("scales").color,n=this.get("color_mode"),i="group"===n||"auto"===n&&!this.yIs2d,r="element"===n||"auto"===n&&this.yIs2d,s=this.get("opacity_mode"),a="group"===s||"auto"===s&&!this.yIs2d,o="element"===s||"auto"===s&&this.yIs2d;let l=0;this.mark_data.forEach(((t,n)=>{t.values.forEach(((t,s)=>{t.colorIndex=i?n:r?s:l,t.opacityIndex=a?n:o?s:l,t.color=e[t.colorIndex],l++}))})),t&&e.length>0&&(this.get("preserve_domain").color?t.del_domain([],this.model_id+"_color"):t.compute_and_set_domain(e,this.model_id+"_color"))}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=e.x,n=e.y;if(this.get("preserve_domain").x?t.del_domain([],this.model_id+"_x"):t.compute_and_set_domain(this.mark_data.map((e=>e.key)),this.model_id+"_x"),this.get("preserve_domain").y)n.del_domain([],this.model_id+"_y");else if("stacked"===this.get("type"))n.compute_and_set_domain([a.min(this.mark_data,(e=>e.negMax)),a.max(this.mark_data,(e=>e.posMax)),this.baseValue],this.model_id+"_y");else{const e=a.min(this.mark_data,(e=>a.min(e.values,(e=>e.yRef)))),t=a.max(this.mark_data,(e=>a.max(e.values,(e=>e.yRef))));n.compute_and_set_domain([e,t,this.baseValue],this.model_id+"_y")}}}t.BarsModel=u,u.serializers=Object.assign(Object.assign({},l.MarkModel.serializers),{x:c.array_or_json_serializer,y:c.array_or_json_serializer,color:c.array_or_json_serializer})},7624:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Boxplot=void 0;const o=s(n(9163)),l=n(8435),c=s(n(6731)),u=n(5321),h=n(8435);class d extends u.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.apply(this);this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.display_el_classes=["box"],this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),yield t,this.event_listeners={},this.create_listeners(),this.process_interactions(),this.draw()}))}set_ranges(){const e=this.scales.x;e&&e.set_range(this.parent.padded_range("x",e.model));const t=this.scales.y;t&&t.set_range(this.parent.padded_range("y",t.model))}set_positional_scales(){const e=this.scales.x;this.listenTo(e,"domain_changed",(function(){this.model.dirty||this.draw()}));const t=this.scales.y;this.listenTo(t,"domain_changed",(function(){this.model.dirty||this.draw()}))}create_listeners(){super.create_listeners.apply(this),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.model,"change:stroke",this.updateStroke),this.listenTo(this.model,"change:opacities",this.updateOpacities),this.listenTo(this.model,"change:outlier_fill_color",this.updateOutlierFillColor),this.listenTo(this.model,"change:box_fill_color",this.updateBoxFillColor),this.listenTo(this.model,"data_updated",this.draw),this.listenTo(this.model,"change:box_width",this.updateBoxWidth),this.listenTo(this.model,"change:selected",this.updateSelected),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")}))}updateStroke(){const e=this.model.get("stroke");this.d3el.selectAll(".boxplot").selectAll("path, rect").style("stroke",e),this.d3el.selectAll(".outlier").style("stroke",e),this.legendEl&&(this.legendEl.selectAll("path").attr("stroke",e),this.legendEl.selectAll("text").style("fill",e))}updateOutlierFillColor(){this.d3el.selectAll(".outlier").style("fill",this.model.get("outlier_fill_color"))}updateBoxFillColor(){this.d3el.selectAll(".box").style("fill",this.model.get("box_fill_color"))}updateOpacities(){this.d3el.selectAll(".boxplot").style("opacity",((e,t)=>this.get_mark_opacity(e,t))),this.legendEl&&this.legendEl.selectAll("path").attr("opacity",((e,t)=>this.get_mark_opacity(e,t)))}getBoxWidth(){let e=this.model.get("box_width");if(!e){const t=this.parent.plotarea_width,n=t/10;e=t/(this.model.mark_data.length+1)/1.5,e=Math.min(e,n)}return e}compute_view_padding(){const e=this.getBoxWidth()/2+1;e!==this.xPadding&&(this.xPadding=e,this.trigger("mark_padding_updated"))}updateBoxWidth(){this.compute_view_padding(),this.draw()}set_style_on_elements(e,t){if(void 0===t||0===t.length)return;let n=this.d3el.selectAll(".box");n=n.filter(((e,n)=>-1!=t.indexOf(n))),h.applyStyles(n,e)}set_default_style(e){this.updateOutlierFillColor(),this.updateBoxFillColor(),this.updateStroke(),this.updateOpacities()}clear_style(e,t){let n=this.d3el.selectAll(".boxplot");void 0!==t&&(n=n.filter(((e,n)=>-1!=t.indexOf(n))));const i={};for(const t in e)i[t]=null;h.applyStyles(n,i)}style_updated(e,t){this.set_default_style(t),this.set_style_on_elements(e,t)}selected_style_updated(e,t){this.selected_style=t,this.style_updated(t,this.selected_indices)}unselected_style_updated(e,t){this.unselected_style=t;const n=this.selected_indices?c.range(this.model.mark_data.length).filter((e=>-1==this.selected_indices.indexOf(e))):[];this.style_updated(t,n)}updateSelectedColors(e){this.d3el.selectAll(".boxplot").style("stroke",this.model.get("stroke"))}selector_changed(e,t){if(void 0===e)return this.model.set("selected",null),this.touch(),this.updateSelectedColors([]),[];const n=new Uint32Array(c.range(this.pixelCoords.length)).filter((e=>t(this.pixelCoords[e])));this.updateSelectedColors(n),this.model.set("selected",n),this.touch()}invert_point(e){if(void 0===e)return this.updateSelectedColors([]),this.model.set("selected",null),void this.touch();const t=this.xPixels.map((t=>Math.abs(t-e))),n=t.indexOf(o.min(t));return this.model.set("selected",new Uint32Array([n])),this.updateSelectedColors([n]),this.touch(),n}prepareBoxPlots(){const e=!1!==this.model.get("auto_detect_outliers");this.plotData=[],this.outlierData=[];for(let t=0;t<this.model.mark_data.length;++t){const n=this.model.mark_data[t],i={x:n[0],q1:o.quantile(n[1],.25),q3:o.quantile(n[1],.75),median:o.quantile(n[1],.5)},r=this.scales.x.scale(i.x),s=this.scales.y.scale(i.q3),a=this.scales.y.scale(i.q1),l=this.scales.y.scale(i.median),c=a-s,u=a+1.5*c,h=s-1.5*c;let d=Number.MAX_VALUE,f=Number.MIN_VALUE;for(let t=0;t<n[1].length;++t){const i=this.scales.y.scale(n[1][t]);e&&(i>u||i<h)?this.outlierData.push({x:this.scales.x.scale(n[0]),y:i}):(i>f&&(f=i),i<d&&(d=i))}this.plotData.push({x:r,boxLower:a,boxMedian:l,boxUpper:s,whiskerMin:f,whiskerMax:d,dataDict:i})}}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.resetSelection,this.event_listeners.element_clicked=this.boxClickHandler)}boxClickHandler(e){const t=e.index,n=this,i=this.model.get("selected")||[];let r=Array.from(i);const s=r.indexOf(t),a=l.d3GetEvent().ctrlKey||l.d3GetEvent().metaKey;if(s>-1&&a)r.splice(s,1);else if(l.d3GetEvent().shiftKey){if(s>-1)return;const e=0!==r.length?o.min(r):-1,i=0!==r.length?o.max(r):n.model.mark_data.length;t>i?c.range(i+1,t+1).forEach((e=>{r.push(e)})):t<e&&c.range(t,e).forEach((e=>{r.push(e)}))}else a||(r=[]),r.push(t);this.model.set("selected",0===r.length?null:new Uint32Array(r),{updated_view:this}),this.touch();const u=l.d3GetEvent();void 0!==u.cancelBubble&&(u.cancelBubble=!0),u.stopPropagation&&u.stopPropagation(),u.preventDefault()}resetSelection(){this.model.set("selected",null),this.selected_indices=null,this.touch()}updateSelected(e,t){this.selected_indices=t,this.apply_styles()}draw(){this.set_ranges(),this.prepareBoxPlots(),this.drawMarkPaths(".boxplot",this.d3el),this.xPixels=this.model.mark_data.map((e=>this.scales.x.scale(e[0])+this.scales.x.offset));const e=this.getBoxWidth()/2;this.pixelCoords=this.plotData.map((t=>[[t.x-e,t.x+e],[t.boxLower,t.boxUpper]]))}drawMarkPaths(e,t){const n=this.model.get("color"),i=this.d3el.selectAll(e).data(this.plotData),r=this.model.get("box_fill_color"),s=i.enter().append("g").attr("class","boxplot").attr("id",((e,t)=>"boxplot"+t));s.append("path").attr("class","whisker_max"),s.append("path").attr("class","whisker_max_end"),s.append("path").attr("class","whisker_min"),s.append("path").attr("class","whisker_min_end"),s.append("rect").attr("class","box"),s.append("path").attr("class","median_line"),s.append("g").attr("class","outliers");const a=this.scales.x,o="ordinal"===a.model.type?a.scale.bandwidth()/2:0;t.selectAll(".boxplot").data(this.plotData).style("stroke",this.model.get("stroke")).style("opacity",n).attr("transform",((e,t)=>"translate("+(e.x+o)+", 0)"));const l=this.getBoxWidth();t.selectAll(".box").data(this.plotData).style("fill",r).attr("x",-l/2).attr("width",l).attr("y",(e=>e.boxUpper)).attr("height",(e=>e.boxLower-e.boxUpper)).on("click",((e,t)=>this.event_dispatcher("element_clicked",{data:e,index:t}))).on("mouseover",((e,t)=>this.event_dispatcher("mouse_over",{data:e,index:t}))).on("mousemove",((e,t)=>this.event_dispatcher("mouse_move"))).on("mouseout",((e,t)=>this.event_dispatcher("mouse_out"))),t.selectAll(".median_line").data(this.plotData).style("stroke-width",2).attr("d",(e=>{const t=e.boxMedian;return"M"+(0-l/2)+","+t+" L"+(0+l/2)+","+t})),t.selectAll(".whisker_max").data(this.plotData).attr("d",(e=>"M0,"+e.whiskerMax+" L0,"+e.boxUpper)).attr("stroke-dasharray",(()=>"5,5")),t.selectAll(".whisker_max_end").data(this.plotData).attr("d",(e=>{const t=e.whiskerMax;return"M"+(0-l/2)+","+t+" L"+(0+l/2)+","+t})),t.selectAll(".whisker_min").data(this.plotData).attr("d",(e=>"M0,"+e.whiskerMin+" L0,"+e.boxLower)).attr("stroke-dasharray",(()=>"5,5")),t.selectAll(".whisker_min_end").data(this.plotData).attr("d",(e=>{const t=e.whiskerMin;return"M"+(0-l/2)+","+t+" L"+(0+l/2)+","+t})),i.exit().remove();const c=t.selectAll(".outlier").data(this.outlierData);c.enter().append("circle").attr("class","outlier"),c.exit().remove(),t.selectAll(".outlier").data(this.outlierData).style("fill",this.model.get("outlier_fill_color")).attr("cx",(e=>e.x+o)).attr("r",3).attr("cy",(e=>e.y)),this.apply_styles(this.selected_indices)}relayout(){this.set_ranges(),this.compute_view_padding(),this.draw()}draw_legend(e,t,n,i,r){const s=this.model.get("stroke");this.rectDim=.8*r,this.legendEl=e.selectAll(".legend"+this.uuid).data([this.model.mark_data]);const a=this.legendEl.enter().append("g").attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).attr("class","legend"+this.uuid).on("mouseover",c.bind(this.highlight_axes,this)).on("mouseout",c.bind(this.unhighlight_axes,this));a.selectAll("path").attr("stroke",s).attr("transform","translate("+this.rectDim/2+",0)"),this.legendEl.append("text").attr("class","legendtext").attr("x",1.2*this.rectDim).attr("y",this.rectDim/2).attr("dy","0.35em").text(((e,t)=>this.model.get("labels")[t])).style("fill",s),this.legendEl=a.merge(this.legendEl);const l=o.max(this.model.get("labels"),(e=>e.length));return this.legendEl.exit().remove(),[1,l]}}t.Boxplot=d},8639:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BoxplotModel=void 0;const a=s(n(9163)),o=s(n(6731)),l=n(6032),c=s(n(7308));class u extends l.MarkModel{defaults(){return Object.assign(Object.assign({},l.MarkModel.prototype.defaults()),{_model_name:"BoxplotModel",_view_name:"Boxplot",x:[],y:[],scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"}},stroke:null,box_fill_color:"dodgerblue",outlier_fill_color:"gray",opacities:[],box_width:null,auto_detect_outliers:!0})}initialize(){super.initialize.apply(this,arguments),this.on_some_change(["x","y"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data(),this.update_domains()}get_data_dict(e,t){return e.dataDict}update_data(){let e=this.get("x"),t=this.get("y");t.forEach((e=>{e.sort(((e,t)=>e-t))})),e.length>t.length?e=e.slice(0,t.length):e.length<t.length&&(t=t.slice(0,e.length)),this.mark_data=o.zip(e,t),this.update_domains(),this.trigger("data_updated")}update_domains(){const e=this.get("scales");if(!this.get("preserve_domain").x&&this.mark_data?e.x.compute_and_set_domain(this.mark_data.map((e=>e[0])),this.model_id+"_x"):e.x.del_domain([],this.model_id+"_x"),!this.get("preserve_domain").y&&this.mark_data){const t=a.min(this.mark_data.map((e=>e[1][0]))),n=a.max(this.mark_data.map((e=>{const t=e[1];return t[t.length-1]})));e.y.set_domain([t,n],this.model_id+"_y")}else e.y.del_domain([],this.model_id+"_y")}}t.BoxplotModel=u,u.serializers=Object.assign(Object.assign({},l.MarkModel.serializers),{x:c.array_or_json_serializer,y:c.array_or_json_serializer})},2551:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelector=t.BrushIntervalSelector=t.BrushSelector=void 0;const o=s(n(9163)),l=n(8435),c=s(n(6731)),u=s(n(3133)),h=s(n(8435)),d=s(n(4343));function f(e,t){return e-t}function p(e,t,n){if(void 0===t||0===t.length)return void c.each(e.mark_views,(e=>e.selector_changed()));let i,r;if(void 0===n){const n=e.model.get("orientation");i="vertical"==n?[]:t,r="vertical"==n?t:[]}else i=t,r=n;i.length&&i.sort(f),r.length&&r.sort(f),c.each(e.mark_views,(e=>{e.selector_changed(function(e,t){return function(n,i){if(void 0===i)return d.point_in_rectangle(n,e,t);const r=Math.min(n.length,i.length),s=new Uint8Array(r);if(e.length&&t.length){for(let a=0;a<r;a++)s[a]=e[0]<=n[a]&&n[a]<=e[1]&&t[0]<=i[a]&&i[a]<=t[1]?1:0;return s}if(e.length)for(let t=0;t<r;t++)s[t]=e[0]<=n[t]&&n[t]<=e[1]?1:0;else for(let e=0;e<r;e++)s[e]=t[0]<=i[e]&&i[e]<=t[1]?1:0;return s}}(i,r),function(e,t){return function(n){return d.rect_inter_rect(n[0],n[1],e,t)}}(i,r))}))}function m(e){"vertical"==e.model.get("orientation")?e.d3el.selectAll("rect").attr("x",0).attr("width",e.width):e.d3el.selectAll("rect").attr("y",0).attr("height",e.height)}class _ extends u.BaseXYSelector{constructor(){super(...arguments),this.ignoreBrushEvents=!1}brush_render(){this.brushing=!1}color_change(){null!==this.model.get("color")&&this.d3el.selectAll(".selection").style("fill",this.model.get("color"))}brush_start(){this.ignoreBrushEvents||(this.brushing=!0,this.model.set("brushing",!0),this.touch())}brush_move(){this.ignoreBrushEvents||this.convert_and_save()}brush_end(){this.ignoreBrushEvents||(this.model.set("brushing",!1),this.convert_and_save(),this.brushing=!1)}adjust_rectangle(){m(this)}update_mark_selected(e,t){return p(this,e,t)}}class g extends u.BaseXSelector{constructor(){super(...arguments),this.ignoreBrushEvents=!1}brush_render(){this.brushing=!1}color_change(){null!==this.model.get("color")&&this.d3el.selectAll(".selection").style("fill",this.model.get("color"))}brush_start(){this.ignoreBrushEvents||(this.brushing=!0,this.model.set("brushing",!0),this.touch())}brush_move(){this.ignoreBrushEvents||this.convert_and_save()}brush_end(){this.ignoreBrushEvents||(this.model.set("brushing",!1),this.convert_and_save(),this.brushing=!1)}adjust_rectangle(){m(this)}update_mark_selected(e,t){return p(this,e,t)}}function y(e,t,n){n&&n.forEach((t=>{e.classed(t,!1)})),t&&t.forEach((t=>{e.classed(t,!0)}))}t.BrushSelector=class extends _{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){yield e.render.call(this),this.brush_render(),yield this.create_scales(),yield this.mark_views_promise,this.brush=o.brush().on("start",c.bind(this.brush_start,this)).on("brush",c.bind(this.brush_move,this)).on("end",c.bind(this.brush_end,this)),this.brush.extent([[0,0],[this.width,this.height]]),this.d3el.attr("class","selector brushintsel"),this.d3el.call(this.brush),this.adjust_rectangle(),this.color_change(),this.create_listeners(),this.selected_changed()}))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:color",this.color_change),this.listenTo(this.model,"change:selected_x",this.selected_changed),this.listenTo(this.model,"change:selected_y",this.selected_changed)}empty_selection(){this.update_mark_selected(),this.model.set("selected_x",null),this.model.set("selected_y",null),this.touch()}convert_and_save(){const e=l.d3GetEvent();if(e.sourceEvent)if(e.selection){const t=e.selection,n=[t[0][0],t[1][0]],i=[t[1][1],t[0][1]],r=n.map(this.x_scale.invert.bind(this.x_scale)).sort(f),s=i.map(this.y_scale.invert.bind(this.y_scale)).sort(f);this.update_mark_selected(n,i),this.set_selected("selected_x",this.x_scale.model.typedRange(r)),this.set_selected("selected_y",this.y_scale.model.typedRange(s)),this.touch()}else this.empty_selection()}selected_changed(){if(this.brushing)return;const e=this.model.get("selected_x")||[],t=this.model.get("selected_y")||[];if(0===e.length||0===t.length)this.update_mark_selected();else{if(2!=e.length||2!=t.length)return;{const n=e.map((e=>this.x_scale.offset+this.x_scale.scale(e))).sort(f),i=t.map((e=>this.y_scale.offset+this.y_scale.scale(e))).sort(f);this.update_mark_selected(n,i)}}this.syncModelToBrush()}relayout(){super.relayout(),this.d3el.select(".background").attr("width",this.width).attr("height",this.height),this.set_x_range([this.x_scale]),this.set_y_range([this.y_scale]),this.brush.extent([[0,0],[this.width,this.height]]),this.syncModelToBrush()}syncModelToBrush(){this.ignoreBrushEvents=!0;try{if(this.model.get("selected_x")&&this.model.get("selected_y")){const e=this.model.get("selected_x").map((e=>this.x_scale.offset+this.x_scale.scale(e))).sort(f),t=this.model.get("selected_y").map((e=>this.y_scale.offset+this.y_scale.scale(e))).sort(f);this.brush.move(this.d3el,[[e[0],t[0]],[e[1],t[1]]])}else this.brush.move(this.d3el,null);this.d3el.call(this.brush)}finally{this.ignoreBrushEvents=!1}this.d3el.call(this.brush)}adjust_rectangle(){}reset(){}},t.BrushIntervalSelector=class extends g{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){yield e.render.call(this),this.brush_render(),yield this.mark_views_promise,yield this.create_scales(),this.brush=("vertical"==this.model.get("orientation")?o.brushY():o.brushX()).on("start",c.bind(this.brush_start,this)).on("brush",c.bind(this.brush_move,this)).on("end",c.bind(this.brush_end,this)),this.brush.extent([[0,0],[this.width,this.height]]),this.d3el.attr("class","selector brushintsel"),this.d3el.call(this.brush),this.adjust_rectangle(),this.color_change(),this.create_listeners(),this.selected_changed()}))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:color",this.color_change),this.listenTo(this.model,"change:selected",this.selected_changed)}empty_selection(){this.update_mark_selected(),this.model.set("selected",null),this.touch()}convert_and_save(){const e=l.d3GetEvent();if(e.sourceEvent)if(e.selection){const t=e.selection,n=t.map(this.scale.invert.bind(this.scale)).sort(f);this.update_mark_selected(t),this.set_selected("selected",this.scale.model.typedRange(n)),this.touch()}else this.empty_selection()}update_scale_domain(e){super.update_scale_domain(),!0!==e&&this.selected_changed()}selected_changed(){if(this.brushing)return;const e=this.model.get("selected")||[];if(0===e.length)this.update_mark_selected();else{if(2!=e.length)return;{const t=[e[0],e[1]].map((e=>this.scale.scale(e))).sort(f);this.update_mark_selected(t)}}this.syncModelToBrush()}relayout(){super.relayout(),this.adjust_rectangle(),this.d3el.select(".background").attr("width",this.width).attr("height",this.height),this.set_range([this.scale]),this.brush.extent([[0,0],[this.width,this.height]]),this.syncModelToBrush()}syncModelToBrush(){this.ignoreBrushEvents=!0;try{if(this.model.get("selected")){const e=this.model.get("selected").map((e=>this.scale.scale(e))).sort(f);this.brush.move(this.d3el,e)}else this.brush.move(this.d3el,null);this.d3el.call(this.brush)}finally{this.ignoreBrushEvents=!1}}reset(){}},t.MultiSelector=class extends g{constructor(){super(...arguments),this.brushes=[],this.brush_g=[]}render(){super.render.apply(this),this.brush_render(),this.names=this.model.get("names"),this.curr_index=0;const e=this.create_scales();Promise.all([this.mark_views_promise,e]).then((()=>{this.d3el.attr("class","multiselector"),this.d3el.attr("width",this.width),this.d3el.attr("height",this.height),this.create_brush(),this.selecting_brush=!1,this.create_listeners()}))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:names",this.labels_change),this.listenTo(this.model,"change:color",this.color_change)}labels_change(e,t){const n=e.previous("names");this.names=t;const i=c.range(this.curr_index+1),r=h.deepCopy(this.model.get("selected"));i.forEach((e=>{const t=this.get_label(e),i=this.get_label(e,n);i!==t&&(this.d3el.select(".brush_text_"+e).text(t),r[t]=r[i],delete r[i])})),this.set_selected("_selected",r),this.touch()}create_brush(){const e=this.curr_index,t=("vertical"==this.model.get("orientation")?o.brushY():o.brushX()).on("start",(()=>{this.brush_start()})).on("brush",(()=>{this.multi_brush_move(e)})).on("end",(()=>{this.multi_brush_end(e)}));t.extent([[0,0],[this.width,this.height]]);const n=this.d3el.append("g").attr("class","selector brushintsel active");n.append("text").text(this.get_label(this.curr_index)).attr("class","brush_text_"+this.curr_index).style("display","none"),"vertical"==this.model.get("orientation")?n.select("text").attr("x",30):n.select("text").attr("y",30),n.call(t),this.color_change(),this.adjust_rectangle(),this.reset_handler(n),this.brushes[this.curr_index]=t,this.brush_g[this.curr_index]=n,this.curr_index=this.curr_index+1}reset_handler(e){const t=this,n=e.on("mousedown.brush");e.on("mousedown.brush",(function(){const e=l.d3GetEvent().ctrlKey||l.d3GetEvent().metaKey;l.d3GetEvent().shiftKey&&e?t.reset():e?(y(o.select(this),["inactive"],["active"]),t.create_brush()):l.d3GetEvent().shiftKey&&!1===t.selecting_brush?(y(t.d3el.selectAll(".selector"),["visible"],["active","inactive"]),t.selecting_brush=!0):(y(t.d3el.selectAll(".selector"),["inactive"],["visible"]),y(o.select(this),["active"],["inactive"]),n.call(this),t.selecting_brush=!1)}))}get_label(e,t){return null==t&&(t=this.names),t.length>e?t[e]:e}multi_brush_move(e){if(this.ignoreBrushEvents)return;const t=l.d3GetEvent().selection;this.update_text(e,t),this.convert_and_save(t,e)}update_text(e,t){if(null===t)return void this.d3el.select(".brush_text_"+e).style("display","none");const n="vertical"==this.model.get("orientation")?"y":"x",i=!this.model.get("show_names"),r=(t[0]+t[1])/2;this.d3el.select(".brush_text_"+e).style("display",i?"none":"inline").attr(n,r)}multi_brush_end(e){if(this.ignoreBrushEvents)return;const t=l.d3GetEvent().selection;this.model.set("brushing",!1),this.convert_and_save(t,e),this.brushing=!1}reset(){this.d3el.selectAll(".selector").remove(),this.model.set("_selected",{}),this.curr_index=0,this.brushes=[],this.brush_g=[],this.touch(),this.create_brush()}convert_and_save(e,t){if(e){const n=h.deepCopy(this.model.get("_selected"));n[this.get_label(t)]=e.map(this.scale.invert.bind(this.scale)),this.update_mark_selected(e),this.model.set("_selected",n)}else this.update_mark_selected(),this.model.set("_selected",{});this.touch()}selected_changed(){}relayout(){super.relayout(),this.adjust_rectangle(),this.d3el.select(".background").attr("width",this.width).attr("height",this.height),this.set_range([this.scale]),this.brushes.forEach((e=>{e.extent([[0,0],[this.width,this.height]])})),this.syncModelToBrush()}syncModelToBrush(){this.ignoreBrushEvents=!0;try{const e=this.model.get("_selected");this.brushes.forEach(((t,n)=>{const i=e[this.get_label(n)];if(i){const e=i.map((e=>this.scale.scale(e))).sort(f);this.update_text(n,e),t.move(this.brush_g[n],e)}else this.update_text(n,null),t.move(this.brush_g[n],null);this.brush_g[n].call(t),this.reset_handler(this.brush_g[n])}))}finally{this.ignoreBrushEvents=!1}}remove(){this.model.off("change:names",null,this),this.model.off("change:color",null,this),super.remove()}}},9140:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorAxis=void 0;const a=s(n(9163)),o=n(8937),l=n(8435);class c extends o.Axis{render(){this.parent=this.options.parent,this.vertical="vertical"===this.model.get("orientation");const e=this.set_scale(this.model.get("scale"));this.side=this.model.get("side"),this.x_offset=100,this.y_offset=40,this.bar_height=20,this.d3el.attr("class","ColorBar").attr("display",this.model.get("visible")?"inline":"none").attr("transform",this.get_topg_transform()),this.ordinal=!1,this.num_ticks=this.model.get("num_ticks");const t=this;return e.then((()=>{t.create_listeners(),this.create_axis(),this.set_tick_values(),t.tick_format=t.generate_tick_formatter(),t.set_scales_range(),t.append_axis()}))}create_listeners(){this.listenTo(this.model,"change:scale",(function(e,t){this.update_scale(e.previous("scale"),t),this.axis.scale(this.axis_scale.scale),this.rescale_axis()})),this.listenTo(this.model,"change:tick_format",this.tickformat_changed),this.axis_scale.on("domain_changed",this.redraw_axisline,this),this.axis_scale.on("color_scale_range_changed",this.redraw_axis,this),this.axis_scale.on("highlight_axis",this.highlight,this),this.axis_scale.on("unhighlight_axis",this.unhighlight,this),this.listenTo(this.parent,"margin_updated",this.parent_margin_updated),this.listenTo(this.model,"change:visible",this.update_visibility),this.listenTo(this.model,"change:label",this.update_label),this.model.on_some_change(["side","orientation"],this.update_display,this)}create_axis(){this.side=this.model.get("side"),this.vertical="vertical"===this.model.get("orientation"),this.vertical?this.axis="right"===this.side?a.axisRight(this.axis_scale.scale):a.axisLeft(this.axis_scale.scale):this.axis="top"===this.side?a.axisTop(this.axis_scale.scale):a.axisBottom(this.axis_scale.scale)}update_display(){this.g_axisline.remove(),this.create_axis(),this.g_axisline=this.d3el.select("#colorBarG"+this.cid).append("g").attr("class","axis"),this.rescale_axis(),this.d3el.select("#colorBarG"+this.cid).attr("transform",this.get_colorbar_transform()),this.d3el.select("#colorBarG"+this.cid).select(".g-rect").attr("transform",this.vertical?"rotate(-90)":""),this.redraw_axisline()}set_scale(e){const t=this;return this.axis_scale&&this.axis_scale.remove(),this.create_child_view(e).then((e=>{t.displayed.then((()=>{e.trigger("displayed")})),t.axis_scale=e,"date_color_linear"===t.axis_scale.model.type?t.axis_line_scale=a.scaleUtc().nice():"ordinal"===t.axis_scale.model.type?(t.axis_line_scale=a.scaleBand(),t.ordinal=!0):t.axis_line_scale=a.scaleLinear()}))}append_axis(){void 0!==this.model.get("label")&&null!==this.model.get("label")&&this.d3el.append("g").attr("transform",this.get_label_transform()).attr("class","axis label_g").append("text").append("tspan").attr("id","text_elem").attr("dy","0.5ex").attr("class","axislabel").style("text-anchor",this.vertical?"middle":"end").text(this.model.get("label"));const e=this.d3el.append("g").attr("id","colorBarG"+this.cid);this.draw_color_bar(),this.set_axisline_domain(),this.g_axisline=e.append("g").attr("class","axis"),this.vertical?this.axis="right"===this.side?a.axisRight(this.axis_scale.scale):a.axisLeft(this.axis_scale.scale):this.axis="top"===this.side?a.axisTop(this.axis_scale.scale):a.axisBottom(this.axis_scale.scale),this.axis=this.axis.tickFormat(this.tick_format),this.redraw_axisline()}draw_color_bar(){const e=this.d3el.select("#colorBarG"+this.cid);e.attr("transform",this.get_colorbar_transform());const t=this;e.selectAll(".g-rect").remove(),e.selectAll(".g-defs").remove(),this.colors=this.axis_scale.scale.range();const n=100/(this.colors.length-1);if(this.ordinal){const n=this.get_color_bar_width()/this.colors.length;let i=e.append("g").attr("class","g-rect axis").selectAll("rect").data(this.colors);i=i.enter().append("rect").attr("y",0).attr("height",this.bar_height).attr("width",n).style("fill",(e=>e)).merge(i),this.vertical?i.attr("x",((e,i)=>i*n-(t.height-2*t.x_offset))):i.attr("x",((e,t)=>t*n))}else{const i=e.append("g").attr("class","g-defs").append("defs").append("linearGradient");l.applyAttrs(i,{id:"colorBarGradient"+this.cid,x1:"0%",y1:"0%",x2:"100%",y2:"0%"});const r=i.selectAll("stop").data(this.colors).enter().append("stop");l.applyAttrs(r,{offset:function(e,t){return n*t+"%"},"stop-color":function(e,n){return t.colors[n]},"stop-opacity":1});const s=e.append("g").attr("class","g-rect axis").append("rect");l.applyAttrs(s,{width:this.get_color_bar_width(),height:this.bar_height,x:this.vertical?-(this.height-2*this.x_offset):0,y:0,"stroke-width":1}).style("fill","url(#colorBarGradient"+this.cid+")")}this.vertical&&e.select(".g-rect").attr("transform","rotate(-90)")}get_topg_transform(){return this.vertical?"right"===this.side?"translate("+String(this.get_basic_transform()+this.margin.right/2-this.bar_height)+", 0)":"translate("+String(this.get_basic_transform()-this.margin.left/2+this.bar_height)+", 0)":"top"===this.side?"translate(0, "+String(this.get_basic_transform()-this.margin.top+this.bar_height+24)+")":"translate(0, "+String(this.get_basic_transform()+this.margin.bottom-this.bar_height-24)+")"}get_label_transform(){return this.vertical?"translate("+("right"===this.side?this.bar_height/2:-this.bar_height/2)+", "+(this.x_offset-15)+")":"translate("+(this.x_offset-5)+", "+this.bar_height/2+")"}get_colorbar_transform(){return this.vertical?"translate(0, "+String(this.x_offset)+")":"translate("+String(this.x_offset)+", 0)"}set_axisline_scale_range(){const e=this.vertical?[this.height-2*this.x_offset,0]:[0,this.width-2*this.x_offset];if(this.ordinal)this.axis_line_scale.rangeRound(e).padding(.05);else{null==this.axis_scale.model.mid?this.axis_line_scale.range(e):this.axis_line_scale.range([e[0],.5*(e[0]+e[1]),e[1]])}}set_scales_range(){this.axis_scale.set_range(),this.set_axisline_scale_range()}get_color_bar_width(){return this.vertical?this.height-2*this.x_offset:this.width-2*this.x_offset}update_label(){this.d3el.select("#text_elem").text(this.model.get("label"))}rescale_axis(){this.set_axisline_scale_range(),this.d3el.attr("transform",this.get_topg_transform());const e=this,t=this.get_color_bar_width()/this.colors.length;if(this.ordinal){const n=this.d3el.select("#colorBarG"+this.cid).select(".g-rect").selectAll("rect").attr("width",t);this.vertical?n.attr("x",((n,i)=>i*t-(e.height-2*e.x_offset))):n.attr("x",((e,n)=>n*t))}else this.d3el.select("#colorBarG"+this.cid).select(".g-rect").selectAll("rect").attr("width",this.get_color_bar_width()).attr("x",this.vertical?-(this.height-2*this.x_offset):0);void 0!==this.model.get("label")&&null!==this.model.get("label")&&this.d3el.select(".label_g").attr("transform",this.get_label_transform()).select("#text_elem").style("text-anchor",this.vertical?"middle":"end"),this.g_axisline.call(this.axis)}redraw_axisline(){if(this.axis){let e;this.set_axisline_domain(),this.set_axisline_scale_range(),this.axis.scale(this.axis_line_scale),this.set_tick_values(),e=this.vertical?"translate("+("right"===this.side?this.bar_height:0)+", 0)":"translate(0, "+("top"===this.side?0:this.bar_height)+")",this.g_axisline&&this.g_axisline.attr("transform",e).call(this.axis)}}set_axisline_domain(){const e=this.axis_scale.scale.domain();if(this.ordinal)this.axis_line_scale.domain(e);else{const t=this.axis_scale.model.mid;null==t?this.axis_line_scale.domain([e[0],e[e.length-1]]):this.axis_line_scale.domain([e[0],t,e[e.length-1]])}}redraw_axis(){this.draw_color_bar(),this.redraw_axisline()}}t.ColorAxis=c},9023:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isColorScale=t.ColorScale=void 0;const a=s(n(9163)),o=n(4408);class l extends o.Scale{render(){this.create_d3_scale(),this.update_extrapolation(),this.model.domain.length>0&&this.scale.domain(this.model.domain),this.offset=0,this.create_event_listeners(),this.set_range()}create_d3_scale(){this.scale=a.scaleLinear()}create_event_listeners(){super.create_event_listeners(),this.listenTo(this.model,"colors_changed",this.set_range),this.model.on("change:extrapolation",(function(){this.update_extrapolation(),this.trigger("color_scale_range_changed")}),this)}update_extrapolation(){this.scale.clamp("constant"===this.model.get("extrapolation"))}set_range(){this.scale.range(this.model.color_range),this.trigger("color_scale_range_changed")}}t.ColorScale=l,t.isColorScale=function(e){return"color_linear"===e.model.type}},1582:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorScaleModel=void 0;const a=s(n(6731)),o=s(n(9163)),l=n(6946),c=s(n(9468));class u extends l.LinearScaleModel{defaults(){return Object.assign(Object.assign({},l.LinearScaleModel.prototype.defaults()),{_model_name:"ColorScaleModel",_view_name:"ColorScale",mid:null,scheme:"RdYlGn",extrapolation:"constant",colors:null})}set_init_state(){this.type="color_linear",this.color_range=[],this.mid=null}set_listeners(){super.set_listeners(),this.on_some_change(["colors","scheme"],this.colors_changed,this),this.on("change:mid",this.update_domain,this),this.colors_changed()}update_domain(){const e=this,t=this.min_from_data?o.min(a.map(this.domains,(t=>t.length>0?t[0]:e.global_max))):this.min,n=this.max_from_data?o.max(a.map(this.domains,(t=>t.length>0?t[t.length-1]:e.global_min))):this.max,i=this.mid;this.mid=this.get("mid");const r=this.domain,s=r.length,l=this.color_range.length;t==r[0]&&n==r[s-1]&&l==s&&this.mid==i||(this.domain=this.create_domain(t,this.mid,n,l),this.trigger("domain_changed",this.domain))}create_domain(e,t,n,i){const r=o.scaleLinear();if(null==t)r.domain([0,i-1]).range([e,n]);else{const s=(i-1)/2;r.domain([0,s,i-1]).range([e,t,n])}const s=[];for(let e=0;e<i;e++){const t=this.reverse?i-1-e:e;s.push(this.toDomainType(r(t)))}return s}colors_changed(){const e=this.get("colors");this.color_range=e.length>0?e:c.get_linear_scale_range(this.get("scheme")),this.update_domain(),this.trigger("colors_changed")}toDomainType(e){return e}}t.ColorScaleModel=u},9468:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.get_ordinal_scale_range=t.get_linear_scale_range=t.get_ordinal_scale=t.get_linear_scale=t.cycle_colors_from_scheme=t.cycle_colors=void 0;const o=s(n(9163)),l=a(n(3638)),c="RdYlGn";function u(e){return o.max(Object.keys(e).map(Number))}t.cycle_colors=function(e,t){const n=e.length;if(n>t)return e.slice(0,t);{let i=[],r=Math.floor(t/n);for(;r>0;r--)i=i.concat(e);return i.concat(e.slice(0,t%n))}},t.cycle_colors_from_scheme=function(e,t){e=e in l.default?e:c;const n=l.default[e];let i=t.toString();return 2===t?[n[3][0],n[3][2]]:i in n?n[i]:(i=u(n).toString(),this.cycle_colors(n[i],t))},t.get_linear_scale=function(e){e=e in l.default&&"qual"!==l.default[e].type?e:c;const t=l.default[e],n=t[u(t).toString()];return o.scaleLinear().range(n)},t.get_ordinal_scale=function(e,t){const n=o.scaleOrdinal();return n.range(this.cycle_colors_from_scheme(e,t)),n},t.get_linear_scale_range=function(e){return this.get_linear_scale(e).range()},t.get_ordinal_scale_range=function(e,t){return this.get_ordinal_scale(e,t).range()}},7243:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isDateColorScale=t.DateColorScale=void 0;const a=s(n(9163)),o=n(9023);class l extends o.ColorScale{create_d3_scale(){this.scale=a.scaleUtc()}}t.DateColorScale=l,t.isDateColorScale=function(e){return"date_color_linear"===e.model.type}},4762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateColorScaleModel=void 0;const i=n(1582),r=n(8435);class s extends i.ColorScaleModel{defaults(){return Object.assign(Object.assign({},i.ColorScaleModel.prototype.defaults()),{_model_name:"DateColorScaleModel",_view_name:"DateColorScale",min:null,max:null,mid:null})}set_init_state(){this.type="date_color_linear",this.color_range=[],this.mid=null,this.global_min=(new Date).setTime(0),this.global_max=new Date}min_max_changed(){this.min=r.getDate(this.get("min")),this.max=r.getDate(this.get("max")),this.min_from_data=null===this.min,this.max_from_data=null===this.max,this.update_domain()}toDomainType(e){return new Date(e)}}t.DateColorScaleModel=s},9460:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isDateScale=t.DateScale=void 0;const a=s(n(9163)),o=n(2739);class l extends o.LinearScale{render(){this.scale=a.scaleUtc(),this.model.domain.length>0&&this.scale.domain(this.model.domain),this.offset=0,this.create_event_listeners()}}t.DateScale=l,t.isDateScale=function(e){return"date"===e.model.type}},9851:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateScaleModel=void 0;const i=n(6946),r=n(8435);class s extends i.LinearScaleModel{defaults(){return Object.assign(Object.assign({},i.LinearScaleModel.prototype.defaults()),{_model_name:"DateScaleModel",_view_name:"DateScale",min:null,max:null})}typedRange(e){const t=new Float64Array(e.map(Number));return t.type="date",t}set_init_state(){this.type="date",this.global_min=(new Date).setTime(0),this.global_max=new Date}min_max_changed(){this.min=r.getDate(this.get("min")),this.max=r.getDate(this.get("max")),this.min_from_data=null===this.min,this.max_from_data=null===this.max,this.update_domain()}}t.DateScaleModel=s},4262:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FastIntervalSelector=void 0;const a=s(n(6731)),o=s(n(9163)),l=n(3133),c=s(n(4343)),u=n(8435);class h extends l.BaseXSelector{render(){super.render(),this.freeze_but_move=!0,this.freeze_dont_move=!1,this.active=!1,this.dirty=!1,this.size=this.model.get("size"),this.width=this.parent.width-this.parent.margin.left-this.parent.margin.right,this.height=this.parent.height-this.parent.margin.top-this.parent.margin.bottom;const e=this,t=this.create_scales();Promise.all([this.mark_views_promise,t]).then((()=>{e.background=e.d3el.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class","selector selectormouse").attr("pointer-events","all").attr("visibility","hidden"),e.background.on("mousemove",a.bind(e.mousemove,e)).on("click",a.bind(e.click,e)).on("dblclick",a.bind(e.dblclick,e)),e.rect=e.d3el.append("rect").attr("class","selector intsel").attr("x",0).attr("y",0).attr("width",e.size).attr("height",e.height).attr("pointer-events","none").attr("display","none"),e.color_change(),e.selected_changed(),e.create_listeners()}))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:color",this.color_change)}color_change(){null!==this.model.get("color")&&this.rect.style("fill",this.model.get("color"))}click(){this.active=!0,this.rect.style("display","inline"),this.freeze_but_move=!!this.model.get("size")||!this.freeze_but_move}dblclick(){this.freeze_dont_move=!this.freeze_dont_move}mousemove(){if(this.freeze_dont_move||!this.active)return;this.dirty=!0;const e=o.mouse(this.background.node()),t=this.size>0?this.size:parseInt(this.rect.attr("width")),n=(this.height-e[1])/this.height,i=this.freeze_but_move?t:Math.round(n*this.width);let r;r=e[0]-i/2<0?0:e[0]+i/2>this.width?this.width-i:e[0]-i/2,this.rect.attr("x",r),this.rect.attr("width",i);const s=[r,r+i];this.set_selected("selected",this.scale.invert_range(s)),this.update_mark_selected(s,void 0),this.touch(),this.dirty=!1}update_mark_selected(e,t){if(void 0===e||0===e.length)return void a.each(this.mark_views,(e=>e.selector_changed()));let n,i;if(void 0===t){const t=this.model.get("orientation");n="vertical"==t?[]:e,i="vertical"==t?e:[]}else n=e,i=t;const r=function(e){return c.point_in_rectangle(e,n,i)},s=function(e){return c.rect_inter_rect(e[0],e[1],n,i)};a.each(this.mark_views,(e=>{e.selector_changed(r,s)}),this)}relayout(){super.relayout(),this.adjust_rectangle(),this.background.attr("width",this.width).attr("height",this.height),this.set_range([this.scale])}reset(){this.rect.attr("x",0).attr("width",0),this.model.set("selected",null),this.update_mark_selected(void 0,void 0),this.touch()}update_scale_domain(e){super.update_scale_domain(),!0!==e&&this.selected_changed()}selected_changed(){if(this.dirty)return;const e=this.model.get("selected")||[];if(0===e.length)this.reset();else{if(2!=e.length)return;{let t=e.map(this.scale.scale);t=t.sort(((e,t)=>e-t)),u.applyAttrs(this.rect,{x:t[0],width:t[1]-t[0]}).style("display","inline"),this.active=!0,this.update_mark_selected(t,void 0)}}}adjust_rectangle(){"vertical"==this.model.get("orientation")?this.d3el.selectAll("rect").attr("x",0).attr("width",this.width):this.d3el.selectAll("rect").attr("y",0).attr("height",this.height)}}t.FastIntervalSelector=h},7256:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Figure=void 0;const l=s(n(2055)),c=s(n(9163)),u=s(n(6731)),h=s(n(69)),d=o(n(200)),f=s(n(2317)),p=n(8435);f.ShaderChunk.scales=n(2410).A;class m extends l.DOMWidgetView{constructor(){super(...arguments),this.dummyNodes={},this.relayoutRequested=!1,this.should_relayout=!1}initialize(){this.debouncedRelayout=u.debounce((()=>{this.relayout()}),300),this.el.classList.add("bqplot"),this.el.classList.add("figure"),this.el.classList.add("jupyter-widgets"),this.change_theme();const e=document.createElementNS(c.namespaces.svg,"svg");e.classList.add("svg-figure"),this.svg=c.select(e);const t=document.createElementNS(c.namespaces.svg,"svg");t.classList.add("svg-background"),this.svg_background=c.select(t),this.el.appendChild(t),this.el.appendChild(e),this._initial_marks_created=new Promise((e=>{this._initial_marks_created_resolve=e})),this.intersectObserver=new IntersectionObserver((e=>{e[e.length-1].isIntersecting?(this.visible=!0,this.debouncedRelayout()):null!=e[e.length-1].rootBounds&&(this.visible=!1)}),{threshold:0}),this.intersectObserver.observe(this.el),this.resizeObserver=new ResizeObserver((e=>{this.debouncedRelayout()})),this.resizeObserver.observe(this.el),super.initialize.apply(this,arguments)}getFigureSize(){const e=this.el.getBoundingClientRect(),t=e.width/e.height,n=this.model.get("min_aspect_ratio"),i=this.model.get("max_aspect_ratio");return t<n?e.height=e.width/n:t>i&&(e.width=e.height*i),e}render(){this.displayed.then((()=>{this.layoutPromise.then(this.renderImpl.bind(this))}))}renderImpl(){return a(this,void 0,void 0,(function*(){const e=this.getFigureSize();this.width=e.width,this.height=e.height,this.id=l.uuid(),this.x_pad_dict={},this.y_pad_dict={},this.xPaddingArr={},this.yPaddingArr={},this.figure_padding_x=this.model.get("padding_x"),this.figure_padding_y=this.model.get("padding_y"),this.clip_id="clip_path_"+this.id,this.margin=this.model.get("fig_margin"),this.update_plotarea_dimensions(),this.plotarea_width<1||this.plotarea_height<1?this.el.style.visibility="hidden":this.el.style.visibility="",this.fig=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.fig_background=this.svg_background.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.tooltip_div=c.select(document.createElement("div")).attr("class","tooltip_div"),this.popper_reference=new h.PositionReference({x:0,y:0,width:20,height:20}),this.popper=new d.default(this.popper_reference,this.tooltip_div.node(),{placement:"auto"}),this.bg=this.fig_background.append("rect").attr("class","plotarea_background").attr("x",0).attr("y",0).attr("width",this.plotarea_width).attr("height",this.plotarea_height).style("pointer-events","inherit"),p.applyStyles(this.bg,this.model.get("background_style")),this.bg_events=this.fig.append("rect").attr("class","plotarea_events").attr("x",0).attr("y",0).attr("width",this.plotarea_width).attr("height",this.plotarea_height).style("pointer-events","inherit"),this.bg_events.on("click",(()=>{this.trigger("bg_clicked")})),this.fig_axes=this.fig_background.append("g"),this.fig_marks=this.fig.append("g"),this.interaction=this.fig.append("g"),this.clip_path=this.svg.append("svg:defs").append("svg:clipPath").attr("id",this.clip_id).append("rect").attr("x",0).attr("y",0).attr("width",this.plotarea_width).attr("height",this.plotarea_height),this.title=this.fig.append("text").attr("class","mainheading").attr("x",.5*this.plotarea_width).attr("y",-this.margin.top/2).attr("dy","1em"),p.applyStyles(this.title,this.model.get("title_style")),this.title.text(this.model.get("title")),this.model.on("save_png",this.save_png,this),this.model.on("save_svg",this.save_svg,this),this.model.on("upload_png",this.upload_png,this);const t=this.create_figure_scales();yield t,this.mark_views=new l.ViewList(this.add_mark,this.remove_mark,this);const n=this.mark_views.update(this.model.get("marks")).then((e=>{this.replace_dummy_nodes(e),this.update_marks(e),this.update_legend(),this.set_interaction(this.model.get("interaction")),this._initial_marks_created_resolve(),this.update_gl()}));this.axis_views=new l.ViewList(this.add_axis,null,this);const i=this.axis_views.update(this.model.get("axes"));return this.model.on_some_change(["fig_margin","min_aspect_ratio","max_aspect_ratio"],(()=>{this.should_relayout=!0,this.debouncedRelayout()}),this),this.model.on_some_change(["padding_x","padding_y"],(()=>{this.figure_padding_x=this.model.get("padding_x"),this.figure_padding_y=this.model.get("padding_y"),this.trigger("margin_updated")}),this),this.model.on("change:axes",((e,t,n)=>{this.axis_views.update(t)}),this),this.model.on("change:marks",((e,t,n)=>{this.mark_views.update(t).then((e=>{this.replace_dummy_nodes(e),this.update_marks(e),this.update_legend(),this.update_gl()}))}),this),this.model.on("change:legend_location",this.update_legend,this),this.model.on("change:title",this.update_title,this),this.model.on("change:interaction",((e,t)=>{Promise.all(this.mark_views.views).then((e=>{this.set_interaction(t)}))}),this),document.body.appendChild(this.tooltip_div.node()),this.create_listeners(),Promise.all([n,i])}))}createWebGLRenderer(){this.renderer||(this.renderer=new f.WebGLRenderer({antialias:!0,alpha:!0,premultipliedAlpha:!0}),this.renderer.setSize(100,100),this.renderer.setClearAlpha(0),this.renderer.setPixelRatio(this.model.get("pixel_ratio")||window.devicePixelRatio)),this.renderer&&!this.el.contains(this.renderer.domElement)&&this.el.insertBefore(this.renderer.domElement,this.el.childNodes[1]),this.layout_webgl_canvas()}replace_dummy_nodes(e){for(const t of e){const e=this.dummyNodes[t.cid];null!==e&&e.parentNode&&(e.parentNode.replaceChild(t.el,e),this.dummyNodes[t.cid]=null,this.displayed.then((()=>{t.trigger("displayed")})))}}create_listeners(){this.listenTo(this.model,"change:title_style",this.title_style_updated),this.listenTo(this.model,"change:background_style",this.background_style_updated),this.listenTo(this.model,"change:layout",this.change_layout),this.listenTo(this.model,"change:legend_style",this.legend_style_updated),this.listenTo(this.model,"change:legend_text",this.legend_text_updated),this.listenTo(this.model,"change:pixel_ratio",(()=>{this.renderer&&(this.renderer.setPixelRatio(this.model.get("pixel_ratio")||window.devicePixelRatio),this.update_gl())})),this.listenTo(this.model,"change:theme",this.change_theme)}title_style_updated(){p.applyStyles(this.title,this.model.get("title_style"))}background_style_updated(){p.applyStyles(this.bg,this.model.get("background_style"))}legend_style_updated(){p.applyStyles(this.fig_marks.selectAll(".g_legend").selectAll(".axis").selectAll("rect"),this.model.get("legend_style"))}legend_text_updated(){p.applyStyles(this.fig_marks.selectAll(".g_legend").selectAll("text.legendtext"),this.model.get("legend_text"))}create_figure_scales(){const e=this,t=this.create_child_view(this.model.get("scale_x")).then((t=>{e.scale_x=t,e.scale_x.scale.clamp(!0),e.scale_x.set_range([0,e.plotarea_width])})),n=this.create_child_view(this.model.get("scale_y")).then((t=>{e.scale_y=t,e.scale_y.scale.clamp(!0),e.scale_y.set_range([e.plotarea_height,0])}));return Promise.all([t,n])}padded_range(e,t){if(!t.get("allow_padding"))return this.range(e);const n=t.model_id;if("x"===e){const e=void 0!==this.xPaddingArr[n]?this.xPaddingArr[n]:0,t=this.plotarea_width*this.figure_padding_x;return[t+e,this.plotarea_width-t-e]}if("y"===e){const e=void 0!==this.yPaddingArr[n]?this.yPaddingArr[n]:0,t=this.plotarea_height*this.figure_padding_y;return[this.plotarea_height-e-t,e+t]}}range(e){return"x"===e?[0,this.plotarea_width]:"y"===e?[this.plotarea_height,0]:void 0}get_mark_plotarea_height(e){if(!e.get("allow_padding"))return this.plotarea_height;const t=e.model_id,n=void 0!==this.yPaddingArr[t]?this.yPaddingArr[t]:0;return this.plotarea_height*(1-this.figure_padding_y)-n-n}get_mark_plotarea_width(e){if(!e.get("allow_padding"))return this.plotarea_width;const t=e.model_id,n=void 0!==this.xPaddingArr[t]?this.xPaddingArr[t]:0;return this.plotarea_width*(1-this.figure_padding_x)-n-n}add_axis(e){return a(this,void 0,void 0,(function*(){const t=yield this.create_child_view(e);return this.fig_axes.node().appendChild(t.el),this.displayed.then((()=>{t.trigger("displayed")})),t}))}remove_from_padding_dict(e,t,n){if(null==n)return;const i=n.model_id;void 0!==e[i]&&(delete e[i][t.model.model_id+"_"+t.cid],0===Object.keys(e[i]).length&&delete e[i])}update_padding_dict(e,t,n,i){const r=n.model_id;e[r]||(e[r]={}),e[r][t.model.model_id+"_"+t.cid]=i}mark_scales_updated(e){const t=e.model,n=t.previous("scales");this.remove_from_padding_dict(this.x_pad_dict,e,n[t.get_key_for_orientation("horizontal")]),this.remove_from_padding_dict(this.y_pad_dict,e,n[t.get_key_for_orientation("vertical")]);const i=t.get("scales");this.update_padding_dict(this.x_pad_dict,e,i[t.get_key_for_orientation("horizontal")],e.xPadding),this.update_padding_dict(this.y_pad_dict,e,i[t.get_key_for_orientation("vertical")],e.yPadding),this.update_paddings()}mark_padding_updated(e){const t=e.model,n=t.get("scales");this.update_padding_dict(this.x_pad_dict,e,n[t.get_key_for_orientation("horizontal")],e.xPadding),this.update_padding_dict(this.y_pad_dict,e,n[t.get_key_for_orientation("vertical")],e.yPadding),this.update_paddings()}update_marks(e){this.update_paddings()}remove_mark(e){const t=e.model;t.off("redraw_legend",null,this),t.off("data_updated",null,this),t.off("scales_updated",null,this),t.off("mark_padding_updated",null,this);const n=t.get("scales");this.remove_from_padding_dict(this.x_pad_dict,e,n[t.get_key_for_orientation("horizontal")]),this.remove_from_padding_dict(this.y_pad_dict,e,n[t.get_key_for_orientation("vertical")]),e.remove()}add_mark(e){return a(this,void 0,void 0,(function*(){e.state_change.then((()=>{e.on("data_updated redraw_legend",this.update_legend,this)}));const t=this.fig_marks.node().appendChild(document.createElementNS(c.namespaces.svg,"g")),n=yield this.create_child_view(e,{clip_id:this.clip_id});this.dummyNodes[n.cid]=t,n.on("mark_padding_updated",(()=>{this.mark_padding_updated(n)}),this),n.on("mark_scales_updated",(()=>{this.mark_scales_updated(n)}),this);let i=n.model.get("scales")[n.model.get_key_for_dimension("x")],r=n.model.get("scales")[n.model.get_key_for_dimension("y")];return void 0===i&&(i=this.scale_x.model),void 0===r&&(r=this.scale_y.model),this.update_padding_dict(this.x_pad_dict,n,i,n.xPadding),this.update_padding_dict(this.y_pad_dict,n,r,n.yPadding),n.render_gl&&this.createWebGLRenderer(),n.on("remove",(()=>{t.parentNode&&t.remove()})),n}))}update_paddings(){this.xPaddingArr={},this.yPaddingArr={},u.forEach(this.x_pad_dict,((e,t)=>{let n=0;u.forEach(e,((e,t)=>{n=Math.max(n,e)})),this.xPaddingArr[t]=n})),u.forEach(this.y_pad_dict,((e,t)=>{let n=0;u.forEach(e,((e,t)=>{n=Math.max(n,e)})),this.yPaddingArr[t]=n})),this.trigger("margin_updated")}update_plotarea_dimensions(){this.plotarea_width=this.width-this.margin.left-this.margin.right,this.plotarea_height=this.height-this.margin.top-this.margin.bottom}relayout(){this.relayoutRequested||(this.relayoutRequested=!0,requestAnimationFrame((()=>{this.relayoutRequested=!1;const e=this.getFigureSize();(this.width!=e.width||this.height!=e.height||this.should_relayout)&&this.visible&&(this.should_relayout=!1,this.width=e.width,this.height=e.height,this.margin=this.model.get("fig_margin"),this.update_plotarea_dimensions(),this.plotarea_width<1||this.plotarea_width<1?this.el.style.visibility="hidden":(this.el.style.visibility="",void 0!==this.scale_x&&null!==this.scale_x&&this.scale_x.set_range([0,this.plotarea_width]),void 0!==this.scale_y&&null!==this.scale_y&&this.scale_y.set_range([this.plotarea_height,0]),this.fig.attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.fig_background.attr("transform","translate("+this.margin.left+","+this.margin.top+")"),p.applyAttrs(this.title,{x:.5*this.plotarea_width,y:-this.margin.top/2,dy:"1em"}),this.bg.attr("width",this.plotarea_width).attr("height",this.plotarea_height),this.bg_events.attr("width",this.plotarea_width).attr("height",this.plotarea_height),this.clip_path.attr("width",this.plotarea_width).attr("height",this.plotarea_height),this.trigger("margin_updated"),this.update_legend(),this.layout_webgl_canvas()))}).bind(this)))}layout_webgl_canvas(){this.renderer&&(this.renderer.domElement.style="left: "+this.margin.left+"px; top: "+this.margin.top+"px;",this.renderer.setSize(this.plotarea_width,this.plotarea_height),this.update_gl())}update_legend(){this.fig_marks.selectAll(".g_legend").remove();const e=this.model.get("legend_location"),t=this.fig_marks.append("g").attr("class","g_legend");let n=1,i=1;void 0!==this.mark_views&&null!==this.mark_views&&Promise.all(this.mark_views.views).then((r=>{r.forEach((e=>{if(e.model.get("display_legend")){const r=e.draw_legend(t,0,16*n,0,16);n+=r[0],i=r[1]?Math.max(i,r[1]):i}}));const s=this.get_legend_coords(e,24,16*(n+1),0);1!==n&&t.insert("g",":first-child").attr("class","axis").append("rect").attr("y",8).attr("x",-8).attr("width",i+2+"em").attr("height",16*n),i="top-right"===e||"right"===e||"bottom-right"===e?-(i+2):1,t.attr("transform","translate("+String(s[0]+16*i)+" "+String(s[1])+") "),p.applyStyles(t.selectAll("text.legendtext"),this.model.get("legend_text")),p.applyStyles(t.selectAll(".axis").selectAll("rect"),this.model.get("legend_style"))}))}get_legend_coords(e,t,n,i){let r=0,s=0;const a=this.plotarea_width,o=this.plotarea_height;switch(e){case"top":r=.5*a-t,s=0;break;case"top-right":r=a-i,s=0;break;case"right":r=a-i,s=.5*o-n;break;case"bottom-right":r=a-i,s=o-n;break;case"bottom":r=.5*a-t,s=o-n;break;case"bottom-left":r=0,s=o-n;break;case"left":r=0,s=.5*o-n;break;default:r=0,s=0}return[r,s]}set_interaction(e){return a(this,void 0,void 0,(function*(){if(e){yield e.state_change;const t=yield this.create_child_view(e);return this.interaction_view&&this.interaction_view.remove(),this.interaction_view=t,this.interaction.node().appendChild(t.el),this.displayed.then((()=>{t.trigger("displayed")})),t}return this.interaction_view&&this.interaction_view.remove(),Promise.resolve(null)}))}update_title(e,t){this.title.text(this.model.get("title"))}remove(){return void 0!==this.mark_views&&null!==this.mark_views&&this.mark_views.remove(),void 0!==this.axis_views&&null!==this.axis_views&&this.axis_views.remove(),void 0!==this.tooltip_div&&this.tooltip_div.remove(),this.intersectObserver.disconnect(),this.resizeObserver.disconnect(),super.remove.apply(this,arguments)}get_svg(){return this.render_gl().then((()=>a(this,void 0,void 0,(function*(){const e=this.svg_background.node(),t=this.svg.node(),n=this.plotarea_width,i=this.plotarea_height,r=t.cloneNode(!0),s=[...r.querySelectorAll("image")];yield Promise.all(s.map((e=>a(this,void 0,void 0,(function*(){const t=yield(yield fetch(e.getAttribute("href"))).blob(),n=new FileReader,i=new Promise(((e,t)=>{n.onloadend=e,n.onerror=t,n.abort=t}));n.readAsDataURL(t),yield i,e.setAttribute("href",n.result)}))))),r.setAttribute("version","1.1"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("width",this.width),r.setAttribute("height",this.height),r.style.backgroundColor=p.getEffectiveBackgroundColor(this.el);const o=window.getComputedStyle(this.el),l=((e,t)=>{let n="";const i=document.styleSheets;let r;for(let a=0;a<i.length;a++){let o=null;try{o=i[a].cssRules}catch(e){}if(o)for(let i=0;i<o.length;i++){const a=o[i];if(void 0!==a.style){let i=null;try{i=e.querySelectorAll(a.selectorText)}catch(e){console.warn("Invalid CSS selector '"+a.selectorText+"'",e)}if(i){if(e.querySelectorAll(a.selectorText).length>0){r=a.selectorText;for(let e=0;e<t.length;e++)s=t[e],r=r.replace(new RegExp(s,"g"),"");n+=`${r} { ${a.style.cssText} }\n                                    `}}else a.cssText.match(/^@font-face/)&&(n+=a.cssText+"\n")}}}var s;return n+="svg { font-size: 10px; }\n",n})(this.el,[".theme-dark",".theme-light",".bqplot > ",":root"])+"\n",u=(l.match(/(--\w[\w-]*)/g)||[]).reduce(((e,t)=>`${e}\n\t${t}: ${o.getPropertyValue(t)};`),":root {")+"\n}\n",h=document.createElement("style");h.setAttribute("type","text/css"),h.innerHTML="<![CDATA[\n"+u+l+"]]>";const d=document.createElement("defs");d.appendChild(h);const f=r.children[0],m=e.cloneNode(!0);if(f.insertBefore(m.children[0].children[1],f.children[0]),f.insertBefore(m.children[0].children[0],f.children[0]),this.renderer){const e=this.renderer.domElement.toDataURL("image/png");c.select(f.children[3]).insert("image",":first-child").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("preserveAspectRatio","none").attr("transform","scale("+n+", "+i+")").attr("href",e)}return r.insertBefore(d,r.firstChild),r.outerHTML}))))}get_rendered_canvas(e){return a(this,void 0,void 0,(function*(){e=e||window.devicePixelRatio;const t=yield this.get_svg();return new Promise((n=>{const i=new Image;i.onload=()=>{const t=document.createElement("canvas");t.classList.add("bqplot"),t.width=this.width*e,t.height=this.height*e,t.style.width=this.width.toString(),t.style.height=this.height.toString();const r=t.getContext("2d");r.scale(e,e),r.drawImage(i,0,0),n(t)},i.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t)))}))}))}upload_png(e,t){return a(this,void 0,void 0,(function*(){(yield this.get_rendered_canvas(t)).toBlob((t=>a(this,void 0,void 0,(function*(){const n=yield t.arrayBuffer();e.send({event:"upload_png"},null,[n])}))))}))}save_png(e,t){this.get_rendered_canvas(t).then((t=>{const n=document.createElement("a");n.download=e||"image.png",n.href=t.toDataURL("image/png"),document.body.appendChild(n),n.click()}))}save_svg(e){this.get_svg().then((t=>{const n=document.createElement("a");n.download=e||"bqplot.svg",n.href="data:text/plain;charset=utf-8,"+encodeURIComponent(t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}getPixel(e,t){return a(this,void 0,void 0,(function*(){return(yield this.get_rendered_canvas(window.devicePixelRatio)).getContext("2d").getImageData(e*window.devicePixelRatio,t*window.devicePixelRatio,1,1).data}))}update_gl(){this._update_requested||(this._update_requested=!0,requestAnimationFrame(this._update_gl.bind(this)))}_update_gl(){this.render_gl(),this._update_requested=!1}render_gl(){return a(this,void 0,void 0,(function*(){if(!this.renderer)return Promise.resolve();const e=yield Promise.all(this.mark_views.views);this.renderer.autoClear=!1,this.renderer.autoClearColor=new f.Color(0),this.renderer.clear();const t=u.filter(e,(e=>e.render_gl));for(const e of t)e.render_gl()}))}change_theme(){this.el.classList.remove(this.model.previous("theme")),this.el.classList.add(this.model.get("theme"))}}t.Figure=m},6111:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FigureModel=void 0;const a=s(n(2055)),o=n(5734);class l extends a.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},a.DOMWidgetModel.prototype.defaults()),{_model_name:"FigureModel",_view_name:"Figure",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:o.semver_range,_view_module_version:o.semver_range,title:"",axes:[],marks:[],interaction:null,scale_x:void 0,scale_y:void 0,title_style:{},background_style:{},legend_style:{},legend_text:{},theme:"classic",min_aspect_ratio:.01,max_aspect_ratio:100,pixel_ratio:null,fig_margin:{top:60,bottom:60,left:60,right:60},padding_x:0,padding_y:.025,legend_location:"top-right",animation_duration:0})}initialize(e,t){super.initialize(e,t),this.on("msg:custom",this.handle_custom_messages,this)}handle_custom_messages(e){"save_png"===e.type?this.trigger("save_png",e.filename,e.scale):"save_svg"===e.type?this.trigger("save_svg",e.filename):"upload_png"===e.type&&this.trigger("upload_png",this,e.scale)}save_png(){this.trigger("save_png")}}t.FigureModel=l,l.serializers=Object.assign(Object.assign({},a.DOMWidgetModel.serializers),{marks:{deserialize:a.unpack_models},axes:{deserialize:a.unpack_models},interaction:{deserialize:a.unpack_models},scale_x:{deserialize:a.unpack_models},scale_y:{deserialize:a.unpack_models},layout:{deserialize:a.unpack_models}})},7681:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FlexLine=void 0;const a=s(n(9163)),o=n(2969);class l extends o.Lines{render(){const e=super.render.apply(this),t=this;return e.then((()=>{t.create_listeners(),t.draw()}))}set_ranges(){super.set_ranges();const e=this.scales.width;e&&e.set_range([.5,this.model.get("stroke_width")])}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:labels_visibility",this.update_legend_labels)}draw_legend(e,t,n,i,r){const s=e.selectAll(".legend"+this.uuid).data(this.model.mark_data,((e,t)=>e.name)),o=this,l=.8*r;s.enter().append("g").attr("class","legend"+this.uuid).attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).append("line").style("stroke",((e,t)=>o.get_colors(t))).attr("x1",0).attr("x2",l).attr("y1",l/2).attr("y2",l/2),s.append("text").attr("class","legendtext").attr("x",1.2*l).attr("y",l/2).attr("dy","0.35em").text(((e,t)=>o.model.get("labels")[t])).style("fill",((e,t)=>o.get_colors(t)));const c=a.max(this.model.get("labels"),(e=>e.length));return s.exit().remove(),[this.model.mark_data.length,c]}set_positional_scales(){const e=this.scales.x,t=this.scales.y;this.listenTo(e,"domain_changed",(function(){this.model.dirty||this.draw()})),this.listenTo(t,"domain_changed",(function(){this.model.dirty||this.draw()}))}initialize_additional_scales(){const e=this.scales.color;e&&(this.listenTo(e,"domain_changed",(function(){this.draw()})),e.on("color_scale_range_changed",this.draw,this))}draw(){this.set_ranges();let e=this.d3el.selectAll(".curve").data(this.model.mark_data,((e,t)=>e.name));e.exit().transition("draw").duration(this.parent.model.get("animation_duration")).remove(),e=e.enter().append("g").attr("class","curve").merge(e);const t=this.scales.x,n=this.scales.y,i=this;e.nodes().forEach(((e,r)=>{let s=a.select(e).selectAll("line").data(i.model.mark_data[r].values);s=s.enter().append("line").merge(s),s.attr("class","line-elem").attr("x1",(e=>t.scale(e.x1))).attr("x2",(e=>t.scale(e.x2))).attr("y1",(e=>n.scale(e.y1))).attr("y2",(e=>n.scale(e.y2))).attr("stroke",i.get_mark_color.bind(i)).attr("stroke-width",(e=>i.get_element_width(e)))}))}get_element_width(e){const t=this.scales.width;return void 0!==t&&void 0!==e.size?t.scale(e.size):this.model.get("stroke_width")}relayout(){this.set_ranges();const e=this.scales.x,t=this.scales.y;this.d3el.selectAll(".curve").selectAll(".line-elem").transition("relayout").duration(this.parent.model.get("animation_duration")).attr("x1",(t=>e.scale(t.x1))).attr("x2",(t=>e.scale(t.x2))).attr("y1",(e=>t.scale(e.y1))).attr("y2",(e=>t.scale(e.y2)))}}t.FlexLine=l},4297:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Stereographic=t.Gnomonic=t.Orthographic=t.EquiRectangular=t.AlbersUSA=t.Albers=t.Mercator=t.GeoScale=void 0;const a=s(n(9163)),o=s(n(2055));class l extends o.WidgetView{render(){this.set_projection(),this.listenTo(this.model,"attribute_changed",this.reset_scale)}set_projection(){this.path=a.geoPath().projection(this.model.projection),this.scale=this.model.projection}reset_scale(){this.set_projection(),this.trigger("domain_changed",null)}}t.GeoScale=l,t.Mercator=class extends l{},t.Albers=class extends l{},t.AlbersUSA=class extends l{},t.EquiRectangular=class extends l{},t.Orthographic=class extends l{},t.Gnomonic=class extends l{},t.Stereographic=class extends l{}},4099:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StereographicModel=t.GnomonicModel=t.OrthographicModel=t.EquiRectangularModel=t.AlbersUSAModel=t.AlbersModel=t.MercatorModel=t.GeoScaleModel=void 0;const a=s(n(9163)),o=n(175);class l extends o.ScaleModel{defaults(){return Object.assign(Object.assign({},o.ScaleModel.prototype.defaults()),{_model_name:"GeoScaleModel",_view_name:"GeoScale"})}compute_and_set_domain(e,t){}update_domain(){}}t.GeoScaleModel=l,t.MercatorModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"MercatorModel",_view_name:"Mercator",scale_factor:190,center:[0,60],rotate:[0,0]})}initialize(e,t){super.initialize(e,t),this.on_some_change(["scale_factor","center","rotate"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoMercator().center(this.get("center")).scale(this.get("scale_factor")).rotate(this.get("rotate")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}},t.AlbersModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"AlbersModel",_view_name:"Albers",scale_factor:250,center:[0,60],parallels:[29.5,45.5],precision:.1})}initialize(e,t){super.initialize(e,t),this.on_some_change(["rotate","center","parallels","scale_factor","precision"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoAlbers().rotate(this.get("rotate")).center(this.get("center")).parallels(this.get("parallels")).scale(this.get("scale_factor")).precision(this.get("precision")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}},t.AlbersUSAModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"AlbersUSAModel",_view_name:"AlbersUSA",scale_factor:1200,translate:[600,490]})}initialize(e,t){super.initialize(e,t),this.on_some_change(["scale_factor","translate"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoAlbersUsa().scale(this.get("scale_factor")).translate(this.get("translate")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}},t.EquiRectangularModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"EquiRectangularModel",_view_name:"EquiRectangular",scale_factor:145})}initialize(e,t){super.initialize(e,t),this.on_some_change(["scale_factor","center"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoEquirectangular().center(this.get("center")).scale(this.get("scale_factor")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}},t.OrthographicModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"OrthographicModel",_view_name:"Orthographic",scale_factor:145,center:[0,60],rotate:[0,0],clip_angle:90,precision:.1})}initialize(e,t){super.initialize(e,t),this.on_some_change(["scale_factor","center","clip_angle","rotate","precision"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoOrthographic().center(this.get("center")).scale(this.get("scale_factor")).clipAngle(this.get("clip_angle")).rotate(this.get("rotate")).precision(this.get("precision")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}},t.GnomonicModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"GnomonicModel",_view_name:"Gnomonic",scale_factor:145,center:[0,60],precision:.1,clip_angle:89.999})}initialize(e,t){super.initialize(e,t),this.on_some_change(["scale_factor","precision","clip_angle"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoGnomonic().clipAngle(this.get("clip_angle")).scale(this.get("scale_factor")).precision(this.get("precision")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}},t.StereographicModel=class extends l{defaults(){return Object.assign(Object.assign({},l.prototype.defaults()),{_model_name:"StereographicModel",_view_name:"StereographicModel",scale_factor:245,center:[0,60],precision:.1,rotate:[96,0],clip_angle:179.9999})}initialize(e,t){super.initialize(e,t),this.on_some_change(["scale_factor","center","clip_angle","rotate","precision"],this.create_projection,this),this.create_projection()}create_projection(){this.projection=a.geoStereographic().scale(this.get("scale_factor")).rotate(this.get("rotate")).clipAngle(this.get("clip_angle")).center(this.get("center")).precision(this.get("precision")),this.attribute_changed()}attribute_changed(){this.trigger("attribute_changed")}}},9578:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;const o=s(n(9163)),l=n(8435),c=s(n(6731)),u=n(5321),h=n(8435),d=10,f=(e,t)=>{const n=Math.cos(-t),i=Math.sin(-t);return{x:e.x*n-e.y*i,y:e.x*i+e.y*n}};class p extends u.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.selected_indices=this.model.get("selected"),this.hovered_style=this.model.get("hovered_style"),this.unhovered_style=this.model.get("unhovered_style"),this.hovered_index=this.model.get("hovered_point")?[this.model.get("hovered_point")]:null,this.display_el_classes=["element"],this.event_metadata={mouse_over:{msg_name:"hover",lookup_data:!1,hit_test:!0},element_clicked:{msg_name:"element_click",lookup_data:!1,hit_test:!0},parent_clicked:{msg_name:"background_click",hit_test:!1}},this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),this.d3el.attr("class","network"),this.parent.svg.append("defs").append("marker").attr("id","arrow").attr("refX",0).attr("refY",3).attr("markerWidth",d).attr("markerHeight",d).attr("orient","auto").append("path").attr("class","linkarrow").attr("d","M0,0 L0,6 L9,3 z"),yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw()}))}set_ranges(){this.scales.x&&this.scales.x.set_range(this.parent.padded_range("x",this.scales.x.model)),this.scales.y&&this.scales.y.set_range(this.parent.padded_range("y",this.scales.y.model))}set_positional_scales(){this.listenTo(this.scales.x||this.parent.scale_x,"domain_changed",(function(){this.model.dirty||this.updatePosition()})),this.listenTo(this.scales.y||this.parent.scale_y,"domain_changed",(function(){this.model.dirty||this.updatePosition()}))}relayout(){this.updatePosition()}updatePosition(){this.set_ranges(),this.scales.x&&this.scales.y&&(this.model.mark_data.forEach((e=>{e.x=this.scales.x.scale(e.xval)+this.scales.x.offset,e.y=this.scales.y.scale(e.yval)+this.scales.y.offset})),this.force_layout&&(this.force_layout.nodes(this.model.mark_data).force("link",o.forceLink(this.model.link_data).distance(this.model.get("link_distance"))),this.links&&this.links.data(this.model.link_data),this.nodes&&this.nodes.data(this.force_layout.nodes()),this.nodes&&this.links&&this.tick()))}initialize_additional_scales(){const e=this.scales.color;e&&(this.listenTo(e,"domain_changed",this.colorScaleUpdated),e.on("color_scale_range_changed",this.colorScaleUpdated,this));const t=this.scales.link_color;t&&this.listenTo(t,"domain_changed",this.linkColorScaleUpdated)}create_listeners(){super.create_listeners(),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"change:charge",this.updateCharge),this.listenTo(this.model,"change:static",this.updateStatic),this.listenTo(this.model,"change:link_type",this.tick),this.listenTo(this.model,"change:directed",this.tick),this.listenTo(this.model,"change:link_distance",this.updateLinkDistance),this.listenTo(this.model,"data_updated",this.relayout),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.model,"change:enable_hover",this.hide_tooltip),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.model,"change:selected",this.update_selected),this.listenTo(this.model,"change:hovered_point",this.update_hovered),this.listenTo(this.model,"change:hovered_style",this.hovered_style_updated),this.listenTo(this.model,"change:unhovered_style",this.unhovered_style_updated),this.listenTo(this.parent,"bg_clicked",(function(){this.event_dispatcher("parent_clicked")}))}draw(){this.set_ranges();const e=this.scales.x,t=this.scales.y,n=this.scales.link_color;this.d3el.selectAll(".node").remove(),this.d3el.selectAll(".link").remove(),e&&t&&this.model.mark_data.forEach((n=>{n.x=e.scale(n.xval)+e.offset,n.y=t.scale(n.yval)+t.offset}));const i=this.parent.fig.node().getBBox(),r=i.width,s=i.height;this.force_layout=o.forceSimulation().force("center",o.forceCenter(r/2,s/2)).force("forceX",o.forceX().strength(.1).x(r/2)).force("forceY",o.forceY().strength(.1).y(s/2)),e||t||this.force_layout.force("charge",o.forceManyBody().strength(this.model.get("charge"))).on("tick",this.tick.bind(this)),this.links=this.d3el.selectAll(".link").data(this.model.link_data).enter().append("path").attr("class","link").style("stroke",(e=>n?n.scale(e.value):null)).style("stroke-width",(e=>e.link_width)).attr("marker-end",this.model.directed?"url(#arrow)":null),this.force_layout.nodes(this.model.mark_data).force("link",o.forceLink(this.model.link_data).distance(this.model.get("link_distance"))),this.nodes=this.d3el.selectAll(".node").data(this.force_layout.nodes()).enter().append("g").attr("class","node").call(o.drag().on("start",this.dragstarted.bind(this)).on("drag",this.dragged.bind(this)).on("end",this.dragended.bind(this))),this.nodes.append((e=>document.createElementNS(o.namespaces.svg,e.shape))).attr("class","element").each((function(e){const t=o.select(this);for(const n in e.shape_attrs)t.attr(n,e.shape_attrs[n])})).style("fill",this.get_mark_color.bind(this)),this.nodes.append("text").attr("class","label").attr("text-anchor",(e=>"center"===e.label_display?"middle":"start")).attr("x",(e=>{let t=0;if("outside"===e.label_display)switch(e.shape){case"rect":t=e.shape_attrs.width/2+5;break;case"circle":t=e.shape_attrs.r+5;break;case"ellipse":t=e.shape_attrs.rx+5;break;default:t=0}return t})).attr("y",".31em").text((e=>e.label)).style("display",(e=>"none"===e.label_display?"none":"inline")),this.nodes.on("click",((e,t)=>{this.event_dispatcher("element_clicked",{data:e,index:t})})),this.nodes.on("mouseover",((e,t)=>{this.hover_handler({data:e,index:t})})),this.nodes.on("mouseout",(()=>{this.reset_hover_points()})),this.model.static&&(this.force_layout.tick(100),this.force_layout.stop(),this.tick())}dragstarted(e){this.model.static||(l.d3GetEvent().active||this.force_layout.alphaTarget(.4).restart(),e.fx=e.x,e.fy=e.y)}dragged(e){this.model.static||(e.fx=l.d3GetEvent().x,e.fy=l.d3GetEvent().y)}dragended(e){this.model.static||(l.d3GetEvent().active||this.force_layout.alphaTarget(.4),e.fx=null,e.fy=null)}colorScaleUpdated(){this.nodes.selectAll(".element").style("fill",this.get_mark_color.bind(this))}linkColorScaleUpdated(){const e=this.scales.link_color;this.links.style("stroke",(t=>e?e.scale(t.value):null))}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.reset_selection,this.event_listeners.element_clicked=this.click_handler)}reset_hover_points(){this.links.style("opacity",1),this.model.set("hovered_point",null),this.hovered_index=null,this.touch()}hover_handler(e){const t=e.data,n=e.index;this.model.get("highlight_links")?this.links.style("opacity",(e=>e.source.label===t.label||e.target.label===t.label?1:.1)):this.links.style("opacity",1),this.model.set("hovered_point",n,{updated_view:this}),this.touch()}reset_selection(){this.model.set("selected",null),this.selected_indices=null,this.touch()}click_handler(e){const t=e.index,n=this.model.get("selected")||[];let i=Array.from(n);const r=i.indexOf(t),s=l.d3GetEvent().ctrlKey||l.d3GetEvent().metaKey;r>-1&&s?i.splice(r,1):(s||(i=[]),i.push(t)),this.model.set("selected",0===i.length?null:i,{updated_view:this}),this.touch();let a=l.d3GetEvent();a||(a=window.event),void 0!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault()}hovered_style_updated(e,t){this.hovered_style=t,this.clear_style(e.previous("hovered_style"),this.hovered_index),this.style_updated(t,this.hovered_index)}unhovered_style_updated(e,t){this.unhovered_style=t;const n=this.hovered_index,i=n?c.range(this.model.mark_data.length).filter((e=>-1===n.indexOf(e))):[];this.clear_style(e.previous("unhovered_style"),i),this.style_updated(t,i)}update_selected(e,t){this.selected_indices=t,this.apply_styles()}update_hovered(e,t){this.hovered_index=null===t?t:[t],this.apply_styles()}apply_styles(e){null==e&&(e=[this.selected_style,this.unselected_style,this.hovered_style,this.unhovered_style]),super.apply_styles(e);const t=c.range(this.model.mark_data.length);this.set_style_on_elements(this.hovered_style,this.hovered_index);const n=this.hovered_index?c.difference(t,this.hovered_index):[];this.set_style_on_elements(this.unhovered_style,n)}clear_style(e,t){let n=this.d3el.selectAll(".element");t&&(n=n.filter(((e,n)=>-1!==t.indexOf(n))));const i={};for(const t in e)i[t]=null;h.applyStyles(n,i)}set_style_on_elements(e,t){if(!t||0===t.length)return;if(void 0!==e&&0===Object.keys(e).length)return;let n=this.d3el.selectAll(".element");n=n.filter(((e,n)=>-1!==t.indexOf(n))),h.applyStyles(n,e)}compute_view_padding(){const e=o.max(this.model.mark_data.map((function(e){return(e.shape_attrs.r||e.shape_attrs.width/2||e.shape_attrs.rx)+1}))),t=o.max(this.model.mark_data.map((e=>(e.shape_attrs.r||e.shape_attrs.height/2||e.shape_attrs.ry)+1)));e===this.xPadding&&t===this.yPadding||(this.xPadding=e,this.yPadding=e,this.trigger("mark_padding_updated"))}updateLinkDistance(){const e=this.scales.x,t=this.scales.y,n=this.model.get("link_distance");e||t||this.force_layout.linkDistance(n).start()}updateCharge(){const e=this.scales.x,t=this.scales.y,n=this.model.get("charge");e||t||this.force_layout.charge(n).start()}updateStatic(){this.model.static?this.force_layout.stop():this.force_layout.restart()}linkArc(e){const t=e.source,n=e.target,i=n.x-t.x,r=n.y-t.y,s=Math.sqrt(i*i+r*r);if(!this.model.directed)return`M${t.x},${t.y}A${s},${s} 0 0,1 ${n.x},${n.y}`;const a=e.target.shape_attrs.r||e.target.shape_attrs.width/2||e.target.shape_attrs.rx,o=f({x:i,y:r},-Math.PI/3),l=t.x+o.x,c=t.y+o.y,u={x:n.x-l,y:n.y-c},h=Math.atan((a+d)/s),p=f(u,h),m=l+p.x,_=c+p.y;return`M${t.x},${t.y}A${s},${s} 0 0,1 ${m},${_}`}linkLine(e){const t=e.source,n=e.target;if(!this.model.directed)return`M${t.x},${t.y}L${n.x},${n.y}`;const i=e.target.shape_attrs.r||e.target.shape_attrs.width/2||e.target.shape_attrs.rx,r=n.x-t.x,s=n.y-t.y,a=Math.atan2(s,r),o=n.x-(i+d)*Math.cos(a),l=n.y-(i+d)*Math.sin(a);return`M${t.x},${t.y}L${o},${l}`}linkSlantLine(e){const t=e.source,n=e.target;let i=(e.source.x+e.target.x)/2;if(!this.model.directed)return`M${t.x},${t.y}L${i},${n.y}L${n.x},${n.y}`;const r=e.target.shape_attrs.r||e.target.shape_attrs.width/2||e.target.shape_attrs.rx;let s;return i<n.x-(r+d)?s=n.x-(r+d):i>n.x+(r+d)?s=n.x+(r+d):i<=n.x?(i=n.x-(r+d),s=n.x-(r+d)):(i=n.x+(r+d),s=n.x+(r+d)),`M${t.x},${t.y}L${i},${n.y}L${s},${n.y}`}tick(){const e=this.model.get("link_type");this.nodes.attr("transform",(e=>`translate(${e.x},${e.y})`)),this.nodes.select("rect").attr("transform",(e=>`translate(${-e.shape_attrs.width/2},${-e.shape_attrs.height/2})`));let t=this.linkArc;switch(e){case"arc":default:t=this.linkArc;break;case"line":t=this.linkLine;break;case"slant_line":t=this.linkSlantLine}this.links.attr("d",t.bind(this))}set_default_style(e){}}t.Graph=p},8641:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphModel=void 0;const a=s(n(9163)),o=n(6032),l=s(n(7308));class c extends o.MarkModel{defaults(){return Object.assign(Object.assign({},o.MarkModel.prototype.defaults()),{_model_name:"GraphModel",_view_name:"Graph",node_data:[],link_matrix:[],link_data:[],charge:-600,static:!1,link_distance:100,link_type:"arc",directed:!0,highlight_links:!0,colors:a.scaleOrdinal(a.schemeCategory10).range(),x:[],y:[],color:null,link_color:null,hovered_point:null,scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"},color:{dimension:"color"}}})}initialize(e,t){super.initialize(e,t),this.on_some_change(["x","y","color","link_color","node_data","link_data","link_color"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data()}get static(){return this.get("static")}get charge(){return this.get("static")}get directed(){return this.get("directed")}get nodeData(){return this.get("node_data")}getShapeAttrs(e,t){const n={};switch(e){case"circle":n.r=t.r||15;break;case"rect":n.width=t.width||25,n.height=t.height||.8*n.width,n.rx=t.rx||0,n.ry=t.ry||0;break;case"ellipse":n.rx=t.rx||20,n.ry=t.ry||.6*n.rx;break;default:console.log("Invalid shape passed - ",e)}return n}updateNodeData(){const e=this.get("x")||[],t=this.get("y")||[],n=this.get("color")||[];this.mark_data=this.nodeData.map(((i,r)=>{const s="string"==typeof i?{label:i}:i;return s.label=s.label||"N"+r,s.label_display=s.label_display||"center",s.shape=s.shape||"circle",s.shape_attrs=this.getShapeAttrs(s.shape,s.shape_attrs||{}),s.value=s.value||null,e.length>r&&(s.xval=e[r]),t.length>r&&(s.yval=t[r]),n.length>r&&(s.color=n[r]),s}))}updateLinkData(){const e=this.get("scales").link_color;this.link_data=this.get("link_data")||[];let t=this.get("link_matrix");const n=this.get("link_color");void 0!==e&&n.length>0&&(t=n),0===this.link_data.length&&t.length>0&&t.forEach(((e,t)=>{e.forEach(((e,n)=>{null!==e&&t!=n&&this.link_data.push({source:this.mark_data[t],target:this.mark_data[n],value:e})}))}))}update_data(){this.dirty=!0,this.updateNodeData(),this.updateLinkData(),this.update_domains(),this.dirty=!1,this.trigger("data_updated")}update_domains(){const e=this.get("scales");e.x&&(!this.get("preserve_domain").x&&this.mark_data?e.x.compute_and_set_domain(this.mark_data.map((e=>e.xval)),this.model_id+"_x"):e.x.del_domain([],this.model_id+"_x")),e.y&&(!this.get("preserve_domain").y&&this.mark_data?e.y.compute_and_set_domain(this.mark_data.map((e=>e.yval)),this.model_id+"_y"):e.y.del_domain([],this.model_id+"_y")),e.color&&(!this.get("preserve_domain").color&&this.mark_data?e.color.compute_and_set_domain(this.mark_data.map((e=>e.color)),this.model_id+"_color"):e.color.del_domain([],this.model_id+"_color")),e.link_color&&(!this.get("preserve_domain").link_color&&this.link_data?e.link_color.compute_and_set_domain(this.link_data.map((e=>e.value)),this.model_id+"_link_color"):e.link_color.del_domain([],this.model_id+"_link_color"))}}t.GraphModel=c,c.serializers=Object.assign(Object.assign({},o.MarkModel.serializers),{x:l.array_or_json_serializer,y:l.array_or_json_serializer,color:l.array_or_json_serializer,link_color:l.array_or_json_serializer,link_matrix:l.array_or_json_serializer})},5314:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GridHeatMap=void 0;const o=s(n(9163)),l=n(8435),c=s(n(6731)),u=n(5321),h=n(3817),d=n(8435);class f extends u.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),this.selected_indices=this.model.get("selected"),this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.anchorStyle=this.model.get("anchor_style"),this.display_el_classes=["heatmapcell"],yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw()}))}initialize_additional_scales(){this.scales.color&&(this.listenTo(this.scales.color,"domain_changed",this.apply_styles.bind(this)),this.scales.color.on("color_scale_range_changed",this.apply_styles,this))}set_ranges(){this.scales.row&&this.scales.row.set_range(this.parent.padded_range("y",this.scales.row.model)),this.scales.column&&this.scales.column.set_range(this.parent.padded_range("x",this.scales.column.model))}set_positional_scales(){this.listenTo(this.scales.column,"domain_changed",(()=>{this.model.dirty||this.draw()})),this.listenTo(this.scales.row,"domain_changed",(()=>{this.model.dirty||this.draw()}))}expandScaleDomain(e,t,n,i){let r,s;if(n===h.AxisMode.ExpandOne){r=t.map((t=>e.scale(t)));const n=r.slice(1).map(((e,t)=>e-r[t]));if(s=0,n[0]<0?(i=!i,s=o.max(n)):s=o.min(n),i){const n=r[r.length-1]+s;return[t[0],e.invert(n)]}{const n=r[0]-s;return[e.invert(n),t[r.length-1]]}}if(n===h.AxisMode.ExpandTwo){r=t.map((t=>e.scale(t))),s=o.min(r.slice(1).map(((e,t)=>e-r[t])));const n=r[r.length-1]+s,i=r[0]-s;return[e.invert(i),e.invert(n)]}}get numRows(){return this.model.colors.length}get numColumns(){return this.model.colors[0].length}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:stroke",this.updateStroke),this.listenTo(this.model,"change:opacity",this.updateOpacity),this.d3el.on("mouseover",(()=>this.event_dispatcher("mouse_over"))).on("mousemove",(()=>this.event_dispatcher("mouse_move"))).on("mouseout",(()=>this.event_dispatcher("mouse_out"))),this.listenTo(this.parent,"bg_clicked",(()=>this.event_dispatcher("parent_clicked"))),this.listenTo(this.model,"data_updated",this.draw),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.model.on_some_change(["display_format","font_style"],this.updateLabels,this),this.listenTo(this.model,"change:selected",this.updateSelected),this.listenTo(this.model,"change:interactions",this.process_interactions)}handleClick(e){const t=e.rowNum*this.numColumns+e.columnNum,n=e.rowNum,i=e.columnNum;let r=Array.from(this.model.get("selected")||[]),s=this.indicesToCellNums(r);const a=s.indexOf(t),o=l.d3GetEvent().ctrlKey||l.d3GetEvent().metaKey;if(a>-1&&o)r.splice(a,1);else if(o||(s=[],r=[]),r.push([n,i]),s.push(this.indicesToCellNums([[n,i]])[0]),l.d3GetEvent().shiftKey){if(a>-1)return;const e=0!==s.length?this.anchorCellIndex[0]:n,t=0!==s.length?this.anchorCellIndex[1]:i;c.range(Math.min(n,e),Math.max(n,e)+1).forEach((e=>{c.range(Math.min(i,t),Math.max(i,t)+1).forEach((t=>{const n=this.indicesToCellNums([[e,t]])[0];-1===s.indexOf(n)&&(s.push(n),r.push([e,t]))}))}))}else this.anchorCellIndex=[n,i];this.model.set("selected",0===r.length?null:r,{updated_view:this}),this.touch();let u=l.d3GetEvent();u||(u=window.event),void 0!==u.cancelBubble&&(u.cancelBubble=!0),u.stopPropagation&&u.stopPropagation(),u.preventDefault(),this.selected_indices=r,this.apply_styles()}updateSelected(){this.selected_indices=this.model.get("selected"),this.apply_styles()}set_style_on_elements(e,t,n){t&&(0!==t.length||n&&0!==n.length)&&0!==Object.keys(e).length&&(n=n&&0!==n.length?n:this.filterCellsByNum(this.indicesToCellNums(t)),d.applyStyles(n,e))}set_default_style(e,t){if(!e||0===e.length&&(!t||0===t.length))return;t=t&&0!==t.length?t:this.filterCellsByNum(this.indicesToCellNums(e));const n=this.model.get("stroke"),i=this.model.get("opacity");t.style("fill",(e=>this.get_element_fill(e))).style("opacity",i).style("stroke",n)}clear_style(e,t,n){if(0===Object.keys(e).length)return;n&&0!==n.length||(n=t?this.filterCellsByNum(this.indicesToCellNums(t)):this.displayCells);const i={};for(let t in e)i[t]=null;d.applyStyles(n,i)}filterCellsByNum(e){return null==e?this.d3el.selectAll("thisNameDoesntExist"):this.displayCells.filter((t=>-1!==e.indexOf(t.cellNum)))}selected_style_updated(e,t){this.selected_style=t,this.clear_style(e.previous("selected_style"),this.selected_indices,this.selectedElements),this.style_updated(t,this.selected_indices,this.selectedElements)}unselected_style_updated(e,t){this.unselected_style=t,this.clear_style(e.previous("unselected_style"),[],this.unselectedElements),this.style_updated(t,[],this.unselectedElements)}apply_styles(){this.clear_style(this.selected_style),this.clear_style(this.unselected_style),this.clear_style(this.anchorStyle),this.set_default_style([],this.displayCells);const e=this.indicesToCellNums(this.selected_indices),t=null===e||0===e.length?[]:c.difference(c.range(this.numRows*this.numColumns),e);if(this.selectedElements=this.filterCellsByNum(e),this.set_style_on_elements(this.selected_style,this.selected_indices,this.selectedElements),this.unselectedElements=this.filterCellsByNum(t),this.set_style_on_elements(this.unselected_style,[],this.unselectedElements),null!==this.anchorCellIndex&&void 0!==this.anchorCellIndex){const e=this.indicesToCellNums([this.anchorCellIndex]);this.set_style_on_elements(this.anchorStyle,[],this.filterCellsByNum(e))}}style_updated(e,t,n){this.set_default_style(t,n),this.set_style_on_elements(e,t,n)}resetSelection(){this.model.set("selected",null),this.touch(),this.selected_indices=null,this.clear_style(this.selected_style),this.clear_style(this.unselected_style),this.clear_style(this.anchorStyle),this.set_default_style([],this.displayCells)}relayout(){this.set_ranges(),this.compute_view_padding(),this.draw()}indicesToCellNums(e){return null==e?null:e.map((e=>e[0]*this.numColumns+e[1]))}invert_point(e){}selector_changed(e,t){if(void 0===e)return this.model.set("selected",null),this.touch(),[];const n=c.range(this.numRows),i=c.range(this.numColumns),r=c.filter(i,(e=>t([this.columnPixels[e],[]]))),s=c.filter(n,(e=>t([[],this.rowPixels[e]])));let a=r.map((e=>s.map((t=>[t,e]))));a=c.flatten(a,!0),this.model.set("selected",a),this.touch()}draw(){this.set_ranges();const e=this.scales.row,t=this.scales.column,n="start"===this.model.get("row_align"),i="start"===this.model.get("column_align");let r;this.model.modes.row!==h.AxisMode.Middle&&this.model.modes.row!==h.AxisMode.Boundaries&&(r=this.expandScaleDomain(e,this.model.rows,this.model.modes.row,n),(o.min(r)<o.min(e.model.domain)||o.max(r)>o.max(e.model.domain))&&e.model.compute_and_set_domain(r,e.model.model_id)),this.model.modes.column!==h.AxisMode.Middle&&this.model.modes.column!==h.AxisMode.Boundaries&&(r=this.expandScaleDomain(t,this.model.columns,this.model.modes.column,i),(o.min(r)<o.min(t.model.domain)||o.max(r)>o.max(t.model.domain))&&t.model.compute_and_set_domain(r,t.model.model_id));const s=this.getTilePlottingData(e,this.model.rows,this.model.modes.row,n),a=this.getTilePlottingData(t,this.model.columns,this.model.modes.column,i);this.rowPixels=s.start.map(((e,t)=>[e,e+s.widths[t]])),this.columnPixels=a.start.map(((e,t)=>[e,e+a.widths[t]])),this.displayRows=this.d3el.selectAll(".heatmaprow").data(c.range(this.numRows)).join("g").attr("class","heatmaprow").attr("transform",(e=>"translate(0, "+s.start[e]+")"));const l=c.range(this.numRows).map((e=>c.range(this.numColumns).map((t=>this.model.mark_data[e*this.numColumns+t]))));this.displayCells=this.displayRows.selectAll(".heatmapcell").data(((e,t)=>l[t])).join("rect").attr("class","heatmapcell").on("click",(()=>this.event_dispatcher("element_clicked"))),this.displayCells.attr("x",((e,t)=>a.start[t])).attr("y",0).attr("width",((e,t)=>a.widths[t])).attr("height",(e=>s.widths[e.rowNum])),this.displayRows.selectAll(".heatmapcell_label").data(((e,t)=>l[t])).join("text").attr("class","heatmapcell_label").attr("x",((e,t)=>a.start[t]+a.widths[t]/2)).attr("y",(e=>s.widths[e.rowNum]/2)).style("text-anchor","middle").style("fill","black").style("pointer-events","none").style("dominant-baseline","central"),this.apply_styles(),this.updateLabels(),this.displayCells.on("click",((e,t)=>this.event_dispatcher("element_clicked",{data:e.color,index:t,rowNum:e.rowNum,columnNum:e.columnNum})))}updateStroke(){this.displayCells.style("stroke",this.model.get("stroke"))}updateOpacity(){this.displayCells.style("opacity",this.model.get("opacity"))}updateLabels(){const e=this.model.get("display_format"),t=e?o.format(e):null;let n=this.d3el.selectAll(".heatmapcell_label").text(((e,n)=>t?t(e.color):null));const i=this.model.get("font_style");for(const e in i)n=n.style(e,i[e])}getTilePlottingData(e,t,n,i){let r=t.map((t=>e.scale(t))),s=[];if(t=Array.from(t),n===h.AxisMode.Middle&&(s=t.map((t=>e.scale.bandwidth()))),n===h.AxisMode.Boundaries){const n=t.map((t=>e.scale(t)));for(let e=1;e<n.length;++e)s[e-1]=Math.abs(n[e]-n[e-1]);r=n[1]>n[0]?n.slice(0,-1):n.slice(1)}if(n===h.AxisMode.ExpandOne){let t;i?(s=r.slice(1).map(((e,t)=>Math.abs(e-r[t]))),t=o.max(e.scale.range()),s=r[0]<r[1]?Array.prototype.concat(s,[Math.abs(t-o.max(r))]):Array.prototype.concat([Math.abs(t-o.max(r))],s)):(s=r.slice(1).map(((e,t)=>Math.abs(e-r[t]))),t=o.min(e.scale.range()),t=o.min(e.scale.range()),r[1]>r[0]?(r.unshift(Math.abs(t)),s.splice(0,0,r[1]-r[0]),r.pop()):(s=Array.prototype.concat(s,[Math.abs(t-r.slice(-1)[0])]),r=Array.prototype.concat(r,t),r.splice(0,1)))}if(n===h.AxisMode.ExpandTwo){const t=r[1]-r[0]>0;let n=t?o.min(e.scale.range()):o.max(e.scale.range());r.splice(0,0,n),s=r.slice(1).map(((e,t)=>Math.abs(e-r[t]))),n=t?o.max(e.scale.range()):o.min(e.scale.range()),s[s.length]=Math.abs(n-r.slice(-1)[0])}return{start:r,widths:s}}get_element_fill(e){return null===e.color?this.model.get("null_color"):this.scales.color.scale(e.color)}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.resetSelection,this.event_listeners.element_clicked=this.handleClick)}compute_view_padding(){}}t.GridHeatMap=f},3817:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GridHeatMapModel=t.AxisMode=void 0;const a=s(n(6731)),o=n(6032),l=s(n(7308));var c;!function(e){e[e.Middle=0]="Middle",e[e.Boundaries=1]="Boundaries",e[e.ExpandOne=2]="ExpandOne",e[e.ExpandTwo=3]="ExpandTwo"}(c=t.AxisMode||(t.AxisMode={}));class u extends o.MarkModel{defaults(){return Object.assign(Object.assign({},o.MarkModel.prototype.defaults()),{_model_name:"GridHeatMapModel",_view_name:"GridHeatMap",row:null,column:null,color:null,scales_metadata:{row:{orientation:"vertical",dimension:"y"},column:{orientation:"horizontal",dimension:"x"},color:{dimension:"color"}},row_align:"start",column_align:"start",null_color:"black",stroke:"black",opacity:1,anchor_style:{},display_format:null,font_style:{}})}initialize(e,t){super.initialize(e,t),this.on_some_change(["row","column","color"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data(),this.update_domains()}update_data(){this.dirty=!0;const e=this.colors[0].length,t=[].concat.apply([],this.colors.map((e=>Array.prototype.slice.call(e,0))));this.mark_data=t.map(((t,n)=>{const i=Math.floor(n/e),r=n%e;return{rowNum:i,row:this.rows[i],column:this.columns[r],columnNum:r,color:t,cellNum:n}})),this.identifyModes(),this.update_domains(),this.dirty=!1,this.trigger("data_updated")}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=e.row,n=e.column,i=e.color;this.get("preserve_domain").row?t.del_domain([],this.model_id+"_row"):t.compute_and_set_domain(this.rows,this.model_id+"_row"),this.get("preserve_domain").column?n.del_domain([],this.model_id+"_column"):n.compute_and_set_domain(this.columns,this.model_id+"_column"),null!=i&&(this.get("preserve_domain").color?i.del_domain([],this.model_id+"_color"):i.compute_and_set_domain(this.mark_data.map((e=>e.color)),this.model_id+"_color"))}get_data_dict(e,t){return e}get colors(){return this.get("color")?this.get("color"):[[]]}get rows(){return this.get("row")?Array.from(this.get("row")):a.range(this.colors.length)}get columns(){return this.get("column")?Array.from(this.get("column")):a.range(this.colors[0].length)}identifyModes(){const e=this.get("scales"),t=e.row,n=e.column,i=this.colors.length,r=this.colors[0].length;this.modes={column:c.Middle,row:c.Middle},"ordinal"===t.type?this.modes.row=c.Middle:i===this.rows.length-1?this.modes.row=c.Boundaries:i===this.rows.length?this.modes.row=c.ExpandOne:i===this.rows.length+1&&(this.modes.row=c.ExpandTwo),"ordinal"===n.type?this.modes.column=c.Middle:r===this.columns.length-1?this.modes.column=c.Boundaries:r===this.columns.length?this.modes.column=c.ExpandOne:r===this.columns.length+1&&(this.modes.column=c.ExpandTwo)}}t.GridHeatMapModel=u,u.serializers=Object.assign(Object.assign({},o.MarkModel.serializers),{row:l.array_or_json_serializer,column:l.array_or_json_serializer,color:l.array_or_json_serializer})},3707:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HandDraw=void 0;const o=s(n(9163)),l=s(n(8435)),c=n(4154);class u extends c.Interaction{render(){super.render(),this.d3el.style("cursor","crosshair"),this.active=!1,this.setLinesView().then((()=>{this.d3el.on("mousedown",(()=>this.mousedown())),this.setLimits()})),this.model.on_some_change(["min_x","max_x"],this.setLimits,this)}setLinesView(){return a(this,void 0,void 0,(function*(){const e=this.parent,t=yield Promise.all(e.mark_views.views),n=e.mark_views._models.map((e=>e.model_id)).indexOf(this.lines.model_id);this.linesView=t[n]}))}mousedown(){this.active=!0,this.mouseEntry(!1),this.d3el.on("mousemove",this.mousemove.bind(this)),this.d3el.on("mouseleave",this.mouseup.bind(this)),this.d3el.on("mouseup",this.mouseup.bind(this))}mouseup(){this.active&&(this.mouseEntry(!0),this.lines.set("y",l.convert_dates(l.deepCopy(this.lines.y_data))),this.linesView.touch(),this.active=!1,this.d3el.on("mousemove",null),this.d3el.on("mouseleave",null),this.d3el.on("mouseup",null))}mousemove(){this.mouseEntry(!0)}mouseEntry(e){if(this.active){const t=Math.min(this.lineIndex,this.lines.x_data.length-1),n=o.mouse(this.el);e&&"previousPos"in this||(this.previousPos=n);const i=this.linesView.scales.x.scale,r=this.linesView.scales.y.scale,s=i.invert(n[0]),a=r.invert(n[1]),l=i.invert(this.previousPos[0]);r.invert(this.previousPos[1]);const c=this.nearestNeighbourSearch(this.lines.x_data[t],l),u=this.nearestNeighbourSearch(this.lines.x_data[t],s),h=Math.min(c,u),d=Math.max(c,u);for(let e=h;e<=d;++e)(!this.validMin||this.lines.x_data[t][e]>=this.minX)&&(!this.validMax||this.lines.x_data[t][e]<=this.maxX)&&(this.lines.y_data[this.lineIndex][e]=a);const f=Array.prototype.map.call(this.lines.x_data[t],((e,t)=>({x:e,y:this.lines.y_data[this.lineIndex][t]})));this.linesView.d3el.select("#curve"+(this.lineIndex+1)).attr("d",(e=>this.linesView.line(f))),this.previousPos=n}}setLimits(){"date"==this.linesView.scales.x.model.type?(this.minX=l.getDate(this.model.get("min_x")),this.validMin=!(null===this.minX||void 0===this.minX||isNaN(this.minX.getTime())),this.maxX=l.getDate(this.model.get("max_x")),this.validMax=!(null===this.maxX||void 0===this.maxX||isNaN(this.maxX.getTime()))):(this.minX=this.model.get("min_x"),this.maxX=this.model.get("max_x"),this.validMin=!(null===this.minX||void 0===this.minX),this.validMax=!(null===this.maxX||void 0===this.maxX))}nearestNeighbourSearch(e,t){const n=this.linesView.bisect(e,t);return t-e[n-1]>e[n]-t?n:n-1}get lineIndex(){return this.model.get("line_index")}get lines(){return this.model.get("lines")}}t.HandDraw=u},8922:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HandDrawModel=void 0;const a=s(n(2055)),o=n(5734);class l extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},a.WidgetModel.prototype.defaults()),{_model_name:"HandDrawModel",_view_name:"HandDraw",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:o.semver_range,_view_module_version:o.semver_range,lines:null,line_index:0,min_x:null,max_x:null})}}t.HandDrawModel=l,l.serializers=Object.assign(Object.assign({},a.DOMWidgetModel.serializers),{lines:{deserialize:a.unpack_models}})},2406:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HeatMap=void 0;const o=s(n(9163)),l=n(5321);class c extends l.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),this.image=o.select(this.el).append("image").classed("heatmap",!0).attr("width",this.parent.width).attr("height",this.parent.height),this.canvas=document.createElement("canvas"),yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw()}))}set_ranges(){if(this.scales.x){const e=this.parent.padded_range("x",this.scales.x.model);this.scales.x.set_range(e)}this.scales.y&&this.scales.y.set_range(this.parent.padded_range("y",this.scales.y.model))}set_positional_scales(){this.listenTo(this.scales.x,"domain_changed",(()=>{this.model.dirty||this.draw()})),this.listenTo(this.scales.y,"domain_changed",(()=>{this.model.dirty||this.draw()}))}initialize_additional_scales(){this.scales.color&&(this.listenTo(this.scales.color,"domain_changed",(function(){this.draw()})),this.scales.color.on("color_scale_range_changed",this.draw,this))}create_listeners(){super.create_listeners(),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"data_updated",this.draw),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")})),this.listenTo(this.model,"change:interactions",this.process_interactions)}relayout(){this.set_ranges(),this.compute_view_padding(),this.draw()}drawCanvas(){this.image.attr("href",this.canvas.toDataURL("image/png"))}draw(){this.set_ranges();const e=this.getPlottingData();this.canvas.setAttribute("width",e.totalWidth.toString()),this.canvas.setAttribute("height",e.totalHeight.toString());const t=this.canvas.getContext("2d");this.model.mark_data.color.forEach(((n,i)=>{const r=e.heights[i],s=e.yOrigin+e.yStartPoints[i];n.forEach(((n,i)=>{const a=e.widths[i],o=e.xOrigin+e.xStartPoints[i];t.fillStyle=this.getElementFill(n),t.fillRect(o,s,this.expandRect(a),this.expandRect(r))}))})),this.image.attr("width",e.totalWidth).attr("height",e.totalHeight).attr("x",e.x0).attr("y",e.y0),this.drawCanvas()}expandRect(e){return e>0?e+.5:e-.5}getPlottingData(){const e=Array.from(this.model.mark_data.x).map(this.scales.x.scale),t=Array.from(this.model.mark_data.y).map(this.scales.y.scale),n=this.scales.x.model.get("reverse"),i=this.scales.y.model.get("reverse"),r=this.getPadding(e,t),s=this.computeRectSizes(e,r.left,r.right),a=this.computeRectSizes(t,r.bottom,r.top,!0),o=Math.abs(e[e.length-1]-e[0]+r.left+r.right),l=Math.abs(t[0]-t[t.length-1]+r.top+r.bottom),c=e[0]-r.left,u=t[t.length-1]-r.top;return{widths:s,heights:a,totalWidth:o,totalHeight:l,xOrigin:n?o:0,yOrigin:i?l:0,xStartPoints:e.map(((t,n)=>0==n?0:.5*(t+e[n-1])-c)),yStartPoints:t.map(((e,n)=>n==t.length-1?0:.5*(e+t[n+1])-u)),x0:n?c-o:c,y0:i?u-l:u}}getPadding(e,t){const n=e.length,i=t.length;return{left:.5*(e[1]-e[0]),right:.5*(e[n-1]-e[n-2]),bottom:.5*-(t[1]-t[0]),top:.5*-(t[i-1]-t[i-2])}}computeRectSizes(e,t,n,i=!1){const r=i?-1:1;return e.map(((i,s)=>0==s?r*(e[1]-i)*.5+t:s==e.length-1?r*(i-e[s-1])*.5+n:r*(e[s+1]-e[s-1])*.5))}getElementFill(e){return null===e?this.model.get("null_color"):this.scales.color.scale(e)}clear_style(e,t,n){}compute_view_padding(){}set_default_style(e,t){}set_style_on_elements(e,t,n){}}t.HeatMap=c},4733:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HeatMapModel=void 0;const a=n(6032),o=s(n(7308));class l extends a.MarkModel{defaults(){return Object.assign(Object.assign({},a.MarkModel.prototype.defaults()),{_model_name:"HeatMapModel",_view_name:"HeatMap",x:[],y:[],color:null,scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"},color:{dimension:"color"}},null_color:"black"})}initialize(e,t){super.initialize(e,t),this.on_some_change(["x","y","color"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data(),this.update_domains()}update_data(){this.dirty=!0,this.mark_data={x:this.get("x"),y:this.get("y"),color:this.get("color")},this.update_domains(),this.dirty=!1,this.trigger("data_updated")}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=[].concat.apply([],this.mark_data.color.map((e=>Array.prototype.slice.call(e,0))));this.get("preserve_domain").x?e.x.del_domain([],this.model_id+"_x"):e.x.compute_and_set_domain(this.mark_data.x,this.model_id+"_x"),this.get("preserve_domain").y?e.y.del_domain([],this.model_id+"_y"):e.y.compute_and_set_domain(this.mark_data.y,this.model_id+"_y"),null!==e.color&&void 0!==e.color&&(this.get("preserve_domain").color?e.color.del_domain([],this.model_id+"_color"):e.color.compute_and_set_domain(t,this.model_id+"_color"))}}t.HeatMapModel=l,l.serializers=Object.assign(Object.assign({},a.MarkModel.serializers),{x:o.array_or_json_serializer,y:o.array_or_json_serializer,color:o.array_or_json_serializer})},1188:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Hist=void 0;const o=s(n(6731)),l=s(n(9163)),c=n(8435),u=s(n(8435)),h=n(5321),d=n(8435);class f extends h.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.selected_indices=this.dataIndexToBarIndex(this.model.get("selected")),this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.display_el_classes=["rect","legendtext"],this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.draw(),this.update_selected(this.model,this.model.get("selected"))}))}set_ranges(){const e=this.scales.sample;e&&e.set_range(this.parent.padded_range("x",e.model));const t=this.scales.count;t&&t.set_range(this.parent.padded_range("y",t.model))}set_positional_scales(){const e=this.scales.sample,t=this.scales.count;this.listenTo(e,"domain_changed",(function(){this.model.dirty||this.model.update_data()})),this.listenTo(t,"domain_changed",(function(){this.model.dirty||this.draw()}))}create_listeners(){super.create_listeners(),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.model,"data_updated",this.draw),this.listenTo(this.model,"change:colors",this.updateColors),this.model.on_some_change(["stroke","opacities"],this.updateStrokeAndOpacities,this),this.listenTo(this.model,"change:selected",this.update_selected),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.parent,"bg_clicked",(function(){this.event_dispatcher("parent_clicked")}))}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.resetSelection,this.event_listeners.element_clicked=this.barClickHandler)}updateColors(){this.d3el.selectAll(".bargroup").selectAll("rect").style("fill",(e=>this.get_colors(e.index))),this.model.get("labels")&&this.d3el.selectAll(".bargroup").selectAll("text").style("fill",(e=>this.get_colors(e.index))),this.legend_el&&(this.legend_el.selectAll("rect").style("fill",(e=>this.get_colors(e.index))),this.legend_el.selectAll("text").style("fill",(e=>this.get_colors(e.index))))}updateStrokeAndOpacities(){const e=this.model.get("stroke"),t=this.model.get("opacities");this.d3el.selectAll(".rect").style("stroke",e).style("opacity",(e=>t[e.index]))}computeBarWidth(){const e=this.scales.sample;let t=(e.scale(this.model.maxX)-e.scale(this.model.minX))/this.model.bins;return t>=10&&(t-=2),t}relayout(){this.set_ranges();const e=this.scales.sample,t=this.scales.count;this.d3el.selectAll(".bargroup").attr("transform",((n,i)=>"translate("+e.scale(n.bin.x0)+","+t.scale(this.model.count[i])+")"));const n=this.computeBarWidth();this.d3el.selectAll(".bargroup").select("rect").transition("relayout").duration(this.parent.model.get("animation_duration")).attr("x",2).attr("width",n).attr("height",((e,n)=>t.scale(0)-t.scale(this.model.count[n])))}draw(){this.set_ranges();const e=this.scales.sample,t=this.scales.count,n=this.computeBarWidth();let i=this.d3el.selectAll(".bargroup").data(this.model.mark_data);i.exit().remove();const r=i.enter().append("g").attr("class","bargroup");r.append("rect").attr("class","rect").attr("x",2).attr("width",0).attr("height",0),i=r.merge(i),i.attr("transform",((n,i)=>"translate("+e.scale(n.bin.x0)+","+t.scale(this.model.count[i])+")")),i.select(".rect").style("fill",((e,t)=>this.get_colors(e.index))).on("click",((e,t)=>this.event_dispatcher("element_clicked",{data:e,index:e.index}))).attr("id",((e,t)=>"rect"+t)).transition("draw").duration(this.parent.model.get("animation_duration")).attr("width",n).attr("height",((e,n)=>t.scale(0)-t.scale(this.model.count[n]))),this.bin_pixels=this.model.xBins.map((t=>e.scale(t)+e.offset)),this.pixel_coords=this.model.mark_data.map(((i,r)=>{const s=e.scale(i.bin.x0),a=t.scale(0),o=t.scale(this.model.count[r]);return[[s,s+n],[a,o]]})),this.updateStrokeAndOpacities()}barClickHandler(e){const t=e.index,n=this.selected_indices;let i=n?u.deepCopy(n):[];const r=i.indexOf(t),s=c.d3GetEvent().ctrlKey||c.d3GetEvent().metaKey;if(r>-1&&s)i.splice(r,1);else if(c.d3GetEvent().shiftKey){if(r>-1)return;const e=0!==i.length?l.min(i):-1,n=0!==i.length?l.max(i):this.model.mark_data.length;t>n?o.range(n+1,t+1).forEach((e=>{i.push(e)})):t<e&&o.range(t,e).forEach((e=>{i.push(e)}))}else s||(i=[]),i.push(t);this.selected_indices=i,this.model.set("selected",0===i.length?null:this.computeDataIndices(i),{updated_view:this}),this.touch();const a=c.d3GetEvent();void 0!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault()}draw_legend(e,t,n,i,r){this.legend_el=e.selectAll(".legend"+this.uuid).data([this.model.mark_data[0]]);const s=.8*r,a=this.legend_el.enter().append("g").attr("class","legend"+this.uuid).attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).on("mouseover",(()=>{this.event_dispatcher("legend_mouse_over")})).on("mouseout",(()=>{this.event_dispatcher("legend_mouse_out")})).on("click",(()=>{this.event_dispatcher("legend_clicked")}));a.append("rect").style("fill",((e,t)=>this.get_colors(t))).attr("x",0).attr("y",0).attr("width",s).attr("height",s),a.append("text").attr("class","legendtext").attr("x",1.2*s).attr("y",s/2).attr("dy","0.35em").text(((e,t)=>this.model.get("labels")[t])).style("fill",((e,t)=>this.get_colors(t))),this.legend_el=a.merge(this.legend_el);const o=l.max(this.model.get("labels"),(e=>e.length));return this.legend_el.exit().remove(),[1,o]}update_selected(e,t){this.selected_indices=this.dataIndexToBarIndex(t),this.apply_styles()}clear_style(e,t){let n=this.d3el.selectAll(".bargroup");t&&(n=n.filter(((e,n)=>-1!==t.indexOf(n))));const i={};for(const t in e)i[t]=null;d.applyStyles(n.selectAll(".bar"),i)}set_default_style(e,t){this.updateColors(),this.updateStrokeAndOpacities()}set_style_on_elements(e,t){if(null==t||0===t.length)return;if(0===Object.keys(e).length)return;let n=this.d3el.selectAll(".bargroup");n=n.filter(((e,n)=>-1!==t.indexOf(n))),d.applyStyles(n.selectAll(".rect"),e)}invert_point(e){if(void 0===e)return this.model.set("selected",null),void this.touch();const t=this.computeBarWidth(),n=this.bin_pixels.map((n=>Math.abs(n+t/2-e))),i=n.indexOf(l.min(n));this.model.set("selected",this.computeDataIndices([i])),this.touch()}selector_changed(e,t){if(void 0===e)return this.model.set("selected",null),this.touch(),[];const n=this.pixel_coords,i=new Uint32Array(o.range(n.length)).filter((e=>t(n[e])));this.model.set("selected",this.computeDataIndices(i)),this.touch()}computeDataIndices(e){const t=this.reduceIntervals(e);if(0===t.length)return[];const n=this.model.get("sample"),i=t.length;return new Uint32Array(o.range(n.length)).filter((e=>{const r=n[e];for(let e=0;e<i;e++)if(r<=t[e][1]&&r>=t[e][0])return!0;return!1}))}reduceIntervals(e){const t=[],n=this.model.bins,i=(this.model.maxX-this.model.minX)/this.model.bins;if(0!==e.length){e.sort();let r=e[0],s=e[0];for(let a=1;a<e.length;a++)e[a]===s+1?s++:(t.push([this.model.xBins[r],s+1==n?this.model.xBins[n-1]+i:this.model.xBins[s+1]]),r=s=e[a]);t.push([this.model.xBins[r],s+1==n?this.model.xBins[n-1]+i:this.model.xBins[s+1]])}return t}dataIndexToBarIndex(e){if(null===e)return null;const t=this.model.get("sample"),n=Array.from(e).map((e=>t[e]));let i=[];for(let e=0;e<n.length;e++){let t=Math.min(o.indexOf(this.model.xBins,n[e],!0),this.model.xBins.length-2);-1===t&&(t=o.sortedIndex(this.model.xBins,n[e])-1),i.push(t)}return i.sort(),i=o.uniq(i,!0),i}resetSelection(){this.selected_indices=[],this.model.set("selected",null),this.touch()}compute_view_padding(){}}t.Hist=f},43:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HistModel=void 0;const a=s(n(9163)),o=n(6032),l=s(n(7308));class c extends o.MarkModel{defaults(){return Object.assign(Object.assign({},o.MarkModel.prototype.defaults()),{_model_name:"HistModel",_view_name:"Hist",sample:[],count:[],scales_metadata:{sample:{orientation:"horizontal",dimension:"x"},count:{orientation:"vertical",dimension:"y"}},bins:10,midpoints:[],colors:["steelblue"],stroke:null,opacities:[],normalized:!1})}initialize(e,t){super.initialize(e,t),this.mark_data=[],this.on_some_change(["bins","sample","preserve_domain"],this.update_data,this),this.update_data(),this.on("change:normalized",(()=>{this.normalizeData(!0)})),this.normalizeData(!0)}update_data(){const e=this.get("scales").sample;if(0==this.sample.length)this.mark_data=[],this.xMid=[],this.count=[],this.xBins=[];else{this.get("preserve_domain").sample?e.del_domain([],this.model_id+"_sample"):e.compute_and_set_domain(this.sample,this.model_id+"_sample"),this.minX=e.domain[0],this.maxX=e.domain[1];const t=this.sample.filter((e=>e<=this.maxX&&e>=this.minX)),n=Array.prototype.map.call(t,((e,t)=>({index:t,value:e})));this.xBins=a.range(this.minX,this.maxX,(this.maxX-this.minX)/this.bins),this.xMid=this.xBins.map(((e,t)=>.5*(e+this.xBins[t-1]))).slice(1);const i=a.histogram().thresholds(this.xBins).value((e=>e.value))(n);this.mark_data=i.map(((e,t)=>({bin:e,index:t})))}this.normalizeData(!1),this.set("midpoints",this.xMid),this.set("count",new Float64Array(this.count)),this.update_domains(),this.save_changes(),this.trigger("data_updated")}normalizeData(e){if(this.count=this.mark_data.map((e=>e.bin.length)),this.get("normalized")){let e=1;this.mark_data.length>0&&(e=this.mark_data[0].bin.x1-this.mark_data[0].bin.x0);const t=this.count.reduce(((e,t)=>e+t),0);0!=t&&(this.count=this.count.map((n=>n/(t*e))))}e&&(this.set("count",new Float64Array(this.count)),this.update_domains(),this.save_changes(),this.trigger("data_updated"))}get_data_dict(e,t){const n={};return n.midpoint=this.xMid[t],n.bin_start=this.xBins[t],n.bin_end=this.xBins[t+1],n.index=t,n.count=this.count[t],n}update_domains(){if(!this.mark_data)return;const e=this.get("scales").count;this.get("preserve_domain").count||e.set_domain([0,1.05*a.max(this.count)],this.model_id+"_count")}get sample(){return this.get("sample")}get bins(){return this.get("bins")}}t.HistModel=c,c.serializers=Object.assign(Object.assign({},o.MarkModel.serializers),{sample:l.array_or_json_serializer,count:l.array_or_json_serializer})},8935:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;const a=s(n(9163)),o=n(5321),l=s(n(6731));class c extends o.Mark{render(){const e=super.render(),t=this.d3el||this.el;this.im=t.append("image").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("preserveAspectRatio","none").classed("image_pixelated",this.model.get("pixelated")),this.update_image(),this.event_metadata={mouse_over:{msg_name:"hover",lookup_data:!1,hit_test:!0},legend_clicked:{msg_name:"legend_click",hit_test:!0},element_clicked:{msg_name:"element_click",lookup_data:!1,hit_test:!1},parent_clicked:{msg_name:"background_click",hit_test:!1}};const n=this;return e.then((()=>{n.event_listeners={},n.reset_click(),n.create_listeners(),n.listenTo(n.parent,"margin_updated",(()=>{n.draw(!1)}))}))}set_positional_scales(){const e=this.scales.x,t=this.scales.y;this.listenTo(e,"domain_changed",(function(){this.model.dirty||this.draw()})),this.listenTo(t,"domain_changed",(function(){this.model.dirty||this.draw()}))}set_ranges(){const e=this.scales.x,t=this.scales.y;e&&e.set_range(this.parent.padded_range("x",e.model)),t&&t.set_range(this.parent.padded_range("y",t.model))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:image",this.update_image),this.listenTo(this.model,"data_updated",(function(){this.draw(!0)})),this.listenTo(this.model,"change:pixelated",(()=>{this.im.classed("image_pixelated",this.model.get("pixelated"))}))}update_image(){this.im.attr("href")&&URL.revokeObjectURL(this.im.attr("href"));const e=this.model.get("image");if("url"===e.get("format")){const t=new TextDecoder("utf-8").decode(e.get("value"));this.im.attr("href",t)}else{const t=new Blob([e.get("value")],{type:"image/"+e.get("format")}),n=URL.createObjectURL(t);this.im.attr("href",n)}}remove(){URL.revokeObjectURL(this.im.attr("href")),super.remove()}relayout(){this.draw(!0)}img_send_message(e,t){const n=this.event_metadata[e],i={click_x:this.scales.x.invert(a.mouse(this.el)[0]),click_y:this.scales.y.invert(a.mouse(this.el)[1])};this.send({event:n.msg_name,data:i})}draw(e){this.set_ranges();const t=this.scales.x?this.scales.x:this.parent.scale_x,n=this.scales.y?this.scales.y:this.parent.scale_y,i=e?this.parent.model.get("animation_duration"):0,r=this.d3el||this.el,s=this.model.mark_data.x.map(t.scale),o=this.model.mark_data.y.map(n.scale);r.selectAll("image").transition().duration(i).attr("transform",(e=>"translate("+(s[0]+t.offset)+","+(o[1]+n.offset)+") scale("+(s[1]-s[0])+", "+(o[0]-o[1])+")")),r.on("click",l.bind((function(e,t){this.img_send_message("element_clicked",{data:a.event,index:t})}),this))}clear_style(e,t,n){}compute_view_padding(){}set_default_style(e,t){}set_style_on_elements(e,t,n){}}t.Image=c},2038:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageModel=void 0;const a=s(n(2055)),o=n(6032),l=s(n(7308));class c extends o.MarkModel{defaults(){return Object.assign(Object.assign({},o.MarkModel.prototype.defaults()),{_model_name:"ImageModel",_view_name:"Image",pixelated:!1,x:[0,1],y:[0,1],scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"}}})}initialize(e,t){super.initialize(e,t),this.on_some_change(["x","y"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data()}update_data(){this.mark_data={x:this.get("x"),y:this.get("y")},this.update_domains(),this.trigger("data_updated")}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=e.x,n=e.y;t&&(this.get("preserve_domain").x?t.del_domain([],this.model_id+"_x"):t.compute_and_set_domain(this.mark_data.x,this.model_id+"_x")),n&&(this.get("preserve_domain").y?n.del_domain([],this.model_id+"_y"):n.compute_and_set_domain(this.mark_data.y,this.model_id+"_y"))}}t.ImageModel=c,c.serializers=Object.assign(Object.assign({},o.MarkModel.serializers),{image:{deserialize:a.unpack_models},x:l.array_or_json_serializer,y:l.array_or_json_serializer})},6319:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IndexSelector=void 0;const a=s(n(9163)),o=s(n(6731)),l=n(3133);class c extends l.BaseXSelector{render(){super.render(),this.active=!1,this.dirty=!1;const e=this,t=this.create_scales();Promise.all([this.mark_views_promise,t]).then((()=>{e.line=e.d3el.append("line").attr("class","selector indsel").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",e.height).attr("stroke-width",e.model.get("line_width")).attr("pointer-events","none").attr("visibility","hidden"),e.color_change(),e.background=e.d3el.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class","selector selectormouse").attr("pointer-events","all").attr("visibility","hidden"),e.background.on("mousemove",o.bind(e.mousemove,e)).on("click",o.bind(e.initial_click,e)),e.create_listeners(),e.selected_changed()}))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:color",this.color_change)}color_change(){null!==this.model.get("color")&&this.line.style("stroke",this.model.get("color"))}initial_click(){this.line.attr("visibility","visible"),this.click(),this.background.on("click",o.bind(this.click,this))}click(){this.active=!this.active}mousemove(){if(!this.active||this.dirty)return;this.dirty=!0;const e=a.mouse(this.background.node())[0];this.line.attr("x1",e).attr("x2",e),this.set_selected("selected",[this.invert_pixel(e)]),o.each(this.mark_views,(t=>{t.invert_point(e)})),this.touch(),this.dirty=!1}invert_pixel(e){return this.scale.invert(e)}reset(){this.active=!1,void 0!==this.line&&null!==this.line&&this.line.attr("x1",0).attr("x2",0).attr("visibility","hidden"),void 0!==this.background&&null!==this.background&&this.background.on("click",o.bind(this.initial_click,this)),this.model.set("selected",null),o.each(this.mark_views,(e=>{e.invert_point()})),this.touch()}update_scale_domain(e){super.update_scale_domain(),!0!==e&&this.selected_changed()}selected_changed(){if(this.dirty)return;const e=this.model.get("selected")||[];if(0===e.length)this.reset();else{if(1!=e.length)return;{const t=this.scale.scale(e[0]);void 0!==this.line&&null!==this.line&&this.line.attr("x1",t).attr("x2",t).attr("visibility","visible"),this.background.on("click",o.bind(this.click,this)),o.each(this.mark_views,(e=>{e.invert_point(t)}))}}}relayout(){super.relayout(),this.line.attr("y1",0).attr("y2",this.height),this.background.attr("width",this.width).attr("height",this.height),this.set_range([this.scale])}set_range(e){for(let t=0;t<e.length;t++)e[t].set_range([0,this.width])}}t.IndexSelector=c},4154:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Interaction=void 0;const a=s(n(2055)),o=s(n(9163)),l=s(n(6731));class c extends a.WidgetView{initialize(e){this.setElement(document.createElementNS(o.namespaces.svg,"rect")),this.d3el=o.select(this.el),super.initialize.call(this,e)}render(){this.parent=this.options.parent,this.d3el.attr("x",0).attr("y",0).attr("width",this.parent.width-this.parent.margin.left-this.parent.margin.right).attr("height",this.parent.height-this.parent.margin.top-this.parent.margin.bottom).attr("pointer-events","all").attr("visibility","hidden"),this.listenTo(this.parent,"margin_updated",this.relayout)}relayout(){this.d3el.attr("width",this.parent.width-this.parent.margin.left-this.parent.margin.right).attr("height",this.parent.height-this.parent.margin.top-this.parent.margin.bottom)}remove(){l.each(this.mark_views,(e=>{e.invert_range()})),this.d3el.remove(),super.remove.apply(this)}}t.Interaction=c},9696:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;const a=s(n(9163)),o=n(8165);class l extends o.ScatterBase{create_listeners(){super.create_listeners(),this.model.on_some_change(["font_weight","default_size","colors","align","font_unit"],this.update_style,this),this.model.on_some_change(["x","y","x_offset","y_offset","rotate_angle"],this.update_position,this)}update_opacities(e){if(!this.model.dirty){const t=!0===e?this.parent.model.get("animation_duration"):0,n=this;this.d3el.selectAll(".label").transition("update_opacities").duration(t).style("opacity",((e,t)=>n.get_element_opacity(e,t)))}}update_default_size(e){if(this.compute_view_padding(),!this.model.dirty){const t=!0===e?this.parent.model.get("animation_duration"):0,n=this;this.d3el.selectAll(".label").transition("update_default_size").duration(t).style("font-size",((e,t)=>n.get_element_size(e)))}}relayout(){this.set_ranges(),this.update_position()}draw_elements(e,t){t.append("text").classed("label element",!0),this.update_text(),this.update_style(),this.update_opacities(!0)}update_text(){this.d3el.selectAll(".object_grp").select(".label").text((e=>e.text))}get_element_size(e){const t=this.scales.size,n=this.model.get("font_unit");return t&&void 0!==e.size?t.scale(e.size)+n:this.model.get("default_size")+n}get_element_rotation(e){const t=this.scales.rotation;return t&&e.rotation?"rotate("+t.scale(e.rotation)+")":"rotate("+this.model.get("rotate_angle")+")"}update_position(){const e=this,t=this.x_scale,n=this.y_scale,i=this.model.get("x_offset"),r=this.model.get("y_offset");this.d3el.selectAll(".object_grp").attr("transform",(s=>"translate("+(t.scale(s.x)+t.offset+i)+","+(n.scale(s.y)+n.offset+r)+")"+e.get_element_rotation(s)))}update_style(){const e=this;this.d3el.selectAll(".object_grp").select("text").attr("dominant-baseline","central").style("font-size",((t,n)=>e.get_element_size(t))).style("font-weight",this.model.get("font_weight")).style("text-anchor",this.model.get("align")),this.d3el.selectAll(".label").style("fill",this.get_mark_color.bind(this))}color_scale_updated(e){const t=!0===e?this.parent.model.get("animation_duration"):0;this.d3el.selectAll(".object_grp").select("text").transition("color_scale_updated").duration(t).style("fill",this.get_mark_color.bind(this))}set_default_style(e){if(!e||0===e.length)return;const t=this.d3el.selectAll(".element").filter(((t,n)=>-1!==e.indexOf(n))),n=this;t.style("font-size",((e,t)=>n.get_element_size(e))).style("font-weight",this.model.get("font_weight")).style("text-anchor",this.model.get("align")).style("fill",this.get_mark_color.bind(this))}set_drag_style(e,t,n){const i=this.model.get("drag_size")*this.model.get("default_size")+this.model.get("font_unit");a.select(n).select("text").classed("drag_label",!0).transition("set_drag_style").style("font-size",i)}reset_drag_style(e,t,n){a.select(n).select("text").classed("drag_label",!1).transition("reset_drag_style").style("font-size",this.get_element_size(e))}update_default_skew(){}}t.Label=l},4519:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LabelModel=void 0;const a=s(n(9163)),o=n(988),l=s(n(7308));class c extends o.ScatterBaseModel{defaults(){return Object.assign(Object.assign({},o.ScatterBaseModel.prototype.defaults()),{_model_name:"LabelModel",_view_name:"Label",x_offset:0,y_offset:0,colors:a.scaleOrdinal(a.schemeCategory10).range(),rotate_angle:0,text:null,default_size:16,drag_size:1,font_unit:"px",font_weight:"bold",align:"start"})}initialize(e,t){super.initialize(e,t),this.on("change:text",this.update_data,this)}update_mark_data(){super.update_mark_data();const e=this.get("text");this.mark_data.forEach(((t,n)=>{t.text=e[n]}))}update_unique_ids(){this.mark_data.forEach(((e,t)=>{e.unique_id="Label"+t}))}}t.LabelModel=c,c.serializers=Object.assign(Object.assign({},o.ScatterBaseModel.serializers),{text:l.array_or_json_serializer})},8793:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LassoSelector=void 0;const a=s(n(9163)),o=n(8435),l=s(n(6731)),c=n(3133),u=s(n(4343));class h extends c.BaseXYSelector{render(){super.render();const e=this.create_scales();this.line=a.line(),this.all_vertices={},this.lasso_counter=0;const t=this;Promise.all([this.mark_views_promise,e]).then((()=>{const e=a.drag().on("start",(()=>{t.drag_start()})).on("drag",(()=>{t.drag_move()})).on("end",(()=>{t.drag_end()}));a.select(window).on("keydown",(()=>{this.keydown()})),t.d3el.attr("class","lassoselector"),t.background=t.d3el.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("visibility","hidden").attr("pointer-events","all").style("cursor","crosshair").call(e),t.create_listeners()}))}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:color",this.change_color)}change_color(e,t){t&&this.d3el.selectAll("path").style("stroke",t)}create_new_lasso(){const e=this.d3el.append("path").attr("id","l"+ ++this.lasso_counter).on("click",(function(){const e=a.select(this);e.classed("selected",!e.classed("selected"))})),t=this.model.get("color");t&&e.style("stroke",t)}drag_start(){this.current_vertices=[],this.create_new_lasso()}drag_move(){this.current_vertices.push(a.mouse(this.background.node())),this.d3el.select("#l"+this.lasso_counter).attr("d",this.line(this.current_vertices))}drag_end(){const e="l"+this.lasso_counter;this.d3el.select("#"+e).attr("d",this.line(this.current_vertices)+"Z"),this.all_vertices[e]=this.current_vertices,this.update_mark_selected(this.all_vertices)}update_mark_selected(e){void 0!==e&&0!==e.length||l.each(this.mark_views,(e=>e.selector_changed()));const t=function(t){for(const n in e)if(u.point_in_lasso(t,e[n]))return!0;return!1},n=function(t){for(const n in e)if(u.lasso_inter_rect(t[0],t[1],e[n]))return!0;return!1};l.each(this.mark_views,(e=>{e.selector_changed(t,n)}),this)}relayout(){super.relayout(),this.background.attr("width",this.width).attr("height",this.height)}keydown(){if(46===o.d3GetEvent().keyCode){const e=this.d3el.selectAll(".selected"),t=this.all_vertices;e.each((function(){const e=a.select(this).attr("id");delete t[e]})),e.remove(),this.update_mark_selected(this.all_vertices)}}reset(){this.lasso_counter=0,this.all_vertices={},this.d3el.selectAll("path").remove(),this.update_mark_selected()}selected_changed(){}}t.LassoSelector=h},2739:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isLinearScale=t.LinearScale=void 0;const a=s(n(347)),o=n(4408);class l extends o.Scale{render(){this.scale=a.scaleLinear(),this.model.domain.length>0&&this.scale.domain(this.model.domain),this.offset=0,this.create_event_listeners()}expand_domain(e,t){const n=this.scale.copy();n.clamp(!1),this.model.domain.length?n.domain(this.model.domain):console.error("No domain exists for scale, is that any data associated with this scale?"),n.range(e),this.scale.domain(t.map((e=>n.invert(e))))}invert(e){return this.scale.invert(e)}invert_range(e){return e.map((e=>this.invert(e)))}}t.LinearScale=l,t.isLinearScale=function(e){return"linear"===e.model.type}},6946:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LinearScaleModel=void 0;const a=s(n(6731)),o=s(n(9163)),l=n(175);class c extends l.ScaleModel{defaults(){return Object.assign(Object.assign({},l.ScaleModel.prototype.defaults()),{_model_name:"LinearScaleModel",_view_name:"LinearScale",min:null,max:null,min_range:.6,mid_range:.8})}typedRange(e){return new Float64Array(e.map(Number))}set_init_state(){this.type="linear",this.global_min=Number.NEGATIVE_INFINITY,this.global_max=Number.POSITIVE_INFINITY}set_listeners(){this.on("change:reverse",this.reverse_changed,this),this.reverse_changed(void 0,void 0,void 0),this.on_some_change(["min","max"],this.min_max_changed,this),this.min_max_changed(),this.on_some_change(["min_range","mid_range","stabilized"],this.update_domain,this)}min_max_changed(){this.min=this.get("min"),this.max=this.get("max"),this.min_from_data=null===this.min,this.max_from_data=null===this.max,this.update_domain()}reverse_changed(e,t,n){const i=void 0!==e&&e.previous("reverse");this.reverse=this.get("reverse");const r=(i+this.reverse)%2;this.domain.length>0&&1===r&&(this.domain.reverse(),this.trigger("domain_changed",this.domain))}update_domain(){const e=this;if(a.every(this.domains,(e=>0===e.length)))return this.domain=this.reverse?[1,0]:[0,1],void this.trigger("domain_changed",this.domain);const t=this.min_from_data?o.min(a.map(this.domains,(t=>t.length>0?t[0]:e.global_max))):this.min,n=this.max_from_data?o.max(a.map(this.domains,(t=>t.length>1?t[1]:e.global_min))):this.max,i=.5*(t+n),r=.5*(n-t)/this.get("mid_range"),s=this.domain,l=this.reverse?1:0,c=s[l],u=s[1-l],h=.5*(u+c),d=.5*(u-c)*this.get("min_range"),f=this.get("stabilized");if(f?!(t>=c&&t<=h-d&&n<=u&&n>=h+d):t!==c||n!==u){const e=f?i-r:t,s=f?i+r:n;this.domain=this.reverse?[s,e]:[e,s],this.trigger("domain_changed",this.domain)}}compute_and_set_domain(e,t){if(!e||0===e.length)return void this.set_domain([],t);const n=e[0]instanceof Array?e:[e],i=o.min(n.map((e=>o.min(e)))),r=o.max(n.map((e=>o.max(e))));this.set_domain([i,r],t)}}t.LinearScaleModel=c},2969:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Lines=void 0;const o=s(n(6731)),l=s(n(9163)),c=n(5321),u=s(n(457)).symbol;class h extends c.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.dot=u().size(this.model.get("marker_size")),this.model.get("marker")&&this.dot.type(this.model.get("marker")),this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),this.display_el_classes=["line","legendtext","dot"],yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw(!1)}))}set_ranges(){const e=this.scales.x;e&&e.set_range(this.parent.padded_range("x",e.model));const t=this.scales.y;t&&t.set_range(this.parent.padded_range("y",t.model))}set_positional_scales(){const e=this.scales.x,t=this.scales.y;this.listenTo(e,"domain_changed",(function(){this.model.dirty||this.update_line_xy()})),this.listenTo(t,"domain_changed",(function(){this.model.dirty||this.update_line_xy()}))}initialize_additional_scales(){const e=this.scales.color;e&&(this.listenTo(e,"domain_changed",(function(){this.update_style()})),e.on("color_scale_range_changed",this.update_style,this))}create_listeners(){super.create_listeners(),this.d3el.on("mouseover",o.bind((()=>{this.event_dispatcher("mouse_over")}),this)).on("mousemove",o.bind((()=>{this.event_dispatcher("mouse_move")}),this)).on("mouseout",o.bind((()=>{this.event_dispatcher("mouse_out")}),this)),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.model,"change:interpolation",this.update_path_style),this.listenTo(this.model,"change:close_path",this.update_path_style),this.listenTo(this.model,"change:colors",this.update_style),this.listenTo(this.model,"change:opacities",this.update_style),this.listenTo(this.model,"change:fill_opacities",this.update_style),this.listenTo(this.model,"change:fill_colors",this.update_style),this.listenTo(this.model,"change:fill",this.update_fill),this.listenTo(this.model,"data_updated",(function(){this.draw(!0)})),this.listenTo(this.model,"labels_updated",this.update_labels),this.listenTo(this.model,"change:stroke_width",this.update_stroke_width),this.listenTo(this.model,"change:labels_visibility",this.update_legend_labels),this.listenTo(this.model,"change:curves_subset",this.update_curves_subset),this.listenTo(this.model,"change:line_style",this.update_line_style),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.parent,"bg_clicked",(function(){this.event_dispatcher("parent_clicked")})),this.listenTo(this.model,"change:marker",this.update_marker),this.listenTo(this.model,"change:marker_size",this.update_marker_size)}update_legend_labels(){"none"===this.model.get("labels_visibility")?(this.d3el.selectAll(".legend").attr("display","none"),this.d3el.selectAll(".curve_label").attr("display","none")):"label"===this.model.get("labels_visibility")?(this.d3el.selectAll(".legend").attr("display","none"),this.d3el.selectAll(".curve_label").attr("display","inline")):(this.d3el.selectAll(".legend").attr("display","inline"),this.d3el.selectAll(".curve_label").attr("display","none"))}update_labels(){this.d3el.selectAll(".curve").data(this.model.mark_data).select(".curve_label").text((e=>e.name))}get_line_style(){switch(this.model.get("line_style")){case"solid":return"none";case"dashed":return"10,10";case"dotted":return"2,10";case"dash_dotted":return"10,5,2,5"}}update_line_style(){this.d3el.selectAll(".curve").select(".line").style("stroke-dasharray",o.bind(this.get_line_style,this)),this.legendEl&&this.legendEl.select("path").style("stroke-dasharray",o.bind(this.get_line_style,this))}update_stroke_width(e,t){this.compute_view_padding(),this.d3el.selectAll(".curve").select(".line").style("stroke-width",t),this.legendEl&&this.legendEl.select("path").style("stroke-width",t)}update_style(){const e=this.model.get("fill"),t=this.model.get("fill_colors"),n=this.model.get("fill_opacities"),i=this.d3el.selectAll(".curve");i.select(".line").style("opacity",this.get_mark_opacity.bind(this)).style("stroke",((e,n)=>this.get_mark_color(e,n)||t[n])).style("fill",((t,n)=>"inside"===e?this.get_fill_color(t,n):"")).style("fill-opacity",((t,i)=>"inside"===e?n[i]:"")),i.select(".area").style("fill",((e,t)=>this.get_fill_color(e,t))).style("opacity",((e,t)=>n[t])),this.update_marker_style(),this.legendEl&&(this.legendEl.select(".line").style("stroke",((e,n)=>this.get_mark_color(e,n)||t[n])).style("opacity",this.get_mark_opacity.bind(this)).style("fill",((e,t)=>"none"===this.model.get("fill")?"":this.get_fill_color(e,t))),this.legendEl.select(".dot").style("stroke",((e,n)=>this.get_mark_color(e,n)||t[n])).style("opacity",this.get_mark_opacity.bind(this)).style("fill",((e,n)=>this.get_mark_color(e,n)||t[n])),this.legendEl.select("text").style("fill",((e,n)=>this.get_mark_color(e,n)||t[n])).style("opacity",this.get_mark_opacity.bind(this))),this.update_stroke_width(this.model,this.model.get("stroke_width")),this.update_line_style()}path_closure(){return this.model.get("close_path")?"Z":""}update_path_style(){const e=this.get_interpolation();this.line.curve(e),this.area.curve(e),this.d3el.selectAll(".curve").select(".line").attr("d",(e=>this.line(e.values)+this.path_closure())),this.d3el.selectAll(".curve").select(".area").transition("update_path_style").duration(0).attr("d",(e=>this.area(e.values))),this.legendEl&&(this.legendLine.curve(e),this.legendEl.selectAll("path").attr("d",this.legendLine(this.legendPathData)+this.path_closure()))}relayout(){this.set_ranges(),this.update_line_xy(!1)}selector_changed(e,t){if(void 0===e)return this.model.set("selected",null),this.touch(),[];const n=this.pixelCoords,i=new Uint32Array(o.range(n.length)).filter((t=>e(n[t])));this.model.set("selected",i),this.touch()}invert_point(e){if(void 0===e)return this.model.set("selected",null),void this.touch();const t=Math.min(this.bisect(this.xPixels,e),Math.max(this.xPixels.length-1,0));this.model.set("selected",new Uint32Array([t])),this.touch()}update_multi_range(e){const t=e[0],n=e[1],i=this.model.x_data[0]instanceof Array?this.model.x_data[0]:this.model.x_data,r=this.bisect(i,t),s=Math.min(this.bisect(i,n),Math.max(i.length-1,0));this.selectorModel.set("selected",[r,s]),this.selector.touch()}draw_legend(e,t,n,i,r){const s=this.model.get_labels(),a=this.model.mark_data.map((e=>({index:e.index,name:e.name,color:e.color})));this.legendEl=e.selectAll(".legend"+this.uuid).data(a);const c=.8*r,u=this.model.get("fill_colors");this.legendLine=l.line().curve(this.get_interpolation()).x((e=>e[0])).y((e=>e[1])),this.legendPathData=[[0,c],[c/2,0],[c,c/2]];const h=this.legendEl.enter().append("g").attr("class","legend"+this.uuid).attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).on("mouseover",o.bind((()=>{this.event_dispatcher("legend_mouse_over")}),this)).on("mouseout",o.bind((()=>{this.event_dispatcher("legend_mouse_out")}),this)).on("click",o.bind((()=>{this.event_dispatcher("legend_clicked")}),this));h.append("path").attr("class","line").attr("fill","none").attr("d",this.legendLine(this.legendPathData)+this.path_closure()).style("stroke",((e,t)=>this.get_mark_color(e,t)||u[t])).style("fill",((e,t)=>"none"===this.model.get("fill")?"":this.get_fill_color(e,t))).style("opacity",this.get_mark_opacity.bind(this)).style("stroke-width",this.model.get("stroke_width")).style("stroke-dasharray",o.bind(this.get_line_style,this)),this.model.get("marker")&&h.append("path").attr("class","dot").attr("transform","translate("+c/2+",0)").attr("d",this.dot.size(25)).style("fill",((e,t)=>this.get_mark_color(e,t))),h.append("text").attr("class","legendtext").attr("x",1.2*c).attr("y",c/2).attr("dy","0.35em").text(((e,t)=>s[t])).style("fill",((e,t)=>this.get_mark_color(e,t)||u[t])).style("opacity",this.get_mark_opacity.bind(this)),this.legendEl=h.merge(this.legendEl);const d=l.max(s,(e=>e.length));return this.legendEl.exit().remove(),[this.model.mark_data.length,d]}update_curves_subset(){const e="label"===this.model.get("labels_visibility"),t=this.model.get("curves_subset");t.length>0?(this.d3el.selectAll(".curve").attr("display",((e,n)=>-1!==t.indexOf(n)?"inline":"none")).select(".curve_label").attr("display",((n,i)=>-1!==t.indexOf(i)&&e?"inline":"none")),this.legendEl&&this.legendEl.attr("display",((e,n)=>-1!==t.indexOf(n)?"inline":"none")),this.d3el.selectAll(".curve")):(this.d3el.selectAll(".curve").attr("display","inline").select(".curve_label").attr("display",(t=>e?"inline":"none")),this.legendEl&&this.legendEl.attr("display","inline"))}update_fill(){const e=this.model.get("fill"),t="top"===e||"bottom"===e||"between"===e,n=this.scales.y;this.area.defined((e=>t&&null!==e.y&&isFinite(n.scale(e.y)))),"bottom"==e?this.area.y0(this.parent.plotarea_height):"top"==e?this.area.y0(0):"between"==e&&this.area.y0((e=>n.scale(e.y0)+n.offset)),this.d3el.selectAll(".curve").select(".area").attr("d",(e=>this.area(e.values))),this.d3el.selectAll(".curve").select(".line").style("fill",((t,n)=>"inside"===e?this.get_fill_color(t,n):"")),this.legendEl&&this.legendEl.select("path").style("fill",((t,n)=>"none"===e?"":this.get_fill_color(t,n)))}get_fill_color(e,t){const n=this.model.get("fill_colors");return 0===n.length?this.get_mark_color(e,t):n[t]}update_line_xy(e){const t=this.scales.x,n=this.scales.y,i=!0===e?this.parent.model.get("animation_duration"):0;this.line.x((e=>t.scale(e.x)+t.offset)).y((e=>n.scale(e.y)+n.offset));const r=this.model.get("fill");this.area.x((e=>t.scale(e.x)+t.offset)).y1((e=>n.scale(e.y)+n.offset)),"bottom"==r?this.area.y0(this.parent.plotarea_height):"top"==r?this.area.y0(0):"between"==r&&this.area.y0((e=>n.scale(e.y0)+n.offset));const s=this.d3el.selectAll(".curve");s.select(".line").transition("update_line_xy").attr("d",(e=>this.line(e.values)+this.path_closure())).duration(i),s.select(".area").transition("update_line_xy").attr("d",((e,t)=>this.area(e.values))).duration(i),s.select(".curve_label").transition("update_line_xy").attr("transform",(e=>{const i=e.values[e.values.length-1];return"translate("+t.scale(i.x)+","+n.scale(i.y)+")"})).duration(i),this.update_dots_xy(e),this.xPixels=this.model.mark_data.length>0?this.model.mark_data[0].values.map((e=>t.scale(e.x)+t.offset)):[],this.yPixels=this.model.mark_data.length>0?this.model.mark_data[0].values.map((e=>n.scale(e.y)+n.offset)):[],this.pixelCoords=this.model.mark_data.length>0?this.model.mark_data[0].values.map((e=>[t.scale(e.x)+t.offset,n.scale(e.y)+n.offset])):[]}get_interpolation(){return{linear:l.curveLinear,basis:l.curveBasis,"basis-open":l.curveBasisOpen,"basis-closed":l.curveBasisClosed,bundle:l.curveBundle,cardinal:l.curveCardinal,"cardinal-open":l.curveCardinalOpen,"cardinal-closed":l.curveCardinalClosed,monotone:l.curveMonotoneY,"step-before":l.curveStepBefore,"step-after":l.curveStepAfter}[this.model.get("interpolation")]}draw(e){this.set_ranges();const t=this.d3el.selectAll(".curve").data(this.model.mark_data),n=this.scales.y,i=t.enter().append("g").attr("class","curve");i.append("path").attr("class","line").attr("fill","none").attr("id",((e,t)=>"curve"+(t+1))).on("click",(()=>{this.event_dispatcher("element_clicked")})),i.append("path").attr("class","area"),i.append("text").attr("class","curve_label").attr("x",3).attr("dy",".35em").attr("display","label"!==this.model.get("labels_visibility")?"none":"inline").text((e=>e.name));const r=this.model.get("fill"),s="top"===r||"bottom"===r||"between"===r;this.draw_dots(),this.line=l.line().curve(this.get_interpolation()).defined((e=>null!==e.y&&isFinite(n.scale(e.y)))),this.area=l.area().curve(this.get_interpolation()).defined((e=>s&&null!==e.y&&isFinite(n.scale(e.y)))),t.exit().remove(),this.update_line_xy(e),this.update_style(),this.update_curves_subset()}draw_dots(){if(this.model.get("marker")){const e=this.d3el.selectAll(".curve").selectAll(".dot").data(((e,t)=>e.values.map((e=>({x:e.x,y:e.y,sub_index:e.sub_index})))));e.enter().append("path").attr("class","dot"),e.exit().remove()}}update_dots_xy(e){if(this.model.get("marker")){const t=this.scales.x,n=this.scales.y,i=!0===e?this.parent.model.get("animation_duration"):0;this.d3el.selectAll(".curve").selectAll(".dot").transition("update_dots_xy").duration(i).attr("transform",(e=>"translate("+(t.scale(e.x)+t.offset)+","+(n.scale(e.y)+n.offset)+")")).attr("d",this.dot.size(this.model.get("marker_size")).type(this.model.get("marker")))}}compute_view_padding(){let e;if(this.model.get("marker")){const t=Math.sqrt(this.model.get("marker_size"))/2+1,n=this.model.get("stroke_width")/2;e=Math.max(t,n)}else e=this.model.get("stroke_width")/2;const t=e;e===this.xPadding&&t===this.yPadding||(this.xPadding=e,this.yPadding=t,this.trigger("mark_padding_updated"))}update_marker_style(){const e=this,t=this.model.get("fill_colors"),n=this.model.get("opacities");this.d3el.selectAll(".curve").each((function(i,r){l.select(this).selectAll(".dot").style("opacity",n[r]).style("fill",e.get_mark_color(i,r)||t[r])}))}update_marker(e,t){t?(this.draw_dots(),this.update_dots_xy(!1),this.update_marker_style(),this.legendEl&&this.legendEl.select(".dot").attr("d",this.dot.type(t).size(25))):(this.d3el.selectAll(".dot").remove(),this.legendEl&&this.legendEl.select(".dot").attr("d",this.dot.size(0)))}update_marker_size(e,t){this.compute_view_padding(),this.d3el.selectAll(".dot").attr("d",this.dot.size(t))}clear_style(e,t){}set_default_style(e){}set_style_on_elements(e,t){}}t.Lines=h},9408:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FlexLineModel=t.LinesModel=void 0;const a=s(n(9163)),o=s(n(6731)),l=n(6032),c=s(n(7308)),u=s(n(8435));class h extends l.MarkModel{defaults(){return Object.assign(Object.assign({},l.MarkModel.prototype.defaults()),{_model_name:"LinesModel",_view_name:"Lines",x:[],y:[],color:null,scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"},color:{dimension:"color"}},colors:a.scaleOrdinal(a.schemeCategory10).range(),fill_colors:a.scaleOrdinal(a.schemeCategory10).range(),stroke_width:2,labels_visibility:"none",curves_subset:[],line_style:"solid",interpolation:"linear",close_path:!1,fill:"none",marker:null,marker_size:64,opacities:[],fill_opacities:[]})}initialize(e,t){super.initialize(e,t),this.on_some_change(["x","y","color"],this.update_data,this),this.on("change:labels",this.update_labels,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data(),this.update_domains()}update_data(){this.dirty=!0;const e=this;this.x_data=this.get("x"),this.y_data=this.get("y"),this.color_data=this.get("color")||[];let t=this.get("labels");if(0===this.x_data.length||0===this.y_data.length)this.mark_data=[];else{this.x_data=u.is_array(this.x_data[0])?this.x_data:[this.x_data],this.y_data=u.is_array(this.y_data[0])?this.y_data:[this.y_data],t=this.get_labels();const n=this.y_data.length;1==this.x_data.length&&n>1?this.mark_data=t.map(((t,i)=>({name:t,values:Array.prototype.map.call(e.y_data[i],((t,r)=>({x:e.x_data[0][r],y:t,y0:e.y_data[Math.min(i+1,n-1)][r],sub_index:r}))),color:e.color_data[i],index:i}))):this.mark_data=t.map(((t,i)=>({name:t,values:a.zip(e.x_data[i],e.y_data[i]).map(((t,r)=>({x:t[0],y:t[1],y0:e.y_data[Math.min(i+1,n-1)][r],sub_index:r}))),color:e.color_data[i],index:i})))}this.update_domains(),this.dirty=!1,this.trigger("data_updated")}update_labels(){const e=this.get_labels();this.mark_data.forEach(((t,n)=>{t.name=e[n]})),this.trigger("labels_updated")}get_labels(){let e=this.get("labels");const t=1==this.x_data.length?this.y_data.length:Math.min(this.x_data.length,this.y_data.length);return e.length>t?e=e.slice(0,t):e.length<t&&o.range(e.length,t).forEach((t=>{e[t]="C"+(t+1)})),e}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=e.x,n=e.y,i=e.color;this.get("preserve_domain").x?t.del_domain([],this.model_id+"_x"):t.compute_and_set_domain(this.mark_data.map((e=>e.values.map((e=>e.x)))),this.model_id+"_x"),this.get("preserve_domain").y?n.del_domain([],this.model_id+"_y"):n.compute_and_set_domain(this.mark_data.map((e=>e.values.map((e=>e.y)))),this.model_id+"_y"),null!=i&&(this.get("preserve_domain").color?i.del_domain([],this.model_id+"_color"):i.compute_and_set_domain(this.mark_data.map((e=>e.color)),this.model_id+"_color"))}get_data_dict(e,t){return e}}t.LinesModel=h,h.serializers=Object.assign(Object.assign({},l.MarkModel.serializers),{x:c.array_or_json_serializer,y:c.array_or_json_serializer,color:c.array_or_json_serializer});class d extends h{defaults(){return Object.assign(Object.assign({},h.prototype.defaults()),{_model_name:"FlexLineModel",_view_name:"FlexLine",x:[],y:[],color:null,scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"},color:{dimension:"color"}},colors:a.scaleOrdinal(a.schemeCategory10).range(),fill_colors:a.scaleOrdinal(a.schemeCategory10).range(),stroke_width:2,labels_visibility:"none",curves_subset:[],line_style:"solid",interpolation:"linear",close_path:!1,fill:"none",marker:null,marker_size:64,opacities:[],fill_opacities:[]})}update_data(){this.dirty=!0;const e=this;this.x_data=this.get("x"),this.y_data=this.get("y");let t=this.get("labels");if(0===this.x_data.length||0===this.y_data.length)this.mark_data=[],this.data_len=0;else{this.x_data=o.isNumber(this.x_data[0])?[this.x_data]:this.x_data,this.y_data=o.isNumber(this.y_data[0])?[this.y_data]:this.y_data,t=this.get_labels();const n=this.get("color")||[],i=[this.get("width")||[]];this.data_len=Math.min(this.x_data[0].length,this.y_data[0].length),this.mark_data=[{name:t[0],values:o.range(this.data_len-1).map(((t,r)=>({x1:e.x_data[0][r],y1:e.y_data[0][r],x2:e.x_data[0][r+1],y2:e.y_data[0][r+1],color:n[r],size:i[0][r]})))}]}this.update_domains(),this.dirty=!1,this.trigger("data_updated")}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=e.x,n=e.y,i=e.color,r=e.width;this.get("preserve_domain").x?t.del_domain([],this.model_id+"_x"):t.compute_and_set_domain(this.x_data[0].slice(0,this.data_len),this.model_id+"_x"),this.get("preserve_domain").y?n.del_domain([],this.model_id+"_y"):n.compute_and_set_domain(this.y_data[0].slice(0,this.data_len),this.model_id+"_y"),null!=i&&(this.get("preserve_domain").color?i.del_domain([],this.model_id+"_color"):i.compute_and_set_domain(this.mark_data.map((e=>e.values.map((e=>e.color)))),this.model_id+"_color")),null!=r&&(this.get("preserve_domain").width?r.del_domain([],this.model_id+"_width"):r.compute_and_set_domain(this.mark_data.map((e=>e.values.map((e=>e.size)))),this.model_id+"_width"))}}t.FlexLineModel=d,d.serializers=Object.assign(Object.assign({},h.serializers),{width:c.array_or_json_serializer})},1160:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isLogScale=t.LogScale=void 0;const a=s(n(9163)),o=n(2739);class l extends o.LinearScale{render(){this.scale=a.scaleLog(),this.model.domain.length>0&&this.scale.domain(this.model.domain),this.offset=0,this.create_event_listeners()}}t.LogScale=l,t.isLogScale=function(e){return"log"===e.model.type}},4479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogScaleModel=void 0;const i=n(6946);class r extends i.LinearScaleModel{defaults(){return Object.assign(Object.assign({},i.LinearScaleModel.prototype.defaults()),{_model_name:"LogScaleModel",_view_name:"LogScale",domain:[]})}set_init_state(){this.type="log",this.global_min=Number.MIN_VALUE,this.global_max=Number.POSITIVE_INFINITY}}t.LogScaleModel=r},4280:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0;const a=s(n(2055)),o=s(n(9163)),l=n(8435),c=n(5321);class u extends c.Mark{render(){const e=super.render();return this.map=this.d3el.append("svg").attr("viewBox","0 0 1200 980"),this.width=this.parent.plotarea_width,this.height=this.parent.plotarea_height,this.map_id=a.uuid(),this.enable_hover=this.model.get("enable_hover"),this.display_el_classes=["event_layer"],this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),e.then((()=>{this.event_listeners={},this.process_interactions(),this.create_listeners(),this.draw()}))}set_ranges(){}relayout(){}set_positional_scales(){const e=this.scales.projection;this.listenTo(e,"domain_changed",(()=>{this.model.dirty||this.draw()}))}initialize_additional_scales(){const e=this.scales.color;e&&(this.listenTo(e,"domain_changed",(()=>{this.update_style()})),e.on("color_scale_range_changed",this.update_style,this))}remove_map(){o.selectAll(".world_map.map"+this.map_id).remove()}draw(){this.set_ranges(),this.remove_map(),this.transformed_g=this.map.append("g").attr("class","world_map map"+this.map_id),this.fill_g=this.transformed_g.append("g"),this.highlight_g=this.transformed_g.append("g"),this.stroke_g=this.transformed_g.append("g");const e=this.scales.projection;this.fill_g.selectAll("path").data(this.model.geodata).enter().append("path").attr("d",e.path).style("fill",((e,t)=>this.fill_g_colorfill(e,t))),this.stroke_g.selectAll("path").data(this.model.geodata).enter().append("path").attr("class","event_layer").attr("d",e.path).style("fill-opacity",0).on("click",((e,t)=>this.event_dispatcher("element_clicked",{data:e,index:t}))),this.validate_color(this.model.get("stroke_color"))&&this.stroke_g.selectAll("path").style("stroke",this.model.get("stroke_color")),this.zoom=o.zoom().scaleExtent([1,8]).on("zoom",(()=>{this.zoomed(this)})),this.parent.bg_events.call(this.zoom),this.parent.bg_events.on("dblclick.zoom",null),this.parent.bg_events.on("dblclick",(()=>{this.reset_zoom(this)}))}validate_color(e){return""!==e}mouseover_handler(){if(!this.model.get("hover_highlight"))return;const e=o.select(l.d3GetEvent().target);if(this.is_hover_element(e)){const t=e.data()[0],n=this.model.get("selected")||[],i=Array.from(n),r=this.highlight_g.append((()=>e.node().cloneNode(!0)));r.classed("hovered",!0),r.classed("event_layer",!1),this.validate_color(this.model.get("hovered_styles").hovered_stroke)&&-1===i.indexOf(t.id)&&r.style("stroke",this.model.get("hovered_styles").hovered_stroke).style("stroke-width",this.model.get("hovered_styles").hovered_stroke_width),this.validate_color(this.model.get("hovered_styles").hovered_fill)&&-1===i.indexOf(t.id)&&r.style("fill-opacity",1).style("fill",(()=>this.model.get("hovered_styles").hovered_fill))}}mouseout_handler(){if(!this.model.get("hover_highlight"))return;const e=o.select(l.d3GetEvent().target);this.is_hover_element(e)&&(e.transition("mouseout_handler").style("fill",((e,t)=>this.fill_g_colorfill(e,t))).style("stroke",((e,t)=>this.hoverfill(e,t))),this.highlight_g.selectAll(".hovered").remove())}click_handler(){const e=o.select(l.d3GetEvent().target);if(this.is_hover_element(e)){const t=e.data()[0],n=this.model.get("selected")||[],i=Array.from(n),r=i.indexOf(t.id);if(r>-1){i.splice(r,1),e.transition("click_handler").style("fill-opacity",0),this.highlight_g.selectAll(".hovered").remove();const n="#c".concat(t.id.toString());o.select(n).remove()}else this.highlight_g.selectAll(".hovered").remove(),this.highlight_g.append((()=>e.node().cloneNode(!0))).attr("id","c"+t.id).classed("selected",!0).classed("event_layer",!1),this.validate_color(this.model.get("selected_styles").selected_fill)&&this.highlight_g.selectAll(".selected").style("fill-opacity",1).style("fill",this.model.get("selected_styles").selected_fill),this.validate_color(this.model.get("selected_styles").selected_stroke)&&this.highlight_g.selectAll(".selected").style("stroke",this.model.get("selected_styles").selected_stroke).style("stroke-width",this.model.get("selected_styles").selected_stroke_width),i.push(t.id),this.model.set("selected",i),this.touch();this.model.set("selected",0===i.length?null:i,{updated_view:this}),this.touch()}}reset_zoom(e){e.zoom.transform(e.parent.bg,o.zoomIdentity)}zoomed(e){const t=l.d3GetEvent().transform,n=e.height/3,i=2*e.width;t.x=Math.min(e.width/2*(t.k-1),Math.max(i/2*(1-t.k),t.x)),t.y=Math.min(e.height/2*(t.k-1)+this.height*t.k,Math.max(n/2*(1-t.k)-e.width*t.k,t.y)),e.transformed_g.style("stroke-width",1/t.k).attr("transform",t)}create_listeners(){this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"data_updated",this.draw),this.listenTo(this.model,"change:color",this.update_style),this.listenTo(this.model,"change:stroke_color",this.change_stroke_color),this.listenTo(this.model,"change:colors",this.change_map_color),this.listenTo(this.model,"change:selected",this.change_selected),this.listenTo(this.model,"change:selected_styles",(()=>{this.change_selected_fill(),this.change_selected_stroke()})),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")}))}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.reset_selection,this.event_listeners.element_clicked=this.click_handler)}process_hover(e){super.process_hover(e),"tooltip"===e&&(this.event_listeners.mouse_over=()=>(this.mouseover_handler(),this.refresh_tooltip()),this.event_listeners.mouse_move=this.move_tooltip,this.event_listeners.mouse_out=()=>(this.mouseout_handler(),this.hide_tooltip()))}change_selected_fill(){this.validate_color(this.model.get("selected_styles").selected_fill)?this.highlight_g.selectAll(".selected").style("fill-opacity",1).style("fill",this.model.get("selected_styles").selected_fill):this.highlight_g.selectAll(".selected").style("fill-opacity",0)}change_selected_stroke(){this.validate_color(this.model.get("selected_styles").selected_stroke)?this.highlight_g.selectAll(".selected").style("stroke-width",this.model.get("selected_styles").selected_stroke_width).style("stroke",this.model.get("selected_styles").selected_stroke):this.highlight_g.selectAll(".selected").style("stroke-width",0)}change_selected(){this.highlight_g.selectAll("path").remove();const e=this.model.get("selected")||[],t=this.stroke_g.selectAll("path").data();this.stroke_g.selectAll("path").style("stroke",((e,t)=>this.hoverfill(e,t)));const n=this.stroke_g.selectAll("path");for(let i=0;i<t.length;i++)e.indexOf(t[i].id)>-1&&this.highlight_g.append((()=>n.nodes()[i].cloneNode(!0))).attr("id",t[i].id).style("fill-opacity",(()=>this.validate_color(this.model.get("selected_styles").selected_fill)?1:0)).style("fill",this.model.get("selected_styles").selected_fill).style("stroke-opacity",(()=>this.validate_color(this.model.get("selected_styles").selected_stroke)?1:0)).style("stroke",this.model.get("selected_styles").selected_stroke).style("stroke-width",this.model.get("selected_styles").selected_stroke_width).classed("selected",!0)}reset_selection(){this.model.set("selected",[]),this.touch(),this.highlight_g.selectAll(".selected").remove(),o.select(this.d3el.node().parentNode).selectAll("path").classed("selected",!1),o.select(this.d3el.node().parentNode).selectAll("path").classed("hovered",!1),this.stroke_g.selectAll("path").style("stroke",((e,t)=>this.hoverfill(e,t))),this.fill_g.selectAll("path").classed("selected",!1).style("fill",((e,t)=>this.fill_g_colorfill(e,t)))}change_stroke_color(){this.stroke_g.selectAll("path").style("stroke",this.model.get("stroke_color"))}change_map_color(){this.is_object_empty(this.model.get("color"))&&this.fill_g.selectAll("path").style("fill",((e,t)=>this.fill_g_colorfill(e,t)))}update_style(){const e=this.model.get("color");this.is_object_empty(e)||this.fill_g.selectAll("path").style("fill",((e,t)=>this.fill_g_colorfill(e,t)))}is_object_empty(e){return 0===Object.keys(e).length&&e.constructor===Object}hoverfill(e,t){return(this.model.get("selected")||[]).indexOf(e.id)>-1&&this.validate_color(this.model.get("selected_styles").selected_stroke)?this.model.get("selected_styles").selected_stroke:this.model.get("stroke_color")}fill_g_colorfill(e,t){const n=this.scales.color,i=this.model.get("selected")||[],r=this.model.get("color"),s=this.model.get("colors");return i.indexOf(e.id)>-1?this.model.get("selected_styles").selected_fill:this.is_object_empty(r)?s[e.id]||s.default_color:void 0===r[e.id]||null===r[e.id]||void 0===n?s.default_color:n.scale(r[e.id])}clear_style(){}compute_view_padding(){}set_default_style(){}set_style_on_elements(){}}t.Map=u},5839:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MapModel=void 0;const a=n(6032),o=s(n(6767));class l extends a.MarkModel{defaults(){return Object.assign(Object.assign({},a.MarkModel.prototype.defaults()),{_model_name:"MapModel",_view_name:"Map",color:{},hover_highlight:!0,hovered_styles:{hovered_fill:"Orange",hovered_stroke:null,hovered_stroke_width:2},stroke_color:null,default_color:null,scales_metadata:{color:{dimension:"color"},projection:{dimension:"geo"}},selected_styles:{selected_fill:"Red",selected_stroke:null,selected_stroke_width:2},map_data:void 0})}initialize(e,t){super.initialize(e,t),this.on("change:map_data",this.update_data,this),this.on("change:color",this.color_data_updated,this),this.update_data(),this.update_domains()}update_data(){this.dirty=!0;const e=this.get("map_data");"Topology"==e.type?this.geodata=o.feature(e,e.objects.subunits).features:this.geodata=e.features,this.color_data_updated(),this.dirty=!1,this.trigger("data_updated")}update_properties(e){e.properties?e.properties.color=this.color_data[e.id]:e.properties={color:this.color_data[e.id]}}color_data_updated(){this.update_domains(),this.geodata.map((e=>this.update_properties(e)))}update_domains(){const e=this.get("scales").color;this.color_data=this.get("color"),null!=e&&(this.get("preserve_domain").color?e.del_domain([],this.model_id+"_color"):e.compute_and_set_domain(Object.keys(this.color_data).map((e=>this.color_data[e])),this.model_id+"_color"))}get_data_dict(e,t){return Object.assign(Object.assign({},e.properties),{id:e.id})}}t.MapModel=l},5321:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Mark=void 0;const a=s(n(2055)),o=s(n(9163)),l=n(7287),c=n(9419),u=n(8435),h=s(n(6731)),d=n(8435);function f(e){return null!=e}class p extends a.WidgetView{initialize(){this.display_el_classes=["mark"],this.setElement(document.createElementNS(o.namespaces.svg,"g")),this.d3el=o.select(this.el),super.initialize.apply(this,arguments)}render(){this.xPadding=0,this.yPadding=0,this.parent=this.options.parent,this.uuid=a.uuid();const e=this.set_scale_views();return this.listenTo(this.model,"scales_updated",(()=>{this.set_scale_views().then(h.bind(this.draw,this))})),this.options.clip_id&&this.model.get("apply_clip")&&this.d3el.attr("clip-path","url(#"+this.options.clip_id+")"),this.tooltip_div=o.select(document.createElement("div")).attr("class","mark_tooltip").attr("id","tooltip_"+this.uuid).style("display","none").style("opacity",0),this.bisect=o.bisector((e=>e)).left,this.d3el.style("display",this.model.get("visible")?"inline":"none"),this.display_el_classes=[],this.event_metadata={mouse_over:{msg_name:"hover",lookup_data:!0,hit_test:!0},legend_clicked:{msg_name:"legend_click",hit_test:!0},element_clicked:{msg_name:"element_click",lookup_data:!0,hit_test:!0},parent_clicked:{msg_name:"background_click",hit_test:!1},legend_mouse_over:{msg_name:"legend_hover",hit_test:!0}},e}set_scale_views(){for(const e in this.scales)this.stopListening(this.scales[e]);const e=this.model.get("scales"),t=this,n={};return h.each(e,((e,i)=>{n[i]=t.create_child_view(e)})),a.resolvePromisesDict(n).then((e=>{t.scales=e,t.set_positional_scales(),t.initialize_additional_scales(),t.set_ranges(),t.trigger("mark_scales_updated")}))}set_positional_scales(){}initialize_additional_scales(){}set_internal_scales(){}create_listeners(){this.listenTo(this.model,"change:visible",this.update_visibility),this.listenTo(this.model,"change:selected_style",this.selected_style_updated),this.listenTo(this.model,"change:unselected_style",this.unselected_style_updated),this.listenTo(this.parent,"margin_updated",this.relayout),this.model.on_some_change(["labels","display_legend"],(function(){this.model.trigger("redraw_legend")}),this)}remove(){this.model.off(null,null,this),this.d3el.transition("remove").duration(0).remove(),this.tooltip_div.remove(),super.remove()}draw_legend(e,t,n,i,r){return e.selectAll(".legend"+this.uuid).remove(),e.append("g").attr("transform","translate("+t+", "+n+")").attr("class","legend"+this.uuid).on("mouseover",h.bind(this.highlight_axes,this)).on("mouseout",h.bind(this.unhighlight_axes,this)).append("text").text(this.model.get("labels")[0]),[1,1]}highlight_axes(){h.each(this.model.get("scales"),(e=>{e.trigger("highlight_axis")}))}unhighlight_axes(){h.each(this.model.get("scales"),(e=>{e.trigger("unhighlight_axis")}))}invert_range(e,t){return[e,t]}invert_point(e){}invert_multi_range(e){return e}update_visibility(e,t){this.d3el.style("display",t?"inline":"none")}get_colors(e){const t=this.model.get("colors");return t[e%t.length]}get_mark_color(e,t){const n=this.scales.color;return n&&void 0!==e.color&&null!==e.color?n.scale(e.color):this.get_colors(t)}get_mark_opacity(e,t){const n=this.scales.opacity,i=this.model.get("opacities");return n&&void 0!==e.opacity&&null!==e.opacity?n.scale(e.opacity):i[t%i.length]}selected_style_updated(e,t){this.selected_style=t,this.clear_style(e.previous("selected_style"),this.selected_indices),this.style_updated(t,this.selected_indices)}unselected_style_updated(e,t){this.unselected_style=t;const n=this.selected_indices,i=n?h.range(this.model.mark_data.length).filter((e=>-1===n.indexOf(e))):[];this.clear_style(e.previous("unselected_style"),i),this.style_updated(t,i)}style_updated(e,t,n){this.set_default_style(t),this.set_style_on_elements(e,t)}apply_styles(e){void 0!==e&&null!=e||(e=[this.selected_style,this.unselected_style]);const t=h.range(this.model.mark_data.length);for(let t=0;t<e.length;t++)this.clear_style(e[t]);this.set_default_style(t),this.set_style_on_elements(this.selected_style,Array.from(this.selected_indices||[]));const n=this.selected_indices?h.difference(t,Array.from(this.selected_indices)):[];this.set_style_on_elements(this.unselected_style,n)}show_tooltip(e){this.tooltip_view&&(null!=e&&e?this.tooltip_div.style("pointer-events","all"):this.tooltip_div.style("pointer-events","none"),d.applyStyles(this.tooltip_div,this.model.get("tooltip_style")).style("display",null),l.MessageLoop.sendMessage(u.getLuminoWidget(this.tooltip_view),c.Widget.Msg.AfterShow),this.parent.popper.enableEventListeners(),this.move_tooltip())}move_tooltip(e){this.tooltip_view&&(this.parent.popper_reference.x=u.d3GetEvent().clientX,this.parent.popper_reference.y=u.d3GetEvent().clientY,this.parent.popper.scheduleUpdate())}hide_tooltip(){this.parent.popper.disableEventListeners(),this.tooltip_div.style("pointer-events","none"),this.tooltip_div.style("opacity",0).style("display","none")}refresh_tooltip(e=!1){const t=o.select(u.d3GetEvent().target);if(this.is_hover_element(t)){const n=t.data()[0],i=this.model.get_data_dict(n,n.index);this.trigger("update_tooltip",i),this.show_tooltip(e)}}create_tooltip(){const e=this.model.get("tooltip");this.tooltip_view&&(this.tooltip_view.remove(),this.tooltip_view=null),e&&this.create_child_view(e).then((e=>{this.tooltip_view=e,l.MessageLoop.sendMessage(u.getLuminoWidget(e),c.Widget.Msg.BeforeAttach),this.tooltip_div.node().appendChild(e.el),l.MessageLoop.sendMessage(u.getLuminoWidget(e),c.Widget.Msg.AfterAttach)}))}event_dispatcher(e,t){void 0!==this.event_listeners[e]&&h.bind(this.event_listeners[e],this,t)(),this.custom_msg_sender(e)}custom_msg_sender(e){const t=this.event_metadata[e];if(void 0!==t){let e=null;if(t.hit_test){const n=o.select(u.d3GetEvent().target);if(!this.is_hover_element(n))return;e=n.data()[0],t.lookup_data&&(e=this.model.get_data_dict(e,e.index))}this.send({event:t.msg_name,data:e})}}reset_click(){this.event_listeners.element_clicked=function(){},this.event_listeners.parent_clicked=function(){}}reset_hover(){this.event_listeners.mouse_over=function(){},this.event_listeners.mouse_move=function(){},this.event_listeners.mouse_out=function(){}}reset_legend_click(){this.event_listeners.legend_clicked=function(){}}reset_legend_hover(){this.event_listeners.legend_mouse_over=function(){},this.event_listeners.legend_mouse_out=function(){}}process_click(e){const t=this;"tooltip"===e&&(this.event_listeners.element_clicked=function(){return t.refresh_tooltip(!0)},this.event_listeners.parent_clicked=this.hide_tooltip)}process_hover(e){"tooltip"===e&&(this.event_listeners.mouse_over=this.refresh_tooltip,this.event_listeners.mouse_move=this.move_tooltip,this.event_listeners.mouse_out=this.hide_tooltip)}process_legend_click(e){const t=this;"tooltip"===e&&(this.event_listeners.legend_clicked=function(){return t.refresh_tooltip(!0)},this.event_listeners.parent_clicked=this.hide_tooltip)}process_legend_hover(e){"highlight_axes"===e&&(this.event_listeners.legend_mouse_over=h.bind(this.highlight_axes,this),this.event_listeners.legend_mouse_out=h.bind(this.unhighlight_axes,this))}process_interactions(){const e=this.model.get("interactions");f(e.click)?this.process_click(e.click):this.reset_click(),f(e.hover)?this.process_hover(e.hover):this.reset_hover(),f(e.legend_click)?this.process_legend_click(e.legend_click):this.reset_legend_click(),f(e.legend_hover)?this.process_legend_hover(e.legend_hover):this.reset_legend_hover()}mouse_over(){if(this.model.get("enable_hover")){const e=o.select(u.d3GetEvent().target);if(this.is_hover_element(e)){const t=e.data()[0],n=this.model.get_data_dict(t,t.index);this.trigger("update_tooltip",n),this.show_tooltip(),this.send({event:"hover",point:n})}}}mouse_out(){if(this.model.get("enable_hover")){const e=o.select(u.d3GetEvent().target);if(this.is_hover_element(e)){const t=e.data()[0],n=this.model.get_data_dict(t,t.index);this.hide_tooltip(),this.send({event:"hover",point:n})}}}mouse_move(){this.model.get("enable_hover")&&this.is_hover_element(o.select(u.d3GetEvent().target))&&this.move_tooltip()}is_hover_element(e){const t=this.display_el_classes.map((t=>e.classed(t)));return h.compact(t).length>0}set x_padding(e){this.xPadding=e}get x_padding(){return this.xPadding}set y_padding(e){this.yPadding=e}get y_padding(){return this.yPadding}}t.Mark=p},6032:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MarkModel=void 0;const a=s(n(2055)),o=n(5734),l=s(n(7308));class c extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},a.WidgetModel.prototype.defaults()),{_model_name:"MarkModel",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:o.semver_range,_view_module_version:o.semver_range,scales:{},scales_metadata:{},preserve_domain:{},display_legend:!1,labels:[],apply_clip:!0,visible:!0,selected_style:{},unselected_style:{},selected:null,enable_hover:!0,tooltip:null,tooltip_style:{opacity:.9},interactions:{hover:"tooltip"},tooltip_location:"mouse"})}initialize(e,t){super.initialize(e,t),this.on("change:scales",this.update_scales,this),this.once("destroy",this.handle_destroy,this),this.dirty=!1,this.update_scales()}update_data(){this.update_domains(),this.trigger("data_updated")}update_domains(){}update_scales(){this.unregister_all_scales(this.previous("scales")),this.trigger("scales_updated"),this.update_domains()}unregister_all_scales(e){this.dirty=!0;for(const t in e)e[t].del_domain([],this.model_id+"_"+t);this.dirty=!1}handle_destroy(){this.unregister_all_scales(this.get("scales"))}get_key_for_dimension(e){const t=this.get("scales_metadata");for(const n in t)if(t[n].dimension===e)return n;return null}get_key_for_orientation(e){const t=this.get("scales_metadata");for(const n in t)if(t[n].orientation===e)return n;return null}get_data_dict(e,t){return e}}t.MarkModel=c,c.serializers=Object.assign(Object.assign({},a.WidgetModel.serializers),{scales:{deserialize:a.unpack_models},tooltip:{deserialize:a.unpack_models},selected:l.array_or_json_serializer})},457:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.symbol=t.types=void 0;const a=s(n(9163)),o=Math.PI,l=o/180,c=Math.sqrt(3),u=Math.tan(o/6),h=function(e){const t=Math.sqrt(e/o);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},d=a.map({circle:h,cross:function(e,t){const n=Math.sqrt(e/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(e,t){const n=Math.sqrt(e/(2*u)),i=n*u;return"M0,"+-n+"L"+i+",0 0,"+n+" "+-i+",0Z"},square:function(e,t){const n=Math.sqrt(e)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(e,t){const n=Math.sqrt(e/c),i=n*c/2;return"M0,"+i+"L"+n+","+-i+" "+-n+","+-i+"Z"},"triangle-up":function(e,t){const n=Math.sqrt(e/c),i=n*c/2;return"M0,"+-i+"L"+n+","+i+" "+-n+","+i+"Z"},arrow:function(e,t){const n=60+-55*t,i=Math.tan(n*l),r=Math.sqrt(e/i),s=r*i/2;return"M0,"+-r+"L"+s+","+r+" "+-s+","+r+"Z"},ellipse:function(e,t){const n=Math.pow(10,t),i=Math.sqrt(e/(o*n)),r=i*n;return"M0,"+r+"A"+i+","+r+" 0 1,1 0,"+-r+"A"+i+","+r+" 0 1,1 0,"+r+"Z"},rectangle:function(e,t){const n=Math.pow(10,t),i=Math.sqrt(e/n)/2,r=i*n;return"M"+-i+","+-r+"L"+i+","+-r+" "+i+","+r+" "+-i+","+r+"Z"},plus:function(e,t){const n=Math.sqrt(e)/2;return"M0,"+-n+"L0,"+n+"M"+-n+",0L"+n+",0"},crosshair:function(e,t){const n=Math.sqrt(e)/2;return"M"+-n+","+-n+"L"+n+","+n+"M"+-n+","+n+"L"+n+","+-n},point:function(e){const t=Math.sqrt(e/o/10);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}});function f(){return 64}function p(){return"circle"}function m(){return.5}function _(e){return"function"==typeof e?e:function(e){return function(){return e}}(e)}t.symbol=function(){let e=p,t=f,n=m;function i(i,r){return(d.get(e.call(this,i,r))||h)(t.call(this,i,r),n.call(this,i,r))}return i.type=function(t){return arguments.length?(e=_(t),i):e},i.size=function(e){return arguments.length?(t=_(e),i):t},i.skew=function(e){return arguments.length?(n=_(e),i):n},i},t.types=d.keys()},6684:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarketMap=void 0;const o=s(n(2055)),l=s(n(6731)),c=n(7287),u=n(9419),h=s(n(9163)),d=n(7256),f=s(n(69)),p=a(n(200)),m=n(8435);class _ extends d.Figure{renderImpl(){const e=this.getFigureSize();this.width=e.width,this.height=e.height,this.id=o.uuid(),this.scales={},this.set_top_el_style(),this.margin=this.model.get("map_margin"),this.num_rows=this.model.get("rows"),this.num_cols=this.model.get("cols"),this.row_groups=this.model.get("row_groups"),this.enable_select=this.model.get("enable_select"),this.update_data(),this.set_area_dimensions(this.data.length),this.model.get("theme")&&this.svg.classed(this.model.get("theme"),!0),this.fig=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.fig_map=this.fig.append("g"),this.fig_axes=this.fig.append("g"),this.fig_click=this.fig.append("g"),this.fig_hover=this.fig.append("g"),this.fig_names=this.fig.append("g").style("display",this.model.get("show_groups")?"inline":"none"),this.fig_map.classed("g-map",!0),this.fig_axes.classed("g-axes",!0),this.fig_click.classed("g-click",!0),this.fig_hover.classed("g-hover",!0),this.fig_names.classed("g-names",!0),this.tooltip_div=h.select(document.createElement("div")).attr("class","mark_tooltip"),m.applyStyles(this.tooltip_div,{opacity:0,"pointer-events":"none"});const t=this.model.get("freeze_tooltip_location");return this.popper_reference=t?new f.ElementReference(this.svg.node()):new f.PositionReference({x:0,y:0,width:20,height:20}),this.popper=new p.default(this.popper_reference,this.tooltip_div.node(),{placement:"auto"}),this.update_default_tooltip(),this.selected_stroke=this.model.get("selected_stroke"),this.hovered_stroke=this.model.get("hovered_stroke"),this.update_plotarea_dimensions(),this.title=this.fig.append("text").attr("class","mainheading").text(this.model.get("title")),m.applyAttrs(this.title,{x:.5*this.plotarea_width,y:-this.margin.top/2,dy:"1em"}),m.applyStyles(this.title,this.model.get("title_style")),this.create_scale_views().then((()=>{this.create_listeners(),this.axis_views=new o.ViewList(this.add_axis,null,this);const e=this.axis_views.update(this.model.get("axes"));return this.model.on("change:axes",((e,t,n)=>{this.axis_views.update(t)})),this.draw_map(),document.body.appendChild(this.tooltip_div.node()),this.create_tooltip_widget(),window.addEventListener("resize",this.debouncedRelayout),this.once("remove",(()=>{window.removeEventListener("resize",this.debouncedRelayout)})),Promise.all([Promise.resolve(),e])}))}set_top_el_style(){this.el.style["user-select"]="none",this.el.style["ms-user-select"]="none",this.el.style["moz-user-select"]="none",this.el.style["khtml-user-select"]="none",this.el.style["webkit-user-select"]="none"}update_plotarea_dimensions(){this.plotarea_width=this.width-this.margin.left-this.margin.right,this.plotarea_height=this.height-this.margin.top-this.margin.bottom,this.column_width=parseFloat((this.plotarea_width/this.num_cols).toFixed(2)),this.row_height=parseFloat((this.plotarea_height/this.num_rows).toFixed(2))}reset_drawing_controls(){this.prev_x=0,this.prev_y=-1,this.y_direction=1,this.x_direction=1,this.group_iter=1}create_listeners(){this.listenTo(this.model,"change:scales",this.create_scale_views),this.listenTo(this.model,"change:color",this.recolor_chart),this.listenTo(this.model,"change:colors",this.colors_updated),this.listenTo(this.model,"change:show_groups",this.show_groups),this.listenTo(this.model,"change:selected_stroke",this.update_selected_stroke),this.listenTo(this.model,"change:hovered_stroke",this.update_hovered_stroke),this.listenTo(this.model,"change:font_style",this.update_font_style),this.model.on_some_change(["title","title_style"],this.update_title,this),this.listenTo(this.model,"change:selected",(function(){this.clear_selected(),this.apply_selected()})),this.model.on_some_change(["names","groups","ref_data"],(function(){this.update_data(),this.compute_dimensions_and_draw()}),this),this.listenTo(this.model,"change:rows",(function(e,t){this.num_rows=t,this.compute_dimensions_and_draw()})),this.listenTo(this.model,"change:cols",(function(e,t){this.num_cols=t,this.compute_dimensions_and_draw()})),this.listenTo(this.model,"change:row_groups",(function(e,t){this.row_groups=t,this.compute_dimensions_and_draw()})),this.listenTo(this.model,"change:tooltip_widget",this.create_tooltip_widget),this.listenTo(this.model,"change:tooltip_fields",this.update_default_tooltip),this.listenTo(this.model,"change:tooltip_formats",this.update_default_tooltip)}update_title(e,t){this.title.text(this.model.get("title")),m.applyStyles(this.title,this.model.get("title_style"))}relayout(){const e=this,t=this.getFigureSize();this.width=t.width,this.height=t.height,window.requestAnimationFrame((()=>{e.margin=e.model.get("map_margin"),e.update_plotarea_dimensions(),e.fig.attr("transform","translate("+e.margin.left+","+e.margin.top+")"),m.applyAttrs(e.title,{x:.5*e.plotarea_width,y:-e.margin.top/2,dy:"1em"}),e.draw_map(),e.clear_selected(),e.apply_selected(),e.fig_hover.selectAll("rect").remove(),e.hide_tooltip(),e.trigger("margin_updated")}))}update_data(){const e=this;this.model.set("selected",[]),this.data=this.model.get("names")||[],this.ref_data=this.model.get("ref_data"),this.group_data=this.model.get("groups"),this.groups=l.uniq(this.group_data,!0);let t=this.model.get("display_text");t=null===t||0===t.length?this.data:t,this.colors=this.model.get("colors");const n=this.colors.length;this.colors_map=function(t){return e.get_color(t,n)};const i=this.model.get("color"),r=l.map(this.data,((e,n)=>({display:t[n],name:e,color:Number.isNaN(i[n])?void 0:i[n],group:this.group_data[n],ref_data:null===this.ref_data||void 0===this.ref_data?null:this.ref_data[n]})));this.update_domains(),this.grouped_data=l.groupBy(r,((t,n)=>e.group_data[n])),this.groups=[],this.running_sums=[],this.running_sums[0]=0;let s=0;for(const e in this.grouped_data)this.groups.push(e),s+=this.grouped_data[e].length,this.running_sums.push(s);this.running_sums.pop()}update_domains(){const e=this.model.get("scales").color,t=this.model.get("color");e&&t.length>0&&e.compute_and_set_domain(t,this.model.model_id)}set_area_dimensions(e){this.num_rows=this.model.get("rows"),this.num_cols=this.model.get("cols"),this.row_groups=this.model.get("row_groups"),void 0!==this.num_cols&&null!==this.num_cols&&0!==this.num_cols?(this.row_groups>1&&this.num_cols%2==0&&this.num_cols++,this.num_rows=Math.floor(e/this.num_cols),this.num_rows=e%this.num_cols==0?this.num_rows:this.num_rows+1):void 0!==this.num_rows&&null!==this.num_rows&&0!==this.num_rows?(this.num_cols=Math.floor(e/this.num_rows),this.num_cols=e%this.num_rows==0?this.num_cols:this.num_cols+1,this.row_groups>1&&this.num_cols%2==0&&this.num_cols++):(this.num_cols=Math.floor(Math.sqrt(e)),this.row_groups>1&&this.num_cols%2==0&&this.num_cols++,this.num_rows=Math.floor(e/this.num_cols),this.num_rows=e%this.num_cols==0?this.num_rows:this.num_rows+1),this.row_groups=Math.min(this.row_groups,this.num_rows),1==this.row_groups&&(this.num_cols=Math.floor(e/this.num_rows),this.num_cols=e%this.num_rows==0?this.num_cols:this.num_cols+1),this.set_row_limits()}compute_dimensions_and_draw(){this.set_area_dimensions(this.data.length),this.update_plotarea_dimensions(),this.draw_map(),this.clear_selected(),this.apply_selected(),this.fig_hover.selectAll("rect").remove(),this.hide_tooltip()}update_default_tooltip(){this.tooltip_fields=this.model.get("tooltip_fields");const e=this.model.get("tooltip_formats");this.tooltip_formats=this.tooltip_fields.map(((t,n)=>{const i=e[n];return void 0===i||""===i?e=>e:h.format(i)}))}create_scale_views(){for(const e in this.scales)this.stopListening(this.scales[e]);const e=this.model.get("scales"),t=this,n={};return l.each(e,((e,i)=>{n[i]=t.create_child_view(e)})),o.resolvePromisesDict(n).then((e=>{t.scales=e,t.set_scales()}))}set_scales(){const e=this,t=this.scales.color;t&&(t.set_range(),t.on("color_scale_range_changed",e.update_map_colors,e),this.update_domains(),this.listenTo(t,"domain_changed",(()=>{e.update_map_colors()})),this.update_map_colors())}show_groups(e,t){this.fig_names.style("display",t?"inline":"none"),this.fig_map.selectAll(".market_map_text").style("opacity",t?.2:1),this.fig_map.selectAll(".market_map_rect").style("stroke-opacity",t?.2:1)}draw_map(){this.reset_drawing_controls(),this.fig_map.selectAll(".element_group").remove(),this.fig_names.selectAll(".names_object").remove(),this.rect_groups=this.fig_map.selectAll(".element_group").data(this.groups);const e=this.scales.color,t=this;this.rect_groups=this.rect_groups.enter().append("g").attr("class","element_group").attr("transform",((e,n)=>t.get_group_transform(n))).merge(this.rect_groups),this.rect_groups.exit().remove(),this.end_points=[],this.rect_groups.nodes().forEach(((n,i)=>{const r=t.grouped_data[t.groups[i]],s=t.get_new_cords(),a=t.get_end_points(s[2],r.length,s[0],s[1],s[3],s[4]);a.forEach((e=>{t.end_points.push(e)}));const o=t.running_sums[i];let l=h.select(n).selectAll(".rect_element").data(r);const c=l.enter().append("g").classed("rect_element",!0);c.append("rect").attr("x",0).attr("y",0).classed("market_map_rect",!0),c.append("text").classed("market_map_text",!0).style("text-anchor","middle").style("pointer-events","none").style("dominant-baseline","central"),l=c.merge(l),l.attr("transform",((e,n)=>t.get_cell_transform(n))).on("click",(function(e,n){t.cell_click_handler(e,o+n,this)})).on("mouseover",(function(e,n){t.mouseover_handler(e,o+n,this)})).on("mousemove",(e=>{t.mousemove_handler()})).on("mouseout",(function(e,n){t.mouseout_handler(e,o+n,this)})).attr("class",(function(e,t){return h.select(this).attr("class")+" rect_"+(o+t)})),l.selectAll(".market_map_rect").attr("width",t.column_width).attr("height",t.row_height).style("stroke-opacity",t.model.get("show_groups")?.2:1).style("stroke",t.model.get("stroke")).style("fill",((n,r)=>e&&void 0!==n.color&&null!==n.color?e.scale(n.color):t.colors_map(i))),l.selectAll(".market_map_text").attr("x",t.column_width/2).attr("y",t.row_height/2).text(((e,t)=>e.display)).style("opacity",t.model.get("show_groups")?.2:1),l.exit().remove(),t.create_bounding_path(n,a);const u=h.min(a,(e=>e.x)),d=h.min(a,(e=>e.y)),f=t.fig_names.append("foreignObject").attr("class","names_object").attr("x",u).attr("y",d).append("xhtml:div").attr("class","names_div").text(t.groups[i]);m.applyStyles(f,{display:"flex","flex-direction":"row","align-content":"center","align-items":"center",width:"100%",height:"100%","justify-content":"center","word-wrap":"break-word",font:"24px sans-serif",color:"black"})})),this.update_font_style(),this.draw_group_names()}draw_group_names(){const e=this.svg.selectAll(".bounding_path").nodes().map((e=>e.getBoundingClientRect()));this.fig_names.selectAll(".names_object").data(e).attr("width",(e=>e.width)).attr("height",(e=>e.height))}recolor_chart(){const e=this;this.update_data(),this.rect_groups=this.fig.selectAll(".element_group").data(this.groups);const t=this.scales.color;this.rect_groups.nodes().forEach(((n,i)=>{const r=e.grouped_data[e.groups[i]];h.select(n).selectAll(".rect_element").data(r).select("rect").style("stroke",e.model.get("stroke")).style("fill",((n,r)=>t&&void 0!==n.color&&null!==n.color?t.scale(n.color):e.colors_map(i)))}))}update_font_style(){const e=this.svg.selectAll(".market_map_text");m.applyStyles(e,this.model.get("font_style"))}update_map_colors(){void 0!==this.rect_groups&&null!==this.rect_groups&&this.recolor_chart()}cell_click_handler(e,t,n){if(this.model.get("enable_select")){const t=Object.assign(this.model.get("selected").slice(),this.model.get("selected")),n=t.indexOf(e.name);-1==n?t.push(e.name):t.splice(n,1),this.model.set("selected",t),this.touch()}}apply_selected(){const e=this.model.get("selected"),t=this;null==e||0===e.length?this.clear_selected():e.forEach((e=>{const n=t.fig_map.selectAll(".rect_element").filter(((t,n)=>t.name===e)),i=t.fig_click.append("rect").data(n.data()).attr("transform",n.attr("transform")).attr("x",0).attr("y",0).attr("width",t.column_width).attr("height",t.row_height);m.applyStyles(i,{stroke:t.selected_stroke,"stroke-width":"3px",fill:"none"})}))}clear_selected(){this.fig_click.selectAll("rect").remove()}mouseover_handler(e,t,n){const i=h.select(n).attr("transform");if(this.model.get("enable_hover")){const n=this.fig_hover.append("rect").attr("class","hover_"+t).attr("transform",i).attr("x",0).attr("y",0).attr("width",this.column_width).attr("height",this.row_height);m.applyStyles(n,{stroke:this.hovered_stroke,"stroke-width":"3px",fill:"none","pointer-events":"none"}),this.show_tooltip(h.event,e),this.send({event:"hover",data:e.name,ref_data:e.ref_data})}}update_selected_stroke(e,t){this.selected_stroke=t,this.fig_click.selectAll("rect").style("stroke",t)}update_hovered_stroke(e,t){this.hovered_stroke=t}mouseout_handler(e,t,n){this.fig_hover.select(".hover_"+t).remove(),this.hide_tooltip()}show_tooltip(e,t){const n=this;if(this.tooltip_view||this.tooltip_fields&&0!=this.tooltip_fields.length){const e=this.tooltip_div;e.transition().style("opacity",.9).style("display",null),this.move_tooltip(),e.select("table").remove();const i=t.ref_data;if(!this.tooltip_view){const t=e.append("table").selectAll("tr").data(this.tooltip_fields);t.exit().remove();const r=t.enter().append("tr");r.append("td").attr("class","tooltiptext").text((e=>e)),r.append("td").attr("class","tooltiptext").text(((e,t)=>null==i?null:null===i[e]||void 0===i[e]?"N/A":n.tooltip_formats[t](i[e])))}this.popper.enableEventListeners(),this.move_tooltip()}}mousemove_handler(){this.move_tooltip()}move_tooltip(){this.popper_reference.x=h.event.clientX,this.popper_reference.y=h.event.clientY,this.popper.scheduleUpdate()}hide_tooltip(){this.tooltip_div.style("pointer-events","none"),this.tooltip_div.transition().style("opacity",0).style("display","none"),this.popper.disableEventListeners()}create_tooltip_widget(){const e=this.model.get("tooltip_widget");null!==this.tooltip_view&&void 0!==this.tooltip_view&&(this.tooltip_view.remove(),this.tooltip_view=null);const t=this;e&&this.create_child_view(e).then((e=>{t.tooltip_view=e,c.MessageLoop.sendMessage(m.getLuminoWidget(e),u.Widget.Msg.BeforeAttach),t.tooltip_div.node().appendChild(e.el),c.MessageLoop.sendMessage(m.getLuminoWidget(e),u.Widget.Msg.AfterAttach)}))}get_group_transform(e){return"translate(0, 0)"}get_cell_transform(e){return this.past_border_y()?this.prev_y+=this.y_direction:this.past_border_x()?(this.y_direction=-1*this.y_direction,this.prev_x+=this.x_direction):(this.x_direction=-1*this.x_direction,this.prev_y+=this.y_direction,this.group_iter+=1),"translate("+this.prev_x*this.column_width+", "+this.prev_y*this.row_height+")"}get_new_cords(){let e=this.prev_x,t=this.prev_y,n=this.y_direction,i=this.x_direction,r=this.group_iter;return this.past_border_y()?t+=this.y_direction:this.past_border_x()?(n=-1*this.y_direction,e+=this.x_direction):(i=-1*this.x_direction,t+=this.y_direction,r+=1),[e,t,r,i,n,e*this.column_width,t*this.row_height]}past_border_y(){return 1==this.y_direction?this.prev_y+1<this.row_limits[this.group_iter]:this.prev_y-1>this.row_limits[this.group_iter-1]-1}past_border_x(){return 1==this.x_direction?this.prev_x+1<this.num_cols:this.prev_x-1>-1}colors_updated(){this.colors=this.model.get("colors"),this.recolor_chart()}get_color(e,t){return this.colors[e%t]}set_row_limits(){const e=Math.floor(this.num_rows/this.row_groups);this.row_limits=[];for(let t=this.row_groups-1;t>-1;t--)this.row_limits.unshift(t*e);this.row_limits[this.row_groups]=this.num_rows}get_end_points(e,t,n,i,r,s){let a=this.row_limits[e-1],o=this.row_limits[e],l=!1,c=r,u=s;const h=[];let d;const f=1==u?o-i:i-a+1;let p=1==c?this.num_cols-1-n:n,m=t,_=o-a;if(0!==m){this.calc_end_point_source(n,i,c,u).forEach((e=>{h.push(e)}));const e=Math.min(f,m);if(e===m)return this.calc_end_point_source(n,i,-1*c,u).forEach((e=>{h.push(e)})),d=i+(m-1)*u,this.calc_end_point_dest(n,d,-1*c,u).forEach((e=>{h.push(e)})),this.calc_end_point_dest(n,d,c,u).forEach((e=>{h.push(e)})),h;if(m-=e,0===p?this.calc_end_point_source(n,i,-1*c,u).forEach((e=>{h.push(e)})):f!==o-a?(this.calc_end_point_source(n,i,-1*c,u).forEach((e=>{h.push(e)})),m>_&&this.calc_end_point_dest(n+c,1==u?a:o-1,-1*c,-1*u).forEach((e=>{h.push(e)}))):m<_&&this.calc_end_point_source(n,i,-1*c,u).forEach((e=>{h.push(e)})),i+=u*(e-1),this.calc_end_point_dest(n,i,-1*c,u).forEach((e=>{h.push(e)})),0===m)return this.calc_end_point_dest(n,i,c,u).forEach((e=>{h.push(e)})),h;0!==p&&m>_&&(n+=c)}for(;m>_;){let t;if(_*p<m){t=p;const n=m-t*_;t+=Math.floor(n/(this.row_limits[e+1]-this.row_limits[e]))}else t=Math.floor(m/_);t>p?(n=1===c?this.num_cols-1:0,0!==p&&this.calc_end_point_dest(n,a,c,-1).forEach((e=>{h.push(e)})),t=p,p=this.num_cols,e+=1,a=o,o=this.row_limits[e],i=a,c*=-1,u=Math.pow(-1,t)*u*-1,this.calc_end_point_dest(n,o-1,-1*c,1).forEach((e=>{h.push(e)}))):t===p?(n=1===c?this.num_cols-1:0,0!==p&&this.calc_end_point_dest(n,a,c,-1).forEach((e=>{h.push(e)})),t=p,p=this.num_cols,(e+=1)<this.row_limits.length?(a=o,o=this.row_limits[e],i=a,c*=-1,u=Math.pow(-1,t)*u*-1,l=!0):(u=1,c=1)):(u=Math.pow(-1,t)*u,i=1===u?a:o-1,n+=c*(t-1),this.calc_end_point_source(n,i,-1*c,u).forEach((e=>{h.push(e)}))),m-=t*_,_=o-a}return 0===m?(i=1===u?o-1:a,c=l?-1*c:c,this.calc_end_point_dest(n,i,c,u).forEach((e=>{h.push(e)}))):(u*=-1,i=1===u?a:o-1,n=l?n:n+c,this.calc_end_point_source(n,i,-1*c,u).forEach((e=>{h.push(e)})),d=i+(m-1)*u,this.calc_end_point_dest(n,d,c,u).forEach((e=>{h.push(e)})),this.calc_end_point_dest(n,d,-1*c,u).forEach((e=>{h.push(e)}))),h}create_bounding_path(e,t){const n=[],i=t.slice();n.push(t[0]),i.splice(0,1);const r=["x","y"];let s=0,a=r[s%2],o=r[(s+1)%2];const l=n[0];let c=l[a],u=l[o],d=2*i.length,f=0;for(;i.length>1&&d>0;){const e=i.filter((e=>e[a]==c));if(e.length>0){s++;const t=h.min(e,(e=>e[o])),r=h.max(e,(e=>e[o]));if(t<u&&r>u)if("y"==a)f=1==this.x_direction?r:t;else{const n=e.filter((e=>e[o]<u)),i=e.filter((e=>e[o]>u));f=1==n.length?t:1==i.length?r:h.max(n,(e=>e[o]))}else f=t>u?t:r;const l=i.filter((e=>e[a]==c&&e[o]==f));l.forEach((e=>{i.splice(i.indexOf(e),1)}));const d={};d[a]=c,d[o]=f,n.push(d)}else f=u;const t=a;a=o,o=t,u=c,c=f,d--}i.length>0&&n.push(i[0]),n.push(t[0]);const p=h.line().curve(h.curveLinear).x((e=>e.x)).y((e=>e.y));return h.select(e).append("path").attr("class","bounding_path").attr("d",(()=>p(n))).attr("fill","none").style("stroke",this.model.get("group_stroke")).style("stroke-width",3)}calc_end_point_source(e,t,n,i){return t=1==i?t:t+1,[{x:(e=1==n?e:e+1)*this.column_width,y:t*this.row_height}]}calc_end_point_dest(e,t,n,i){return t=-1==i?t:t+1,[{x:(e=-1==n?e:e+1)*this.column_width,y:t*this.row_height}]}}t.MarketMap=_},4515:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MarketMapModel=void 0;const a=s(n(2055)),o=s(n(9163)),l=s(n(7308)),c=n(5734);class u extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},a.WidgetModel.prototype.defaults()),{_model_name:"MarketMapModel",_view_name:"MarketMap",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:c.semver_range,_view_module_version:c.semver_range,map_width:1080,map_height:800,names:[],groups:[],display_text:[],ref_data:void 0,title:"",tooltip_fields:[],tooltip_formats:[],show_groups:!1,cols:0,rows:0,row_groups:1,colors:o.scaleOrdinal(o.schemeCategory10).range(),scales:{},axes:[],color:[],map_margin:{top:50,right:50,left:50,bottom:50},preserve_aspect:!1,stroke:"white",group_stroke:"black",selected_stroke:"dodgerblue",hovered_stroke:"orangered",font_style:{},title_style:{},selected:[],enable_hover:!0,enable_select:!0,tooltip_widget:null})}}t.MarketMapModel=u,u.serializers=Object.assign(Object.assign({},a.WidgetModel.serializers),{scales:{deserialize:a.unpack_models},axes:{deserialize:a.unpack_models},tooltip_widget:{deserialize:a.unpack_models},style:{deserialize:a.unpack_models},layout:{deserialize:a.unpack_models},names:l.array_or_json_serializer,groups:l.array_or_json_serializer,display_text:l.array_or_json_serializer,color:l.array_or_json_serializer})},1146:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OHLC=void 0;const o=s(n(9163)),l=s(n(6731)),c=n(5321),u=n(8435);class h extends c.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){this.display_el_classes=["stick_body"];const t=e.render.call(this);this.selected_indices=this.model.get("selected"),this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.display_el_classes=["stick_body","stick_tail","stick_head"],this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.draw()}))}set_ranges(){this.scales.x&&this.scales.x.set_range(this.parent.padded_range("x",this.scales.x.model)),this.scales.y&&this.scales.y.set_range(this.parent.padded_range("y",this.scales.y.model))}set_positional_scales(){this.listenTo(this.scales.x,"domain_changed",(()=>{this.model.dirty||this.draw()})),this.listenTo(this.scales.y,"domain_changed",(()=>{this.model.dirty||this.draw()}))}create_listeners(){super.create_listeners.apply(this),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.model,"change:selected",this.update_selected),this.listenTo(this.model,"change:stroke",this.updateStroke),this.listenTo(this.model,"change:stroke_width",this.updateStrokeWidth),this.listenTo(this.model,"change:colors",this.updateColors),this.listenTo(this.model,"change:opacities",this.updateOpacities),this.listenTo(this.model,"change:marker",this.updateMarker),this.listenTo(this.model,"format_updated",this.draw),this.listenTo(this.model,"data_updated",this.draw),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")}))}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.reset_selection,this.event_listeners.element_clicked=this.ohlc_click_handler)}reset_selection(){this.model.set("selected",null),this.selected_indices=null,this.touch()}update_selected(e,t){this.selected_indices=t,this.apply_styles()}ohlc_click_handler(e){const t=e.index,n=this.model.get("selected")||[];let i=Array.from(n);const r=i.indexOf(t),s=u.d3GetEvent().ctrlKey||u.d3GetEvent().metaKey;if(r>-1&&s)i.splice(r,1);else if(u.d3GetEvent().shiftKey){if(r>-1)return;const e=0!==i.length?o.min(i):-1,n=0!==i.length?o.max(i):this.model.mark_data.length;t>n?l.range(n+1,t+1).forEach((e=>{i.push(e)})):t<e&&l.range(t,e).forEach((e=>{i.push(e)}))}else s||(i=[]),i.push(t);this.model.set("selected",0===i.length?null:i,{updated_view:this}),this.touch();const a=u.d3GetEvent();void 0!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault()}updateStroke(){const e=this.model.get("stroke");this.d3el.selectAll(".stick").style("stroke",e),this.legendEl&&(this.legendEl.selectAll("path").style("stroke",e),this.legendEl.selectAll("text").style("fill",e))}updateStrokeWidth(){const e=this.model.get("stroke_width");this.d3el.selectAll(".stick").attr("stroke-width",e)}updateColors(){const e=this.model.get("colors"),t=e[0]?e[0]:"none",n=e[1]?e[1]:"none";this.d3el.selectAll(".stick").style("fill",(e=>e.y[this.model.px.o]>e.y[this.model.px.c]?n:t)),this.legendEl&&this.legendEl.selectAll("path").style("fill",t)}updateOpacities(){const e=this.model.get("opacities");this.d3el.selectAll(".stick").style("opacity",((t,n)=>e[n])),this.legendEl&&this.legendEl.selectAll("path").attr("opacity",((t,n)=>e[n]))}updateMarker(){const e=this.model.get("marker");this.legendEl&&this.rectDim&&this.draw_legend_icon(this.rectDim,this.legendEl),this.drawMarkPaths(e,this.d3el,this.model.mark_data.map(((e,t)=>e[1])))}updateSelectedColors(e,t){let n=l.range(e,t+1);n.length==this.model.mark_data.length&&(n=[]);const i=this.model.get("stroke"),r=this.model.get("colors"),s=r[0]?r[0]:i,a=r[1]?r[1]:i,o=this.model.px;l.range(0,this.model.mark_data.length).forEach((e=>{this.d3el.selectAll("#stick"+e).style("stroke",i)})),n.forEach((e=>{this.d3el.selectAll("#stick"+e).style("stroke",(e=>e[o.o]>e[o.c]?a:s))}))}invert_range(e,t){if(void 0===e||void 0===t||0===this.model.mark_data.length)return this.updateSelectedColors(-1,-1),[];const n=new Uint32Array(l.range(this.model.mark_data.length)).filter((n=>{const i=this.xPixels[n];return i>=e&&i<=t}));let i=-1,r=-1;return n.length>0&&(e!==this.scales.x.scale.range()[0]||t!==this.scales.x.scale.range()[1])&&(i=n[0],r=n[n.length-1]),this.updateSelectedColors(i,r),this.model.set("selected",n),this.touch(),super.invert_range(e,t)}invert_point(e){const t=this.xPixels.map((t=>Math.abs(t-e))),n=t.indexOf(o.min(t));this.updateSelectedColors(n,n),this.model.set("selected",[n]),this.touch()}draw(){const e=this.scales.x,t=this.scales.y;this.set_ranges();const n=this.model.get("colors"),i=this.model.get("opacities"),r=n[0]?n[0]:"none",s=n[1]?n[1]:"none",a=this.model.px,l=this.d3el.selectAll(".stick").data(this.model.mark_data.map(((e,t)=>({x:e[0],y:e[1],index:t})))),c=l.enter().append("g").attr("class","stick").attr("id",((e,t)=>"stick"+t)).style("stroke",this.model.get("stroke")).style("opacity",((e,t)=>i[t]));c.append("path").attr("class","stick_head"),c.append("path").attr("class","stick_tail"),c.append("path").attr("class","stick_body"),l.exit().remove();let u=a.h;if(-1===a.h&&(u=a.o),this.d3el.selectAll(".stick").style("fill",((e,t)=>e.y[a.o]>e.y[a.c]?s:r)).attr("stroke-width",this.model.get("stroke_width")),"ordinal"===e.model.type){const n=o.max(this.parent.range("x"));this.d3el.selectAll(".stick").attr("transform",((i,r)=>"translate("+((void 0!==e.scale(this.model.mark_data[r][0])?e.scale(this.model.mark_data[r][0]):n)+e.scale.bandwidth()/2)+","+(t.scale(i.y[u])+t.offset)+")"))}else this.d3el.selectAll(".stick").attr("transform",((n,i)=>"translate("+(e.scale(this.model.mark_data[i][0])+e.offset)+","+(t.scale(n.y[u])+t.offset)+")"));this.d3el.selectAll(".stick").on("click",((e,t)=>this.event_dispatcher("element_clicked",{data:e,index:t}))),this.drawMarkPaths(this.model.get("marker"),this.d3el,this.model.mark_data.map((e=>e[1]))),this.xPixels=this.model.mark_data.map((t=>e.scale(t[0])+e.offset))}drawMarkPaths(e,t,n){const i=this.model.px,r=[],s=[],a=[],o=[],l=[],c=[],u=[],h=[];let d=this.calculateMarkWidth();const f=this.scales.x,p=this.scales.y;let m,_;for(let e=0;e<n.length;e++)-1===i.o?r[e]=void 0:r[e]=p.scale(n[e][i.o]),-1===i.c?o[e]=void 0:o[e]=p.scale(n[e][i.c]),-1!==i.o&&-1!==i.c&&(l[e]=n[e][i.o]>n[e][i.c]?r[e]:o[e],c[e]=n[e][i.o]<n[e][i.c]?r[e]:o[e]),-1===i.h||-1===i.l?(s[e]=r[e],a[e]=o[e]):(s[e]=p.scale(n[e][i.h]),a[e]=p.scale(n[e][i.l])),_=this.model.mark_data[e][0],d instanceof Date&&(d=d.getTime()),_ instanceof Date&&(_=_.getTime()),m=_+d,"ordinal"===f.model.type?h[e]=.75*f.scale.bandwidth():h[e]=.75*(f.scale(m)-f.scale(_)),u[e]=-1*h[e]/2;"candle"==e&&-1!==i.o&&-1!==i.c?(-1!==i.h||-1!==i.l?(t.selectAll(".stick_head").attr("d",((e,t)=>this.headPathCandle(l[t]-s[t]))),t.selectAll(".stick_tail").attr("d",((e,t)=>this.tailPathCandle(c[t]-s[t],a[t]-c[t])))):(t.selectAll(".stick_head").attr("d",""),t.selectAll(".stick_tail").attr("d","")),t.selectAll(".stick_body").attr("d",((e,t)=>this.bodyPathCandle(u[t],r[t]-s[t],h[t],o[t]-r[t])))):(-1!==i.o?t.selectAll(".stick_head").attr("d",((e,t)=>this.headPathBar(u[t],r[t]-s[t],-1*u[t]))):t.selectAll(".stick_head").attr("d",""),-1!==i.c?t.selectAll(".stick_tail").attr("d",((e,t)=>this.tailPathBar(o[t]-s[t],-1*u[t]))):t.selectAll(".stick_tail").attr("d",""),t.selectAll(".stick_body").attr("d",((e,t)=>this.bodyPathBar(a[t]-s[t]))))}headPathCandle(e){return"m0,0 l0,"+e}tailPathCandle(e,t){return"m0,"+e+" l0,"+t}bodyPathCandle(e,t,n,i){return"m"+e+","+t+" l"+n+",0 l0,"+i+" l"+-1*n+",0 z"}headPathBar(e,t,n){return"m"+e+","+t+" l"+n+",0"}tailPathBar(e,t){return"m0,"+e+" l"+t+",0"}bodyPathBar(e){return"m0,0 l0,"+e}calculateMarkWidth(){let e=Number.POSITIVE_INFINITY;const t=this.model.get("scales");for(let t=1;t<this.model.mark_data.length;t++){const n=this.model.mark_data[t][0]-this.model.mark_data[t-1][0];n<e&&(e=n)}return e===Number.POSITIVE_INFINITY&&(e=(t.x.domain[1]-t.x.domain[0])/2),e<0&&(e*=-1),e}relayout(){this.set_ranges(),this.d3el.select(".intselmouse").attr("width",this.width).attr("height",this.height),this.draw()}draw_legend(e,t,n,i,r){const s=this.model.get("stroke"),a=this.model.get("colors"),c=a[0]?a[0]:"none";this.rectDim=.8*r,this.legendEl=e.selectAll("#legend"+this.uuid).data([this.model.mark_data]);const u=this.legendEl.enter().append("g").attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).attr("class","legend").attr("id","legend"+this.uuid).style("fill",c).on("mouseover",l.bind(this.highlight_axes,this)).on("mouseout",l.bind(this.unhighlight_axes,this));u.append("path").attr("class","stick_head stick"),u.append("path").attr("class","stick_tail stick"),u.append("path").attr("class","stick_body stick").style("fill",c),u.selectAll("path").style("stroke",s).attr("transform","translate("+this.rectDim/2+",0)"),this.draw_legend_icon(this.rectDim,u),this.legendEl.append("text").attr("class","legendtext sticktext").attr("x",1.2*this.rectDim).attr("y",this.rectDim/2).attr("dy","0.35em").text(((e,t)=>this.model.get("labels")[t])).style("fill",s);const h=o.max(this.model.get("labels"),(e=>Number(e.length)));return this.legendEl.exit().remove(),[1,h]}draw_legend_icon(e,t){const n=e,i=e/2,r=3*e/4,s=e/4;"candle"===this.model.get("marker")?(t.selectAll(".stick_head").attr("d",this.headPathCandle(i/2)),t.selectAll(".stick_tail").attr("d",this.tailPathCandle(r,i/2)),t.selectAll(".stick_body").attr("d",this.bodyPathCandle(-1*i/2,s,i,n/2))):(t.selectAll(".stick_head").attr("d",this.headPathBar(-1*i/2,r,i/2)),t.selectAll(".stick_tail").attr("d",this.tailPathBar(s,i/2)),t.selectAll(".stick_body").attr("d",this.bodyPathBar(n)))}clear_style(){}compute_view_padding(){}set_default_style(){}set_style_on_elements(){}}t.OHLC=h},5729:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OHLCModel=void 0;const a=s(n(9163)),o=s(n(6731)),l=n(6032),c=s(n(7308));class u extends l.MarkModel{defaults(){return Object.assign(Object.assign({},l.MarkModel.prototype.defaults()),{_model_name:"OHLCModel",_view_name:"OHLC",x:[],y:[],scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"}},marker:"candle",stroke:null,stroke_width:1,colors:["green","red"],opacities:[],format:"ohlc"})}initialize(e,t){super.initialize(e,t),this.on_some_change(["x","y"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.on("change:format",this.updateFormat,this),this.px={o:-1,h:-1,l:-1,c:-1},this.mark_data=[],this.update_data(),this.update_domains(),this.updateFormat()}updateFormat(){this.update_data(),this.trigger("format_updated")}update_data(){let e=this.get("x"),t=this.get("y");const n=this.get("format");function i(e){console&&console.error("Invalid OHLC format: '"+e+"'")}if(this.px=n.toLowerCase().split("").reduce(((r,s,a)=>(-1!==r[s]&&(i(n),e=[],t=[]),r[s]=a,r)),{o:-1,h:-1,l:-1,c:-1}),-1!==this.px.h&&-1===this.px.l||-1===this.px.h&&-1!==this.px.l||n.length<2||n.length>4)i(n),e=[],t=[];else{const i=this.px;(-1===this.px.h||t.every((e=>e[i.h]===a.max(e)&&e[i.l]===a.min(e))))&&t.every((e=>e.length===n.length))||(e=[],t=[],console&&console.error("Invalid OHLC data"))}e.length>t.length?e=e.slice(0,t.length):e.length<t.length&&(t=t.slice(0,e.length)),this.mark_data=o.zip(e,t),this.update_domains(),this.trigger("data_updated")}update_domains(){if(!this.mark_data)return;const e=this.get("scales"),t=e.x,n=e.y;let i,r,s=Number.POSITIVE_INFINITY,o=0,l=0,c=0;for(let e=0;e<this.mark_data.length;e++)e>0&&(l=this.mark_data[e][0]-this.mark_data[e-1][0],l<s&&(s=l)),c=this.mark_data[e][this.px.h]-this.mark_data[e][this.px.l],c>o&&(o=c);if(this.mark_data.length<2&&(s=0),this.get("preserve_domain").x||0===this.mark_data.length?t.del_domain([],this.model_id+"_x"):"ordinal"===t.type?t.compute_and_set_domain(this.mark_data.map((e=>e[0]))):(i=a.min(this.mark_data.map((e=>e[0]))),r=a.max(this.mark_data.map((e=>e[0]))),r instanceof Date&&(r=r.getTime()),t.set_domain([i-s/2,r+s/2],this.model_id+"_x")),this.get("preserve_domain").y||0===this.mark_data.length)n.del_domain([],this.model_id+"_y");else{let e=this.px.h,t=this.px.l;-1!==e&&-1!==t||(e=this.px.o,t=this.px.c),i=a.min(this.mark_data.map((n=>n[1][t]<n[1][e]?n[1][t]:n[1][e]))),r=a.max(this.mark_data.map((n=>n[1][e]>n[1][t]?n[1][e]:n[1][t]))),r instanceof Date&&(r=r.getTime()),n.set_domain([i-o,r+o],this.model_id+"_y")}}get_data_dict(e,t){const n={index:t,x:e.x};return["open","low","high","close"].forEach((t=>{n[t]=e.y[this.px[t.substr(0,1)]]})),n}}t.OHLCModel=u,u.serializers=Object.assign(Object.assign({},l.MarkModel.serializers),{x:c.array_or_json_serializer,y:c.array_or_json_serializer})},1388:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OrdinalColorScale=void 0;const a=s(n(9163)),o=n(4408),l=s(n(9468));class c extends o.Scale{render(){this.scale=a.scaleOrdinal(),this.scale.domain(this.model.domain),this.create_event_listeners(),this.listenTo(this.model,"domain_changed",this.model_domain_changed),this.model.on_some_change(["colors","scheme"],this.colors_changed,this),this.set_range()}set_range(){this.model.get("colors").length>0?this.scale.range(l.cycle_colors(this.model.get("colors"),this.scale.domain().length)):this.scale.range(l.get_ordinal_scale_range(this.model.get("scheme"),this.scale.domain().length)),this.trigger("color_scale_range_changed")}model_domain_changed(){super.model_domain_changed(),this.set_range()}colors_changed(){this.set_range()}}t.OrdinalColorScale=c},5427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrdinalColorScaleModel=void 0;const i=n(644);class r extends i.OrdinalScaleModel{defaults(){return Object.assign(Object.assign({},i.OrdinalScaleModel.prototype.defaults()),{_model_name:"OrdinalColorScaleModel",_view_name:"OrdinalColorScale",domain:[]})}}t.OrdinalColorScaleModel=r},2765:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isOrdinalScale=t.OrdinalScale=void 0;const a=s(n(9163)),o=n(4408),l=s(n(6731));class c extends o.Scale{render(){this.scale=a.scaleBand(),this.scale.domain(this.model.domain),this.offset=0,this.create_event_listeners()}set_range(e,t){t=void 0===t?0:t,this.scale.range(e),this.scale.paddingInner(t),this.scale.paddingOuter(t/2),this.offset=0===this.scale.domain().length?0:this.scale.bandwidth()/2}expand_domain(e,t){const n=this.scale.copy();n.range(e).paddingInner(0).paddingOuter(0);const i=n.range().length>0?Math.abs((t[1]-e[1])/n.bandwidth()):0;this.scale.range(t),this.scale.paddingInner(0),this.scale.paddingOuter(i)}invert(e){const t=this,n=this.scale.domain(),i=n.map((e=>t.scale(e)+t.scale.bandwidth()/2)).map((t=>Math.abs(e-t)));return n[i.indexOf(a.min(i))]}invert_range(e){const t=this,n=this.scale.domain(),i=n.map((e=>t.scale(e)+t.scale.bandwidth()/2));return l.range(i.length).filter((t=>i[t]>=e[0]&&i[t]<=e[1])).map((e=>n[e]))}}t.OrdinalScale=c,t.isOrdinalScale=function(e){return"ordinal"===e.model.type}},644:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OrdinalScaleModel=void 0;const a=n(175),o=s(n(6731));class l extends a.ScaleModel{defaults(){return Object.assign(Object.assign({},a.ScaleModel.prototype.defaults()),{_model_name:"OrdinalScaleModel",_view_name:"OrdinalScale",domain:[]})}typedRange(e){return e}initialize(e,t){super.initialize(e,t)}set_init_state(){this.type="ordinal",this.min_from_data=!0,this.max_from_data=!0}set_listeners(){this.on("change:domain",this.domain_changed,this),this.domain_changed(),this.on("change:reverse",this.reverse_changed,this),this.reverse_changed()}domain_changed(){this.ord_domain=this.get("domain"),null!==this.ord_domain&&0!==this.ord_domain.length?(this.max_from_data=!1,this.min_from_data=!1,this.domain=this.ord_domain.map((e=>e)),this.trigger("domain_changed")):(this.max_from_data=!0,this.min_from_data=!0,this.domain=[],this.update_domain())}reverse_changed(e){const t=void 0!==e&&e.previous("reverse");this.reverse=this.get("reverse");const n=(t+this.reverse)%2;this.domain.length>0&&1===n&&(this.domain.reverse(),this.trigger("domain_changed",this.domain))}update_domain(){let e=[];for(const t in this.domains)e=o.union(e,this.domains[t]);this.domain.length===e.length&&o.intersection(this.domain,e).length===e.length||(this.domain=e,this.trigger("domain_changed",e))}compute_and_set_domain(e,t){if(!this.min_from_data&&!this.max_from_data)return;if(0===e.length)return void this.set_domain([],t);const n=o.flatten(e);this.get("reverse")&&n.reverse(),this.set_domain(n,t)}}t.OrdinalScaleModel=l},3370:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PanZoom=void 0;const a=s(n(2055)),o=s(n(9163)),l=n(8435),c=s(n(4154)),u=s(n(6731)),h=()=>{},d=navigator.userAgent.includes(" Chrome/");class f extends c.Interaction{constructor(){super(...arguments),this.last_mouse_pos=null}render(){super.render();const e=this;this.parent.svg.node().addEventListener("wheel",h,{passive:!1}),this.d3el.style("cursor","move").call(o.drag().on("start",(()=>{e.mousedown()})).on("drag",(()=>{e.mousemove()})).on("end",(()=>{e.mouseup()}))).on("wheel",(()=>{e.mousewheel()})),this.active=!1,this.update_scales(),this.listenTo(this.model,"change:scales",this.update_scales),this.set_ranges(),this.listenTo(this.parent,"margin_updated",this.set_ranges)}remove(){this.parent.svg.node().removeEventListener("wheel",h),super.remove()}update_scales(){const e=this.model.get("scales"),t=this;this.scale_promises=a.resolvePromisesDict({x:Promise.all((e.x||[]).map((e=>t.create_child_view(e)))),y:Promise.all((e.y||[]).map((e=>t.create_child_view(e))))}),a.resolvePromisesDict(this.scale_promises).then(u.bind(this.set_ranges,this))}set_ranges(){const e=this;let t;this.scale_promises.then((n=>{const i=n.x;for(t=0;t<i.length;t++)i[t].set_range(e.parent.padded_range("x",i[t].model));const r=n.y;for(t=0;t<r.length;t++)r[t].set_range(e.parent.padded_range("y",r[t].model))}))}hasRotatedParent(e){const t=e.parentNode;if(!t||"HTML"===t.tagName)return!1;const n=window.getComputedStyle(t).getPropertyValue("transform");return"none"!==n&&!n.startsWith("matrix(1, 0, 0, 1")||this.hasRotatedParent(t)}mousePos(){if(this.use_css_rotation_workaround){const e=window.event;return e.target===this.el&&(this.last_mouse_pos=[e.offsetX,e.offsetY]),this.last_mouse_pos}return o.mouse(this.el)}mousedown(){this.use_css_rotation_workaround=!d&&this.hasRotatedParent(this.el),this._mousedown(this.mousePos())}_mousedown(e){const t=this.model.get("scales");this.active=!0,this.d3el.style("cursor","move"),this.previous_pos=e.slice(),this.domains_in_order={x:(t.x||[]).map((e=>e.get_domain_slice_in_order())),y:(t.y||[]).map((e=>e.get_domain_slice_in_order()))}}mouseup(){this.active=!1}mousemove(){this._mousemove(this.mousePos())}_mousemove(e){if(this.active&&this.model.get("allow_pan")){void 0===this.previous_pos&&(this.previous_pos=e);const t={x:e[0]-this.previous_pos[0],y:e[1]-this.previous_pos[1]};return this.scale_promises.then((e=>{["x","y"].forEach((n=>{e[n].forEach(((e,i)=>{if(e.scale.invert){const r=e.scale.copy().domain(this.domains_in_order[n][i]),s=r(this.domains_in_order[n][i][0]),a=r(this.domains_in_order[n][i][1]),o=r.invert(s-t[n]),l=r.invert(a-t[n]);e.model.set("min",o),e.model.set("max",l),e.touch()}}))}))}))}}mousewheel(){if(this.model.get("allow_zoom")){const e=l.d3GetEvent();e.preventDefault();const t=-1*e.deltaY,n=this.mousePos();this._zoom(n,t)}}_zoom(e,t){if(t){t>0?this.d3el.style("cursor","zoom-in"):this.d3el.style("cursor","zoom-out");const n={x:e[0],y:e[1]},i=Math.exp(.001*-t);return this.scale_promises.then((e=>{["x","y"].forEach((t=>{e[t].forEach(((e,r)=>{if(e.scale.invert){const r=e.scale;let[s,a]=e.model.get_domain_slice_in_order();const o=r(s),l=r(a);s=r.invert((1-i)*n[t]+i*o),a=r.invert((1-i)*n[t]+i*l),e.model.set("min",s),e.model.set("max",a),e.touch()}}))}))}))}}}t.PanZoom=f},1089:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PanZoomModel=void 0;const a=s(n(2055)),o=n(5734),l=s(n(6731));class c extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},a.WidgetModel.prototype.defaults()),{_model_name:"PanZoomModel",_view_name:"PanZoom",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:o.semver_range,_view_module_version:o.semver_range,scales:{},allow_pan:!0,allow_zoom:!0})}initialize(e,t){super.initialize(e,t),this.on("change:scales",this.snapshot_scales,this),this.snapshot_scales()}reset_scales(){a.resolvePromisesDict(this.get("scales")).then((e=>{l.each(Object.keys(e),(t=>{l.each(e[t],((e,n)=>{e.set_state(this.scales_states[t][n])}),this)}),this)}))}snapshot_scales(){a.resolvePromisesDict(this.get("scales")).then((e=>{this.scales_states=Object.keys(e).reduce(((t,n)=>(t[n]=e[n].map((e=>e.get_state())),t)),{})}))}}t.PanZoomModel=c,c.serializers=Object.assign(Object.assign({},a.WidgetModel.serializers),{scales:{deserialize:a.unpack_models}})},7036:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Pie=void 0;const o=s(n(9163)),l=n(8435),c=s(n(6731)),u=n(5321),h=n(8435);class d extends u.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.selected_indices=this.model.get("selected"),this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.display_el_classes=["slice","text"],this.pieSelection=this.d3el.append("g").attr("class","pie"),this.pieSelection.append("g").attr("class","slices"),this.pieSelection.append("g").attr("class","labels"),this.pieSelection.append("g").attr("class","lines");const n=this.model.get("radius"),i=this.model.get("inner_radius");"outside"===this.model.get("display_labels")?(this.arc=o.arc().outerRadius(.8*n).innerRadius(.8*i),this.outerArc=o.arc().innerRadius(.9*n).outerRadius(.9*n)):this.arc=o.arc().outerRadius(n).innerRadius(i),this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),yield t,this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw()}))}set_ranges(){this.scales.x&&this.scales.x.set_range(this.parent.padded_range("x",this.scales.x.model)),this.scales.y&&this.scales.y.set_range(this.parent.padded_range("y",this.scales.y.model))}set_positional_scales(){const e=this.scales.x?this.scales.x:this.parent.scale_x,t=this.scales.y?this.scales.y:this.parent.scale_y;this.listenTo(e,"domain_changed",(()=>{this.model.dirty||this.draw()})),this.listenTo(t,"domain_changed",(()=>{this.model.dirty||this.draw()}))}create_listeners(){super.create_listeners(),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"data_updated",(function(){this.draw(!0)})),this.listenTo(this.model,"colors_updated",this.updateSlices),this.model.on_some_change(["inner_radius","radius"],(()=>{this.compute_view_padding(),this.updateRadius(!0)}),this),this.model.on_some_change(["colors","stroke","opacities"],this.updateSlices,this),this.model.on_some_change(["x","y"],(()=>{this.positionCenter(!0)}),this),this.model.on_some_change(["display_labels","label_color","font_size","font_weight","display_values","values_format"],(()=>{this.updateLabels(!0)}),this),this.model.on_some_change(["start_angle","end_angle","sort"],(()=>{this.draw(!0)}),this),this.listenTo(this.model,"labels_updated",(()=>{this.updateLabels(!0),this.updatePolylines(!0)})),this.listenTo(this.model,"change:selected",(()=>{this.selected_indices=this.model.get("selected"),this.apply_styles()})),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")}))}process_click(e){super.process_click(e),"select"===e&&(this.event_listeners.parent_clicked=this.reset_selection,this.event_listeners.element_clicked=this.click_handler)}relayout(){this.set_ranges(),this.positionCenter(),this.updateRadius()}positionCenter(e){const t=!0===e?this.parent.model.get("animation_duration"):0,n=this.scales.x?this.scales.x:this.parent.scale_x,i=this.scales.y?this.scales.y:this.parent.scale_y,r="date"===n.model.type?h.getDate(this.model.get("x")):this.model.get("x"),s="date"===i.model.type?h.getDate(this.model.get("y")):this.model.get("y"),a="translate("+(n.scale(r)+n.offset)+", "+(i.scale(s)+i.offset)+")";this.pieSelection.transition("positionCenter").duration(t).attr("transform",a)}updateRadius(e){const t=!0===e?this.parent.model.get("animation_duration"):0,n=this.model.get("radius"),i=this.model.get("inner_radius"),r=this.model.get("display_labels");"inside"===r?this.arc.outerRadius(n).innerRadius(i):"outside"===r&&(this.arc.outerRadius(.8*n).innerRadius(.8*i),this.outerArc.innerRadius(.9*n).outerRadius(.9*n));const s=this.pieSelection.select(".slices"),a=this.pieSelection.select(".labels"),o=this.pieSelection.select(".lines"),l=this;s.selectAll(".slice").transition("update_radius").duration(t).attr("d",this.arc),"inside"===r?a.selectAll("text").transition("update_radius").duration(t).attr("transform",(e=>"translate("+l.arc.centroid(e)+")")):"outside"===r&&(a.selectAll("text").transition("update_radius").duration(t).attr("transform",(e=>{const t=l.outerArc.centroid(e);return t[0]=n*("left"===l.midAngleLocation(e)?-1:1),"translate("+t+")"})),o.selectAll("polyline").transition("update_radius").duration(t).attr("points",(e=>{const t=l.outerArc.centroid(e);return t[0]=.95*n*("left"===l.midAngleLocation(e)?-1:1),[l.arc.centroid(e),l.outerArc.centroid(e),t].toString()})))}midAngleLocation(e){const t=(e.startAngle+e.endAngle)/2;return t>Math.PI||t<0&&t>-Math.PI?"left":"right"}draw(e){this.set_ranges(),this.positionCenter(e),this.d3Pie=o.pie().startAngle(2*this.model.get("start_angle")*Math.PI/360).endAngle(2*this.model.get("end_angle")*Math.PI/360).value((e=>e.size)),this.model.get("sort")||this.d3Pie.sort(null),this.updateSlices(e),this.updateLabels(e),this.updatePolylines(e)}updateSlices(e){const t=this,n=!0===e?this.parent.model.get("animation_duration"):0,i=this.pieSelection.select(".slices").selectAll(".slice").data(this.d3Pie(this.model.mark_data)),r=this.model.get("stroke");i.enter().append("path").attr("class","slice").each((function(e){this._current=e})).on("click",((e,n)=>t.event_dispatcher("element_clicked",{data:e,index:n}))).merge(i).transition("draw").duration(n).style("fill",((e,n)=>t.get_mark_color(e.data,n))).style("stroke",r).style("opacity",((e,n)=>t.get_mark_opacity(e.data,n))).attrTween("d",(function(e){const n=o.interpolate(this._current,e);return this._current=e,function(e){return t.arc(n(e))}})),i.exit().transition("remove").duration(n).style("opacity",0).remove(),this.apply_styles()}updateLabels(e){const t=this,n=!0===e?this.parent.model.get("animation_duration"):0,i=this.model.get("display_labels"),r=this.model.get("display_values"),s=o.format(this.model.get("values_format")),a=this.pieSelection.select(".labels").selectAll("text").data(this.d3Pie(this.model.mark_data)),l=a.enter().append("text").classed("pie_label",!0).attr("dy",".35em").style("opacity",0).each((function(e){this._current=e})).merge(a).transition("draw").duration(n).text((e=>""===e.data.label?"":r?e.data.label+": "+s(e.data.size):e.data.label)).style("font-weight",this.model.get("font_weight")).style("font-size",this.model.get("font_size")).style("opacity",(e=>"none"===i||0==e.value?0:1)),c=this.model.get("label_color");void 0!==c&&l.style("fill",c),"inside"===i?l.attr("transform",(e=>"translate("+this.arc.centroid(e)+")")).style("text-anchor","middle"):"outside"===i&&l.attrTween("transform",(function(e){const n=o.interpolate(this._current,e),i=this;return function(r){const s=n(r);i._current=s;const a=t.outerArc.centroid(s);return a[0]=t.model.get("radius")*("left"===t.midAngleLocation(e)?-1:1),"translate("+a+")"}})).styleTween("text-anchor",(function(e){const n=o.interpolate(this._current,e);return function(e){const i=n(e);return"left"===t.midAngleLocation(i)?"end":"start"}})),a.exit().remove()}updatePolylines(e){const t=this,n=!0===e?this.parent.model.get("animation_duration"):0,i=this.model.get("display_labels"),r=this.pieSelection.select(".lines").selectAll("polyline").data(this.d3Pie(this.model.mark_data)),s=r.enter().append("polyline").each((function(e){this._current=e})).merge(r).transition("draw").duration(n).style("opacity",(e=>"outside"!==i||0==e.value||""===e.data.label?0:1));"outside"===i&&s.attrTween("points",(function(e){const n=o.interpolate(this._current,e),i=this;return function(e){const r=n(e);i._current=r;const s=t.outerArc.centroid(r);return s[0]=.95*t.model.get("radius")*("left"===t.midAngleLocation(r)?-1:1),[t.arc.centroid(r),t.outerArc.centroid(r),s].toString()}})),r.exit().remove()}clear_style(e,t){let n=this.pieSelection.selectAll(".slice");t&&(n=n.filter(((e,n)=>-1!==t.indexOf(n))));const i={};for(const t in e)i[t]=null;h.applyStyles(n,i)}set_style_on_elements(e,t){if(null==t||0===t.length)return;let n=this.pieSelection.selectAll(".slice");n=n.filter(((e,n)=>-1!==t.indexOf(n))),h.applyStyles(n,e)}set_default_style(e){const t=this.model.get("stroke");this.pieSelection.select(".slices").selectAll(".slice").style("fill",((e,t)=>this.get_mark_color(e.data,t))).style("stroke",t).style("opacity",((e,t)=>this.get_mark_opacity(e.data,t)))}click_handler(e){const t=e.index,n=this,i=this.model.get("selected")||[];let r=Array.from(i);const s=r.indexOf(t),a=l.d3GetEvent().ctrlKey||l.d3GetEvent().metaKey;if(s>-1&&a)r.splice(s,1);else{if(l.d3GetEvent().shiftKey){if(s>-1)return;const e=0!==r.length?o.min(r):-1,i=0!==r.length?o.max(r):n.model.mark_data.length;t>i?c.range(i+1,t).forEach((e=>{r.push(e)})):t<e&&c.range(t+1,e).forEach((e=>{r.push(e)}))}else a||(r=[]);r.push(t)}this.model.set("selected",0===r.length?null:new Uint32Array(r),{updated_view:this}),this.touch();const u=l.d3GetEvent();void 0!==u.cancelBubble&&(u.cancelBubble=!0),u.stopPropagation&&u.stopPropagation(),u.preventDefault(),this.selected_indices=r,this.apply_styles()}reset_selection(){this.model.set("selected",null),this.touch(),this.selected_indices=null,this.clear_style(this.selected_style),this.clear_style(this.unselected_style),this.set_default_style()}compute_view_padding(){const e=this.model.get("scales"),t=o.max([this.model.get("radius"),this.model.get("inner_radius")]),n=e.x?t+1:0,i=e.y?t+1:0;n===this.xPadding&&i===this.yPadding||(this.xPadding=n,this.yPadding=i,this.trigger("mark_padding_updated"))}}t.Pie=d},3811:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PieModel=void 0;const a=s(n(9163)),o=n(6032),l=n(8435),c=s(n(7308));class u extends o.MarkModel{defaults(){return Object.assign(Object.assign({},o.MarkModel.prototype.defaults()),{_model_name:"PieModel",_view_name:"Pie",sizes:[],labels:[],color:null,x:.5,y:.5,scales_metadata:{color:{dimension:"color"}},sort:!1,colors:a.scaleOrdinal(a.schemeCategory10).range(),stroke:null,opacities:[],radius:180,inner_radius:.1,start_angle:0,end_angle:360,display_labels:"inside",display_values:!1,values_format:".1f",label_color:null,font_size:"12px",font_weight:"normal"})}initialize(e,t){super.initialize(e,t),this.on("change:sizes",this.update_data,this),this.on("change:color",(function(){this.updateColor(),this.trigger("colors_updated")}),this),this.on("change:labels",this.updateLabels,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data(),this.updateColor(),this.updateLabels(),this.update_domains()}update_data(){const e=this.get("sizes")||[],t=this.get("color")||[],n=this.get("labels")||[];this.mark_data=Array.prototype.map.call(e,((e,i)=>({size:e,color:t[i],label:null==n[i]?"":n[i],index:i}))),this.updateColor(),this.update_domains(),this.trigger("data_updated")}updateLabels(){if(!this.mark_data)return;const e=this.get("labels");this.mark_data.forEach(((t,n)=>{t.label=null==e[n]?"":e[n]})),this.trigger("labels_updated")}updateColor(){if(!this.mark_data)return;const e=this.get("color"),t=this.get("scales").color;t&&(this.get("preserve_domain").color?t.del_domain([],this.model_id+"_color"):t.compute_and_set_domain(e,this.model_id+"_color"))}update_domains(){if(!this.mark_data)return;const e=this.get("scales");if(e.x){const t="date"===e.x.type?l.getDate(this.get("x")):this.get("x");this.get("preserve_domain").x?e.x.del_domain([],this.model_id+"_x"):e.x.compute_and_set_domain([t],this.model_id+"_x")}e.y&&(this.get("preserve_domain").y?e.y.del_domain([],this.model_id+"_y"):e.y.compute_and_set_domain([this.get("y")],this.model_id+"_y"))}get_data_dict(e,t){return e.data}}t.PieModel=u,u.serializers=Object.assign(Object.assign({},o.MarkModel.serializers),{sizes:c.array_or_json_serializer,color:c.array_or_json_serializer})},69:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionReference=t.ElementReference=void 0,t.ElementReference=function(){function e(e){this.elt=e}return e.prototype.getBoundingClientRect=function(){return this.elt.getBoundingClientRect()},Object.defineProperty(e.prototype,"clientWidth",{get:function(){return this.elt.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientHeight",{get:function(){return this.elt.clientHeight},enumerable:!0,configurable:!0}),e}(),t.PositionReference=function(){function e(e){const t=e.x,n=e.y,i=e.width,r=e.height;this.x=t,this.y=n,this.width=i,this.height=r}return e.prototype.getBoundingClientRect=function(){const e=this.width/2,t=this.height/2;return{left:this.x-e,right:this.x+e,top:this.y-t,bottom:this.y+t,width:this.width,height:this.height}},Object.defineProperty(e.prototype,"clientWidth",{get:function(){return this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientHeight",{get:function(){return this.height},enumerable:!0,configurable:!0}),e}()},4408:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Scale=void 0;const a=s(n(2055));class o extends a.WidgetView{render(){this.offset=0}create_event_listeners(){this.listenTo(this.model,"domain_changed",this.model_domain_changed),this.listenTo(this.model,"highlight_axis",this.highlight_axis),this.listenTo(this.model,"unhighlight_axis",this.unhighlight_axis)}set_range(e,t){this.scale.range(e)}compute_and_set_domain(e,t){this.model.compute_and_set_domain(e,t)}set_domain(e,t){this.model.set_domain(e,t)}model_domain_changed(){this.scale.domain(this.model.domain),this.trigger("domain_changed")}highlight_axis(){this.trigger("highlight_axis")}unhighlight_axis(){this.trigger("unhighlight_axis")}expand_domain(e,t){}}t.Scale=o},175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleModel=void 0;const i=n(2055),r=n(5734);class s extends i.WidgetModel{defaults(){return Object.assign(Object.assign({},i.WidgetModel.prototype.defaults()),{_model_name:"ScaleModel",_view_name:"Scale",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:r.semver_range,_view_module_version:r.semver_range,reverse:!1,allow_padding:!0})}initialize(e,t){super.initialize(e,t),this.domains={},this.domain=[],this.set_init_state(),this.set_listeners()}set_init_state(){this.type="base"}set_listeners(){}set_domain(e,t){this.domains[t]=e,this.update_domain()}del_domain(e,t){void 0!==this.domains[t]&&(delete this.domains[t],this.update_domain())}get_domain_slice_in_order(){return this.reverse?this.domain.slice().reverse():this.domain.slice()}}t.ScaleModel=s},660:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Scatter=void 0;const a=n(8165),o=s(n(457)),l=s(n(9163)),c=o.symbol;class u extends a.ScatterBase{render(){return this.dot=c().type(this.model.get("marker")).size(this.model.get("default_size")).skew(this.model.get("default_skew")),super.render()}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:colors",this.update_colors),this.listenTo(this.model,"change:stroke",this.update_stroke),this.listenTo(this.model,"change:stroke_width",this.update_stroke_width),this.listenTo(this.model,"change:opacities",this.update_opacities),this.listenTo(this.model,"change:default_skew",this.update_default_skew),this.listenTo(this.model,"change:marker",this.update_marker),this.listenTo(this.model,"change:default_size",this.update_default_size),this.listenTo(this.model,"change:fill",this.update_fill),this.listenTo(this.model,"change:display_names",this.update_names),this.listenTo(this.model,"change:label_display_horizontal_offset change:label_display_vertical_offset",this.update_names)}update_colors(e,t){if(!this.model.dirty){const e=this.model.get("stroke"),n=t.length;this.d3el.selectAll(".dot").style("fill",this.model.get("fill")?this.get_mark_color.bind(this):"none").style("stroke",e||this.get_mark_color.bind(this)),this.legend_el&&(this.legend_el.select("path").style("fill",((e,i)=>t[i%n])).style("stroke",e||((e,i)=>t[i%n])),this.legend_el.select("text").style("fill",this.model.get("fill")?(e,i)=>t[i%n]:"none"))}this.apply_styles()}update_fill(e,t){const n=this.model.get("colors"),i=n.length;this.d3el.selectAll(".dot").style("fill",t?this.get_mark_color.bind(this):"none"),this.legend_el&&this.legend_el.selectAll("path").style("fill",t?(e,t)=>n[t%i]:"none")}update_stroke_width(){const e=this.model.get("stroke_width");this.d3el.selectAll(".dot").style("stroke-width",e),this.legend_el&&this.legend_el.selectAll("path").style("stroke-width",e)}update_stroke(e,t){const n=this.model.get("stroke");this.d3el.selectAll(".dot").style("stroke",n||this.get_mark_color.bind(this)),this.legend_el&&this.legend_el.selectAll("path").style("stroke",n)}update_opacities(e){if(!this.model.dirty){const t=this.model.get("opacities"),n=this.model.get("colors"),i=n.length,r=t.length,s=!0===e?this.parent.model.get("animation_duration"):0,a=this;this.d3el.selectAll(".dot").transition("update_opacities").duration(s).style("opacity",((e,t)=>a.get_element_opacity(e,t))),this.legend_el&&this.legend_el.select("path").style("opacity",((e,n)=>t[n%r])).style("fill",((e,t)=>n[t%i]))}}update_marker(e,t){this.model.dirty||(this.d3el.selectAll(".dot").transition("update_marker").duration(this.parent.model.get("animation_duration")).attr("d",this.dot.type(t)),this.legend_el&&this.legend_el.select("path").attr("d",this.dot.type(t)))}update_default_skew(e){if(!this.model.dirty){const t=!0===e?this.parent.model.get("animation_duration"):0,n=this;this.d3el.selectAll(".dot").transition("update_default_skew").duration(t).attr("d",this.dot.skew((e=>n.get_element_skew(e))))}}update_default_size(e){if(this.compute_view_padding(),!this.model.dirty){const t=!0===e?this.parent.model.get("animation_duration"):0,n=this;this.d3el.selectAll(".dot").transition("update_default_size").duration(t).attr("d",this.dot.size((e=>n.get_element_size(e)))),this.update_names(e)}}update_names(e){const t=this,n=this.model.get("names")||[],i=this.model.get("display_names")&&0!==n.length,r=e?this.parent.model.get("animation_duration"):0;this.d3el.selectAll(".object_grp").select("text").text((e=>e.name)).transition("update_names").duration(r).attr("transform",(e=>{const n=t.model.get("label_display_horizontal_offset"),i=t.model.get("label_display_vertical_offset"),r=Math.sqrt(t.get_element_size(e))/2;return"translate("+(n||r)+","+(i?-i:-r)+")"})).attr("display",(e=>i?"inline":"none"))}color_scale_updated(e){const t=this.model.get("fill"),n=this.model.get("stroke"),i=!0===e?this.parent.model.get("animation_duration"):0;this.d3el.selectAll(".object_grp").select("path").transition("color_scale_updated").duration(i).style("fill",t?this.get_mark_color.bind(this):"none").style("stroke",n||this.get_mark_color.bind(this))}draw_elements(e,t){const n=this,i=!0===e?this.parent.model.get("animation_duration"):0,r=this.d3el.selectAll(".object_grp");t.append("path").attr("class","dot element"),t.append("text").attr("class","dot_text"),r.select("path").transition("draw_elements").duration(i).attr("d",this.dot.size((e=>n.get_element_size(e))).skew((e=>n.get_element_skew(e)))),this.update_names(e),this.apply_styles()}draw_legend_elements(e,t){const n=this.model.get("colors"),i=n.length,r=this.model.get("stroke");e.append("path").attr("transform",((e,n)=>"translate( "+t/2+", "+t/2+")")).attr("d",this.dot.size(64)).style("fill",this.model.get("fill")?(e,t)=>n[t%i]:"none").style("stroke",r||((e,t)=>n[t%i]))}set_default_style(e){if(!e||0===e.length)return;const t=this.d3el.selectAll(".element").filter(((t,n)=>-1!==e.indexOf(n))),n=this.model.get("fill"),i=this.model.get("stroke"),r=this.model.get("stroke_width"),s=this;t.style("fill",n?this.get_mark_color.bind(this):"none").style("stroke",i||this.get_mark_color.bind(this)).style("opacity",((e,t)=>s.get_element_opacity(e,t))).style("stroke-width",r)}set_drag_style(e,t,n){l.select(n).select("path").classed("drag_scatter",!0).transition("set_drag_style").attr("d",this.dot.size(5*this.model.get("default_size")));const i=this.model.get("drag_color");i&&l.select(n).select("path").style("fill",i).style("stroke",i)}reset_drag_style(e,t,n){const i=this.model.get("stroke"),r=this.get_mark_color(e,t);l.select(n).select("path").classed("drag_scatter",!1).transition("reset_drag_style").attr("d",this.dot.size(this.get_element_size(e))),this.model.get("drag_color")&&l.select(n).select("path").style("fill",r).style("stroke",i||r)}}t.Scatter=u},8165:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterBase=void 0;const a=s(n(9163)),o=function(){return n(4124).f0}.bind(this),l=n(5321),c=s(n(6731)),u=n(8435);class h extends l.Mark{render(){const e=super.render(),t=this;return this.drag_listener=a.drag().subject((e=>({x:t.x_scale.scale(e.x),y:t.y_scale.scale(e.y)}))).on("start",(function(e,n){return t.drag_start(e,n,this)})).on("drag",(function(e,n){return t.on_drag(e,n,this)})).on("end",(function(e,n){return t.drag_ended(e,n,this)})),this.selected_style=this.model.get("selected_style"),this.unselected_style=this.model.get("unselected_style"),this.selected_indices=this.model.get("selected"),this.hovered_style=this.model.get("hovered_style"),this.unhovered_style=this.model.get("unhovered_style"),this.hovered_index=this.model.get("hovered_point")?[this.model.get("hovered_point")]:null,this.display_el_classes=["dot","legendtext"],this.event_metadata={mouse_over:{msg_name:"hover",lookup_data:!1,hit_test:!0},legend_clicked:{msg_name:"legend_click",hit_test:!0},element_clicked:{msg_name:"element_click",lookup_data:!1,hit_test:!0},parent_clicked:{msg_name:"background_click",hit_test:!1}},this.displayed.then((()=>{this.parent.tooltip_div.node().appendChild(this.tooltip_div.node()),this.create_tooltip()})),e.then((()=>{this.event_listeners={},this.process_interactions(),this.create_listeners(),this.compute_view_padding(),this.draw()}))}set_ranges(){const e=this.scales.x,t=this.scales.y,n=this.scales.size,i=this.scales.opacity,r=this.scales.skew,s=this.scales.rotation;e&&e.set_range(this.parent.padded_range("x",e.model)),t&&t.set_range(this.parent.padded_range("y",t.model)),n&&n.set_range([0,this.model.get("default_size")]),i&&i.set_range([.2,1]),r&&r.set_range([0,1]),s&&s.set_range([0,180])}set_positional_scales(){this.x_scale=this.scales.x,this.y_scale=this.scales.y,this.x_scale||(this.x_scale=this.parent.scale_x),this.y_scale||(this.y_scale=this.parent.scale_y),this.listenTo(this.x_scale,"domain_changed",(()=>{if(!this.model.dirty){const e=!0;this.update_position(e)}})),this.listenTo(this.y_scale,"domain_changed",(()=>{if(!this.model.dirty){const e=!0;this.update_position(e)}}))}initialize_additional_scales(){const e=this.scales.color,t=this.scales.size,n=this.scales.opacity,i=this.scales.skew,r=this.scales.rotation;e&&(this.listenTo(e,"domain_changed",(()=>{this.model.dirty||this.color_scale_updated(!0)})),e.on("color_scale_range_changed",this.color_scale_updated,this)),t&&this.listenTo(t,"domain_changed",(()=>{this.update_default_size(!0)})),n&&this.listenTo(n,"domain_changed",(()=>{this.update_opacities(!0)})),i&&this.listenTo(i,"domain_changed",(()=>{this.update_default_skew(!0)})),r&&this.listenTo(r,"domain_changed",(()=>{this.update_position(!0)}))}create_listeners(){super.create_listeners(),this.d3el.on("mouseover",(()=>{this.event_dispatcher("mouse_over")})).on("mousemove",(()=>{this.event_dispatcher("mouse_move")})).on("mouseout",(()=>{this.event_dispatcher("mouse_out")})),this.listenTo(this.model,"data_updated",(()=>{this.draw(!0)})),this.listenTo(this.model,"change:tooltip",this.create_tooltip),this.listenTo(this.model,"change:enable_hover",(()=>{this.hide_tooltip()})),this.listenTo(this.model,"change:interactions",this.process_interactions),this.listenTo(this.model,"change:enable_move",this.set_drag_behavior),this.listenTo(this.model,"change:selected",this.update_selected),this.listenTo(this.model,"change:hovered_point",this.update_hovered),this.listenTo(this.model,"change:hovered_style",this.hovered_style_updated),this.listenTo(this.model,"change:unhovered_style",this.unhovered_style_updated),this.listenTo(this.parent,"bg_clicked",(()=>{this.event_dispatcher("parent_clicked")}))}get_element_size(e){const t=this.scales.size;return t&&void 0!==e.size?t.scale(e.size):this.model.get("default_size")}get_element_opacity(e,t){const n=this.scales.opacity,i=this.model.get("opacities"),r=i.length;return n&&void 0!==e.opacity?n.scale(e.opacity):i[t%r]}get_element_skew(e){const t=this.scales.skew;return t&&void 0!==e.skew?t.scale(e.skew):this.model.get("default_skew")}get_element_rotation(e){const t=this.scales.rotation;return t&&e.rotation?"rotate("+t.scale(e.rotation)+")":""}relayout(){this.set_ranges(),this.update_position()}update_position(e){const t=this.scales.x,n=this.scales.y,i=!0===e?this.parent.model.get("animation_duration"):0;this.d3el.selectAll(".object_grp").transition("update_position").duration(i).attr("transform",(e=>"translate("+(t.scale(e.x)+t.offset)+","+(n.scale(e.y)+n.offset)+")"+this.get_element_rotation(e))),this.x_pixels=this.model.mark_data.map((e=>t.scale(e.x)+t.offset)),this.y_pixels=this.model.mark_data.map((e=>n.scale(e.y)+n.offset)),this.pixel_coords=this.model.mark_data.map((e=>[t.scale(e.x)+t.offset,n.scale(e.y)+n.offset]))}draw(e){this.set_ranges();const t=this.d3el.selectAll(".object_grp").data(this.model.mark_data,(e=>e.unique_id)),n=t.enter().append("g").attr("class","object_grp");this.update_position(e),this.set_drag_behavior(),n.on("click",((e,t)=>{this.event_dispatcher("element_clicked",{data:e,index:t})})),n.on("mouseover",((e,t)=>{this.scatter_hover_handler({data:e,index:t})})),n.on("mouseout",(()=>{this.reset_hover_points()})),this.draw_elements(e,n),t.exit().remove()}draw_elements(e,t){}process_click(e){switch(super.process_click(e),e){case"add":this.event_listeners.parent_clicked=this.add_element,this.event_listeners.element_clicked=()=>{};break;case"delete":this.event_listeners.parent_clicked=()=>{},this.event_listeners.element_clicked=this.delete_element;break;case"select":this.event_listeners.parent_clicked=this.reset_selection,this.event_listeners.element_clicked=this.scatter_click_handler}}reset_hover_points(){this.model.set("hovered_point",null),this.hovered_index=null,this.touch()}scatter_hover_handler(e){const t=e.index;this.model.set("hovered_point",t,{updated_view:this}),this.touch()}reset_selection(){this.model.set("selected",null),this.selected_indices=null,this.touch()}scatter_click_handler(e){const t=e.index,n=this.model.get("selected")||[];let i=Array.from(n);const r=i.indexOf(t),s=o().ctrlKey||o().metaKey;r>-1&&s?i.splice(r,1):(s||(i=[]),i.push(t)),this.model.set("selected",0===i.length?null:new Uint32Array(i),{updated_view:this}),this.touch();let a=o();a||(a=window.event),void 0!==a.cancelBubble&&(a.cancelBubble=!0),a.stopPropagation&&a.stopPropagation(),a.preventDefault()}hovered_style_updated(e,t){this.hovered_style=t,this.clear_style(e.previous("hovered_style"),this.hovered_index),this.style_updated(t,this.hovered_index)}unhovered_style_updated(e,t){this.unhovered_style=t;const n=this.hovered_index,i=n?c.range(this.model.mark_data.length).filter((e=>-1===n.indexOf(e))):[];this.clear_style(e.previous("unhovered_style"),i),this.style_updated(t,i)}draw_legend(e,t,n,i,r){this.legend_el=e.selectAll(".legend"+this.uuid).data([this.model.mark_data[0]]);const s=this.model.get("colors"),o=s.length,l=.8*r,c=this.legend_el.enter().append("g").attr("class","legend"+this.uuid).attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")")).on("mouseover",(()=>{this.event_dispatcher("legend_mouse_over")})).on("mouseout",(()=>{this.event_dispatcher("legend_mouse_out")})).on("click",(()=>{this.event_dispatcher("legend_clicked")}));this.draw_legend_elements(c,l),c.append("text").attr("class","legendtext").attr("x",1.2*l).attr("y",l/2).attr("dy","0.35em").text(((e,t)=>this.model.get("labels")[t])).style("fill",((e,t)=>s[t%o])),this.legend_el=c.merge(this.legend_el);const u=a.max(this.model.get("labels"),(e=>Number(e.length)));return this.legend_el.exit().remove(),[1,u]}draw_legend_elements(e,t){}invert_point(e){if(void 0===e)return this.model.set("selected",null),void this.touch();const t=this.x_pixels.map((t=>Math.abs(t-e))),n=t.indexOf(a.min(t));this.model.set("selected",new Uint32Array([n])),this.touch()}selector_changed(e,t){if(void 0===e)return this.model.set("selected",null),this.touch(),[];const n=this.pixel_coords,i=new Uint32Array(c.range(n.length)).filter((t=>e(n[t])));this.model.set("selected",i),this.touch()}update_selected(e,t){this.selected_indices=t,this.apply_styles()}update_hovered(e,t){this.hovered_index=null===t?t:[t],this.apply_styles()}apply_styles(e){void 0!==e&&null!=e||(e=[this.selected_style,this.unselected_style,this.hovered_style,this.unhovered_style]),super.apply_styles([e]);const t=c.range(this.model.mark_data.length);this.set_style_on_elements(this.hovered_style,this.hovered_index);const n=this.hovered_index?c.difference(t,this.hovered_index):[];this.set_style_on_elements(this.unhovered_style,n)}clear_style(e,t){let n=this.d3el.selectAll(".element");t&&(n=n.filter(((e,n)=>-1!==t.indexOf(n))));const i={};for(const t in e)i[t]=null;u.applyStyles(n,i)}set_style_on_elements(e,t){if(!t||0===t.length)return;if(0===Object.keys(e).length)return;let n=this.d3el.selectAll(".element");n=n.filter(((e,n)=>-1!==t.indexOf(n))),u.applyStyles(n,e)}compute_view_padding(){const e=Math.sqrt(this.model.get("default_size"))/2+1;e===this.xPadding&&e===this.yPadding||(this.xPadding=e,this.yPadding=e,this.trigger("mark_padding_updated"))}update_array(e,t){const n=this.scales.x,i=this.scales.y;if(!this.model.get("restrict_y")){const i=Object.assign(this.model.get("x").slice(),this.model.get("x"));i[t]=n.invert(e[0]),this.model.set("x",i)}if(!this.model.get("restrict_x")){const n=Object.assign(this.model.get("y").slice(),this.model.get("y"));n[t]=i.invert(e[1]),this.model.set("y",n)}this.touch()}set_drag_behavior(){const e=this.d3el.selectAll(".object_grp");this.model.get("enable_move")?e.call(this.drag_listener):e.on(".drag",null)}set_drag_style(e,t,n){}reset_drag_style(e,t,n){}drag_start(e,t,n){const i=this.scales.x,r=this.scales.y;e[0]=i.scale(e.x)+i.offset,e[1]=r.scale(e.y)+r.offset,this.set_drag_style(e,t,n),this.send({event:"drag_start",point:{x:e.x,y:e.y},index:t})}on_drag(e,t,n){const i=this.scales.x,r=this.scales.y,s=this.model.get("restrict_x"),l=this.model.get("restrict_y");s&&l||(l||(e[0]=o().x),s||(e[1]=o().y),a.select(n).attr("transform",(()=>"translate("+e[0]+","+e[1]+")")),this.send({event:"drag",origin:{x:e.x,y:e.y},point:{x:i.invert(e[0]),y:r.invert(e[1])},index:t}),this.model.get("update_on_move")&&this.update_array(e,t))}drag_ended(e,t,n){const i=this.scales.x,r=this.scales.y;this.reset_drag_style(e,t,n),this.update_array(e,t),this.send({event:"drag_end",point:{x:i.invert(e[0]),y:r.invert(e[1])},index:t})}add_element(){const e=a.mouse(this.el),t=[e[0],e[1]],n=this.scales.x,i=this.scales.y,r=this.model.get("x"),s=this.model.get("y"),o=new r.constructor(r.length+1),l=new s.constructor(s.length+1);o.set(r),l.set(s),o[r.length]=n.invert(t[0]),l[s.length]=i.invert(t[1]),this.model.set("x",o),this.model.set("y",l),this.touch()}delete_element(e){const t=e.index;let n=Object.assign(this.model.get("x").slice(),this.model.get("x")),i=Object.assign(this.model.get("y").slice(),this.model.get("y"));n.copyWithin(t,t+1,n.length),i.copyWithin(t,t+1,i.length),n=n.slice(0,n.length-1),i=i.slice(0,i.length-1),this.model.set("x",n),this.model.set("y",i),this.touch()}}t.ScatterBase=h},988:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterBaseModel=void 0;const a=n(6032),o=s(n(7308));class l extends a.MarkModel{defaults(){return Object.assign(Object.assign({},a.MarkModel.prototype.defaults()),{_model_name:"ScatterBaseModel",_view_name:"ScatterBase",x:[],y:[],color:null,opacity:null,size:null,rotation:null,hovered_point:null,scales_metadata:{x:{orientation:"horizontal",dimension:"x"},y:{orientation:"vertical",dimension:"y"},color:{dimension:"color"},size:{dimension:"size"},opacity:{dimension:"opacity"},rotation:{dimension:"rotation"}},label_display_horizontal_offset:null,label_display_vertical_offset:null,hovered_style:{},unhovered_style:{},colors:["steelblue"],opacities:[1],enable_move:!1,enable_delete:!1,restrict_x:!1,restrict_y:!1,update_on_move:!1})}initialize(e,t){super.initialize(e,t),this.on_some_change(["x","y","color","opacity","size","rotation"],this.update_data,this),this.on_some_change(["preserve_domain"],this.update_domains,this),this.update_data()}update_mark_data(){let e=this.get("x");const t=this.get("y");if(0===e.length||0===t.length)this.mark_data=[];else{const n=Math.min(e.length,t.length);e=e.slice(0,n);const i=this.get("color")||[],r=this.get("size")||[],s=this.get("opacity")||[],a=this.get("rotation")||[];this.mark_data=Array.prototype.map.call(e,((e,n)=>({x:e,y:t[n],color:i[n],size:r[n],opacity:s[n],rotation:a[n],index:n})))}}update_data(){this.dirty=!0,this.update_mark_data(),this.update_unique_ids(),this.update_domains(),this.dirty=!1,this.trigger("data_updated")}update_unique_ids(){}get_data_dict(e,t){return e}update_domains(){if(!this.mark_data)return;const e=this.get("scales");for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];this.get("preserve_domain")[t]?n.del_domain([],this.model_id+t):n.compute_and_set_domain(this.mark_data.map((e=>e[t])),this.model_id+t)}}}t.ScatterBaseModel=l,l.serializers=Object.assign(Object.assign({},a.MarkModel.serializers),{x:o.array_or_json_serializer,y:o.array_or_json_serializer,color:o.array_or_json_serializer,opacity:o.array_or_json_serializer,size:o.array_or_json_serializer,rotation:o.array_or_json_serializer,opacities:o.array_or_json_serializer})},635:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterGL=void 0;const o=n(5321),l=s(n(9163)),c=s(n(457)),u=s(n(6731)),h=n(8435),d=s(n(2317)),f=c.symbol,p=function(e){if(e instanceof Float32Array)return e;if("function"==typeof e[Symbol.iterator]){const t=e.length,n=new Float32Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return new Float32Array(e)},m=function(e,t){const n=e||t||[0,0,0,0];if("none"==n)return[0,0,0,0];{const e=new d.Color(n);return[e.r,e.g,e.b,1]}};class _{constructor(e,t=1,n=1,i=!1){this.array=e,this.item_size=t,this.mesh_per_attribute=n,this.normalized=i}}class g extends _{constructor(e,t=1,n=1,i=!1,r=!0){super(e,t,n,i),this.use_colormap=r}}class y extends _{constructor(e,t=1,n=1,i=!1,r=!0){super(e,t,n,i),this.use_selection=r}}class v extends o.Mark{render(){const e=Object.create(null,{render:{get:()=>super.render}});return a(this,void 0,void 0,(function*(){const t=e.render.call(this);this.transitions=[],this.invalidated_pixel_position=!0,this.dot=f().type(this.model.get("marker")),this.instanced_geometry=new d.InstancedBufferGeometry;const i=new Float32Array([-.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0]);this.instanced_geometry.addAttribute("position",new d.Float32BufferAttribute(i,3));const r=new Float32Array([0,1,1,1,0,0,1,0]);this.instanced_geometry.addAttribute("uv",new d.Float32BufferAttribute(r,2));const s=new Uint16Array([0,2,1,2,3,1]);this.instanced_geometry.index=new d.Uint16BufferAttribute(s,1),this.scatter_material=new d.RawShaderMaterial({uniforms:{domain_x:{type:"2f",value:[0,10]},domain_y:{type:"2f",value:[-12,12]},domain_z:{type:"2f",value:[0,1]},domain_size:{type:"2f",value:[0,1]},domain_color:{type:"2f",value:[0,1]},domain_rotation:{type:"2f",value:[0,180]},domain_opacity:{type:"2f",value:[0,1]},range_x:{type:"2f",value:[0,1]},range_y:{type:"2f",value:[0,1]},range_z:{type:"2f",value:[0,1]},range_size:{type:"2f",value:[0,1]},range_rotation:{type:"2f",value:[0,Math.PI]},range_opacity:{type:"2f",value:[0,1]},animation_time_x:{type:"f",value:1},animation_time_y:{type:"f",value:1},animation_time_z:{type:"f",value:1},animation_time_size:{type:"f",value:1},animation_time_color:{type:"f",value:1},animation_time_rotation:{type:"f",value:1},animation_time_opacity:{type:"f",value:1},has_selection:{type:"b",value:!1},has_hover:{type:"b",value:!1},has_selected_fill:{type:"b",value:!1},has_selected_stroke:{type:"b",value:!1},has_selected_opacity:{type:"b",value:!1},has_unselected_fill:{type:"b",value:!1},has_unselected_stroke:{type:"b",value:!1},has_unselected_opacity:{type:"b",value:!1},has_hovered_fill:{type:"b",value:!1},has_hovered_stroke:{type:"b",value:!1},has_hovered_opacity:{type:"b",value:!1},has_unhovered_fill:{type:"b",value:!1},has_unhovered_stroke:{type:"b",value:!1},has_unhovered_opacity:{type:"b",value:!1},selected_fill:{type:"4f",value:[1,0,0,1]},selected_stroke:{type:"4f",value:[1,0,0,1]},selected_opacity:{value:1},unselected_fill:{type:"4f",value:[1,0,0,1]},unselected_stroke:{type:"4f",value:[1,0,0,1]},unselected_opacity:{value:1},hovered_fill:{type:"4f",value:[0,1,0,1]},hovered_opacity:{value:1},hovered_stroke:{type:"4f",value:[0,1,0,1]},unhovered_fill:{type:"4f",value:[0,1,0,1]},unhovered_stroke:{type:"4f",value:[0,1,0,1]},unhovered_opacity:{value:1},default_stroke_color:{type:"4f",value:[0,0,0,0]},colormap:{type:"t",value:null},fill:{type:"b",value:!0},stroke_width:{type:"f",value:1.5},marker_scale:{type:"f",value:1}},vertexShader:n(4558).A,fragmentShader:n(9676).A,transparent:!0,depthTest:!1,depthWrite:!1,blending:d.CustomBlending,blendEquation:d.AddEquation,blendSrc:d.OneFactor,blendDst:d.OneMinusSrcAlphaFactor,blendEquationAlpha:d.AddEquation,blendSrcAlpha:d.OneFactor,blendDstAlpha:d.OneMinusSrcAlphaFactor}),this.mesh=new d.Mesh(this.instanced_geometry,this.scatter_material),yield t,this.camera=new d.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.camera.position.z=10,this.scene=new d.Scene;const a=new _(p(this.model.get("x")));this.x=this.initialize_attribute("x",a),this.x_previous=this.initialize_attribute("x_previous",a);const o=new _(p(this.model.get("y")));this.y=this.initialize_attribute("y",o),this.y_previous=this.initialize_attribute("y_previous",o),this.markers_number=Math.min(this.x.array.length,this.y.array.length),this.instanced_geometry.maxInstancedCount=this.markers_number;const l=this.get_color_attribute_parameters();this.color=this.initialize_attribute("color",l),this.scatter_material.defines.USE_COLORMAP=l.use_colormap;const c=this.get_opacity_attribute_parameters();this.opacity=this.initialize_attribute("opacity",c),this.opacity_previous=this.initialize_attribute("opacity_previous",c);const u=this.get_size_attribute_parameters();this.size=this.initialize_attribute("size",u),this.size_previous=this.initialize_attribute("size_previous",u);const h=this.get_rotation_attribute_parameters();this.rotation=this.initialize_attribute("rotation",h),this.rotation_previous=this.initialize_attribute("rotation_previous",h);const m=this.get_selected_attribute_parameters();this.selected=this.initialize_attribute("selected",m),this.scatter_material.uniforms.has_selection.value=m.use_selection,this.scatter_material.needsUpdate=!0,this.scene.add(this.mesh),this.create_listeners(),this.compute_view_padding(),this.update_scene(),this.listenTo(this.parent,"margin_updated",(()=>{this.update_scene()}))}))}initialize_attribute(e,t){const n=new d.InstancedBufferAttribute(t.array,t.item_size,t.mesh_per_attribute);return n.normalized=t.normalized,n.dynamic=!0,this.instanced_geometry.addAttribute(e,n),n}get_color_attribute_parameters(){if(this.model.get("color")){const e=this.model.get("color");let t;return e.length<this.markers_number?(t=p(this.markers_number),t.set(e)):t=p(e),new g(t,1,1,!0,!0)}{let e,t,n=this.model.get("colors");if(!n){const e=(this.model.get("unselected_style")||{}).fill||"orange";n=[e]}if(1==n.length){const i=new d.Color(n[0]);e=p([i.r,i.g,i.b]),t=this.markers_number}else e=p(3*this.markers_number),u.each(u.range(this.markers_number),(t=>{const i=new d.Color(n[t%n.length]);e[3*t+0]=i.r,e[3*t+1]=i.g,e[3*t+2]=i.b})),t=1;return new g(e,3,t,!1,!1)}}get_opacity_attribute_parameters(){let e=this.model.get("opacities")||[1];if(0==e.length&&(e=[1]),this.model.get("opacity")){const t=this.model.get("opacity");let n;return t.length<this.markers_number?(n=p(this.markers_number),n.set(t),u.each(u.range(this.markers_number-t.length),(i=>{i+=t.length,n[i]=e[i%e.length]}))):n=p(t),new _(n,1,1)}{let t,n;return 1==e.length?(t=p(e),n=this.markers_number):(t=p(this.markers_number),n=1,u.each(u.range(this.markers_number),(n=>{t[n]=e[n%e.length]}))),new _(t,1,n)}}get_size_attribute_parameters(){if(this.model.get("size")){const e=this.model.get("size");let t;return e.length<this.markers_number?(t=p(this.markers_number),t.fill(this.model.get("default_size")),t.set(e)):t=p(e),new _(t,1,1)}return new _(p([this.model.get("default_size")]),1,this.markers_number)}get_rotation_attribute_parameters(){if(this.model.get("rotation")){const e=this.model.get("rotation");let t;return e.length<this.markers_number?(t=p(this.markers_number),t.set(e)):t=p(e),new _(t,1,1)}return new _(p(1),1,this.markers_number)}get_selected_attribute_parameters(){if(this.model.get("selected")){const e=this.model.get("selected"),t=p(this.markers_number);for(let n=0;n<e.length;n++)e[n]<t.length&&(t[e[n]]=1);return new y(t,1,1,!1,!0)}return new y(p(1),1,this.markers_number,!1,!1)}update_scene(){this.parent.update_gl()}render_gl(){this.set_ranges();const e=this.parent,t=this.scales.x?this.scales.x:this.parent.scale_x,n=this.scales.y?this.scales.y:this.parent.scale_y,i=this.parent.padded_range("x",t.model),r=this.parent.padded_range("y",n.model);if(u.each(["selected","hovered"],(e=>{u.each(["stroke","fill","opacity"],(t=>{this.scatter_material.uniforms[`has_${e}_${t}`].value=Boolean(this.model.get(`${e}_style`)[t]),this.scatter_material.uniforms[`has_un${e}_${t}`].value=Boolean(this.model.get(`un${e}_style`)[t]),u.contains(["opacity"],t)?(this.scatter_material.uniforms[`${e}_${t}`].value=this.model.get(`${e}_style`)[t],this.scatter_material.uniforms[`un${e}_${t}`].value=this.model.get(`un${e}_style`)[t]):(this.scatter_material.uniforms[`${e}_${t}`].value=m(this.model.get(`${e}_style`)[t],"green"),this.scatter_material.uniforms[`un${e}_${t}`].value=m(this.model.get(`un${e}_style`)[t],"green"))}))})),this.camera.left=0,this.camera.right=e.plotarea_width,this.camera.bottom=0,this.camera.top=e.plotarea_height,this.camera.updateProjectionMatrix(),this.scatter_material.uniforms.range_x.value=i,this.scatter_material.uniforms.range_y.value=[r[1],r[0]],this.scatter_material.uniforms.domain_x.value=t.scale.domain(),this.scatter_material.uniforms.domain_y.value=n.scale.domain(),this.scales.size)this.scatter_material.uniforms.range_size.value=this.scales.size.scale.range(),this.scatter_material.uniforms.domain_size.value=this.scales.size.scale.domain();else{const e=this.model.get("default_size");this.scatter_material.uniforms.range_size.value=[0,e],this.scatter_material.uniforms.domain_size.value=[0,e]}this.scales.rotation&&(this.scatter_material.uniforms.range_rotation.value=this.scales.rotation.scale.range(),this.scatter_material.uniforms.domain_rotation.value=this.scales.rotation.scale.domain()),this.scales.opacity&&(this.scatter_material.uniforms.range_opacity.value=this.scales.opacity.scale.range(),this.scatter_material.uniforms.domain_opacity.value=this.scales.opacity.scale.domain()),e.renderer.render(this.scene,this.camera);const s=[];for(let e=0;e<this.transitions.length;e++){const t=this.transitions[e];t.is_done()||s.push(t),t.update()}this.transitions=s,this.transitions.length>0&&this.update_scene()}create_listeners(){super.create_listeners(),this.listenTo(this.model,"change:x",this.update_x),this.listenTo(this.model,"change:y",this.update_y),this.listenTo(this.model,"change:color change:colors change:unselected_style",this.update_color),this.listenTo(this.model,"change:opacity change:opacities",this.update_opacity),this.listenTo(this.model,"change:size change:default_size",this.update_size),this.listenTo(this.model,"change:rotation",this.update_rotation),this.listenTo(this.model,"change:selected",this.update_selected),this.listenTo(this.model,"change:marker",this.update_marker),this.update_marker(),this.listenTo(this.model,"change:stroke",this.update_stroke),this.update_stroke(),this.listenTo(this.model,"change:stroke_width",this.update_stroke_width),this.update_stroke_width();const e=()=>{this.mesh.visible=this.model.get("visible"),this.update_scene()};this.listenTo(this.model,"change:visible",e),e();const t=()=>{this.scatter_material.defines.FILL=this.model.get("fill")?1:0,this.scatter_material.needsUpdate=!0,this.update_scene()};this.listenTo(this.model,"change:fill",t),t(),this.listenTo(this.model,"change",this.update_legend)}update_attribute(e,t,n){return t.meshPerAttribute!=n.mesh_per_attribute||t.array.length<n.array.length?t=this.initialize_attribute(e,n):(t.itemSize=n.item_size,t.setArray(n.array)),t.needsUpdate=!0,t}update_attributes(e,t,n,i,r=!0,s=()=>{}){if(r){if(t.array.length<i.array.length&&t.meshPerAttribute==i.mesh_per_attribute){const r=h.deepCopy(i.array);r.set(t.array),n=this.update_attribute(e+"_previous",n,new _(r,t.itemSize,t.meshPerAttribute,t.normalized))}else n=t.array.length==i.array.length&&t.meshPerAttribute!=i.mesh_per_attribute?this.update_attribute(e+"_previous",n,new _(t.array,t.itemSize,i.mesh_per_attribute,t.normalized)):this.update_attribute(e+"_previous",n,new _(t.array,t.itemSize,t.meshPerAttribute,t.normalized));t=this.update_attribute(e,t,i),this.animate_attribute(e,s)}else n=this.update_attribute(e+"_previous",n,i),t=this.update_attribute(e,t,i);return[t,n]}animate_attribute(e,t=()=>{}){this.scatter_material.uniforms["animation_time_"+e].value=0,this.transition((t=>{this.scatter_material.uniforms["animation_time_"+e].value=t}),t,this)}update_x(e=!0){const t=p(this.model.get("x")),n=Math.min(t.length,this.y.array.length);this.markers_number!=n&&this.update_markers_number(n),[this.x,this.x_previous]=this.update_attributes("x",this.x,this.x_previous,new _(t,1,1)),e&&this.update_scene()}update_y(e=!0){const t=p(this.model.get("y")),n=Math.min(this.x.array.length,t.length);this.markers_number!=n&&this.update_markers_number(n),[this.y,this.y_previous]=this.update_attributes("y",this.y,this.y_previous,new _(t,1,1)),e&&this.update_scene()}update_markers_number(e){const t=this.markers_number;this.markers_number=e,this.instanced_geometry.maxInstancedCount=e,this.markers_number>t&&(this.update_color(!1),this.update_opacity(!1),this.update_size(!1),this.update_rotation(!1),this.update_selected(!1))}update_color(e=!0){const t=this.get_color_attribute_parameters();this.color=this.update_attribute("color",this.color,t),this.color.normalized=t.normalized,this.scatter_material.defines.USE_COLORMAP=t.use_colormap,this.scatter_material.needsUpdate=!0,e&&this.update_scene()}update_opacity(e=!0){const t=this.get_opacity_attribute_parameters();[this.opacity,this.opacity_previous]=this.update_attributes("opacity",this.opacity,this.opacity_previous,t),e&&this.update_scene()}update_size(e=!0){const t=this.get_size_attribute_parameters();[this.size,this.size_previous]=this.update_attributes("size",this.size,this.size_previous,t),e&&this.update_scene()}update_rotation(e=!0){const t=this.get_rotation_attribute_parameters();[this.rotation,this.rotation_previous]=this.update_attributes("rotation",this.rotation,this.rotation_previous,t),e&&this.update_scene()}update_selected(e=!0){const t=this.get_selected_attribute_parameters();this.selected=this.update_attribute("selected",this.selected,t),this.scatter_material.uniforms.has_selection.value=t.use_selection,e&&this.update_scene()}update_marker(){const e=this.model.get("marker");this.dot.type(e),"circle"===e&&(this.scatter_material.uniforms.marker_scale.value=1/Math.sqrt(Math.PI),this.scatter_material.defines.FAST_DRAW=1),"square"===e&&(this.scatter_material.uniforms.marker_scale.value=.5,this.scatter_material.defines.FAST_DRAW=2),"arrow"===e&&(this.scatter_material.uniforms.marker_scale.value=2,this.scatter_material.defines.FAST_DRAW=3),"cross"===e&&(this.scatter_material.uniforms.marker_scale.value=3/(2*Math.sqrt(5)),this.scatter_material.defines.FAST_DRAW=4),"triangle-up"===e&&(this.scatter_material.uniforms.marker_scale.value=2,this.scatter_material.defines.FAST_DRAW=5),"triangle-down"===e&&(this.scatter_material.uniforms.marker_scale.value=2,this.scatter_material.defines.FAST_DRAW=6),this.scatter_material.needsUpdate=!0,this.update_scene()}update_stroke(){const e=this.model.get("stroke");e?(this.scatter_material.uniforms.default_stroke_color.value=m(e),this.scatter_material.defines.HAS_DEFAULT_STROKE_COLOR=!0):this.scatter_material.defines.HAS_DEFAULT_STROKE_COLOR=!1,this.scatter_material.needsUpdate=!0,this.update_scene()}update_stroke_width(){this.scatter_material.uniforms.stroke_width.value=this.model.get("stroke_width"),this.update_scene()}update_color_map(){if(this.scatter_material.uniforms.colormap.value=function(e){const t=e?e.model.color_range:["#ff0000","#ff0000"],n=l.scaleLinear().range(t).domain(u.range(t.length).map((e=>e/(t.length-1)))),i=[];u.map(u.range(256),(e=>{const t=e/255,r=l.color(String(n(t))).hex(),s=String(r),a=[parseInt("0x"+s.substring(1,3)),parseInt("0x"+s.substring(3,5)),parseInt("0x"+s.substring(5,7))];i.push(a[0],a[1],a[2])}));const r=new Uint8Array(i),s=new d.DataTexture(r,256,1,d.RGBFormat,d.UnsignedByteType);return s.needsUpdate=!0,s}(this.scales.color),this.scales.color){const e=this.model.get("color");if(e){let t,n;t=null!==this.scales.color.model.min?this.scales.color.model.min:Math.min(...e),n=null!==this.scales.color.model.max?this.scales.color.model.max:Math.max(...e),this.scatter_material.uniforms.domain_color.value=[t,n]}else null!==this.scales.color.model.min&&null!==this.scales.color.model.max?this.scatter_material.uniforms.domain_color.value=[this.scales.color.model.min,this.scales.color.model.max]:console.warn("no color set, and color scale does not have a min or max")}this.update_scene()}update_position(e){this.update_scene(),this.invalidate_pixel_position()}invalidate_pixel_position(){this.invalidated_pixel_position=!0}ensure_pixel_position(){this.invalidated_pixel_position&&this.update_pixel_position()}update_pixel_position(e){const t=this.scales.x,n=this.scales.y,i=this.model.get("x"),r=this.model.get("y"),s=Math.min(i.length,r.length);this.pixel_x=new Float64Array(s),this.pixel_y=new Float64Array(s);for(let e=0;e<s;e++)this.pixel_x[e]=t.scale(i[e])+t.offset,this.pixel_y[e]=n.scale(r[e])+n.offset;this.invalidated_pixel_position=!1}selector_changed(e,t){this.trottled_selector_changed||(this.trottled_selector_changed=u.throttle(this._real_selector_changed,50,{leading:!1})),this.trottled_selector_changed(e,t)}_real_selector_changed(e,t){if(this.ensure_pixel_position(),void 0===e)return this.model.set("selected",null),this.touch(),[];const n=e(this.pixel_x,this.pixel_y);let i=new Uint32Array(n.length),r=0;const s=n.length;for(let e=0;e<s;e++)n[e]&&(i[r++]=e);i=i.slice(0,r),this.model.set("selected",i),this.touch()}set_positional_scales(){this.x_scale=this.scales.x,this.y_scale=this.scales.y,this.x_scale||(this.x_scale=this.parent.scale_x),this.y_scale||(this.y_scale=this.parent.scale_y);const e={date:1,linear:1,log:2};this.scatter_material.defines.SCALE_TYPE_x=e[this.x_scale.model.type],this.scatter_material.defines.SCALE_TYPE_y=e[this.y_scale.model.type],this.scatter_material.needsUpdate=!0,this.listenTo(this.x_scale,"domain_changed",(function(){if(!this.model.dirty){const e=!0;this.update_position(e)}})),this.listenTo(this.y_scale,"domain_changed",(function(){if(!this.model.dirty){const e=!0;this.update_position(e)}})),this.update_scene()}initialize_additional_scales(){const e=this.scales.color,t=this.scales.size,n=this.scales.opacity,i=this.scales.rotation;e&&(this.listenTo(e,"all",this.update_color_map),this.listenTo(this.model,"change:color",this.update_color_map),this.update_color_map()),t&&this.listenTo(t,"domain_changed",(()=>{this.update_scene()})),n&&this.listenTo(n,"domain_changed",(()=>{this.update_scene()})),i&&this.listenTo(i,"domain_changed",(()=>{this.update_scene()}))}set_ranges(){const e=this.scales.x,t=this.scales.y,n=this.scales.size,i=this.scales.opacity,r=this.scales.skew,s=this.scales.rotation;e&&e.set_range(this.parent.padded_range("x",e.model)),t&&t.set_range(this.parent.padded_range("y",t.model)),n&&n.set_range([0,this.model.get("default_size")]),i&&i.set_range([.2,1]),r&&r.set_range([0,1]),s&&s.set_range([0,Math.PI])}transition(e,t,n){const i=this;return new function(){this.time_start=(new Date).getTime(),this.duration=i.parent.model.get("animation_duration"),this.cancelled=!1,this.called_on_done=!1,this.set=function(e){this.objects.push(e)},this.is_done=function(){return(new Date).getTime()-this.time_start>=this.duration||this.cancelled},this.cancel=function(){this.cancelled=!0},this.update=function(){if(this.cancelled)return;const r=((new Date).getTime()-this.time_start)/this.duration,s=Math.min(1,r);e.apply(n,[s]),r>=1&&!this.called_on_done&&(this.called_on_done=!0,t.apply(n)),i.update_scene()},this.duration?i.transitions.push(this):(e.apply(n,[1]),t.apply(n),i.update_scene())}}draw_legend(e,t,n,i,r){this.legend_el=e.selectAll(".legend"+this.uuid).data([{}]);const s=this.model.get("colors"),a=s.length,o=this,c=.8*r,u=this.legend_el.enter().append("g").attr("class","legend"+this.uuid).attr("transform",((e,t)=>"translate(0, "+(t*r+n)+")"));this.draw_legend_elements(u,c),this.legend_el.append("text").attr("class","legendtext").attr("x",1.2*c).attr("y",c/2).attr("dy","0.35em").text(((e,t)=>o.model.get("labels")[t])).style("fill",((e,t)=>s[t%a]));const h=l.max(this.model.get("labels"),(e=>e.length));return this.legend_el.exit().remove(),[1,h]}draw_legend_elements(e,t){const n=this.model.get("colors"),i=this.model.get("stroke"),r=this.model.get("fill");e.append("path").attr("transform",((e,n)=>"translate( "+t/2+", "+t/2+")")).attr("d",this.dot.size(64)).style("fill",r?n[0]:"none").style("stroke",i||n[0])}update_legend(){if(this.legend_el){const e=this.model.get("colors"),t=this.model.get("stroke"),n=this.model.get("fill");this.legend_el.select("path").style("fill",n?e[0]:"none").style("stroke",t||e[0]),this.legend_el.select("text").style("fill",n?e[0]:"none"),this.legend_el&&this.legend_el.select("path").attr("d",this.dot.type(this.model.get("marker")))}}relayout(){this.set_ranges(),this.update_position()}compute_view_padding(){const e=Math.sqrt(this.model.get("default_size"))/2+1;e===this.xPadding&&e===this.yPadding||(this.xPadding=e,this.yPadding=e,this.trigger("mark_padding_updated"))}draw(e){}clear_style(e,t,n){}set_default_style(e,t){}set_style_on_elements(e,t,n){}}t.ScatterGL=v},9354:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterGLModel=void 0;const a=n(6032),o=s(n(7308));class l extends a.MarkModel{defaults(){return Object.assign(Object.assign({},a.MarkModel.prototype.defaults()),{_model_name:"ScatterGLModel",_view_name:"ScatterGL",x:[],y:[],color:null,skew:null,marker:"circle",stroke:null,stroke_width:1.5,default_skew:.5,default_size:64,names:[],display_names:!0,fill:!0,drag_color:null,drag_size:5,names_unique:!0})}initialize(e,t){super.initialize(e,t),this.update_domains()}update_domains(){const e=this.get("scales");for(const t in e)if(e.hasOwnProperty(t)&&"color"!=t){const n=e[t];this.get("preserve_domain")[t]?n.del_domain([],this.model_id+t):n.compute_and_set_domain(this.get(t),this.model_id+t)}}}t.ScatterGLModel=l,l.serializers=Object.assign(Object.assign({},a.MarkModel.serializers),{x:o.array_or_json_serializer,y:o.array_or_json_serializer,color:o.array_or_json_serializer,size:o.array_or_json_serializer,rotation:o.array_or_json_serializer,opacity:o.array_or_json_serializer,opacities:o.array_or_json_serializer})},7051:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterModel=void 0;const a=n(988),o=s(n(7308)),l=s(n(6731));class c extends a.ScatterBaseModel{defaults(){return Object.assign(Object.assign({},a.ScatterBaseModel.prototype.defaults()),{_model_name:"ScatterModel",_view_name:"Scatter",skew:null,marker:"circle",stroke:null,stroke_width:1.5,default_skew:.5,default_size:64,names:[],display_names:!0,fill:!0,drag_color:null,drag_size:5,names_unique:!0})}initialize(e,t){super.initialize(e,t),this.on("change:skew",this.update_data,this),this.on_some_change(["names","names_unique"],(function(){this.update_unique_ids(),this.trigger("data_updated")}),this)}update_mark_data(){super.update_mark_data();const e=this.get("skew")||[];this.mark_data.forEach(((t,n)=>{t.skew=e[n]}))}update_unique_ids(){let e=this.get("names");const t=null!=e&&0!==e.length;e=t?e:this.mark_data.map(((e,t)=>"Dot"+t));let n=[];n=this.get("names_unique")?e.slice(0):l.range(this.mark_data.length),this.mark_data.forEach(((t,i)=>{t.name=e[i],t.unique_id=n[i]}))}}t.ScatterModel=c,c.serializers=Object.assign(Object.assign({},a.ScatterBaseModel.serializers),{skew:o.array_or_json_serializer,names:o.array_or_json_serializer})},3133:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseXYSelector=t.BaseXSelector=t.BaseSelector=void 0;const o=s(n(9163)),l=n(4154),c=n(8435).convert_dates,u=n(2055);class h extends l.Interaction{initialize(e){this.setElement(document.createElementNS(o.namespaces.svg,"g")),this.d3el=o.select(this.el),u.WidgetView.prototype.initialize.call(this,e)}render(){this.parent=this.options.parent,this.width=this.parent.width-this.parent.margin.left-this.parent.margin.right,this.height=this.parent.height-this.parent.margin.top-this.parent.margin.bottom,this.mark_views_promise=this.populate_mark_views()}create_listeners(){this.listenTo(this.parent,"margin_updated",this.relayout),this.listenTo(this.model,"change:selected",this.selected_changed),this.listenTo(this.model,"change:marks",this.marks_changed),this.listenTo(this.model,"msg:custom",this.handle_custom_messages)}relayout(){this.height=this.parent.height-this.parent.margin.top-this.parent.margin.bottom,this.width=this.parent.width-this.parent.margin.left-this.parent.margin.right}populate_mark_views(){return a(this,void 0,void 0,(function*(){const e=this.parent,t=this.model.get("marks").map((e=>e.model_id)),n=yield Promise.all(e.mark_views.views),i=e.mark_views._models.map((e=>e.model_id)),r=t.map((e=>i.indexOf(e)));this.mark_views=r.map((e=>n[e]))}))}marks_changed(){this.populate_mark_views().then((()=>this.selected_changed()))}handle_custom_messages(e){"reset"===e.type&&this.reset()}set_selected(e,t){this.model.set(e,c(t))}}t.BaseSelector=h,t.BaseXSelector=class extends h{create_scales(){if(this.scale&&this.scale.remove(),this.model.get("scale")){const e=this;return this.create_child_view(this.model.get("scale")).then((t=>(e.scale=t,e.update_scale_domain(!0),e.set_range([e.scale]),e.scale.on("domain_changed",e.update_scale_domain,e),t)))}}update_scale_domain(e=!1){const t="vertical"==this.model.get("orientation")?"y":"x",n=this.parent.padded_range(t,this.scale.model),i=this.parent.range(t);this.scale.expand_domain(n,i)}set_range(e){const t="vertical"==this.model.get("orientation")?"y":"x";for(let n=0;n<e.length;n++)e[n].set_range(this.parent.range(t))}},t.BaseXYSelector=class extends h{create_scales(){const e=this;this.x_scale&&this.x_scale.remove(),this.y_scale&&this.y_scale.remove();const t=[];return this.model.get("x_scale")&&t.push(this.create_child_view(this.model.get("x_scale")).then((t=>(e.x_scale=t,e.update_xscale_domain(),e.set_x_range([e.x_scale]),e.x_scale.on("domain_changed",e.update_xscale_domain,e),t)))),this.model.get("y_scale")&&t.push(this.create_child_view(this.model.get("y_scale")).then((t=>(e.y_scale=t,e.update_yscale_domain(),e.set_y_range([e.y_scale]),e.y_scale.on("domain_changed",e.update_yscale_domain,e),t)))),Promise.all(t)}set_x_range(e){for(let t=0;t<e.length;t++)e[t].set_range(this.parent.range("x"))}set_y_range(e){for(let t=0;t<e.length;t++)e[t].set_range(this.parent.range("y"))}update_xscale_domain(){const e=this.parent.padded_range("x",this.x_scale.model),t=this.parent.range("x");this.x_scale.expand_domain(e,t)}update_yscale_domain(){const e=this.parent.padded_range("y",this.y_scale.model),t=this.parent.range("y");this.y_scale.expand_domain(e,t)}}},4404:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LassoSelectorModel=t.MultiSelectorModel=t.BrushSelectorModel=t.BrushIntervalSelectorModel=t.IndexSelectorModel=t.FastIntervalSelectorModel=t.TwoDSelectorModel=t.OneDSelectorModel=t.SelectorModel=void 0;const a=n(2055),o=n(5734),l=s(n(7308));class c extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},a.WidgetModel.prototype.defaults()),{_model_name:"SelectorModel",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:o.semver_range,_view_module_version:o.semver_range,marks:[]})}}t.SelectorModel=c,c.serializers=Object.assign(Object.assign({},a.WidgetModel.serializers),{marks:{deserialize:a.unpack_models}});class u extends c{defaults(){return Object.assign(Object.assign({},c.prototype.defaults()),{_model_name:"OneDSelectorModel",scale:null})}}t.OneDSelectorModel=u,u.serializers=Object.assign(Object.assign({},c.serializers),{scale:{deserialize:a.unpack_models}});class h extends c{defaults(){return Object.assign(Object.assign({},c.prototype.defaults()),{_model_name:"TwoDSelectorModel",x_scale:null,y_scale:null})}}t.TwoDSelectorModel=h,h.serializers=Object.assign(Object.assign({},c.serializers),{x_scale:{deserialize:a.unpack_models},y_scale:{deserialize:a.unpack_models}});class d extends u{defaults(){return Object.assign(Object.assign({},u.prototype.defaults()),{_model_name:"FastIntervalSelectorModel",_view_name:"FastIntervalSelector",selected:null,color:null,size:null})}}t.FastIntervalSelectorModel=d,d.serializers=Object.assign(Object.assign({},u.serializers),{selected:l.array_or_json_serializer});class f extends u{defaults(){return Object.assign(Object.assign({},u.prototype.defaults()),{_model_name:"IndexSelectorModel",_view_name:"IndexSelector",selected:null,line_width:2,color:null})}}t.IndexSelectorModel=f,f.serializers=Object.assign(Object.assign({},u.serializers),{selected:l.array_or_json_serializer});class p extends u{defaults(){return Object.assign(Object.assign({},u.prototype.defaults()),{_model_name:"BrushIntervalSelectorModel",_view_name:"BrushIntervalSelector",brushing:!1,selected:null,color:null,orientation:"horizontal"})}}t.BrushIntervalSelectorModel=p,p.serializers=Object.assign(Object.assign({},u.serializers),{selected:l.array_or_json_serializer});class m extends h{defaults(){return Object.assign(Object.assign({},h.prototype.defaults()),{_model_name:"BrushSelectorModel",_view_name:"BrushSelector",clear:!1,brushing:!1,selected_x:null,selected_y:null,color:null})}}t.BrushSelectorModel=m,m.serializers=Object.assign(Object.assign({},h.serializers),{selected_x:l.array_or_json_serializer,selected_y:l.array_or_json_serializer}),t.MultiSelectorModel=class extends u{defaults(){return Object.assign(Object.assign({},u.prototype.defaults()),{_model_name:"MultiSelectorModel",_view_name:"MultiSelector",names:[],brushing:!1,selected:{},_selected:{},show_names:!0})}},t.LassoSelectorModel=class extends h{defaults(){return Object.assign(Object.assign({},h.prototype.defaults()),{_model_name:"LassoSelectorModel",_view_name:"LassoSelector",color:null})}}},5165:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=t.ToolbarModel=void 0;const a=s(n(2055)),o=n(5734),l=s(n(6731));class c extends a.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},a.DOMWidgetModel.prototype.defaults()),{_model_name:"ToolbarModel",_view_name:"Toolbar",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:o.semver_range,_view_module_version:o.semver_range,figure:void 0,_panning:!1,_panzoom:null})}panzoom(){const e=this.get("figure");if(this.get("_panning"))e&&(e.set("interaction",this.cached_interaction),e.save_changes()),this.set("_panning",!1),this.save_changes();else{if(e){this.cached_interaction=e.get("interaction");const t=this.get("_panzoom");t?(e.set("interaction",t),e.save_changes()):this._create_panzoom_model(e).then((t=>{this.set("_panzoom",t),this.save_changes(),e.set("interaction",t),e.save_changes()}))}this.set("_panning",!0),this.save_changes()}}reset(){const e=this.get("figure");if(e){e.set("interaction",this.cached_interaction),e.save_changes();const t=this.get("_panzoom");t.reset_scales(),t.close(),this.set("_panzoom",null),this.set("_panning",!1),this.save_changes()}}save_png(){const e=this.get("figure");e&&e.save_png()}_create_panzoom_model(e){return this.widget_manager.new_widget({model_name:"PanZoomModel",model_module:"bqplot",model_module_version:e.get("_model_module_version"),view_name:"PanZoom",view_module:"bqplot",view_module_version:e.get("_view_module_version")}).then((t=>Promise.all(e.get("marks")).then((e=>{const n=[],i=[];for(let t=0;t<e.length;++t){const r=e[t].get("preserve_domain"),s=e[t].get("scales");l.each(s,((a,o)=>{const l=e[t].get("scales_metadata")[o].dimension;"x"!==l||r[o]||n.push(s[o]),"y"!==l||r[o]||i.push(s[o])}))}return t.set("scales",{x:n,y:i}),t.save_changes(),t}))))}}t.ToolbarModel=c,c.serializers=Object.assign(Object.assign({},a.DOMWidgetModel.serializers),{figure:{deserialize:a.unpack_models},_panzoom:{deserialize:a.unpack_models}});class u extends a.DOMWidgetView{render(){this.el.classList.add("jupyter-widget"),this.el.classList.add("widget-hbox");const e=document.createElement("button");e.classList.add("jupyter-widgets"),e.classList.add("jupyter-button"),e.classList.add("widget-toggle-button"),e.setAttribute("data-toggle","tooltip"),e.setAttribute("title","PanZoom"),e.onclick=e=>{e.preventDefault(),this.model.panzoom()};const t=document.createElement("i");t.className="fa fa-arrows",e.appendChild(t);const n=document.createElement("button");n.classList.add("jupyter-widgets"),n.classList.add("jupyter-button"),n.classList.add("widget-button"),n.setAttribute("data-toggle","tooltip"),n.setAttribute("title","Reset"),n.onclick=e=>{e.preventDefault(),this.model.reset()};const i=document.createElement("i");i.className="fa fa-refresh",n.appendChild(i);const r=document.createElement("button");r.classList.add("jupyter-widgets"),r.classList.add("jupyter-button"),r.classList.add("widget-button"),r.setAttribute("data-toggle","tooltip"),r.setAttribute("title","Save"),r.onclick=e=>{e.preventDefault(),this.model.save_png()};const s=document.createElement("i");s.className="fa fa-save",r.appendChild(s),this.el.appendChild(e),this.el.appendChild(n),this.el.appendChild(r),this._panzoom=e,this.update()}update(){this.model.get("_panning")?this._panzoom.classList.add("mod-active"):this._panzoom.classList.remove("mod-active")}}t.Toolbar=u},5621:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;const a=n(2055),o=s(n(9163)),l=s(n(8435)),c=s(n(6731));class u extends a.DOMWidgetView{initialize(){this.d3el=o.select(this.el),super.initialize.apply(this,arguments)}render(){this.parent=this.options.parent,this.update_formats(),this.create_listeners(),this.create_table()}create_listeners(){this.listenTo(this.parent,"update_tooltip",this.update_tooltip),this.model.on_some_change(["fields","show_labels","labels"],this.create_table,this),this.listenTo(this.model,"change:formats",this.update_formats)}update_formats(){const e=this.model.get("fields"),t=this.model.get("formats");this.tooltip_formats=e.map(((e,n)=>{const i=t[n];return void 0===i||""===i?function(e){return e}:l.is_valid_time_format(i)?o.utcFormat(i):o.format(i)}))}update_tooltip(e){const t=this;this.d3el.select("table").selectAll("tr").select(".datavalue").text(((n,i)=>t.tooltip_formats[i](e[n])))}create_table(){const e=this.model.get("fields"),t=c.clone(this.model.get("labels"));for(let n=t.length;n<e.length;n++)t[n]=e[n]+":";this.d3el.select("table").remove();const n=this.d3el.append("table").selectAll("tr").data(e);n.exit().remove();const i=n.enter().append("tr").attr("class","datarow");this.model.get("show_labels")&&i.append("td").text(((e,n)=>t[n])).attr("class","tooltiptext datafield"),i.append("td").attr("class","tooltiptext datavalue"),this.update_formats()}}t.Tooltip=u},556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipModel=void 0;const i=n(2055),r=n(5734);class s extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},i.DOMWidgetModel.prototype.defaults()),{_model_name:"TooltipModel",_view_name:"Tooltip",_model_module:"bqplot",_view_module:"bqplot",_model_module_version:r.semver_range,_view_module_version:r.semver_range,fields:[],formats:[],show_labels:!0,labels:[]})}}t.TooltipModel=s},3638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matplotlib=void 0,t.matplotlib={viridis:{256:["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"],type:"seq"}},t.default={Spectral:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],7:["rgb(213,62,79)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(153,213,148)","rgb(50,136,189)"],8:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],9:["rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)"],10:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],11:["rgb(158,1,66)","rgb(213,62,79)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(230,245,152)","rgb(171,221,164)","rgb(102,194,165)","rgb(50,136,189)","rgb(94,79,162)"],type:"div"},RdYlGn:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(145,207,96)","rgb(26,152,80)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)"],10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,139)","rgb(255,255,191)","rgb(217,239,139)","rgb(166,217,106)","rgb(102,189,99)","rgb(26,152,80)","rgb(0,104,55)"],type:"div"},RdBu:{3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(103,169,207)","rgb(33,102,172)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)"],10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],type:"div"},PiYG:{3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],7:["rgb(197,27,125)","rgb(233,163,201)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(161,215,106)","rgb(77,146,33)"],8:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],9:["rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)"],10:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],11:["rgb(142,1,82)","rgb(197,27,125)","rgb(222,119,174)","rgb(241,182,218)","rgb(253,224,239)","rgb(247,247,247)","rgb(230,245,208)","rgb(184,225,134)","rgb(127,188,65)","rgb(77,146,33)","rgb(39,100,25)"],type:"div"},PRGn:{3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],7:["rgb(118,42,131)","rgb(175,141,195)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(127,191,123)","rgb(27,120,55)"],8:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],9:["rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)"],10:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],11:["rgb(64,0,75)","rgb(118,42,131)","rgb(153,112,171)","rgb(194,165,207)","rgb(231,212,232)","rgb(247,247,247)","rgb(217,240,211)","rgb(166,219,160)","rgb(90,174,97)","rgb(27,120,55)","rgb(0,68,27)"],type:"div"},RdYlBu:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],7:["rgb(215,48,39)","rgb(252,141,89)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(145,191,219)","rgb(69,117,180)"],8:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],9:["rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)"],10:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],11:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],type:"div"},BrBG:{3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],7:["rgb(140,81,10)","rgb(216,179,101)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(90,180,172)","rgb(1,102,94)"],8:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],9:["rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)"],10:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],11:["rgb(84,48,5)","rgb(140,81,10)","rgb(191,129,45)","rgb(223,194,125)","rgb(246,232,195)","rgb(245,245,245)","rgb(199,234,229)","rgb(128,205,193)","rgb(53,151,143)","rgb(1,102,94)","rgb(0,60,48)"],type:"div"},RdGy:{3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],7:["rgb(178,24,43)","rgb(239,138,98)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(153,153,153)","rgb(77,77,77)"],8:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],9:["rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)"],10:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],11:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(255,255,255)","rgb(224,224,224)","rgb(186,186,186)","rgb(135,135,135)","rgb(77,77,77)","rgb(26,26,26)"],type:"div"},PuOr:{3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],7:["rgb(179,88,6)","rgb(241,163,64)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(153,142,195)","rgb(84,39,136)"],8:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],9:["rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)"],10:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],11:["rgb(127,59,8)","rgb(179,88,6)","rgb(224,130,20)","rgb(253,184,99)","rgb(254,224,182)","rgb(247,247,247)","rgb(216,218,235)","rgb(178,171,210)","rgb(128,115,172)","rgb(84,39,136)","rgb(45,0,75)"],type:"div"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)"],7:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)"],8:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],type:"qual"},Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)"],7:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"],8:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)","rgb(102,102,102)"],type:"qual"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)"],7:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)"],8:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)"],9:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)","rgb(255,255,51)","rgb(166,86,40)","rgb(247,129,191)","rgb(153,153,153)"],type:"qual"},Set3:{3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)"],6:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)"],7:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)"],8:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)"],9:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)"],10:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)"],11:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)"],12:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],type:"qual"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)"],7:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)"],8:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],type:"qual"},Paired:{3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)"],7:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)"],8:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)"],9:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)"],10:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)"],11:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)"],12:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)","rgb(106,61,154)","rgb(255,255,153)","rgb(177,89,40)"],type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)"],7:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)"],8:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)","rgb(204,204,204)"],type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)"],6:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)"],7:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)"],8:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],9:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)","rgb(242,242,242)"],type:"qual"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],7:["rgb(254,240,217)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],8:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(153,0,0)"],9:["rgb(255,247,236)","rgb(254,232,200)","rgb(253,212,158)","rgb(253,187,132)","rgb(252,141,89)","rgb(239,101,72)","rgb(215,48,31)","rgb(179,0,0)","rgb(127,0,0)"],type:"seq"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],7:["rgb(241,238,246)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],8:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(3,78,123)"],9:["rgb(255,247,251)","rgb(236,231,242)","rgb(208,209,230)","rgb(166,189,219)","rgb(116,169,207)","rgb(54,144,192)","rgb(5,112,176)","rgb(4,90,141)","rgb(2,56,88)"],type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],7:["rgb(237,248,251)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],8:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(110,1,107)"],9:["rgb(247,252,253)","rgb(224,236,244)","rgb(191,211,230)","rgb(158,188,218)","rgb(140,150,198)","rgb(140,107,177)","rgb(136,65,157)","rgb(129,15,124)","rgb(77,0,75)"],type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],7:["rgb(254,237,222)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],8:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(140,45,4)"],9:["rgb(255,245,235)","rgb(254,230,206)","rgb(253,208,162)","rgb(253,174,107)","rgb(253,141,60)","rgb(241,105,19)","rgb(217,72,1)","rgb(166,54,3)","rgb(127,39,4)"],type:"seq"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],7:["rgb(237,248,251)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],8:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,88,36)"],9:["rgb(247,252,253)","rgb(229,245,249)","rgb(204,236,230)","rgb(153,216,201)","rgb(102,194,164)","rgb(65,174,118)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],7:["rgb(255,255,212)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],8:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(140,45,4)"],9:["rgb(255,255,229)","rgb(255,247,188)","rgb(254,227,145)","rgb(254,196,79)","rgb(254,153,41)","rgb(236,112,20)","rgb(204,76,2)","rgb(153,52,4)","rgb(102,37,6)"],type:"seq"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],7:["rgb(255,255,204)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],8:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,90,50)"],9:["rgb(255,255,229)","rgb(247,252,185)","rgb(217,240,163)","rgb(173,221,142)","rgb(120,198,121)","rgb(65,171,93)","rgb(35,132,67)","rgb(0,104,55)","rgb(0,69,41)"],type:"seq"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],7:["rgb(254,229,217)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],8:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(153,0,13)"],9:["rgb(255,245,240)","rgb(254,224,210)","rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(165,15,21)","rgb(103,0,13)"],type:"seq"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],7:["rgb(254,235,226)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],8:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)"],9:["rgb(255,247,243)","rgb(253,224,221)","rgb(252,197,192)","rgb(250,159,181)","rgb(247,104,161)","rgb(221,52,151)","rgb(174,1,126)","rgb(122,1,119)","rgb(73,0,106)"],type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],7:["rgb(237,248,233)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],8:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,90,50)"],9:["rgb(247,252,245)","rgb(229,245,224)","rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"],type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],7:["rgb(255,255,204)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],8:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(12,44,132)"],9:["rgb(255,255,217)","rgb(237,248,177)","rgb(199,233,180)","rgb(127,205,187)","rgb(65,182,196)","rgb(29,145,192)","rgb(34,94,168)","rgb(37,52,148)","rgb(8,29,88)"],type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],7:["rgb(242,240,247)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],8:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(74,20,134)"],9:["rgb(252,251,253)","rgb(239,237,245)","rgb(218,218,235)","rgb(188,189,220)","rgb(158,154,200)","rgb(128,125,186)","rgb(106,81,163)","rgb(84,39,143)","rgb(63,0,125)"],type:"seq"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],7:["rgb(240,249,232)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],8:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,88,158)"],9:["rgb(247,252,240)","rgb(224,243,219)","rgb(204,235,197)","rgb(168,221,181)","rgb(123,204,196)","rgb(78,179,211)","rgb(43,140,190)","rgb(8,104,172)","rgb(8,64,129)"],type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],7:["rgb(247,247,247)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],8:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)"],9:["rgb(255,255,255)","rgb(240,240,240)","rgb(217,217,217)","rgb(189,189,189)","rgb(150,150,150)","rgb(115,115,115)","rgb(82,82,82)","rgb(37,37,37)","rgb(0,0,0)"],type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],7:["rgb(255,255,178)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],8:["rgb(255,255,204)","rgb(255,237,160)","rgb(254,217,118)","rgb(254,178,76)","rgb(253,141,60)","rgb(252,78,42)","rgb(227,26,28)","rgb(177,0,38)"],type:"seq"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],7:["rgb(241,238,246)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],8:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(145,0,63)"],9:["rgb(247,244,249)","rgb(231,225,239)","rgb(212,185,218)","rgb(201,148,199)","rgb(223,101,176)","rgb(231,41,138)","rgb(206,18,86)","rgb(152,0,67)","rgb(103,0,31)"],type:"seq"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],7:["rgb(239,243,255)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],9:["rgb(247,251,255)","rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"],type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],7:["rgb(246,239,247)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],8:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,100,80)"],9:["rgb(255,247,251)","rgb(236,226,240)","rgb(208,209,230)","rgb(166,189,219)","rgb(103,169,207)","rgb(54,144,192)","rgb(2,129,138)","rgb(1,108,89)","rgb(1,70,54)"],type:"seq"},viridis:{256:["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"],type:"seq"},plasma:{256:["#0d0887","#100788","#130789","#16078a","#19068c","#1b068d","#1d068e","#20068f","#220690","#240691","#260591","#280592","#2a0593","#2c0594","#2e0595","#2f0596","#310597","#330597","#350498","#370499","#38049a","#3a049a","#3c049b","#3e049c","#3f049c","#41049d","#43039e","#44039e","#46039f","#48039f","#4903a0","#4b03a1","#4c02a1","#4e02a2","#5002a2","#5102a3","#5302a3","#5502a4","#5601a4","#5801a4","#5901a5","#5b01a5","#5c01a6","#5e01a6","#6001a6","#6100a7","#6300a7","#6400a7","#6600a7","#6700a8","#6900a8","#6a00a8","#6c00a8","#6e00a8","#6f00a8","#7100a8","#7201a8","#7401a8","#7501a8","#7701a8","#7801a8","#7a02a8","#7b02a8","#7d03a8","#7e03a8","#8004a8","#8104a7","#8305a7","#8405a7","#8606a6","#8707a6","#8808a6","#8a09a5","#8b0aa5","#8d0ba5","#8e0ca4","#8f0da4","#910ea3","#920fa3","#9410a2","#9511a1","#9613a1","#9814a0","#99159f","#9a169f","#9c179e","#9d189d","#9e199d","#a01a9c","#a11b9b","#a21d9a","#a31e9a","#a51f99","#a62098","#a72197","#a82296","#aa2395","#ab2494","#ac2694","#ad2793","#ae2892","#b02991","#b12a90","#b22b8f","#b32c8e","#b42e8d","#b52f8c","#b6308b","#b7318a","#b83289","#ba3388","#bb3488","#bc3587","#bd3786","#be3885","#bf3984","#c03a83","#c13b82","#c23c81","#c33d80","#c43e7f","#c5407e","#c6417d","#c7427c","#c8437b","#c9447a","#ca457a","#cb4679","#cc4778","#cc4977","#cd4a76","#ce4b75","#cf4c74","#d04d73","#d14e72","#d24f71","#d35171","#d45270","#d5536f","#d5546e","#d6556d","#d7566c","#d8576b","#d9586a","#da5a6a","#da5b69","#db5c68","#dc5d67","#dd5e66","#de5f65","#de6164","#df6263","#e06363","#e16462","#e26561","#e26660","#e3685f","#e4695e","#e56a5d","#e56b5d","#e66c5c","#e76e5b","#e76f5a","#e87059","#e97158","#e97257","#ea7457","#eb7556","#eb7655","#ec7754","#ed7953","#ed7a52","#ee7b51","#ef7c51","#ef7e50","#f07f4f","#f0804e","#f1814d","#f1834c","#f2844b","#f3854b","#f3874a","#f48849","#f48948","#f58b47","#f58c46","#f68d45","#f68f44","#f79044","#f79143","#f79342","#f89441","#f89540","#f9973f","#f9983e","#f99a3e","#fa9b3d","#fa9c3c","#fa9e3b","#fb9f3a","#fba139","#fba238","#fca338","#fca537","#fca636","#fca835","#fca934","#fdab33","#fdac33","#fdae32","#fdaf31","#fdb130","#fdb22f","#fdb42f","#fdb52e","#feb72d","#feb82c","#feba2c","#febb2b","#febd2a","#febe2a","#fec029","#fdc229","#fdc328","#fdc527","#fdc627","#fdc827","#fdca26","#fdcb26","#fccd25","#fcce25","#fcd025","#fcd225","#fbd324","#fbd524","#fbd724","#fad824","#fada24","#f9dc24","#f9dd25","#f8df25","#f8e125","#f7e225","#f7e425","#f6e626","#f6e826","#f5e926","#f5eb27","#f4ed27","#f3ee27","#f3f027","#f2f227","#f1f426","#f1f525","#f0f724","#f0f921"],type:"seq"},inferno:{256:["#000004","#010005","#010106","#010108","#02010a","#02020c","#02020e","#030210","#040312","#040314","#050417","#060419","#07051b","#08051d","#09061f","#0a0722","#0b0724","#0c0826","#0d0829","#0e092b","#10092d","#110a30","#120a32","#140b34","#150b37","#160b39","#180c3c","#190c3e","#1b0c41","#1c0c43","#1e0c45","#1f0c48","#210c4a","#230c4c","#240c4f","#260c51","#280b53","#290b55","#2b0b57","#2d0b59","#2f0a5b","#310a5c","#320a5e","#340a5f","#360961","#380962","#390963","#3b0964","#3d0965","#3e0966","#400a67","#420a68","#440a68","#450a69","#470b6a","#490b6a","#4a0c6b","#4c0c6b","#4d0d6c","#4f0d6c","#510e6c","#520e6d","#540f6d","#550f6d","#57106e","#59106e","#5a116e","#5c126e","#5d126e","#5f136e","#61136e","#62146e","#64156e","#65156e","#67166e","#69166e","#6a176e","#6c186e","#6d186e","#6f196e","#71196e","#721a6e","#741a6e","#751b6e","#771c6d","#781c6d","#7a1d6d","#7c1d6d","#7d1e6d","#7f1e6c","#801f6c","#82206c","#84206b","#85216b","#87216b","#88226a","#8a226a","#8c2369","#8d2369","#8f2469","#902568","#922568","#932667","#952667","#972766","#982766","#9a2865","#9b2964","#9d2964","#9f2a63","#a02a63","#a22b62","#a32c61","#a52c60","#a62d60","#a82e5f","#a92e5e","#ab2f5e","#ad305d","#ae305c","#b0315b","#b1325a","#b3325a","#b43359","#b63458","#b73557","#b93556","#ba3655","#bc3754","#bd3853","#bf3952","#c03a51","#c13a50","#c33b4f","#c43c4e","#c63d4d","#c73e4c","#c83f4b","#ca404a","#cb4149","#cc4248","#ce4347","#cf4446","#d04545","#d24644","#d34743","#d44842","#d54a41","#d74b3f","#d84c3e","#d94d3d","#da4e3c","#db503b","#dd513a","#de5238","#df5337","#e05536","#e15635","#e25734","#e35933","#e45a31","#e55c30","#e65d2f","#e75e2e","#e8602d","#e9612b","#ea632a","#eb6429","#eb6628","#ec6726","#ed6925","#ee6a24","#ef6c23","#ef6e21","#f06f20","#f1711f","#f1731d","#f2741c","#f3761b","#f37819","#f47918","#f57b17","#f57d15","#f67e14","#f68013","#f78212","#f78410","#f8850f","#f8870e","#f8890c","#f98b0b","#f98c0a","#f98e09","#fa9008","#fa9207","#fa9407","#fb9606","#fb9706","#fb9906","#fb9b06","#fb9d07","#fc9f07","#fca108","#fca309","#fca50a","#fca60c","#fca80d","#fcaa0f","#fcac11","#fcae12","#fcb014","#fcb216","#fcb418","#fbb61a","#fbb81d","#fbba1f","#fbbc21","#fbbe23","#fac026","#fac228","#fac42a","#fac62d","#f9c72f","#f9c932","#f9cb35","#f8cd37","#f8cf3a","#f7d13d","#f7d340","#f6d543","#f6d746","#f5d949","#f5db4c","#f4dd4f","#f4df53","#f4e156","#f3e35a","#f3e55d","#f2e661","#f2e865","#f2ea69","#f1ec6d","#f1ed71","#f1ef75","#f1f179","#f2f27d","#f2f482","#f3f586","#f3f68a","#f4f88e","#f5f992","#f6fa96","#f8fb9a","#f9fc9d","#fafda1","#fcffa4"],type:"seq"},magma:{256:["#000004","#010005","#010106","#010108","#020109","#02020b","#02020d","#03030f","#030312","#040414","#050416","#060518","#06051a","#07061c","#08071e","#090720","#0a0822","#0b0924","#0c0926","#0d0a29","#0e0b2b","#100b2d","#110c2f","#120d31","#130d34","#140e36","#150e38","#160f3b","#180f3d","#19103f","#1a1042","#1c1044","#1d1147","#1e1149","#20114b","#21114e","#221150","#241253","#251255","#271258","#29115a","#2a115c","#2c115f","#2d1161","#2f1163","#311165","#331067","#341069","#36106b","#38106c","#390f6e","#3b0f70","#3d0f71","#3f0f72","#400f74","#420f75","#440f76","#451077","#471078","#491078","#4a1079","#4c117a","#4e117b","#4f127b","#51127c","#52137c","#54137d","#56147d","#57157e","#59157e","#5a167e","#5c167f","#5d177f","#5f187f","#601880","#621980","#641a80","#651a80","#671b80","#681c81","#6a1c81","#6b1d81","#6d1d81","#6e1e81","#701f81","#721f81","#732081","#752181","#762181","#782281","#792282","#7b2382","#7c2382","#7e2482","#802582","#812581","#832681","#842681","#862781","#882781","#892881","#8b2981","#8c2981","#8e2a81","#902a81","#912b81","#932b80","#942c80","#962c80","#982d80","#992d80","#9b2e7f","#9c2e7f","#9e2f7f","#a02f7f","#a1307e","#a3307e","#a5317e","#a6317d","#a8327d","#aa337d","#ab337c","#ad347c","#ae347b","#b0357b","#b2357b","#b3367a","#b5367a","#b73779","#b83779","#ba3878","#bc3978","#bd3977","#bf3a77","#c03a76","#c23b75","#c43c75","#c53c74","#c73d73","#c83e73","#ca3e72","#cc3f71","#cd4071","#cf4070","#d0416f","#d2426f","#d3436e","#d5446d","#d6456c","#d8456c","#d9466b","#db476a","#dc4869","#de4968","#df4a68","#e04c67","#e24d66","#e34e65","#e44f64","#e55064","#e75263","#e85362","#e95462","#ea5661","#eb5760","#ec5860","#ed5a5f","#ee5b5e","#ef5d5e","#f05f5e","#f1605d","#f2625d","#f2645c","#f3655c","#f4675c","#f4695c","#f56b5c","#f66c5c","#f66e5c","#f7705c","#f7725c","#f8745c","#f8765c","#f9785d","#f9795d","#f97b5d","#fa7d5e","#fa7f5e","#fa815f","#fb835f","#fb8560","#fb8761","#fc8961","#fc8a62","#fc8c63","#fc8e64","#fc9065","#fd9266","#fd9467","#fd9668","#fd9869","#fd9a6a","#fd9b6b","#fe9d6c","#fe9f6d","#fea16e","#fea36f","#fea571","#fea772","#fea973","#feaa74","#feac76","#feae77","#feb078","#feb27a","#feb47b","#feb67c","#feb77e","#feb97f","#febb81","#febd82","#febf84","#fec185","#fec287","#fec488","#fec68a","#fec88c","#feca8d","#fecc8f","#fecd90","#fecf92","#fed194","#fed395","#fed597","#fed799","#fed89a","#fdda9c","#fddc9e","#fddea0","#fde0a1","#fde2a3","#fde3a5","#fde5a7","#fde7a9","#fde9aa","#fdebac","#fcecae","#fceeb0","#fcf0b2","#fcf2b4","#fcf4b6","#fcf6b8","#fcf7b9","#fcf9bb","#fcfbbd","#fcfdbf"],type:"seq"}}},2418:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,r(n(8937),t),r(n(3817),t),r(n(5321),t),r(n(3600),t),r(n(3707),t),r(n(6032),t),r(n(4878),t),r(n(8922),t),r(n(1146),t),r(n(1925),t),r(n(1188),t),r(n(5729),t),r(n(43),t),r(n(4404),t),r(n(7624),t),r(n(6319),t),r(n(1388),t),r(n(8639),t),r(n(4154),t),r(n(2765),t),r(n(9696),t),r(n(4519),t),r(n(644),t),r(n(5427),t),r(n(2551),t),r(n(8793),t),r(n(3370),t),r(n(9140),t),r(n(9523),t),r(n(1089),t),r(n(3638),t),r(n(9023),t),r(n(7036),t),r(n(9468),t),r(n(1582),t),r(n(3811),t),r(n(7243),t),r(n(2739),t),r(n(4408),t),r(n(4762),t),r(n(6946),t),r(n(175),t),r(n(9460),t),r(n(2969),t),r(n(660),t),r(n(9851),t),r(n(9408),t),r(n(7051),t),r(n(4262),t),r(n(1160),t),r(n(3133),t),r(n(7256),t),r(n(4479),t),r(n(6111),t),r(n(4280),t),r(n(5621),t),r(n(556),t),r(n(7681),t),r(n(5839),t),r(n(4297),t),r(n(457),t),r(n(8435),t),r(n(7308),t),r(n(4099),t),r(n(6684),t),r(n(5314),t),r(n(4515),t),r(n(2406),t),r(n(4733),t),r(n(5165),t),r(n(8641),t),r(n(9578),t),r(n(8935),t),r(n(2038),t),r(n(635),t),r(n(9354),t),t.version=n(1812).version},9523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.point_in_lasso=void 0,t.point_in_lasso=function(e,t){let n,i,r,s,a,o=e[0],l=e[1],c=!1;for(let e=0,u=t.length-1;e<t.length;u=e++)n=t[e][0],r=t[e][1],i=t[u][0],s=t[u][1],a=r>l!=s>l&&o<(i-n)*(l-r)/(s-r)+n,a&&(c=!c);return c}},4343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lasso_inter_rect=t.rect_inter_rect=t.point_in_rectangle=t.point_in_lasso=void 0;var i=n(9523);function r(e,t,n){if(0==t.length&&0==n.length)return!1;let i=!0;return 0!=t.length&&(i=i&&t[0]<=e[0]&&e[0]<=t[1]),0!=n.length&&(i=i&&n[0]<=e[1]&&e[1]<=n[1]),i}function s(e,t){return 0==e.length||0==t.length?0!=e.length||0!=t.length:(e.sort(((e,t)=>e-t)),t.sort(((e,t)=>e-t)),e[0]<t[0]!=e[0]<t[1]||e[1]<t[0]!=e[1]<t[1]||t[0]<e[0]!=t[0]<e[1]||t[1]<e[0]!=t[1]<e[1])}Object.defineProperty(t,"point_in_lasso",{enumerable:!0,get:function(){return i.point_in_lasso}}),t.point_in_rectangle=r,t.rect_inter_rect=function(e,t,n,i){return s(e,n)&&s(t,i)},t.lasso_inter_rect=function(e,t,n){for(let i=0;i<n.length;i++)if(r(n[i],e,t))return!0;return!1}},7308:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.array_or_json_serializer=void 0;const o=s(n(6731)),l=a(n(7390)),c={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array},u={Int8Array:"int8",Int16Array:"int16",Int32Array:"int32",Uint8Array:"uint8",Uint16Array:"uint16",Uint32Array:"uint32",Float32Array:"float32",Float64Array:"float64"};t.array_or_json_serializer={deserialize:function e(t,n){if(!o.isArray(t)&&!o.isObject(t))return t;if(o.isArray(t))return o.map(t,(t=>e(t,n)));if(t.value&&t.dtype)return function(e){const t=c[e.dtype];if(null==e||!e.value||!e.value.buffer)throw new Error("Failed to deserialize data");const n=new t(e.value.buffer);if(n.type=e.type,e.shape&&e.shape.length>=2){if(e.shape.length>2)throw new Error("only arrays with rank 1 or 2 supported");const t=[];for(let i=0;i<e.shape[0];i++)t.push(n.slice(i*e.shape[1],(i+1)*e.shape[1]));return t}return n}(t);throw new Error("Failed to deserialize data")},serialize:function e(t,n){if(!o.isArray(t)&&!o.isObject(t))return t;if(o.isArray(t))return o.map(t,e);if(l.default(t))return function(e){null==e&&console.log("data is null"),e.buffer||console.log("ar.buffer is null or not defined");const t=u[e.constructor.name],n=e.type||null;return{dtype:t,value:new DataView(e.buffer),shape:[e.length],type:n}}(t);throw new Error("Failed to serialize data")}}},8435:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getEffectiveBackgroundColor=t.getLuminoWidget=t.d3GetEvent=t.applyAttrs=t.applyStyles=t.getDate=t.is_array=t.is_valid_time_format=t.getCustomRange=t.convert_dates=t.deepCopy=void 0;const o=s(n(9163)),l=a(n(7390)),c=s(n(6731)),u=new RegExp("^(((((\\*)|(/*)|(-*))(\\s*)%([aAbBdeHIjmMLpSUwWyYZ]{1}))+)|((\\s*)%([cxX]{1})))$");t.deepCopy=function e(t){if(l.default(t))return Object.assign(t.slice(),t);if(c.isArray(t))return t.map((t=>e(t)));if(c.isNumber(t)||c.isString(t))return t;if(c.isDate(t))return new Date(t.getTime());{const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}},t.convert_dates=function(e){if(l.default(e))return e;const t=function(e){const t=new Float64Array(e.map(Number));return t.type="date",t};return e[0]instanceof Array&&e[0][0]instanceof Date?e=e.map(t):e[0]instanceof Date&&(e=t(e)),e},t.getCustomRange=function(e){const t=e[0],n=e[e.length-1];let i;return i=e[0]>e[1]?o.min(e):o.max(e),[o.scaleLinear().range([t,i]),o.scaleLinear().range([i,n])]},t.is_valid_time_format=function(e){return u.test(e)},t.is_array=function(e){return e instanceof Array||l.default(e)},t.getDate=function(e){return null==e?null:new Date(e)},t.applyStyles=function(e,t){return Object.keys(t).forEach((n=>e.style(n,t[n]))),e},t.applyAttrs=function(e,t){return Object.keys(t).forEach((n=>e.attr(n,t[n]))),e},t.d3GetEvent=function(){return n(4124).f0||window.event},t.getLuminoWidget=function(e){return e.pWidget?e.pWidget:e.luminoWidget},t.getEffectiveBackgroundColor=function e(t){if(!t)return"rgb(255, 255, 255)";const n=window.getComputedStyle(t),i=n.backgroundColor,r="none"!==n.backgroundImage;return"transparent"!==i&&"rgba(0, 0, 0, 0)"!==i||r?i:e(t.parentElement)}},5734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.semver_range=void 0,t.semver_range="^"+n(1812).version},3483:(e,t,n)=>{"use strict";var i;function r(e){return"function"==typeof e.iter?e.iter():new c(e)}function s(e,t){for(var n,i=0,s=r(e);void 0!==(n=s.next());)if(!1===t(n,i++))return}function a(e,t){for(var n,i=0,s=r(e);void 0!==(n=s.next());)if(!t(n,i++))return!1;return!0}function o(e,t){for(var n,i=0,s=r(e);void 0!==(n=s.next());)if(t(n,i++))return!0;return!1}function l(e){for(var t,n=0,i=[],s=r(e);void 0!==(t=s.next());)i[n++]=t;return i}n.d(t,{$0:()=>S,$r:()=>l,I6:()=>_,Ie:()=>d,KO:()=>h,Rw:()=>i,Si:()=>a,T9:()=>g,TS:()=>x,Tj:()=>y,__:()=>s,cy:()=>u,fY:()=>L,pb:()=>p,tJ:()=>r,v3:()=>M,zN:()=>o}),function(e){function t(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(var a=0;a<r;++a){var o=(n+a)%s;if(e[o]===t)return o}return-1}function n(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(var a=0;a<r;++a){var o=(n-a+s)%s;if(e[o]===t)return o}return-1}function i(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(var a=0;a<r;++a){var o=(n+a)%s;if(t(e[o],o))return o}return-1}function r(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(var a=0;a<r;++a){var o=(n-a+s)%s;if(t(e[o],o))return o}return-1}function s(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1);var i=e.length;if(!(i<=1))for(t=t<0?Math.max(0,t+i):Math.min(t,i-1),n=n<0?Math.max(0,n+i):Math.min(n,i-1);t<n;){var r=e[t],s=e[n];e[t++]=s,e[n--]=r}}function a(e,t){var n=e.length;if(t<0&&(t+=n),!(t<0||t>=n)){for(var i=e[t],r=t+1;r<n;++r)e[r-1]=e[r];return e.length=n-1,i}}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=i,e.findLastIndex=r,e.findFirstValue=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var s=i(e,t,n,r);return-1!==s?e[s]:void 0},e.findLastValue=function(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var s=r(e,t,n,i);return-1!==s?e[s]:void 0},e.lowerBound=function(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var s=e.length;if(0===s)return 0;for(var a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;o>0;){var l=o>>1,c=a+l;n(e[c],t)<0?(a=c+1,o-=l+1):o=l}return a},e.upperBound=function(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var s=e.length;if(0===s)return 0;for(var a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;o>0;){var l=o>>1,c=a+l;n(e[c],t)>0?o=l:(a=c+1,o-=l+1)}return a},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;++i)if(n?!n(e[i],t[i]):e[i]!==t[i])return!1;return!0},e.slice=function(e,t){void 0===t&&(t={});var n=t.start,i=t.stop,r=t.step;if(void 0===r&&(r=1),0===r)throw new Error("Slice `step` cannot be zero.");var s,a=e.length;void 0===n?n=r<0?a-1:0:n<0?n=Math.max(n+a,r<0?-1:0):n>=a&&(n=r<0?a-1:a),void 0===i?i=r<0?-1:a:i<0?i=Math.max(i+a,r<0?-1:0):i>=a&&(i=r<0?a-1:a),s=r<0&&i>=n||r>0&&n>=i?0:r<0?Math.floor((i-n+1)/r+1):Math.floor((i-n-1)/r+1);for(var o=[],l=0;l<s;++l)o[l]=e[n+l*r];return o},e.move=function(e,t,n){var i=e.length;if(!(i<=1)&&(t=t<0?Math.max(0,t+i):Math.min(t,i-1))!==(n=n<0?Math.max(0,n+i):Math.min(n,i-1))){for(var r=e[t],s=t<n?1:-1,a=t;a!==n;a+=s)e[a]=e[a+s];e[n]=r}},e.reverse=s,e.rotate=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(!(r<=1||(n=n<0?Math.max(0,n+r):Math.min(n,r-1))>=(i=i<0?Math.max(0,i+r):Math.min(i,r-1)))){var a=i-n+1;if(t>0?t%=a:t<0&&(t=(t%a+a)%a),0!==t){var o=n+t;s(e,n,o-1),s(e,o,i),s(e,n,i)}}},e.fill=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0!==r){var s;n=n<0?Math.max(0,n+r):Math.min(n,r-1),s=(i=i<0?Math.max(0,i+r):Math.min(i,r-1))<n?i+1+(r-n):i-n+1;for(var a=0;a<s;++a)e[(n+a)%r]=t}},e.insert=function(e,t,n){var i=e.length;t=t<0?Math.max(0,t+i):Math.min(t,i);for(var r=i;r>t;--r)e[r]=e[r-1];e[t]=n},e.removeAt=a,e.removeFirstOf=function(e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var s=t(e,n,i,r);return-1!==s&&a(e,s),s},e.removeLastOf=function(e,t,i,r){void 0===i&&(i=-1),void 0===r&&(r=0);var s=n(e,t,i,r);return-1!==s&&a(e,s),s},e.removeAllOf=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);for(var s=0,a=0;a<r;++a)n<=i&&a>=n&&a<=i&&e[a]===t||i<n&&(a<=i||a>=n)&&e[a]===t?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=r-s),s},e.removeFirstWhere=function(e,t,n,r){var s;void 0===n&&(n=0),void 0===r&&(r=-1);var o=i(e,t,n,r);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeLastWhere=function(e,t,n,i){var s;void 0===n&&(n=-1),void 0===i&&(i=0);var o=r(e,t,n,i);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeAllWhere=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);for(var s=0,a=0;a<r;++a)n<=i&&a>=n&&a<=i&&t(e[a],a)||i<n&&(a<=i||a>=n)&&t(e[a],a)?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=r-s),s}}(i||(i={}));var c=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}();function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new h(r(e.map(r)))}(function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}}})(),function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}}}(),function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}}}(),function(){function e(e){this._fn=e}e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)}}();var h=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return void 0!==t?t:(this._active=void 0,this.next())},e}();function d(){return new f}var f=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();function p(e,t){return new m(r(e),t)}!function(){function e(e,t){this._source=e,this._index=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]}}();var m=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var e,t=this._fn,n=this._source;void 0!==(e=n.next());)if(t(e,this._index++))return e},e}();function _(e,t){for(var n,i=0,s=r(e);void 0!==(n=s.next());)if(t(n,i++))return n}function g(e,t){var n=r(e),i=n.next();if(void 0!==i){for(var s=i;void 0!==(i=n.next());)t(i,s)>0&&(s=i);return s}}function y(e,t){return new b(r(e),t)}var v,b=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();function x(e,t,n){var i=0,s=r(e),a=s.next();if(void 0===a&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(void 0===a)return n;var o,l,c=s.next();if(void 0===c&&void 0===n)return a;if(void 0===c)return t(n,a,i++);for(o=t(void 0===n?a:t(n,a,i++),c,i++);void 0!==(l=s.next());)o=t(o,l,i++);return o}function M(e){return new w(e,1)}!function(){function e(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=v.rangeLength(e,t,n)}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++}}(),function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(v||(v={}));var w=function(){function e(e,t){this._value=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function S(e){return"function"==typeof e.retro?e.retro():new T(e)}var L,T=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();!function(){function e(e,t){this._source=e,this._step=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e}}(),function(e){function t(e,t,n){void 0===n&&(n=0);for(var i=new Array(t.length),r=0,s=n,a=t.length;r<a;++r,++s){if(-1===(s=e.indexOf(t[r],s)))return null;i[r]=s}return i}e.findIndices=t,e.matchSumOfSquares=function(e,n,i){void 0===i&&(i=0);var r=t(e,n,i);if(!r)return null;for(var s=0,a=0,o=r.length;a<o;++a){var l=r[a]-i;s+=l*l}return{score:s,indices:r}},e.matchSumOfDeltas=function(e,n,i){void 0===i&&(i=0);var r=t(e,n,i);if(!r)return null;for(var s=0,a=i-1,o=0,l=r.length;o<l;++o){var c=r[o];s+=c-a-1,a=c}return{score:s,indices:r}},e.highlight=function(e,t,n){for(var i=[],r=0,s=0,a=t.length;r<a;){for(var o=t[r],l=t[r];++r<a&&t[r]===l+1;)l++;s<o&&i.push(e.slice(s,o)),o<l+1&&i.push(n(e.slice(o,l+1))),s=l+1}return s<e.length&&i.push(e.slice(s)),i},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(L||(L={})),function(){function e(e,t){this._source=e,this._count=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}}}(),function(){function e(e){this._source=e}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map((function(e){return e.clone()})))},e.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var i=this._source[t].next();if(void 0===i)return;e[t]=i}return e}}()},6480:function(e,t){!function(e){"use strict";e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}function i(e,r){if(e===r)return!0;if(t(e)||t(r))return!1;var s=n(e),a=n(r);return s===a&&(s&&a?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;++n)if(!i(e[n],t[n]))return!1;return!0}(e,r):function(e,t){if(e===t)return!0;for(var n in e)if(void 0!==e[n]&&!(n in t))return!1;for(var n in t)if(void 0!==t[n]&&!(n in e))return!1;for(var n in e){var r=e[n],s=t[n];if(void 0!==r||void 0!==s){if(void 0===r||void 0===s)return!1;if(!i(r,s))return!1}}return!0}(e,r))}function r(e){return t(e)?e:n(e)?function(e){for(var t=new Array(e.length),n=0,i=e.length;n<i;++n)t[n]=r(e[n]);return t}(e):function(e){var t={};for(var n in e){var i=e[n];void 0!==i&&(t[n]=r(i))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=i,e.deepCopy=r}(e.JSONExt||(e.JSONExt={}));var t,n=function(){function e(){this._types=[],this._values=[]}return e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0},e}(),i=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}(),r=function(e){this.name=e,this._tokenStructuralPropertyT=null};e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=(t="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null)&&"function"==typeof t.getRandomValues?function(e){return t.getRandomValues(e)}:function(e){for(var t=0,n=0,i=e.length;n<i;++n)n%4==0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8},e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=function(e){for(var t=new Uint8Array(16),n=new Array(256),i=0;i<16;++i)n[i]="0"+i.toString(16);for(i=16;i<256;++i)n[i]=i.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(e.Random.getRandomValues),e.MimeData=n,e.PromiseDelegate=i,e.Token=r,Object.defineProperty(e,"__esModule",{value:!0})}(t)},7287:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ConflatableMessage:()=>y,Message:()=>g,MessageLoop:()=>m});var i,r=n(3483);function s(e,t){for(var n,i=0,r=function(e){return"function"==typeof e.iter?e.iter():new a(e)}(e);void 0!==(n=r.next());)if(!1===t(n,i++))return}!function(e){function t(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(var a=0;a<r;++a){var o=(n+a)%s;if(e[o]===t)return o}return-1}function n(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(var a=0;a<r;++a){var o=(n-a+s)%s;if(e[o]===t)return o}return-1}function i(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(var a=0;a<r;++a){var o=(n+a)%s;if(t(e[o],o))return o}return-1}function r(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(var a=0;a<r;++a){var o=(n-a+s)%s;if(t(e[o],o))return o}return-1}function s(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1);var i=e.length;if(!(i<=1))for(t=t<0?Math.max(0,t+i):Math.min(t,i-1),n=n<0?Math.max(0,n+i):Math.min(n,i-1);t<n;){var r=e[t],s=e[n];e[t++]=s,e[n--]=r}}function a(e,t){var n=e.length;if(t<0&&(t+=n),!(t<0||t>=n)){for(var i=e[t],r=t+1;r<n;++r)e[r-1]=e[r];return e.length=n-1,i}}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=i,e.findLastIndex=r,e.findFirstValue=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var s=i(e,t,n,r);return-1!==s?e[s]:void 0},e.findLastValue=function(e,t,n,i){void 0===n&&(n=-1),void 0===i&&(i=0);var s=r(e,t,n,i);return-1!==s?e[s]:void 0},e.lowerBound=function(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var s=e.length;if(0===s)return 0;for(var a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;o>0;){var l=o>>1,c=a+l;n(e[c],t)<0?(a=c+1,o-=l+1):o=l}return a},e.upperBound=function(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var s=e.length;if(0===s)return 0;for(var a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;o>0;){var l=o>>1,c=a+l;n(e[c],t)>0?o=l:(a=c+1,o-=l+1)}return a},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;++i)if(n?!n(e[i],t[i]):e[i]!==t[i])return!1;return!0},e.slice=function(e,t){void 0===t&&(t={});var n=t.start,i=t.stop,r=t.step;if(void 0===r&&(r=1),0===r)throw new Error("Slice `step` cannot be zero.");var s,a=e.length;void 0===n?n=r<0?a-1:0:n<0?n=Math.max(n+a,r<0?-1:0):n>=a&&(n=r<0?a-1:a),void 0===i?i=r<0?-1:a:i<0?i=Math.max(i+a,r<0?-1:0):i>=a&&(i=r<0?a-1:a),s=r<0&&i>=n||r>0&&n>=i?0:r<0?Math.floor((i-n+1)/r+1):Math.floor((i-n-1)/r+1);for(var o=[],l=0;l<s;++l)o[l]=e[n+l*r];return o},e.move=function(e,t,n){var i=e.length;if(!(i<=1)&&(t=t<0?Math.max(0,t+i):Math.min(t,i-1))!==(n=n<0?Math.max(0,n+i):Math.min(n,i-1))){for(var r=e[t],s=t<n?1:-1,a=t;a!==n;a+=s)e[a]=e[a+s];e[n]=r}},e.reverse=s,e.rotate=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(!(r<=1||(n=n<0?Math.max(0,n+r):Math.min(n,r-1))>=(i=i<0?Math.max(0,i+r):Math.min(i,r-1)))){var a=i-n+1;if(t>0?t%=a:t<0&&(t=(t%a+a)%a),0!==t){var o=n+t;s(e,n,o-1),s(e,o,i),s(e,n,i)}}},e.fill=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0!==r){var s;n=n<0?Math.max(0,n+r):Math.min(n,r-1),s=(i=i<0?Math.max(0,i+r):Math.min(i,r-1))<n?i+1+(r-n):i-n+1;for(var a=0;a<s;++a)e[(n+a)%r]=t}},e.insert=function(e,t,n){var i=e.length;t=t<0?Math.max(0,t+i):Math.min(t,i);for(var r=i;r>t;--r)e[r]=e[r-1];e[t]=n},e.removeAt=a,e.removeFirstOf=function(e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var s=t(e,n,i,r);return-1!==s&&a(e,s),s},e.removeLastOf=function(e,t,i,r){void 0===i&&(i=-1),void 0===r&&(r=0);var s=n(e,t,i,r);return-1!==s&&a(e,s),s},e.removeAllOf=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);for(var s=0,a=0;a<r;++a)n<=i&&a>=n&&a<=i&&e[a]===t||i<n&&(a<=i||a>=n)&&e[a]===t?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=r-s),s},e.removeFirstWhere=function(e,t,n,r){var s;void 0===n&&(n=0),void 0===r&&(r=-1);var o=i(e,t,n,r);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeLastWhere=function(e,t,n,i){var s;void 0===n&&(n=-1),void 0===i&&(i=0);var o=r(e,t,n,i);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeAllWhere=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);for(var s=0,a=0;a<r;++a)n<=i&&a>=n&&a<=i&&t(e[a],a)||i<n&&(a<=i||a>=n)&&t(e[a],a)?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=r-s),s}}(i||(i={}));var a=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}();function o(){return new u}(function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}}})(),function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}}}(),function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}}}(),function(){function e(e){this._fn=e}e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)}}(),function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return void 0!==t?t:(this._active=void 0,this.next())}}();var l,c,u=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();!function(){function e(e,t){this._source=e,this._index=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]}}(),function(){function e(e,t){this._index=0,this._source=e,this._fn=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var e,t=this._fn,n=this._source;void 0!==(e=n.next());)if(t(e,this._index++))return e}}(),function(){function e(e,t){this._index=0,this._source=e,this._fn=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)}}(),function(){function e(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=l.rangeLength(e,t,n)}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++}}(),function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(l||(l={})),function(){function e(e,t){this._value=e,this._count=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value}}(),function(){function e(e){this._source=e,this._index=e.length-1}e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]}}(),function(){function e(e,t){this._source=e,this._step=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e}}(),function(e){function t(e,t,n){void 0===n&&(n=0);for(var i=new Array(t.length),r=0,s=n,a=t.length;r<a;++r,++s){if(-1===(s=e.indexOf(t[r],s)))return null;i[r]=s}return i}e.findIndices=t,e.matchSumOfSquares=function(e,n,i){void 0===i&&(i=0);var r=t(e,n,i);if(!r)return null;for(var s=0,a=0,o=r.length;a<o;++a){var l=r[a]-i;s+=l*l}return{score:s,indices:r}},e.matchSumOfDeltas=function(e,n,i){void 0===i&&(i=0);var r=t(e,n,i);if(!r)return null;for(var s=0,a=i-1,o=0,l=r.length;o<l;++o){var c=r[o];s+=c-a-1,a=c}return{score:s,indices:r}},e.highlight=function(e,t,n){for(var i=[],r=0,s=0,a=t.length;r<a;){for(var o=t[r],l=t[r];++r<a&&t[r]===l+1;)l++;s<o&&i.push(e.slice(s,o)),o<l+1&&i.push(n(e.slice(o,l+1))),s=l+1}return s<e.length&&i.push(e.slice(s)),i},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(c||(c={})),function(){function e(e,t){this._source=e,this._count=t}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}}}(),function(){function e(e){this._source=e}e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map((function(e){return e.clone()})))},e.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var i=this._source[t].next();if(void 0===i)return;e[t]=i}return e}}();var h,d=function(){function e(e){this._root=new h.LeafNode,this.cmp=e}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var e=h.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=h.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return h.iterItems(this._root)},e.prototype.retro=function(){return h.retroItems(this._root)},e.prototype.slice=function(e,t){return h.sliceItems(this._root,e,t)},e.prototype.retroSlice=function(e,t){return h.retroSliceItems(this._root,e,t)},e.prototype.at=function(e){return h.itemAt(this._root,e)},e.prototype.has=function(e,t){return h.hasItem(this._root,e,t)},e.prototype.indexOf=function(e,t){return h.indexOf(this._root,e,t)},e.prototype.get=function(e,t){return h.getItem(this._root,e,t)},e.prototype.assign=function(e){this.clear(),this.update(e)},e.prototype.insert=function(e){var t=h.insertItem(this._root,e,this.cmp);return this._root=h.maybeSplitRoot(this._root),t},e.prototype.update=function(e){var t=this;s(e,(function(e){t.insert(e)}))},e.prototype.delete=function(e,t){var n=h.deleteItem(this._root,e,t);return this._root=h.maybeExtractRoot(this._root),n},e.prototype.remove=function(e){var t=h.removeItem(this._root,e);return this._root=h.maybeExtractRoot(this._root),t},e.prototype.clear=function(){h.clear(this._root),this._root=new h.LeafNode},e}();!function(e){e.from=function(t,n){var i=new e(n);return i.assign(t),i}}(d||(d={})),function(e){var t=function(){function e(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(e.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),e}();e.BranchNode=t;var n=function(){function e(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(e.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e}();function r(e){for(;0===e.type;)e=e.children[0];return e}function a(e){for(;0===e.type;)e=e.children[e.children.length-1];return e}function l(e){0===e.type?(s(e.children,l),e.children.length=0,e.sizes.length=0,e.items.length=0):(e.items.length=0,e.next=null,e.prev=null)}e.LeafNode=n,e.firstLeaf=r,e.lastLeaf=a,e.iterItems=function(e){var t=r(e);return new h(t,0,-1)},e.retroItems=function(e){var t=a(e);return new d(t,t.size-1,-1)},e.sliceItems=function(e,t,n){t=void 0===t?0:t<0?Math.max(0,t+e.size):Math.min(t,e.size),n=void 0===n?e.size:n<0?Math.max(0,n+e.size):Math.min(n,e.size);var i=Math.max(0,n-t);if(0===i)return o();for(;0===e.type;){var r=f(e.sizes,t);r>0&&(t-=e.sizes[r-1]),e=e.children[r]}return new h(e,t,i)},e.retroSliceItems=function(e,t,n){t=void 0===t?e.size-1:t<0?Math.max(-1,t+e.size):Math.min(t,e.size-1),n=void 0===n?-1:n<0?Math.max(-1,n+e.size):Math.min(n,e.size-1);var i=Math.max(0,t-n);if(0===i)return o();for(;0===e.type;){var r=f(e.sizes,t);r>0&&(t-=e.sizes[r-1]),e=e.children[r]}return new d(e,t,i)},e.itemAt=function(e,t){if(t<0&&(t+=e.size),!(t<0||t>=e.size)){for(;0===e.type;){var n=f(e.sizes,t);n>0&&(t-=e.sizes[n-1]),e=e.children[n]}return e.items[t]}},e.hasItem=function(e,t,n){for(;0===e.type;){var i=p(e.items,t,n);e=e.children[i]}return m(e.items,t,n)>=0},e.indexOf=function(e,t,n){for(var i=0;0===e.type;){var r=p(e.items,t,n);r>0&&(i+=e.sizes[r-1]),e=e.children[r]}var s=m(e.items,t,n);return s>=0?i+s:-i+s},e.getItem=function(e,t,n){for(;0===e.type;){var i=p(e.items,t,n);e=e.children[i]}var r=m(e.items,t,n);return r>=0?e.items[r]:void 0},e.insertItem=function e(t,n,r){if(1===t.type){var s,a=m(t.items,n,r);return a>=0?(s=t.items[a],t.items[a]=n):(s=void 0,i.insert(t.items,-a-1,n)),s}var o=p(t.items,n,r),l=t.children[o],u=l.size,h=e(l,n,r),d=l.size;if(t.items[o]=l.items[0],u===d)return h;if(l.width>c){var f=g(l);i.insert(t.children,o+1,f),i.insert(t.items,o+1,f.items[0])}return _(t,o),h},e.deleteItem=function e(t,n,r){if(1===t.type){var s=m(t.items,n,r);if(s<0)return;return i.removeAt(t.items,s)}var a=p(t.items,n,r),o=t.children[a],l=o.size,c=e(o,n,r);return l===o.size||(t.items[a]=o.items[0],o.width<u&&(a=y(t,a)),_(t,a)),c},e.removeItem=function e(t,n){if(n<0&&(n+=t.size),!(n<0||n>=t.size)){if(1===t.type)return i.removeAt(t.items,n);var r=f(t.sizes,n);r>0&&(n-=t.sizes[r]);var s=t.children[r],a=e(s,n);return t.items[r]=s.items[0],s.width<u&&(r=y(t,r)),_(t,r),a}},e.clear=l,e.maybeSplitRoot=function(e){if(e.width<=c)return e;var n=new t,i=g(e);return n.sizes[0]=e.size,n.sizes[1]=e.size+i.size,n.children[0]=e,n.children[1]=i,n.items[0]=e.items[0],n.items[1]=i.items[0],n},e.maybeExtractRoot=function(e){if(1===e.type)return e;if(e.children.length>1)return e;var t=e.children.pop();return l(e),t};var c=32,u=c>>1,h=function(){function e(e,t,n){this._node=e,this._index=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node,this._index,this._count)},e.prototype.next=function(){if(null!==this._node&&0!==this._count)return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},e}(),d=function(){function e(e,t,n){this._node=e,this._index=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node,this._index,this._count)},e.prototype.next=function(){if(null!==this._node&&0!==this._count)return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},e}();function f(e,t){for(var n=e.length,i=0;i<n;++i)if(e[i]>t)return i;return n-1}function p(e,t,n){for(var i=e.length,r=1;r<i;++r)if(n(e[r],t)>0)return r-1;return i-1}function m(e,t,n){for(var i=e.length,r=0;r<i;++r){var s=n(e[r],t);if(0===s)return r;if(s>0)return-r-1}return-i-1}function _(e,t){for(var n=e.sizes,i=e.children,r=t>0?n[t-1]:0,s=i.length;t<s;++t)r=n[t]=r+i[t].size;n.length=i.length}function g(e){if(1===e.type){for(var i=new n,r=e.items,s=i.items,a=u,o=r.length;a<o;++a)s.push(r[a]);return r.length=u,e.next&&(e.next.prev=i),i.next=e.next,i.prev=e,e.next=i,i}var l=new t,c=e.children,h=l.children;for(a=u,o=c.length;a<o;++a)h.push(c[a]);c.length=u;var d=e.items,f=l.items;for(a=u,o=d.length;a<o;++a)f.push(d[a]);return d.length=u,_(e,u),_(l,0),l}function y(e,t){var n,r,s,a,o,c,h=e.children[t],d=0===t?e.children[t+1]:e.children[t-1],f=0===t,p=1===h.type,m=d.width>u;if(p&&m&&f){var g=d;return(y=h).items.push(g.items.shift()),e.items[t+1]=g.items[0],t}if(p&&m&&!f)return g=d,(y=h).items.unshift(g.items.pop()),e.items[t]=y.items[0],t-1;if(p&&!m&&f){var y=h;return(n=(g=d).items).unshift.apply(n,y.items),i.removeAt(e.children,t),i.removeAt(e.items,t+1),y.prev&&(y.prev.next=g),g.prev=y.prev,l(y),t}if(p&&!m&&!f)return y=h,(r=(g=d).items).push.apply(r,y.items),i.removeAt(e.children,t),i.removeAt(e.items,t),y.next&&(y.next.prev=g),g.next=y.next,l(y),t-1;if(!p&&m&&f)return g=d,(y=h).children.push(g.children.shift()),y.items.push(g.items.shift()),e.items[t+1]=g.items[0],_(y,y.width-1),_(g,0),t;if(!p&&m&&!f)return g=d,(y=h).children.unshift(g.children.pop()),y.items.unshift(g.items.pop()),e.items[t]=y.items[0],_(y,0),_(g,g.width-1),t-1;if(!p&&!m&&f)return y=h,(s=(g=d).children).unshift.apply(s,y.children),(a=g.items).unshift.apply(a,y.items),i.removeAt(e.children,t),i.removeAt(e.items,t+1),_(g,0),y.children.length=0,l(y),t;if(!p&&!m&&!f)return y=h,(o=(g=d).children).push.apply(o,y.children),(c=g.items).push.apply(c,y.items),i.removeAt(e.children,t),i.removeAt(e.items,t),_(g,0),y.children.length=0,l(y),t-1;throw"unreachable"}}(h||(h={}));var f,p=function(){function e(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return new e.ForwardValueIterator(this._first)},e.prototype.retro=function(){return new e.RetroValueIterator(this._last)},e.prototype.nodes=function(){return new e.ForwardNodeIterator(this._first)},e.prototype.retroNodes=function(){return new e.RetroNodeIterator(this._last)},e.prototype.assign=function(e){var t=this;this.clear(),s(e,(function(e){t.addLast(e)}))},e.prototype.push=function(e){this.addLast(e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(e){this.addFirst(e)},e.prototype.unshift=function(){return this.removeFirst()},e.prototype.addFirst=function(e){var t=new f.LinkedListNode(this,e);return this._first?(t.next=this._first,this._first.prev=t,this._first=t):(this._first=t,this._last=t),this._size++,t},e.prototype.addLast=function(e){var t=new f.LinkedListNode(this,e);return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,t},e.prototype.insertBefore=function(e,t){if(!t||t===this._first)return this.addFirst(e);if(!(t instanceof f.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");var n=new f.LinkedListNode(this,e),i=t,r=i.prev;return n.next=i,n.prev=r,i.prev=n,r.next=n,this._size++,n},e.prototype.insertAfter=function(e,t){if(!t||t===this._last)return this.addLast(e);if(!(t instanceof f.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");var n=new f.LinkedListNode(this,e),i=t,r=i.next;return n.next=r,n.prev=i,i.next=n,r.prev=n,this._size++,n},e.prototype.removeFirst=function(){var e=this._first;if(e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},e.prototype.removeLast=function(){var e=this._last;if(e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},e.prototype.removeNode=function(e){if(!(e instanceof f.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");var t=e;t===this._first&&t===this._last?(this._first=null,this._last=null):t===this._first?(this._first=t.next,this._first.prev=null):t===this._last?(this._last=t.prev,this._last.next=null):(t.next.prev=t.prev,t.prev.next=t.next),t.list=null,t.next=null,t.prev=null,this._size--},e.prototype.clear=function(){for(var e=this._first;e;){var t=e.next;e.list=null,e.prev=null,e.next=null,e=t}this._first=null,this._last=null,this._size=0},e}();!function(e){e.from=function(t){var n=new e;return n.assign(t),n};var t=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.next,e.value}},e}();e.ForwardValueIterator=t;var n=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.prev,e.value}},e}();e.RetroValueIterator=n;var i=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.next,e}},e}();e.ForwardNodeIterator=i;var r=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.prev,e}},e}();e.RetroNodeIterator=r}(p||(p={})),function(e){e.LinkedListNode=function(e,t){this.list=null,this.next=null,this.prev=null,this.list=e,this.value=t}}(f||(f={}));var m,_=function(e,t){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},_(e,t)},g=function(){function e(e){this.type=e}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.conflate=function(e){return!1},e}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.conflate=function(e){return!0},t}(g);!function(e){function t(e,t){var n=i.get(e);if(n&&0!==n.length){var s=(0,r.Si)((0,r.$0)(n),(function(n){return!n||function(e,t,n){var i=!0;try{i="function"==typeof e?e(t,n):e.messageHook(t,n)}catch(e){a(e)}return i}(n,e,t)}));s&&h(e,t)}else h(e,t)}e.sendMessage=t,e.postMessage=function(e,t){t.isConflatable&&(0,r.zN)(n,(function(n){return n.handler===e&&!!n.msg&&n.msg.type===t.type&&!!n.msg.isConflatable&&n.msg.conflate(t)}))||function(e,t){n.addLast({handler:e,msg:t}),0===o&&(o=c(d))}(e,t)},e.installMessageHook=function(e,t){var n=i.get(e);n&&-1!==n.indexOf(t)||(n?n.push(t):i.set(e,[t]))},e.removeMessageHook=function(e,t){var n=i.get(e);if(n){var r=n.indexOf(t);-1!==r&&(n[r]=null,f(n))}},e.clearData=function(e){var t=i.get(e);t&&t.length>0&&(r.Rw.fill(t,null),f(t)),(0,r.__)(n,(function(t){t.handler===e&&(t.handler=null,t.msg=null)}))},e.flush=function(){l||0===o||(u(o),l=!0,d(),l=!1)},e.getExceptionHandler=function(){return a},e.setExceptionHandler=function(e){var t=a;return a=e,t};var n=new p,i=new WeakMap,s=new Set,a=function(e){console.error(e)},o=0,l=!1,c="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,u="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate;function h(e,t){try{e.processMessage(t)}catch(e){a(e)}}function d(){if(o=0,!n.isEmpty){var e={handler:null,msg:null};for(n.addLast(e);;){var i=n.removeFirst();if(i===e)return;i.handler&&i.msg&&t(i.handler,i.msg)}}}function f(e){0===s.size&&c(m),s.add(e)}function m(){s.forEach(_),s.clear()}function _(e){r.Rw.removeAllWhere(e,g)}function g(e){return null===e}}(m||(m={}))},9419:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AccordionLayout:()=>Q,AccordionPanel:()=>se,BoxEngine:()=>F,BoxLayout:()=>oe,BoxPanel:()=>ce,BoxSizer:()=>I,CommandPalette:()=>he,ContextMenu:()=>me,DockLayout:()=>ve,DockPanel:()=>xe,FocusTracker:()=>we,GridLayout:()=>Se,Layout:()=>W,LayoutItem:()=>V,Menu:()=>fe,MenuBar:()=>Te,Panel:()=>te,PanelLayout:()=>X,ScrollBar:()=>Ae,SingletonLayout:()=>Ce,SplitLayout:()=>K,SplitPanel:()=>ie,StackedLayout:()=>De,StackedPanel:()=>Oe,TabBar:()=>ge,TabPanel:()=>Re,Title:()=>j,Widget:()=>U});var i,r,s,a,o,l=n(3483);!function(e){e.copyText=function(e){var t=document.body,n=function(i){i.preventDefault(),i.stopPropagation(),i.clipboardData.setData("text",e),t.removeEventListener("copy",n,!0)};t.addEventListener("copy",n,!0),document.execCommand("copy")}}(i||(i={})),function(e){e.boxSizing=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.borderTopWidth)||0,i=parseFloat(t.borderLeftWidth)||0,r=parseFloat(t.borderRightWidth)||0,s=parseFloat(t.borderBottomWidth)||0,a=parseFloat(t.paddingTop)||0,o=parseFloat(t.paddingLeft)||0,l=parseFloat(t.paddingRight)||0,c=parseFloat(t.paddingBottom)||0;return{borderTop:n,borderLeft:i,borderRight:r,borderBottom:s,paddingTop:a,paddingLeft:o,paddingRight:l,paddingBottom:c,horizontalSum:i+o+l+r,verticalSum:n+a+c+s}},e.sizeLimits=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.minWidth)||0,i=parseFloat(t.minHeight)||0,r=parseFloat(t.maxWidth)||1/0,s=parseFloat(t.maxHeight)||1/0;return{minWidth:n,minHeight:i,maxWidth:r=Math.max(n,r),maxHeight:s=Math.max(i,s)}},e.hitTest=function(e,t,n){var i=e.getBoundingClientRect();return t>=i.left&&t<i.right&&n>=i.top&&n<i.bottom},e.scrollIntoViewIfNeeded=function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<=n.top&&i.bottom>=n.bottom||(i.top<n.top&&i.height<=n.height||i.bottom>n.bottom&&i.height>=n.height?e.scrollTop-=n.top-i.top:(i.top<n.top&&i.height>n.height||i.bottom>n.bottom&&i.height<n.height)&&(e.scrollTop-=n.bottom-i.bottom))}}(r||(r={})),function(e){e.IS_MAC=!!navigator.platform.match(/Mac/i),e.IS_WIN=!!navigator.platform.match(/Win/i),e.IS_IE=/Trident/.test(navigator.userAgent),e.IS_EDGE=/Edge/.test(navigator.userAgent),e.accelKey=function(t){return e.IS_MAC?t.metaKey:t.ctrlKey}}(s||(s={})),function(e){e.calculateSpecificity=function(e){if(e in o.specificityCache)return o.specificityCache[e];var t=o.calculateSingle(e);return o.specificityCache[e]=t},e.isValid=function(e){if(e in o.validityCache)return o.validityCache[e];var t=!0;try{o.testElem.querySelector(e)}catch(e){t=!1}return o.validityCache[e]=t},e.matches=function(e,t){return o.protoMatchFunc.call(e,t)}}(a||(a={})),function(e){var t;e.specificityCache=Object.create(null),e.validityCache=Object.create(null),e.testElem=document.createElement("div"),e.protoMatchFunc=(t=Element.prototype).matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(e){var t=this,n=t.ownerDocument?t.ownerDocument.querySelectorAll(e):[];return-1!==Array.prototype.indexOf.call(n,t)},e.calculateSingle=function(e){var t=0,u=0,h=0;function d(t){var n=e.match(t);return null!==n&&(e=e.slice(n[0].length),!0)}for(e=(e=e.split(",",1)[0]).replace(c," $1 ");e.length>0;)if(d(n))t++;else if(d(i))u++;else if(d(r))u++;else if(d(a))h++;else if(d(o))u++;else if(d(s))h++;else if(!d(l))return 0;return(t=Math.min(t,255))<<16|(u=Math.min(u,255))<<8|Math.min(h,255)};var n=/^#[^\s\+>~#\.\[:]+/,i=/^\.[^\s\+>~#\.\[:]+/,r=/^\[[^\]]+\]/,s=/^[^\s\+>~#\.\[:]+/,a=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,o=/^:[^\s\+>~#\.\[:]+/,l=/^[\s\+>~\*]+/,c=/:not\(([^\)]+)\)/g}(o||(o={}));var c,u=n(7287),h=function(){function e(e){this._pid=c.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return e.prototype.get=function(e){var t=c.ensureMap(e);return this._pid in t?t[this._pid]:t[this._pid]=this._createValue(e)},e.prototype.set=function(e,t){var n,i=c.ensureMap(e);n=this._pid in i?i[this._pid]:i[this._pid]=this._createValue(e);var r=this._coerceValue(e,t);this._maybeNotify(e,n,i[this._pid]=r)},e.prototype.coerce=function(e){var t,n=c.ensureMap(e);t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e);var i=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=i)},e.prototype._createValue=function(e){return(0,this._create)(e)},e.prototype._coerceValue=function(e,t){var n=this._coerce;return n?n(e,t):t},e.prototype._compareValue=function(e,t){var n=this._compare;return n?n(e,t):e===t},e.prototype._maybeNotify=function(e,t,n){var i=this._changed;i&&!this._compareValue(t,n)&&i(e,t,n)},e}();!function(e){e.clearData=function(e){c.ownerData.delete(e)}}(h||(h={})),function(e){var t;e.ownerData=new WeakMap,e.nextPID=(t=0,function(){return"pid-"+(""+Math.random()).slice(2)+"-"+t++}),e.ensureMap=function(t){var n=e.ownerData.get(t);return n||(n=Object.create(null),e.ownerData.set(t,n),n)}}(c||(c={}));var d,f=function(){function e(e){this._blockedCount=0,this.sender=e}return e.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},e.prototype.connect=function(e,t){return d.connect(this,e,t)},e.prototype.disconnect=function(e,t){return d.disconnect(this,e,t)},e.prototype.emit=function(e){this._blockedCount||d.emit(this,e)},e}();!function(e){e.blockAll=function(e,t){var n=d.blockedProperty;n.set(e,n.get(e)+1);try{t()}finally{n.set(e,n.get(e)-1)}},e.disconnectBetween=function(e,t){d.disconnectBetween(e,t)},e.disconnectSender=function(e){d.disconnectSender(e)},e.disconnectReceiver=function(e){d.disconnectReceiver(e)},e.disconnectAll=function(e){d.disconnectAll(e)},e.clearData=function(e){d.disconnectAll(e)},e.getExceptionHandler=function(){return d.exceptionHandler},e.setExceptionHandler=function(e){var t=d.exceptionHandler;return d.exceptionHandler=e,t}}(f||(f={})),function(e){function t(e){var t=i.get(e);t&&0!==t.length&&((0,l.__)(t,(function(e){if(e.signal){var t=e.thisArg||e.slot;e.signal=null,u(r.get(t))}})),u(t))}function n(e){var t=r.get(e);t&&0!==t.length&&((0,l.__)(t,(function(e){if(e.signal){var t=e.signal.sender;e.signal=null,u(i.get(t))}})),u(t))}e.exceptionHandler=function(e){console.error(e)},e.connect=function(e,t,n){n=n||void 0;var s=i.get(e.sender);if(s||(s=[],i.set(e.sender,s)),o(s,e,t,n))return!1;var a=n||t,l=r.get(a);l||(l=[],r.set(a,l));var c={signal:e,slot:t,thisArg:n};return s.push(c),l.push(c),!0},e.disconnect=function(e,t,n){n=n||void 0;var s=i.get(e.sender);if(!s||0===s.length)return!1;var a=o(s,e,t,n);if(!a)return!1;var l=n||t,c=r.get(l);return a.signal=null,u(s),u(c),!0},e.disconnectBetween=function(e,t){var n=i.get(e);if(n&&0!==n.length){var s=r.get(t);s&&0!==s.length&&((0,l.__)(s,(function(t){t.signal&&t.signal.sender===e&&(t.signal=null)})),u(n),u(s))}},e.disconnectSender=t,e.disconnectReceiver=n,e.disconnectAll=function(e){t(e),n(e)},e.emit=function(t,n){if(!(e.blockedProperty.get(t.sender)>0)){var r=i.get(t.sender);if(r&&0!==r.length)for(var s=0,a=r.length;s<a;++s){var o=r[s];o.signal===t&&c(o,n)}}};var i=new WeakMap,r=new WeakMap,s=new Set,a="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function o(e,t,n,i){return(0,l.I6)(e,(function(e){return e.signal===t&&e.slot===n&&e.thisArg===i}))}function c(t,n){var i=t.signal,r=t.slot,s=t.thisArg;try{r.call(s,i.sender,n)}catch(t){e.exceptionHandler(t)}}function u(e){0===s.size&&a(d),s.add(e)}function d(){s.forEach(f),s.clear()}function f(e){l.Rw.removeAllWhere(e,p)}function p(e){return null===e.signal}e.blockedProperty=new h({name:"blocked",create:function(){return 0}})}(d||(d={}));var p=function(e,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},p(e,t)};function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _=function(){function e(e){this._fn=e}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._fn){var e=this._fn;this._fn=null,e()}},e}(),g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new f(t),t}m(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),f.clearData(this))}}(_),function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((function(e){e.dispose()})),this._items.clear())},e.prototype.contains=function(e){return this._items.has(e)},e.prototype.add=function(e){this._items.add(e)},e.prototype.remove=function(e){this._items.delete(e)},e.prototype.clear=function(){this._items.clear()},e}());!function(e){e.from=function(t){var n=new e;return(0,l.__)(t,(function(e){n.add(e)})),n}}(g||(g={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new f(t),t}return m(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),f.clearData(this))},t}(g);!function(e){e.from=function(t){var n=new e;return(0,l.__)(t,(function(e){n.add(e)})),n}}(y||(y={}));var v,b=function(){function e(e){var t=this;this._onScrollFrame=function(){if(t._scrollTarget){var e=t._scrollTarget,n=e.element,i=e.edge,r=e.distance,s=v.SCROLL_EDGE_SIZE-r,a=Math.pow(s/v.SCROLL_EDGE_SIZE,2),o=Math.max(1,Math.round(a*v.SCROLL_EDGE_SIZE));switch(i){case"top":n.scrollTop-=o;break;case"left":n.scrollLeft-=o;break;case"right":n.scrollLeft+=o;break;case"bottom":n.scrollTop+=o}requestAnimationFrame(t._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}return e.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var e=v.createMouseEvent("pointerup",-1,-1);v.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.start=function(e,t){var n=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,t),this._promise=new Promise((function(e,t){n._resolve=e}));var i=v.createMouseEvent("pointermove",e,t);return document.dispatchEvent(i),this._promise},e.prototype.handleEvent=function(e){switch(e.type){case"mousemove":case"pointermove":this._evtMouseMove(e);break;case"mouseup":case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation()}},e.prototype.moveDragImage=function(e,t){if(this.dragImage){var n=this.dragImage.style;n.top=t+"px",n.left=e+"px"}},e.prototype._evtMouseMove=function(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)},e.prototype._evtMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),0===e.button)if(this._updateCurrentTarget(e),this._currentTarget){if("none"===this._dropAction)return v.dispatchDragLeave(this,this._currentTarget,null,e),void this._finalize("none");var t=v.dispatchDrop(this,this._currentTarget,e);this._finalize(t)}else this._finalize("none")},e.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.dispose()},e.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},e.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},e.prototype._updateDragScroll=function(e){var t=v.findScrollTarget(e);(this._scrollTarget||t)&&(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=t)},e.prototype._updateCurrentTarget=function(e){var t=this._currentTarget,n=this._currentTarget,i=this._currentElement,r=this.document.elementFromPoint(e.clientX,e.clientY);this._currentElement=r,r!==i&&r!==n&&v.dispatchDragExit(this,n,r,e),r!==i&&r!==n&&(n=v.dispatchDragEnter(this,r,n,e)),n!==t&&(this._currentTarget=n,v.dispatchDragLeave(this,t,n,e));var s=v.dispatchDragOver(this,n,e);this._setDropAction(s)},e.prototype._attachDragImage=function(e,t){if(this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var n=this.dragImage.style;n.pointerEvents="none",n.position="fixed",n.top=t+"px",n.left=e+"px",(this.document instanceof Document?this.document.body:this.document.firstElementChild).appendChild(this.dragImage)}},e.prototype._detachDragImage=function(){if(this.dragImage){var e=this.dragImage.parentNode;e&&e.removeChild(this.dragImage)}},e.prototype._setDropAction=function(t){if(t=v.validateAction(t,this.supportedActions),!this._override||this._dropAction!==t)switch(t){case"none":this._dropAction=t,this._override=e.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=t,this._override=e.overrideCursor("copy",this.document);break;case"link":this._dropAction=t,this._override=e.overrideCursor("alias",this.document);break;case"move":this._dropAction=t,this._override=e.overrideCursor("move",this.document)}},e.prototype._finalize=function(e){var t=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,t&&t(e)},e}();!function(e){e.overrideCursor=function(e,n){void 0===n&&(n=document);var i=++t,r=n instanceof Document?n.body:n.firstElementChild;return r.style.cursor=e,r.classList.add("lm-mod-override-cursor"),r.classList.add("p-mod-override-cursor"),new _((function(){i===t&&(r.style.cursor="",r.classList.remove("lm-mod-override-cursor"),r.classList.remove("p-mod-override-cursor"))}))};var t=0}(b||(b={})),function(e){e.SCROLL_EDGE_SIZE=20,e.validateAction=function(e,i){return t[e]&n[i]?e:"none"},e.createMouseEvent=function(e,t,n){var i=document.createEvent("MouseEvent");return i.initMouseEvent(e,!0,!0,window,0,0,0,t,n,!1,!1,!1,!1,0,null),i},e.findScrollTarget=function(t){for(var n=t.clientX,i=t.clientY,r=document.elementFromPoint(n,i);r;r=r.parentElement){var s=r.hasAttribute("data-lm-dragscroll");if(s=s||r.hasAttribute("data-p-dragscroll")){var a=0,o=0;r===document.body&&(a=window.pageXOffset,o=window.pageYOffset);var l=r.getBoundingClientRect(),c=l.top+o,u=l.left+a,h=u+l.width,d=c+l.height;if(!(n<u||n>=h||i<c||i>=d)){var f=n-u+1,p=i-c+1,m=h-n,_=d-i,g=Math.min(f,p,m,_);if(!(g>e.SCROLL_EDGE_SIZE)){var y=void 0;switch(g){case _:y="bottom";break;case p:y="top";break;case m:y="right";break;case f:y="left";break;default:throw"unreachable"}var v=r.scrollWidth-r.clientWidth,b=r.scrollHeight-r.clientHeight,x=void 0;switch(y){case"top":x=b>0&&r.scrollTop>0;break;case"left":x=v>0&&r.scrollLeft>0;break;case"right":x=v>0&&r.scrollLeft<v;break;case"bottom":x=b>0&&r.scrollTop<b;break;default:throw"unreachable"}if(x)return{element:r,edge:y,distance:g}}}}}return null},e.dispatchDragEnter=function(e,t,n,r){if(!t)return null;var s=i("lm-dragenter",e,r,n),a=!t.dispatchEvent(s);if(a)return t;if(s=i("p-dragenter",e,r,n),a=!t.dispatchEvent(s))return t;var o=e.document instanceof Document?e.document.body:e.document.firstElementChild;return t===o?n:(s=i("lm-dragenter",e,r,n),o.dispatchEvent(s),s=i("p-dragenter",e,r,n),o.dispatchEvent(s),o)},e.dispatchDragExit=function(e,t,n,r){if(t){var s=i("lm-dragexit",e,r,n);t.dispatchEvent(s),s=i("p-dragexit",e,r,n),t.dispatchEvent(s)}},e.dispatchDragLeave=function(e,t,n,r){if(t){var s=i("lm-dragleave",e,r,n);t.dispatchEvent(s),s=i("p-dragleave",e,r,n),t.dispatchEvent(s)}},e.dispatchDragOver=function(e,t,n){if(!t)return"none";var r=i("lm-dragover",e,n,null),s=!t.dispatchEvent(r);return s?r.dropAction:(r=i("p-dragover",e,n,null),(s=!t.dispatchEvent(r))?r.dropAction:"none")},e.dispatchDrop=function(e,t,n){if(!t)return"none";var r=i("lm-drop",e,n,null),s=!t.dispatchEvent(r);return s?r.dropAction:(r=i("p-drop",e,n,null),(s=!t.dispatchEvent(r))?r.dropAction:"none")};var t={none:0,copy:1,link:2,move:4},n={none:t.none,copy:t.copy,link:t.link,move:t.move,"copy-link":t.copy|t.link,"copy-move":t.copy|t.move,"link-move":t.link|t.move,all:t.copy|t.link|t.move};function i(e,t,n,i){var r=document.createEvent("MouseEvent");return r.initMouseEvent(e,!0,!0,window,0,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,i),r.dropAction="none",r.mimeData=t.mimeData,r.proposedAction=t.proposedAction,r.supportedActions=t.supportedActions,r.source=t.source,r}}(v||(v={}));var x=n(6480);function M(){return S.keyboardLayout}var w=function(){function e(t,n,i){void 0===i&&(i=[]),this.name=t,this._codes=n,this._keys=e.extractKeys(n),this._modifierKeys=e.convertToKeySet(i)}return e.prototype.keys=function(){return Object.keys(this._keys)},e.prototype.isValidKey=function(e){return e in this._keys},e.prototype.isModifierKey=function(e){return e in this._modifierKeys},e.prototype.keyForKeydownEvent=function(e){return this._codes[e.keyCode]||""},e}();!function(e){e.extractKeys=function(e){var t=Object.create(null);for(var n in e)t[e[n]]=!0;return t},e.convertToKeySet=function(e){for(var t=Object(null),n=0,i=e.length;n<i;++n)t[e[n]]=!0;return t}}(w||(w={}));var S,L=new w("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]);!function(e){e.keyboardLayout=L}(S||(S={}));var T,k=function(){return k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},k.apply(this,arguments)},A=function(){function e(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new f(this),this._commandExecuted=new f(this),this._keyBindingChanged=new f(this)}return Object.defineProperty(e.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),e.prototype.listCommands=function(){return Object.keys(this._commands)},e.prototype.hasCommand=function(e){return e in this._commands},e.prototype.addCommand=function(e,t){var n=this;if(e in this._commands)throw new Error("Command '"+e+"' already registered.");return this._commands[e]=T.createCommand(t),this._commandChanged.emit({id:e,type:"added"}),new _((function(){delete n._commands[e],n._commandChanged.emit({id:e,type:"removed"})}))},e.prototype.notifyCommandChanged=function(e){if(void 0!==e&&!(e in this._commands))throw new Error("Command '"+e+"' is not registered.");this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})},e.prototype.describedBy=function(e){var t=this._commands[e];return t&&t.describedBy||{args:null}},e.prototype.label=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.label.call(void 0,t):""},e.prototype.mnemonic=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.mnemonic.call(void 0,t):-1},e.prototype.icon=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.icon.call(void 0,t):""},e.prototype.iconClass=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.iconClass.call(void 0,t):""},e.prototype.iconLabel=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.iconLabel.call(void 0,t):""},e.prototype.caption=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.caption.call(void 0,t):""},e.prototype.usage=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.usage.call(void 0,t):""},e.prototype.className=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.className.call(void 0,t):""},e.prototype.dataset=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return n?n.dataset.call(void 0,t):{}},e.prototype.isEnabled=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return!!n&&n.isEnabled.call(void 0,t)},e.prototype.isToggled=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return!!n&&n.isToggled.call(void 0,t)},e.prototype.isToggleable=function(e,t){var n=this._commands[e];return!!n&&n.isToggleable},e.prototype.isVisible=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n=this._commands[e];return!!n&&n.isVisible.call(void 0,t)},e.prototype.execute=function(e,t){void 0===t&&(t=x.JSONExt.emptyObject);var n,i=this._commands[e];if(!i)return Promise.reject(new Error("Command '"+e+"' not registered."));try{n=i.execute.call(void 0,t)}catch(e){n=Promise.reject(e)}var r=Promise.resolve(n);return this._commandExecuted.emit({id:e,args:t,result:r}),r},e.prototype.addKeyBinding=function(e){var t=this,n=T.createKeyBinding(e);return this._keyBindings.push(n),this._keyBindingChanged.emit({binding:n,type:"added"}),new _((function(){l.Rw.removeFirstOf(t._keyBindings,n),t._keyBindingChanged.emit({binding:n,type:"removed"})}))},e.prototype.processKeydownEvent=function(t){if(!this._replaying&&!e.isModifierKeyPressed(t)){var n=e.keystrokeForKeydownEvent(t);if(!n)return this._replayKeydownEvents(),void this._clearPendingState();this._keystrokes.push(n);var i=T.matchKeyBinding(this._keyBindings,this._keystrokes,t),r=i.exact,s=i.partial;if(!r&&!s)return this._replayKeydownEvents(),void this._clearPendingState();if(t.preventDefault(),t.stopPropagation(),r&&!s)return this._executeKeyBinding(r),void this._clearPendingState();r&&(this._exactKeyMatch=r),this._keydownEvents.push(t),this._startTimer()}},e.prototype._startTimer=function(){var e=this;this._clearTimer(),this._timerID=window.setTimeout((function(){e._onPendingTimeout()}),T.CHORD_TIMEOUT)},e.prototype._clearTimer=function(){0!==this._timerID&&(clearTimeout(this._timerID),this._timerID=0)},e.prototype._replayKeydownEvents=function(){0!==this._keydownEvents.length&&(this._replaying=!0,this._keydownEvents.forEach(T.replayKeyEvent),this._replaying=!1)},e.prototype._executeKeyBinding=function(e){var t=e.command,n=e.args;if(this.hasCommand(t)&&this.isEnabled(t,n))this.execute(t,n);else{var i=this.hasCommand(t)?"enabled":"registered",r="Cannot execute key binding '"+e.keys.join(", ")+"':",s="command '"+t+"' is not "+i+".";console.warn(r+" "+s)}},e.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},e.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},e}();!function(e){function t(e){for(var t="",n=!1,i=!1,r=!1,a=!1,o=0,l=e.split(/\s+/);o<l.length;o++){var c=l[o];"Accel"===c?s.IS_MAC?i=!0:r=!0:"Alt"===c?n=!0:"Cmd"===c?i=!0:"Ctrl"===c?r=!0:"Shift"===c?a=!0:c.length>0&&(t=c)}return{cmd:i,ctrl:r,alt:n,shift:a,key:t}}function n(e){var n="",i=t(e);return i.ctrl&&(n+="Ctrl "),i.alt&&(n+="Alt "),i.shift&&(n+="Shift "),i.cmd&&s.IS_MAC&&(n+="Cmd "),n+i.key}e.parseKeystroke=t,e.normalizeKeystroke=n,e.normalizeKeys=function(e){return(s.IS_WIN?e.winKeys||e.keys:s.IS_MAC?e.macKeys||e.keys:e.linuxKeys||e.keys).map(n)},e.formatKeystroke=function(e){return"string"==typeof e?n(e):e.map(n).join(", ");function n(e){var n=[],i=s.IS_MAC?" ":"+",r=t(e);return r.ctrl&&n.push("Ctrl"),r.alt&&n.push("Alt"),r.shift&&n.push("Shift"),s.IS_MAC&&r.cmd&&n.push("Cmd"),n.push(r.key),n.map(T.formatKey).join(i)}},e.isModifierKeyPressed=function(e){var t=M(),n=t.keyForKeydownEvent(e);return t.isModifierKey(n)},e.keystrokeForKeydownEvent=function(e){var t=M(),n=t.keyForKeydownEvent(e);if(!n||t.isModifierKey(n))return"";var i=[];return e.ctrlKey&&i.push("Ctrl"),e.altKey&&i.push("Alt"),e.shiftKey&&i.push("Shift"),e.metaKey&&s.IS_MAC&&i.push("Cmd"),i.push(n),i.join(" ")}}(A||(A={})),function(e){e.CHORD_TIMEOUT=1e3,e.createCommand=function(e){var t,n;return e.icon&&"string"!=typeof e.icon?(n=h(e.iconClass,i),t=h(e.icon,u)):t=n=h(e.iconClass||e.icon,i),{execute:e.execute,describedBy:k({args:null},e.describedBy),label:h(e.label,i),mnemonic:h(e.mnemonic,r),icon:t,iconClass:n,iconLabel:h(e.iconLabel,i),caption:h(e.caption,i),usage:h(e.usage,i),className:h(e.className,i),dataset:h(e.dataset,c),isEnabled:e.isEnabled||o,isToggled:e.isToggled||l,isToggleable:e.isToggleable||!!e.isToggled,isVisible:e.isVisible||o}},e.createKeyBinding=function(e){return{keys:A.normalizeKeys(e),selector:d(e),command:e.command,args:e.args||x.JSONExt.emptyObject}},e.matchKeyBinding=function(e,t,n){for(var i=null,r=!1,s=1/0,o=0,l=0,c=e.length;l<c;++l){var u=e[l],h=f(u.keys,t);if(0!==h)if(2!==h){var d=p(u.selector,n);if(!(-1===d||d>s)){var m=a.calculateSpecificity(u.selector);(!i||d<s||m>=o)&&(i=u,s=d,o=m)}}else r||-1===p(u.selector,n)||(r=!0)}return{exact:i,partial:r}},e.replayKeyEvent=function(e){e.target.dispatchEvent(function(e){var t=document.createEvent("Event"),n=e.bubbles||!0,i=e.cancelable||!0;return t.initEvent(e.type||"keydown",n,i),t.key=e.key||"",t.keyCode=e.keyCode||0,t.which=e.keyCode||0,t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.view=e.view||window,t}(e))},e.formatKey=function(e){return s.IS_MAC?t.hasOwnProperty(e)?t[e]:e:n.hasOwnProperty(e)?n[e]:e};var t={Backspace:"",Tab:"",Enter:"",Shift:"",Ctrl:"",Alt:"",Escape:"",PageUp:"",PageDown:"",End:"",Home:"",ArrowLeft:"",ArrowUp:"",ArrowRight:"",ArrowDown:"",Delete:"",Cmd:""},n={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},i=function(){return""},r=function(){return-1},o=function(){return!0},l=function(){return!1},c=function(){return{}},u=function(){};function h(e,t){return void 0===e?t:"function"==typeof e?e:function(){return e}}function d(e){if(-1!==e.selector.indexOf(","))throw new Error("Selector cannot contain commas: "+e.selector);if(!a.isValid(e.selector))throw new Error("Invalid selector: "+e.selector);return e.selector}function f(e,t){if(e.length<t.length)return 0;for(var n=0,i=t.length;n<i;++n)if(e[n]!==t[n])return 0;return e.length>t.length?2:1}function p(e,t){for(var n=t.target,i=t.currentTarget,r=0;null!==n;n=n.parentElement,++r){if(n.hasAttribute("data-lm-suppress-shortcuts"))return-1;if(n.hasAttribute("data-p-suppress-shortcuts"))return-1;if(a.matches(n,e))return r;if(n===i)return-1}return-1}}(T||(T={}));var E,C,D,O=function(e,t){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},O(e,t)},P=function(e){this.type="text",this.content=e},R=function(e,t,n,i){this.type="element",this.tag=e,this.attrs=t,this.children=n,this.renderer=i};function z(e){for(var t,n={},i=[],r=1,s=arguments.length;r<s;++r){var a=arguments[r];"string"==typeof a?i.push(new P(a)):a instanceof P||a instanceof R?i.push(a):a instanceof Array?o(i,a):1!==r&&2!==r||!a||"object"!=typeof a||("render"in a?t=a:n=a)}return new R(e,n,i,t);function o(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n];"string"==typeof r?e.push(new P(r)):(r instanceof P||r instanceof R)&&e.push(r)}}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})((function(e,t,n){return D.call(this,e,t,[],n||void 0)||this}),D=R),function(e){e.a=e.bind(void 0,"a"),e.abbr=e.bind(void 0,"abbr"),e.address=e.bind(void 0,"address"),e.area=e.bind(void 0,"area"),e.article=e.bind(void 0,"article"),e.aside=e.bind(void 0,"aside"),e.audio=e.bind(void 0,"audio"),e.b=e.bind(void 0,"b"),e.bdi=e.bind(void 0,"bdi"),e.bdo=e.bind(void 0,"bdo"),e.blockquote=e.bind(void 0,"blockquote"),e.br=e.bind(void 0,"br"),e.button=e.bind(void 0,"button"),e.canvas=e.bind(void 0,"canvas"),e.caption=e.bind(void 0,"caption"),e.cite=e.bind(void 0,"cite"),e.code=e.bind(void 0,"code"),e.col=e.bind(void 0,"col"),e.colgroup=e.bind(void 0,"colgroup"),e.data=e.bind(void 0,"data"),e.datalist=e.bind(void 0,"datalist"),e.dd=e.bind(void 0,"dd"),e.del=e.bind(void 0,"del"),e.dfn=e.bind(void 0,"dfn"),e.div=e.bind(void 0,"div"),e.dl=e.bind(void 0,"dl"),e.dt=e.bind(void 0,"dt"),e.em=e.bind(void 0,"em"),e.embed=e.bind(void 0,"embed"),e.fieldset=e.bind(void 0,"fieldset"),e.figcaption=e.bind(void 0,"figcaption"),e.figure=e.bind(void 0,"figure"),e.footer=e.bind(void 0,"footer"),e.form=e.bind(void 0,"form"),e.h1=e.bind(void 0,"h1"),e.h2=e.bind(void 0,"h2"),e.h3=e.bind(void 0,"h3"),e.h4=e.bind(void 0,"h4"),e.h5=e.bind(void 0,"h5"),e.h6=e.bind(void 0,"h6"),e.header=e.bind(void 0,"header"),e.hr=e.bind(void 0,"hr"),e.i=e.bind(void 0,"i"),e.iframe=e.bind(void 0,"iframe"),e.img=e.bind(void 0,"img"),e.input=e.bind(void 0,"input"),e.ins=e.bind(void 0,"ins"),e.kbd=e.bind(void 0,"kbd"),e.label=e.bind(void 0,"label"),e.legend=e.bind(void 0,"legend"),e.li=e.bind(void 0,"li"),e.main=e.bind(void 0,"main"),e.map=e.bind(void 0,"map"),e.mark=e.bind(void 0,"mark"),e.meter=e.bind(void 0,"meter"),e.nav=e.bind(void 0,"nav"),e.noscript=e.bind(void 0,"noscript"),e.object=e.bind(void 0,"object"),e.ol=e.bind(void 0,"ol"),e.optgroup=e.bind(void 0,"optgroup"),e.option=e.bind(void 0,"option"),e.output=e.bind(void 0,"output"),e.p=e.bind(void 0,"p"),e.param=e.bind(void 0,"param"),e.pre=e.bind(void 0,"pre"),e.progress=e.bind(void 0,"progress"),e.q=e.bind(void 0,"q"),e.rp=e.bind(void 0,"rp"),e.rt=e.bind(void 0,"rt"),e.ruby=e.bind(void 0,"ruby"),e.s=e.bind(void 0,"s"),e.samp=e.bind(void 0,"samp"),e.section=e.bind(void 0,"section"),e.select=e.bind(void 0,"select"),e.small=e.bind(void 0,"small"),e.source=e.bind(void 0,"source"),e.span=e.bind(void 0,"span"),e.strong=e.bind(void 0,"strong"),e.sub=e.bind(void 0,"sub"),e.summary=e.bind(void 0,"summary"),e.sup=e.bind(void 0,"sup"),e.table=e.bind(void 0,"table"),e.tbody=e.bind(void 0,"tbody"),e.td=e.bind(void 0,"td"),e.textarea=e.bind(void 0,"textarea"),e.tfoot=e.bind(void 0,"tfoot"),e.th=e.bind(void 0,"th"),e.thead=e.bind(void 0,"thead"),e.time=e.bind(void 0,"time"),e.title=e.bind(void 0,"title"),e.tr=e.bind(void 0,"tr"),e.track=e.bind(void 0,"track"),e.u=e.bind(void 0,"u"),e.ul=e.bind(void 0,"ul"),e.var_=e.bind(void 0,"var"),e.video=e.bind(void 0,"video"),e.wbr=e.bind(void 0,"wbr")}(z||(z={})),function(e){e.realize=function(e){return C.createDOMNode(e)},e.render=function(e,t){var n=C.hostMap.get(t)||[],i=C.asContentArray(e);C.hostMap.set(t,i),C.updateContent(t,n,i)}}(E||(E={})),function(e){function t(e){var n=arguments[1]||null,r=arguments[2]||null;if(n)n.insertBefore(t(e),r);else{if("text"===e.type)return document.createTextNode(e.content);if(function(e,t){for(var n in t)n in i||("on"===n.substr(0,2)?e[n]=t[n]:e.setAttribute(n,t[n]));void 0!==t.className&&e.setAttribute("class",t.className),void 0!==t.htmlFor&&e.setAttribute("for",t.htmlFor),t.dataset&&function(e,t){for(var n in t)e.setAttribute("data-"+n,t[n])}(e,t.dataset),t.style&&function(e,t){var n,i=e.style;for(n in t)i[n]=t[n]}(e,t.style)}(n=document.createElement(e.tag),e.attrs),e.renderer)return e.renderer.render(n,{attrs:e.attrs,children:e.children}),n;for(var s=0,a=e.children.length;s<a;++s)t(e.children[s],n)}return n}function n(e,t,i,r){for(var s=t.length-1;s>=i;--s){var a=t[s],o=r?e.lastChild:e.childNodes[s];"text"===a.type||(a.renderer&&a.renderer.unrender?a.renderer.unrender(o,{attrs:a.attrs,children:a.children}):n(o,a.children,0,!1)),r&&e.removeChild(o)}}e.hostMap=new WeakMap,e.asContentArray=function(e){return e?e instanceof Array?e:[e]:[]},e.createDOMNode=t,e.updateContent=function e(i,s,a){if(s!==a){for(var o=function(e,t){for(var n=e.firstChild,i=Object.create(null),r=0,s=t;r<s.length;r++){var a=s[r];"element"===a.type&&a.attrs.key&&(i[a.attrs.key]={vNode:a,element:n}),n=n.nextSibling}return i}(i,s),c=s.slice(),u=i.firstChild,h=a.length,d=0;d<h;++d)if(d>=c.length)t(a[d],i);else{var f=c[d],p=a[d];if(f!==p)if("text"!==f.type||"text"!==p.type)if("text"!==f.type&&"text"!==p.type)if(!f.renderer==!p.renderer){var m=p.attrs.key;if(m&&m in o){var _=o[m];_.vNode!==f&&(l.Rw.move(c,c.indexOf(_.vNode,d+1),d),i.insertBefore(_.element,u),f=_.vNode,u=_.element)}if(f!==p){var g=f.attrs.key;g&&g!==m?(l.Rw.insert(c,d,p),t(p,i,u)):f.tag===p.tag?(r(u,f.attrs,p.attrs),p.renderer?p.renderer.render(u,{attrs:p.attrs,children:p.children}):e(u,f.children,p.children),u=u.nextSibling):(l.Rw.insert(c,d,p),t(p,i,u))}else u=u.nextSibling}else l.Rw.insert(c,d,p),t(p,i,u);else l.Rw.insert(c,d,p),t(p,i,u);else u.textContent!==p.content&&(u.textContent=p.content),u=u.nextSibling;else u=u.nextSibling}n(i,c,h,!0)}};var i={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function r(e,t,n){if(t!==n){var r;for(r in t)r in i||r in n||("on"===r.substr(0,2)?e[r]=null:e.removeAttribute(r));for(r in n)r in i||t[r]===n[r]||("on"===r.substr(0,2)?e[r]=n[r]:e.setAttribute(r,n[r]));t.className!==n.className&&(void 0!==n.className?e.setAttribute("class",n.className):e.removeAttribute("class")),t.htmlFor!==n.htmlFor&&(void 0!==n.htmlFor?e.setAttribute("for",n.htmlFor):e.removeAttribute("for")),t.dataset!==n.dataset&&function(e,t,n){for(var i in t)i in n||e.removeAttribute("data-"+i);for(var r in n)t[r]!==n[r]&&e.setAttribute("data-"+r,n[r])}(e,t.dataset||{},n.dataset||{}),t.style!==n.style&&function(e,t,n){var i,r=e.style;for(i in t)i in n||(r[i]="");for(i in n)t[i]!==n[i]&&(r[i]=n[i])}(e,t.style||{},n.style||{})}}}(C||(C={}));var B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},B(e,t)};function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var F,N=function(){return N=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},N.apply(this,arguments)},I=function(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1};!function(e){e.calc=function(e,t){var n=e.length;if(0===n)return t;for(var i=0,r=0,s=0,a=0,o=0,l=0;l<n;++l){var c=(y=e[l]).minSize,u=y.maxSize,h=y.sizeHint;y.done=!1,y.size=Math.max(c,Math.min(h,u)),s+=y.size,i+=c,r+=u,y.stretch>0&&(a+=y.stretch,o++)}if(t===s)return 0;if(t<=i){for(l=0;l<n;++l)(y=e[l]).size=y.minSize;return t-i}if(t>=r){for(l=0;l<n;++l)(y=e[l]).size=y.maxSize;return t-r}var d=.01,f=n;if(t<s){for(var p=s-t;o>0&&p>d;){var m=p,_=a;for(l=0;l<n;++l)if(!(y=e[l]).done&&0!==y.stretch){var g=y.stretch*m/_;y.size-g<=y.minSize?(p-=y.size-y.minSize,a-=y.stretch,y.size=y.minSize,y.done=!0,f--,o--):(p-=g,y.size-=g)}}for(;f>0&&p>d;)for(g=p/f,l=0;l<n;++l)(y=e[l]).done||(y.size-g<=y.minSize?(p-=y.size-y.minSize,y.size=y.minSize,y.done=!0,f--):(p-=g,y.size-=g))}else{for(p=t-s;o>0&&p>d;)for(m=p,_=a,l=0;l<n;++l)(y=e[l]).done||0===y.stretch||(g=y.stretch*m/_,y.size+g>=y.maxSize?(p-=y.maxSize-y.size,a-=y.stretch,y.size=y.maxSize,y.done=!0,f--,o--):(p-=g,y.size+=g));for(;f>0&&p>d;)for(g=p/f,l=0;l<n;++l){var y;(y=e[l]).done||(y.size+g>=y.maxSize?(p-=y.maxSize-y.size,y.size=y.maxSize,y.done=!0,f--):(p-=g,y.size+=g))}}return 0},e.adjust=function(e,t,n){0!==e.length&&0!==n&&(n>0?function(e,t,n){for(var i=0,r=0;r<=t;++r)i+=(c=e[r]).maxSize-c.size;for(var s=0,a=(r=t+1,e.length);r<a;++r)s+=(c=e[r]).size-c.minSize;var o=n=Math.min(n,i,s);for(r=t;r>=0&&o>0;--r)(u=(c=e[r]).maxSize-c.size)>=o?(c.sizeHint=c.size+o,o=0):(c.sizeHint=c.size+u,o-=u);var l=n;for(r=t+1,a=e.length;r<a&&l>0;++r){var c,u;(u=(c=e[r]).size-c.minSize)>=l?(c.sizeHint=c.size-l,l=0):(c.sizeHint=c.size-u,l-=u)}}(e,t,n):function(e,t,n){for(var i=0,r=t+1,s=e.length;r<s;++r)i+=(c=e[r]).maxSize-c.size;var a=0;for(r=0;r<=t;++r)a+=(c=e[r]).size-c.minSize;var o=n=Math.min(n,i,a);for(r=t+1,s=e.length;r<s&&o>0;++r)(u=(c=e[r]).maxSize-c.size)>=o?(c.sizeHint=c.size+o,o=0):(c.sizeHint=c.size+u,o-=u);var l=n;for(r=t;r>=0&&l>0;--r){var c,u;(u=(c=e[r]).size-c.minSize)>=l?(c.sizeHint=c.size-l,l=0):(c.sizeHint=c.size-u,l-=u)}}(e,t,-n))}}(F||(F={}));var H,j=function(){function e(e){this._label="",this._caption="",this._mnemonic=-1,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new f(this),this._isDisposed=!1,this.owner=e.owner,void 0!==e.label&&(this._label=e.label),void 0!==e.mnemonic&&(this._mnemonic=e.mnemonic),void 0!==e.icon?"string"==typeof e.icon?(this._icon=null,this._iconClass=e.icon):this._icon=e.icon:this._icon=null,void 0!==e.iconClass&&(this._iconClass=e.iconClass),void 0!==e.iconLabel&&(this._iconLabel=e.iconLabel),void 0!==e.iconRenderer&&(this._icon=e.iconRenderer),void 0!==e.caption&&(this._caption=e.caption),void 0!==e.className&&(this._className=e.className),void 0!==e.closable&&(this._closable=e.closable),this._dataset=e.dataset||{}}return Object.defineProperty(e.prototype,"changed",{get:function(){return this._changed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mnemonic",{get:function(){return this._mnemonic},set:function(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return null===this._icon?this.iconClass:this._icon},set:function(e){if("string"==typeof e)this._icon=null,this.iconClass=e;else{if(this._icon===e)return;this._icon=e,this._changed.emit(void 0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconClass",{get:function(){return this._iconClass},set:function(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconLabel",{get:function(){return this._iconLabel},set:function(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconRenderer",{get:function(){return this._icon||void 0},set:function(e){this.icon=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this._caption},set:function(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closable",{get:function(){return this._closable},set:function(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataset",{get:function(){return this._dataset},set:function(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this._isDisposed=!0,f.clearData(this))},e}(),U=function(){function e(t){void 0===t&&(t={}),this._flags=0,this._layout=null,this._parent=null,this._disposed=new f(this),this._hiddenMode=e.HiddenMode.Display,this.node=H.createNode(t),this.addClass("lm-Widget"),this.addClass("p-Widget")}return e.prototype.dispose=function(){this.isDisposed||(this.setFlag(e.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&e.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),f.clearData(this),u.MessageLoop.clearData(this),h.clearData(this))},Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.testFlag(e.Flag.IsDisposed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAttached",{get:function(){return this.testFlag(e.Flag.IsAttached)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return this.testFlag(e.Flag.IsHidden)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.testFlag(e.Flag.IsVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return H.titleProperty.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.node.id},set:function(e){this.node.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataset",{get:function(){return this.node.dataset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenMode",{get:function(){return this._hiddenMode},set:function(t){this._hiddenMode!==t&&(this.isHidden&&this._toggleHidden(!1),t==e.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=t,this.isHidden&&this._toggleHidden(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(t){if(this._parent!==t){if(t&&this.contains(t))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){var n=new e.ChildMessage("child-removed",this);u.MessageLoop.sendMessage(this._parent,n)}this._parent=t,this._parent&&!this._parent.isDisposed&&(n=new e.ChildMessage("child-added",this),u.MessageLoop.sendMessage(this._parent,n)),this.isDisposed||u.MessageLoop.sendMessage(this,e.Msg.ParentChanged)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(t){if(this._layout!==t){if(this.testFlag(e.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(t.parent)throw new Error("Cannot change layout parent.");this._layout=t,t.parent=this}},enumerable:!0,configurable:!0}),e.prototype.children=function(){return this._layout?this._layout.iter():(0,l.Ie)()},e.prototype.contains=function(e){for(var t=e;t;t=t._parent)if(t===this)return!0;return!1},e.prototype.hasClass=function(e){return this.node.classList.contains(e)},e.prototype.addClass=function(e){this.node.classList.add(e)},e.prototype.removeClass=function(e){this.node.classList.remove(e)},e.prototype.toggleClass=function(e,t){return!0===t?(this.node.classList.add(e),!0):!1===t?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)},e.prototype.update=function(){u.MessageLoop.postMessage(this,e.Msg.UpdateRequest)},e.prototype.fit=function(){u.MessageLoop.postMessage(this,e.Msg.FitRequest)},e.prototype.activate=function(){u.MessageLoop.postMessage(this,e.Msg.ActivateRequest)},e.prototype.close=function(){u.MessageLoop.sendMessage(this,e.Msg.CloseRequest)},e.prototype.show=function(){if(this.testFlag(e.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||u.MessageLoop.sendMessage(this,e.Msg.BeforeShow),this.clearFlag(e.Flag.IsHidden),this.node.removeAttribute("aria-hidden"),this._toggleHidden(!1),!this.isAttached||this.parent&&!this.parent.isVisible||u.MessageLoop.sendMessage(this,e.Msg.AfterShow),this.parent)){var t=new e.ChildMessage("child-shown",this);u.MessageLoop.sendMessage(this.parent,t)}},e.prototype.hide=function(){if(!this.testFlag(e.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||u.MessageLoop.sendMessage(this,e.Msg.BeforeHide),this.setFlag(e.Flag.IsHidden),this.node.setAttribute("aria-hidden","true"),this._toggleHidden(!0),!this.isAttached||this.parent&&!this.parent.isVisible||u.MessageLoop.sendMessage(this,e.Msg.AfterHide),this.parent)){var t=new e.ChildMessage("child-hidden",this);u.MessageLoop.sendMessage(this.parent,t)}},e.prototype.setHidden=function(e){e?this.hide():this.show()},e.prototype.testFlag=function(e){return!!(this._flags&e)},e.prototype.setFlag=function(e){this._flags|=e},e.prototype.clearFlag=function(e){this._flags&=~e},e.prototype.processMessage=function(t){switch(t.type){case"resize":this.notifyLayout(t),this.onResize(t);break;case"update-request":this.notifyLayout(t),this.onUpdateRequest(t);break;case"fit-request":this.notifyLayout(t),this.onFitRequest(t);break;case"before-show":this.notifyLayout(t),this.onBeforeShow(t);break;case"after-show":this.setFlag(e.Flag.IsVisible),this.notifyLayout(t),this.onAfterShow(t);break;case"before-hide":this.notifyLayout(t),this.onBeforeHide(t);break;case"after-hide":this.clearFlag(e.Flag.IsVisible),this.notifyLayout(t),this.onAfterHide(t);break;case"before-attach":this.notifyLayout(t),this.onBeforeAttach(t);break;case"after-attach":this.isHidden||this.parent&&!this.parent.isVisible||this.setFlag(e.Flag.IsVisible),this.setFlag(e.Flag.IsAttached),this.notifyLayout(t),this.onAfterAttach(t);break;case"before-detach":this.notifyLayout(t),this.onBeforeDetach(t);break;case"after-detach":this.clearFlag(e.Flag.IsVisible),this.clearFlag(e.Flag.IsAttached),this.notifyLayout(t),this.onAfterDetach(t);break;case"activate-request":this.notifyLayout(t),this.onActivateRequest(t);break;case"close-request":this.notifyLayout(t),this.onCloseRequest(t);break;case"child-added":this.notifyLayout(t),this.onChildAdded(t);break;case"child-removed":this.notifyLayout(t),this.onChildRemoved(t);break;default:this.notifyLayout(t)}},e.prototype.notifyLayout=function(e){this._layout&&this._layout.processParentMessage(e)},e.prototype.onCloseRequest=function(t){this.parent?this.parent=null:this.isAttached&&e.detach(this)},e.prototype.onResize=function(e){},e.prototype.onUpdateRequest=function(e){},e.prototype.onFitRequest=function(e){},e.prototype.onActivateRequest=function(e){},e.prototype.onBeforeShow=function(e){},e.prototype.onAfterShow=function(e){},e.prototype.onBeforeHide=function(e){},e.prototype.onAfterHide=function(e){},e.prototype.onBeforeAttach=function(e){},e.prototype.onAfterAttach=function(e){},e.prototype.onBeforeDetach=function(e){},e.prototype.onAfterDetach=function(e){},e.prototype.onChildAdded=function(e){},e.prototype.onChildRemoved=function(e){},e.prototype._toggleHidden=function(t){if(t)switch(this._hiddenMode){case e.HiddenMode.Display:this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden");break;case e.HiddenMode.Scale:this.node.style.transform="scale(0)";break;case e.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1"}else switch(this._hiddenMode){case e.HiddenMode.Display:this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden");break;case e.HiddenMode.Scale:this.node.style.transform="";break;case e.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex=""}},e}();!function(e){var t,n,i;(t=e.HiddenMode||(e.HiddenMode={}))[t.Display=0]="Display",t[t.Scale=1]="Scale",t[t.ContentVisibility=2]="ContentVisibility",(n=e.Flag||(e.Flag={}))[n.IsDisposed=1]="IsDisposed",n[n.IsAttached=2]="IsAttached",n[n.IsHidden=4]="IsHidden",n[n.IsVisible=8]="IsVisible",n[n.DisallowLayout=16]="DisallowLayout",(i=e.Msg||(e.Msg={})).BeforeShow=new u.Message("before-show"),i.AfterShow=new u.Message("after-show"),i.BeforeHide=new u.Message("before-hide"),i.AfterHide=new u.Message("after-hide"),i.BeforeAttach=new u.Message("before-attach"),i.AfterAttach=new u.Message("after-attach"),i.BeforeDetach=new u.Message("before-detach"),i.AfterDetach=new u.Message("after-detach"),i.ParentChanged=new u.Message("parent-changed"),i.UpdateRequest=new u.ConflatableMessage("update-request"),i.FitRequest=new u.ConflatableMessage("fit-request"),i.ActivateRequest=new u.ConflatableMessage("activate-request"),i.CloseRequest=new u.ConflatableMessage("close-request");var r=function(e){function t(t,n){var i=e.call(this,t)||this;return i.child=n,i}return Y(t,e),t}(u.Message);e.ChildMessage=r;var s=function(e){function t(t,n){var i=e.call(this,"resize")||this;return i.width=t,i.height=n,i}return Y(t,e),t}(u.Message);e.ResizeMessage=s,function(e){e.UnknownSize=new e(-1,-1)}(s=e.ResizeMessage||(e.ResizeMessage={})),e.attach=function(t,n,i){if(void 0===i&&(i=null),t.parent)throw new Error("Cannot attach a child widget.");if(t.isAttached||t.node.isConnected)throw new Error("Widget is already attached.");if(!n.isConnected)throw new Error("Host is not attached.");u.MessageLoop.sendMessage(t,e.Msg.BeforeAttach),n.insertBefore(t.node,i),u.MessageLoop.sendMessage(t,e.Msg.AfterAttach)},e.detach=function(t){if(t.parent)throw new Error("Cannot detach a child widget.");if(!t.isAttached||!t.node.isConnected)throw new Error("Widget is not attached.");u.MessageLoop.sendMessage(t,e.Msg.BeforeDetach),t.node.parentNode.removeChild(t.node),u.MessageLoop.sendMessage(t,e.Msg.AfterDetach)}}(U||(U={})),function(e){e.titleProperty=new h({name:"title",create:function(e){return new j({owner:e})}}),e.createNode=function(e){return e.node||document.createElement(e.tag||"div")}}(H||(H={}));var W=function(){function e(e){void 0===e&&(e={}),this._disposed=!1,this._parent=null,this._fitPolicy=e.fitPolicy||"set-min-size"}return e.prototype.dispose=function(){this._parent=null,this._disposed=!0,f.clearData(this),h.clearData(this)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitPolicy",{get:function(){return this._fitPolicy},set:function(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){var t=this._parent.node.style;t.minWidth="",t.minHeight="",t.maxWidth="",t.maxHeight="",this._parent.fit()}},enumerable:!0,configurable:!0}),e.prototype.processParentMessage=function(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e)}},e.prototype.init=function(){var e=this;(0,l.__)(this,(function(t){t.parent=e.parent}))},e.prototype.onResize=function(e){(0,l.__)(this,(function(e){u.MessageLoop.sendMessage(e,U.ResizeMessage.UnknownSize)}))},e.prototype.onUpdateRequest=function(e){(0,l.__)(this,(function(e){u.MessageLoop.sendMessage(e,U.ResizeMessage.UnknownSize)}))},e.prototype.onBeforeAttach=function(e){(0,l.__)(this,(function(t){u.MessageLoop.sendMessage(t,e)}))},e.prototype.onAfterAttach=function(e){(0,l.__)(this,(function(t){u.MessageLoop.sendMessage(t,e)}))},e.prototype.onBeforeDetach=function(e){(0,l.__)(this,(function(t){u.MessageLoop.sendMessage(t,e)}))},e.prototype.onAfterDetach=function(e){(0,l.__)(this,(function(t){u.MessageLoop.sendMessage(t,e)}))},e.prototype.onBeforeShow=function(e){(0,l.__)(this,(function(t){t.isHidden||u.MessageLoop.sendMessage(t,e)}))},e.prototype.onAfterShow=function(e){(0,l.__)(this,(function(t){t.isHidden||u.MessageLoop.sendMessage(t,e)}))},e.prototype.onBeforeHide=function(e){(0,l.__)(this,(function(t){t.isHidden||u.MessageLoop.sendMessage(t,e)}))},e.prototype.onAfterHide=function(e){(0,l.__)(this,(function(t){t.isHidden||u.MessageLoop.sendMessage(t,e)}))},e.prototype.onChildRemoved=function(e){this.removeWidget(e.child)},e.prototype.onFitRequest=function(e){},e.prototype.onChildShown=function(e){},e.prototype.onChildHidden=function(e){},e}();!function(e){e.getHorizontalAlignment=function(e){return G.horizontalAlignmentProperty.get(e)},e.setHorizontalAlignment=function(e,t){G.horizontalAlignmentProperty.set(e,t)},e.getVerticalAlignment=function(e){return G.verticalAlignmentProperty.get(e)},e.setVerticalAlignment=function(e,t){G.verticalAlignmentProperty.set(e,t)}}(W||(W={}));var G,V=function(){function e(e){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=e,this.widget.node.style.position="absolute"}return e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height=""}},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeight",{get:function(){return this._maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return this.widget.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.widget.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAttached",{get:function(){return this.widget.isAttached},enumerable:!0,configurable:!0}),e.prototype.fit=function(){var e=r.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight},e.prototype.update=function(e,t,n,i){var r=Math.max(this._minWidth,Math.min(n,this._maxWidth)),s=Math.max(this._minHeight,Math.min(i,this._maxHeight));if(r<n)switch(W.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(n-r)/2;break;case"right":e+=n-r;break;default:throw"unreachable"}if(s<i)switch(W.getVerticalAlignment(this.widget)){case"top":break;case"center":t+=(i-s)/2;break;case"bottom":t+=i-s;break;default:throw"unreachable"}var a=!1,o=this.widget.node.style;if(this._top!==t&&(this._top=t,o.top=t+"px"),this._left!==e&&(this._left=e,o.left=e+"px"),this._width!==r&&(a=!0,this._width=r,o.width=r+"px"),this._height!==s&&(a=!0,this._height=s,o.height=s+"px"),a){var l=new U.ResizeMessage(r,s);u.MessageLoop.sendMessage(this.widget,l)}},e}();!function(e){function t(e){e.parent&&e.parent.layout&&e.parent.update()}e.horizontalAlignmentProperty=new h({name:"horizontalAlignment",create:function(){return"center"},changed:t}),e.verticalAlignmentProperty=new h({name:"verticalAlignment",create:function(){return"top"},changed:t})}(G||(G={}));var q,X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._widgets=[],t}return Y(t,e),t.prototype.dispose=function(){for(;this._widgets.length>0;)this._widgets.pop().dispose();e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return(0,l.tJ)(this._widgets)},t.prototype.addWidget=function(e){this.insertWidget(this._widgets.length,e)},t.prototype.insertWidget=function(e,t){t.parent=this.parent;var n=this._widgets.indexOf(t),i=Math.max(0,Math.min(e,this._widgets.length));if(-1===n)return l.Rw.insert(this._widgets,i,t),void(this.parent&&this.attachWidget(i,t));i===this._widgets.length&&i--,n!==i&&(l.Rw.move(this._widgets,n,i),this.parent&&this.moveWidget(n,i,t))},t.prototype.removeWidget=function(e){this.removeWidgetAt(this._widgets.indexOf(e))},t.prototype.removeWidgetAt=function(e){var t=l.Rw.removeAt(this._widgets,e);t&&this.parent&&this.detachWidget(e,t)},t.prototype.init=function(){var t=this;e.prototype.init.call(this),(0,l.__)(this,(function(e,n){t.attachWidget(n,e)}))},t.prototype.attachWidget=function(e,t){var n=this.parent.node.children[e];this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeAttach),this.parent.node.insertBefore(t.node,n),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterAttach)},t.prototype.moveWidget=function(e,t,n){this.parent.isAttached&&u.MessageLoop.sendMessage(n,U.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&u.MessageLoop.sendMessage(n,U.Msg.AfterDetach);var i=this.parent.node.children[t];this.parent.isAttached&&u.MessageLoop.sendMessage(n,U.Msg.BeforeAttach),this.parent.node.insertBefore(n.node,i),this.parent.isAttached&&u.MessageLoop.sendMessage(n,U.Msg.AfterAttach)},t.prototype.detachWidget=function(e,t){this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterDetach)},t}(W);!function(e){e.clampDimension=function(e){return Math.max(0,Math.floor(e))}}(q||(q={}));var $,J=q,K=function(e){function t(t){var n=e.call(this)||this;return n.widgetOffset=0,n._fixed=0,n._spacing=4,n._dirty=!1,n._hasNormedSizes=!1,n._sizers=[],n._items=[],n._handles=[],n._box=null,n._alignment="start",n._orientation="horizontal",n.renderer=t.renderer,void 0!==t.orientation&&(n._orientation=t.orientation),void 0!==t.alignment&&(n._alignment=t.alignment),void 0!==t.spacing&&(n._spacing=q.clampDimension(t.spacing)),n}return Y(t,e),t.prototype.dispose=function(){(0,l.__)(this._items,(function(e){e.dispose()})),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){e=q.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handles",{get:function(){return this._handles},enumerable:!0,configurable:!0}),t.prototype.absoluteSizes=function(){return this._sizers.map((function(e){return e.size}))},t.prototype.relativeSizes=function(){return $.normalize(this._sizers.map((function(e){return e.size})))},t.prototype.setRelativeSizes=function(e,t){void 0===t&&(t=!0);for(var n=this._sizers.length,i=e.slice(0,n);i.length<n;)i.push(0);for(var r=$.normalize(i),s=0;s<n;++s){var a=this._sizers[s];a.sizeHint=r[s],a.size=r[s]}this._hasNormedSizes=!0,t&&this.parent&&this.parent.update()},t.prototype.moveHandle=function(e,t){var n,i=this._handles[e];if(i&&!i.classList.contains("lm-mod-hidden")&&0!=(n="horizontal"===this._orientation?t-i.offsetLeft:t-i.offsetTop)){for(var r=0,s=this._sizers;r<s.length;r++){var a=s[r];a.size>0&&(a.sizeHint=a.size)}F.adjust(this._sizers,e,n),this.parent&&this.parent.update()}},t.prototype.init=function(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,e.prototype.init.call(this)},t.prototype.attachWidget=function(e,t){var n=new V(t),i=$.createHandle(this.renderer),r=$.averageSize(this._sizers),s=$.createSizer(r);l.Rw.insert(this._items,e,n),l.Rw.insert(this._sizers,e,s),l.Rw.insert(this._handles,e,i),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.node.appendChild(i),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterAttach),this.parent.fit()},t.prototype.moveWidget=function(e,t,n){l.Rw.move(this._items,e,t),l.Rw.move(this._sizers,e,t),l.Rw.move(this._handles,e,t),this.parent.fit()},t.prototype.detachWidget=function(e,t){var n=l.Rw.removeAt(this._items,e),i=l.Rw.removeAt(this._handles,e);l.Rw.removeAt(this._sizers,e),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.node.removeChild(i),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterDetach),n.dispose(),this.parent.fit()},t.prototype.onBeforeShow=function(t){e.prototype.onBeforeShow.call(this,t),this.parent.update()},t.prototype.onBeforeAttach=function(t){e.prototype.onBeforeAttach.call(this,t),this.parent.fit()},t.prototype.onChildShown=function(e){this.parent.fit()},t.prototype.onChildHidden=function(e){this.parent.fit()},t.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},t.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},t.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},t.prototype.updateItemPosition=function(e,t,n,i,r,s,a){var o=this._items[e];if(!o.isHidden){var l=this._handles[e].style;t?(n+=this.widgetOffset,o.update(n,i,a,r),n+=a,l.top=i+"px",l.left=n+"px",l.width=this._spacing+"px",l.height=r+"px"):(i+=this.widgetOffset,o.update(n,i,s,a),i+=a,l.top=i+"px",l.left=n+"px",l.width=s+"px",l.height=this._spacing+"px")}},t.prototype._fit=function(){for(var e=0,n=-1,i=0,s=this._items.length;i<s;++i)this._items[i].isHidden?(this._handles[i].classList.add("lm-mod-hidden"),this._handles[i].classList.add("p-mod-hidden")):(this._handles[i].classList.remove("lm-mod-hidden"),this._handles[i].classList.remove("p-mod-hidden"),n=i,e++);-1!==n&&(this._handles[n].classList.add("lm-mod-hidden"),this._handles[n].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;var a="horizontal"===this._orientation,o=a?this._fixed:0,l=a?0:this._fixed;for(i=0,s=this._items.length;i<s;++i){var c=this._items[i],h=this._sizers[i];h.size>0&&(h.sizeHint=h.size),c.isHidden?(h.minSize=0,h.maxSize=0):(c.fit(),h.stretch=t.getStretch(c.widget),a?(h.minSize=c.minWidth,h.maxSize=c.maxWidth,o+=c.minWidth,l=Math.max(l,c.minHeight)):(h.minSize=c.minHeight,h.maxSize=c.maxHeight,l+=c.minHeight,o=Math.max(o,c.minWidth)))}var d=this._box=r.boxSizing(this.parent.node);o+=d.horizontalSum,l+=d.verticalSum;var f=this.parent.node.style;f.minWidth=o+"px",f.minHeight=l+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,U.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,U.Msg.UpdateRequest)},t.prototype._update=function(e,t){this._dirty=!1;for(var n=0,i=0,s=this._items.length;i<s;++i)n+=+!this._items[i].isHidden;if(0!==n||0!==this.widgetOffset){e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=r.boxSizing(this.parent.node));var a=this._box.paddingTop,o=this._box.paddingLeft,l=e-this._box.horizontalSum,c=t-this._box.verticalSum,u=0,h=0,d="horizontal"===this._orientation;if(n>0){var f;if(f=d?Math.max(0,l-this._fixed):Math.max(0,c-this._fixed),this._hasNormedSizes){for(var p=0,m=this._sizers;p<m.length;p++)m[p].sizeHint*=f;this._hasNormedSizes=!1}var _=F.calc(this._sizers,f);if(_>0)switch(this._alignment){case"start":break;case"center":u=0,h=_/2;break;case"end":u=0,h=_;break;case"justify":u=_/n,h=0;break;default:throw"unreachable"}}for(i=0,s=this._items.length;i<s;++i){var g=this._items[i].isHidden?0:this._sizers[i].size+u;this.updateItemPosition(i,d,d?o+h:o,d?a:a+h,c,l,g);var y=this.widgetOffset+(this._handles[i].classList.contains("lm-mod-hidden")?0:this._spacing);d?o+=g+y:a+=g+y}}},t}(X);!function(e){e.getStretch=function(e){return $.stretchProperty.get(e)},e.setStretch=function(e,t){$.stretchProperty.set(e,t)}}(K||(K={})),function(e){e.stretchProperty=new h({name:"stretch",create:function(){return 0},coerce:function(e,t){return Math.max(0,Math.floor(t))},changed:function(e){e.parent&&e.parent.layout instanceof K&&e.parent.fit()}}),e.createSizer=function(e){var t=new I;return t.sizeHint=Math.floor(e),t},e.createHandle=function(e){var t=e.createHandle();return t.style.position="absolute",t},e.averageSize=function(e){return e.reduce((function(e,t){return e+t.size}),0)/e.length||0},e.normalize=function(e){var t=e.length;if(0===t)return[];var n=e.reduce((function(e,t){return e+Math.abs(t)}),0);return 0===n?e.map((function(e){return 1/t})):e.map((function(e){return e/n}))}}($||($={}));var Z,Q=function(e){function t(t){var n=e.call(this,N(N({},t),{orientation:t.orientation||"vertical"}))||this;return n._titles=[],n.titleSpace=t.titleSpace||22,n}return Y(t,e),Object.defineProperty(t.prototype,"titleSpace",{get:function(){return this.widgetOffset},set:function(e){e=J.clampDimension(e),this.widgetOffset!==e&&(this.widgetOffset=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titles",{get:function(){return this._titles},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this._titles.length=0,e.prototype.dispose.call(this))},t.prototype.updateTitle=function(e,t){var n=this._titles[e],i=n.classList.contains("lm-mod-expanded"),r=Z.createTitle(this.renderer,t.title,i);this._titles[e]=r,this.parent.node.replaceChild(r,n)},t.prototype.attachWidget=function(t,n){var i=Z.createTitle(this.renderer,n.title);l.Rw.insert(this._titles,t,i),this.parent.node.appendChild(i),n.node.setAttribute("role","region"),n.node.setAttribute("aria-labelledby",i.id),e.prototype.attachWidget.call(this,t,n)},t.prototype.moveWidget=function(t,n,i){l.Rw.move(this._titles,t,n),e.prototype.moveWidget.call(this,t,n,i)},t.prototype.detachWidget=function(t,n){var i=l.Rw.removeAt(this._titles,t);this.parent.node.removeChild(i),e.prototype.detachWidget.call(this,t,n)},t.prototype.updateItemPosition=function(t,n,i,r,s,a,o){var l=this._titles[t].style;l.top=r+"px",l.left=i+"px",l.height=this.widgetOffset+"px",l.width=n?s+"px":a+"px",e.prototype.updateItemPosition.call(this,t,n,i,r,s,a,o)},t}(K);!function(e){e.createTitle=function(e,t,n){void 0===n&&(n=!0);var i=e.createSectionTitle(t);return i.style.position="absolute",i.setAttribute("aria-label",t.label+" Section"),i.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-controls",t.owner.id),n&&i.classList.add("lm-mod-expanded"),i}}(Z||(Z={}));var ee,te=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.addClass("lm-Panel"),n.addClass("p-Panel"),n.layout=ee.createLayout(t),n}return Y(t,e),Object.defineProperty(t.prototype,"widgets",{get:function(){return this.layout.widgets},enumerable:!0,configurable:!0}),t.prototype.addWidget=function(e){this.layout.addWidget(e)},t.prototype.insertWidget=function(e,t){this.layout.insertWidget(e,t)},t}(U);!function(e){e.createLayout=function(e){return e.layout||new X}}(ee||(ee={}));var ne,ie=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,{layout:ne.createLayout(t)})||this;return n._handleMoved=new f(n),n._pressData=null,n.addClass("lm-SplitPanel"),n.addClass("p-SplitPanel"),n}return Y(t,e),t.prototype.dispose=function(){this._releaseMouse(),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"orientation",{get:function(){return this.layout.orientation},set:function(e){this.layout.orientation=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(e){this.layout.alignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(e){this.layout.spacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleMoved",{get:function(){return this._handleMoved},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handles",{get:function(){return this.layout.handles},enumerable:!0,configurable:!0}),t.prototype.relativeSizes=function(){return this.layout.relativeSizes()},t.prototype.setRelativeSizes=function(e,t){void 0===t&&(t=!0),this.layout.setRelativeSizes(e,t)},t.prototype.handleEvent=function(e){switch(e.type){case"mousedown":case"pointerdown":this._evtMouseDown(e);break;case"mousemove":case"pointermove":this._evtMouseMove(e);break;case"mouseup":case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()},t.prototype.onChildAdded=function(e){e.child.addClass("lm-SplitPanel-child"),e.child.addClass("p-SplitPanel-child"),this._releaseMouse()},t.prototype.onChildRemoved=function(e){e.child.removeClass("lm-SplitPanel-child"),e.child.removeClass("p-SplitPanel-child"),this._releaseMouse()},t.prototype._evtKeyDown=function(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),27===e.keyCode&&this._releaseMouse()},t.prototype._evtMouseDown=function(e){if(0===e.button){var t=this.layout,n=l.Rw.findFirstIndex(t.handles,(function(t){return t.contains(e.target)}));if(-1!==n){var i;e.preventDefault(),e.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);var r=t.handles[n],s=r.getBoundingClientRect();i="horizontal"===t.orientation?e.clientX-s.left:e.clientY-s.top;var a=window.getComputedStyle(r),o=b.overrideCursor(a.cursor);this._pressData={index:n,delta:i,override:o}}}},t.prototype._evtMouseMove=function(e){var t;e.preventDefault(),e.stopPropagation();var n=this.layout,i=this.node.getBoundingClientRect();t="horizontal"===n.orientation?e.clientX-i.left-this._pressData.delta:e.clientY-i.top-this._pressData.delta,n.moveHandle(this._pressData.index,t)},t.prototype._evtMouseUp=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())},t.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))},t}(te);!function(e){var t=function(){function e(){}return e.prototype.createHandle=function(){var e=document.createElement("div");return e.className="lm-SplitPanel-handle",e.classList.add("p-SplitPanel-handle"),e},e}();e.Renderer=t,e.defaultRenderer=new t,e.getStretch=function(e){return K.getStretch(e)},e.setStretch=function(e,t){K.setStretch(e,t)}}(ie||(ie={})),function(e){e.createLayout=function(e){return e.layout||new K({renderer:e.renderer||ie.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing})}}(ne||(ne={}));var re,se=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,N(N({},t),{layout:re.createLayout(t)}))||this;return n._widgetSizesCache=new WeakMap,n.addClass("lm-AccordionPanel"),n}return Y(t,e),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleSpace",{get:function(){return this.layout.titleSpace},set:function(e){this.layout.titleSpace=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titles",{get:function(){return this.layout.titles},enumerable:!0,configurable:!0}),t.prototype.addWidget=function(t){e.prototype.addWidget.call(this,t),t.title.changed.connect(this._onTitleChanged,this)},t.prototype.collapse=function(e){var t=this.layout.widgets[e];t&&!t.isHidden&&this._toggleExpansion(e)},t.prototype.expand=function(e){var t=this.layout.widgets[e];t&&t.isHidden&&this._toggleExpansion(e)},t.prototype.insertWidget=function(t,n){e.prototype.insertWidget.call(this,t,n),n.title.changed.connect(this._onTitleChanged,this)},t.prototype.handleEvent=function(t){switch(e.prototype.handleEvent.call(this,t),t.type){case"click":this._evtClick(t);break;case"keydown":this._eventKeyDown(t)}},t.prototype.onBeforeAttach=function(t){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),e.prototype.onBeforeAttach.call(this,t)},t.prototype.onAfterDetach=function(t){e.prototype.onAfterDetach.call(this,t),this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this)},t.prototype._onTitleChanged=function(e){var t=l.Rw.findFirstIndex(this.widgets,(function(t){return t.contains(e.owner)}));t>=0&&(this.layout.updateTitle(t,e.owner),this.update())},t.prototype._computeWidgetSize=function(e){var t=this.layout,n=t.widgets[e];if(n){var i=n.isHidden,r=t.absoluteSizes(),s=(i?-1:1)*this.spacing,a=r.reduce((function(e,t){return e+t})),o=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,r++)i[r]=s[a];return i}(r);if(i){var l=this._widgetSizesCache.get(n);if(!l)return;o[e]+=l,-1===(c=o.map((function(e){return e-l>0})).lastIndexOf(!0))?o.forEach((function(t,n){n!==e&&(o[n]-=r[n]/a*(l-s))})):o[c]-=l-s}else{var c,u=r[e];if(this._widgetSizesCache.set(n,u),o[e]=0,-1===(c=o.map((function(e){return e>0})).lastIndexOf(!0)))return;o[c]=r[c]+u+s}return o.map((function(e){return e/(a+s)}))}},t.prototype._evtClick=function(e){var t=e.target;if(t){var n=l.Rw.findFirstIndex(this.titles,(function(e){return e.contains(t)}));n>=0&&(e.preventDefault(),e.stopPropagation(),this._toggleExpansion(n))}},t.prototype._eventKeyDown=function(e){if(!e.defaultPrevented){var t=e.target,n=!1;if(t){var i=l.Rw.findFirstIndex(this.titles,(function(e){return e.contains(t)}));if(i>=0){var r=e.keyCode.toString();if(e.key.match(/Space|Enter/)||r.match(/13|32/))t.click(),n=!0;else if("horizontal"===this.orientation?e.key.match(/ArrowLeft|ArrowRight/)||r.match(/37|39/):e.key.match(/ArrowUp|ArrowDown/)||r.match(/38|40/)){var s=e.key.match(/ArrowLeft|ArrowUp/)||r.match(/37|38/)?-1:1,a=this.titles.length,o=(i+a+s)%a;this.titles[o].focus(),n=!0}else"End"===e.key||"35"===r?(this.titles[this.titles.length-1].focus(),n=!0):"Home"!==e.key&&"36"!==r||(this.titles[0].focus(),n=!0)}n&&e.preventDefault()}}},t.prototype._toggleExpansion=function(e){var t=this.titles[e],n=this.layout.widgets[e],i=this._computeWidgetSize(e);i&&this.setRelativeSizes(i,!1),n.isHidden?(t.classList.add("lm-mod-expanded"),t.setAttribute("aria-expanded","true"),n.show()):(t.classList.remove("lm-mod-expanded"),t.setAttribute("aria-expanded","false"),n.hide())},t}(ie);!function(e){var t=function(e){function t(){var n=e.call(this)||this;return n.titleClassName="lm-AccordionPanel-title",n._titleID=0,n._titleKeys=new WeakMap,n._uuid=++t._nInstance,n}return Y(t,e),t.prototype.createCollapseIcon=function(e){return document.createElement("span")},t.prototype.createSectionTitle=function(e){var t=document.createElement("h3");for(var n in t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.id=this.createTitleKey(e),t.className=this.titleClassName,e.dataset)t.dataset[n]=e.dataset[n];t.appendChild(this.createCollapseIcon(e)).className="lm-AccordionPanel-titleCollapser";var i=t.appendChild(document.createElement("span"));return i.className="lm-AccordionPanel-titleLabel",i.textContent=e.label,i.title=e.caption||e.label,t},t.prototype.createTitleKey=function(e){var t=this._titleKeys.get(e);return void 0===t&&(t="title-key-"+this._uuid+"-"+this._titleID++,this._titleKeys.set(e,t)),t},t._nInstance=0,t}(ie.Renderer);e.Renderer=t,e.defaultRenderer=new t}(se||(se={})),function(e){e.createLayout=function(e){return e.layout||new Q({renderer:e.renderer||se.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing,titleSpace:e.titleSpace})}}(re||(re={}));var ae,oe=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n._fixed=0,n._spacing=4,n._dirty=!1,n._sizers=[],n._items=[],n._box=null,n._alignment="start",n._direction="top-to-bottom",void 0!==t.direction&&(n._direction=t.direction),void 0!==t.alignment&&(n._alignment=t.alignment),void 0!==t.spacing&&(n._spacing=J.clampDimension(t.spacing)),n}return Y(t,e),t.prototype.dispose=function(){(0,l.__)(this._items,(function(e){e.dispose()})),this._box=null,this._items.length=0,this._sizers.length=0,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e,this.parent&&(this.parent.dataset.direction=e,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){e=J.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,e.prototype.init.call(this)},t.prototype.attachWidget=function(e,t){l.Rw.insert(this._items,e,new V(t)),l.Rw.insert(this._sizers,e,new I),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterAttach),this.parent.fit()},t.prototype.moveWidget=function(e,t,n){l.Rw.move(this._items,e,t),l.Rw.move(this._sizers,e,t),this.parent.update()},t.prototype.detachWidget=function(e,t){var n=l.Rw.removeAt(this._items,e);l.Rw.removeAt(this._sizers,e),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterDetach),n.dispose(),this.parent.fit()},t.prototype.onBeforeShow=function(t){e.prototype.onBeforeShow.call(this,t),this.parent.update()},t.prototype.onBeforeAttach=function(t){e.prototype.onBeforeAttach.call(this,t),this.parent.fit()},t.prototype.onChildShown=function(e){this.parent.fit()},t.prototype.onChildHidden=function(e){this.parent.fit()},t.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},t.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},t.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},t.prototype._fit=function(){for(var e=0,n=0,i=this._items.length;n<i;++n)e+=+!this._items[n].isHidden;this._fixed=this._spacing*Math.max(0,e-1);var s=ae.isHorizontal(this._direction),a=s?this._fixed:0,o=s?0:this._fixed;for(n=0,i=this._items.length;n<i;++n){var l=this._items[n],c=this._sizers[n];l.isHidden?(c.minSize=0,c.maxSize=0):(l.fit(),c.sizeHint=t.getSizeBasis(l.widget),c.stretch=t.getStretch(l.widget),s?(c.minSize=l.minWidth,c.maxSize=l.maxWidth,a+=l.minWidth,o=Math.max(o,l.minHeight)):(c.minSize=l.minHeight,c.maxSize=l.maxHeight,o+=l.minHeight,a=Math.max(a,l.minWidth)))}var h=this._box=r.boxSizing(this.parent.node);a+=h.horizontalSum,o+=h.verticalSum;var d=this.parent.node.style;d.minWidth=a+"px",d.minHeight=o+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,U.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,U.Msg.UpdateRequest)},t.prototype._update=function(e,t){this._dirty=!1;for(var n=0,i=0,s=this._items.length;i<s;++i)n+=+!this._items[i].isHidden;if(0!==n){e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=r.boxSizing(this.parent.node));var a,o=this._box.paddingTop,l=this._box.paddingLeft,c=e-this._box.horizontalSum,u=t-this._box.verticalSum;switch(this._direction){case"left-to-right":a=F.calc(this._sizers,Math.max(0,c-this._fixed));break;case"top-to-bottom":a=F.calc(this._sizers,Math.max(0,u-this._fixed));break;case"right-to-left":a=F.calc(this._sizers,Math.max(0,c-this._fixed)),l+=c;break;case"bottom-to-top":a=F.calc(this._sizers,Math.max(0,u-this._fixed)),o+=u;break;default:throw"unreachable"}var h=0,d=0;if(a>0)switch(this._alignment){case"start":break;case"center":h=0,d=a/2;break;case"end":h=0,d=a;break;case"justify":h=a/n,d=0;break;default:throw"unreachable"}for(i=0,s=this._items.length;i<s;++i){var f=this._items[i];if(!f.isHidden){var p=this._sizers[i].size;switch(this._direction){case"left-to-right":f.update(l+d,o,p+h,u),l+=p+h+this._spacing;break;case"top-to-bottom":f.update(l,o+d,c,p+h),o+=p+h+this._spacing;break;case"right-to-left":f.update(l-d-p-h,o,p+h,u),l-=p+h+this._spacing;break;case"bottom-to-top":f.update(l,o-d-p-h,c,p+h),o-=p+h+this._spacing;break;default:throw"unreachable"}}}}},t}(X);!function(e){e.getStretch=function(e){return ae.stretchProperty.get(e)},e.setStretch=function(e,t){ae.stretchProperty.set(e,t)},e.getSizeBasis=function(e){return ae.sizeBasisProperty.get(e)},e.setSizeBasis=function(e,t){ae.sizeBasisProperty.set(e,t)}}(oe||(oe={})),function(e){function t(e){e.parent&&e.parent.layout instanceof oe&&e.parent.fit()}e.stretchProperty=new h({name:"stretch",create:function(){return 0},coerce:function(e,t){return Math.max(0,Math.floor(t))},changed:t}),e.sizeBasisProperty=new h({name:"sizeBasis",create:function(){return 0},coerce:function(e,t){return Math.max(0,Math.floor(t))},changed:t}),e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(ae||(ae={}));var le,ce=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,{layout:le.createLayout(t)})||this;return n.addClass("lm-BoxPanel"),n.addClass("p-BoxPanel"),n}return Y(t,e),Object.defineProperty(t.prototype,"direction",{get:function(){return this.layout.direction},set:function(e){this.layout.direction=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(e){this.layout.alignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(e){this.layout.spacing=e},enumerable:!0,configurable:!0}),t.prototype.onChildAdded=function(e){e.child.addClass("lm-BoxPanel-child"),e.child.addClass("p-BoxPanel-child")},t.prototype.onChildRemoved=function(e){e.child.removeClass("lm-BoxPanel-child"),e.child.removeClass("p-BoxPanel-child")},t}(te);!function(e){e.getStretch=function(e){return oe.getStretch(e)},e.setStretch=function(e,t){oe.setStretch(e,t)},e.getSizeBasis=function(e){return oe.getSizeBasis(e)},e.setSizeBasis=function(e,t){oe.setSizeBasis(e,t)}}(ce||(ce={})),function(e){e.createLayout=function(e){return e.layout||new oe(e)}}(le||(le={}));var ue,he=function(e){function t(n){var i=e.call(this,{node:ue.createNode()})||this;return i._activeIndex=-1,i._items=[],i._results=null,i.addClass("lm-CommandPalette"),i.addClass("p-CommandPalette"),i.setFlag(U.Flag.DisallowLayout),i.commands=n.commands,i.renderer=n.renderer||t.defaultRenderer,i.commands.commandChanged.connect(i._onGenericChange,i),i.commands.keyBindingChanged.connect(i._onGenericChange,i),i}return Y(t,e),t.prototype.dispose=function(){this._items.length=0,this._results=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"searchNode",{get:function(){return this.node.getElementsByClassName("lm-CommandPalette-search")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNode",{get:function(){return this.node.getElementsByClassName("lm-CommandPalette-input")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-CommandPalette-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),t.prototype.addItem=function(e){var t=ue.createItem(this.commands,e);return this._items.push(t),this.refresh(),t},t.prototype.addItems=function(e){var t=this,n=e.map((function(e){return ue.createItem(t.commands,e)}));return n.forEach((function(e){return t._items.push(e)})),this.refresh(),n},t.prototype.removeItem=function(e){this.removeItemAt(this._items.indexOf(e))},t.prototype.removeItemAt=function(e){l.Rw.removeAt(this._items,e)&&this.refresh()},t.prototype.clearItems=function(){0!==this._items.length&&(this._items.length=0,this.refresh())},t.prototype.refresh=function(){this._results=null,""!==this.inputNode.value?this.node.getElementsByClassName("lm-close-icon")[0].style.display="inherit":this.node.getElementsByClassName("lm-close-icon")[0].style.display="none",this.update()},t.prototype.handleEvent=function(e){switch(e.type){case"click":this._evtClick(e);break;case"keydown":this._evtKeyDown(e);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)},t.prototype.onActivateRequest=function(e){if(this.isAttached){var t=this.inputNode;t.focus(),t.select()}},t.prototype.onUpdateRequest=function(e){var t=this.inputNode.value,n=this.contentNode,i=this._results;if(i||(i=this._results=ue.search(this._items,t),this._activeIndex=t?l.Rw.findFirstIndex(i,ue.canActivate):-1),t||0!==i.length)if(t&&0===i.length){var s=this.renderer.renderEmptyMessage({query:t});E.render(s,n)}else{for(var a=this.renderer,o=this._activeIndex,c=new Array(i.length),u=0,h=i.length;u<h;++u){var d=i[u];if("header"===d.type){var f=d.indices,p=d.category;c[u]=a.renderHeader({category:p,indices:f})}else{var m=d.item,_=(f=d.indices,u===o);c[u]=a.renderItem({item:m,indices:f,active:_})}}if(E.render(c,n),o<0||o>=i.length)n.scrollTop=0;else{var g=n.children[o];r.scrollIntoViewIfNeeded(n,g)}}else E.render(null,n)},t.prototype._evtClick=function(e){if(0===e.button){if(e.target.classList.contains("lm-close-icon"))return this.inputNode.value="",void this.refresh();var t=l.Rw.findFirstIndex(this.contentNode.children,(function(t){return t.contains(e.target)}));-1!==t&&(e.preventDefault(),e.stopPropagation(),this._execute(t))}},t.prototype._evtKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),this._execute(this._activeIndex);break;case 38:e.preventDefault(),e.stopPropagation(),this._activatePreviousItem();break;case 40:e.preventDefault(),e.stopPropagation(),this._activateNextItem()}},t.prototype._activateNextItem=function(){if(this._results&&0!==this._results.length){var e=this._activeIndex,t=this._results.length,n=e<t-1?e+1:0,i=0===n?t-1:n-1;this._activeIndex=l.Rw.findFirstIndex(this._results,ue.canActivate,n,i),this.update()}},t.prototype._activatePreviousItem=function(){if(this._results&&0!==this._results.length){var e=this._activeIndex,t=this._results.length,n=e<=0?t-1:e-1,i=n===t-1?0:n+1;this._activeIndex=l.Rw.findLastIndex(this._results,ue.canActivate,n,i),this.update()}},t.prototype._execute=function(e){if(this._results){var t=this._results[e];if(t){if("header"===t.type){var n=this.inputNode;return n.value=t.category.toLowerCase()+" ",n.focus(),void this.refresh()}t.item.isEnabled&&(this.commands.execute(t.item.command,t.item.args),this.inputNode.value="",this.refresh())}}},t.prototype._toggleFocused=function(){var e=document.activeElement===this.inputNode;this.toggleClass("lm-mod-focused",e),this.toggleClass("p-mod-focused",e)},t.prototype._onGenericChange=function(){this.refresh()},t}(U);!function(e){var t=function(){function e(){}return e.prototype.renderHeader=function(e){var t=this.formatHeader(e);return z.li({className:"lm-CommandPalette-header p-CommandPalette-header"},t)},e.prototype.renderItem=function(e){var t=this.createItemClass(e),n=this.createItemDataset(e);return e.item.isToggleable?z.li({className:t,dataset:n,role:"checkbox","aria-checked":""+e.item.isToggled},this.renderItemIcon(e),this.renderItemContent(e),this.renderItemShortcut(e)):z.li({className:t,dataset:n},this.renderItemIcon(e),this.renderItemContent(e),this.renderItemShortcut(e))},e.prototype.renderEmptyMessage=function(e){var t=this.formatEmptyMessage(e);return z.li({className:"lm-CommandPalette-emptyMessage p-CommandPalette-emptyMessage"},t)},e.prototype.renderItemIcon=function(e){var t=this.createIconClass(e);return"string"==typeof e.item.icon?z.div({className:t},e.item.iconLabel):z.div({className:t},e.item.icon,e.item.iconLabel)},e.prototype.renderItemContent=function(e){return z.div({className:"lm-CommandPalette-itemContent p-CommandPalette-itemContent"},this.renderItemLabel(e),this.renderItemCaption(e))},e.prototype.renderItemLabel=function(e){var t=this.formatItemLabel(e);return z.div({className:"lm-CommandPalette-itemLabel p-CommandPalette-itemLabel"},t)},e.prototype.renderItemCaption=function(e){var t=this.formatItemCaption(e);return z.div({className:"lm-CommandPalette-itemCaption p-CommandPalette-itemCaption"},t)},e.prototype.renderItemShortcut=function(e){var t=this.formatItemShortcut(e);return z.div({className:"lm-CommandPalette-itemShortcut p-CommandPalette-itemShortcut"},t)},e.prototype.createItemClass=function(e){var t="lm-CommandPalette-item";t+=" p-CommandPalette-item",e.item.isEnabled||(t+=" lm-mod-disabled",t+=" p-mod-disabled"),e.item.isToggled&&(t+=" lm-mod-toggled",t+=" p-mod-toggled"),e.active&&(t+=" lm-mod-active",t+=" p-mod-active");var n=e.item.className;return n&&(t+=" "+n),t},e.prototype.createItemDataset=function(e){return N(N({},e.item.dataset),{command:e.item.command})},e.prototype.createIconClass=function(e){var t="lm-CommandPalette-itemIcon";t+=" p-CommandPalette-itemIcon";var n=e.item.iconClass;return n?t+" "+n:t},e.prototype.formatHeader=function(e){return e.indices&&0!==e.indices.length?l.fY.highlight(e.category,e.indices,z.mark):e.category},e.prototype.formatEmptyMessage=function(e){return"No commands found that match '"+e.query+"'"},e.prototype.formatItemShortcut=function(e){var t=e.item.keyBinding;return t?A.formatKeystroke(t.keys):null},e.prototype.formatItemLabel=function(e){return e.indices&&0!==e.indices.length?l.fY.highlight(e.item.label,e.indices,z.mark):e.item.label},e.prototype.formatItemCaption=function(e){return e.item.caption},e}();e.Renderer=t,e.defaultRenderer=new t}(he||(he={})),function(e){function t(e,t){for(var n=e.category.toLowerCase(),i=n+" "+e.label.toLowerCase(),r=1/0,s=null,a=/\b\w/g;;){var o=a.exec(i);if(!o)break;var c=l.fY.matchSumOfDeltas(i,t,o.index);if(!c)break;c&&c.score<=r&&(r=c.score,s=c.indices)}if(!s||r===1/0)return null;for(var u=n.length+1,h=l.Rw.lowerBound(s,u,(function(e,t){return e-t})),d=s.slice(0,h),f=s.slice(h),p=0,m=f.length;p<m;++p)f[p]-=u;return 0===d.length?{matchType:0,categoryIndices:null,labelIndices:f,score:r,item:e}:0===f.length?{matchType:1,categoryIndices:d,labelIndices:null,score:r,item:e}:{matchType:2,categoryIndices:d,labelIndices:f,score:r,item:e}}function n(e,t){var n=e.matchType-t.matchType;if(0!==n)return n;var i=e.score-t.score;if(0!==i)return i;var r=0,s=0;switch(e.matchType){case 0:r=e.labelIndices[0],s=t.labelIndices[0];break;case 1:case 2:r=e.categoryIndices[0],s=t.categoryIndices[0]}if(r!==s)return r-s;var a=e.item.category.localeCompare(t.item.category);if(0!==a)return a;var o=e.item.rank,l=t.item.rank;return o!==l?o<l?-1:1:e.item.label.localeCompare(t.item.label)}e.createNode=function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("input"),r=document.createElement("ul"),s=document.createElement("button");return t.className="lm-CommandPalette-search",n.className="lm-CommandPalette-wrapper",i.className="lm-CommandPalette-input",s.className="lm-close-icon",r.className="lm-CommandPalette-content",t.classList.add("p-CommandPalette-search"),n.classList.add("p-CommandPalette-wrapper"),i.classList.add("p-CommandPalette-input"),r.classList.add("p-CommandPalette-content"),i.spellcheck=!1,n.appendChild(i),n.appendChild(s),t.appendChild(n),e.appendChild(t),e.appendChild(r),e},e.createItem=function(e,t){return new i(e,t)},e.search=function(e,i){var r=function(e,n){n=n.replace(/\s+/g,"").toLowerCase();for(var i=[],r=0,s=e.length;r<s;++r){var a=e[r];if(a.isVisible)if(n){var o=t(a,n);o&&(a.isEnabled||(o.score+=1e3),i.push(o))}else i.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:a})}return i}(e,i);return r.sort(n),function(e){var t=new Array(e.length);l.Rw.fill(t,!1);for(var n=[],i=0,r=e.length;i<r;++i)if(!t[i]){var s=e[i],a=s.item,o=s.categoryIndices,c=a.category;n.push({type:"header",category:c,indices:o});for(var u=i;u<r;++u)if(!t[u]){var h=e[u],d=h.item,f=h.labelIndices;d.category===c&&(n.push({type:"item",item:d,indices:f}),t[u]=!0)}}return n}(r)},e.canActivate=function(e){return"item"===e.type&&e.item.isEnabled};var i=function(){function e(e,t){this._commands=e,this.category=t.category.trim().replace(/\s+/g," "),this.command=t.command,this.args=t.args||x.JSONExt.emptyObject,this.rank=void 0!==t.rank?t.rank:1/0}return Object.defineProperty(e.prototype,"label",{get:function(){return this._commands.label(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._commands.icon(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconClass",{get:function(){return this._commands.iconClass(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconLabel",{get:function(){return this._commands.iconLabel(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this._commands.caption(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._commands.className(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataset",{get:function(){return this._commands.dataset(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._commands.isEnabled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isToggled",{get:function(){return this._commands.isToggled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isToggleable",{get:function(){return this._commands.isToggleable(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._commands.isVisible(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBinding",{get:function(){var e=this.command,t=this.args;return l.Rw.findLastValue(this._commands.keyBindings,(function(n){return n.command===e&&x.JSONExt.deepEqual(n.args,t)}))||null},enumerable:!0,configurable:!0}),e}()}(ue||(ue={}));var de,fe=function(e){function t(n){var i=e.call(this,{node:de.createNode()})||this;return i._childIndex=-1,i._activeIndex=-1,i._openTimerID=0,i._closeTimerID=0,i._items=[],i._childMenu=null,i._parentMenu=null,i._aboutToClose=new f(i),i._menuRequested=new f(i),i.addClass("lm-Menu"),i.addClass("p-Menu"),i.setFlag(U.Flag.DisallowLayout),i.commands=n.commands,i.renderer=n.renderer||t.defaultRenderer,i}return Y(t,e),t.prototype.dispose=function(){this.close(),this._items.length=0,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"aboutToClose",{get:function(){return this._aboutToClose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menuRequested",{get:function(){return this._menuRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentMenu",{get:function(){return this._parentMenu},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootMenu",{get:function(){for(var e=this;e._parentMenu;)e=e._parentMenu;return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leafMenu",{get:function(){for(var e=this;e._childMenu;)e=e._childMenu;return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-Menu-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._items[this._activeIndex]||null},set:function(e){this.activeIndex=e?this._items.indexOf(e):-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){(e<0||e>=this._items.length)&&(e=-1),-1===e||de.canActivate(this._items[e])||(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),t.prototype.activateNextItem=function(){var e=this._items.length,t=this._activeIndex,n=t<e-1?t+1:0,i=0===n?e-1:n-1;this.activeIndex=l.Rw.findFirstIndex(this._items,de.canActivate,n,i)},t.prototype.activatePreviousItem=function(){var e=this._items.length,t=this._activeIndex,n=t<=0?e-1:t-1,i=n===e-1?0:n+1;this.activeIndex=l.Rw.findLastIndex(this._items,de.canActivate,n,i)},t.prototype.triggerActiveItem=function(){if(this.isAttached){var e=this.activeItem;if(e)if(this._cancelOpenTimer(),this._cancelCloseTimer(),"submenu"!==e.type){this.rootMenu.close();var t=e.command,n=e.args;this.commands.isEnabled(t,n)?this.commands.execute(t,n):console.log("Command '"+t+"' is disabled.")}else this._openChildMenu(!0)}},t.prototype.addItem=function(e){return this.insertItem(this._items.length,e)},t.prototype.insertItem=function(e,t){this.isAttached&&this.close(),this.activeIndex=-1;var n=Math.max(0,Math.min(e,this._items.length)),i=de.createItem(this,t);return l.Rw.insert(this._items,n,i),this.update(),i},t.prototype.removeItem=function(e){this.removeItemAt(this._items.indexOf(e))},t.prototype.removeItemAt=function(e){this.isAttached&&this.close(),this.activeIndex=-1,l.Rw.removeAt(this._items,e)&&this.update()},t.prototype.clearItems=function(){this.isAttached&&this.close(),this.activeIndex=-1,0!==this._items.length&&(this._items.length=0,this.update())},t.prototype.open=function(e,t,n){if(void 0===n&&(n={}),!this.isAttached){var i=n.forceX||!1,r=n.forceY||!1;de.openRootMenu(this,e,t,i,r),this.activate()}},t.prototype.handleEvent=function(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)},t.prototype.onActivateRequest=function(e){this.isAttached&&this.node.focus()},t.prototype.onUpdateRequest=function(e){for(var t=this,n=this._items,i=this.renderer,r=this._activeIndex,s=de.computeCollapsed(n),a=new Array(n.length),o=function(e,o){var l=n[e],c=e===r,u=s[e];a[e]=i.renderItem({item:l,active:c,collapsed:u,onfocus:function(){t.activeIndex=e}})},l=0,c=n.length;l<c;++l)o(l);E.render(a,this.contentNode)},t.prototype.onCloseRequest=function(t){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;var n=this._childMenu;n&&(this._childIndex=-1,this._childMenu=null,n._parentMenu=null,n.close());var i=this._parentMenu;i&&(this._parentMenu=null,i._childIndex=-1,i._childMenu=null,i.activate()),this.isAttached&&this._aboutToClose.emit(void 0),e.prototype.onCloseRequest.call(this,t)},t.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation();var t=e.keyCode;if(13!==t)if(27!==t)if(37!==t)if(38!==t)if(39!==t)if(40!==t){var n=M().keyForKeydownEvent(e);if(n){var i=this._activeIndex+1,r=de.findMnemonic(this._items,n,i);-1===r.index||r.multiple?-1!==r.index?this.activeIndex=r.index:-1!==r.auto&&(this.activeIndex=r.auto):(this.activeIndex=r.index,this.triggerActiveItem())}}else this.activateNextItem();else{var s=this.activeItem;s&&"submenu"===s.type?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next")}else this.activatePreviousItem();else this._parentMenu?this.close():this._menuRequested.emit("previous");else this.close();else this.triggerActiveItem()},t.prototype._evtMouseUp=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())},t.prototype._evtMouseMove=function(e){var t=l.Rw.findFirstIndex(this.contentNode.children,(function(t){return r.hitTest(t,e.clientX,e.clientY)}));if(t!==this._activeIndex){if(this.activeIndex=t,(t=this.activeIndex)===this._childIndex)return this._cancelOpenTimer(),void this._cancelCloseTimer();-1!==this._childIndex&&this._startCloseTimer(),this._cancelOpenTimer();var n=this.activeItem;n&&"submenu"===n.type&&n.submenu&&this._startOpenTimer()}},t.prototype._evtMouseEnter=function(e){for(var t=this._parentMenu;t;t=t._parentMenu)t._cancelOpenTimer(),t._cancelCloseTimer(),t.activeIndex=t._childIndex},t.prototype._evtMouseLeave=function(e){if(this._cancelOpenTimer(),this._childMenu){var t=e.clientX,n=e.clientY;r.hitTest(this._childMenu.node,t,n)?this._cancelCloseTimer():(this.activeIndex=-1,this._startCloseTimer())}else this.activeIndex=-1},t.prototype._evtMouseDown=function(e){this._parentMenu||(de.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())},t.prototype._openChildMenu=function(e){void 0===e&&(e=!1);var n=this.activeItem;if(n&&"submenu"===n.type&&n.submenu){var i=n.submenu;if(i!==this._childMenu){t.saveWindowData(),this._closeChildMenu(),this._childMenu=i,this._childIndex=this._activeIndex,i._parentMenu=this,u.MessageLoop.sendMessage(this,U.Msg.UpdateRequest);var r=this.contentNode.children[this._activeIndex];de.openSubmenu(i,r),e&&(i.activeIndex=-1,i.activateNextItem()),i.activate()}}else this._closeChildMenu()},t.prototype._closeChildMenu=function(){this._childMenu&&this._childMenu.close()},t.prototype._startOpenTimer=function(){var e=this;0===this._openTimerID&&(this._openTimerID=window.setTimeout((function(){e._openTimerID=0,e._openChildMenu()}),de.TIMER_DELAY))},t.prototype._startCloseTimer=function(){var e=this;0===this._closeTimerID&&(this._closeTimerID=window.setTimeout((function(){e._closeTimerID=0,e._closeChildMenu()}),de.TIMER_DELAY))},t.prototype._cancelOpenTimer=function(){0!==this._openTimerID&&(clearTimeout(this._openTimerID),this._openTimerID=0)},t.prototype._cancelCloseTimer=function(){0!==this._closeTimerID&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)},t.saveWindowData=function(){de.saveWindowData()},t}(U);!function(e){var t=function(){function e(){}return e.prototype.renderItem=function(e){var t=this.createItemClass(e),n=this.createItemDataset(e),i=this.createItemARIA(e);return z.li(N({className:t,dataset:n,tabindex:"0",onfocus:e.onfocus},i),this.renderIcon(e),this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))},e.prototype.renderIcon=function(e){var t=this.createIconClass(e);return"string"==typeof e.item.icon?z.div({className:t},e.item.iconLabel):z.div({className:t},e.item.icon,e.item.iconLabel)},e.prototype.renderLabel=function(e){var t=this.formatLabel(e);return z.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},t)},e.prototype.renderShortcut=function(e){var t=this.formatShortcut(e);return z.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},t)},e.prototype.renderSubmenu=function(e){return z.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})},e.prototype.createItemClass=function(e){var t="lm-Menu-item";t+=" p-Menu-item",e.item.isEnabled||(t+=" lm-mod-disabled",t+=" p-mod-disabled"),e.item.isToggled&&(t+=" lm-mod-toggled",t+=" p-mod-toggled"),e.item.isVisible||(t+=" lm-mod-hidden",t+=" p-mod-hidden"),e.active&&(t+=" lm-mod-active",t+=" p-mod-active"),e.collapsed&&(t+=" lm-mod-collapsed",t+=" p-mod-collapsed");var n=e.item.className;return n&&(t+=" "+n),t},e.prototype.createItemDataset=function(e){var t=e.item,n=t.type,i=t.command,r=t.dataset;return N(N({},r),"command"===n?{type:n,command:i}:{type:n})},e.prototype.createIconClass=function(e){var t="lm-Menu-itemIcon";t+=" p-Menu-itemIcon";var n=e.item.iconClass;return n?t+" "+n:t},e.prototype.createItemARIA=function(e){var t={};switch(e.item.type){case"separator":t.role="presentation";break;case"submenu":t["aria-haspopup"]="true",e.item.isEnabled||(t["aria-disabled"]="true");break;default:e.item.isEnabled||(t["aria-disabled"]="true"),t.role="menuitem"}return t},e.prototype.formatLabel=function(e){var t=e.item,n=t.label,i=t.mnemonic;if(i<0||i>=n.length)return n;var r=n.slice(0,i),s=n.slice(i+1),a=n[i];return[r,z.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},a),s]},e.prototype.formatShortcut=function(e){var t=e.item.keyBinding;return t?A.formatKeystroke(t.keys):null},e}();e.Renderer=t,e.defaultRenderer=new t}(fe||(fe={})),function(e){e.TIMER_DELAY=300,e.SUBMENU_OVERLAP=3;var t=null,n=0;function i(){return n>0?(n--,t):a()}function s(e){return"separator"!==e.type&&e.isEnabled&&e.isVisible}function a(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}e.saveWindowData=function(){t=a(),n++},e.createNode=function(){var e=document.createElement("div"),t=document.createElement("ul");return t.className="lm-Menu-content",t.classList.add("p-Menu-content"),e.appendChild(t),t.setAttribute("role","menu"),e.tabIndex=0,e},e.canActivate=s,e.createItem=function(e,t){return new o(e.commands,t)},e.hitTestMenus=function(e,t,n){for(var i=e;i;i=i.childMenu)if(r.hitTest(i.node,t,n))return!0;return!1},e.computeCollapsed=function(e){var t=new Array(e.length);l.Rw.fill(t,!1);for(var n=0,i=e.length;n<i;++n)if((a=e[n]).isVisible){if("separator"!==a.type)break;t[n]=!0}for(var r=i-1;r>=0;--r)if((a=e[r]).isVisible){if("separator"!==a.type)break;t[r]=!0}for(var s=!1;++n<r;){var a;(a=e[n]).isVisible&&("separator"!==a.type?s=!1:s?t[n]=!0:s=!0)}return t},e.openRootMenu=function(e,t,n,r,s){var a=i(),o=a.pageXOffset,l=a.pageYOffset,c=a.clientWidth,h=a.clientHeight;u.MessageLoop.sendMessage(e,U.Msg.UpdateRequest);var d=h-(s?n:0),f=e.node,p=f.style;p.opacity="0",p.maxHeight=d+"px",U.attach(e,document.body);var m=f.getBoundingClientRect(),_=m.width,g=m.height;!r&&t+_>o+c&&(t=o+c-_),!s&&n+g>l+h&&(n>l+h?n=l+h-g:n-=g),p.transform="translate("+Math.max(0,t)+"px, "+Math.max(0,n)+"px",p.opacity="1"},e.openSubmenu=function(t,n){var s=i(),a=s.pageXOffset,o=s.pageYOffset,l=s.clientWidth,c=s.clientHeight;u.MessageLoop.sendMessage(t,U.Msg.UpdateRequest);var h=c,d=t.node,f=d.style;f.opacity="0",f.maxHeight=h+"px",U.attach(t,document.body);var p=d.getBoundingClientRect(),m=p.width,_=p.height,g=r.boxSizing(t.node),y=n.getBoundingClientRect(),v=y.right-e.SUBMENU_OVERLAP;v+m>a+l&&(v=y.left+e.SUBMENU_OVERLAP-m);var b=y.top-g.borderTop-g.paddingTop;b+_>o+c&&(b=y.bottom+g.borderBottom+g.paddingBottom-_),f.transform="translate("+Math.max(0,v)+"px, "+Math.max(0,b)+"px",f.opacity="1"},e.findMnemonic=function(e,t,n){for(var i=-1,r=-1,a=!1,o=t.toUpperCase(),l=0,c=e.length;l<c;++l){var u=(l+n)%c,h=e[u];if(s(h)){var d=h.label;if(0!==d.length){var f=h.mnemonic;f>=0&&f<d.length?d[f].toUpperCase()===o&&(-1===i?i=u:a=!0):-1===r&&d[0].toUpperCase()===o&&(r=u)}}}return{index:i,multiple:a,auto:r}};var o=function(){function e(e,t){this._commands=e,this.type=t.type||"command",this.command=t.command||"",this.args=t.args||x.JSONExt.emptyObject,this.submenu=t.submenu||null}return Object.defineProperty(e.prototype,"label",{get:function(){return"command"===this.type?this._commands.label(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.label:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mnemonic",{get:function(){return"command"===this.type?this._commands.mnemonic(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.mnemonic:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"command"===this.type?this._commands.icon(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.icon:this.iconClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconClass",{get:function(){return"command"===this.type?this._commands.iconClass(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconClass:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconLabel",{get:function(){return"command"===this.type?this._commands.iconLabel(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconLabel:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return"command"===this.type?this._commands.caption(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.caption:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return"command"===this.type?this._commands.className(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.className:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataset",{get:function(){return"command"===this.type?this._commands.dataset(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.dataset:{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return"command"===this.type?this._commands.isEnabled(this.command,this.args):"submenu"!==this.type||null!==this.submenu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isToggled",{get:function(){return"command"===this.type&&this._commands.isToggled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return"command"===this.type?this._commands.isVisible(this.command,this.args):"submenu"!==this.type||null!==this.submenu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBinding",{get:function(){if("command"===this.type){var e=this.command,t=this.args;return l.Rw.findLastValue(this._commands.keyBindings,(function(n){return n.command===e&&x.JSONExt.deepEqual(n.args,t)}))||null}return null},enumerable:!0,configurable:!0}),e}()}(de||(de={}));var pe,me=function(){function e(e){this._groupByTarget=!0,this._idTick=0,this._items=[],this._sortBySelector=!0;var t=e.groupByTarget,n=e.sortBySelector,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["groupByTarget","sortBySelector"]);this.menu=new fe(i),this._groupByTarget=!1!==t,this._sortBySelector=!1!==n}return e.prototype.addItem=function(e){var t=this,n=pe.createItem(e,this._idTick++);return this._items.push(n),new _((function(){l.Rw.removeFirstOf(t._items,n)}))},e.prototype.open=function(e){var t=this;if(fe.saveWindowData(),this.menu.clearItems(),0===this._items.length)return!1;var n=pe.matchItems(this._items,e,this._groupByTarget,this._sortBySelector);return!(!n||0===n.length||((0,l.__)(n,(function(e){t.menu.addItem(e)})),this.menu.open(e.clientX,e.clientY),0))},e}();!function(e){function t(e,t){var n=e.rank,i=t.rank;return n!==i?n<i?-1:1:e.id-t.id}function n(e,n){var i=a.calculateSpecificity(e.selector),r=a.calculateSpecificity(n.selector);return i!==r?r-i:t(e,n)}e.createItem=function(e,t){var n=function(e){if(-1!==e.indexOf(","))throw new Error("Selector cannot contain commas: "+e);if(!a.isValid(e))throw new Error("Invalid selector: "+e);return e}(e.selector),i=void 0!==e.rank?e.rank:1/0;return N(N({},e),{selector:n,rank:i,id:t})},e.matchItems=function(e,i,r,s){var o=i.target;if(!o)return null;var l=i.currentTarget;if(!l)return null;if(!(l.contains(o)||(o=document.elementFromPoint(i.clientX,i.clientY))&&l.contains(o)))return null;for(var c=[],u=e.slice();null!==o;){for(var h=[],d=0,f=u.length;d<f;++d){var p=u[d];p&&a.matches(o,p.selector)&&(h.push(p),u[d]=null)}if(0!==h.length&&(r&&h.sort(s?n:t),c.push.apply(c,h)),o===l)break;o=o.parentElement}return r||c.sort(s?n:t),c}}(pe||(pe={}));var _e,ge=function(e){function t(n){void 0===n&&(n={});var i=e.call(this,{node:_e.createNode()})||this;return i._currentIndex=-1,i._titles=[],i._titlesEditable=!1,i._previousTitle=null,i._dragData=null,i._addButtonEnabled=!1,i._tabMoved=new f(i),i._currentChanged=new f(i),i._addRequested=new f(i),i._tabCloseRequested=new f(i),i._tabDetachRequested=new f(i),i._tabActivateRequested=new f(i),i.addClass("lm-TabBar"),i.addClass("p-TabBar"),i.contentNode.setAttribute("role","tablist"),i.setFlag(U.Flag.DisallowLayout),i._document=n.document||document,i.tabsMovable=n.tabsMovable||!1,i.titlesEditable=n.titlesEditable||!1,i.allowDeselect=n.allowDeselect||!1,i.addButtonEnabled=n.addButtonEnabled||!1,i.insertBehavior=n.insertBehavior||"select-tab-if-needed",i.name=n.name||"",i.orientation=n.orientation||"horizontal",i.removeBehavior=n.removeBehavior||"select-tab-after",i.renderer=n.renderer||t.defaultRenderer,i}return Y(t,e),t.prototype.dispose=function(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabMoved",{get:function(){return this._tabMoved},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabActivateRequested",{get:function(){return this._tabActivateRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addRequested",{get:function(){return this._addRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabCloseRequested",{get:function(){return this._tabCloseRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabDetachRequested",{get:function(){return this._tabDetachRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){return this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titlesEditable",{get:function(){return this._titlesEditable},set:function(e){this._titlesEditable=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTitle",{get:function(){return this._titles[this._currentIndex]||null},set:function(e){this.currentIndex=e?this._titles.indexOf(e):-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex!==e){var t=this._currentIndex,n=this._titles[t]||null,i=e,r=this._titles[i]||null;this._currentIndex=i,this._previousTitle=n,this.update(),this._currentChanged.emit({previousIndex:t,previousTitle:n,currentIndex:i,currentTitle:r})}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addButtonEnabled",{get:function(){return this._addButtonEnabled},set:function(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titles",{get:function(){return this._titles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-TabBar-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addButtonNode",{get:function(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]},enumerable:!0,configurable:!0}),t.prototype.addTab=function(e){return this.insertTab(this._titles.length,e)},t.prototype.insertTab=function(e,t){this._releaseMouse();var n=_e.asTitle(t),i=this._titles.indexOf(n),r=Math.max(0,Math.min(e,this._titles.length));return-1===i?(l.Rw.insert(this._titles,r,n),n.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(r,n),n):(r===this._titles.length&&r--,i===r||(l.Rw.move(this._titles,i,r),this.update(),this._adjustCurrentForMove(i,r)),n)},t.prototype.removeTab=function(e){this.removeTabAt(this._titles.indexOf(e))},t.prototype.removeTabAt=function(e){this._releaseMouse();var t=l.Rw.removeAt(this._titles,e);t&&(t.changed.disconnect(this._onTitleChanged,this),t===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,t))},t.prototype.clearTabs=function(){if(0!==this._titles.length){this._releaseMouse();for(var e=0,t=this._titles;e<t.length;e++)t[e].changed.disconnect(this._onTitleChanged,this);var n=this.currentIndex,i=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),-1!==n&&this._currentChanged.emit({previousIndex:n,previousTitle:i,currentIndex:-1,currentTitle:null})}},t.prototype.releaseMouse=function(){this._releaseMouse()},t.prototype.handleEvent=function(e){switch(e.type){case"mousedown":case"pointerdown":this._evtMouseDown(e);break;case"mousemove":case"pointermove":this._evtMouseMove(e);break;case"mouseup":case"pointerup":this._evtMouseUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this)},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this._releaseMouse()},t.prototype.onUpdateRequest=function(e){for(var t=this._titles,n=this.renderer,i=this.currentTitle,r=new Array(t.length),s=0,a=t.length;s<a;++s){var o=t[s],l=o===i,c=l?a:a-s-1;r[s]=n.renderTab({title:o,current:l,zIndex:c})}E.render(r,this.contentNode)},t.prototype._evtDblClick=function(e){if(this.titlesEditable){var t=this.contentNode.children,n=l.Rw.findFirstIndex(t,(function(t){return r.hitTest(t,e.clientX,e.clientY)}));if(-1!==n){var i=this.titles[n],s=t[n].querySelector(".lm-TabBar-tabLabel");if(s&&s.contains(e.target)){var a=i.label||"",o=s.innerHTML;s.innerHTML="";var c=document.createElement("input");c.classList.add("lm-TabBar-tabInput"),c.value=a,s.appendChild(c);var u=function(){c.removeEventListener("blur",u),s.innerHTML=o};c.addEventListener("dblclick",(function(e){return e.stopPropagation()})),c.addEventListener("blur",u),c.addEventListener("keydown",(function(e){"Enter"===e.key?(""!==c.value&&(i.label=i.caption=c.value),u()):"Escape"===e.key&&u()})),c.select(),c.focus(),s.children.length>0&&s.children[0].focus()}}}},t.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this._releaseMouse()},t.prototype._evtMouseDown=function(e){if((0===e.button||1===e.button)&&!this._dragData){var t=this.addButtonEnabled&&this.addButtonNode.contains(e.target),n=this.contentNode.children,i=l.Rw.findFirstIndex(n,(function(t){return r.hitTest(t,e.clientX,e.clientY)}));if((-1!==i||t)&&(e.preventDefault(),e.stopPropagation(),this._dragData={tab:n[i],index:i,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("mouseup",this,!0),this.document.addEventListener("pointerup",this,!0),1!==e.button&&!t)){var s=n[i].querySelector(this.renderer.closeIconSelector);s&&s.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("mousemove",this,!0),this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===i?this.currentIndex=-1:this.currentIndex=i,-1!==this.currentIndex&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}}},t.prototype._evtMouseMove=function(e){var t=this._dragData;if(t){e.preventDefault(),e.stopPropagation();var n=this.contentNode.children;if(t.dragActive||_e.dragExceeded(t,e)){if(!t.dragActive){var i=t.tab.getBoundingClientRect();"horizontal"===this._orientation?(t.tabPos=t.tab.offsetLeft,t.tabSize=i.width,t.tabPressPos=t.pressX-i.left):(t.tabPos=t.tab.offsetTop,t.tabSize=i.height,t.tabPressPos=t.pressY-i.top),t.tabLayout=_e.snapTabLayout(n,this._orientation),t.contentRect=this.contentNode.getBoundingClientRect(),t.override=b.overrideCursor("default"),t.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),t.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),t.dragActive=!0}if(!t.detachRequested&&_e.detachExceeded(t,e)){t.detachRequested=!0;var r=t.index,s=e.clientX,a=e.clientY,o=n[r],l=this._titles[r];if(this._tabDetachRequested.emit({index:r,title:l,tab:o,clientX:s,clientY:a}),t.dragAborted)return}_e.layoutTabs(n,t,e,this._orientation)}}},t.prototype._evtMouseUp=function(e){var t=this;if(0===e.button||1===e.button){var n=this._dragData;if(n){if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!n.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target))return void this._addRequested.emit(void 0);var i=this.contentNode.children,s=l.Rw.findFirstIndex(i,(function(t){return r.hitTest(t,e.clientX,e.clientY)}));if(s!==n.index)return;var a=this._titles[s];if(!a.closable)return;if(1===e.button)return void this._tabCloseRequested.emit({index:s,title:a});var o=i[s].querySelector(this.renderer.closeIconSelector);return o&&o.contains(e.target)?void this._tabCloseRequested.emit({index:s,title:a}):void 0}if(0===e.button){_e.finalizeTabPosition(n,this._orientation),n.tab.classList.remove("lm-mod-dragging"),n.tab.classList.remove("p-mod-dragging");var c=_e.parseTransitionDuration(n.tab);setTimeout((function(){if(!n.dragAborted){t._dragData=null,_e.resetTabPositions(t.contentNode.children,t._orientation),n.override.dispose(),t.removeClass("lm-mod-dragging"),t.removeClass("p-mod-dragging");var e=n.index,i=n.targetIndex;-1!==i&&e!==i&&(l.Rw.move(t._titles,e,i),t._adjustCurrentForMove(e,i),t._tabMoved.emit({fromIndex:e,toIndex:i,title:t._titles[i]}),u.MessageLoop.sendMessage(t,U.Msg.UpdateRequest))}}),c)}}}},t.prototype._releaseMouse=function(){var e=this._dragData;e&&(this._dragData=null,this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(_e.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),e.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))},t.prototype._adjustCurrentForInsert=function(e,t){var n=this.currentTitle,i=this._currentIndex,r=this.insertBehavior;if("select-tab"===r||"select-tab-if-needed"===r&&-1===i)return this._currentIndex=e,this._previousTitle=n,void this._currentChanged.emit({previousIndex:i,previousTitle:n,currentIndex:e,currentTitle:t});i>=e&&this._currentIndex++},t.prototype._adjustCurrentForMove=function(e,t){this._currentIndex===e?this._currentIndex=t:this._currentIndex<e&&this._currentIndex>=t?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=t&&this._currentIndex--},t.prototype._adjustCurrentForRemove=function(e,t){var n=this._currentIndex,i=this.removeBehavior;if(n===e){if(0===this._titles.length)return this._currentIndex=-1,void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null});if("select-tab-after"===i)return this._currentIndex=Math.min(e,this._titles.length-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-tab-before"===i)return this._currentIndex=Math.max(0,e-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-previous-tab"===i)return this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}else n>e&&this._currentIndex--},t.prototype._onTitleChanged=function(e){this.update()},t}(U);!function(e){var t=function(){function e(){this.closeIconSelector=".lm-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=new WeakMap,this._uuid=++e._nInstance}return e.prototype.renderTab=function(e){var t=e.title.caption,n=this.createTabKey(e),i=n,r=this.createTabStyle(e),s=this.createTabClass(e),a=this.createTabDataset(e),o=this.createTabARIA(e);return e.title.closable?z.li(N({id:i,key:n,className:s,title:t,style:r,dataset:a},o),this.renderIcon(e),this.renderLabel(e),this.renderCloseIcon(e)):z.li(N({id:i,key:n,className:s,title:t,style:r,dataset:a},o),this.renderIcon(e),this.renderLabel(e))},e.prototype.renderIcon=function(e){var t=e.title,n=this.createIconClass(e);return"string"==typeof t.icon?z.div({className:n},t.iconLabel):z.div({className:n},t.icon,t.iconLabel)},e.prototype.renderLabel=function(e){return z.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},e.title.label)},e.prototype.renderCloseIcon=function(e){return z.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})},e.prototype.createTabKey=function(e){var t=this._tabKeys.get(e.title);return void 0===t&&(t="tab-key-"+this._uuid+"-"+this._tabID++,this._tabKeys.set(e.title,t)),t},e.prototype.createTabStyle=function(e){return{zIndex:""+e.zIndex}},e.prototype.createTabClass=function(e){var t="lm-TabBar-tab";return t+=" p-TabBar-tab",e.title.className&&(t+=" "+e.title.className),e.title.closable&&(t+=" lm-mod-closable",t+=" p-mod-closable"),e.current&&(t+=" lm-mod-current",t+=" p-mod-current"),t},e.prototype.createTabDataset=function(e){return e.title.dataset},e.prototype.createTabARIA=function(e){return{role:"tab","aria-selected":e.current.toString()}},e.prototype.createIconClass=function(e){var t="lm-TabBar-tabIcon";t+=" p-TabBar-tabIcon";var n=e.title.iconClass;return n?t+" "+n:t},e._nInstance=0,e}();e.Renderer=t,e.defaultRenderer=new t,e.addButtonSelector=".lm-TabBar-addButton"}(ge||(ge={})),function(e){e.DRAG_THRESHOLD=5,e.DETACH_THRESHOLD=20,e.createNode=function(){var e=document.createElement("div"),t=document.createElement("ul");t.setAttribute("role","tablist"),t.className="lm-TabBar-content",t.classList.add("p-TabBar-content"),e.appendChild(t);var n=document.createElement("div");return n.className="lm-TabBar-addButton lm-mod-hidden",e.appendChild(n),e},e.asTitle=function(e){return e instanceof j?e:new j(e)},e.parseTransitionDuration=function(e){var t=window.getComputedStyle(e);return 1e3*(parseFloat(t.transitionDuration)||0)},e.snapTabLayout=function(e,t){for(var n=new Array(e.length),i=0,r=e.length;i<r;++i){var s=e[i],a=window.getComputedStyle(s);n[i]="horizontal"===t?{pos:s.offsetLeft,size:s.offsetWidth,margin:parseFloat(a.marginLeft)||0}:{pos:s.offsetTop,size:s.offsetHeight,margin:parseFloat(a.marginTop)||0}}return n},e.dragExceeded=function(t,n){var i=Math.abs(n.clientX-t.pressX),r=Math.abs(n.clientY-t.pressY);return i>=e.DRAG_THRESHOLD||r>=e.DRAG_THRESHOLD},e.detachExceeded=function(t,n){var i=t.contentRect;return n.clientX<i.left-e.DETACH_THRESHOLD||n.clientX>=i.right+e.DETACH_THRESHOLD||n.clientY<i.top-e.DETACH_THRESHOLD||n.clientY>=i.bottom+e.DETACH_THRESHOLD},e.layoutTabs=function(e,t,n,i){var r,s,a,o;"horizontal"===i?(r=t.pressX,s=n.clientX-t.contentRect.left,a=n.clientX,o=t.contentRect.width):(r=t.pressY,s=n.clientY-t.contentRect.top,a=n.clientY,o=t.contentRect.height);for(var l=t.index,c=s-t.tabPressPos,u=c+t.tabSize,h=0,d=e.length;h<d;++h){var f=void 0,p=t.tabLayout[h],m=p.pos+(p.size>>1);if(h<t.index&&c<m)f=t.tabSize+t.tabLayout[h+1].margin+"px",l=Math.min(l,h);else if(h>t.index&&u>m)f=-t.tabSize-p.margin+"px",l=Math.max(l,h);else if(h===t.index){var _=a-r,g=o-(t.tabPos+t.tabSize);f=Math.max(-t.tabPos,Math.min(_,g))+"px"}else f="";"horizontal"===i?e[h].style.left=f:e[h].style.top=f}t.targetIndex=l},e.finalizeTabPosition=function(e,t){var n,i;if(n="horizontal"===t?e.contentRect.width:e.contentRect.height,e.targetIndex===e.index)i=0;else if(e.targetIndex>e.index)i=(r=e.tabLayout[e.targetIndex]).pos+r.size-e.tabSize-e.tabPos;else{var r;i=(r=e.tabLayout[e.targetIndex]).pos-e.tabPos}var s=n-(e.tabPos+e.tabSize),a=Math.max(-e.tabPos,Math.min(i,s));"horizontal"===t?e.tab.style.left=a+"px":e.tab.style.top=a+"px"},e.resetTabPositions=function(e,t){(0,l.__)(e,(function(e){"horizontal"===t?e.style.left="":e.style.top=""}))}}(_e||(_e={}));var ye,ve=function(e){function t(t){var n=e.call(this)||this;return n._spacing=4,n._dirty=!1,n._root=null,n._box=null,n._items=new Map,n.renderer=t.renderer,void 0!==t.spacing&&(n._spacing=J.clampDimension(t.spacing)),n._document=t.document||document,n._hiddenMode=void 0!==t.hiddenMode?t.hiddenMode:U.HiddenMode.Display,n}return Y(t,e),t.prototype.dispose=function(){var t=this.iter();this._items.forEach((function(e){e.dispose()})),this._box=null,this._root=null,this._items.clear(),(0,l.__)(t,(function(e){e.dispose()})),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"hiddenMode",{get:function(){return this._hiddenMode},set:function(e){var t=this;this._hiddenMode!==e&&(this._hiddenMode=e,(0,l.__)(this.tabBars(),(function(e){e.titles.length>1&&e.titles.forEach((function(e){e.owner.hiddenMode=t._hiddenMode}))})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){e=J.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return null===this._root},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return this._root?this._root.iterAllWidgets():(0,l.Ie)()},t.prototype.widgets=function(){return this._root?this._root.iterUserWidgets():(0,l.Ie)()},t.prototype.selectedWidgets=function(){return this._root?this._root.iterSelectedWidgets():(0,l.Ie)()},t.prototype.tabBars=function(){return this._root?this._root.iterTabBars():(0,l.Ie)()},t.prototype.handles=function(){return this._root?this._root.iterHandles():(0,l.Ie)()},t.prototype.moveHandle=function(e,t,n){var i=e.classList.contains("lm-mod-hidden");if(i=i||e.classList.contains("p-mod-hidden"),this._root&&!i){var r,s=this._root.findSplitNode(e);s&&0!=(r="horizontal"===s.node.orientation?t-e.offsetLeft:n-e.offsetTop)&&(s.node.holdSizes(),F.adjust(s.node.sizers,s.index,r),this.parent&&this.parent.update())}},t.prototype.saveLayout=function(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}},t.prototype.restoreLayout=function(e){var t,n=this,i=new Set;t=e.main?ye.normalizeAreaConfig(e.main,i):null;var r=this.widgets(),s=this.tabBars(),a=this.handles();this._root=null,(0,l.__)(r,(function(e){i.has(e)||(e.parent=null)})),(0,l.__)(s,(function(e){e.dispose()})),(0,l.__)(a,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),i.forEach((function(e){e.parent=n.parent})),this._root=t?ye.realizeAreaConfig(t,{createTabBar:function(e){return n._createTabBar()},createHandle:function(){return n._createHandle()}},this._document):null,this.parent&&(i.forEach((function(e){n.attachWidget(e)})),this.parent.fit())},t.prototype.addWidget=function(e,t){void 0===t&&(t={});var n=t.ref||null,i=t.mode||"tab-after",r=null;if(this._root&&n&&(r=this._root.findTabNode(n)),n&&!r)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,i){case"tab-after":this._insertTab(e,n,r,!0);break;case"tab-before":this._insertTab(e,n,r,!1);break;case"split-top":this._insertSplit(e,n,r,"vertical",!1);break;case"split-left":this._insertSplit(e,n,r,"horizontal",!1);break;case"split-right":this._insertSplit(e,n,r,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,n,r,"vertical",!0)}this.parent&&(this.attachWidget(e),this.parent.fit())},t.prototype.removeWidget=function(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())},t.prototype.hitTestTabAreas=function(e,t){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=r.boxSizing(this.parent.node));var n=this.parent.node.getBoundingClientRect(),i=e-n.left-this._box.borderLeft,s=t-n.top-this._box.borderTop,a=this._root.hitTestTabNodes(i,s);if(!a)return null;var o=a.tabBar,l=a.top,c=a.left,u=a.width,h=a.height,d=this._box.borderLeft+this._box.borderRight,f=this._box.borderTop+this._box.borderBottom;return{tabBar:o,x:i,y:s,top:l,left:c,right:n.width-d-(c+u),bottom:n.height-f-(l+h),width:u,height:h}},t.prototype.init=function(){var t=this;e.prototype.init.call(this),(0,l.__)(this,(function(e){t.attachWidget(e)})),(0,l.__)(this.handles(),(function(e){t.parent.node.appendChild(e)})),this.parent.fit()},t.prototype.attachWidget=function(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new V(e)),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.AfterAttach))},t.prototype.detachWidget=function(e){if(this.parent.node===e.node.parentNode){this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.AfterDetach);var t=this._items.get(e);t&&(this._items.delete(e),t.dispose())}},t.prototype.onBeforeShow=function(t){e.prototype.onBeforeShow.call(this,t),this.parent.update()},t.prototype.onBeforeAttach=function(t){e.prototype.onBeforeAttach.call(this,t),this.parent.fit()},t.prototype.onChildShown=function(e){this.parent.fit()},t.prototype.onChildHidden=function(e){this.parent.fit()},t.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},t.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},t.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},t.prototype._removeWidget=function(e){if(this._root){var t=this._root.findTabNode(e);if(t)if(ye.removeAria(e),t.tabBar.titles.length>1)t.tabBar.removeTab(e.title),this._hiddenMode===U.HiddenMode.Scale&&1==t.tabBar.titles.length&&(t.tabBar.titles[0].owner.hiddenMode=U.HiddenMode.Display);else if(t.tabBar.dispose(),this._root!==t){this._root.holdAllSizes();var n=t.parent;t.parent=null;var i=l.Rw.removeFirstOf(n.children,t),r=l.Rw.removeAt(n.handles,i);if(l.Rw.removeAt(n.sizers,i),r.parentNode&&r.parentNode.removeChild(r),n.children.length>1)n.syncHandles();else{var s=n.parent;n.parent=null;var a=n.children[0],o=n.handles[0];if(n.children.length=0,n.handles.length=0,n.sizers.length=0,o.parentNode&&o.parentNode.removeChild(o),this._root===n)return a.parent=null,void(this._root=a);var c=s,u=c.children.indexOf(n);if(a instanceof ye.TabLayoutNode)return a.parent=c,void(c.children[u]=a);var h=l.Rw.removeAt(c.handles,u);l.Rw.removeAt(c.children,u),l.Rw.removeAt(c.sizers,u),h.parentNode&&h.parentNode.removeChild(h);for(var d=0,f=a.children.length;d<f;++d){var p=a.children[d],m=a.handles[d],_=a.sizers[d];l.Rw.insert(c.children,u+d,p),l.Rw.insert(c.handles,u+d,m),l.Rw.insert(c.sizers,u+d,_),p.parent=c}a.children.length=0,a.handles.length=0,a.sizers.length=0,a.parent=null,c.syncHandles()}}else this._root=null}},t.prototype._insertTab=function(e,t,n,i){if(e!==t){if(!this._root){var r=new ye.TabLayoutNode(this._createTabBar());return r.tabBar.addTab(e.title),this._root=r,void ye.addAria(e,r.tabBar)}var s;n||(n=this._root.findFirstTabNode()),-1===n.tabBar.titles.indexOf(e.title)&&(this._removeWidget(e),e.hide()),s=t?n.tabBar.titles.indexOf(t.title):n.tabBar.currentIndex,this._hiddenMode===U.HiddenMode.Scale?0===n.tabBar.titles.length?e.hiddenMode=U.HiddenMode.Display:1==n.tabBar.titles.length?n.tabBar.titles[0].owner.hiddenMode=U.HiddenMode.Scale:e.hiddenMode=U.HiddenMode.Scale:e.hiddenMode=this._hiddenMode,n.tabBar.insertTab(s+(i?1:0),e.title),ye.addAria(e,n.tabBar)}},t.prototype._insertSplit=function(e,t,n,i,r){if(e!==t||!n||1!==n.tabBar.titles.length){this._removeWidget(e);var s=new ye.TabLayoutNode(this._createTabBar());if(s.tabBar.addTab(e.title),ye.addAria(e,s.tabBar),this._root){if(!n||!n.parent){var a=this._splitRoot(i),o=r?a.children.length:0;a.normalizeSizes();var c=ye.createSizer(n?1:ye.GOLDEN_RATIO);return l.Rw.insert(a.children,o,s),l.Rw.insert(a.sizers,o,c),l.Rw.insert(a.handles,o,this._createHandle()),s.parent=a,a.normalizeSizes(),void a.syncHandles()}var u=n.parent;if(u.orientation===i){var h=u.children.indexOf(n);u.normalizeSizes();var d=u.sizers[h].sizeHint/=2,f=h+(r?1:0);return l.Rw.insert(u.children,f,s),l.Rw.insert(u.sizers,f,ye.createSizer(d)),l.Rw.insert(u.handles,f,this._createHandle()),s.parent=u,void u.syncHandles()}var p=l.Rw.removeFirstOf(u.children,n),m=new ye.SplitLayoutNode(i);m.normalized=!0,m.children.push(n),m.sizers.push(ye.createSizer(.5)),m.handles.push(this._createHandle()),n.parent=m;var _=r?1:0;l.Rw.insert(m.children,_,s),l.Rw.insert(m.sizers,_,ye.createSizer(.5)),l.Rw.insert(m.handles,_,this._createHandle()),s.parent=m,m.syncHandles(),l.Rw.insert(u.children,p,m),m.parent=u}else this._root=s}},t.prototype._splitRoot=function(e){var t=this._root;if(t instanceof ye.SplitLayoutNode&&t.orientation===e)return t;var n=this._root=new ye.SplitLayoutNode(e);return t&&(n.children.push(t),n.sizers.push(ye.createSizer(0)),n.handles.push(this._createHandle()),t.parent=n),n},t.prototype._fit=function(){var e=0,t=0;if(this._root){var n=this._root.fit(this._spacing,this._items);e=n.minWidth,t=n.minHeight}var i=this._box=r.boxSizing(this.parent.node);e+=i.horizontalSum,t+=i.verticalSum;var s=this.parent.node.style;s.minWidth=e+"px",s.minHeight=t+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,U.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,U.Msg.UpdateRequest)},t.prototype._update=function(e,t){if(this._dirty=!1,this._root){e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=r.boxSizing(this.parent.node));var n=this._box.paddingTop,i=this._box.paddingLeft,s=e-this._box.horizontalSum,a=t-this._box.verticalSum;this._root.update(n,i,s,a,this._spacing,this._items)}},t.prototype._createTabBar=function(){var e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&(e.parent=this.parent,this.attachWidget(e)),e},t.prototype._createHandle=function(){var e=this.renderer.createHandle(),t=e.style;return t.position="absolute",t.top="0",t.left="0",t.width="0",t.height="0",this.parent&&this.parent.node.appendChild(e),e},t}(W);!function(e){function t(e){var t=new I;return t.sizeHint=e,t.size=e,t}e.GOLDEN_RATIO=.618,e.createSizer=t,e.normalizeAreaConfig=function e(t,n){var i;return i="tab-area"===t.type?function(e,t){if(0===e.widgets.length)return null;var n=[];if((0,l.__)(e.widgets,(function(e){t.has(e)||(t.add(e),n.push(e))})),0===n.length)return null;var i=e.currentIndex;return-1!==i&&(i<0||i>=n.length)&&(i=0),{type:"tab-area",widgets:n,currentIndex:i}}(t,n):function(t,n){for(var i=t.orientation,r=[],s=[],a=0,o=t.children.length;a<o;++a){var l=e(t.children[a],n);l&&("tab-area"===l.type||l.orientation!==i?(r.push(l),s.push(Math.abs(t.sizes[a]||0))):(r.push.apply(r,l.children),s.push.apply(s,l.sizes)))}return 0===r.length?null:1===r.length?r[0]:{type:"split-area",orientation:i,children:r,sizes:s}}(t,n),i},e.realizeAreaConfig=function r(s,a,o){var c;return c="tab-area"===s.type?function(t,i,r){var s=i.createTabBar(r);return(0,l.__)(t.widgets,(function(t){t.hide(),s.addTab(t.title),e.addAria(t,s)})),s.currentIndex=t.currentIndex,new n(s)}(s,a,o):function(e,n,s){var a=new i(e.orientation);return(0,l.__)(e.children,(function(i,o){var l=r(i,n,s),c=t(e.sizes[o]),u=n.createHandle();a.children.push(l),a.handles.push(u),a.sizers.push(c),l.parent=a})),a.syncHandles(),a.normalizeSizes(),a}(s,a,o),c};var n=function(){function e(e){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;var t=new I,n=new I;t.stretch=0,n.stretch=1,this.tabBar=e,this.sizers=[t,n]}return Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.iterAllWidgets=function(){return(0,l.cy)((0,l.v3)(this.tabBar),this.iterUserWidgets())},e.prototype.iterUserWidgets=function(){return(0,l.Tj)(this.tabBar.titles,(function(e){return e.owner}))},e.prototype.iterSelectedWidgets=function(){var e=this.tabBar.currentTitle;return e?(0,l.v3)(e.owner):(0,l.Ie)()},e.prototype.iterTabBars=function(){return(0,l.v3)(this.tabBar)},e.prototype.iterHandles=function(){return(0,l.Ie)()},e.prototype.findTabNode=function(e){return-1!==this.tabBar.titles.indexOf(e.title)?this:null},e.prototype.findSplitNode=function(e){return null},e.prototype.findFirstTabNode=function(){return this},e.prototype.hitTestTabNodes=function(e,t){return e<this._left||e>=this._left+this._width||t<this._top||t>=this._top+this._height?null:this},e.prototype.createConfig=function(){return{type:"tab-area",widgets:this.tabBar.titles.map((function(e){return e.owner})),currentIndex:this.tabBar.currentIndex}},e.prototype.holdAllSizes=function(){},e.prototype.fit=function(e,t){var n=0,i=0,r=t.get(this.tabBar),s=this.tabBar.currentTitle,a=s?t.get(s.owner):void 0,o=this.sizers,l=o[0],c=o[1];return r&&r.fit(),a&&a.fit(),r&&!r.isHidden?(n=Math.max(n,r.minWidth),i+=r.minHeight,l.minSize=r.minHeight,l.maxSize=r.maxHeight):(l.minSize=0,l.maxSize=0),a&&!a.isHidden?(n=Math.max(n,a.minWidth),i+=a.minHeight,c.minSize=a.minHeight,c.maxSize=1/0):(c.minSize=0,c.maxSize=1/0),{minWidth:n,minHeight:i,maxWidth:1/0,maxHeight:1/0}},e.prototype.update=function(e,t,n,i,r,s){this._top=t,this._left=e,this._width=n,this._height=i;var a=s.get(this.tabBar),o=this.tabBar.currentTitle,l=o?s.get(o.owner):void 0;if(F.calc(this.sizers,i),a&&!a.isHidden){var c=this.sizers[0].size;a.update(e,t,n,c),t+=c}l&&!l.isHidden&&(c=this.sizers[1].size,l.update(e,t,n,c))},e}();e.TabLayoutNode=n;var i=function(){function e(e){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=e}return e.prototype.iterAllWidgets=function(){var e=(0,l.Tj)(this.children,(function(e){return e.iterAllWidgets()}));return new l.KO(e)},e.prototype.iterUserWidgets=function(){var e=(0,l.Tj)(this.children,(function(e){return e.iterUserWidgets()}));return new l.KO(e)},e.prototype.iterSelectedWidgets=function(){var e=(0,l.Tj)(this.children,(function(e){return e.iterSelectedWidgets()}));return new l.KO(e)},e.prototype.iterTabBars=function(){var e=(0,l.Tj)(this.children,(function(e){return e.iterTabBars()}));return new l.KO(e)},e.prototype.iterHandles=function(){var e=(0,l.Tj)(this.children,(function(e){return e.iterHandles()}));return(0,l.cy)(this.handles,new l.KO(e))},e.prototype.findTabNode=function(e){for(var t=0,n=this.children.length;t<n;++t){var i=this.children[t].findTabNode(e);if(i)return i}return null},e.prototype.findSplitNode=function(e){var t=this.handles.indexOf(e);if(-1!==t)return{index:t,node:this};for(var n=0,i=this.children.length;n<i;++n){var r=this.children[n].findSplitNode(e);if(r)return r}return null},e.prototype.findFirstTabNode=function(){return 0===this.children.length?null:this.children[0].findFirstTabNode()},e.prototype.hitTestTabNodes=function(e,t){for(var n=0,i=this.children.length;n<i;++n){var r=this.children[n].hitTestTabNodes(e,t);if(r)return r}return null},e.prototype.createConfig=function(){var e=this.orientation,t=this.createNormalizedSizes();return{type:"split-area",orientation:e,children:this.children.map((function(e){return e.createConfig()})),sizes:t}},e.prototype.syncHandles=function(){var e=this;(0,l.__)(this.handles,(function(t,n){t.setAttribute("data-orientation",e.orientation),n===e.handles.length-1?(t.classList.add("lm-mod-hidden"),t.classList.add("p-mod-hidden")):(t.classList.remove("lm-mod-hidden"),t.classList.remove("p-mod-hidden"))}))},e.prototype.holdSizes=function(){(0,l.__)(this.sizers,(function(e){e.sizeHint=e.size}))},e.prototype.holdAllSizes=function(){(0,l.__)(this.children,(function(e){return e.holdAllSizes()})),this.holdSizes()},e.prototype.normalizeSizes=function(){var e=this.sizers.length;if(0!==e){this.holdSizes();var t=(0,l.TS)(this.sizers,(function(e,t){return e+t.sizeHint}),0);0===t?(0,l.__)(this.sizers,(function(t){t.size=t.sizeHint=1/e})):(0,l.__)(this.sizers,(function(e){e.size=e.sizeHint/=t})),this.normalized=!0}},e.prototype.createNormalizedSizes=function(){var e=this.sizers.length;if(0===e)return[];var t=this.sizers.map((function(e){return e.size})),n=(0,l.TS)(t,(function(e,t){return e+t}),0);return 0===n?(0,l.__)(t,(function(n,i){t[i]=1/e})):(0,l.__)(t,(function(e,i){t[i]=e/n})),t},e.prototype.fit=function(e,t){for(var n="horizontal"===this.orientation,i=Math.max(0,this.children.length-1)*e,r=n?i:0,s=n?0:i,a=0,o=this.children.length;a<o;++a){var l=this.children[a].fit(e,t);n?(s=Math.max(s,l.minHeight),r+=l.minWidth,this.sizers[a].minSize=l.minWidth):(r=Math.max(r,l.minWidth),s+=l.minHeight,this.sizers[a].minSize=l.minHeight)}return{minWidth:r,minHeight:s,maxWidth:1/0,maxHeight:1/0}},e.prototype.update=function(e,t,n,i,r,s){var a="horizontal"===this.orientation,o=Math.max(0,this.children.length-1)*r,c=Math.max(0,(a?n:i)-o);this.normalized&&((0,l.__)(this.sizers,(function(e){e.sizeHint*=c})),this.normalized=!1),F.calc(this.sizers,c);for(var u=0,h=this.children.length;u<h;++u){var d=this.children[u],f=this.sizers[u].size,p=this.handles[u].style;a?(d.update(e,t,f,i,r,s),e+=f,p.top=t+"px",p.left=e+"px",p.width=r+"px",p.height=i+"px",e+=r):(d.update(e,t,n,f,r,s),t+=f,p.top=t+"px",p.left=e+"px",p.width=n+"px",p.height=r+"px",t+=r)}},e}();e.SplitLayoutNode=i,e.addAria=function(e,t){e.node.setAttribute("role","tabpanel");var n=t.renderer;if(n instanceof ge.Renderer){var i=n.createTabKey({title:e.title,current:!1,zIndex:0});e.node.setAttribute("aria-labelledby",i)}},e.removeAria=function(e){e.node.removeAttribute("role"),e.node.removeAttribute("aria-labelledby")}}(ye||(ye={}));var be,xe=function(e){function t(n){void 0===n&&(n={});var i=e.call(this)||this;i._drag=null,i._tabsMovable=!0,i._tabsConstrained=!1,i._addButtonEnabled=!1,i._pressData=null,i._layoutModified=new f(i),i._addRequested=new f(i),i.addClass("lm-DockPanel"),i.addClass("p-DockPanel"),i._document=n.document||document,i._mode=n.mode||"multiple-document",i._renderer=n.renderer||t.defaultRenderer,i._edges=n.edges||be.DEFAULT_EDGES,void 0!==n.tabsMovable&&(i._tabsMovable=n.tabsMovable),void 0!==n.tabsConstrained&&(i._tabsConstrained=n.tabsConstrained),void 0!==n.addButtonEnabled&&(i._addButtonEnabled=n.addButtonEnabled),i.dataset.mode=i._mode;var r={createTabBar:function(){return i._createTabBar()},createHandle:function(){return i._createHandle()}};return i.layout=new ve({document:i._document,renderer:r,spacing:n.spacing,hiddenMode:n.hiddenMode}),i.overlay=n.overlay||new t.Overlay,i.node.appendChild(i.overlay.node),i}return Y(t,e),t.prototype.dispose=function(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"hiddenMode",{get:function(){return this.layout.hiddenMode},set:function(e){this.layout.hiddenMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutModified",{get:function(){return this._layoutModified},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addRequested",{get:function(){return this._addRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(e){this.layout.spacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){if(this._mode!==e){this._mode=e,this.dataset.mode=e;var t=this.layout;switch(e){case"multiple-document":(0,l.__)(t.tabBars(),(function(e){e.show()}));break;case"single-document":t.restoreLayout(be.createSingleDocumentConfig(this));break;default:throw"unreachable"}u.MessageLoop.postMessage(this,be.LayoutModified)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabsMovable",{get:function(){return this._tabsMovable},set:function(e){this._tabsMovable=e,(0,l.__)(this.tabBars(),(function(t){t.tabsMovable=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabsConstrained",{get:function(){return this._tabsConstrained},set:function(e){this._tabsConstrained=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addButtonEnabled",{get:function(){return this._addButtonEnabled},set:function(e){this._addButtonEnabled=e,(0,l.__)(this.tabBars(),(function(t){t.addButtonEnabled=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.layout.isEmpty},enumerable:!0,configurable:!0}),t.prototype.widgets=function(){return this.layout.widgets()},t.prototype.selectedWidgets=function(){return this.layout.selectedWidgets()},t.prototype.tabBars=function(){return this.layout.tabBars()},t.prototype.handles=function(){return this.layout.handles()},t.prototype.selectWidget=function(e){var t=(0,l.I6)(this.tabBars(),(function(t){return-1!==t.titles.indexOf(e.title)}));if(!t)throw new Error("Widget is not contained in the dock panel.");t.currentTitle=e.title},t.prototype.activateWidget=function(e){this.selectWidget(e),e.activate()},t.prototype.saveLayout=function(){return this.layout.saveLayout()},t.prototype.restoreLayout=function(e){this._mode="multiple-document",this.layout.restoreLayout(e),(s.IS_EDGE||s.IS_IE)&&u.MessageLoop.flush(),u.MessageLoop.postMessage(this,be.LayoutModified)},t.prototype.addWidget=function(e,t){void 0===t&&(t={}),"single-document"===this._mode?this.layout.addWidget(e):this.layout.addWidget(e,t),u.MessageLoop.postMessage(this,be.LayoutModified)},t.prototype.processMessage=function(t){"layout-modified"===t.type?this._layoutModified.emit(void 0):e.prototype.processMessage.call(this,t)},t.prototype.handleEvent=function(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"mousedown":case"pointerdown":this._evtMouseDown(e);break;case"mousemove":case"pointermove":this._evtMouseMove(e);break;case"mouseup":case"pointerup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()},t.prototype.onChildAdded=function(e){be.isGeneratedTabBarProperty.get(e.child)||(e.child.addClass("lm-DockPanel-widget"),e.child.addClass("p-DockPanel-widget"))},t.prototype.onChildRemoved=function(e){be.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),e.child.removeClass("p-DockPanel-widget"),u.MessageLoop.postMessage(this,be.LayoutModified))},t.prototype._evtDragEnter=function(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())},t.prototype._evtDragLeave=function(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||(e.stopPropagation(),this.overlay.hide(1))},t.prototype._evtDragOver=function(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||"invalid"===this._showOverlay(e.clientX,e.clientY)?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)},t.prototype._evtDrop=function(e){if(e.preventDefault(),this.overlay.hide(0),"none"!==e.proposedAction){var t=e.clientX,n=e.clientY,i=be.findDropTarget(this,t,n,this._edges),r=i.zone,s=i.target;if(this._tabsConstrained&&e.source!==this||"invalid"===r)e.dropAction="none";else{var a=e.mimeData.getData("application/vnd.lumino.widget-factory");if("function"==typeof a){var o=a();if(o instanceof U)if(o.contains(this))e.dropAction="none";else{var l=s?be.getDropRef(s.tabBar):null;switch(r){case"root-all":this.addWidget(o);break;case"root-top":this.addWidget(o,{mode:"split-top"});break;case"root-left":this.addWidget(o,{mode:"split-left"});break;case"root-right":this.addWidget(o,{mode:"split-right"});break;case"root-bottom":this.addWidget(o,{mode:"split-bottom"});break;case"widget-all":case"widget-tab":this.addWidget(o,{mode:"tab-after",ref:l});break;case"widget-top":this.addWidget(o,{mode:"split-top",ref:l});break;case"widget-left":this.addWidget(o,{mode:"split-left",ref:l});break;case"widget-right":this.addWidget(o,{mode:"split-right",ref:l});break;case"widget-bottom":this.addWidget(o,{mode:"split-bottom",ref:l});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(o)}else e.dropAction="none"}else e.dropAction="none"}}else e.dropAction="none"},t.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&(this._releaseMouse(),u.MessageLoop.postMessage(this,be.LayoutModified))},t.prototype._evtMouseDown=function(e){if(0===e.button){var t=this.layout,n=e.target,i=(0,l.I6)(t.handles(),(function(e){return e.contains(n)}));if(i){e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("mouseup",this,!0),this._document.addEventListener("mousemove",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);var r=i.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top,o=window.getComputedStyle(i),c=b.overrideCursor(o.cursor,this._document);this._pressData={handle:i,deltaX:s,deltaY:a,override:c}}}},t.prototype._evtMouseMove=function(e){if(this._pressData){e.preventDefault(),e.stopPropagation();var t=this.node.getBoundingClientRect(),n=e.clientX-t.left-this._pressData.deltaX,i=e.clientY-t.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,n,i)}},t.prototype._evtMouseUp=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),u.MessageLoop.postMessage(this,be.LayoutModified))},t.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("mouseup",this,!0),this._document.removeEventListener("mousemove",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))},t.prototype._showOverlay=function(e,t){var n,i,s,a,o=be.findDropTarget(this,e,t,this._edges),l=o.zone,c=o.target;if("invalid"===l)return this.overlay.hide(100),l;var u=r.boxSizing(this.node),h=this.node.getBoundingClientRect();switch(l){case"root-all":n=u.paddingTop,i=u.paddingLeft,s=u.paddingRight,a=u.paddingBottom;break;case"root-top":n=u.paddingTop,i=u.paddingLeft,s=u.paddingRight,a=h.height*be.GOLDEN_RATIO;break;case"root-left":n=u.paddingTop,i=u.paddingLeft,s=h.width*be.GOLDEN_RATIO,a=u.paddingBottom;break;case"root-right":n=u.paddingTop,i=h.width*be.GOLDEN_RATIO,s=u.paddingRight,a=u.paddingBottom;break;case"root-bottom":n=h.height*be.GOLDEN_RATIO,i=u.paddingLeft,s=u.paddingRight,a=u.paddingBottom;break;case"widget-all":n=c.top,i=c.left,s=c.right,a=c.bottom;break;case"widget-top":n=c.top,i=c.left,s=c.right,a=c.bottom+c.height/2;break;case"widget-left":n=c.top,i=c.left,s=c.right+c.width/2,a=c.bottom;break;case"widget-right":n=c.top,i=c.left+c.width/2,s=c.right,a=c.bottom;break;case"widget-bottom":n=c.top+c.height/2,i=c.left,s=c.right,a=c.bottom;break;case"widget-tab":var d=c.tabBar.node.getBoundingClientRect().height;n=c.top,i=c.left,s=c.right,a=c.bottom+c.height-d;break;default:throw"unreachable"}return this.overlay.show({top:n,left:i,right:s,bottom:a}),l},t.prototype._createTabBar=function(){var e=this._renderer.createTabBar(this._document);return be.isGeneratedTabBarProperty.set(e,!0),"single-document"===this._mode&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e},t.prototype._createHandle=function(){return this._renderer.createHandle()},t.prototype._onTabMoved=function(){u.MessageLoop.postMessage(this,be.LayoutModified)},t.prototype._onCurrentChanged=function(e,t){var n=t.previousTitle,i=t.currentTitle;n&&n.owner.hide(),i&&i.owner.show(),(s.IS_EDGE||s.IS_IE)&&u.MessageLoop.flush(),u.MessageLoop.postMessage(this,be.LayoutModified)},t.prototype._onTabAddRequested=function(e){this._addRequested.emit(e)},t.prototype._onTabActivateRequested=function(e,t){t.title.owner.activate()},t.prototype._onTabCloseRequested=function(e,t){t.title.owner.close()},t.prototype._onTabDetachRequested=function(e,t){var n=this;if(!this._drag){e.releaseMouse();var i=t.title,r=t.tab,s=t.clientX,a=t.clientY,o=new x.MimeData;o.setData("application/vnd.lumino.widget-factory",(function(){return i.owner}));var l=r.cloneNode(!0);this._drag=new b({document:this._document,mimeData:o,dragImage:l,proposedAction:"move",supportedActions:"move",source:this}),r.classList.add("lm-mod-hidden"),r.classList.add("p-mod-hidden"),this._drag.start(s,a).then((function(){n._drag=null,r.classList.remove("lm-mod-hidden"),r.classList.remove("p-mod-hidden")}))}},t}(U);!function(e){var t=function(){function e(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}return e.prototype.show=function(e){var t=this.node.style;t.top=e.top+"px",t.left=e.left+"px",t.right=e.right+"px",t.bottom=e.bottom+"px",clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))},e.prototype.hide=function(e){var t=this;if(!this._hidden)return e<=0?(clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),void this.node.classList.add("p-mod-hidden")):void(-1===this._timer&&(this._timer=window.setTimeout((function(){t._timer=-1,t._hidden=!0,t.node.classList.add("lm-mod-hidden"),t.node.classList.add("p-mod-hidden")}),e)))},e}();e.Overlay=t;var n=function(){function e(){}return e.prototype.createTabBar=function(e){var t=new ge({document:e});return t.addClass("lm-DockPanel-tabBar"),t.addClass("p-DockPanel-tabBar"),t},e.prototype.createHandle=function(){var e=document.createElement("div");return e.className="lm-DockPanel-handle",e.classList.add("p-DockPanel-handle"),e},e}();e.Renderer=n,e.defaultRenderer=new n}(xe||(xe={})),function(e){e.GOLDEN_RATIO=.618,e.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},e.LayoutModified=new u.ConflatableMessage("layout-modified"),e.isGeneratedTabBarProperty=new h({name:"isGeneratedTabBar",create:function(){return!1}}),e.createSingleDocumentConfig=function(e){if(e.isEmpty)return{main:null};var t=(0,l.$r)(e.widgets()),n=e.selectedWidgets().next(),i=n?t.indexOf(n):-1;return{main:{type:"tab-area",widgets:t,currentIndex:i}}},e.findDropTarget=function(e,t,n,i){if(!r.hitTest(e.node,t,n))return{zone:"invalid",target:null};var s=e.layout;if(s.isEmpty)return{zone:"root-all",target:null};if("multiple-document"===e.mode){var a=e.node.getBoundingClientRect(),o=t-a.left+1,l=n-a.top+1,c=a.right-t,u=a.bottom-n;switch(Math.min(l,c,u,o)){case l:if(l<i.top)return{zone:"root-top",target:null};break;case c:if(c<i.right)return{zone:"root-right",target:null};break;case u:if(u<i.bottom)return{zone:"root-bottom",target:null};break;case o:if(o<i.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}var h=s.hitTestTabAreas(t,n);if(!h)return{zone:"invalid",target:null};if("single-document"===e.mode)return{zone:"widget-all",target:h};var d=h.x-h.left+1,f=h.y-h.top+1,p=h.left+h.width-h.x,m=h.top+h.height-h.y;if(f<h.tabBar.node.getBoundingClientRect().height)return{zone:"widget-tab",target:h};var _,g=Math.round(h.width/3),y=Math.round(h.height/3);if(d>g&&p>g&&f>y&&m>y)return{zone:"widget-all",target:h};switch(d/=g,f/=y,p/=g,m/=y,Math.min(d,f,p,m)){case d:_="widget-left";break;case f:_="widget-top";break;case p:_="widget-right";break;case m:_="widget-bottom";break;default:throw"unreachable"}return{zone:_,target:h}},e.getDropRef=function(e){return 0===e.titles.length?null:e.currentTitle?e.currentTitle.owner:e.titles[e.titles.length-1].owner}}(be||(be={}));var Me,we=function(){function e(){this._counter=0,this._widgets=[],this._activeWidget=null,this._currentWidget=null,this._numbers=new Map,this._nodes=new Map,this._activeChanged=new f(this),this._currentChanged=new f(this)}return e.prototype.dispose=function(){var e=this;this._counter<0||(this._counter=-1,f.clearData(this),(0,l.__)(this._widgets,(function(t){t.node.removeEventListener("focus",e,!0),t.node.removeEventListener("blur",e,!0)})),this._activeWidget=null,this._currentWidget=null,this._nodes.clear(),this._numbers.clear(),this._widgets.length=0)},Object.defineProperty(e.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeChanged",{get:function(){return this._activeChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._counter<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentWidget",{get:function(){return this._currentWidget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeWidget",{get:function(){return this._activeWidget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),e.prototype.focusNumber=function(e){var t=this._numbers.get(e);return void 0===t?-1:t},e.prototype.has=function(e){return this._numbers.has(e)},e.prototype.add=function(e){if(!this._numbers.has(e)){var t=e.node.contains(document.activeElement),n=t?this._counter++:-1;this._widgets.push(e),this._numbers.set(e,n),this._nodes.set(e.node,e),e.node.addEventListener("focus",this,!0),e.node.addEventListener("blur",this,!0),e.disposed.connect(this._onWidgetDisposed,this),t&&this._setWidgets(e,e)}},e.prototype.remove=function(e){var t=this;if(this._numbers.has(e)&&(e.disposed.disconnect(this._onWidgetDisposed,this),e.node.removeEventListener("focus",this,!0),e.node.removeEventListener("blur",this,!0),l.Rw.removeFirstOf(this._widgets,e),this._nodes.delete(e.node),this._numbers.delete(e),this._currentWidget===e)){var n=(0,l.pb)(this._widgets,(function(e){return-1!==t._numbers.get(e)})),i=(0,l.T9)(n,(function(e,n){return t._numbers.get(e)-t._numbers.get(n)}))||null;this._setWidgets(i,null)}},e.prototype.handleEvent=function(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e)}},e.prototype._setWidgets=function(e,t){var n=this._currentWidget;this._currentWidget=e;var i=this._activeWidget;this._activeWidget=t,n!==e&&this._currentChanged.emit({oldValue:n,newValue:e}),i!==t&&this._activeChanged.emit({oldValue:i,newValue:t})},e.prototype._evtFocus=function(e){var t=this._nodes.get(e.currentTarget);t!==this._currentWidget&&this._numbers.set(t,this._counter++),this._setWidgets(t,t)},e.prototype._evtBlur=function(e){var t=this._nodes.get(e.currentTarget),n=e.relatedTarget;n&&(t.node.contains(n)||(0,l.I6)(this._widgets,(function(e){return e.node.contains(n)})))||this._setWidgets(this._currentWidget,null)},e.prototype._onWidgetDisposed=function(e){this.remove(e)},e}(),Se=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._dirty=!1,n._rowSpacing=4,n._columnSpacing=4,n._items=[],n._rowStarts=[],n._columnStarts=[],n._rowSizers=[new I],n._columnSizers=[new I],n._box=null,void 0!==t.rowCount&&Me.reallocSizers(n._rowSizers,t.rowCount),void 0!==t.columnCount&&Me.reallocSizers(n._columnSizers,t.columnCount),void 0!==t.rowSpacing&&(n._rowSpacing=Me.clampValue(t.rowSpacing)),void 0!==t.columnSpacing&&(n._columnSpacing=Me.clampValue(t.columnSpacing)),n}return Y(t,e),t.prototype.dispose=function(){(0,l.__)(this._items,(function(e){var t=e.widget;e.dispose(),t.dispose()})),this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"rowCount",{get:function(){return this._rowSizers.length},set:function(e){e!==this.rowCount&&(Me.reallocSizers(this._rowSizers,e),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnCount",{get:function(){return this._columnSizers.length},set:function(e){e!==this.columnCount&&(Me.reallocSizers(this._columnSizers,e),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowSpacing",{get:function(){return this._rowSpacing},set:function(e){e=Me.clampValue(e),this._rowSpacing!==e&&(this._rowSpacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpacing",{get:function(){return this._columnSpacing},set:function(e){e=Me.clampValue(e),this._columnSpacing!==e&&(this._columnSpacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),t.prototype.rowStretch=function(e){var t=this._rowSizers[e];return t?t.stretch:-1},t.prototype.setRowStretch=function(e,t){var n=this._rowSizers[e];n&&(t=Me.clampValue(t),n.stretch!==t&&(n.stretch=t,this.parent&&this.parent.update()))},t.prototype.columnStretch=function(e){var t=this._columnSizers[e];return t?t.stretch:-1},t.prototype.setColumnStretch=function(e,t){var n=this._columnSizers[e];n&&(t=Me.clampValue(t),n.stretch!==t&&(n.stretch=t,this.parent&&this.parent.update()))},t.prototype.iter=function(){return(0,l.Tj)(this._items,(function(e){return e.widget}))},t.prototype.addWidget=function(e){-1===l.Rw.findFirstIndex(this._items,(function(t){return t.widget===e}))&&(this._items.push(new V(e)),this.parent&&this.attachWidget(e))},t.prototype.removeWidget=function(e){var t=l.Rw.findFirstIndex(this._items,(function(t){return t.widget===e}));if(-1!==t){var n=l.Rw.removeAt(this._items,t);this.parent&&this.detachWidget(e),n.dispose()}},t.prototype.init=function(){var t=this;e.prototype.init.call(this),(0,l.__)(this,(function(e){t.attachWidget(e)}))},t.prototype.attachWidget=function(e){this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.AfterAttach),this.parent.fit()},t.prototype.detachWidget=function(e){this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.AfterDetach),this.parent.fit()},t.prototype.onBeforeShow=function(t){e.prototype.onBeforeShow.call(this,t),this.parent.update()},t.prototype.onBeforeAttach=function(t){e.prototype.onBeforeAttach.call(this,t),this.parent.fit()},t.prototype.onChildShown=function(e){this.parent.fit()},t.prototype.onChildHidden=function(e){this.parent.fit()},t.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},t.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},t.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},t.prototype._fit=function(){for(var e=0,n=this.rowCount;e<n;++e)this._rowSizers[e].minSize=0;for(e=0,n=this.columnCount;e<n;++e)this._columnSizers[e].minSize=0;var i=this._items.filter((function(e){return!e.isHidden}));for(e=0,n=i.length;e<n;++e)i[e].fit();var s=this.rowCount-1,a=this.columnCount-1;for(i.sort(Me.rowSpanCmp),e=0,n=i.length;e<n;++e){var o=i[e],l=t.getCellConfig(o.widget),c=Math.min(l.row,s),h=Math.min(l.row+l.rowSpan-1,s);Me.distributeMin(this._rowSizers,c,h,o.minHeight)}for(i.sort(Me.columnSpanCmp),e=0,n=i.length;e<n;++e){o=i[e],l=t.getCellConfig(o.widget);var d=Math.min(l.column,a),f=Math.min(l.column+l.columnSpan-1,a);Me.distributeMin(this._columnSizers,d,f,o.minWidth)}if("set-no-constraint"!==this.fitPolicy){var p=s*this._rowSpacing,m=a*this._columnSpacing;for(e=0,n=this.rowCount;e<n;++e)p+=this._rowSizers[e].minSize;for(e=0,n=this.columnCount;e<n;++e)m+=this._columnSizers[e].minSize;var _=this._box=r.boxSizing(this.parent.node);m+=_.horizontalSum,p+=_.verticalSum;var g=this.parent.node.style;g.minWidth=m+"px",g.minHeight=p+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,U.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,U.Msg.UpdateRequest)}else u.MessageLoop.sendMessage(this.parent,U.Msg.UpdateRequest)},t.prototype._update=function(e,n){this._dirty=!1,e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=r.boxSizing(this.parent.node));var i=this._box.paddingTop,s=this._box.paddingLeft,a=e-this._box.horizontalSum,o=n-this._box.verticalSum,l=this.rowCount-1,c=this.columnCount-1,u=l*this._rowSpacing,h=c*this._columnSpacing;F.calc(this._rowSizers,Math.max(0,o-u)),F.calc(this._columnSizers,Math.max(0,a-h));for(var d=0,f=i,p=this.rowCount;d<p;++d)this._rowStarts[d]=f,f+=this._rowSizers[d].size+this._rowSpacing;for(d=0,f=s,p=this.columnCount;d<p;++d)this._columnStarts[d]=f,f+=this._columnSizers[d].size+this._columnSpacing;for(d=0,p=this._items.length;d<p;++d){var m=this._items[d];if(!m.isHidden){var _=t.getCellConfig(m.widget),g=Math.min(_.row,l),y=Math.min(_.column,c),v=Math.min(_.row+_.rowSpan-1,l),b=Math.min(_.column+_.columnSpan-1,c),x=this._columnStarts[y],M=this._rowStarts[g],w=this._columnStarts[b]+this._columnSizers[b].size-x,S=this._rowStarts[v]+this._rowSizers[v].size-M;m.update(x,M,w,S)}}},t}(W);!function(e){e.getCellConfig=function(e){return Me.cellConfigProperty.get(e)},e.setCellConfig=function(e,t){Me.cellConfigProperty.set(e,Me.normalizeConfig(t))}}(Se||(Se={})),function(e){e.cellConfigProperty=new h({name:"cellConfig",create:function(){return{row:0,column:0,rowSpan:1,columnSpan:1}},changed:function(e){e.parent&&e.parent.layout instanceof Se&&e.parent.fit()}}),e.normalizeConfig=function(e){return{row:Math.max(0,Math.floor(e.row||0)),column:Math.max(0,Math.floor(e.column||0)),rowSpan:Math.max(1,Math.floor(e.rowSpan||0)),columnSpan:Math.max(1,Math.floor(e.columnSpan||0))}},e.clampValue=function(e){return Math.max(0,Math.floor(e))},e.rowSpanCmp=function(t,n){var i=e.cellConfigProperty.get(t.widget),r=e.cellConfigProperty.get(n.widget);return i.rowSpan-r.rowSpan},e.columnSpanCmp=function(t,n){var i=e.cellConfigProperty.get(t.widget),r=e.cellConfigProperty.get(n.widget);return i.columnSpan-r.columnSpan},e.reallocSizers=function(e,t){for(t=Math.max(1,Math.floor(t));e.length<t;)e.push(new I);e.length>t&&(e.length=t)},e.distributeMin=function(e,t,n,i){if(!(n<t))if(t!==n){for(var r=0,s=t;s<=n;++s)r+=e[s].minSize;if(!(r>=i)){var a=(i-r)/(n-t+1);for(s=t;s<=n;++s)e[s].minSize+=a}}else{var o=e[t];o.minSize=Math.max(o.minSize,i)}}}(Me||(Me={}));var Le,Te=function(e){function t(n){void 0===n&&(n={});var i=e.call(this,{node:Le.createNode()})||this;return i._activeIndex=-1,i._tabFocusIndex=0,i._menus=[],i._childMenu=null,i.addClass("lm-MenuBar"),i.addClass("p-MenuBar"),i.setFlag(U.Flag.DisallowLayout),i.renderer=n.renderer||t.defaultRenderer,i._forceItemsPosition=n.forceItemsPosition||{forceX:!0,forceY:!0},i}return Y(t,e),t.prototype.dispose=function(){this._closeChildMenu(),this._menus.length=0,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-MenuBar-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeMenu",{get:function(){return this._menus[this._activeIndex]||null},set:function(e){this.activeIndex=e?this._menus.indexOf(e):-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){(e<0||e>=this._menus.length)&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,-1!==e&&(this._tabFocusIndex=e),this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menus",{get:function(){return this._menus},enumerable:!0,configurable:!0}),t.prototype.openActiveMenu=function(){-1!==this._activeIndex&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))},t.prototype.addMenu=function(e){this.insertMenu(this._menus.length,e)},t.prototype.insertMenu=function(e,t){this._closeChildMenu();var n=this._menus.indexOf(t),i=Math.max(0,Math.min(e,this._menus.length));if(-1===n)return l.Rw.insert(this._menus,i,t),t.addClass("lm-MenuBar-menu"),t.addClass("p-MenuBar-menu"),t.aboutToClose.connect(this._onMenuAboutToClose,this),t.menuRequested.connect(this._onMenuMenuRequested,this),t.title.changed.connect(this._onTitleChanged,this),void this.update();i===this._menus.length&&i--,n!==i&&(l.Rw.move(this._menus,n,i),this.update())},t.prototype.removeMenu=function(e){this.removeMenuAt(this._menus.indexOf(e))},t.prototype.removeMenuAt=function(e){this._closeChildMenu();var t=l.Rw.removeAt(this._menus,e);t&&(t.aboutToClose.disconnect(this._onMenuAboutToClose,this),t.menuRequested.disconnect(this._onMenuMenuRequested,this),t.title.changed.disconnect(this._onTitleChanged,this),t.removeClass("lm-MenuBar-menu"),t.removeClass("p-MenuBar-menu"),this.update())},t.prototype.clearMenus=function(){if(0!==this._menus.length){this._closeChildMenu();for(var e=0,t=this._menus;e<t.length;e++){var n=t[e];n.aboutToClose.disconnect(this._onMenuAboutToClose,this),n.menuRequested.disconnect(this._onMenuMenuRequested,this),n.title.changed.disconnect(this._onTitleChanged,this),n.removeClass("lm-MenuBar-menu"),n.removeClass("p-MenuBar-menu")}this._menus.length=0,this.update()}},t.prototype.handleEvent=function(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this)},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()},t.prototype.onActivateRequest=function(e){this.isAttached&&(this.activeIndex=0)},t.prototype.onUpdateRequest=function(e){for(var t=this,n=this._menus,i=this.renderer,r=this._activeIndex,s=this._tabFocusIndex>=0&&this._tabFocusIndex<n.length?this._tabFocusIndex:0,a=new Array(n.length),o=function(e,o){var l=n[e].title,c=e===r;c&&0==n[e].items.length&&(c=!1),a[e]=i.renderItem({title:l,active:c,tabbable:e===s,onfocus:function(){t.activeIndex=e}})},l=0,c=n.length;l<c;++l)o(l);E.render(a,this.contentNode)},t.prototype._evtKeyDown=function(e){var t=e.keyCode;if(9!==t)if(e.preventDefault(),e.stopPropagation(),13!==t&&32!==t&&38!==t&&40!==t){if(27===t)return this._closeChildMenu(),this.activeIndex=-1,void this.node.blur();if(37!==t)if(39!==t){var n=M().keyForKeydownEvent(e);if(n){var i=this._activeIndex+1,r=Le.findMnemonic(this._menus,n,i);-1===r.index||r.multiple?-1!==r.index?this.activeIndex=r.index:-1!==r.auto&&(this.activeIndex=r.auto):(this.activeIndex=r.index,this.openActiveMenu())}}else s=this._activeIndex,a=this._menus.length,this.activeIndex=s===a-1?0:s+1;else{var s=this._activeIndex,a=this._menus.length;this.activeIndex=0===s?a-1:s-1}}else this.openActiveMenu();else this.activeIndex=-1},t.prototype._evtMouseDown=function(e){if(r.hitTest(this.node,e.clientX,e.clientY)){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=l.Rw.findFirstIndex(this.contentNode.children,(function(t){return r.hitTest(t,e.clientX,e.clientY)}));if(-1!==t){if(0===e.button)if(this._childMenu)this._closeChildMenu(),this.activeIndex=t;else{var n=this._positionForMenu(t);fe.saveWindowData(),this.activeIndex=t,this._openChildMenu(n)}}else this._closeChildMenu()}},t.prototype._evtMouseMove=function(e){var t=l.Rw.findFirstIndex(this.contentNode.children,(function(t){return r.hitTest(t,e.clientX,e.clientY)}));if(t!==this._activeIndex&&(-1!==t||!this._childMenu)){var n=this._positionForMenu(t);fe.saveWindowData(),this.activeIndex=t,this._childMenu&&this._openChildMenu(n)}},t.prototype._positionForMenu=function(e){var t=this.contentNode.children[e].getBoundingClientRect(),n=t.left;return{top:t.bottom,left:n}},t.prototype._evtMouseLeave=function(e){this._childMenu||(this.activeIndex=-1)},t.prototype._openChildMenu=function(e){var t;void 0===e&&(e={});var n=this.activeMenu;if(n){var i=this._childMenu;if(i!==n){this._childMenu=n,i?i.close():document.addEventListener("mousedown",this,!0),u.MessageLoop.sendMessage(this,U.Msg.UpdateRequest);var r=e.left,s=e.top;void 0!==r&&void 0!==s||(r=(t=this._positionForMenu(this._activeIndex)).left,s=t.top),i||(this.addClass("lm-mod-active"),this.addClass("p-mod-active")),n.items.length>0&&n.open(r,s,this._forceItemsPosition)}}else this._closeChildMenu()},t.prototype._closeChildMenu=function(){if(this._childMenu){this.removeClass("lm-mod-active"),this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0);var e=this._childMenu;this._childMenu=null,e.close(),this.activeIndex=-1}},t.prototype._onMenuAboutToClose=function(e){e===this._childMenu&&(this.removeClass("lm-mod-active"),this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)},t.prototype._onMenuMenuRequested=function(e,t){if(e===this._childMenu){var n=this._activeIndex,i=this._menus.length;switch(t){case"next":this.activeIndex=n===i-1?0:n+1;break;case"previous":this.activeIndex=0===n?i-1:n-1}this.openActiveMenu()}},t.prototype._onTitleChanged=function(){this.update()},t}(U);!function(e){var t=function(){function e(){}return e.prototype.renderItem=function(e){var t=this.createItemClass(e),n=this.createItemDataset(e),i=this.createItemARIA(e);return z.li(N({className:t,dataset:n,tabindex:e.tabbable?"0":"-1",onfocus:e.onfocus},i),this.renderIcon(e),this.renderLabel(e))},e.prototype.renderIcon=function(e){var t=this.createIconClass(e);return"string"==typeof e.title.icon?z.div({className:t},e.title.iconLabel):z.div({className:t},e.title.icon,e.title.iconLabel)},e.prototype.renderLabel=function(e){var t=this.formatLabel(e);return z.div({className:"lm-MenuBar-itemLabel p-MenuBar-itemLabel"},t)},e.prototype.createItemClass=function(e){var t="lm-MenuBar-item";return t+=" p-MenuBar-item",e.title.className&&(t+=" "+e.title.className),e.active&&(t+=" lm-mod-active",t+=" p-mod-active"),t},e.prototype.createItemDataset=function(e){return e.title.dataset},e.prototype.createItemARIA=function(e){return{role:"menuitem","aria-haspopup":"true"}},e.prototype.createIconClass=function(e){var t="lm-MenuBar-itemIcon";t+=" p-MenuBar-itemIcon";var n=e.title.iconClass;return n?t+" "+n:t},e.prototype.formatLabel=function(e){var t=e.title,n=t.label,i=t.mnemonic;if(i<0||i>=n.length)return n;var r=n.slice(0,i),s=n.slice(i+1),a=n[i];return[r,z.span({className:"lm-MenuBar-itemMnemonic p-MenuBar-itemMnemonic"},a),s]},e}();e.Renderer=t,e.defaultRenderer=new t}(Te||(Te={})),function(e){e.createNode=function(){var e=document.createElement("div"),t=document.createElement("ul");return t.className="lm-MenuBar-content",t.classList.add("p-MenuBar-content"),e.appendChild(t),t.setAttribute("role","menubar"),e},e.findMnemonic=function(e,t,n){for(var i=-1,r=-1,s=!1,a=t.toUpperCase(),o=0,l=e.length;o<l;++o){var c=(o+n)%l,u=e[c].title;if(0!==u.label.length){var h=u.mnemonic;h>=0&&h<u.label.length?u.label[h].toUpperCase()===a&&(-1===i?i=c:s=!0):-1===r&&u.label[0].toUpperCase()===a&&(r=c)}}return{index:i,multiple:s,auto:r}}}(Le||(Le={}));var ke,Ae=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,{node:ke.createNode()})||this;return n._onRepeat=function(){if(n._repeatTimer=-1,n._pressData){var e=n._pressData.part;if("thumb"!==e){n._repeatTimer=window.setTimeout(n._onRepeat,20);var t=n._pressData.mouseX,i=n._pressData.mouseY;if("decrement"!==e)if("increment"!==e){if("track"===e){if(!r.hitTest(n.trackNode,t,i))return;var s=n.thumbNode;if(r.hitTest(s,t,i))return;var a,o=s.getBoundingClientRect();return a="horizontal"===n._orientation?t<o.left?"decrement":"increment":i<o.top?"decrement":"increment",void n._pageRequested.emit(a)}}else{if(!r.hitTest(n.incrementNode,t,i))return;n._stepRequested.emit("increment")}else{if(!r.hitTest(n.decrementNode,t,i))return;n._stepRequested.emit("decrement")}}}},n._value=0,n._page=10,n._maximum=100,n._repeatTimer=-1,n._pressData=null,n._thumbMoved=new f(n),n._stepRequested=new f(n),n._pageRequested=new f(n),n.addClass("lm-ScrollBar"),n.addClass("p-ScrollBar"),n.setFlag(U.Flag.DisallowLayout),n._orientation=t.orientation||"vertical",n.dataset.orientation=n._orientation,void 0!==t.maximum&&(n._maximum=Math.max(0,t.maximum)),void 0!==t.page&&(n._page=Math.max(0,t.page)),void 0!==t.value&&(n._value=Math.max(0,Math.min(t.value,n._maximum))),n}return Y(t,e),Object.defineProperty(t.prototype,"thumbMoved",{get:function(){return this._thumbMoved},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepRequested",{get:function(){return this._stepRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageRequested",{get:function(){return this._pageRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){e=Math.max(0,Math.min(e,this._maximum)),this._value!==e&&(this._value=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this._page},set:function(e){e=Math.max(0,e),this._page!==e&&(this._page=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximum",{get:function(){return this._maximum},set:function(e){e=Math.max(0,e),this._maximum!==e&&(this._maximum=e,this._value=Math.min(this._value,e),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decrementNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-button")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incrementNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-button")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-track")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumbNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-thumb")[0]},enumerable:!0,configurable:!0}),t.prototype.handleEvent=function(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}},t.prototype.onBeforeAttach=function(e){this.node.addEventListener("mousedown",this),this.update()},t.prototype.onAfterDetach=function(e){this.node.removeEventListener("mousedown",this),this._releaseMouse()},t.prototype.onUpdateRequest=function(e){var t=100*this._value/this._maximum,n=100*this._page/(this._page+this._maximum);t=Math.max(0,Math.min(t,100)),n=Math.max(0,Math.min(n,100));var i=this.thumbNode.style;"horizontal"===this._orientation?(i.top="",i.height="",i.left=t+"%",i.width=n+"%",i.transform="translate("+-t+"%, 0%)"):(i.left="",i.width="",i.top=t+"%",i.height=n+"%",i.transform="translate(0%, "+-t+"%)")},t.prototype._evtKeyDown=function(e){if(e.preventDefault(),e.stopPropagation(),27===e.keyCode){var t=this._pressData?this._pressData.value:-1;this._releaseMouse(),-1!==t&&this._moveThumb(t)}},t.prototype._evtMouseDown=function(e){if(0===e.button&&(this.activate(),!this._pressData)){var t=ke.findPart(this,e.target);if(t){e.preventDefault(),e.stopPropagation();var n=b.overrideCursor("default");if(this._pressData={part:t,override:n,delta:-1,value:-1,mouseX:e.clientX,mouseY:e.clientY},document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0),"thumb"===t){var i=this.thumbNode,r=i.getBoundingClientRect();return"horizontal"===this._orientation?this._pressData.delta=e.clientX-r.left:this._pressData.delta=e.clientY-r.top,i.classList.add("lm-mod-active"),i.classList.add("p-mod-active"),void(this._pressData.value=this._value)}if("track"===t){r=this.thumbNode.getBoundingClientRect();var s;return s="horizontal"===this._orientation?e.clientX<r.left?"decrement":"increment":e.clientY<r.top?"decrement":"increment",this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._pageRequested.emit(s)}return"decrement"===t?(this.decrementNode.classList.add("lm-mod-active"),this.decrementNode.classList.add("p-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._stepRequested.emit("decrement")):"increment"===t?(this.incrementNode.classList.add("lm-mod-active"),this.incrementNode.classList.add("p-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._stepRequested.emit("increment")):void 0}}},t.prototype._evtMouseMove=function(e){if(this._pressData&&(e.preventDefault(),e.stopPropagation(),this._pressData.mouseX=e.clientX,this._pressData.mouseY=e.clientY,"thumb"===this._pressData.part)){var t,n,i=this.thumbNode.getBoundingClientRect(),r=this.trackNode.getBoundingClientRect();"horizontal"===this._orientation?(t=e.clientX-r.left-this._pressData.delta,n=r.width-i.width):(t=e.clientY-r.top-this._pressData.delta,n=r.height-i.height);var s=0===n?0:t*this._maximum/n;this._moveThumb(s)}},t.prototype._evtMouseUp=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())},t.prototype._releaseMouse=function(){this._pressData&&(clearTimeout(this._repeatTimer),this._repeatTimer=-1,this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),this.thumbNode.classList.remove("lm-mod-active"),this.decrementNode.classList.remove("lm-mod-active"),this.incrementNode.classList.remove("lm-mod-active"),this.thumbNode.classList.remove("p-mod-active"),this.decrementNode.classList.remove("p-mod-active"),this.incrementNode.classList.remove("p-mod-active"))},t.prototype._moveThumb=function(e){e=Math.max(0,Math.min(e,this._maximum)),this._value!==e&&(this._value=e,this.update(),this._thumbMoved.emit(e))},t}(U);!function(e){e.createNode=function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");return t.className="lm-ScrollBar-button",n.className="lm-ScrollBar-button",t.dataset.action="decrement",n.dataset.action="increment",i.className="lm-ScrollBar-track",r.className="lm-ScrollBar-thumb",t.classList.add("p-ScrollBar-button"),n.classList.add("p-ScrollBar-button"),i.classList.add("p-ScrollBar-track"),r.classList.add("p-ScrollBar-thumb"),i.appendChild(r),e.appendChild(t),e.appendChild(i),e.appendChild(n),e},e.findPart=function(e,t){return e.thumbNode.contains(t)?"thumb":e.trackNode.contains(t)?"track":e.decrementNode.contains(t)?"decrement":e.incrementNode.contains(t)?"increment":null}}(ke||(ke={}));var Ee,Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._widget=null,t}return Y(t,e),t.prototype.dispose=function(){if(this._widget){var t=this._widget;this._widget=null,t.dispose()}e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"widget",{get:function(){return this._widget},set:function(e){e&&(e.parent=this.parent),this._widget!==e&&(this._widget&&this._widget.dispose(),this._widget=e,this.parent&&e&&this.attachWidget(e))},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return this._widget?(0,l.v3)(this._widget):(0,l.Ie)()},t.prototype.removeWidget=function(e){this._widget===e&&(this._widget=null,this.parent&&this.detachWidget(e))},t.prototype.init=function(){var t=this;e.prototype.init.call(this),(0,l.__)(this,(function(e){t.attachWidget(e)}))},t.prototype.attachWidget=function(e){this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.AfterAttach)},t.prototype.detachWidget=function(e){this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,U.Msg.AfterDetach)},t}(W),De=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._dirty=!1,n._items=[],n._box=null,n._hiddenMode=void 0!==t.hiddenMode?t.hiddenMode:U.HiddenMode.Display,n}return Y(t,e),Object.defineProperty(t.prototype,"hiddenMode",{get:function(){return this._hiddenMode},set:function(e){var t=this;this._hiddenMode!==e&&(this._hiddenMode=e,this.widgets.length>1&&this.widgets.forEach((function(e){e.hiddenMode=t._hiddenMode})))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){(0,l.__)(this._items,(function(e){e.dispose()})),this._box=null,this._items.length=0,e.prototype.dispose.call(this)},t.prototype.attachWidget=function(e,t){this._hiddenMode===U.HiddenMode.Scale&&this._items.length>0?(1===this._items.length&&(this.widgets[0].hiddenMode=U.HiddenMode.Scale),t.hiddenMode=U.HiddenMode.Scale):t.hiddenMode=U.HiddenMode.Display,l.Rw.insert(this._items,e,new V(t)),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterAttach),this.parent.fit()},t.prototype.moveWidget=function(e,t,n){l.Rw.move(this._items,e,t),this.parent.update()},t.prototype.detachWidget=function(e,t){var n=l.Rw.removeAt(this._items,e);this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,U.Msg.AfterDetach),n.widget.node.style.zIndex="",this._hiddenMode===U.HiddenMode.Scale&&(t.hiddenMode=U.HiddenMode.Display,1===this._items.length&&(this._items[0].widget.hiddenMode=U.HiddenMode.Display)),n.dispose(),this.parent.fit()},t.prototype.onBeforeShow=function(t){e.prototype.onBeforeShow.call(this,t),this.parent.update()},t.prototype.onBeforeAttach=function(t){e.prototype.onBeforeAttach.call(this,t),this.parent.fit()},t.prototype.onChildShown=function(e){this.parent.fit()},t.prototype.onChildHidden=function(e){this.parent.fit()},t.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},t.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},t.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},t.prototype._fit=function(){for(var e=0,t=0,n=0,i=this._items.length;n<i;++n){var s=this._items[n];s.isHidden||(s.fit(),e=Math.max(e,s.minWidth),t=Math.max(t,s.minHeight))}var a=this._box=r.boxSizing(this.parent.node);e+=a.horizontalSum,t+=a.verticalSum;var o=this.parent.node.style;o.minWidth=e+"px",o.minHeight=t+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,U.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,U.Msg.UpdateRequest)},t.prototype._update=function(e,t){this._dirty=!1;for(var n=0,i=0,s=this._items.length;i<s;++i)n+=+!this._items[i].isHidden;if(0!==n){e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=r.boxSizing(this.parent.node));var a=this._box.paddingTop,o=this._box.paddingLeft,l=e-this._box.horizontalSum,c=t-this._box.verticalSum;for(i=0,s=this._items.length;i<s;++i){var u=this._items[i];u.isHidden||(u.widget.node.style.zIndex=""+i,u.update(o,a,l,c))}}},t}(X),Oe=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,{layout:Ee.createLayout(t)})||this;return n._widgetRemoved=new f(n),n.addClass("lm-StackedPanel"),n.addClass("p-StackedPanel"),n}return Y(t,e),Object.defineProperty(t.prototype,"hiddenMode",{get:function(){return this.layout.hiddenMode},set:function(e){this.layout.hiddenMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widgetRemoved",{get:function(){return this._widgetRemoved},enumerable:!0,configurable:!0}),t.prototype.onChildAdded=function(e){e.child.addClass("lm-StackedPanel-child"),e.child.addClass("p-StackedPanel-child")},t.prototype.onChildRemoved=function(e){e.child.removeClass("lm-StackedPanel-child"),e.child.removeClass("p-StackedPanel-child"),this._widgetRemoved.emit(e.child)},t}(te);!function(e){e.createLayout=function(e){return e.layout||new De}}(Ee||(Ee={}));var Pe,Re=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;n._currentChanged=new f(n),n._addRequested=new f(n),n.addClass("lm-TabPanel"),n.addClass("p-TabPanel"),n.tabBar=new ge(t),n.tabBar.addClass("lm-TabPanel-tabBar"),n.stackedPanel=new Oe,n.stackedPanel.addClass("lm-TabPanel-stackedPanel"),n.tabBar.addClass("p-TabPanel-tabBar"),n.stackedPanel.addClass("p-TabPanel-stackedPanel"),n.tabBar.tabMoved.connect(n._onTabMoved,n),n.tabBar.currentChanged.connect(n._onCurrentChanged,n),n.tabBar.tabCloseRequested.connect(n._onTabCloseRequested,n),n.tabBar.tabActivateRequested.connect(n._onTabActivateRequested,n),n.tabBar.addRequested.connect(n._onTabAddRequested,n),n.stackedPanel.widgetRemoved.connect(n._onWidgetRemoved,n),n._tabPlacement=t.tabPlacement||"top";var i=Pe.directionFromPlacement(n._tabPlacement),r=Pe.orientationFromPlacement(n._tabPlacement);n.tabBar.orientation=r,n.tabBar.dataset.placement=n._tabPlacement;var s=new oe({direction:i,spacing:0});return oe.setStretch(n.tabBar,0),oe.setStretch(n.stackedPanel,1),s.addWidget(n.tabBar),s.addWidget(n.stackedPanel),n.layout=s,n}return Y(t,e),Object.defineProperty(t.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this.tabBar.currentIndex},set:function(e){this.tabBar.currentIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentWidget",{get:function(){var e=this.tabBar.currentTitle;return e?e.owner:null},set:function(e){this.tabBar.currentTitle=e?e.title:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabsMovable",{get:function(){return this.tabBar.tabsMovable},set:function(e){this.tabBar.tabsMovable=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addButtonEnabled",{get:function(){return this.tabBar.addButtonEnabled},set:function(e){this.tabBar.addButtonEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabPlacement",{get:function(){return this._tabPlacement},set:function(e){if(this._tabPlacement!==e){this._tabPlacement=e;var t=Pe.directionFromPlacement(e),n=Pe.orientationFromPlacement(e);this.tabBar.orientation=n,this.tabBar.dataset.placement=e,this.layout.direction=t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addRequested",{get:function(){return this._addRequested},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widgets",{get:function(){return this.stackedPanel.widgets},enumerable:!0,configurable:!0}),t.prototype.addWidget=function(e){this.insertWidget(this.widgets.length,e)},t.prototype.insertWidget=function(e,t){t!==this.currentWidget&&t.hide(),this.stackedPanel.insertWidget(e,t),this.tabBar.insertTab(e,t.title),t.node.setAttribute("role","tabpanel");var n=this.tabBar.renderer;if(n instanceof ge.Renderer){var i=n.createTabKey({title:t.title,current:!1,zIndex:0});t.node.setAttribute("aria-labelledby",i)}},t.prototype._onCurrentChanged=function(e,t){var n=t.previousIndex,i=t.previousTitle,r=t.currentIndex,a=t.currentTitle,o=i?i.owner:null,l=a?a.owner:null;o&&o.hide(),l&&l.show(),this._currentChanged.emit({previousIndex:n,previousWidget:o,currentIndex:r,currentWidget:l}),(s.IS_EDGE||s.IS_IE)&&u.MessageLoop.flush()},t.prototype._onTabAddRequested=function(e,t){this._addRequested.emit(e)},t.prototype._onTabActivateRequested=function(e,t){t.title.owner.activate()},t.prototype._onTabCloseRequested=function(e,t){t.title.owner.close()},t.prototype._onTabMoved=function(e,t){this.stackedPanel.insertWidget(t.toIndex,t.title.owner)},t.prototype._onWidgetRemoved=function(e,t){t.node.removeAttribute("role"),t.node.removeAttribute("aria-labelledby"),this.tabBar.removeTab(t.title)},t}(U);!function(e){e.orientationFromPlacement=function(e){return t[e]},e.directionFromPlacement=function(e){return n[e]};var t={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},n={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}}(Pe||(Pe={}))},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},3960:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},6388:e=>{"use strict";e.exports=function(e){return e[1]}},6301:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,GP:()=>r,s:()=>s});var i,r,s,a=n(7646);function o(e){return i=(0,a.A)(e),r=i.format,s=i.formatPrefix,i}o({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},307:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(6468);function r(e){return(e=(0,i.f)(Math.abs(e)))?e[1]:NaN}},6468:(e,t,n)=>{"use strict";function i(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function r(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}n.d(t,{A:()=>i,f:()=>r})},1151:(e,t,n)=>{"use strict";n.d(t,{A:()=>r,S:()=>s});var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(e){if(!(t=i.exec(e)))throw new Error("invalid format: "+e);var t;return new s({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function s(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}r.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},3430:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FormatSpecifier:()=>s.S,format:()=>i.GP,formatDefaultLocale:()=>i.Ay,formatLocale:()=>r.A,formatPrefix:()=>i.s,formatSpecifier:()=>s.A,precisionFixed:()=>a.A,precisionPrefix:()=>o.A,precisionRound:()=>l.A});var i=n(6301),r=n(7646),s=n(1151),a=n(9062),o=n(8678),l=n(4228)},7646:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i,r=n(307),s=n(1151),a=n(6468);function o(e,t){var n=(0,a.f)(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const l={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:a.A,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return o(100*e,t)},r:o,s:function(e,t){var n=(0,a.f)(e,t);if(!n)return e+"";var r=n[0],s=n[1],o=s-(i=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,l=r.length;return o===l?r:o>l?r+new Array(o-l+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+(0,a.f)(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function c(e){return e}var u=Array.prototype.map,h=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function d(e){var t,n,a=void 0===e.grouping||void 0===e.thousands?c:(t=u.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",d=void 0===e.currency?"":e.currency[1]+"",f=void 0===e.decimal?".":e.decimal+"",p=void 0===e.numerals?c:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(u.call(e.numerals,String)),m=void 0===e.percent?"%":e.percent+"",_=void 0===e.minus?"-":e.minus+"",g=void 0===e.nan?"NaN":e.nan+"";function y(e){var t=(e=(0,s.A)(e)).fill,n=e.align,r=e.sign,c=e.symbol,u=e.zero,y=e.width,v=e.comma,b=e.precision,x=e.trim,M=e.type;"n"===M?(v=!0,M="g"):l[M]||(void 0===b&&(b=12),x=!0,M="g"),(u||"0"===t&&"="===n)&&(u=!0,t="0",n="=");var w="$"===c?o:"#"===c&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",S="$"===c?d:/[%p]/.test(M)?m:"",L=l[M],T=/[defgprs%]/.test(M);function k(e){var s,o,l,c=w,d=S;if("c"===M)d=L(e)+d,e="";else{var m=(e=+e)<0||1/e<0;if(e=isNaN(e)?g:L(Math.abs(e),b),x&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),m&&0==+e&&"+"!==r&&(m=!1),c=(m?"("===r?r:_:"-"===r||"("===r?"":r)+c,d=("s"===M?h[8+i/3]:"")+d+(m&&"("===r?")":""),T)for(s=-1,o=e.length;++s<o;)if(48>(l=e.charCodeAt(s))||l>57){d=(46===l?f+e.slice(s+1):e.slice(s))+d,e=e.slice(0,s);break}}v&&!u&&(e=a(e,1/0));var k=c.length+e.length+d.length,A=k<y?new Array(y-k+1).join(t):"";switch(v&&u&&(e=a(A+e,A.length?y-d.length:1/0),A=""),n){case"<":e=c+e+d+A;break;case"=":e=c+A+e+d;break;case"^":e=A.slice(0,k=A.length>>1)+c+e+d+A.slice(k);break;default:e=A+c+e+d}return p(e)}return b=void 0===b?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),k.toString=function(){return e+""},k}return{format:y,formatPrefix:function(e,t){var n=y(((e=(0,s.A)(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor((0,r.A)(t)/3))),a=Math.pow(10,-i),o=h[8+i/3];return function(e){return n(a*e)+o}}}}},9062:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(307);function r(e){return Math.max(0,-(0,i.A)(Math.abs(e)))}},8678:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(307);function r(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,i.A)(t)/3)))-(0,i.A)(Math.abs(e)))}},4228:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(307);function r(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,i.A)(t)-(0,i.A)(e))+1}},347:(e,t,n)=>{"use strict";function i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function r(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}n.r(t),n.d(t,{scaleBand:()=>o,scaleDiverging:()=>er,scaleDivergingLog:()=>tr,scaleDivergingPow:()=>ir,scaleDivergingSqrt:()=>rr,scaleDivergingSymlog:()=>nr,scaleIdentity:()=>Ne,scaleImplicit:()=>s,scaleLinear:()=>Fe,scaleLog:()=>Xe,scaleOrdinal:()=>a,scalePoint:()=>c,scalePow:()=>it,scaleQuantile:()=>ft,scaleQuantize:()=>pt,scaleRadial:()=>at,scaleSequential:()=>qi,scaleSequentialLog:()=>Xi,scaleSequentialPow:()=>Ji,scaleSequentialQuantile:()=>Zi,scaleSequentialSqrt:()=>Ki,scaleSequentialSymlog:()=>$i,scaleSqrt:()=>rt,scaleSymlog:()=>Ze,scaleThreshold:()=>mt,scaleTime:()=>Ui,scaleUtc:()=>Wi,tickFormat:()=>Be});const s=Symbol("implicit");function a(){var e=new Map,t=[],n=[],r=s;function o(i){var a=i+"",o=e.get(a);if(!o){if(r!==s)return r;e.set(a,o=t.push(i))}return n[(o-1)%n.length]}return o.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const i of n){const n=i+"";e.has(n)||e.set(n,t.push(i))}return o},o.range=function(e){return arguments.length?(n=Array.from(e),o):n.slice()},o.unknown=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return a(t,n).unknown(r)},i.apply(o,arguments),o}function o(){var e,t,n=a().unknown(void 0),r=n.domain,s=n.range,l=0,c=1,u=!1,h=0,d=0,f=.5;function p(){var n=r().length,i=c<l,a=i?c:l,o=i?l:c;e=(o-a)/Math.max(1,n-h+2*d),u&&(e=Math.floor(e)),a+=(o-a-e*(n-h))*f,t=e*(1-h),u&&(a=Math.round(a),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s}(n).map((function(t){return a+e*t}));return s(i?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),p()):r()},n.range=function(e){return arguments.length?([l,c]=e,l=+l,c=+c,p()):[l,c]},n.rangeRound=function(e){return[l,c]=e,l=+l,c=+c,u=!0,p()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(u=!!e,p()):u},n.padding=function(e){return arguments.length?(h=Math.min(1,d=+e),p()):h},n.paddingInner=function(e){return arguments.length?(h=Math.min(1,e),p()):h},n.paddingOuter=function(e){return arguments.length?(d=+e,p()):d},n.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),p()):f},n.copy=function(){return o(r(),[l,c]).round(u).paddingInner(h).paddingOuter(d).align(f)},i.apply(p(),arguments)}function l(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return l(t())},e}function c(){return l(o.apply(null,arguments).paddingInner(1))}var u=Math.sqrt(50),h=Math.sqrt(10),d=Math.sqrt(2);function f(e,t,n){var i,r,s,a,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(a=p(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),i=Math.round(t/a);for(n*a<e&&++n,i*a>t&&--i,s=new Array(r=i-n+1);++o<r;)s[o]=(n+o)*a}else{a=-a;let n=Math.round(e*a),i=Math.round(t*a);for(n/a<e&&++n,i/a>t&&--i,s=new Array(r=i-n+1);++o<r;)s[o]=(n+o)/a}return i&&s.reverse(),s}function p(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=u?10:s>=h?5:s>=d?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=u?10:s>=h?5:s>=d?2:1)}function m(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=u?r*=10:s>=h?r*=5:s>=d&&(r*=2),t<e?-r:r}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g(e){let t=e,n=e;function i(e,t,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;n(e[s],t)<0?i=s+1:r=s}return i}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>_(e(t),n)}(e)),{left:i,center:function(e,n,r,s){null==r&&(r=0),null==s&&(s=e.length);const a=i(e,n,r,s-1);return a>r&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;n(e[s],t)>0?r=s:i=s+1}return i}}}function y(e){return null===e?NaN:+e}const v=g(_),b=v.right,x=(v.left,g(y).center,b);function M(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function w(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function S(){}var L=.7,T=1/L,k="\\s*([+-]?\\d+)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C=/^#([0-9a-f]{3,8})$/,D=new RegExp("^rgb\\("+[k,k,k]+"\\)$"),O=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),P=new RegExp("^rgba\\("+[k,k,k,A]+"\\)$"),R=new RegExp("^rgba\\("+[E,E,E,A]+"\\)$"),z=new RegExp("^hsl\\("+[A,E,E]+"\\)$"),B=new RegExp("^hsla\\("+[A,E,E,A]+"\\)$"),Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function F(){return this.rgb().formatHex()}function N(){return this.rgb().formatRgb()}function I(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=C.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?H(t):3===n?new W(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?j(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?j(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=D.exec(e))?new W(t[1],t[2],t[3],1):(t=O.exec(e))?new W(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=P.exec(e))?j(t[1],t[2],t[3],t[4]):(t=R.exec(e))?j(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=z.exec(e))?X(t[1],t[2]/100,t[3]/100,1):(t=B.exec(e))?X(t[1],t[2]/100,t[3]/100,t[4]):Y.hasOwnProperty(e)?H(Y[e]):"transparent"===e?new W(NaN,NaN,NaN,0):null}function H(e){return new W(e>>16&255,e>>8&255,255&e,1)}function j(e,t,n,i){return i<=0&&(e=t=n=NaN),new W(e,t,n,i)}function U(e,t,n,i){return 1===arguments.length?((r=e)instanceof S||(r=I(r)),r?new W((r=r.rgb()).r,r.g,r.b,r.opacity):new W):new W(e,t,n,null==i?1:i);var r}function W(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function G(){return"#"+q(this.r)+q(this.g)+q(this.b)}function V(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function q(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function X(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new J(e,t,n,i)}function $(e){if(e instanceof J)return new J(e.h,e.s,e.l,e.opacity);if(e instanceof S||(e=I(e)),!e)return new J;if(e instanceof J)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=t===s?(n-i)/o+6*(n<i):n===s?(i-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new J(a,o,l,e.opacity)}function J(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function K(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Z(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}M(S,I,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:F,formatHex:F,formatHsl:function(){return $(this).formatHsl()},formatRgb:N,toString:N}),M(W,U,w(S,{brighter:function(e){return e=null==e?T:Math.pow(T,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?L:Math.pow(L,e),new W(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G,formatHex:G,formatRgb:V,toString:V})),M(J,(function(e,t,n,i){return 1===arguments.length?$(e):new J(e,t,n,null==i?1:i)}),w(S,{brighter:function(e){return e=null==e?T:Math.pow(T,e),new J(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?L:Math.pow(L,e),new J(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new W(K(e>=240?e-240:e+120,r,i),K(e,r,i),K(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const Q=e=>()=>e;function ee(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Q(isNaN(e)?t:e)}const te=function e(t){var n=function(e){return 1==(e=+e)?ee:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):Q(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=U(e)).r,(t=U(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),a=ee(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=s(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function ne(e){return function(t){var n,i,r=t.length,s=new Array(r),a=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=U(t[n]),s[n]=i.r||0,a[n]=i.g||0,o[n]=i.b||0;return s=e(s),a=e(a),o=e(o),i.opacity=1,function(e){return i.r=s(e),i.g=a(e),i.b=o(e),i+""}}}function ie(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=he(e[n],t[n]);for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=s[n](e);return a}}function re(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function se(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ae(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=he(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}ne((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return Z((n-i/t)*t,a,r,s,o)}})),ne((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],s=e[i%t],a=e[(i+1)%t],o=e[(i+2)%t];return Z((n-i/t)*t,r,s,a,o)}}));var oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,le=new RegExp(oe.source,"g");function ce(e,t){var n,i,r,s=oe.lastIndex=le.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=oe.exec(e))&&(i=le.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:se(n,i)})),s=le.lastIndex;return s<t.length&&(r=t.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function ue(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(s){for(n=0;n<i;++n)r[n]=e[n]*(1-s)+t[n]*s;return r}}function he(e,t){var n,i,r=typeof t;return null==t||"boolean"===r?Q(t):("number"===r?se:"string"===r?(n=I(t))?(t=n,te):ce:t instanceof I?te:t instanceof Date?re:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?ie:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?ae:se:ue))(e,t)}function de(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function fe(e){return+e}var pe=[0,1];function me(e){return e}function _e(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ge(e,t,n){var i=e[0],r=e[1],s=t[0],a=t[1];return r<i?(i=_e(r,i),s=n(a,s)):(i=_e(i,r),s=n(s,a)),function(e){return s(i(e))}}function ye(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=_e(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(t){var n=x(e,t,1,i)-1;return s[n](r[n](t))}}function ve(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function be(){var e,t,n,i,r,s,a=pe,o=pe,l=he,c=me;function u(){var e,t,n,l=Math.min(a.length,o.length);return c!==me&&(e=a[0],t=a[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?ye:ge,r=s=null,h}function h(t){return null==t||isNaN(t=+t)?n:(r||(r=i(a.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((s||(s=i(o,a.map(e),se)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,fe),u()):a.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=de,u()},h.clamp=function(e){return arguments.length?(c=!!e||me,u()):c!==me},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function xe(){return be()(me,me)}var Me,we=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Se(e){if(!(t=we.exec(e)))throw new Error("invalid format: "+e);var t;return new Le({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Le(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Te(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ke(e){return(e=Te(Math.abs(e)))?e[1]:NaN}function Ae(e,t){var n=Te(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Se.prototype=Le.prototype,Le.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ee={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ae(100*e,t),r:Ae,s:function(e,t){var n=Te(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(Me=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Te(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ce(e){return e}var De,Oe,Pe,Re=Array.prototype.map,ze=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Be(e,t,n,i){var r,s=m(e,t,n);switch((i=Se(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ke(t)/3)))-ke(Math.abs(e)))}(s,a))||(i.precision=r),Pe(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ke(t)-ke(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-ke(Math.abs(e)))}(s))||(i.precision=r-2*("%"===i.type))}return Oe(i)}function Ye(e){var t=e.domain;return e.ticks=function(e){var n=t();return f(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return Be(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,s=t(),a=0,o=s.length-1,l=s[a],c=s[o],u=10;for(c<l&&(r=l,l=c,c=r,r=a,a=o,o=r);u-- >0;){if((r=p(l,c,n))===i)return s[a]=l,s[o]=c,t(s);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function Fe(){var e=xe();return e.copy=function(){return ve(e,Fe())},i.apply(e,arguments),Ye(e)}function Ne(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,fe),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Ne(e).unknown(t)},e=arguments.length?Array.from(e,fe):[0,1],Ye(n)}function Ie(e,t){var n,i=0,r=(e=e.slice()).length-1,s=e[i],a=e[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),e[i]=t.floor(s),e[r]=t.ceil(a),e}function He(e){return Math.log(e)}function je(e){return Math.exp(e)}function Ue(e){return-Math.log(-e)}function We(e){return-Math.exp(-e)}function Ge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ve(e){return function(t){return-e(-t)}}function qe(e){var t,n,i=e(He,je),r=i.domain,s=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(s),n=function(e){return 10===e?Ge:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(s),r()[0]<0?(t=Ve(t),n=Ve(n),e(Ue,We)):e(He,je),i}return i.base=function(e){return arguments.length?(s=+e,a()):s},i.domain=function(e){return arguments.length?(r(e),a()):r()},i.ticks=function(e){var i,a=r(),o=a[0],l=a[a.length-1];(i=l<o)&&(d=o,o=l,l=d);var c,u,h,d=t(o),p=t(l),m=null==e?10:+e,_=[];if(!(s%1)&&p-d<m){if(d=Math.floor(d),p=Math.ceil(p),o>0){for(;d<=p;++d)for(u=1,c=n(d);u<s;++u)if(!((h=c*u)<o)){if(h>l)break;_.push(h)}}else for(;d<=p;++d)for(u=s-1,c=n(d);u>=1;--u)if(!((h=c*u)<o)){if(h>l)break;_.push(h)}2*_.length<m&&(_=f(o,l,m))}else _=f(d,p,Math.min(p-d,m)).map(n);return i?_.reverse():_},i.tickFormat=function(e,r){if(null==r&&(r=10===s?".0e":","),"function"!=typeof r&&(r=Oe(r)),e===1/0)return r;null==e&&(e=10);var a=Math.max(1,s*e/i.ticks().length);return function(e){var i=e/n(Math.round(t(e)));return i*s<s-.5&&(i*=s),i<=a?r(e):""}},i.nice=function(){return r(Ie(r(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},i}function Xe(){var e=qe(be()).domain([1,10]);return e.copy=function(){return ve(e,Xe()).base(e.base())},i.apply(e,arguments),e}function $e(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Je(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ke(e){var t=1,n=e($e(t),Je(t));return n.constant=function(n){return arguments.length?e($e(t=+n),Je(t)):t},Ye(n)}function Ze(){var e=Ke(be());return e.copy=function(){return ve(e,Ze()).constant(e.constant())},i.apply(e,arguments)}function Qe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function et(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tt(e){return e<0?-e*e:e*e}function nt(e){var t=e(me,me),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(me,me):.5===n?e(et,tt):e(Qe(n),Qe(1/n)):n},Ye(t)}function it(){var e=nt(be());return e.copy=function(){return ve(e,it()).exponent(e.exponent())},i.apply(e,arguments),e}function rt(){return it.apply(null,arguments).exponent(.5)}function st(e){return Math.sign(e)*e*e}function at(){var e,t=xe(),n=[0,1],r=!1;function s(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return s.invert=function(e){return t.invert(st(e))},s.domain=function(e){return arguments.length?(t.domain(e),s):t.domain()},s.range=function(e){return arguments.length?(t.range((n=Array.from(e,fe)).map(st)),s):n.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(r=!!e,s):r},s.clamp=function(e){return arguments.length?(t.clamp(e),s):t.clamp()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return at(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},i.apply(s,arguments),Ye(s)}function ot(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function lt(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function ct(e,t,n=0,i=e.length-1,r=_){for(;i>n;){if(i-n>600){const s=i-n+1,a=t-n+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);ct(e,t,Math.max(n,Math.floor(t-a*l/s+c)),Math.min(i,Math.floor(t+(s-a)*l/s+c)),r)}const s=e[t];let a=n,o=i;for(ut(e,n,t),r(e[i],s)>0&&ut(e,n,i);a<o;){for(ut(e,a,o),++a,--o;r(e[a],s)<0;)++a;for(;r(e[o],s)>0;)--o}0===r(e[n],s)?ut(e,n,o):(++o,ut(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function ut(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ht(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(i=+i)>=i&&(yield i)}}(e,n)),i=e.length){if((t=+t)<=0||i<2)return lt(e);if(t>=1)return ot(e);var i,r=(i-1)*t,s=Math.floor(r),a=ot(ct(e,s).subarray(0,s+1));return a+(lt(e.subarray(s+1))-a)*(r-s)}}function dt(e,t,n=y){if(i=e.length){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),a=+n(e[s],s,e);return a+(+n(e[s+1],s+1,e)-a)*(r-s)}}function ft(){var e,t=[],n=[],r=[];function s(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=dt(t,e/i);return a}function a(t){return null==t||isNaN(t=+t)?e:n[x(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(_),s()},a.range=function(e){return arguments.length?(n=Array.from(e),s()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return ft().domain(t).range(n).unknown(e)},i.apply(a,arguments)}function pt(){var e,t=0,n=1,r=1,s=[.5],a=[0,1];function o(t){return null!=t&&t<=t?a[x(s,t,0,r)]:e}function l(){var e=-1;for(s=new Array(r);++e<r;)s[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,l()):[t,n]},o.range=function(e){return arguments.length?(r=(a=Array.from(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var i=a.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,s[0]]:i>=r?[s[r-1],n]:[s[i-1],s[i]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return pt().domain([t,n]).range(a).unknown(e)},i.apply(Ye(o),arguments)}function mt(){var e,t=[.5],n=[0,1],r=1;function s(i){return null!=i&&i<=i?n[x(t,i,0,r)]:e}return s.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),s):t.slice()},s.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),s):n.slice()},s.invertExtent=function(e){var i=n.indexOf(e);return[t[i-1],t[i]]},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return mt().domain(t).range(n).unknown(e)},i.apply(s,arguments)}De=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Ce:(t=Re.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Ce:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Re.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Se(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,m=e.comma,_=e.precision,g=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Ee[y]||(void 0===_&&(_=12),g=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var v="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?s:/[%p]/.test(y)?l:"",x=Ee[y],M=/[defgprs%]/.test(y);function w(e){var r,s,l,d=v,w=b;if("c"===y)w=x(e)+w,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),_),g&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==h&&(S=!1),d=(S?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===y?ze[8+Me/3]:"")+w+(S&&"("===h?")":""),M)for(r=-1,s=e.length;++r<s;)if(48>(l=e.charCodeAt(r))||l>57){w=(46===l?a+e.slice(r+1):e.slice(r))+w,e=e.slice(0,r);break}}m&&!f&&(e=i(e,1/0));var L=d.length+e.length+w.length,T=L<p?new Array(p-L+1).join(t):"";switch(m&&f&&(e=i(T+e,T.length?p-w.length:1/0),T=""),n){case"<":e=d+e+w+T;break;case"=":e=d+T+e+w;break;case"^":e=T.slice(0,L=T.length>>1)+d+e+w+T.slice(L);break;default:e=T+d+e+w}return o(e)}return _=void 0===_?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=Se(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(ke(t)/3))),r=Math.pow(10,-i),s=ze[8+i/3];return function(e){return n(r*e)+s}}}}({thousands:",",grouping:[3],currency:["$",""]}),Oe=De.format,Pe=De.formatPrefix;const _t=1e3,gt=6e4,yt=36e5,vt=864e5,bt=6048e5,xt=31536e6;var Mt=new Date,wt=new Date;function St(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=function(t){return e(t=new Date(+t)),t},r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,s){var a,o=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return o;do{o.push(a=new Date(+n)),t(n,s),e(n)}while(a<n&&n<i);return o},r.filter=function(n){return St((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}))},n&&(r.count=function(t,i){return Mt.setTime(+t),wt.setTime(+i),e(Mt),e(wt),Math.floor(n(Mt,wt))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e==0}:function(t){return r.count(0,t)%e==0}):r:null}),r}var Lt=St((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Lt.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?St((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Lt:null};const Tt=Lt;Lt.range;var kt=St((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*_t)}),(function(e,t){return(t-e)/_t}),(function(e){return e.getUTCSeconds()}));const At=kt;kt.range;var Et=St((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*_t)}),(function(e,t){e.setTime(+e+t*gt)}),(function(e,t){return(t-e)/gt}),(function(e){return e.getMinutes()}));const Ct=Et;Et.range;var Dt=St((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*_t-e.getMinutes()*gt)}),(function(e,t){e.setTime(+e+t*yt)}),(function(e,t){return(t-e)/yt}),(function(e){return e.getHours()}));const Ot=Dt;Dt.range;var Pt=St((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gt)/vt),(e=>e.getDate()-1));const Rt=Pt;function zt(e){return St((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gt)/bt}))}Pt.range;var Bt=zt(0),Yt=zt(1),Ft=zt(2),Nt=zt(3),It=zt(4),Ht=zt(5),jt=zt(6),Ut=(Bt.range,Yt.range,Ft.range,Nt.range,It.range,Ht.range,jt.range,St((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})));const Wt=Ut;Ut.range;var Gt=St((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Gt.every=function(e){return isFinite(e=Math.floor(e))&&e>0?St((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const Vt=Gt;Gt.range;var qt=St((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*gt)}),(function(e,t){return(t-e)/gt}),(function(e){return e.getUTCMinutes()}));const Xt=qt;qt.range;var $t=St((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*yt)}),(function(e,t){return(t-e)/yt}),(function(e){return e.getUTCHours()}));const Jt=$t;$t.range;var Kt=St((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/vt}),(function(e){return e.getUTCDate()-1}));const Zt=Kt;function Qt(e){return St((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/bt}))}Kt.range;var en=Qt(0),tn=Qt(1),nn=Qt(2),rn=Qt(3),sn=Qt(4),an=Qt(5),on=Qt(6),ln=(en.range,tn.range,nn.range,rn.range,sn.range,an.range,on.range,St((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})));const cn=ln;ln.range;var un=St((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));un.every=function(e){return isFinite(e=Math.floor(e))&&e>0?St((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const hn=un;function dn(e,t,n,i,r,s){const a=[[At,1,_t],[At,5,5e3],[At,15,15e3],[At,30,3e4],[s,1,gt],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,yt],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,vt],[i,2,1728e5],[n,1,bt],[t,1,2592e6],[t,3,7776e6],[e,1,xt]];function o(t,n,i){const r=Math.abs(n-t)/i,s=g((([,,e])=>e)).right(a,r);if(s===a.length)return e.every(m(t/xt,n/xt,i));if(0===s)return Tt.every(Math.max(m(t,n,i),1));const[o,l]=a[r/a[s-1][2]<a[s][2]/r?s-1:s];return o.every(l)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const r=n&&"function"==typeof n.range?n:o(e,t,n),s=r?r.range(e,+t+1):[];return i?s.reverse():s},o]}un.range;const[fn,pn]=dn(hn,cn,en,Zt,Jt,Xt),[mn,_n]=dn(Vt,Wt,Bt,Rt,Ot,Ct);function gn(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yn(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var bn,xn,Mn,wn={"-":"",_:" ",0:"0"},Sn=/^\s*\d+/,Ln=/^%/,Tn=/[\\^$*+?|[\]().{}]/g;function kn(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function An(e){return e.replace(Tn,"\\$&")}function En(e){return new RegExp("^(?:"+e.map(An).join("|")+")","i")}function Cn(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Dn(e,t,n){var i=Sn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function On(e,t,n){var i=Sn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Pn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Rn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function zn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Bn(e,t,n){var i=Sn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Yn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Fn(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Nn(e,t,n){var i=Sn.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function In(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Hn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function jn(e,t,n){var i=Sn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Un(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Wn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Gn(e,t,n){var i=Sn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Vn(e,t,n){var i=Sn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function qn(e,t,n){var i=Sn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Xn(e,t,n){var i=Ln.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function $n(e,t,n){var i=Sn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Jn(e,t,n){var i=Sn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Kn(e,t){return kn(e.getDate(),t,2)}function Zn(e,t){return kn(e.getHours(),t,2)}function Qn(e,t){return kn(e.getHours()%12||12,t,2)}function ei(e,t){return kn(1+Rt.count(Vt(e),e),t,3)}function ti(e,t){return kn(e.getMilliseconds(),t,3)}function ni(e,t){return ti(e,t)+"000"}function ii(e,t){return kn(e.getMonth()+1,t,2)}function ri(e,t){return kn(e.getMinutes(),t,2)}function si(e,t){return kn(e.getSeconds(),t,2)}function ai(e){var t=e.getDay();return 0===t?7:t}function oi(e,t){return kn(Bt.count(Vt(e)-1,e),t,2)}function li(e){var t=e.getDay();return t>=4||0===t?It(e):It.ceil(e)}function ci(e,t){return e=li(e),kn(It.count(Vt(e),e)+(4===Vt(e).getDay()),t,2)}function ui(e){return e.getDay()}function hi(e,t){return kn(Yt.count(Vt(e)-1,e),t,2)}function di(e,t){return kn(e.getFullYear()%100,t,2)}function fi(e,t){return kn((e=li(e)).getFullYear()%100,t,2)}function pi(e,t){return kn(e.getFullYear()%1e4,t,4)}function mi(e,t){var n=e.getDay();return kn((e=n>=4||0===n?It(e):It.ceil(e)).getFullYear()%1e4,t,4)}function _i(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+kn(t/60|0,"0",2)+kn(t%60,"0",2)}function gi(e,t){return kn(e.getUTCDate(),t,2)}function yi(e,t){return kn(e.getUTCHours(),t,2)}function vi(e,t){return kn(e.getUTCHours()%12||12,t,2)}function bi(e,t){return kn(1+Zt.count(hn(e),e),t,3)}function xi(e,t){return kn(e.getUTCMilliseconds(),t,3)}function Mi(e,t){return xi(e,t)+"000"}function wi(e,t){return kn(e.getUTCMonth()+1,t,2)}function Si(e,t){return kn(e.getUTCMinutes(),t,2)}function Li(e,t){return kn(e.getUTCSeconds(),t,2)}function Ti(e){var t=e.getUTCDay();return 0===t?7:t}function ki(e,t){return kn(en.count(hn(e)-1,e),t,2)}function Ai(e){var t=e.getUTCDay();return t>=4||0===t?sn(e):sn.ceil(e)}function Ei(e,t){return e=Ai(e),kn(sn.count(hn(e),e)+(4===hn(e).getUTCDay()),t,2)}function Ci(e){return e.getUTCDay()}function Di(e,t){return kn(tn.count(hn(e)-1,e),t,2)}function Oi(e,t){return kn(e.getUTCFullYear()%100,t,2)}function Pi(e,t){return kn((e=Ai(e)).getUTCFullYear()%100,t,2)}function Ri(e,t){return kn(e.getUTCFullYear()%1e4,t,4)}function zi(e,t){var n=e.getUTCDay();return kn((e=n>=4||0===n?sn(e):sn.ceil(e)).getUTCFullYear()%1e4,t,4)}function Bi(){return"+0000"}function Yi(){return"%"}function Fi(e){return+e}function Ni(e){return Math.floor(+e/1e3)}function Ii(e){return new Date(e)}function Hi(e){return e instanceof Date?+e:+new Date(+e)}function ji(e,t,n,i,r,s,a,o,l,c){var u=xe(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),_=c("%I %p"),g=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function x(e){return(l(e)<e?f:o(e)<e?p:a(e)<e?m:s(e)<e?_:i(e)<e?r(e)<e?g:y:n(e)<e?v:b)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,Hi)):d().map(Ii)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?x:c(t)},u.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(Ie(n,e)):u},u.copy=function(){return ve(u,ji(e,t,n,i,r,s,a,o,l,c))},u}function Ui(){return i.apply(ji(mn,_n,Vt,Wt,Bt,Rt,Ot,Ct,At,xn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Wi(){return i.apply(ji(fn,pn,hn,cn,en,Zt,Jt,Xt,At,Mn).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gi(){var e,t,n,i,r,s=0,a=1,o=me,l=!1;function c(t){return null==t||isNaN(t=+t)?r:o(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,i;return arguments.length?([n,i]=t,o=e(n,i),c):[o(0),o(1)]}}return c.domain=function(r){return arguments.length?([s,a]=r,e=i(s=+s),t=i(a=+a),n=e===t?0:1/(t-e),c):[s,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(he),c.rangeRound=u(de),c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return i=r,e=r(s),t=r(a),n=e===t?0:1/(t-e),c}}function Vi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qi(){var e=Ye(Gi()(me));return e.copy=function(){return Vi(e,qi())},r.apply(e,arguments)}function Xi(){var e=qe(Gi()).domain([1,10]);return e.copy=function(){return Vi(e,Xi()).base(e.base())},r.apply(e,arguments)}function $i(){var e=Ke(Gi());return e.copy=function(){return Vi(e,$i()).constant(e.constant())},r.apply(e,arguments)}function Ji(){var e=nt(Gi());return e.copy=function(){return Vi(e,Ji()).exponent(e.exponent())},r.apply(e,arguments)}function Ki(){return Ji.apply(null,arguments).exponent(.5)}function Zi(){var e=[],t=me;function n(n){if(null!=n&&!isNaN(n=+n))return t((x(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(_),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,i)=>t(i/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,i)=>ht(e,i/t)))},n.copy=function(){return Zi(t).domain(e)},r.apply(n,arguments)}function Qi(){var e,t,n,i,r,s,a,o=0,l=.5,c=1,u=1,h=me,d=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+s(e))-t)*(u*e<u*t?i:r),h(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,i,r;return arguments.length?([n,i,r]=t,h=function(e,t){void 0===t&&(t=e,e=he);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return s[t](e-t)}}(e,[n,i,r]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([o,l,c]=a,e=s(o=+o),t=s(l=+l),n=s(c=+c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,f):[o,l,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.range=p(he),f.rangeRound=p(de),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return s=a,e=a(o),t=a(l),n=a(c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function er(){var e=Ye(Qi()(me));return e.copy=function(){return Vi(e,er())},r.apply(e,arguments)}function tr(){var e=qe(Qi()).domain([.1,1,10]);return e.copy=function(){return Vi(e,tr()).base(e.base())},r.apply(e,arguments)}function nr(){var e=Ke(Qi());return e.copy=function(){return Vi(e,nr()).constant(e.constant())},r.apply(e,arguments)}function ir(){var e=nt(Qi());return e.copy=function(){return Vi(e,ir()).exponent(e.exponent())},r.apply(e,arguments)}function rr(){return ir.apply(null,arguments).exponent(.5)}bn=function(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=En(r),u=Cn(r),h=En(s),d=Cn(s),f=En(a),p=Cn(a),m=En(o),_=Cn(o),g=En(l),y=Cn(l),v={a:function(e){return a[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Kn,e:Kn,f:ni,g:fi,G:mi,H:Zn,I:Qn,j:ei,L:ti,m:ii,M:ri,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Fi,s:Ni,S:si,u:ai,U:oi,V:ci,w:ui,W:hi,x:null,X:null,y:di,Y:pi,Z:_i,"%":Yi},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:gi,e:gi,f:Mi,g:Pi,G:zi,H:yi,I:vi,j:bi,L:xi,m:wi,M:Si,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Fi,s:Ni,S:Li,u:Ti,U:ki,V:Ei,w:Ci,W:Di,x:null,X:null,y:Oi,Y:Ri,Z:Bi,"%":Yi},x={a:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return S(e,t,n,i)},d:Hn,e:Hn,f:qn,g:Yn,G:Bn,H:Un,I:Un,j:jn,L:Vn,m:In,M:Wn,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:Nn,Q:$n,s:Jn,S:Gn,u:On,U:Pn,V:Rn,w:Dn,W:zn,x:function(e,t,i){return S(e,n,t,i)},X:function(e,t,n){return S(e,i,t,n)},y:Yn,Y:Bn,Z:Fn,"%":Xn};function M(e,t){return function(n){var i,r,s,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(r=wn[i=e.charAt(++o)])?i=e.charAt(++o):r="e"===i?" ":"0",(s=t[i])&&(i=s(n,r)),a.push(i),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function w(e,t){return function(n){var i,r,s=vn(1900,void 0,1);if(S(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=yn(vn(s.y,0,1))).getUTCDay(),i=r>4||0===r?tn.ceil(i):tn(i),i=Zt.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=gn(vn(s.y,0,1))).getDay(),i=r>4||0===r?Yt.ceil(i):Yt(i),i=Rt.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?yn(vn(s.y,0,1)).getUTCDay():gn(vn(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,yn(s)):gn(s)}}function S(e,t,n,i){for(var r,s,a=0,o=t.length,l=n.length;a<o;){if(i>=l)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(s=x[r in wn?t.charAt(a++):r])||(i=s(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=M(n,v),v.X=M(i,v),v.c=M(t,v),b.x=M(n,b),b.X=M(i,b),b.c=M(t,b),{format:function(e){var t=M(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=M(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),xn=bn.format,bn.parse,Mn=bn.utcFormat,bn.utcParse},9695:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8644),r=n(6875);function s(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r.g&&t.documentElement.namespaceURI===r.g?t.createElement(e):t.createElementNS(n,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=(0,i.A)(e);return(t.local?a:s)(t)}},4124:(e,t,n)=>{"use strict";n.d(t,{Ul:()=>f.A,vt:()=>s,xL:()=>i.A,ex:()=>w.ex,f0:()=>w.f0,sr:()=>o,jN:()=>c.A,gr:()=>u.A,MF:()=>h.A,r$:()=>d.A,Lt:()=>r.A,Ub:()=>m,r1:()=>p.Ay,gD:()=>_.A,XM:()=>g.A,iF:()=>y.j,_M:()=>v.A,yI:()=>x,x:()=>M.A});var i=n(9695),r=n(679);function s(e){return(0,r.A)((0,i.A)(e).call(document.documentElement))}var a=0;function o(){return new l}function l(){this._="@"+(++a).toString(36)}l.prototype=o.prototype={constructor:l,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var c=n(1309),u=n(2648),h=n(8644),d=n(6875),f=n(2801),p=n(404);function m(e){return"string"==typeof e?new p.LN([document.querySelectorAll(e)],[document.documentElement]):new p.LN([null==e?[]:e],p.zr)}var _=n(3022),g=n(4811),y=n(9203),v=n(5252),b=n(4468);function x(e,t){null==t&&(t=(0,b.A)().touches);for(var n=0,i=t?t.length:0,r=new Array(i);n<i;++n)r[n]=(0,f.A)(e,t[n]);return r}var M=n(1995),w=n(3457)},1309:(e,t,n)=>{"use strict";function i(e){return function(){return this.matches(e)}}n.d(t,{A:()=>i})},2648:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(4468),r=n(2801);function s(e){var t=(0,i.A)();return t.changedTouches&&(t=t.changedTouches[0]),(0,r.A)(e,t)}},8644:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(6875);function r(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.A.hasOwnProperty(t)?{space:i.A[t],local:e}:e}},6875:(e,t,n)=>{"use strict";n.d(t,{A:()=>r,g:()=>i});var i="http://www.w3.org/1999/xhtml";const r={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},2801:(e,t,n)=>{"use strict";function i(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}n.d(t,{A:()=>i})},679:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(404);function r(e){return"string"==typeof e?new i.LN([[document.querySelector(e)]],[document.documentElement]):new i.LN([[e]],i.zr)}},404:(e,t,n)=>{"use strict";n.d(t,{LN:()=>$,Ay:()=>K,zr:()=>X});var i=n(3022),r=n(4811),s=n(1309);function a(e){return new Array(e.length)}function o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}o.prototype={constructor:o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function l(e,t,n,i,r,s){for(var a,l=0,c=t.length,u=s.length;l<u;++l)(a=t[l])?(a.__data__=s[l],i[l]=a):n[l]=new o(e,s[l]);for(;l<c;++l)(a=t[l])&&(r[l]=a)}function c(e,t,n,i,r,s,a){var l,c,u,h={},d=t.length,f=s.length,p=new Array(d);for(l=0;l<d;++l)(c=t[l])&&(p[l]=u="$"+a.call(c,c.__data__,l,t),u in h?r[l]=c:h[u]=c);for(l=0;l<f;++l)(c=h[u="$"+a.call(e,s[l],l,s)])?(i[l]=c,c.__data__=s[l],h[u]=null):n[l]=new o(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&h[p[l]]===c&&(r[l]=c)}function u(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var h=n(8644);function d(e){return function(){this.removeAttribute(e)}}function f(e){return function(){this.removeAttributeNS(e.space,e.local)}}function p(e,t){return function(){this.setAttribute(e,t)}}function m(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function g(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var y=n(9203);function v(e){return function(){delete this[e]}}function b(e,t){return function(){this[e]=t}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function M(e){return e.trim().split(/^|\s+/)}function w(e){return e.classList||new S(e)}function S(e){this._node=e,this._names=M(e.getAttribute("class")||"")}function L(e,t){for(var n=w(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function T(e,t){for(var n=w(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function k(e){return function(){L(this,e)}}function A(e){return function(){T(this,e)}}function E(e,t){return function(){(t.apply(this,arguments)?L:T)(this,e)}}function C(){this.textContent=""}function D(e){return function(){this.textContent=e}}function O(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function P(){this.innerHTML=""}function R(e){return function(){this.innerHTML=e}}function z(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function B(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}S.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var F=n(9695);function N(){return null}function I(){var e=this.parentNode;e&&e.removeChild(this)}function H(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function j(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var U=n(3457),W=n(1995);function G(e,t,n){var i=(0,W.A)(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function V(e,t){return function(){return G(this,e,t)}}function q(e,t){return function(){return G(this,e,t.apply(this,arguments))}}var X=[null];function $(e,t){this._groups=e,this._parents=t}function J(){return new $([[document.documentElement]],X)}$.prototype=J.prototype={constructor:$,select:function(e){"function"!=typeof e&&(e=(0,i.A)(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a,o,l=t[s],c=l.length,u=r[s]=new Array(c),h=0;h<c;++h)(a=l[h])&&(o=e.call(a,a.__data__,h,l))&&("__data__"in a&&(o.__data__=a.__data__),u[h]=o);return new $(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=(0,r.A)(e));for(var t=this._groups,n=t.length,i=[],s=[],a=0;a<n;++a)for(var o,l=t[a],c=l.length,u=0;u<c;++u)(o=l[u])&&(i.push(e.call(o,o.__data__,u,l)),s.push(o));return new $(i,s)},filter:function(e){"function"!=typeof e&&(e=(0,s.A)(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o=t[r],l=o.length,c=i[r]=[],u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&c.push(a);return new $(i,this._parents)},data:function(e,t){if(!e)return _=new Array(this.size()),d=-1,this.each((function(e){_[++d]=e})),_;var n,i=t?c:l,r=this._parents,s=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=s.length,o=new Array(a),u=new Array(a),h=new Array(a),d=0;d<a;++d){var f=r[d],p=s[d],m=p.length,_=e.call(f,f&&f.__data__,d,r),g=_.length,y=u[d]=new Array(g),v=o[d]=new Array(g);i(f,p,y,v,h[d]=new Array(m),_,t);for(var b,x,M=0,w=0;M<g;++M)if(b=y[M]){for(M>=w&&(w=M+1);!(x=v[w])&&++w<g;);b._next=x||null}}return(o=new $(o,r))._enter=u,o._exit=h,o},enter:function(){return new $(this._enter||this._groups.map(a),this._parents)},exit:function(){return new $(this._exit||this._groups.map(a),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,s=this.exit();return i="function"==typeof e?e(i):i.append(e+""),null!=t&&(r=t(r)),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(e){for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var l,c=t[o],u=n[o],h=c.length,d=a[o]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;o<i;++o)a[o]=t[o];return new $(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=u);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],l=o.length,c=r[s]=new Array(l),h=0;h<l;++h)(a=o[h])&&(c[h]=a);c.sort(t)}return new $(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,s=t[n],a=0,o=s.length;a<o;++a)(r=s[a])&&e.call(r,r.__data__,a,s);return this},attr:function(e,t){var n=(0,h.A)(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?f:d:"function"==typeof t?n.local?g:_:n.local?m:p)(n,t))},style:y.A,property:function(e,t){return arguments.length>1?this.each((null==t?v:"function"==typeof t?x:b)(e,t)):this.node()[e]},classed:function(e,t){var n=M(e+"");if(arguments.length<2){for(var i=w(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?E:t?k:A)(n,t))},text:function(e){return arguments.length?this.each(null==e?C:("function"==typeof e?O:D)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?P:("function"==typeof e?z:R)(e)):this.node().innerHTML},raise:function(){return this.each(B)},lower:function(){return this.each(Y)},append:function(e){var t="function"==typeof e?e:(0,F.A)(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:(0,F.A)(e),r=null==t?N:"function"==typeof t?t:(0,i.A)(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(I)},clone:function(e){return this.select(e?j:H)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:U.Ay,dispatch:function(e,t){return this.each(("function"==typeof t?q:V)(e,t))}};const K=J},3457:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,ex:()=>u,f0:()=>r});var i={},r=null;function s(e,t,n){return e=a(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function a(e,t,n){return function(i){var s=r;r=i;try{e.call(this,this.__data__,t,n)}finally{r=s}}}function o(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,s=t.length;i<s;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function l(e,t,n){var r=i.hasOwnProperty(e.type)?s:a;return function(i,s,a){var o,l=this.__on,c=r(t,s,a);if(l)for(var u=0,h=l.length;u<h;++u)if((o=l[u]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=c,o.capture=n),void(o.value=t);this.addEventListener(e.type,c,n),o={type:e.type,name:e.name,value:t,listener:c,capture:n},l?l.push(o):this.__on=[o]}}function c(e,t,n){var i,r,s=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=s.length;if(!(arguments.length<2)){for(c=t?l:o,null==n&&(n=!1),i=0;i<a;++i)this.each(c(s[i],t,n));return this}var c=this.node().__on;if(c)for(var u,h=0,d=c.length;h<d;++h)for(i=0,u=c[h];i<a;++i)if((r=s[i]).type===u.type&&r.name===u.name)return u.value}function u(e,t,n,i){var s=r;e.sourceEvent=r,r=e;try{return t.apply(n,i)}finally{r=s}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(i={mouseenter:"mouseover",mouseleave:"mouseout"}))},9203:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,j:()=>l});var i=n(1995);function r(e){return function(){this.style.removeProperty(e)}}function s(e,t,n){return function(){this.style.setProperty(e,t,n)}}function a(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function o(e,t,n){return arguments.length>1?this.each((null==t?r:"function"==typeof t?a:s)(e,t,null==n?"":n)):l(this.node(),e)}function l(e,t){return e.style.getPropertyValue(t)||(0,i.A)(e).getComputedStyle(e,null).getPropertyValue(t)}},3022:(e,t,n)=>{"use strict";function i(){}function r(e){return null==e?i:function(){return this.querySelector(e)}}n.d(t,{A:()=>r})},4811:(e,t,n)=>{"use strict";function i(){return[]}function r(e){return null==e?i:function(){return this.querySelectorAll(e)}}n.d(t,{A:()=>r})},4468:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(3457);function r(){for(var e,t=i.f0;e=t.sourceEvent;)t=e;return t}},5252:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(4468),r=n(2801);function s(e,t,n){arguments.length<3&&(n=t,t=(0,i.A)().changedTouches);for(var s,a=0,o=t?t.length:0;a<o;++a)if((s=t[a]).identifier===n)return(0,r.A)(e,s);return null}},1995:(e,t,n)=>{"use strict";function i(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}n.d(t,{A:()=>i})},5065:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,DC:()=>r,GY:()=>o,T6:()=>s,aL:()=>a});var i,r,s,a,o,l=n(2494);function c(e){return i=(0,l.A)(e),r=i.format,s=i.parse,a=i.utcFormat,o=i.utcParse,i}c({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},7190:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isoFormat:()=>a,isoParse:()=>o,timeFormat:()=>i.DC,timeFormatDefaultLocale:()=>i.Ay,timeFormatLocale:()=>r.A,timeParse:()=>i.T6,utcFormat:()=>i.aL,utcParse:()=>i.GY});var i=n(5065),r=n(2494),s="%Y-%m-%dT%H:%M:%S.%LZ";const a=Date.prototype.toISOString?function(e){return e.toISOString()}:(0,i.aL)(s),o=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:(0,i.GY)(s)},2494:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(1838),r=n(774),s=n(2462),a=n(5638),o=n(4307),l=n(5267);function c(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function u(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function h(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function d(e){var t=e.dateTime,n=e.date,o=e.time,l=e.periods,d=e.days,p=e.shortDays,m=e.months,_=e.shortMonths,g=v(l),y=b(l),Z=v(d),ye=b(d),Ce=v(p),De=b(p),Oe=v(m),Pe=b(m),Re=v(_),ze=b(_),Be={a:function(e){return p[e.getDay()]},A:function(e){return d[e.getDay()]},b:function(e){return _[e.getMonth()]},B:function(e){return m[e.getMonth()]},c:null,d:H,e:H,f:V,g:ie,G:se,H:j,I:U,j:W,L:G,m:q,M:X,p:function(e){return l[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Ae,s:Ee,S:$,u:J,U:K,V:Q,w:ee,W:te,x:null,X:null,y:ne,Y:re,Z:ae,"%":ke},Ye={a:function(e){return p[e.getUTCDay()]},A:function(e){return d[e.getUTCDay()]},b:function(e){return _[e.getUTCMonth()]},B:function(e){return m[e.getUTCMonth()]},c:null,d:oe,e:oe,f:de,g:we,G:Le,H:le,I:ce,j:ue,L:he,m:fe,M:pe,p:function(e){return l[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Ae,s:Ee,S:me,u:_e,U:ge,V:ve,w:be,W:xe,x:null,X:null,y:Me,Y:Se,Z:Te,"%":ke},Fe={a:function(e,t,n){var i=Ce.exec(t.slice(n));return i?(e.w=De[i[0].toLowerCase()],n+i[0].length):-1},A:function(e,t,n){var i=Z.exec(t.slice(n));return i?(e.w=ye[i[0].toLowerCase()],n+i[0].length):-1},b:function(e,t,n){var i=Re.exec(t.slice(n));return i?(e.m=ze[i[0].toLowerCase()],n+i[0].length):-1},B:function(e,t,n){var i=Oe.exec(t.slice(n));return i?(e.m=Pe[i[0].toLowerCase()],n+i[0].length):-1},c:function(e,n,i){return He(e,t,n,i)},d:D,e:D,f:Y,g:k,G:T,H:P,I:P,j:O,L:B,m:C,M:R,p:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.p=y[i[0].toLowerCase()],n+i[0].length):-1},q:E,Q:N,s:I,S:z,u:M,U:w,V:S,w:x,W:L,x:function(e,t,i){return He(e,n,t,i)},X:function(e,t,n){return He(e,o,t,n)},y:k,Y:T,Z:A,"%":F};function Ne(e,t){return function(n){var i,r,s,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(r=f[i=e.charAt(++o)])?i=e.charAt(++o):r="e"===i?" ":"0",(s=t[i])&&(i=s(n,r)),a.push(i),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function Ie(e,t){return function(n){var o,l,d=h(1900,void 0,1);if(He(d,e,n+="",0)!=n.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(t&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(l=(o=u(h(d.y,0,1))).getUTCDay(),o=l>4||0===l?i.rt.ceil(o):(0,i.rt)(o),o=r.A.offset(o,7*(d.V-1)),d.y=o.getUTCFullYear(),d.m=o.getUTCMonth(),d.d=o.getUTCDate()+(d.w+6)%7):(l=(o=c(h(d.y,0,1))).getDay(),o=l>4||0===l?s.By.ceil(o):(0,s.By)(o),o=a.A.offset(o,7*(d.V-1)),d.y=o.getFullYear(),d.m=o.getMonth(),d.d=o.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),l="Z"in d?u(h(d.y,0,1)).getUTCDay():c(h(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(l+5)%7:d.w+7*d.U-(l+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,u(d)):c(d)}}function He(e,t,n,i){for(var r,s,a=0,o=t.length,l=n.length;a<o;){if(i>=l)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(s=Fe[r in f?t.charAt(a++):r])||(i=s(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return Be.x=Ne(n,Be),Be.X=Ne(o,Be),Be.c=Ne(t,Be),Ye.x=Ne(n,Ye),Ye.X=Ne(o,Ye),Ye.c=Ne(t,Ye),{format:function(e){var t=Ne(e+="",Be);return t.toString=function(){return e},t},parse:function(e){var t=Ie(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Ne(e+="",Ye);return t.toString=function(){return e},t},utcParse:function(e){var t=Ie(e+="",!0);return t.toString=function(){return e},t}}}var f={"-":"",_:" ",0:"0"},p=/^\s*\d+/,m=/^%/,_=/[\\^$*+?|[\]().{}]/g;function g(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function y(e){return e.replace(_,"\\$&")}function v(e){return new RegExp("^(?:"+e.map(y).join("|")+")","i")}function b(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function x(e,t,n){var i=p.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function M(e,t,n){var i=p.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function w(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function S(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function L(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function T(e,t,n){var i=p.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function k(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function A(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function E(e,t,n){var i=p.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function C(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function D(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function O(e,t,n){var i=p.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function P(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function R(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function z(e,t,n){var i=p.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function B(e,t,n){var i=p.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Y(e,t,n){var i=p.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function F(e,t,n){var i=m.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function N(e,t,n){var i=p.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function I(e,t,n){var i=p.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function H(e,t){return g(e.getDate(),t,2)}function j(e,t){return g(e.getHours(),t,2)}function U(e,t){return g(e.getHours()%12||12,t,2)}function W(e,t){return g(1+a.A.count((0,o.A)(e),e),t,3)}function G(e,t){return g(e.getMilliseconds(),t,3)}function V(e,t){return G(e,t)+"000"}function q(e,t){return g(e.getMonth()+1,t,2)}function X(e,t){return g(e.getMinutes(),t,2)}function $(e,t){return g(e.getSeconds(),t,2)}function J(e){var t=e.getDay();return 0===t?7:t}function K(e,t){return g(s.fz.count((0,o.A)(e)-1,e),t,2)}function Z(e){var t=e.getDay();return t>=4||0===t?(0,s.dt)(e):s.dt.ceil(e)}function Q(e,t){return e=Z(e),g(s.dt.count((0,o.A)(e),e)+(4===(0,o.A)(e).getDay()),t,2)}function ee(e){return e.getDay()}function te(e,t){return g(s.By.count((0,o.A)(e)-1,e),t,2)}function ne(e,t){return g(e.getFullYear()%100,t,2)}function ie(e,t){return g((e=Z(e)).getFullYear()%100,t,2)}function re(e,t){return g(e.getFullYear()%1e4,t,4)}function se(e,t){var n=e.getDay();return g((e=n>=4||0===n?(0,s.dt)(e):s.dt.ceil(e)).getFullYear()%1e4,t,4)}function ae(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+g(t/60|0,"0",2)+g(t%60,"0",2)}function oe(e,t){return g(e.getUTCDate(),t,2)}function le(e,t){return g(e.getUTCHours(),t,2)}function ce(e,t){return g(e.getUTCHours()%12||12,t,2)}function ue(e,t){return g(1+r.A.count((0,l.A)(e),e),t,3)}function he(e,t){return g(e.getUTCMilliseconds(),t,3)}function de(e,t){return he(e,t)+"000"}function fe(e,t){return g(e.getUTCMonth()+1,t,2)}function pe(e,t){return g(e.getUTCMinutes(),t,2)}function me(e,t){return g(e.getUTCSeconds(),t,2)}function _e(e){var t=e.getUTCDay();return 0===t?7:t}function ge(e,t){return g(i.Hl.count((0,l.A)(e)-1,e),t,2)}function ye(e){var t=e.getUTCDay();return t>=4||0===t?(0,i.pT)(e):i.pT.ceil(e)}function ve(e,t){return e=ye(e),g(i.pT.count((0,l.A)(e),e)+(4===(0,l.A)(e).getUTCDay()),t,2)}function be(e){return e.getUTCDay()}function xe(e,t){return g(i.rt.count((0,l.A)(e)-1,e),t,2)}function Me(e,t){return g(e.getUTCFullYear()%100,t,2)}function we(e,t){return g((e=ye(e)).getUTCFullYear()%100,t,2)}function Se(e,t){return g(e.getUTCFullYear()%1e4,t,4)}function Le(e,t){var n=e.getUTCDay();return g((e=n>=4||0===n?(0,i.pT)(e):i.pT.ceil(e)).getUTCFullYear()%1e4,t,4)}function Te(){return"+0000"}function ke(){return"%"}function Ae(e){return+e}function Ee(e){return Math.floor(+e/1e3)}},5638:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,_:()=>o});var i=n(3079),r=n(4126),s=(0,i.A)((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r.rR)/r.Nm}),(function(e){return e.getDate()-1}));const a=s;var o=s.range},4126:(e,t,n)=>{"use strict";n.d(t,{Fq:()=>o,JJ:()=>s,Nm:()=>a,Tt:()=>i,rR:()=>r});var i=1e3,r=6e4,s=36e5,a=864e5,o=6048e5},3079:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=new Date,r=new Date;function s(e,t,n,a){function o(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return o.floor=function(t){return e(t=new Date(+t)),t},o.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},o.round=function(e){var t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},o.range=function(n,i,r){var s,a=[];if(n=o.ceil(n),r=null==r?1:Math.floor(r),!(n<i&&r>0))return a;do{a.push(s=new Date(+n)),t(n,r),e(n)}while(s<n&&n<i);return a},o.filter=function(n){return s((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}))},n&&(o.count=function(t,s){return i.setTime(+t),r.setTime(+s),e(i),e(r),Math.floor(n(i,r))},o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?o.filter(a?function(t){return a(t)%e==0}:function(t){return o.count(0,t)%e==0}):o:null}),o}},774:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,o:()=>o});var i=n(3079),r=n(4126),s=(0,i.A)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/r.Nm}),(function(e){return e.getUTCDate()-1}));const a=s;var o=s.range},1838:(e,t,n)=>{"use strict";n.d(t,{G6:()=>_,Hl:()=>a,ON:()=>p,Xo:()=>v,Zn:()=>y,a1:()=>h,aZ:()=>f,c8:()=>d,jN:()=>m,pT:()=>u,rt:()=>o,sr:()=>l,wr:()=>g,z2:()=>c});var i=n(3079),r=n(4126);function s(e){return(0,i.A)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/r.Fq}))}var a=s(0),o=s(1),l=s(2),c=s(3),u=s(4),h=s(5),d=s(6),f=a.range,p=o.range,m=l.range,_=c.range,g=u.range,y=h.range,v=d.range},5267:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,j:()=>a});var i=n(3079),r=(0,i.A)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));r.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,i.A)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const s=r;var a=r.range},2462:(e,t,n)=>{"use strict";n.d(t,{By:()=>o,KP:()=>p,Q$:()=>g,Sh:()=>h,dt:()=>u,eQ:()=>l,fz:()=>a,gf:()=>_,kS:()=>d,l3:()=>c,se:()=>f,t$:()=>v,tz:()=>y,yW:()=>m});var i=n(3079),r=n(4126);function s(e){return(0,i.A)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r.rR)/r.Fq}))}var a=s(0),o=s(1),l=s(2),c=s(3),u=s(4),h=s(5),d=s(6),f=a.range,p=o.range,m=l.range,_=c.range,g=u.range,y=h.range,v=d.range},4307:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,V:()=>a});var i=n(3079),r=(0,i.A)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));r.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,i.A)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const s=r;var a=r.range},9163:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FormatSpecifier:()=>Ol.FormatSpecifier,active:()=>Si,arc:()=>Nb,area:()=>Gb,areaRadial:()=>ex,ascending:()=>r,autoType:()=>eo,axisBottom:()=>le,axisLeft:()=>ce,axisRight:()=>oe,axisTop:()=>ae,bisect:()=>c,bisectLeft:()=>l,bisectRight:()=>o,bisector:()=>s,blob:()=>Wo,brush:()=>Qi,brushSelection:()=>Ji,brushX:()=>Ki,brushY:()=>Zi,buffer:()=>Vo,chord:()=>ur,clientPoint:()=>vb.Ul,cluster:()=>Uf,color:()=>as,contourDensity:()=>xa,contours:()=>ma,create:()=>vb.vt,creator:()=>vb.xL,cross:()=>d,csv:()=>Ko,csvFormat:()=>Ha,csvFormatBody:()=>ja,csvFormatRow:()=>Wa,csvFormatRows:()=>Ua,csvFormatValue:()=>Ga,csvParse:()=>Na,csvParseRows:()=>Ia,cubehelix:()=>Js,curveBasis:()=>Rx,curveBasisClosed:()=>Bx,curveBasisOpen:()=>Fx,curveBundle:()=>Ix,curveCardinal:()=>Ux,curveCardinalClosed:()=>Gx,curveCardinalOpen:()=>qx,curveCatmullRom:()=>Jx,curveCatmullRomClosed:()=>Zx,curveCatmullRomOpen:()=>eM,curveLinear:()=>Hb,curveLinearClosed:()=>nM,curveMonotoneX:()=>uM,curveMonotoneY:()=>hM,curveNatural:()=>pM,curveStep:()=>_M,curveStepAfter:()=>yM,curveStepBefore:()=>gM,customEvent:()=>vb.ex,descending:()=>f,deviation:()=>_,dispatch:()=>me,drag:()=>Aa,dragDisable:()=>be,dragEnable:()=>xe,dsv:()=>Jo,dsvFormat:()=>Ya,easeBack:()=>Fo,easeBackIn:()=>Bo,easeBackInOut:()=>Fo,easeBackOut:()=>Yo,easeBounce:()=>Po,easeBounceIn:()=>Oo,easeBounceInOut:()=>Ro,easeBounceOut:()=>Po,easeCircle:()=>xo,easeCircleIn:()=>vo,easeCircleInOut:()=>xo,easeCircleOut:()=>bo,easeCubic:()=>bi,easeCubicIn:()=>yi,easeCubicInOut:()=>bi,easeCubicOut:()=>vi,easeElastic:()=>Ho,easeElasticIn:()=>Io,easeElasticInOut:()=>jo,easeElasticOut:()=>Ho,easeExp:()=>yo,easeExpIn:()=>_o,easeExpInOut:()=>yo,easeExpOut:()=>go,easeLinear:()=>no,easePoly:()=>lo,easePolyIn:()=>ao,easePolyInOut:()=>lo,easePolyOut:()=>oo,easeQuad:()=>so,easeQuadIn:()=>io,easeQuadInOut:()=>so,easeQuadOut:()=>ro,easeSin:()=>po,easeSinIn:()=>ho,easeSinInOut:()=>po,easeSinOut:()=>fo,entries:()=>Hr,event:()=>vb.f0,extent:()=>g,forceCenter:()=>al,forceCollide:()=>vl,forceLink:()=>Ml,forceManyBody:()=>Al,forceRadial:()=>El,forceSimulation:()=>kl,forceX:()=>Cl,forceY:()=>Dl,format:()=>Ol.format,formatDefaultLocale:()=>Ol.formatDefaultLocale,formatLocale:()=>Ol.formatLocale,formatPrefix:()=>Ol.formatPrefix,formatSpecifier:()=>Ol.formatSpecifier,geoAlbers:()=>rf,geoAlbersUsa:()=>sf,geoArea:()=>Lc,geoAzimuthalEqualArea:()=>cf,geoAzimuthalEqualAreaRaw:()=>lf,geoAzimuthalEquidistant:()=>hf,geoAzimuthalEquidistantRaw:()=>uf,geoBounds:()=>gu,geoCentroid:()=>Eu,geoCircle:()=>Iu,geoClipAntimeridian:()=>ih,geoClipCircle:()=>rh,geoClipExtent:()=>lh,geoClipRectangle:()=>oh,geoConicConformal:()=>gf,geoConicConformalRaw:()=>_f,geoConicEqualArea:()=>nf,geoConicEqualAreaRaw:()=>tf,geoConicEquidistant:()=>xf,geoConicEquidistantRaw:()=>bf,geoContains:()=>Eh,geoDistance:()=>bh,geoEqualEarth:()=>Af,geoEqualEarthRaw:()=>kf,geoEquirectangular:()=>vf,geoEquirectangularRaw:()=>yf,geoGnomonic:()=>Cf,geoGnomonicRaw:()=>Ef,geoGraticule:()=>Oh,geoGraticule10:()=>Ph,geoIdentity:()=>Df,geoInterpolate:()=>Rh,geoLength:()=>gh,geoMercator:()=>ff,geoMercatorRaw:()=>df,geoNaturalEarth1:()=>Pf,geoNaturalEarth1Raw:()=>Of,geoOrthographic:()=>zf,geoOrthographicRaw:()=>Rf,geoPath:()=>Yd,geoProjection:()=>Zd,geoProjectionMutator:()=>Qd,geoRotation:()=>Yu,geoStereographic:()=>Yf,geoStereographicRaw:()=>Bf,geoStream:()=>dc,geoTransform:()=>Fd,geoTransverseMercator:()=>Nf,geoTransverseMercatorRaw:()=>Ff,gray:()=>Cs,hcl:()=>Ns,hierarchy:()=>Gf,histogram:()=>D,hsl:()=>gs,html:()=>rl,image:()=>Qo,interpolate:()=>xt,interpolateArray:()=>ft,interpolateBasis:()=>tt,interpolateBasisClosed:()=>nt,interpolateBlues:()=>iv,interpolateBrBG:()=>my,interpolateBuGn:()=>Py,interpolateBuPu:()=>zy,interpolateCividis:()=>pv,interpolateCool:()=>ab,interpolateCubehelix:()=>zm,interpolateCubehelixDefault:()=>rb,interpolateCubehelixLong:()=>Bm,interpolateDate:()=>mt,interpolateDiscrete:()=>Up,interpolateGnBu:()=>Yy,interpolateGreens:()=>sv,interpolateGreys:()=>ov,interpolateHcl:()=>Mm,interpolateHclLong:()=>wm,interpolateHsl:()=>Qp,interpolateHslLong:()=>em,interpolateHue:()=>Wp,interpolateInferno:()=>gb,interpolateLab:()=>bm,interpolateMagma:()=>_b,interpolateNumber:()=>_t,interpolateNumberArray:()=>ht,interpolateObject:()=>gt,interpolateOrRd:()=>Ny,interpolateOranges:()=>fv,interpolatePRGn:()=>gy,interpolatePiYG:()=>vy,interpolatePlasma:()=>yb,interpolatePuBu:()=>Uy,interpolatePuBuGn:()=>Hy,interpolatePuOr:()=>xy,interpolatePuRd:()=>Gy,interpolatePurples:()=>cv,interpolateRainbow:()=>lb,interpolateRdBu:()=>wy,interpolateRdGy:()=>Ly,interpolateRdPu:()=>qy,interpolateRdYlBu:()=>ky,interpolateRdYlGn:()=>Ey,interpolateReds:()=>hv,interpolateRgb:()=>ot,interpolateRgbBasis:()=>ct,interpolateRgbBasisClosed:()=>ut,interpolateRound:()=>Gp,interpolateSinebow:()=>db,interpolateSpectral:()=>Dy,interpolateString:()=>bt,interpolateTransformCss:()=>fn,interpolateTransformSvg:()=>pn,interpolateTurbo:()=>fb,interpolateViridis:()=>mb,interpolateWarm:()=>sb,interpolateYlGn:()=>Ky,interpolateYlGnBu:()=>$y,interpolateYlOrBr:()=>Qy,interpolateYlOrRd:()=>tv,interpolateZoom:()=>Kp,interrupt:()=>rn,interval:()=>zM,isoFormat:()=>RM.isoFormat,isoParse:()=>RM.isoParse,json:()=>tl,keys:()=>Nr,lab:()=>Ds,lch:()=>Fs,line:()=>Wb,lineRadial:()=>Qb,linkHorizontal:()=>cx,linkRadial:()=>hx,linkVertical:()=>ux,local:()=>vb.sr,map:()=>Er,matcher:()=>vb.jN,max:()=>z,mean:()=>B,median:()=>Y,merge:()=>F,min:()=>N,mouse:()=>vb.gr,namespace:()=>vb.MF,namespaces:()=>vb.r$,nest:()=>Cr,now:()=>Bt,pack:()=>mp,packEnclose:()=>Kf,packSiblings:()=>up,pairs:()=>u,partition:()=>xp,path:()=>vr,permute:()=>I,pie:()=>Xb,piecewise:()=>Ym,pointRadial:()=>tx,polygonArea:()=>Nm,polygonCentroid:()=>Im,polygonContains:()=>Gm,polygonHull:()=>Wm,polygonLength:()=>Vm,precisionFixed:()=>Ol.precisionFixed,precisionPrefix:()=>Ol.precisionPrefix,precisionRound:()=>Ol.precisionRound,quadtree:()=>fl,quantile:()=>O,quantize:()=>Fm,radialArea:()=>ex,radialLine:()=>Qb,randomBates:()=>Zm,randomExponential:()=>Qm,randomIrwinHall:()=>Km,randomLogNormal:()=>Jm,randomNormal:()=>$m,randomUniform:()=>Xm,range:()=>w,rgb:()=>us,ribbon:()=>Lr,scaleBand:()=>o_,scaleDiverging:()=>Kg,scaleDivergingLog:()=>Zg,scaleDivergingPow:()=>ey,scaleDivergingSqrt:()=>ty,scaleDivergingSymlog:()=>Qg,scaleIdentity:()=>A_,scaleImplicit:()=>s_,scaleLinear:()=>k_,scaleLog:()=>Y_,scaleOrdinal:()=>a_,scalePoint:()=>c_,scalePow:()=>V_,scaleQuantile:()=>X_,scaleQuantize:()=>$_,scaleSequential:()=>Wg,scaleSequentialLog:()=>Gg,scaleSequentialPow:()=>qg,scaleSequentialQuantile:()=>$g,scaleSequentialSqrt:()=>Xg,scaleSequentialSymlog:()=>Vg,scaleSqrt:()=>q_,scaleSymlog:()=>H_,scaleThreshold:()=>J_,scaleTime:()=>Ag,scaleUtc:()=>Hg,scan:()=>H,schemeAccent:()=>ry,schemeBlues:()=>nv,schemeBrBG:()=>py,schemeBuGn:()=>Oy,schemeBuPu:()=>Ry,schemeCategory10:()=>iy,schemeDark2:()=>sy,schemeGnBu:()=>By,schemeGreens:()=>rv,schemeGreys:()=>av,schemeOrRd:()=>Fy,schemeOranges:()=>dv,schemePRGn:()=>_y,schemePaired:()=>ay,schemePastel1:()=>oy,schemePastel2:()=>ly,schemePiYG:()=>yy,schemePuBu:()=>jy,schemePuBuGn:()=>Iy,schemePuOr:()=>by,schemePuRd:()=>Wy,schemePurples:()=>lv,schemeRdBu:()=>My,schemeRdGy:()=>Sy,schemeRdPu:()=>Vy,schemeRdYlBu:()=>Ty,schemeRdYlGn:()=>Ay,schemeReds:()=>uv,schemeSet1:()=>cy,schemeSet2:()=>uy,schemeSet3:()=>hy,schemeSpectral:()=>Cy,schemeTableau10:()=>dy,schemeYlGn:()=>Jy,schemeYlGnBu:()=>Xy,schemeYlOrBr:()=>Zy,schemeYlOrRd:()=>ev,select:()=>vb.Lt,selectAll:()=>vb.Ub,selection:()=>vb.r1,selector:()=>vb.gD,selectorAll:()=>vb.XM,set:()=>Fr,shuffle:()=>j,stack:()=>MM,stackOffsetDiverging:()=>SM,stackOffsetExpand:()=>wM,stackOffsetNone:()=>vM,stackOffsetSilhouette:()=>LM,stackOffsetWiggle:()=>TM,stackOrderAppearance:()=>kM,stackOrderAscending:()=>EM,stackOrderDescending:()=>DM,stackOrderInsideOut:()=>OM,stackOrderNone:()=>bM,stackOrderReverse:()=>PM,stratify:()=>kp,style:()=>vb.iF,sum:()=>U,svg:()=>sl,symbol:()=>Cx,symbolCircle:()=>dx,symbolCross:()=>fx,symbolDiamond:()=>_x,symbolSquare:()=>xx,symbolStar:()=>bx,symbolTriangle:()=>wx,symbolWye:()=>Ax,symbols:()=>Ex,text:()=>Xo,thresholdFreedmanDiaconis:()=>P,thresholdScott:()=>R,thresholdSturges:()=>C,tickFormat:()=>L_,tickIncrement:()=>A,tickStep:()=>E,ticks:()=>k,timeDay:()=>ig.A,timeDays:()=>ig._,timeFormat:()=>RM.timeFormat,timeFormatDefaultLocale:()=>RM.timeFormatDefaultLocale,timeFormatLocale:()=>RM.timeFormatLocale,timeFriday:()=>ng.Sh,timeFridays:()=>ng.tz,timeHour:()=>ag,timeHours:()=>og,timeInterval:()=>Z_.A,timeMillisecond:()=>mg,timeMilliseconds:()=>_g,timeMinute:()=>cg,timeMinutes:()=>ug,timeMonday:()=>ng.By,timeMondays:()=>ng.KP,timeMonth:()=>eg,timeMonths:()=>tg,timeParse:()=>RM.timeParse,timeSaturday:()=>ng.kS,timeSaturdays:()=>ng.t$,timeSecond:()=>dg,timeSeconds:()=>fg,timeSunday:()=>ng.fz,timeSundays:()=>ng.se,timeThursday:()=>ng.dt,timeThursdays:()=>ng.Q$,timeTuesday:()=>ng.eQ,timeTuesdays:()=>ng.yW,timeWednesday:()=>ng.l3,timeWednesdays:()=>ng.gf,timeWeek:()=>ng.fz,timeWeeks:()=>ng.se,timeYear:()=>K_.A,timeYears:()=>K_.V,timeout:()=>Wt,timer:()=>Nt,timerFlush:()=>It,touch:()=>vb._M,touches:()=>vb.yI,transition:()=>mi,transpose:()=>W,tree:()=>Rp,treemap:()=>Np,treemapBinary:()=>Ip,treemapDice:()=>bp,treemapResquarify:()=>jp,treemapSlice:()=>zp,treemapSliceDice:()=>Hp,treemapSquarify:()=>Fp,tsv:()=>Zo,tsvFormat:()=>$a,tsvFormatBody:()=>Ja,tsvFormatRow:()=>Za,tsvFormatRows:()=>Ka,tsvFormatValue:()=>Qa,tsvParse:()=>qa,tsvParseRows:()=>Xa,utcDay:()=>Rg.A,utcDays:()=>Rg.o,utcFormat:()=>RM.utcFormat,utcFriday:()=>Pg.a1,utcFridays:()=>Pg.Zn,utcHour:()=>Bg,utcHours:()=>Yg,utcMillisecond:()=>mg,utcMilliseconds:()=>_g,utcMinute:()=>Ng,utcMinutes:()=>Ig,utcMonday:()=>Pg.rt,utcMondays:()=>Pg.ON,utcMonth:()=>Dg,utcMonths:()=>Og,utcParse:()=>RM.utcParse,utcSaturday:()=>Pg.c8,utcSaturdays:()=>Pg.Xo,utcSecond:()=>dg,utcSeconds:()=>fg,utcSunday:()=>Pg.Hl,utcSundays:()=>Pg.aZ,utcThursday:()=>Pg.pT,utcThursdays:()=>Pg.wr,utcTuesday:()=>Pg.sr,utcTuesdays:()=>Pg.jN,utcWednesday:()=>Pg.z2,utcWednesdays:()=>Pg.G6,utcWeek:()=>Pg.Hl,utcWeeks:()=>Pg.aZ,utcYear:()=>Eg.A,utcYears:()=>Eg.j,values:()=>Ir,variance:()=>m,version:()=>i,voronoi:()=>xw,window:()=>vb.x,xml:()=>il,zip:()=>V,zoom:()=>zw,zoomIdentity:()=>Lw,zoomTransform:()=>Tw});var i="5.16.0";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function s(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}var a=s(r),o=a.right,l=a.left;const c=o;function u(e,t){null==t&&(t=h);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return s}function h(e,t){return[e,t]}function d(e,t,n){var i,r,s,a,o=e.length,l=t.length,c=new Array(o*l);for(null==n&&(n=h),i=s=0;i<o;++i)for(a=e[i],r=0;r<l;++r,++s)c[s]=n(a,t[r]);return c}function f(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function p(e){return null===e?NaN:+e}function m(e,t){var n,i,r=e.length,s=0,a=-1,o=0,l=0;if(null==t)for(;++a<r;)isNaN(n=p(e[a]))||(l+=(i=n-o)*(n-(o+=i/++s)));else for(;++a<r;)isNaN(n=p(t(e[a],a,e)))||(l+=(i=n-o)*(n-(o+=i/++s)));if(s>1)return l/(s-1)}function _(e,t){var n=m(e,t);return n?Math.sqrt(n):n}function g(e,t){var n,i,r,s=e.length,a=-1;if(null==t){for(;++a<s;)if(null!=(n=e[a])&&n>=n)for(i=r=n;++a<s;)null!=(n=e[a])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++a<s;)if(null!=(n=t(e[a],a,e))&&n>=n)for(i=r=n;++a<s;)null!=(n=t(e[a],a,e))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}var y=Array.prototype,v=y.slice,b=y.map;function x(e){return function(){return e}}function M(e){return e}function w(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s}var S=Math.sqrt(50),L=Math.sqrt(10),T=Math.sqrt(2);function k(e,t,n){var i,r,s,a,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(a=A(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),s=new Array(r=Math.ceil(t-e+1));++o<r;)s[o]=(e+o)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),s=new Array(r=Math.ceil(e-t+1));++o<r;)s[o]=(e-o)/a;return i&&s.reverse(),s}function A(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=S?10:s>=L?5:s>=T?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=S?10:s>=L?5:s>=T?2:1)}function E(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=S?r*=10:s>=L?r*=5:s>=T&&(r*=2),t<e?-r:r}function C(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function D(){var e=M,t=g,n=C;function i(i){var r,s,a=i.length,o=new Array(a);for(r=0;r<a;++r)o[r]=e(i[r],r,i);var l=t(o),u=l[0],h=l[1],d=n(o,u,h);Array.isArray(d)||(d=E(u,h,d),d=w(Math.ceil(u/d)*d,h,d));for(var f=d.length;d[0]<=u;)d.shift(),--f;for(;d[f-1]>h;)d.pop(),--f;var p,m=new Array(f+1);for(r=0;r<=f;++r)(p=m[r]=[]).x0=r>0?d[r-1]:u,p.x1=r<f?d[r]:h;for(r=0;r<a;++r)u<=(s=o[r])&&s<=h&&m[c(d,s,0,f)].push(i[r]);return m}return i.value=function(t){return arguments.length?(e="function"==typeof t?t:x(t),i):e},i.domain=function(e){return arguments.length?(t="function"==typeof e?e:x([e[0],e[1]]),i):t},i.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?x(v.call(e)):x(e),i):n},i}function O(e,t,n){if(null==n&&(n=p),i=e.length){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),a=+n(e[s],s,e);return a+(+n(e[s+1],s+1,e)-a)*(r-s)}}function P(e,t,n){return e=b.call(e,p).sort(r),Math.ceil((n-t)/(2*(O(e,.75)-O(e,.25))*Math.pow(e.length,-1/3)))}function R(e,t,n){return Math.ceil((n-t)/(3.5*_(e)*Math.pow(e.length,-1/3)))}function z(e,t){var n,i,r=e.length,s=-1;if(null==t){for(;++s<r;)if(null!=(n=e[s])&&n>=n)for(i=n;++s<r;)null!=(n=e[s])&&n>i&&(i=n)}else for(;++s<r;)if(null!=(n=t(e[s],s,e))&&n>=n)for(i=n;++s<r;)null!=(n=t(e[s],s,e))&&n>i&&(i=n);return i}function B(e,t){var n,i=e.length,r=i,s=-1,a=0;if(null==t)for(;++s<i;)isNaN(n=p(e[s]))?--r:a+=n;else for(;++s<i;)isNaN(n=p(t(e[s],s,e)))?--r:a+=n;if(r)return a/r}function Y(e,t){var n,i=e.length,s=-1,a=[];if(null==t)for(;++s<i;)isNaN(n=p(e[s]))||a.push(n);else for(;++s<i;)isNaN(n=p(t(e[s],s,e)))||a.push(n);return O(a.sort(r),.5)}function F(e){for(var t,n,i,r=e.length,s=-1,a=0;++s<r;)a+=e[s].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}function N(e,t){var n,i,r=e.length,s=-1;if(null==t){for(;++s<r;)if(null!=(n=e[s])&&n>=n)for(i=n;++s<r;)null!=(n=e[s])&&i>n&&(i=n)}else for(;++s<r;)if(null!=(n=t(e[s],s,e))&&n>=n)for(i=n;++s<r;)null!=(n=t(e[s],s,e))&&i>n&&(i=n);return i}function I(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}function H(e,t){if(n=e.length){var n,i,s=0,a=0,o=e[a];for(null==t&&(t=r);++s<n;)(t(i=e[s],o)<0||0!==t(o,o))&&(o=i,a=s);return 0===t(o,o)?a:void 0}}function j(e,t,n){for(var i,r,s=(null==n?e.length:n)-(t=null==t?0:+t);s;)r=Math.random()*s--|0,i=e[s+t],e[s+t]=e[r+t],e[r+t]=i;return e}function U(e,t){var n,i=e.length,r=-1,s=0;if(null==t)for(;++r<i;)(n=+e[r])&&(s+=n);else for(;++r<i;)(n=+t(e[r],r,e))&&(s+=n);return s}function W(e){if(!(r=e.length))return[];for(var t=-1,n=N(e,G),i=new Array(n);++t<n;)for(var r,s=-1,a=i[t]=new Array(r);++s<r;)a[s]=e[s][t];return i}function G(e){return e.length}function V(){return W(arguments)}var q=Array.prototype.slice;function X(e){return e}var $=1,J=2,K=3,Z=4,Q=1e-6;function ee(e){return"translate("+(e+.5)+",0)"}function te(e){return"translate(0,"+(e+.5)+")"}function ne(e){return function(t){return+e(t)}}function ie(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function re(){return!this.__axis}function se(e,t){var n=[],i=null,r=null,s=6,a=6,o=3,l=e===$||e===Z?-1:1,c=e===Z||e===J?"x":"y",u=e===$||e===K?ee:te;function h(h){var d=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,f=null==r?t.tickFormat?t.tickFormat.apply(t,n):X:r,p=Math.max(s,0)+o,m=t.range(),_=+m[0]+.5,g=+m[m.length-1]+.5,y=(t.bandwidth?ie:ne)(t.copy()),v=h.selection?h.selection():h,b=v.selectAll(".domain").data([null]),x=v.selectAll(".tick").data(d,t).order(),M=x.exit(),w=x.enter().append("g").attr("class","tick"),S=x.select("line"),L=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(w),S=S.merge(w.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),L=L.merge(w.append("text").attr("fill","currentColor").attr(c,l*p).attr("dy",e===$?"0em":e===K?"0.71em":"0.32em")),h!==v&&(b=b.transition(h),x=x.transition(h),S=S.transition(h),L=L.transition(h),M=M.transition(h).attr("opacity",Q).attr("transform",(function(e){return isFinite(e=y(e))?u(e):this.getAttribute("transform")})),w.attr("opacity",Q).attr("transform",(function(e){var t=this.parentNode.__axis;return u(t&&isFinite(t=t(e))?t:y(e))}))),M.remove(),b.attr("d",e===Z||e==J?a?"M"+l*a+","+_+"H0.5V"+g+"H"+l*a:"M0.5,"+_+"V"+g:a?"M"+_+","+l*a+"V0.5H"+g+"V"+l*a:"M"+_+",0.5H"+g),x.attr("opacity",1).attr("transform",(function(e){return u(y(e))})),S.attr(c+"2",l*s),L.attr(c,l*p).text(f),v.filter(re).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===J?"start":e===Z?"end":"middle"),v.each((function(){this.__axis=y}))}return h.scale=function(e){return arguments.length?(t=e,h):t},h.ticks=function(){return n=q.call(arguments),h},h.tickArguments=function(e){return arguments.length?(n=null==e?[]:q.call(e),h):n.slice()},h.tickValues=function(e){return arguments.length?(i=null==e?null:q.call(e),h):i&&i.slice()},h.tickFormat=function(e){return arguments.length?(r=e,h):r},h.tickSize=function(e){return arguments.length?(s=a=+e,h):s},h.tickSizeInner=function(e){return arguments.length?(s=+e,h):s},h.tickSizeOuter=function(e){return arguments.length?(a=+e,h):a},h.tickPadding=function(e){return arguments.length?(o=+e,h):o},h}function ae(e){return se($,e)}function oe(e){return se(J,e)}function le(e){return se(K,e)}function ce(e){return se(Z,e)}var ue={value:function(){}};function he(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new de(i)}function de(e){this._=e}function fe(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function pe(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=ue,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}de.prototype=he.prototype={constructor:de,on:function(e,t){var n,i,r=this._,s=(i=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,o=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=s[a]).type)r[n]=pe(r[n],e.name,t);else if(null==t)for(n in r)r[n]=pe(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=s[a]).type)&&(n=fe(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new de(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=0,n=(i=this._[e]).length;s<n;++s)i[s].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};const me=he;var _e=n(679),ge=n(3457);function ye(){ge.f0.stopImmediatePropagation()}function ve(){ge.f0.preventDefault(),ge.f0.stopImmediatePropagation()}function be(e){var t=e.document.documentElement,n=(0,_e.A)(e).on("dragstart.drag",ve,!0);"onselectstart"in t?n.on("selectstart.drag",ve,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xe(e,t){var n=e.document.documentElement,i=(0,_e.A)(e).on("dragstart.drag",null);t&&(i.on("click.drag",ve,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Me(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function we(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Se(){}var Le=.7,Te=1/Le,ke="\\s*([+-]?\\d+)\\s*",Ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ce=/^#([0-9a-f]{3,8})$/,De=new RegExp("^rgb\\("+[ke,ke,ke]+"\\)$"),Oe=new RegExp("^rgb\\("+[Ee,Ee,Ee]+"\\)$"),Pe=new RegExp("^rgba\\("+[ke,ke,ke,Ae]+"\\)$"),Re=new RegExp("^rgba\\("+[Ee,Ee,Ee,Ae]+"\\)$"),ze=new RegExp("^hsl\\("+[Ae,Ee,Ee]+"\\)$"),Be=new RegExp("^hsla\\("+[Ae,Ee,Ee,Ae]+"\\)$"),Ye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Fe(){return this.rgb().formatHex()}function Ne(){return this.rgb().formatRgb()}function Ie(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?He(t):3===n?new Ge(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?je(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?je(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=De.exec(e))?new Ge(t[1],t[2],t[3],1):(t=Oe.exec(e))?new Ge(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Pe.exec(e))?je(t[1],t[2],t[3],t[4]):(t=Re.exec(e))?je(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ze.exec(e))?$e(t[1],t[2]/100,t[3]/100,1):(t=Be.exec(e))?$e(t[1],t[2]/100,t[3]/100,t[4]):Ye.hasOwnProperty(e)?He(Ye[e]):"transparent"===e?new Ge(NaN,NaN,NaN,0):null}function He(e){return new Ge(e>>16&255,e>>8&255,255&e,1)}function je(e,t,n,i){return i<=0&&(e=t=n=NaN),new Ge(e,t,n,i)}function Ue(e){return e instanceof Se||(e=Ie(e)),e?new Ge((e=e.rgb()).r,e.g,e.b,e.opacity):new Ge}function We(e,t,n,i){return 1===arguments.length?Ue(e):new Ge(e,t,n,null==i?1:i)}function Ge(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Ve(){return"#"+Xe(this.r)+Xe(this.g)+Xe(this.b)}function qe(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Xe(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function $e(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ze(e,t,n,i)}function Je(e){if(e instanceof Ze)return new Ze(e.h,e.s,e.l,e.opacity);if(e instanceof Se||(e=Ie(e)),!e)return new Ze;if(e instanceof Ze)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=t===s?(n-i)/o+6*(n<i):n===s?(i-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Ze(a,o,l,e.opacity)}function Ke(e,t,n,i){return 1===arguments.length?Je(e):new Ze(e,t,n,null==i?1:i)}function Ze(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Qe(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function et(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function tt(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return et((n-i/t)*t,a,r,s,o)}}function nt(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],s=e[i%t],a=e[(i+1)%t],o=e[(i+2)%t];return et((n-i/t)*t,r,s,a,o)}}function it(e){return function(){return e}}function rt(e,t){return function(n){return e+n*t}}function st(e,t){var n=t-e;return n?rt(e,n>180||n<-180?n-360*Math.round(n/360):n):it(isNaN(e)?t:e)}function at(e,t){var n=t-e;return n?rt(e,n):it(isNaN(e)?t:e)}Me(Se,Ie,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Fe,formatHex:Fe,formatHsl:function(){return Je(this).formatHsl()},formatRgb:Ne,toString:Ne}),Me(Ge,We,we(Se,{brighter:function(e){return e=null==e?Te:Math.pow(Te,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Le:Math.pow(Le,e),new Ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ve,formatHex:Ve,formatRgb:qe,toString:qe})),Me(Ze,Ke,we(Se,{brighter:function(e){return e=null==e?Te:Math.pow(Te,e),new Ze(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Le:Math.pow(Le,e),new Ze(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Ge(Qe(e>=240?e-240:e+120,r,i),Qe(e,r,i),Qe(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const ot=function e(t){var n=function(e){return 1==(e=+e)?at:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):it(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=We(e)).r,(t=We(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),a=at(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=s(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function lt(e){return function(t){var n,i,r=t.length,s=new Array(r),a=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=We(t[n]),s[n]=i.r||0,a[n]=i.g||0,o[n]=i.b||0;return s=e(s),a=e(a),o=e(o),i.opacity=1,function(e){return i.r=s(e),i.g=a(e),i.b=o(e),i+""}}}var ct=lt(tt),ut=lt(nt);function ht(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(s){for(n=0;n<i;++n)r[n]=e[n]*(1-s)+t[n]*s;return r}}function dt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ft(e,t){return(dt(t)?ht:pt)(e,t)}function pt(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=xt(e[n],t[n]);for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=s[n](e);return a}}function mt(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function _t(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gt(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=xt(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var yt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vt=new RegExp(yt.source,"g");function bt(e,t){var n,i,r,s=yt.lastIndex=vt.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=yt.exec(e))&&(i=vt.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:_t(n,i)})),s=vt.lastIndex;return s<t.length&&(r=t.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function xt(e,t){var n,i=typeof t;return null==t||"boolean"===i?it(t):("number"===i?_t:"string"===i?(n=Ie(t))?(t=n,ot):bt:t instanceof Ie?ot:t instanceof Date?mt:dt(t)?ht:Array.isArray(t)?pt:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?gt:_t)(e,t)}var Mt,wt,St=n(5252),Lt=n(2648),Tt=n(404),kt=0,At=0,Et=0,Ct=1e3,Dt=0,Ot=0,Pt=0,Rt="object"==typeof performance&&performance.now?performance:Date,zt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bt(){return Ot||(zt(Yt),Ot=Rt.now()+Pt)}function Yt(){Ot=0}function Ft(){this._call=this._time=this._next=null}function Nt(e,t,n){var i=new Ft;return i.restart(e,t,n),i}function It(){Bt(),++kt;for(var e,t=Mt;t;)(e=Ot-t._time)>=0&&t._call.call(null,e),t=t._next;--kt}function Ht(){Ot=(Dt=Rt.now())+Pt,kt=At=0;try{It()}finally{kt=0,function(){for(var e,t,n=Mt,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Mt=t);wt=e,Ut(i)}(),Ot=0}}function jt(){var e=Rt.now(),t=e-Dt;t>Ct&&(Pt-=t,Dt=e)}function Ut(e){kt||(At&&(At=clearTimeout(At)),e-Ot>24?(e<1/0&&(At=setTimeout(Ht,e-Rt.now()-Pt)),Et&&(Et=clearInterval(Et))):(Et||(Dt=Rt.now(),Et=setInterval(jt,Ct)),kt=1,zt(Ht)))}function Wt(e,t,n){var i=new Ft;return t=null==t?0:+t,i.restart((function(n){i.stop(),e(n+t)}),t,n),i}Ft.prototype=Nt.prototype={constructor:Ft,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Bt():+n)+(null==t?0:+t),this._next||wt===this||(wt?wt._next=this:Mt=this,wt=this),this._call=e,this._time=n,Ut()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ut())}};var Gt=me("start","end","cancel","interrupt"),Vt=[],qt=0,Xt=1,$t=2,Jt=3,Kt=5,Zt=6;function Qt(e,t,n,i,r,s){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function s(l){var c,u,h,d;if(n.state!==Xt)return o();for(c in r)if((d=r[c]).name===n.name){if(d.state===Jt)return Wt(s);4===d.state?(d.state=Zt,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Zt,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(Wt((function(){n.state===Jt&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=$t,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$t){for(n.state=Jt,i=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=d);i.length=u+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(o),n.state=Kt,1),s=-1,a=i.length;++s<a;)i[s].call(e,r);n.state===Kt&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){for(var i in n.state=Zt,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Nt((function(e){n.state=Xt,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}),0,n.time)}(e,n,{name:t,index:i,group:r,on:Gt,tween:Vt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:qt})}function en(e,t){var n=nn(e,t);if(n.state>qt)throw new Error("too late; already scheduled");return n}function tn(e,t){var n=nn(e,t);if(n.state>Jt)throw new Error("too late; already running");return n}function nn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rn(e,t){var n,i,r,s=e.__transition,a=!0;if(s){for(r in t=null==t?null:t+"",s)(n=s[r]).name===t?(i=n.state>$t&&n.state<Kt,n.state=Zt,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[r]):a=!1;a&&delete e.__transition}}var sn,an,on,ln,cn=180/Math.PI,un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hn(e,t,n,i,r,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*cn,skewX:Math.atan(l)*cn,scaleX:a,scaleY:o}}function dn(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(s,a){var o=[],l=[];return s=e(s),a=e(a),function(e,i,r,s,a,o){if(e!==r||i!==s){var l=a.push("translate(",null,t,null,n);o.push({i:l-4,x:_t(e,r)},{i:l-2,x:_t(i,s)})}else(r||s)&&a.push("translate("+r+t+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,l),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:_t(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(s.rotate,a.rotate,o,l),function(e,t,n,s){e!==t?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:_t(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(s.skewX,a.skewX,o,l),function(e,t,n,i,s,a){if(e!==n||t!==i){var o=s.push(r(s)+"scale(",null,",",null,")");a.push({i:o-4,x:_t(e,n)},{i:o-2,x:_t(t,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,l),s=a=null,function(e){for(var t,n=-1,i=l.length;++n<i;)o[(t=l[n]).i]=t.x(e);return o.join("")}}}var fn=dn((function(e){return"none"===e?un:(sn||(sn=document.createElement("DIV"),an=document.documentElement,on=document.defaultView),sn.style.transform=e,e=on.getComputedStyle(an.appendChild(sn),null).getPropertyValue("transform"),an.removeChild(sn),hn(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),pn=dn((function(e){return null==e?un:(ln||(ln=document.createElementNS("http://www.w3.org/2000/svg","g")),ln.setAttribute("transform",e),(e=ln.transform.baseVal.consolidate())?hn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):un)}),", ",")",")"),mn=n(8644);function _n(e,t){var n,i;return function(){var r=tn(this,e),s=r.tween;if(s!==n)for(var a=0,o=(i=n=s).length;a<o;++a)if(i[a].name===t){(i=i.slice()).splice(a,1);break}r.tween=i}}function gn(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=tn(this,e),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=o;break}l===c&&r.push(o)}s.tween=r}}function yn(e,t,n){var i=e._id;return e.each((function(){var e=tn(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return nn(e,i).value[t]}}function vn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function xn(){}var Mn=.7,wn=1/Mn,Sn="\\s*([+-]?\\d+)\\s*",Ln="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kn=/^#([0-9a-f]{3,8})$/,An=new RegExp("^rgb\\("+[Sn,Sn,Sn]+"\\)$"),En=new RegExp("^rgb\\("+[Tn,Tn,Tn]+"\\)$"),Cn=new RegExp("^rgba\\("+[Sn,Sn,Sn,Ln]+"\\)$"),Dn=new RegExp("^rgba\\("+[Tn,Tn,Tn,Ln]+"\\)$"),On=new RegExp("^hsl\\("+[Ln,Tn,Tn]+"\\)$"),Pn=new RegExp("^hsla\\("+[Ln,Tn,Tn,Ln]+"\\)$"),Rn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function zn(){return this.rgb().formatHex()}function Bn(){return this.rgb().formatRgb()}function Yn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=kn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Fn(t):3===n?new In(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Nn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Nn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=An.exec(e))?new In(t[1],t[2],t[3],1):(t=En.exec(e))?new In(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Cn.exec(e))?Nn(t[1],t[2],t[3],t[4]):(t=Dn.exec(e))?Nn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=On.exec(e))?Wn(t[1],t[2]/100,t[3]/100,1):(t=Pn.exec(e))?Wn(t[1],t[2]/100,t[3]/100,t[4]):Rn.hasOwnProperty(e)?Fn(Rn[e]):"transparent"===e?new In(NaN,NaN,NaN,0):null}function Fn(e){return new In(e>>16&255,e>>8&255,255&e,1)}function Nn(e,t,n,i){return i<=0&&(e=t=n=NaN),new In(e,t,n,i)}function In(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Hn(){return"#"+Un(this.r)+Un(this.g)+Un(this.b)}function jn(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Un(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Wn(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vn(e,t,n,i)}function Gn(e){if(e instanceof Vn)return new Vn(e.h,e.s,e.l,e.opacity);if(e instanceof xn||(e=Yn(e)),!e)return new Vn;if(e instanceof Vn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=t===s?(n-i)/o+6*(n<i):n===s?(i-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Vn(a,o,l,e.opacity)}function Vn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function qn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Xn(e,t){var n;return("number"==typeof t?_t:t instanceof Yn?ot:(n=Yn(t))?(t=n,ot):bt)(e,t)}function $n(e){return function(){this.removeAttribute(e)}}function Jn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kn(e,t,n){var i,r,s=n+"";return function(){var a=this.getAttribute(e);return a===s?null:a===i?r:r=t(i=a,n)}}function Zn(e,t,n){var i,r,s=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===s?null:a===i?r:r=t(i=a,n)}}function Qn(e,t,n){var i,r,s;return function(){var a,o,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(o=l+"")?null:a===i&&o===r?s:(r=o,s=t(i=a,l));this.removeAttribute(e)}}function ei(e,t,n){var i,r,s;return function(){var a,o,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(o=l+"")?null:a===i&&o===r?s:(r=o,s=t(i=a,l));this.removeAttributeNS(e.space,e.local)}}function ti(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function ni(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function ii(e,t){return function(){en(this,e).delay=+t.apply(this,arguments)}}function ri(e,t){return t=+t,function(){en(this,e).delay=t}}function si(e,t){return function(){tn(this,e).duration=+t.apply(this,arguments)}}function ai(e,t){return t=+t,function(){tn(this,e).duration=t}}vn(xn,Yn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:zn,formatHex:zn,formatHsl:function(){return Gn(this).formatHsl()},formatRgb:Bn,toString:Bn}),vn(In,(function(e,t,n,i){return 1===arguments.length?((r=e)instanceof xn||(r=Yn(r)),r?new In((r=r.rgb()).r,r.g,r.b,r.opacity):new In):new In(e,t,n,null==i?1:i);var r}),bn(xn,{brighter:function(e){return e=null==e?wn:Math.pow(wn,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Mn:Math.pow(Mn,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hn,formatHex:Hn,formatRgb:jn,toString:jn})),vn(Vn,(function(e,t,n,i){return 1===arguments.length?Gn(e):new Vn(e,t,n,null==i?1:i)}),bn(xn,{brighter:function(e){return e=null==e?wn:Math.pow(wn,e),new Vn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Mn:Math.pow(Mn,e),new Vn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new In(qn(e>=240?e-240:e+120,r,i),qn(e,r,i),qn(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var oi=n(1309),li=n(3022),ci=n(4811),ui=Tt.Ay.prototype.constructor,hi=n(9203);function di(e){return function(){this.style.removeProperty(e)}}var fi=0;function pi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function mi(e){return(0,Tt.Ay)().transition(e)}function _i(){return++fi}var gi=Tt.Ay.prototype;function yi(e){return e*e*e}function vi(e){return--e*e*e+1}function bi(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}pi.prototype=mi.prototype={constructor:pi,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,li.A)(e));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o,l,c=i[a],u=c.length,h=s[a]=new Array(u),d=0;d<u;++d)(o=c[d])&&(l=e.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),h[d]=l,Qt(h[d],t,n,d,h,nn(o,n)));return new pi(s,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,ci.A)(e));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var l,c=i[o],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=e.call(l,l.__data__,h,c),p=nn(l,n),m=0,_=f.length;m<_;++m)(d=f[m])&&Qt(d,t,n,m,f,p);s.push(f),a.push(l)}return new pi(s,a,t,n)},filter:function(e){"function"!=typeof e&&(e=(0,oi.A)(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s,a=t[r],o=a.length,l=i[r]=[],c=0;c<o;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&l.push(s);return new pi(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var l,c=t[o],u=n[o],h=c.length,d=a[o]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;o<i;++o)a[o]=t[o];return new pi(a,this._parents,this._name,this._id)},selection:function(){return new ui(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=_i(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],l=o.length,c=0;c<l;++c)if(a=o[c]){var u=nn(a,t);Qt(a,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new pi(i,this._parents,e,n)},call:gi.call,nodes:gi.nodes,node:gi.node,size:gi.size,empty:gi.empty,each:gi.each,on:function(e,t){var n=this._id;return arguments.length<2?nn(this.node(),n).on.on(e):this.each(function(e,t,n){var i,r,s=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?en:tn;return function(){var a=s(this,e),o=a.on;o!==i&&(r=(i=o).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=(0,mn.A)(e),i="transform"===n?pn:Xn;return this.attrTween(e,"function"==typeof t?(n.local?ei:Qn)(n,i,yn(this,"attr."+e,t)):null==t?(n.local?Jn:$n)(n):(n.local?Zn:Kn)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=(0,mn.A)(e);return this.tween(n,(i.local?ti:ni)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?fn:Xn;return null==t?this.styleTween(e,function(e,t){var n,i,r;return function(){var s=(0,hi.j)(this,e),a=(this.style.removeProperty(e),(0,hi.j)(this,e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}(e,i)).on("end.style."+e,di(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,r,s;return function(){var a=(0,hi.j)(this,e),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(e),l=o=(0,hi.j)(this,e)),a===l?null:a===i&&l===r?s:(r=l,s=t(i=a,o))}}(e,i,yn(this,"style."+e,t))).each(function(e,t){var n,i,r,s,a="style."+t,o="end."+a;return function(){var l=tn(this,e),c=l.on,u=null==l.value[a]?s||(s=di(t)):void 0;c===n&&r===u||(i=(n=c).copy()).on(o,r=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,r,s=n+"";return function(){var a=(0,hi.j)(this,e);return a===s?null:a===i?r:r=t(i=a,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,r;function s(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,s,n)),i}return s._value=t,s}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(yn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=nn(this.node(),n).tween,s=0,a=r.length;s<a;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((null==t?_n:gn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ii:ri)(t,e)):nn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?si:ai)(t,e)):nn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){tn(this,e).ease=t}}(t,e)):nn(this.node(),t).ease},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise((function(s,a){var o={value:a},l={value:function(){0==--r&&s()}};n.each((function(){var n=tn(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),n.on=t}))}))}};var xi={time:null,delay:0,duration:250,ease:bi};function Mi(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return xi.time=Bt(),xi;return n}Tt.Ay.prototype.interrupt=function(e){return this.each((function(){rn(this,e)}))},Tt.Ay.prototype.transition=function(e){var t,n;e instanceof pi?(t=e._id,e=e._name):(t=_i(),(n=xi).time=Bt(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],l=o.length,c=0;c<l;++c)(a=o[c])&&Qt(a,e,t,c,o,n||Mi(a,t));return new pi(i,this._parents,e,t)};var wi=[null];function Si(e,t){var n,i,r=e.__transition;if(r)for(i in t=null==t?null:t+"",r)if((n=r[i]).state>Xt&&n.name===t)return new pi([[e]],wi,t,+i);return null}function Li(e){return function(){return e}}function Ti(e,t,n){this.target=e,this.type=t,this.selection=n}function ki(){ge.f0.stopImmediatePropagation()}function Ai(){ge.f0.preventDefault(),ge.f0.stopImmediatePropagation()}var Ei={name:"drag"},Ci={name:"space"},Di={name:"handle"},Oi={name:"center"};function Pi(e){return[+e[0],+e[1]]}function Ri(e){return[Pi(e[0]),Pi(e[1])]}var zi,Bi,Yi={name:"x",handles:["w","e"].map(Gi),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Fi={name:"y",handles:["n","s"].map(Gi),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ni={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Gi),input:function(e){return null==e?null:Ri(e)},output:function(e){return e}},Ii={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ji={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ui={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Wi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Gi(e){return{type:e}}function Vi(){return!ge.f0.ctrlKey&&!ge.f0.button}function qi(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Xi(){return navigator.maxTouchPoints||"ontouchstart"in this}function $i(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Ji(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function Ki(){return er(Yi)}function Zi(){return er(Fi)}function Qi(){return er(Ni)}function er(e){var t,n=qi,i=Vi,r=Xi,s=!0,a=me("start","brush","end"),o=6;function l(t){var n=t.property("__brush",m).selectAll(".overlay").data([Gi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ii.overlay).merge(n).each((function(){var e=$i(this).extent;(0,_e.A)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([Gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ii.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return Ii[e.type]})),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=(0,_e.A)(this),t=$i(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-o/2:t[0][0]-o/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-o/2:t[0][1]-o/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+o:o})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+o:o}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t,n){var i=e.__brush.emitter;return!i||n&&i.clean?new h(e,t,n):i}function h(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function d(){if((!t||ge.f0.touches)&&i.apply(this,arguments)){var n,r,a,o,l,h,d,f,p,m,_,g,y=this,v=ge.f0.target.__data__.type,b="selection"===(s&&ge.f0.metaKey?v="overlay":v)?Ei:s&&ge.f0.altKey?Oi:Di,x=e===Fi?null:Ui[v],M=e===Yi?null:Wi[v],w=$i(y),S=w.extent,L=w.selection,T=S[0][0],k=S[0][1],A=S[1][0],E=S[1][1],C=0,D=0,O=x&&M&&s&&ge.f0.shiftKey,P=ge.f0.touches?(g=ge.f0.changedTouches[0].identifier,function(e){return(0,St.A)(e,ge.f0.touches,g)}):Lt.A,R=P(y),z=R,B=u(y,arguments,!0).beforestart();"overlay"===v?(L&&(p=!0),w.selection=L=[[n=e===Fi?T:R[0],a=e===Yi?k:R[1]],[l=e===Fi?A:n,d=e===Yi?E:a]]):(n=L[0][0],a=L[0][1],l=L[1][0],d=L[1][1]),r=n,o=a,h=l,f=d;var Y=(0,_e.A)(y).attr("pointer-events","none"),F=Y.selectAll(".overlay").attr("cursor",Ii[v]);if(ge.f0.touches)B.moved=I,B.ended=j;else{var N=(0,_e.A)(ge.f0.view).on("mousemove.brush",I,!0).on("mouseup.brush",j,!0);s&&N.on("keydown.brush",(function(){switch(ge.f0.keyCode){case 16:O=x&&M;break;case 18:b===Di&&(x&&(l=h-C*x,n=r+C*x),M&&(d=f-D*M,a=o+D*M),b=Oi,H());break;case 32:b!==Di&&b!==Oi||(x<0?l=h-C:x>0&&(n=r-C),M<0?d=f-D:M>0&&(a=o-D),b=Ci,F.attr("cursor",Ii.selection),H());break;default:return}Ai()}),!0).on("keyup.brush",(function(){switch(ge.f0.keyCode){case 16:O&&(m=_=O=!1,H());break;case 18:b===Oi&&(x<0?l=h:x>0&&(n=r),M<0?d=f:M>0&&(a=o),b=Di,H());break;case 32:b===Ci&&(ge.f0.altKey?(x&&(l=h-C*x,n=r+C*x),M&&(d=f-D*M,a=o+D*M),b=Oi):(x<0?l=h:x>0&&(n=r),M<0?d=f:M>0&&(a=o),b=Di),F.attr("cursor",Ii[v]),H());break;default:return}Ai()}),!0),be(ge.f0.view)}ki(),rn(y),c.call(y),B.start()}function I(){var e=P(y);!O||m||_||(Math.abs(e[0]-z[0])>Math.abs(e[1]-z[1])?_=!0:m=!0),z=e,p=!0,Ai(),H()}function H(){var e;switch(C=z[0]-R[0],D=z[1]-R[1],b){case Ci:case Ei:x&&(C=Math.max(T-n,Math.min(A-l,C)),r=n+C,h=l+C),M&&(D=Math.max(k-a,Math.min(E-d,D)),o=a+D,f=d+D);break;case Di:x<0?(C=Math.max(T-n,Math.min(A-n,C)),r=n+C,h=l):x>0&&(C=Math.max(T-l,Math.min(A-l,C)),r=n,h=l+C),M<0?(D=Math.max(k-a,Math.min(E-a,D)),o=a+D,f=d):M>0&&(D=Math.max(k-d,Math.min(E-d,D)),o=a,f=d+D);break;case Oi:x&&(r=Math.max(T,Math.min(A,n-C*x)),h=Math.max(T,Math.min(A,l+C*x))),M&&(o=Math.max(k,Math.min(E,a-D*M)),f=Math.max(k,Math.min(E,d+D*M)))}h<r&&(x*=-1,e=n,n=l,l=e,e=r,r=h,h=e,v in Hi&&F.attr("cursor",Ii[v=Hi[v]])),f<o&&(M*=-1,e=a,a=d,d=e,e=o,o=f,f=e,v in ji&&F.attr("cursor",Ii[v=ji[v]])),w.selection&&(L=w.selection),m&&(r=L[0][0],h=L[1][0]),_&&(o=L[0][1],f=L[1][1]),L[0][0]===r&&L[0][1]===o&&L[1][0]===h&&L[1][1]===f||(w.selection=[[r,o],[h,f]],c.call(y),B.brush())}function j(){if(ki(),ge.f0.touches){if(ge.f0.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else xe(ge.f0.view,p),N.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Y.attr("pointer-events","all"),F.attr("cursor",Ii.overlay),w.selection&&(L=w.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(L)&&(w.selection=null,c.call(y)),B.end()}}function f(){u(this,arguments).moved()}function p(){u(this,arguments).ended()}function m(){var t=this.__brush||{selection:null};return t.extent=Ri(n.apply(this,arguments)),t.dim=e,t}return l.move=function(t,n){t.selection?t.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var t=this,i=t.__brush,r=u(t,arguments),s=i.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),o=xt(s,a);function l(e){i.selection=1===e&&null===a?null:o(e),c.call(t),r.brush()}return null!==s&&null!==a?l:l(1)})):t.each((function(){var t=this,i=arguments,r=t.__brush,s=e.input("function"==typeof n?n.apply(t,i):n,r.extent),a=u(t,i).beforestart();rn(t),r.selection=null===s?null:s,c.call(t),a.start().brush().end()}))},l.clear=function(e){l.move(e,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){(0,ge.ex)(new Ti(l,t,e.output(this.state.selection)),a.apply,a,[t,this.that,this.args])}},l.extent=function(e){return arguments.length?(n="function"==typeof e?e:Li(Ri(e)),l):n},l.filter=function(e){return arguments.length?(i="function"==typeof e?e:Li(!!e),l):i},l.touchable=function(e){return arguments.length?(r="function"==typeof e?e:Li(!!e),l):r},l.handleSize=function(e){return arguments.length?(o=+e,l):o},l.keyModifiers=function(e){return arguments.length?(s=!!e,l):s},l.on=function(){var e=a.on.apply(a,arguments);return e===a?l:e},l}function tr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}1===(zi=tr).length&&(Bi=zi,zi=function(e,t){return tr(Bi(e),t)});var nr=Array.prototype;function ir(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s}nr.slice,nr.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var rr=Math.cos,sr=Math.sin,ar=Math.PI,or=ar/2,lr=2*ar,cr=Math.max;function ur(){var e=0,t=null,n=null,i=null;function r(r){var s,a,o,l,c,u,h=r.length,d=[],f=ir(h),p=[],m=[],_=m.groups=new Array(h),g=new Array(h*h);for(s=0,c=-1;++c<h;){for(a=0,u=-1;++u<h;)a+=r[c][u];d.push(a),p.push(ir(h)),s+=a}for(t&&f.sort((function(e,n){return t(d[e],d[n])})),n&&p.forEach((function(e,t){e.sort((function(e,i){return n(r[t][e],r[t][i])}))})),l=(s=cr(0,lr-e*h)/s)?e:lr/h,a=0,c=-1;++c<h;){for(o=a,u=-1;++u<h;){var y=f[c],v=p[y][u],b=r[y][v],x=a,M=a+=b*s;g[v*h+y]={index:y,subindex:v,startAngle:x,endAngle:M,value:b}}_[y]={index:y,startAngle:o,endAngle:a,value:d[y]},a+=l}for(c=-1;++c<h;)for(u=c-1;++u<h;){var w=g[u*h+c],S=g[c*h+u];(w.value||S.value)&&m.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}return i?m.sort(i):m}return r.padAngle=function(t){return arguments.length?(e=cr(0,t),r):e},r.sortGroups=function(e){return arguments.length?(t=e,r):t},r.sortSubgroups=function(e){return arguments.length?(n=e,r):n},r.sortChords=function(e){return arguments.length?(null==e?i=null:(i=function(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}(e))._=e,r):i&&i._},r}var hr=Array.prototype.slice;function dr(e){return function(){return e}}var fr=Math.PI,pr=2*fr,mr=1e-6,_r=pr-mr;function gr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function yr(){return new gr}gr.prototype=yr.prototype={constructor:gr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var s=this._x1,a=this._y1,o=n-e,l=i-t,c=s-e,u=a-t,h=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>mr)if(Math.abs(u*o-l*c)>mr&&r){var d=n-s,f=i-a,p=o*o+l*l,m=d*d+f*f,_=Math.sqrt(p),g=Math.sqrt(h),y=r*Math.tan((fr-Math.acos((p+h-m)/(2*_*g)))/2),v=y/g,b=y/_;Math.abs(v-1)>mr&&(this._+="L"+(e+v*c)+","+(t+v*u)),this._+="A"+r+","+r+",0,0,"+ +(u*d>c*f)+","+(this._x1=e+b*o)+","+(this._y1=t+b*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,i,r,s){e=+e,t=+t,s=!!s;var a=(n=+n)*Math.cos(i),o=n*Math.sin(i),l=e+a,c=t+o,u=1^s,h=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>mr||Math.abs(this._y1-c)>mr)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%pr+pr),h>_r?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>mr&&(this._+="A"+n+","+n+",0,"+ +(h>=fr)+","+u+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const vr=yr;function br(e){return e.source}function xr(e){return e.target}function Mr(e){return e.radius}function wr(e){return e.startAngle}function Sr(e){return e.endAngle}function Lr(){var e=br,t=xr,n=Mr,i=wr,r=Sr,s=null;function a(){var a,o=hr.call(arguments),l=e.apply(this,o),c=t.apply(this,o),u=+n.apply(this,(o[0]=l,o)),h=i.apply(this,o)-or,d=r.apply(this,o)-or,f=u*rr(h),p=u*sr(h),m=+n.apply(this,(o[0]=c,o)),_=i.apply(this,o)-or,g=r.apply(this,o)-or;if(s||(s=a=vr()),s.moveTo(f,p),s.arc(0,0,u,h,d),h===_&&d===g||(s.quadraticCurveTo(0,0,m*rr(_),m*sr(_)),s.arc(0,0,m,_,g)),s.quadraticCurveTo(0,0,f,p),s.closePath(),a)return s=null,a+""||null}return a.radius=function(e){return arguments.length?(n="function"==typeof e?e:dr(+e),a):n},a.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:dr(+e),a):i},a.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:dr(+e),a):r},a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(e){return arguments.length?(t=e,a):t},a.context=function(e){return arguments.length?(s=null==e?null:e,a):s},a}var Tr="$";function kr(){}function Ar(e,t){var n=new kr;if(e instanceof kr)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var i,r=-1,s=e.length;if(null==t)for(;++r<s;)n.set(r,e[r]);else for(;++r<s;)n.set(t(i=e[r],r,e),i)}else if(e)for(var a in e)n.set(a,e[a]);return n}kr.prototype=Ar.prototype={constructor:kr,has:function(e){return Tr+e in this},get:function(e){return this[Tr+e]},set:function(e,t){return this[Tr+e]=t,this},remove:function(e){var t=Tr+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Tr&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Tr&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Tr&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Tr&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Tr&&++e;return e},empty:function(){for(var e in this)if(e[0]===Tr)return!1;return!0},each:function(e){for(var t in this)t[0]===Tr&&e(this[t],t.slice(1),this)}};const Er=Ar;function Cr(){var e,t,n,i=[],r=[];function s(n,r,a,o){if(r>=i.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var l,c,u,h=-1,d=n.length,f=i[r++],p=Er(),m=a();++h<d;)(u=p.get(l=f(c=n[h])+""))?u.push(c):p.set(l,[c]);return p.each((function(e,t){o(m,t,s(e,r,a,o))})),m}function a(e,n){if(++n>i.length)return e;var s,o=r[n-1];return null!=t&&n>=i.length?s=e.entries():(s=[],e.each((function(e,t){s.push({key:t,values:a(e,n)})}))),null!=o?s.sort((function(e,t){return o(e.key,t.key)})):s}return n={object:function(e){return s(e,0,Dr,Or)},map:function(e){return s(e,0,Pr,Rr)},entries:function(e){return a(s(e,0,Pr,Rr),0)},key:function(e){return i.push(e),n},sortKeys:function(e){return r[i.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function Dr(){return{}}function Or(e,t,n){e[t]=n}function Pr(){return Er()}function Rr(e,t,n){e.set(t,n)}function zr(){}var Br=Er.prototype;function Yr(e,t){var n=new zr;if(e instanceof zr)e.each((function(e){n.add(e)}));else if(e){var i=-1,r=e.length;if(null==t)for(;++i<r;)n.add(e[i]);else for(;++i<r;)n.add(t(e[i],i,e))}return n}zr.prototype=Yr.prototype={constructor:zr,has:Br.has,add:function(e){return this[Tr+(e+="")]=e,this},remove:Br.remove,clear:Br.clear,values:Br.keys,size:Br.size,empty:Br.empty,each:Br.each};const Fr=Yr;function Nr(e){var t=[];for(var n in e)t.push(n);return t}function Ir(e){var t=[];for(var n in e)t.push(e[n]);return t}function Hr(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}function jr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ur(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Wr(){}var Gr=.7,Vr=1.4285714285714286,qr="\\s*([+-]?\\d+)\\s*",Xr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",$r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jr=/^#([0-9a-f]{3,8})$/,Kr=new RegExp("^rgb\\("+[qr,qr,qr]+"\\)$"),Zr=new RegExp("^rgb\\("+[$r,$r,$r]+"\\)$"),Qr=new RegExp("^rgba\\("+[qr,qr,qr,Xr]+"\\)$"),es=new RegExp("^rgba\\("+[$r,$r,$r,Xr]+"\\)$"),ts=new RegExp("^hsl\\("+[Xr,$r,$r]+"\\)$"),ns=new RegExp("^hsla\\("+[Xr,$r,$r,Xr]+"\\)$"),is={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rs(){return this.rgb().formatHex()}function ss(){return this.rgb().formatRgb()}function as(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?os(t):3===n?new hs(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ls(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ls(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Kr.exec(e))?new hs(t[1],t[2],t[3],1):(t=Zr.exec(e))?new hs(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Qr.exec(e))?ls(t[1],t[2],t[3],t[4]):(t=es.exec(e))?ls(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ts.exec(e))?ms(t[1],t[2]/100,t[3]/100,1):(t=ns.exec(e))?ms(t[1],t[2]/100,t[3]/100,t[4]):is.hasOwnProperty(e)?os(is[e]):"transparent"===e?new hs(NaN,NaN,NaN,0):null}function os(e){return new hs(e>>16&255,e>>8&255,255&e,1)}function ls(e,t,n,i){return i<=0&&(e=t=n=NaN),new hs(e,t,n,i)}function cs(e){return e instanceof Wr||(e=as(e)),e?new hs((e=e.rgb()).r,e.g,e.b,e.opacity):new hs}function us(e,t,n,i){return 1===arguments.length?cs(e):new hs(e,t,n,null==i?1:i)}function hs(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function ds(){return"#"+ps(this.r)+ps(this.g)+ps(this.b)}function fs(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function ps(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ms(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ys(e,t,n,i)}function _s(e){if(e instanceof ys)return new ys(e.h,e.s,e.l,e.opacity);if(e instanceof Wr||(e=as(e)),!e)return new ys;if(e instanceof ys)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=t===s?(n-i)/o+6*(n<i):n===s?(i-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new ys(a,o,l,e.opacity)}function gs(e,t,n,i){return 1===arguments.length?_s(e):new ys(e,t,n,null==i?1:i)}function ys(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function vs(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}jr(Wr,as,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:rs,formatHex:rs,formatHsl:function(){return _s(this).formatHsl()},formatRgb:ss,toString:ss}),jr(hs,us,Ur(Wr,{brighter:function(e){return e=null==e?Vr:Math.pow(Vr,e),new hs(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Gr:Math.pow(Gr,e),new hs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ds,formatHex:ds,formatRgb:fs,toString:fs})),jr(ys,gs,Ur(Wr,{brighter:function(e){return e=null==e?Vr:Math.pow(Vr,e),new ys(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gr:Math.pow(Gr,e),new ys(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new hs(vs(e>=240?e-240:e+120,r,i),vs(e,r,i),vs(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var bs=Math.PI/180,xs=180/Math.PI,Ms=.96422,ws=1,Ss=.82521,Ls=4/29,Ts=6/29,ks=3*Ts*Ts,As=Ts*Ts*Ts;function Es(e){if(e instanceof Os)return new Os(e.l,e.a,e.b,e.opacity);if(e instanceof Is)return Hs(e);e instanceof hs||(e=cs(e));var t,n,i=Bs(e.r),r=Bs(e.g),s=Bs(e.b),a=Ps((.2225045*i+.7168786*r+.0606169*s)/ws);return i===r&&r===s?t=n=a:(t=Ps((.4360747*i+.3850649*r+.1430804*s)/Ms),n=Ps((.0139322*i+.0971045*r+.7141733*s)/Ss)),new Os(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Cs(e,t){return new Os(e,0,0,null==t?1:t)}function Ds(e,t,n,i){return 1===arguments.length?Es(e):new Os(e,t,n,null==i?1:i)}function Os(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function Ps(e){return e>As?Math.pow(e,1/3):e/ks+Ls}function Rs(e){return e>Ts?e*e*e:ks*(e-Ls)}function zs(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ys(e){if(e instanceof Is)return new Is(e.h,e.c,e.l,e.opacity);if(e instanceof Os||(e=Es(e)),0===e.a&&0===e.b)return new Is(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*xs;return new Is(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fs(e,t,n,i){return 1===arguments.length?Ys(e):new Is(n,t,e,null==i?1:i)}function Ns(e,t,n,i){return 1===arguments.length?Ys(e):new Is(e,t,n,null==i?1:i)}function Is(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function Hs(e){if(isNaN(e.h))return new Os(e.l,0,0,e.opacity);var t=e.h*bs;return new Os(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}jr(Os,Ds,Ur(Wr,{brighter:function(e){return new Os(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Os(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new hs(zs(3.1338561*(t=Ms*Rs(t))-1.6168667*(e=ws*Rs(e))-.4906146*(n=Ss*Rs(n))),zs(-.9787684*t+1.9161415*e+.033454*n),zs(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),jr(Is,Ns,Ur(Wr,{brighter:function(e){return new Is(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Is(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Hs(this).rgb()}}));var js=-.14861,Us=1.78277,Ws=-.29227,Gs=-.90649,Vs=1.97294,qs=Vs*Gs,Xs=Vs*Us,$s=Us*Ws-Gs*js;function Js(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof Ks)return new Ks(e.h,e.s,e.l,e.opacity);e instanceof hs||(e=cs(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=($s*i+qs*t-Xs*n)/($s+qs-Xs),s=i-r,a=(Vs*(n-r)-Ws*s)/Gs,o=Math.sqrt(a*a+s*s)/(Vs*r*(1-r)),l=o?Math.atan2(a,s)*xs-120:NaN;return new Ks(l<0?l+360:l,o,r,e.opacity)}(e):new Ks(e,t,n,null==i?1:i)}function Ks(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Zs(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}jr(Ks,Js,Ur(Wr,{brighter:function(e){return e=null==e?Vr:Math.pow(Vr,e),new Ks(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gr:Math.pow(Gr,e),new Ks(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*bs,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new hs(255*(t+n*(js*i+Us*r)),255*(t+n*(Ws*i+Gs*r)),255*(t+n*(Vs*i)),this.opacity)}}));var Qs=function(e){return 1===e.length&&(e=function(e){return function(t,n){return Zs(e(t),n)}}(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}(Zs);Qs.right,Qs.left;var ea=Array.prototype,ta=(ea.slice,ea.map,Math.sqrt(50)),na=Math.sqrt(10),ia=Math.sqrt(2);function ra(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=ta?r*=10:s>=na?r*=5:s>=ia&&(r*=2),t<e?-r:r}function sa(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function aa(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s}var oa=Array.prototype.slice;function la(e,t){return e-t}function ca(e){return function(){return e}}function ua(e,t){for(var n,i=-1,r=t.length;++i<r;)if(n=ha(e,t[i]))return n;return 0}function ha(e,t){for(var n=t[0],i=t[1],r=-1,s=0,a=e.length,o=a-1;s<a;o=s++){var l=e[s],c=l[0],u=l[1],h=e[o],d=h[0],f=h[1];if(da(l,h,t))return 0;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=-r)}return r}function da(e,t,n){var i,r,s,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(r=e[i=+(e[0]===t[0])],s=n[i],a=t[i],r<=s&&s<=a||a<=s&&s<=r)}function fa(){}var pa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ma(){var e=1,t=1,n=sa,i=o;function r(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(la);else{var i=function(e){var t,n,i,r=e.length,s=-1;for(1;++s<r;)if(null!=(t=e[s])&&t>=t)for(n=i=t;++s<r;)null!=(t=e[s])&&(n>t&&(n=t),i<t&&(i=t));return[n,i]}(e),r=i[0],a=i[1];t=ra(r,a,t),t=aa(Math.floor(r/t)*t,Math.floor(a/t)*t,t)}return t.map((function(t){return s(e,t)}))}function s(n,r){var s=[],o=[];return function(n,i,r){var s,o,l,c,u,h,d=new Array,f=new Array;for(s=o=-1,c=n[0]>=i,pa[c<<1].forEach(p);++s<e-1;)l=c,c=n[s+1]>=i,pa[l|c<<1].forEach(p);for(pa[0|c].forEach(p);++o<t-1;){for(s=-1,c=n[o*e+e]>=i,u=n[o*e]>=i,pa[c<<1|u<<2].forEach(p);++s<e-1;)l=c,c=n[o*e+e+s+1]>=i,h=u,u=n[o*e+s+1]>=i,pa[l|c<<1|u<<2|h<<3].forEach(p);pa[c|u<<3].forEach(p)}for(s=-1,u=n[o*e]>=i,pa[u<<2].forEach(p);++s<e-1;)h=u,u=n[o*e+s+1]>=i,pa[u<<2|h<<3].forEach(p);function p(e){var t,n,i=[e[0][0]+s,e[0][1]+o],l=[e[1][0]+s,e[1][1]+o],c=a(i),u=a(l);(t=f[c])?(n=d[u])?(delete f[t.end],delete d[n.start],t===n?(t.ring.push(l),r(t.ring)):d[t.start]=f[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete f[t.end],t.ring.push(l),f[t.end=u]=t):(t=d[u])?(n=f[c])?(delete d[t.start],delete f[n.end],t===n?(t.ring.push(l),r(t.ring)):d[n.start]=f[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(i),d[t.start=c]=t):d[c]=f[u]={start:c,end:u,ring:[i,l]}}pa[u<<3].forEach(p)}(n,r,(function(e){i(e,n,r),function(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(e)>0?s.push([e]):o.push(e)})),o.forEach((function(e){for(var t,n=0,i=s.length;n<i;++n)if(-1!==ua((t=s[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:r,coordinates:s}}function a(t){return 2*t[0]+t[1]*(e+1)*4}function o(n,i,r){n.forEach((function(n){var s,a=n[0],o=n[1],l=0|a,c=0|o,u=i[c*e+l];a>0&&a<e&&l===a&&(s=i[c*e+l-1],n[0]=a+(r-s)/(u-s)-.5),o>0&&o<t&&c===o&&(s=i[(c-1)*e+l],n[1]=o+(r-s)/(u-s)-.5)}))}return r.contour=s,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.ceil(n[0]),s=Math.ceil(n[1]);if(!(i>0&&s>0))throw new Error("invalid size");return e=i,t=s,r},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?ca(oa.call(e)):ca(e),r):n},r.smooth=function(e){return arguments.length?(i=e?o:fa,r):i===o},r}function _a(e,t,n){for(var i=e.width,r=e.height,s=1+(n<<1),a=0;a<r;++a)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=e.data[o+a*i]),o>=n&&(o>=s&&(l-=e.data[o-s+a*i]),t.data[o-n+a*i]=l/Math.min(o+1,i-1+s-o,s))}function ga(e,t,n){for(var i=e.width,r=e.height,s=1+(n<<1),a=0;a<i;++a)for(var o=0,l=0;o<r+n;++o)o<r&&(l+=e.data[a+o*i]),o>=n&&(o>=s&&(l-=e.data[a+(o-s)*i]),t.data[a+(o-n)*i]=l/Math.min(o+1,r-1+s-o,s))}function ya(e){return e[0]}function va(e){return e[1]}function ba(){return 1}function xa(){var e=ya,t=va,n=ba,i=960,r=500,s=20,a=2,o=3*s,l=i+2*o>>a,c=r+2*o>>a,u=ca(20);function h(i){var r=new Float32Array(l*c),h=new Float32Array(l*c);i.forEach((function(i,s,u){var h=+e(i,s,u)+o>>a,d=+t(i,s,u)+o>>a,f=+n(i,s,u);h>=0&&h<l&&d>=0&&d<c&&(r[h+d*l]+=f)})),_a({width:l,height:c,data:r},{width:l,height:c,data:h},s>>a),ga({width:l,height:c,data:h},{width:l,height:c,data:r},s>>a),_a({width:l,height:c,data:r},{width:l,height:c,data:h},s>>a),ga({width:l,height:c,data:h},{width:l,height:c,data:r},s>>a),_a({width:l,height:c,data:r},{width:l,height:c,data:h},s>>a),ga({width:l,height:c,data:h},{width:l,height:c,data:r},s>>a);var f=u(r);if(!Array.isArray(f)){var p=function(e){var t,n,i=e.length,r=-1;for(1;++r<i;)if(null!=(t=e[r])&&t>=t)for(n=t;++r<i;)null!=(t=e[r])&&t>n&&(n=t);return n}(r);f=ra(0,p,f),(f=aa(0,Math.floor(p/f)*f,f)).shift()}return ma().thresholds(f).size([l,c])(r).map(d)}function d(e){return e.value*=Math.pow(2,-2*a),e.coordinates.forEach(f),e}function f(e){e.forEach(p)}function p(e){e.forEach(m)}function m(e){e[0]=e[0]*Math.pow(2,a)-o,e[1]=e[1]*Math.pow(2,a)-o}function _(){return l=i+2*(o=3*s)>>a,c=r+2*o>>a,h}return h.x=function(t){return arguments.length?(e="function"==typeof t?t:ca(+t),h):e},h.y=function(e){return arguments.length?(t="function"==typeof e?e:ca(+e),h):t},h.weight=function(e){return arguments.length?(n="function"==typeof e?e:ca(+e),h):n},h.size=function(e){if(!arguments.length)return[i,r];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return i=t,r=n,_()},h.cellSize=function(e){if(!arguments.length)return 1<<a;if(!((e=+e)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(e)/Math.LN2),_()},h.thresholds=function(e){return arguments.length?(u="function"==typeof e?e:Array.isArray(e)?ca(oa.call(e)):ca(e),h):u},h.bandwidth=function(e){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return s=Math.round((Math.sqrt(4*e*e+1)-1)/2),_()},h}function Ma(e){return function(){return e}}function wa(e,t,n,i,r,s,a,o,l,c){this.target=e,this.type=t,this.subject=n,this.identifier=i,this.active=r,this.x=s,this.y=a,this.dx=o,this.dy=l,this._=c}function Sa(){return!ge.f0.ctrlKey&&!ge.f0.button}function La(){return this.parentNode}function Ta(e){return null==e?{x:ge.f0.x,y:ge.f0.y}:e}function ka(){return navigator.maxTouchPoints||"ontouchstart"in this}function Aa(){var e,t,n,i,r=Sa,s=La,a=Ta,o=ka,l={},c=me("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",f).filter(o).on("touchstart.drag",_).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!i&&r.apply(this,arguments)){var a=v("mouse",s.apply(this,arguments),Lt.A,this,arguments);a&&((0,_e.A)(ge.f0.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),be(ge.f0.view),ye(),n=!1,e=ge.f0.clientX,t=ge.f0.clientY,a("start"))}}function p(){if(ve(),!n){var i=ge.f0.clientX-e,r=ge.f0.clientY-t;n=i*i+r*r>h}l.mouse("drag")}function m(){(0,_e.A)(ge.f0.view).on("mousemove.drag mouseup.drag",null),xe(ge.f0.view,n),ve(),l.mouse("end")}function _(){if(r.apply(this,arguments)){var e,t,n=ge.f0.changedTouches,i=s.apply(this,arguments),a=n.length;for(e=0;e<a;++e)(t=v(n[e].identifier,i,St.A,this,arguments))&&(ye(),t("start"))}}function g(){var e,t,n=ge.f0.changedTouches,i=n.length;for(e=0;e<i;++e)(t=l[n[e].identifier])&&(ve(),t("drag"))}function y(){var e,t,n=ge.f0.changedTouches,r=n.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<r;++e)(t=l[n[e].identifier])&&(ye(),t("end"))}function v(e,t,n,i,r){var s,o,h,f=n(t,e),p=c.copy();if((0,ge.ex)(new wa(d,"beforestart",s,e,u,f[0],f[1],0,0,p),(function(){return null!=(ge.f0.subject=s=a.apply(i,r))&&(o=s.x-f[0]||0,h=s.y-f[1]||0,!0)})))return function a(c){var m,_=f;switch(c){case"start":l[e]=a,m=u++;break;case"end":delete l[e],--u;case"drag":f=n(t,e),m=u}(0,ge.ex)(new wa(d,c,s,e,m,f[0]+o,f[1]+h,f[0]-_[0],f[1]-_[1],p),p.apply,p,[c,i,r])}}return d.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ma(!!e),d):r},d.container=function(e){return arguments.length?(s="function"==typeof e?e:Ma(e),d):s},d.subject=function(e){return arguments.length?(a="function"==typeof e?e:Ma(e),d):a},d.touchable=function(e){return arguments.length?(o="function"==typeof e?e:Ma(!!e),d):o},d.on=function(){var e=c.on.apply(c,arguments);return e===c?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}wa.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ea={},Ca={},Da=34,Oa=10,Pa=13;function Ra(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function za(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function Ba(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Ya(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,r=[],s=e.length,a=0,o=0,l=s<=0,c=!1;function u(){if(l)return Ca;if(c)return c=!1,Ea;var t,i,r=a;if(e.charCodeAt(r)===Da){for(;a++<s&&e.charCodeAt(a)!==Da||e.charCodeAt(++a)===Da;);return(t=a)>=s?l=!0:(i=e.charCodeAt(a++))===Oa?c=!0:i===Pa&&(c=!0,e.charCodeAt(a)===Oa&&++a),e.slice(r+1,t-1).replace(/""/g,'"')}for(;a<s;){if((i=e.charCodeAt(t=a++))===Oa)c=!0;else if(i===Pa)c=!0,e.charCodeAt(a)===Oa&&++a;else if(i!==n)continue;return e.slice(r,t)}return l=!0,e.slice(r,s)}for(e.charCodeAt(s-1)===Oa&&--s,e.charCodeAt(s-1)===Pa&&--s;(i=u())!==Ca;){for(var h=[];i!==Ea&&i!==Ca;)h.push(i),i=u();t&&null==(h=t(h,o++))||r.push(h)}return r}function r(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function s(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?function(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+Ba(-e,6):e>9999?"+"+Ba(e,6):Ba(e,4)}(e.getUTCFullYear())+"-"+Ba(e.getUTCMonth()+1,2)+"-"+Ba(e.getUTCDate(),2)+(r?"T"+Ba(t,2)+":"+Ba(n,2)+":"+Ba(i,2)+"."+Ba(r,3)+"Z":i?"T"+Ba(t,2)+":"+Ba(n,2)+":"+Ba(i,2)+"Z":n||t?"T"+Ba(t,2)+":"+Ba(n,2)+"Z":"")}(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,s=i(e,(function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=Ra(e);return function(i,r){return t(n(i),r,e)}}(e,t):Ra(e)}));return s.columns=r||[],s},parseRows:i,format:function(t,n){return null==n&&(n=za(t)),[n.map(a).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=za(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(s).join("\n")},formatRow:s,formatValue:a}}var Fa=Ya(","),Na=Fa.parse,Ia=Fa.parseRows,Ha=Fa.format,ja=Fa.formatBody,Ua=Fa.formatRows,Wa=Fa.formatRow,Ga=Fa.formatValue,Va=Ya("\t"),qa=Va.parse,Xa=Va.parseRows,$a=Va.format,Ja=Va.formatBody,Ka=Va.formatRows,Za=Va.formatRow,Qa=Va.formatValue;function eo(e){for(var t in e){var n,i,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;to&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;e[t]=r}return e}var to=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function no(e){return+e}function io(e){return e*e}function ro(e){return e*(2-e)}function so(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}var ao=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),oo=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),lo=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),co=Math.PI,uo=co/2;function ho(e){return 1==+e?1:1-Math.cos(e*uo)}function fo(e){return Math.sin(e*uo)}function po(e){return(1-Math.cos(co*e))/2}function mo(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function _o(e){return mo(1-+e)}function go(e){return 1-mo(e)}function yo(e){return((e*=2)<=1?mo(1-e):2-mo(e-1))/2}function vo(e){return 1-Math.sqrt(1-e*e)}function bo(e){return Math.sqrt(1- --e*e)}function xo(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Mo=4/11,wo=6/11,So=8/11,Lo=3/4,To=9/11,ko=10/11,Ao=15/16,Eo=21/22,Co=63/64,Do=1/Mo/Mo;function Oo(e){return 1-Po(1-e)}function Po(e){return(e=+e)<Mo?Do*e*e:e<So?Do*(e-=wo)*e+Lo:e<ko?Do*(e-=To)*e+Ao:Do*(e-=Eo)*e+Co}function Ro(e){return((e*=2)<=1?1-Po(1-e):Po(e-1)+1)/2}var zo=1.70158,Bo=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(zo),Yo=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(zo),Fo=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(zo),No=2*Math.PI,Io=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=No);function r(e){return t*mo(- --e)*Math.sin((i-e)/n)}return r.amplitude=function(t){return e(t,n*No)},r.period=function(n){return e(t,n)},r}(1,.3),Ho=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=No);function r(e){return 1-t*mo(e=+e)*Math.sin((e+i)/n)}return r.amplitude=function(t){return e(t,n*No)},r.period=function(n){return e(t,n)},r}(1,.3),jo=function e(t,n){var i=Math.asin(1/(t=Math.max(1,t)))*(n/=No);function r(e){return((e=2*e-1)<0?t*mo(-e)*Math.sin((i-e)/n):2-t*mo(e)*Math.sin((i+e)/n))/2}return r.amplitude=function(t){return e(t,n*No)},r.period=function(n){return e(t,n)},r}(1,.3);function Uo(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function Wo(e,t){return fetch(e,t).then(Uo)}function Go(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function Vo(e,t){return fetch(e,t).then(Go)}function qo(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Xo(e,t){return fetch(e,t).then(qo)}function $o(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),Xo(t,n).then((function(t){return e(t,i)}))}}function Jo(e,t,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=Ya(e);return Xo(t,n).then((function(e){return r.parse(e,i)}))}var Ko=$o(Na),Zo=$o(qa);function Qo(e,t){return new Promise((function(n,i){var r=new Image;for(var s in t)r[s]=t[s];r.onerror=i,r.onload=function(){n(r)},r.src=e}))}function el(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function tl(e,t){return fetch(e,t).then(el)}function nl(e){return function(t,n){return Xo(t,n).then((function(t){return(new DOMParser).parseFromString(t,e)}))}}const il=nl("application/xml");var rl=nl("text/html"),sl=nl("image/svg+xml");function al(e,t){var n;function i(){var i,r,s=n.length,a=0,o=0;for(i=0;i<s;++i)a+=(r=n[i]).x,o+=r.y;for(a=a/s-e,o=o/s-t,i=0;i<s;++i)(r=n[i]).x-=a,r.y-=o}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i}function ol(e){return function(){return e}}function ll(){return 1e-6*(Math.random()-.5)}function cl(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,s,a,o,l,c,u,h,d,f=e._root,p={data:i},m=e._x0,_=e._y0,g=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=t>=(s=(m+g)/2))?m=s:g=s,(u=n>=(a=(_+y)/2))?_=a:y=a,r=f,!(f=f[h=u<<1|c]))return r[h]=p,e;if(o=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===o&&n===l)return p.next=f,r?r[h]=p:e._root=p,e;do{r=r?r[h]=new Array(4):e._root=new Array(4),(c=t>=(s=(m+g)/2))?m=s:g=s,(u=n>=(a=(_+y)/2))?_=a:y=a}while((h=u<<1|c)==(d=(l>=a)<<1|o>=s));return r[d]=f,r[h]=p,e}function ul(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function hl(e){return e[0]}function dl(e){return e[1]}function fl(e,t,n){var i=new pl(null==t?hl:t,null==n?dl:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function pl(e,t,n,i,r,s){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function ml(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var _l=fl.prototype=pl.prototype;function gl(e){return e.x+e.vx}function yl(e){return e.y+e.vy}function vl(e){var t,n,i=1,r=1;function s(){for(var e,s,o,l,c,u,h,d=t.length,f=0;f<r;++f)for(s=fl(t,gl,yl).visitAfter(a),e=0;e<d;++e)o=t[e],u=n[o.index],h=u*u,l=o.x+o.vx,c=o.y+o.vy,s.visit(p);function p(e,t,n,r,s){var a=e.data,d=e.r,f=u+d;if(!a)return t>l+f||r<l-f||n>c+f||s<c-f;if(a.index>o.index){var p=l-a.x-a.vx,m=c-a.y-a.vy,_=p*p+m*m;_<f*f&&(0===p&&(_+=(p=ll())*p),0===m&&(_+=(m=ll())*m),_=(f-(_=Math.sqrt(_)))/_*i,o.vx+=(p*=_)*(f=(d*=d)/(h+d)),o.vy+=(m*=_)*f,a.vx-=p*(f=1-f),a.vy-=m*f)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function o(){if(t){var i,r,s=t.length;for(n=new Array(s),i=0;i<s;++i)r=t[i],n[r.index]=+e(r,i,t)}}return"function"!=typeof e&&(e=ol(null==e?1:+e)),s.initialize=function(e){t=e,o()},s.iterations=function(e){return arguments.length?(r=+e,s):r},s.strength=function(e){return arguments.length?(i=+e,s):i},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:ol(+t),o(),s):e},s}function bl(e){return e.index}function xl(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Ml(e){var t,n,i,r,s,a=bl,o=function(e){return 1/Math.min(r[e.source.index],r[e.target.index])},l=ol(30),c=1;function u(i){for(var r=0,a=e.length;r<c;++r)for(var o,l,u,h,d,f,p,m=0;m<a;++m)l=(o=e[m]).source,h=(u=o.target).x+u.vx-l.x-l.vx||ll(),d=u.y+u.vy-l.y-l.vy||ll(),h*=f=((f=Math.sqrt(h*h+d*d))-n[m])/f*i*t[m],d*=f,u.vx-=h*(p=s[m]),u.vy-=d*p,l.vx+=h*(p=1-p),l.vy+=d*p}function h(){if(i){var o,l,c=i.length,u=e.length,h=Er(i,a);for(o=0,r=new Array(c);o<u;++o)(l=e[o]).index=o,"object"!=typeof l.source&&(l.source=xl(h,l.source)),"object"!=typeof l.target&&(l.target=xl(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(o=0,s=new Array(u);o<u;++o)l=e[o],s[o]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);t=new Array(u),d(),n=new Array(u),f()}}function d(){if(i)for(var n=0,r=e.length;n<r;++n)t[n]=+o(e[n],n,e)}function f(){if(i)for(var t=0,r=e.length;t<r;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),u.initialize=function(e){i=e,h()},u.links=function(t){return arguments.length?(e=t,h(),u):e},u.id=function(e){return arguments.length?(a=e,u):a},u.iterations=function(e){return arguments.length?(c=+e,u):c},u.strength=function(e){return arguments.length?(o="function"==typeof e?e:ol(+e),d(),u):o},u.distance=function(e){return arguments.length?(l="function"==typeof e?e:ol(+e),f(),u):l},u}function wl(e){return e.x}function Sl(e){return e.y}_l.copy=function(){var e,t,n=new pl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=ml(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var r=0;r<4;++r)(t=i.source[r])&&(t.length?e.push({source:t,target:i.target[r]=new Array(4)}):i.target[r]=ml(t));return n},_l.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return cl(this.cover(t,n),t,n,e)},_l.addAll=function(e){var t,n,i,r,s=e.length,a=new Array(s),o=new Array(s),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(a[n]=i,o[n]=r,i<l&&(l=i),i>u&&(u=i),r<c&&(c=r),r>h&&(h=r));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<s;++n)cl(this,a[n],o[n],e[n]);return this},_l.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,s=(i=Math.floor(t))+1;else{for(var a,o,l=r-n,c=this._root;n>e||e>=r||i>t||t>=s;)switch(o=(t<i)<<1|e<n,(a=new Array(4))[o]=c,c=a,l*=2,o){case 0:r=n+l,s=i+l;break;case 1:n=r-l,s=i+l;break;case 2:r=n+l,i=s-l;break;case 3:n=r-l,i=s-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this},_l.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},_l.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},_l.find=function(e,t,n){var i,r,s,a,o,l,c,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new ul(m,u,h,d,f)),null==n?n=1/0:(u=e-n,h=t-n,d=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>d||(s=l.y0)>f||(a=l.x1)<u||(o=l.y1)<h))if(m.length){var _=(r+a)/2,g=(s+o)/2;p.push(new ul(m[3],_,g,a,o),new ul(m[2],r,g,_,o),new ul(m[1],_,s,a,g),new ul(m[0],r,s,_,g)),(c=(t>=g)<<1|e>=_)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=e-+this._x.call(null,m.data),v=t-+this._y.call(null,m.data),b=y*y+v*v;if(b<n){var x=Math.sqrt(n=b);u=e-x,h=t-x,d=e+x,f=t+x,i=m.data}}return i},_l.remove=function(e){if(isNaN(s=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,i,r,s,a,o,l,c,u,h,d,f=this._root,p=this._x0,m=this._y0,_=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((c=s>=(o=(p+_)/2))?p=o:_=o,(u=a>=(l=(m+g)/2))?m=l:g=l,t=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):t?(r?t[h]=r:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},_l.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},_l.root=function(){return this._root},_l.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},_l.visit=function(e){var t,n,i,r,s,a,o=[],l=this._root;for(l&&o.push(new ul(l,this._x0,this._y0,this._x1,this._y1));t=o.pop();)if(!e(l=t.node,i=t.x0,r=t.y0,s=t.x1,a=t.y1)&&l.length){var c=(i+s)/2,u=(r+a)/2;(n=l[3])&&o.push(new ul(n,c,u,s,a)),(n=l[2])&&o.push(new ul(n,i,u,c,a)),(n=l[1])&&o.push(new ul(n,c,r,s,u)),(n=l[0])&&o.push(new ul(n,i,r,c,u))}return this},_l.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new ul(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var r=t.node;if(r.length){var s,a=t.x0,o=t.y0,l=t.x1,c=t.y1,u=(a+l)/2,h=(o+c)/2;(s=r[0])&&n.push(new ul(s,a,o,u,h)),(s=r[1])&&n.push(new ul(s,u,o,l,h)),(s=r[2])&&n.push(new ul(s,a,h,u,c)),(s=r[3])&&n.push(new ul(s,u,h,l,c))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},_l.x=function(e){return arguments.length?(this._x=e,this):this._x},_l.y=function(e){return arguments.length?(this._y=e,this):this._y};var Ll=10,Tl=Math.PI*(3-Math.sqrt(5));function kl(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,a=.6,o=Er(),l=Nt(u),c=me("tick","end");function u(){h(),c.call("tick",t),n<i&&(l.stop(),c.call("end",t))}function h(i){var l,c,u=e.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(s-n)*r,o.each((function(e){e(n)})),l=0;l<u;++l)null==(c=e[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return t}function d(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var r=Ll*Math.sqrt(n),s=n*Tl;t.x=r*Math.cos(s),t.y=r*Math.sin(s)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function f(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:h,restart:function(){return l.restart(u),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),o.each(f),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(r=+e,t):+r},alphaTarget:function(e){return arguments.length?(s=+e,t):s},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},force:function(e,n){return arguments.length>1?(null==n?o.remove(e):o.set(e,f(n)),t):o.get(e)},find:function(t,n,i){var r,s,a,o,l,c=0,u=e.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(a=(r=t-(o=e[c]).x)*r+(s=n-o.y)*s)<i&&(l=o,i=a);return l},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function Al(){var e,t,n,i,r=ol(-30),s=1,a=1/0,o=.81;function l(i){var r,s=e.length,a=fl(e,wl,Sl).visitAfter(u);for(n=i,r=0;r<s;++r)t=e[r],a.visit(h)}function c(){if(e){var t,n,s=e.length;for(i=new Array(s),t=0;t<s;++t)n=e[t],i[n.index]=+r(n,t,e)}}function u(e){var t,n,r,s,a,o=0,l=0;if(e.length){for(r=s=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,l+=n,r+=n*t.x,s+=n*t.y);e.x=r/l,e.y=s/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{o+=i[t.data.index]}while(t=t.next)}e.value=o}function h(e,r,l,c){if(!e.value)return!0;var u=e.x-t.x,h=e.y-t.y,d=c-r,f=u*u+h*h;if(d*d/o<f)return f<a&&(0===u&&(f+=(u=ll())*u),0===h&&(f+=(h=ll())*h),f<s&&(f=Math.sqrt(s*f)),t.vx+=u*e.value*n/f,t.vy+=h*e.value*n/f),!0;if(!(e.length||f>=a)){(e.data!==t||e.next)&&(0===u&&(f+=(u=ll())*u),0===h&&(f+=(h=ll())*h),f<s&&(f=Math.sqrt(s*f)));do{e.data!==t&&(d=i[e.data.index]*n/f,t.vx+=u*d,t.vy+=h*d)}while(e=e.next)}}return l.initialize=function(t){e=t,c()},l.strength=function(e){return arguments.length?(r="function"==typeof e?e:ol(+e),c(),l):r},l.distanceMin=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.distanceMax=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.theta=function(e){return arguments.length?(o=e*e,l):Math.sqrt(o)},l}function El(e,t,n){var i,r,s,a=ol(.1);function o(e){for(var a=0,o=i.length;a<o;++a){var l=i[a],c=l.x-t||1e-6,u=l.y-n||1e-6,h=Math.sqrt(c*c+u*u),d=(s[a]-h)*r[a]*e/h;l.vx+=c*d,l.vy+=u*d}}function l(){if(i){var t,n=i.length;for(r=new Array(n),s=new Array(n),t=0;t<n;++t)s[t]=+e(i[t],t,i),r[t]=isNaN(s[t])?0:+a(i[t],t,i)}}return"function"!=typeof e&&(e=ol(+e)),null==t&&(t=0),null==n&&(n=0),o.initialize=function(e){i=e,l()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:ol(+e),l(),o):a},o.radius=function(t){return arguments.length?(e="function"==typeof t?t:ol(+t),l(),o):e},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(e){return arguments.length?(n=+e,o):n},o}function Cl(e){var t,n,i,r=ol(.1);function s(e){for(var r,s=0,a=t.length;s<a;++s)(r=t[s]).vx+=(i[s]-r.x)*n[s]*e}function a(){if(t){var s,a=t.length;for(n=new Array(a),i=new Array(a),s=0;s<a;++s)n[s]=isNaN(i[s]=+e(t[s],s,t))?0:+r(t[s],s,t)}}return"function"!=typeof e&&(e=ol(null==e?0:+e)),s.initialize=function(e){t=e,a()},s.strength=function(e){return arguments.length?(r="function"==typeof e?e:ol(+e),a(),s):r},s.x=function(t){return arguments.length?(e="function"==typeof t?t:ol(+t),a(),s):e},s}function Dl(e){var t,n,i,r=ol(.1);function s(e){for(var r,s=0,a=t.length;s<a;++s)(r=t[s]).vy+=(i[s]-r.y)*n[s]*e}function a(){if(t){var s,a=t.length;for(n=new Array(a),i=new Array(a),s=0;s<a;++s)n[s]=isNaN(i[s]=+e(t[s],s,t))?0:+r(t[s],s,t)}}return"function"!=typeof e&&(e=ol(null==e?0:+e)),s.initialize=function(e){t=e,a()},s.strength=function(e){return arguments.length?(r="function"==typeof e?e:ol(+e),a(),s):r},s.y=function(t){return arguments.length?(e="function"==typeof t?t:ol(+t),a(),s):e},s}var Ol=n(3430);function Pl(){return new Rl}function Rl(){this.reset()}Rl.prototype={constructor:Rl,reset:function(){this.s=this.t=0},add:function(e){Bl(zl,e,this.t),Bl(this,zl.s,this.s),this.s?this.t+=zl.t:this.s=zl.t},valueOf:function(){return this.s}};var zl=new Rl;function Bl(e,t,n){var i=e.s=t+n,r=i-t,s=i-r;e.t=t-s+(n-r)}var Yl=1e-6,Fl=1e-12,Nl=Math.PI,Il=Nl/2,Hl=Nl/4,jl=2*Nl,Ul=180/Nl,Wl=Nl/180,Gl=Math.abs,Vl=Math.atan,ql=Math.atan2,Xl=Math.cos,$l=Math.ceil,Jl=Math.exp,Kl=(Math.floor,Math.log),Zl=Math.pow,Ql=Math.sin,ec=Math.sign||function(e){return e>0?1:e<0?-1:0},tc=Math.sqrt,nc=Math.tan;function ic(e){return e>1?0:e<-1?Nl:Math.acos(e)}function rc(e){return e>1?Il:e<-1?-Il:Math.asin(e)}function sc(e){return(e=Ql(e/2))*e}function ac(){}function oc(e,t){e&&cc.hasOwnProperty(e.type)&&cc[e.type](e,t)}var lc={Feature:function(e,t){oc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)oc(n[i].geometry,t)}},cc={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){uc(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)uc(n[i],t,0)},Polygon:function(e,t){hc(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)hc(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)oc(n[i],t)}};function uc(e,t,n){var i,r=-1,s=e.length-n;for(t.lineStart();++r<s;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function hc(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)uc(e[n],t,1);t.polygonEnd()}function dc(e,t){e&&lc.hasOwnProperty(e.type)?lc[e.type](e,t):oc(e,t)}var fc,pc,mc,_c,gc,yc=Pl(),vc=Pl(),bc={point:ac,lineStart:ac,lineEnd:ac,polygonStart:function(){yc.reset(),bc.lineStart=xc,bc.lineEnd=Mc},polygonEnd:function(){var e=+yc;vc.add(e<0?jl+e:e),this.lineStart=this.lineEnd=this.point=ac},sphere:function(){vc.add(jl)}};function xc(){bc.point=wc}function Mc(){Sc(fc,pc)}function wc(e,t){bc.point=Sc,fc=e,pc=t,mc=e*=Wl,_c=Xl(t=(t*=Wl)/2+Hl),gc=Ql(t)}function Sc(e,t){var n=(e*=Wl)-mc,i=n>=0?1:-1,r=i*n,s=Xl(t=(t*=Wl)/2+Hl),a=Ql(t),o=gc*a,l=_c*s+o*Xl(r),c=o*i*Ql(r);yc.add(ql(c,l)),mc=e,_c=s,gc=a}function Lc(e){return vc.reset(),dc(e,bc),2*vc}function Tc(e){return[ql(e[1],e[0]),rc(e[2])]}function kc(e){var t=e[0],n=e[1],i=Xl(n);return[i*Xl(t),i*Ql(t),Ql(n)]}function Ac(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ec(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Cc(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Dc(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Oc(e){var t=tc(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pc,Rc,zc,Bc,Yc,Fc,Nc,Ic,Hc,jc,Uc,Wc,Gc,Vc,qc,Xc,$c,Jc,Kc,Zc,Qc,eu,tu,nu,iu,ru,su=Pl(),au={point:ou,lineStart:cu,lineEnd:uu,polygonStart:function(){au.point=hu,au.lineStart=du,au.lineEnd=fu,su.reset(),bc.polygonStart()},polygonEnd:function(){bc.polygonEnd(),au.point=ou,au.lineStart=cu,au.lineEnd=uu,yc<0?(Pc=-(zc=180),Rc=-(Bc=90)):su>Yl?Bc=90:su<-Yl&&(Rc=-90),jc[0]=Pc,jc[1]=zc},sphere:function(){Pc=-(zc=180),Rc=-(Bc=90)}};function ou(e,t){Hc.push(jc=[Pc=e,zc=e]),t<Rc&&(Rc=t),t>Bc&&(Bc=t)}function lu(e,t){var n=kc([e*Wl,t*Wl]);if(Ic){var i=Ec(Ic,n),r=Ec([i[1],-i[0],0],i);Oc(r),r=Tc(r);var s,a=e-Yc,o=a>0?1:-1,l=r[0]*Ul*o,c=Gl(a)>180;c^(o*Yc<l&&l<o*e)?(s=r[1]*Ul)>Bc&&(Bc=s):c^(o*Yc<(l=(l+360)%360-180)&&l<o*e)?(s=-r[1]*Ul)<Rc&&(Rc=s):(t<Rc&&(Rc=t),t>Bc&&(Bc=t)),c?e<Yc?pu(Pc,e)>pu(Pc,zc)&&(zc=e):pu(e,zc)>pu(Pc,zc)&&(Pc=e):zc>=Pc?(e<Pc&&(Pc=e),e>zc&&(zc=e)):e>Yc?pu(Pc,e)>pu(Pc,zc)&&(zc=e):pu(e,zc)>pu(Pc,zc)&&(Pc=e)}else Hc.push(jc=[Pc=e,zc=e]);t<Rc&&(Rc=t),t>Bc&&(Bc=t),Ic=n,Yc=e}function cu(){au.point=lu}function uu(){jc[0]=Pc,jc[1]=zc,au.point=ou,Ic=null}function hu(e,t){if(Ic){var n=e-Yc;su.add(Gl(n)>180?n+(n>0?360:-360):n)}else Fc=e,Nc=t;bc.point(e,t),lu(e,t)}function du(){bc.lineStart()}function fu(){hu(Fc,Nc),bc.lineEnd(),Gl(su)>Yl&&(Pc=-(zc=180)),jc[0]=Pc,jc[1]=zc,Ic=null}function pu(e,t){return(t-=e)<0?t+360:t}function mu(e,t){return e[0]-t[0]}function _u(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function gu(e){var t,n,i,r,s,a,o;if(Bc=zc=-(Pc=Rc=1/0),Hc=[],dc(e,au),n=Hc.length){for(Hc.sort(mu),t=1,s=[i=Hc[0]];t<n;++t)_u(i,(r=Hc[t])[0])||_u(i,r[1])?(pu(i[0],r[1])>pu(i[0],i[1])&&(i[1]=r[1]),pu(r[0],i[1])>pu(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(a=-1/0,t=0,i=s[n=s.length-1];t<=n;i=r,++t)r=s[t],(o=pu(i[1],r[0]))>a&&(a=o,Pc=r[0],zc=i[1])}return Hc=jc=null,Pc===1/0||Rc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pc,Rc],[zc,Bc]]}var yu={sphere:ac,point:vu,lineStart:xu,lineEnd:Su,polygonStart:function(){yu.lineStart=Lu,yu.lineEnd=Tu},polygonEnd:function(){yu.lineStart=xu,yu.lineEnd=Su}};function vu(e,t){e*=Wl;var n=Xl(t*=Wl);bu(n*Xl(e),n*Ql(e),Ql(t))}function bu(e,t,n){++Uc,Gc+=(e-Gc)/Uc,Vc+=(t-Vc)/Uc,qc+=(n-qc)/Uc}function xu(){yu.point=Mu}function Mu(e,t){e*=Wl;var n=Xl(t*=Wl);nu=n*Xl(e),iu=n*Ql(e),ru=Ql(t),yu.point=wu,bu(nu,iu,ru)}function wu(e,t){e*=Wl;var n=Xl(t*=Wl),i=n*Xl(e),r=n*Ql(e),s=Ql(t),a=ql(tc((a=iu*s-ru*r)*a+(a=ru*i-nu*s)*a+(a=nu*r-iu*i)*a),nu*i+iu*r+ru*s);Wc+=a,Xc+=a*(nu+(nu=i)),$c+=a*(iu+(iu=r)),Jc+=a*(ru+(ru=s)),bu(nu,iu,ru)}function Su(){yu.point=vu}function Lu(){yu.point=ku}function Tu(){Au(eu,tu),yu.point=vu}function ku(e,t){eu=e,tu=t,e*=Wl,t*=Wl,yu.point=Au;var n=Xl(t);nu=n*Xl(e),iu=n*Ql(e),ru=Ql(t),bu(nu,iu,ru)}function Au(e,t){e*=Wl;var n=Xl(t*=Wl),i=n*Xl(e),r=n*Ql(e),s=Ql(t),a=iu*s-ru*r,o=ru*i-nu*s,l=nu*r-iu*i,c=tc(a*a+o*o+l*l),u=rc(c),h=c&&-u/c;Kc+=h*a,Zc+=h*o,Qc+=h*l,Wc+=u,Xc+=u*(nu+(nu=i)),$c+=u*(iu+(iu=r)),Jc+=u*(ru+(ru=s)),bu(nu,iu,ru)}function Eu(e){Uc=Wc=Gc=Vc=qc=Xc=$c=Jc=Kc=Zc=Qc=0,dc(e,yu);var t=Kc,n=Zc,i=Qc,r=t*t+n*n+i*i;return r<Fl&&(t=Xc,n=$c,i=Jc,Wc<Yl&&(t=Gc,n=Vc,i=qc),(r=t*t+n*n+i*i)<Fl)?[NaN,NaN]:[ql(n,t)*Ul,rc(i/tc(r))*Ul]}function Cu(e){return function(){return e}}function Du(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function Ou(e,t){return[Gl(e)>Nl?e+Math.round(-e/jl)*jl:e,t]}function Pu(e,t,n){return(e%=jl)?t||n?Du(zu(e),Bu(t,n)):zu(e):t||n?Bu(t,n):Ou}function Ru(e){return function(t,n){return[(t+=e)>Nl?t-jl:t<-Nl?t+jl:t,n]}}function zu(e){var t=Ru(e);return t.invert=Ru(-e),t}function Bu(e,t){var n=Xl(e),i=Ql(e),r=Xl(t),s=Ql(t);function a(e,t){var a=Xl(t),o=Xl(e)*a,l=Ql(e)*a,c=Ql(t),u=c*n+o*i;return[ql(l*r-u*s,o*n-c*i),rc(u*r+l*s)]}return a.invert=function(e,t){var a=Xl(t),o=Xl(e)*a,l=Ql(e)*a,c=Ql(t),u=c*r-l*s;return[ql(l*r+c*s,o*n+u*i),rc(u*n-o*i)]},a}function Yu(e){function t(t){return(t=e(t[0]*Wl,t[1]*Wl))[0]*=Ul,t[1]*=Ul,t}return e=Pu(e[0]*Wl,e[1]*Wl,e.length>2?e[2]*Wl:0),t.invert=function(t){return(t=e.invert(t[0]*Wl,t[1]*Wl))[0]*=Ul,t[1]*=Ul,t},t}function Fu(e,t,n,i,r,s){if(n){var a=Xl(t),o=Ql(t),l=i*n;null==r?(r=t+i*jl,s=t-l/2):(r=Nu(a,r),s=Nu(a,s),(i>0?r<s:r>s)&&(r+=i*jl));for(var c,u=r;i>0?u>s:u<s;u-=l)c=Tc([a,-o*Xl(u),-o*Ql(u)]),e.point(c[0],c[1])}}function Nu(e,t){(t=kc(t))[0]-=e,Oc(t);var n=ic(-t[1]);return((-t[2]<0?-n:n)+jl-Yl)%jl}function Iu(){var e,t,n=Cu([0,0]),i=Cu(90),r=Cu(6),s={point:function(n,i){e.push(n=t(n,i)),n[0]*=Ul,n[1]*=Ul}};function a(){var a=n.apply(this,arguments),o=i.apply(this,arguments)*Wl,l=r.apply(this,arguments)*Wl;return e=[],t=Pu(-a[0]*Wl,-a[1]*Wl,0).invert,Fu(s,o,l,1),a={type:"Polygon",coordinates:[e]},e=t=null,a}return a.center=function(e){return arguments.length?(n="function"==typeof e?e:Cu([+e[0],+e[1]]),a):n},a.radius=function(e){return arguments.length?(i="function"==typeof e?e:Cu(+e),a):i},a.precision=function(e){return arguments.length?(r="function"==typeof e?e:Cu(+e),a):r},a}function Hu(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:ac,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ju(e,t){return Gl(e[0]-t[0])<Yl&&Gl(e[1]-t[1])<Yl}function Uu(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Wu(e,t,n,i,r){var s,a,o=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(ju(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),s=0;s<t;++s)r.point((i=e[s])[0],i[1]);return void r.lineEnd()}a[0]+=2*Yl}o.push(n=new Uu(i,e,null,!0)),l.push(n.o=new Uu(i,null,n,!1)),o.push(n=new Uu(a,e,null,!1)),l.push(n.o=new Uu(a,null,n,!0))}})),o.length){for(l.sort(t),Gu(o),Gu(l),s=0,a=l.length;s<a;++s)l[s].e=n=!n;for(var c,u,h=o[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(s=0,a=c.length;s<a;++s)r.point((u=c[s])[0],u[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(c=d.p.z,s=c.length-1;s>=0;--s)r.point((u=c[s])[0],u[1]);else i(d.x,d.p.x,-1,r);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}}function Gu(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}Ou.invert=Ou;var Vu=Pl();function qu(e){return Gl(e[0])<=Nl?e[0]:ec(e[0])*((Gl(e[0])+Nl)%jl-Nl)}function Xu(e,t){var n=qu(t),i=t[1],r=Ql(i),s=[Ql(n),-Xl(n),0],a=0,o=0;Vu.reset(),1===r?i=Il+Yl:-1===r&&(i=-Il-Yl);for(var l=0,c=e.length;l<c;++l)if(h=(u=e[l]).length)for(var u,h,d=u[h-1],f=qu(d),p=d[1]/2+Hl,m=Ql(p),_=Xl(p),g=0;g<h;++g,f=v,m=x,_=M,d=y){var y=u[g],v=qu(y),b=y[1]/2+Hl,x=Ql(b),M=Xl(b),w=v-f,S=w>=0?1:-1,L=S*w,T=L>Nl,k=m*x;if(Vu.add(ql(k*S*Ql(L),_*M+k*Xl(L))),a+=T?w+S*jl:w,T^f>=n^v>=n){var A=Ec(kc(d),kc(y));Oc(A);var E=Ec(s,A);Oc(E);var C=(T^w>=0?-1:1)*rc(E[2]);(i>C||i===C&&(A[0]||A[1]))&&(o+=T^w>=0?1:-1)}}return(a<-Yl||a<Yl&&Vu<-Yl)^1&o}function $u(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Ju=function(e){return 1===e.length&&(e=function(e){return function(t,n){return $u(e(t),n)}}(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}($u);Ju.right,Ju.left;var Ku=Array.prototype;function Zu(e){for(var t,n,i,r=e.length,s=-1,a=0;++s<r;)a+=e[s].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}function Qu(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s}function eh(e,t,n,i){return function(r){var s,a,o,l=t(r),c=Hu(),u=t(c),h=!1,d={point:f,lineStart:m,lineEnd:_,polygonStart:function(){d.point=g,d.lineStart=y,d.lineEnd=v,a=[],s=[]},polygonEnd:function(){d.point=f,d.lineStart=m,d.lineEnd=_,a=Zu(a);var e=Xu(s,i);a.length?(h||(r.polygonStart(),h=!0),Wu(a,nh,e,n,r)):e&&(h||(r.polygonStart(),h=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),a=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(t,n){e(t,n)&&r.point(t,n)}function p(e,t){l.point(e,t)}function m(){d.point=p,l.lineStart()}function _(){d.point=f,l.lineEnd()}function g(e,t){o.push([e,t]),u.point(e,t)}function y(){u.lineStart(),o=[]}function v(){g(o[0][0],o[0][1]),u.lineEnd();var e,t,n,i,l=u.clean(),d=c.result(),f=d.length;if(o.pop(),s.push(o),o=null,f)if(1&l){if((t=(n=d[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}}else f>1&&2&l&&d.push(d.pop().concat(d.shift())),a.push(d.filter(th))}return d}}function th(e){return e.length>1}function nh(e,t){return((e=e.x)[0]<0?e[1]-Il-Yl:Il-e[1])-((t=t.x)[0]<0?t[1]-Il-Yl:Il-t[1])}Ku.slice,Ku.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);const ih=eh((function(){return!0}),(function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,a){var o=s>0?Nl:-Nl,l=Gl(s-n);Gl(l-Nl)<Yl?(e.point(n,i=(i+a)/2>0?Il:-Il),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(o,i),e.point(s,i),t=0):r!==o&&l>=Nl&&(Gl(n-r)<Yl&&(n-=r*Yl),Gl(s-o)<Yl&&(s-=o*Yl),i=function(e,t,n,i){var r,s,a=Ql(e-n);return Gl(a)>Yl?Vl((Ql(t)*(s=Xl(i))*Ql(n)-Ql(i)*(r=Xl(t))*Ql(e))/(r*s*a)):(t+i)/2}(n,i,s,a),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(o,i),t=0),e.point(n=s,i=a),r=o},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}}),(function(e,t,n,i){var r;if(null==e)r=n*Il,i.point(-Nl,r),i.point(0,r),i.point(Nl,r),i.point(Nl,0),i.point(Nl,-r),i.point(0,-r),i.point(-Nl,-r),i.point(-Nl,0),i.point(-Nl,r);else if(Gl(e[0]-t[0])>Yl){var s=e[0]<t[0]?Nl:-Nl;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}),[-Nl,-Il]);function rh(e){var t=Xl(e),n=6*Wl,i=t>0,r=Gl(t)>Yl;function s(e,n){return Xl(e)*Xl(n)>t}function a(e,n,i){var r=[1,0,0],s=Ec(kc(e),kc(n)),a=Ac(s,s),o=s[0],l=a-o*o;if(!l)return!i&&e;var c=t*a/l,u=-t*o/l,h=Ec(r,s),d=Dc(r,c);Cc(d,Dc(s,u));var f=h,p=Ac(d,f),m=Ac(f,f),_=p*p-m*(Ac(d,d)-1);if(!(_<0)){var g=tc(_),y=Dc(f,(-p-g)/m);if(Cc(y,d),y=Tc(y),!i)return y;var v,b=e[0],x=n[0],M=e[1],w=n[1];x<b&&(v=b,b=x,x=v);var S=x-b,L=Gl(S-Nl)<Yl;if(!L&&w<M&&(v=M,M=w,w=v),L||S<Yl?L?M+w>0^y[1]<(Gl(y[0]-b)<Yl?M:w):M<=y[1]&&y[1]<=w:S>Nl^(b<=y[0]&&y[0]<=x)){var T=Dc(f,(-p+g)/m);return Cc(T,d),[y,Tc(T)]}}}function o(t,n){var r=i?e:Nl-e,s=0;return t<-r?s|=1:t>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return eh(s,(function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var f,p=[h,d],m=s(h,d),_=i?m?0:o(h,d):m?o(h+(h<0?Nl:-Nl),d):0;if(!t&&(c=l=m)&&e.lineStart(),m!==l&&(!(f=a(t,p))||ju(t,f)||ju(p,f))&&(p[2]=1),m!==l)u=0,m?(e.lineStart(),f=a(p,t),e.point(f[0],f[1])):(f=a(t,p),e.point(f[0],f[1],2),e.lineEnd()),t=f;else if(r&&t&&i^m){var g;_&n||!(g=a(p,t,!0))||(u=0,i?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1],3)))}!m||t&&ju(t,p)||e.point(p[0],p[1]),t=p,l=m,n=_},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}}),(function(t,i,r,s){Fu(s,e,n,r,t,i)}),i?[0,-e]:[-Nl,e-Nl])}var sh=1e9,ah=-sh;function oh(e,t,n,i){function r(r,s){return e<=r&&r<=n&&t<=s&&s<=i}function s(r,s,o,c){var u=0,h=0;if(null==r||(u=a(r,o))!==(h=a(s,o))||l(r,s)<0^o>0)do{c.point(0===u||3===u?e:n,u>1?i:t)}while((u=(u+o+4)%4)!==h);else c.point(s[0],s[1])}function a(i,r){return Gl(i[0]-e)<Yl?r>0?0:3:Gl(i[0]-n)<Yl?r>0?2:1:Gl(i[1]-t)<Yl?r>0?1:0:r>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,u,h,d,f,p,m,_,g,y,v=a,b=Hu(),x={point:M,lineStart:function(){x.point=w,c&&c.push(u=[]),g=!0,_=!1,p=m=NaN},lineEnd:function(){l&&(w(h,d),f&&_&&b.rejoin(),l.push(b.result())),x.point=M,_&&v.lineEnd()},polygonStart:function(){v=b,l=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var s,a,o=c[n],l=1,u=o.length,h=o[0],d=h[0],f=h[1];l<u;++l)s=d,a=f,d=(h=o[l])[0],f=h[1],a<=i?f>i&&(d-s)*(i-a)>(f-a)*(e-s)&&++t:f<=i&&(d-s)*(i-a)<(f-a)*(e-s)&&--t;return t}(),n=y&&t,r=(l=Zu(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),r&&Wu(l,o,t,s,a),a.polygonEnd()),v=a,l=c=u=null}};function M(e,t){r(e,t)&&v.point(e,t)}function w(s,a){var o=r(s,a);if(c&&u.push([s,a]),g)h=s,d=a,f=o,g=!1,o&&(v.lineStart(),v.point(s,a));else if(o&&_)v.point(s,a);else{var l=[p=Math.max(ah,Math.min(sh,p)),m=Math.max(ah,Math.min(sh,m))],b=[s=Math.max(ah,Math.min(sh,s)),a=Math.max(ah,Math.min(sh,a))];!function(e,t,n,i,r,s){var a,o=e[0],l=e[1],c=0,u=1,h=t[0]-o,d=t[1]-l;if(a=n-o,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=r-o,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}if(a=i-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=s-l,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}return c>0&&(e[0]=o+c*h,e[1]=l+c*d),u<1&&(t[0]=o+u*h,t[1]=l+u*d),!0}}}}}(l,b,e,t,n,i)?o&&(v.lineStart(),v.point(s,a),y=!1):(_||(v.lineStart(),v.point(l[0],l[1])),v.point(b[0],b[1]),o||v.lineEnd(),y=!1)}p=s,m=a,_=o}return x}}function lh(){var e,t,n,i=0,r=0,s=960,a=500;return n={stream:function(n){return e&&t===n?e:e=oh(i,r,s,a)(t=n)},extent:function(o){return arguments.length?(i=+o[0][0],r=+o[0][1],s=+o[1][0],a=+o[1][1],e=t=null,n):[[i,r],[s,a]]}}}var ch,uh,hh,dh=Pl(),fh={sphere:ac,point:ac,lineStart:function(){fh.point=mh,fh.lineEnd=ph},lineEnd:ac,polygonStart:ac,polygonEnd:ac};function ph(){fh.point=fh.lineEnd=ac}function mh(e,t){ch=e*=Wl,uh=Ql(t*=Wl),hh=Xl(t),fh.point=_h}function _h(e,t){e*=Wl;var n=Ql(t*=Wl),i=Xl(t),r=Gl(e-ch),s=Xl(r),a=i*Ql(r),o=hh*n-uh*i*s,l=uh*n+hh*i*s;dh.add(ql(tc(a*a+o*o),l)),ch=e,uh=n,hh=i}function gh(e){return dh.reset(),dc(e,fh),+dh}var yh=[null,null],vh={type:"LineString",coordinates:yh};function bh(e,t){return yh[0]=e,yh[1]=t,gh(vh)}var xh={Feature:function(e,t){return wh(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)if(wh(n[i].geometry,t))return!0;return!1}},Mh={Sphere:function(){return!0},Point:function(e,t){return Sh(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(Sh(n[i],t))return!0;return!1},LineString:function(e,t){return Lh(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(Lh(n[i],t))return!0;return!1},Polygon:function(e,t){return Th(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(Th(n[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)if(wh(n[i],t))return!0;return!1}};function wh(e,t){return!(!e||!Mh.hasOwnProperty(e.type))&&Mh[e.type](e,t)}function Sh(e,t){return 0===bh(e,t)}function Lh(e,t){for(var n,i,r,s=0,a=e.length;s<a;s++){if(0===(i=bh(e[s],t)))return!0;if(s>0&&(r=bh(e[s],e[s-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<Fl*r)return!0;n=i}return!1}function Th(e,t){return!!Xu(e.map(kh),Ah(t))}function kh(e){return(e=e.map(Ah)).pop(),e}function Ah(e){return[e[0]*Wl,e[1]*Wl]}function Eh(e,t){return(e&&xh.hasOwnProperty(e.type)?xh[e.type]:wh)(e,t)}function Ch(e,t,n){var i=Qu(e,t-Yl,n).concat(t);return function(e){return i.map((function(t){return[e,t]}))}}function Dh(e,t,n){var i=Qu(e,t-Yl,n).concat(t);return function(e){return i.map((function(t){return[t,e]}))}}function Oh(){var e,t,n,i,r,s,a,o,l,c,u,h,d=10,f=d,p=90,m=360,_=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return Qu($l(i/p)*p,n,p).map(u).concat(Qu($l(o/m)*m,a,m).map(h)).concat(Qu($l(t/d)*d,e,d).filter((function(e){return Gl(e%p)>Yl})).map(l)).concat(Qu($l(s/f)*f,r,f).filter((function(e){return Gl(e%m)>Yl})).map(c))}return g.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},g.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(h(a).slice(1),u(n).reverse().slice(1),h(o).reverse().slice(1))]}},g.extent=function(e){return arguments.length?g.extentMajor(e).extentMinor(e):g.extentMinor()},g.extentMajor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],o=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),o>a&&(e=o,o=a,a=e),g.precision(_)):[[i,o],[n,a]]},g.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],s=+n[0][1],r=+n[1][1],t>e&&(n=t,t=e,e=n),s>r&&(n=s,s=r,r=n),g.precision(_)):[[t,s],[e,r]]},g.step=function(e){return arguments.length?g.stepMajor(e).stepMinor(e):g.stepMinor()},g.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],g):[p,m]},g.stepMinor=function(e){return arguments.length?(d=+e[0],f=+e[1],g):[d,f]},g.precision=function(d){return arguments.length?(_=+d,l=Ch(s,r,90),c=Dh(t,e,_),u=Ch(o,a,90),h=Dh(i,n,_),g):_},g.extentMajor([[-180,-90+Yl],[180,90-Yl]]).extentMinor([[-180,-80-Yl],[180,80+Yl]])}function Ph(){return Oh()()}function Rh(e,t){var n=e[0]*Wl,i=e[1]*Wl,r=t[0]*Wl,s=t[1]*Wl,a=Xl(i),o=Ql(i),l=Xl(s),c=Ql(s),u=a*Xl(n),h=a*Ql(n),d=l*Xl(r),f=l*Ql(r),p=2*rc(tc(sc(s-i)+a*l*sc(r-n))),m=Ql(p),_=p?function(e){var t=Ql(e*=p)/m,n=Ql(p-e)/m,i=n*u+t*d,r=n*h+t*f,s=n*o+t*c;return[ql(r,i)*Ul,ql(s,tc(i*i+r*r))*Ul]}:function(){return[n*Ul,i*Ul]};return _.distance=p,_}function zh(e){return e}var Bh,Yh,Fh,Nh,Ih=Pl(),Hh=Pl(),jh={point:ac,lineStart:ac,lineEnd:ac,polygonStart:function(){jh.lineStart=Uh,jh.lineEnd=Vh},polygonEnd:function(){jh.lineStart=jh.lineEnd=jh.point=ac,Ih.add(Gl(Hh)),Hh.reset()},result:function(){var e=Ih/2;return Ih.reset(),e}};function Uh(){jh.point=Wh}function Wh(e,t){jh.point=Gh,Bh=Fh=e,Yh=Nh=t}function Gh(e,t){Hh.add(Nh*e-Fh*t),Fh=e,Nh=t}function Vh(){Gh(Bh,Yh)}const qh=jh;var Xh=1/0,$h=Xh,Jh=-Xh,Kh=Jh,Zh={point:function(e,t){e<Xh&&(Xh=e),e>Jh&&(Jh=e),t<$h&&($h=t),t>Kh&&(Kh=t)},lineStart:ac,lineEnd:ac,polygonStart:ac,polygonEnd:ac,result:function(){var e=[[Xh,$h],[Jh,Kh]];return Jh=Kh=-($h=Xh=1/0),e}};const Qh=Zh;var ed,td,nd,id,rd=0,sd=0,ad=0,od=0,ld=0,cd=0,ud=0,hd=0,dd=0,fd={point:pd,lineStart:md,lineEnd:yd,polygonStart:function(){fd.lineStart=vd,fd.lineEnd=bd},polygonEnd:function(){fd.point=pd,fd.lineStart=md,fd.lineEnd=yd},result:function(){var e=dd?[ud/dd,hd/dd]:cd?[od/cd,ld/cd]:ad?[rd/ad,sd/ad]:[NaN,NaN];return rd=sd=ad=od=ld=cd=ud=hd=dd=0,e}};function pd(e,t){rd+=e,sd+=t,++ad}function md(){fd.point=_d}function _d(e,t){fd.point=gd,pd(nd=e,id=t)}function gd(e,t){var n=e-nd,i=t-id,r=tc(n*n+i*i);od+=r*(nd+e)/2,ld+=r*(id+t)/2,cd+=r,pd(nd=e,id=t)}function yd(){fd.point=pd}function vd(){fd.point=xd}function bd(){Md(ed,td)}function xd(e,t){fd.point=Md,pd(ed=nd=e,td=id=t)}function Md(e,t){var n=e-nd,i=t-id,r=tc(n*n+i*i);od+=r*(nd+e)/2,ld+=r*(id+t)/2,cd+=r,ud+=(r=id*e-nd*t)*(nd+e),hd+=r*(id+t),dd+=3*r,pd(nd=e,id=t)}const wd=fd;function Sd(e){this._context=e}Sd.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,jl)}},result:ac};var Ld,Td,kd,Ad,Ed,Cd=Pl(),Dd={point:ac,lineStart:function(){Dd.point=Od},lineEnd:function(){Ld&&Pd(Td,kd),Dd.point=ac},polygonStart:function(){Ld=!0},polygonEnd:function(){Ld=null},result:function(){var e=+Cd;return Cd.reset(),e}};function Od(e,t){Dd.point=Pd,Td=Ad=e,kd=Ed=t}function Pd(e,t){Ad-=e,Ed-=t,Cd.add(tc(Ad*Ad+Ed*Ed)),Ad=e,Ed=t}const Rd=Dd;function zd(){this._string=[]}function Bd(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Yd(e,t){var n,i,r=4.5;function s(e){return e&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),dc(e,n(i))),i.result()}return s.area=function(e){return dc(e,n(qh)),qh.result()},s.measure=function(e){return dc(e,n(Rd)),Rd.result()},s.bounds=function(e){return dc(e,n(Qh)),Qh.result()},s.centroid=function(e){return dc(e,n(wd)),wd.result()},s.projection=function(t){return arguments.length?(n=null==t?(e=null,zh):(e=t).stream,s):e},s.context=function(e){return arguments.length?(i=null==e?(t=null,new zd):new Sd(t=e),"function"!=typeof r&&i.pointRadius(r),s):t},s.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(i.pointRadius(+e),+e),s):r},s.projection(e).context(t)}function Fd(e){return{stream:Nd(e)}}function Nd(e){return function(t){var n=new Id;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Id(){}function Hd(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),dc(n,e.stream(Qh)),t(Qh.result()),null!=i&&e.clipExtent(i),e}function jd(e,t,n){return Hd(e,(function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-s*(n[1][0]+n[0][0]))/2,o=+t[0][1]+(r-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([a,o])}),n)}function Ud(e,t,n){return jd(e,[[0,0],t],n)}function Wd(e,t,n){return Hd(e,(function(n){var i=+t,r=i/(n[1][0]-n[0][0]),s=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];e.scale(150*r).translate([s,a])}),n)}function Gd(e,t,n){return Hd(e,(function(n){var i=+t,r=i/(n[1][1]-n[0][1]),s=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;e.scale(150*r).translate([s,a])}),n)}zd.prototype={_radius:4.5,_circle:Bd(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Bd(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Id.prototype={constructor:Id,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Vd=16,qd=Xl(30*Wl);function Xd(e,t){return+t?function(e,t){function n(i,r,s,a,o,l,c,u,h,d,f,p,m,_){var g=c-i,y=u-r,v=g*g+y*y;if(v>4*t&&m--){var b=a+d,x=o+f,M=l+p,w=tc(b*b+x*x+M*M),S=rc(M/=w),L=Gl(Gl(M)-1)<Yl||Gl(s-h)<Yl?(s+h)/2:ql(x,b),T=e(L,S),k=T[0],A=T[1],E=k-i,C=A-r,D=y*E-g*C;(D*D/v>t||Gl((g*E+y*C)/v-.5)>.3||a*d+o*f+l*p<qd)&&(n(i,r,s,a,o,l,k,A,L,b/=w,x/=w,M,m,_),_.point(k,A),n(k,A,L,b,x,M,c,u,h,d,f,p,m,_))}}return function(t){var i,r,s,a,o,l,c,u,h,d,f,p,m={point:_,lineStart:g,lineEnd:v,polygonStart:function(){t.polygonStart(),m.lineStart=b},polygonEnd:function(){t.polygonEnd(),m.lineStart=g}};function _(n,i){n=e(n,i),t.point(n[0],n[1])}function g(){u=NaN,m.point=y,t.lineStart()}function y(i,r){var s=kc([i,r]),a=e(i,r);n(u,h,c,d,f,p,u=a[0],h=a[1],c=i,d=s[0],f=s[1],p=s[2],Vd,t),t.point(u,h)}function v(){m.point=_,t.lineEnd()}function b(){g(),m.point=x,m.lineEnd=M}function x(e,t){y(i=e,t),r=u,s=h,a=d,o=f,l=p,m.point=y}function M(){n(u,h,c,d,f,p,r,s,i,a,o,l,Vd,t),m.lineEnd=v,v()}return m}}(e,t):function(e){return Nd({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var $d=Nd({point:function(e,t){this.stream.point(e*Wl,t*Wl)}});function Jd(e,t,n,i,r){function s(s,a){return[t+e*(s*=i),n-e*(a*=r)]}return s.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*r]},s}function Kd(e,t,n,i,r,s){var a=Xl(s),o=Ql(s),l=a*e,c=o*e,u=a/e,h=o/e,d=(o*n-a*t)/e,f=(o*t+a*n)/e;function p(e,s){return[l*(e*=i)-c*(s*=r)+t,n-c*e-l*s]}return p.invert=function(e,t){return[i*(u*e-h*t+d),r*(f-h*e-u*t)]},p}function Zd(e){return Qd((function(){return e}))()}function Qd(e){var t,n,i,r,s,a,o,l,c,u,h=150,d=480,f=250,p=0,m=0,_=0,g=0,y=0,v=0,b=1,x=1,M=null,w=ih,S=null,L=zh,T=.5;function k(e){return l(e[0]*Wl,e[1]*Wl)}function A(e){return(e=l.invert(e[0],e[1]))&&[e[0]*Ul,e[1]*Ul]}function E(){var e=Kd(h,0,0,b,x,v).apply(null,t(p,m)),i=(v?Kd:Jd)(h,d-e[0],f-e[1],b,x,v);return n=Pu(_,g,y),o=Du(t,i),l=Du(n,o),a=Xd(o,T),C()}function C(){return c=u=null,k}return k.stream=function(e){return c&&u===e?c:c=$d(function(e){return Nd({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}(n)(w(a(L(u=e)))))},k.preclip=function(e){return arguments.length?(w=e,M=void 0,C()):w},k.postclip=function(e){return arguments.length?(L=e,S=i=r=s=null,C()):L},k.clipAngle=function(e){return arguments.length?(w=+e?rh(M=e*Wl):(M=null,ih),C()):M*Ul},k.clipExtent=function(e){return arguments.length?(L=null==e?(S=i=r=s=null,zh):oh(S=+e[0][0],i=+e[0][1],r=+e[1][0],s=+e[1][1]),C()):null==S?null:[[S,i],[r,s]]},k.scale=function(e){return arguments.length?(h=+e,E()):h},k.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],E()):[d,f]},k.center=function(e){return arguments.length?(p=e[0]%360*Wl,m=e[1]%360*Wl,E()):[p*Ul,m*Ul]},k.rotate=function(e){return arguments.length?(_=e[0]%360*Wl,g=e[1]%360*Wl,y=e.length>2?e[2]%360*Wl:0,E()):[_*Ul,g*Ul,y*Ul]},k.angle=function(e){return arguments.length?(v=e%360*Wl,E()):v*Ul},k.reflectX=function(e){return arguments.length?(b=e?-1:1,E()):b<0},k.reflectY=function(e){return arguments.length?(x=e?-1:1,E()):x<0},k.precision=function(e){return arguments.length?(a=Xd(o,T=e*e),C()):tc(T)},k.fitExtent=function(e,t){return jd(k,e,t)},k.fitSize=function(e,t){return Ud(k,e,t)},k.fitWidth=function(e,t){return Wd(k,e,t)},k.fitHeight=function(e,t){return Gd(k,e,t)},function(){return t=e.apply(this,arguments),k.invert=t.invert&&A,E()}}function ef(e){var t=0,n=Nl/3,i=Qd(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Wl,n=e[1]*Wl):[t*Ul,n*Ul]},r}function tf(e,t){var n=Ql(e),i=(n+Ql(t))/2;if(Gl(i)<Yl)return function(e){var t=Xl(e);function n(e,n){return[e*t,Ql(n)/t]}return n.invert=function(e,n){return[e/t,rc(n*t)]},n}(e);var r=1+n*(2*i-n),s=tc(r)/i;function a(e,t){var n=tc(r-2*i*Ql(t))/i;return[n*Ql(e*=i),s-n*Xl(e)]}return a.invert=function(e,t){var n=s-t,a=ql(e,Gl(n))*ec(n);return n*i<0&&(a-=Nl*ec(e)*ec(n)),[a/i,rc((r-(e*e+n*n)*i*i)/(2*i))]},a}function nf(){return ef(tf).scale(155.424).center([0,33.6442])}function rf(){return nf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function sf(){var e,t,n,i,r,s,a=rf(),o=nf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=nf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){s=[e,t]}};function u(e){var t=e[0],a=e[1];return s=null,n.point(t,a),s||(i.point(t,a),s)||(r.point(t,a),s)}function h(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?o:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(e)},u.stream=function(n){return e&&t===n?e:(i=[a.stream(t=n),o.stream(n),l.stream(n)],r=i.length,e={point:function(e,t){for(var n=-1;++n<r;)i[n].point(e,t)},sphere:function(){for(var e=-1;++e<r;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<r;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<r;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<r;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<r;)i[e].polygonEnd()}});var i,r},u.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),l.precision(e),h()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),l.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),s=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[s-.455*t,u-.238*t],[s+.455*t,u+.238*t]]).stream(c),i=o.translate([s-.307*t,u+.201*t]).clipExtent([[s-.425*t+Yl,u+.12*t+Yl],[s-.214*t-Yl,u+.234*t-Yl]]).stream(c),r=l.translate([s-.205*t,u+.212*t]).clipExtent([[s-.214*t+Yl,u+.166*t+Yl],[s-.115*t-Yl,u+.234*t-Yl]]).stream(c),h()},u.fitExtent=function(e,t){return jd(u,e,t)},u.fitSize=function(e,t){return Ud(u,e,t)},u.fitWidth=function(e,t){return Wd(u,e,t)},u.fitHeight=function(e,t){return Gd(u,e,t)},u.scale(1070)}function af(e){return function(t,n){var i=Xl(t),r=Xl(n),s=e(i*r);return[s*r*Ql(t),s*Ql(n)]}}function of(e){return function(t,n){var i=tc(t*t+n*n),r=e(i),s=Ql(r),a=Xl(r);return[ql(t*s,i*a),rc(i&&n*s/i)]}}var lf=af((function(e){return tc(2/(1+e))}));function cf(){return Zd(lf).scale(124.75).clipAngle(179.999)}lf.invert=of((function(e){return 2*rc(e/2)}));var uf=af((function(e){return(e=ic(e))&&e/Ql(e)}));function hf(){return Zd(uf).scale(79.4188).clipAngle(179.999)}function df(e,t){return[e,Kl(nc((Il+t)/2))]}function ff(){return pf(df).scale(961/jl)}function pf(e){var t,n,i,r=Zd(e),s=r.center,a=r.scale,o=r.translate,l=r.clipExtent,c=null;function u(){var s=Nl*a(),o=r(Yu(r.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:e===df?[[Math.max(o[0]-s,c),t],[Math.min(o[0]+s,n),i]]:[[c,Math.max(o[1]-s,t)],[n,Math.min(o[1]+s,i)]])}return r.scale=function(e){return arguments.length?(a(e),u()):a()},r.translate=function(e){return arguments.length?(o(e),u()):o()},r.center=function(e){return arguments.length?(s(e),u()):s()},r.clipExtent=function(e){return arguments.length?(null==e?c=t=n=i=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],i=+e[1][1]),u()):null==c?null:[[c,t],[n,i]]},u()}function mf(e){return nc((Il+e)/2)}function _f(e,t){var n=Xl(e),i=e===t?Ql(e):Kl(n/Xl(t))/Kl(mf(t)/mf(e)),r=n*Zl(mf(e),i)/i;if(!i)return df;function s(e,t){r>0?t<-Il+Yl&&(t=-Il+Yl):t>Il-Yl&&(t=Il-Yl);var n=r/Zl(mf(t),i);return[n*Ql(i*e),r-n*Xl(i*e)]}return s.invert=function(e,t){var n=r-t,s=ec(i)*tc(e*e+n*n),a=ql(e,Gl(n))*ec(n);return n*i<0&&(a-=Nl*ec(e)*ec(n)),[a/i,2*Vl(Zl(r/s,1/i))-Il]},s}function gf(){return ef(_f).scale(109.5).parallels([30,30])}function yf(e,t){return[e,t]}function vf(){return Zd(yf).scale(152.63)}function bf(e,t){var n=Xl(e),i=e===t?Ql(e):(n-Xl(t))/(t-e),r=n/i+e;if(Gl(i)<Yl)return yf;function s(e,t){var n=r-t,s=i*e;return[n*Ql(s),r-n*Xl(s)]}return s.invert=function(e,t){var n=r-t,s=ql(e,Gl(n))*ec(n);return n*i<0&&(s-=Nl*ec(e)*ec(n)),[s/i,r-ec(i)*tc(e*e+n*n)]},s}function xf(){return ef(bf).scale(131.154).center([0,13.9389])}uf.invert=of((function(e){return e})),df.invert=function(e,t){return[e,2*Vl(Jl(t))-Il]},yf.invert=yf;var Mf=1.340264,wf=-.081106,Sf=893e-6,Lf=.003796,Tf=tc(3)/2;function kf(e,t){var n=rc(Tf*Ql(t)),i=n*n,r=i*i*i;return[e*Xl(n)/(Tf*(Mf+3*wf*i+r*(7*Sf+9*Lf*i))),n*(Mf+wf*i+r*(Sf+Lf*i))]}function Af(){return Zd(kf).scale(177.158)}function Ef(e,t){var n=Xl(t),i=Xl(e)*n;return[n*Ql(e)/i,Ql(t)/i]}function Cf(){return Zd(Ef).scale(144.049).clipAngle(60)}function Df(){var e,t,n,i,r,s,a,o=1,l=0,c=0,u=1,h=1,d=0,f=null,p=1,m=1,_=Nd({point:function(e,t){var n=v([e,t]);this.stream.point(n[0],n[1])}}),g=zh;function y(){return p=o*u,m=o*h,s=a=null,v}function v(n){var i=n[0]*p,r=n[1]*m;if(d){var s=r*e-i*t;i=i*e+r*t,r=s}return[i+l,r+c]}return v.invert=function(n){var i=n[0]-l,r=n[1]-c;if(d){var s=r*e+i*t;i=i*e-r*t,r=s}return[i/p,r/m]},v.stream=function(e){return s&&a===e?s:s=_(g(a=e))},v.postclip=function(e){return arguments.length?(g=e,f=n=i=r=null,y()):g},v.clipExtent=function(e){return arguments.length?(g=null==e?(f=n=i=r=null,zh):oh(f=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),y()):null==f?null:[[f,n],[i,r]]},v.scale=function(e){return arguments.length?(o=+e,y()):o},v.translate=function(e){return arguments.length?(l=+e[0],c=+e[1],y()):[l,c]},v.angle=function(n){return arguments.length?(t=Ql(d=n%360*Wl),e=Xl(d),y()):d*Ul},v.reflectX=function(e){return arguments.length?(u=e?-1:1,y()):u<0},v.reflectY=function(e){return arguments.length?(h=e?-1:1,y()):h<0},v.fitExtent=function(e,t){return jd(v,e,t)},v.fitSize=function(e,t){return Ud(v,e,t)},v.fitWidth=function(e,t){return Wd(v,e,t)},v.fitHeight=function(e,t){return Gd(v,e,t)},v}function Of(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Pf(){return Zd(Of).scale(175.295)}function Rf(e,t){return[Xl(t)*Ql(e),Ql(t)]}function zf(){return Zd(Rf).scale(249.5).clipAngle(90+Yl)}function Bf(e,t){var n=Xl(t),i=1+Xl(e)*n;return[n*Ql(e)/i,Ql(t)/i]}function Yf(){return Zd(Bf).scale(250).clipAngle(142)}function Ff(e,t){return[Kl(nc((Il+t)/2)),-e]}function Nf(){var e=pf(Ff),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}function If(e,t){return e.parent===t.parent?1:2}function Hf(e,t){return e+t.x}function jf(e,t){return Math.max(e,t.y)}function Uf(){var e=If,t=1,n=1,i=!1;function r(r){var s,a=0;r.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Hf,0)/e.length}(n),t.y=function(e){return 1+e.reduce(jf,0)}(n)):(t.x=s?a+=e(t,s):0,t.y=0,s=t)}));var o=function(e){for(var t;t=e.children;)e=t[0];return e}(r),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(r),c=o.x-e(o,l)/2,u=l.x+e(l,o)/2;return r.eachAfter(i?function(e){e.x=(e.x-r.x)*t,e.y=(r.y-e.y)*n}:function(e){e.x=(e.x-c)/(u-c)*t,e.y=(1-(r.y?e.y/r.y:1))*n})}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],r):i?null:[t,n]},r.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],r):i?[t,n]:null},r}function Wf(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function Gf(e,t){var n,i,r,s,a,o=new $f(e),l=+e.value&&(o.value=e.value),c=[o];for(null==t&&(t=Vf);n=c.pop();)if(l&&(n.value=+n.data.value),(r=t(n.data))&&(a=r.length))for(n.children=new Array(a),s=a-1;s>=0;--s)c.push(i=n.children[s]=new $f(r[s])),i.parent=n,i.depth=n.depth+1;return o.eachBefore(Xf)}function Vf(e){return e.children}function qf(e){e.data=e.data.data}function Xf(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function $f(e){this.data=e,this.depth=this.height=0,this.parent=null}kf.invert=function(e,t){for(var n,i=t,r=i*i,s=r*r*r,a=0;a<12&&(s=(r=(i-=n=(i*(Mf+wf*r+s*(Sf+Lf*r))-t)/(Mf+3*wf*r+s*(7*Sf+9*Lf*r)))*i)*r*r,!(Gl(n)<Fl));++a);return[Tf*e*(Mf+3*wf*r+s*(7*Sf+9*Lf*r))/Xl(i),rc(Ql(i)/Tf)]},Ef.invert=of(Vl),Of.invert=function(e,t){var n,i=t,r=25;do{var s=i*i,a=s*s;i-=n=(i*(1.007226+s*(.015085+a*(.028874*s-.044475-.005916*a)))-t)/(1.007226+s*(.045255+a*(.259866*s-.311325-.005916*11*a)))}while(Gl(n)>Yl&&--r>0);return[e/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},Rf.invert=of(rc),Bf.invert=of((function(e){return 2*Vl(e)})),Ff.invert=function(e,t){return[-t,2*Vl(Jl(e))-Il]},$f.prototype=Gf.prototype={constructor:$f,count:function(){return this.eachAfter(Wf)},each:function(e){var t,n,i,r,s=this,a=[s];do{for(t=a.reverse(),a=[];s=t.pop();)if(e(s),n=s.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length);return this},eachAfter:function(e){for(var t,n,i,r=this,s=[r],a=[];r=s.pop();)if(a.push(r),t=r.children)for(n=0,i=t.length;n<i;++n)s.push(t[n]);for(;r=a.pop();)e(r);return this},eachBefore:function(e){for(var t,n,i=this,r=[i];i=r.pop();)if(e(i),t=i.children)for(n=t.length-1;n>=0;--n)r.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Gf(this).eachBefore(qf)}};var Jf=Array.prototype.slice;function Kf(e){for(var t,n,i=0,r=(e=function(e){for(var t,n,i=e.length;i;)n=Math.random()*i--|0,t=e[i],e[i]=e[n],e[n]=t;return e}(Jf.call(e))).length,s=[];i<r;)t=e[i],n&&ep(n,t)?++i:(n=np(s=Zf(s,t)),i=0);return n}function Zf(e,t){var n,i;if(tp(t,e))return[t];for(n=0;n<e.length;++n)if(Qf(t,e[n])&&tp(ip(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Qf(ip(e[n],e[i]),t)&&Qf(ip(e[n],t),e[i])&&Qf(ip(e[i],t),e[n])&&tp(rp(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Qf(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function ep(e,t){var n=e.r-t.r+1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function tp(e,t){for(var n=0;n<t.length;++n)if(!ep(e,t[n]))return!1;return!0}function np(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return ip(e[0],e[1]);case 3:return rp(e[0],e[1],e[2])}}function ip(e,t){var n=e.x,i=e.y,r=e.r,s=t.x,a=t.y,o=t.r,l=s-n,c=a-i,u=o-r,h=Math.sqrt(l*l+c*c);return{x:(n+s+l/h*u)/2,y:(i+a+c/h*u)/2,r:(h+r+o)/2}}function rp(e,t,n){var i=e.x,r=e.y,s=e.r,a=t.x,o=t.y,l=t.r,c=n.x,u=n.y,h=n.r,d=i-a,f=i-c,p=r-o,m=r-u,_=l-s,g=h-s,y=i*i+r*r-s*s,v=y-a*a-o*o+l*l,b=y-c*c-u*u+h*h,x=f*p-d*m,M=(p*b-m*v)/(2*x)-i,w=(m*_-p*g)/x,S=(f*v-d*b)/(2*x)-r,L=(d*g-f*_)/x,T=w*w+L*L-1,k=2*(s+M*w+S*L),A=M*M+S*S-s*s,E=-(T?(k+Math.sqrt(k*k-4*T*A))/(2*T):A/k);return{x:i+M+w*E,y:r+S+L*E,r:E}}function sp(e,t,n){var i,r,s,a,o=e.x-t.x,l=e.y-t.y,c=o*o+l*l;c?(r=t.r+n.r,r*=r,a=e.r+n.r,r>(a*=a)?(i=(c+a-r)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),n.x=e.x-i*o-s*l,n.y=e.y-i*l+s*o):(i=(c+r-a)/(2*c),s=Math.sqrt(Math.max(0,r/c-i*i)),n.x=t.x+i*o-s*l,n.y=t.y+i*l+s*o)):(n.x=t.x+n.r,n.y=t.y)}function ap(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function op(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,s=(t.y*n.r+n.y*t.r)/i;return r*r+s*s}function lp(e){this._=e,this.next=null,this.previous=null}function cp(e){if(!(r=e.length))return 0;var t,n,i,r,s,a,o,l,c,u,h;if((t=e[0]).x=0,t.y=0,!(r>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(r>2))return t.r+n.r;sp(n,t,i=e[2]),t=new lp(t),n=new lp(n),i=new lp(i),t.next=i.previous=n,n.next=t.previous=i,i.next=n.previous=t;e:for(o=3;o<r;++o){sp(t._,n._,i=e[o]),i=new lp(i),l=n.next,c=t.previous,u=n._.r,h=t._.r;do{if(u<=h){if(ap(l._,i._)){n=l,t.next=n,n.previous=t,--o;continue e}u+=l._.r,l=l.next}else{if(ap(c._,i._)){(t=c).next=n,n.previous=t,--o;continue e}h+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=t,i.next=n,t.next=n.previous=n=i,s=op(t);(i=i.next)!==n;)(a=op(i))<s&&(t=i,s=a);n=t.next}for(t=[n._],i=n;(i=i.next)!==n;)t.push(i._);for(i=Kf(t),o=0;o<r;++o)(t=e[o]).x-=i.x,t.y-=i.y;return i.r}function up(e){return cp(e),e}function hp(e){if("function"!=typeof e)throw new Error;return e}function dp(){return 0}function fp(e){return function(){return e}}function pp(e){return Math.sqrt(e.value)}function mp(){var e=null,t=1,n=1,i=dp;function r(r){return r.x=t/2,r.y=n/2,e?r.eachBefore(_p(e)).eachAfter(gp(i,.5)).eachBefore(yp(1)):r.eachBefore(_p(pp)).eachAfter(gp(dp,1)).eachAfter(gp(i,r.r/Math.min(t,n))).eachBefore(yp(Math.min(t,n)/(2*r.r))),r}return r.radius=function(t){return arguments.length?(e=function(e){return null==e?null:hp(e)}(t),r):e},r.size=function(e){return arguments.length?(t=+e[0],n=+e[1],r):[t,n]},r.padding=function(e){return arguments.length?(i="function"==typeof e?e:fp(+e),r):i},r}function _p(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function gp(e,t){return function(n){if(i=n.children){var i,r,s,a=i.length,o=e(n)*t||0;if(o)for(r=0;r<a;++r)i[r].r+=o;if(s=cp(i),o)for(r=0;r<a;++r)i[r].r-=o;n.r=s+o}}}function yp(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vp(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function bp(e,t,n,i,r){for(var s,a=e.children,o=-1,l=a.length,c=e.value&&(i-t)/e.value;++o<l;)(s=a[o]).y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*c}function xp(){var e=1,t=1,n=0,i=!1;function r(r){var s=r.height+1;return r.x0=r.y0=n,r.x1=e,r.y1=t/s,r.eachBefore(function(e,t){return function(i){i.children&&bp(i,i.x0,e*(i.depth+1)/t,i.x1,e*(i.depth+2)/t);var r=i.x0,s=i.y0,a=i.x1-n,o=i.y1-n;a<r&&(r=a=(r+a)/2),o<s&&(s=o=(s+o)/2),i.x0=r,i.y0=s,i.x1=a,i.y1=o}}(t,s)),i&&r.eachBefore(vp),r}return r.round=function(e){return arguments.length?(i=!!e,r):i},r.size=function(n){return arguments.length?(e=+n[0],t=+n[1],r):[e,t]},r.padding=function(e){return arguments.length?(n=+e,r):n},r}var Mp="$",wp={depth:-1},Sp={};function Lp(e){return e.id}function Tp(e){return e.parentId}function kp(){var e=Lp,t=Tp;function n(n){var i,r,s,a,o,l,c,u=n.length,h=new Array(u),d={};for(r=0;r<u;++r)i=n[r],o=h[r]=new $f(i),null!=(l=e(i,r,n))&&(l+="")&&(d[c=Mp+(o.id=l)]=c in d?Sp:o);for(r=0;r<u;++r)if(o=h[r],null!=(l=t(n[r],r,n))&&(l+="")){if(!(a=d[Mp+l]))throw new Error("missing: "+l);if(a===Sp)throw new Error("ambiguous: "+l);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(s)throw new Error("multiple roots");s=o}if(!s)throw new Error("no root");if(s.parent=wp,s.eachBefore((function(e){e.depth=e.parent.depth+1,--u})).eachBefore(Xf),s.parent=null,u>0)throw new Error("cycle");return s}return n.id=function(t){return arguments.length?(e=hp(t),n):e},n.parentId=function(e){return arguments.length?(t=hp(e),n):t},n}function Ap(e,t){return e.parent===t.parent?1:2}function Ep(e){var t=e.children;return t?t[0]:e.t}function Cp(e){var t=e.children;return t?t[t.length-1]:e.t}function Dp(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Op(e,t,n){return e.a.parent===t.parent?e.a:n}function Pp(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Rp(){var e=Ap,t=1,n=1,i=null;function r(r){var l=function(e){for(var t,n,i,r,s,a=new Pp(e,0),o=[a];t=o.pop();)if(i=t._.children)for(t.children=new Array(s=i.length),r=s-1;r>=0;--r)o.push(n=t.children[r]=new Pp(i[r],r)),n.parent=t;return(a.parent=new Pp(null,0)).children=[a],a}(r);if(l.eachAfter(s),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(o);else{var c=r,u=r,h=r;r.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>h.depth&&(h=e)}));var d=c===u?1:e(c,u)/2,f=d-c.x,p=t/(u.x+d+f),m=n/(h.depth||1);r.eachBefore((function(e){e.x=(e.x+f)*p,e.y=e.depth*m}))}return r}function s(t){var n=t.children,i=t.parent.children,r=t.i?i[t.i-1]:null;if(n){!function(e){for(var t,n=0,i=0,r=e.children,s=r.length;--s>=0;)(t=r[s]).z+=n,t.m+=n,n+=t.s+(i+=t.c)}(t);var s=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+e(t._,r._),t.m=t.z-s):t.z=s}else r&&(t.z=r.z+e(t._,r._));t.parent.A=function(t,n,i){if(n){for(var r,s=t,a=t,o=n,l=s.parent.children[0],c=s.m,u=a.m,h=o.m,d=l.m;o=Cp(o),s=Ep(s),o&&s;)l=Ep(l),(a=Cp(a)).a=t,(r=o.z+h-s.z-c+e(o._,s._))>0&&(Dp(Op(o,t,i),t,r),c+=r,u+=r),h+=o.m,c+=s.m,d+=l.m,u+=a.m;o&&!Cp(a)&&(a.t=o,a.m+=h-u),s&&!Ep(l)&&(l.t=s,l.m+=c-d,i=t)}return i}(t,r,t.parent.A||i[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function o(e){e.x*=t,e.y=e.depth*n}return r.separation=function(t){return arguments.length?(e=t,r):e},r.size=function(e){return arguments.length?(i=!1,t=+e[0],n=+e[1],r):i?null:[t,n]},r.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],n=+e[1],r):i?[t,n]:null},r}function zp(e,t,n,i,r){for(var s,a=e.children,o=-1,l=a.length,c=e.value&&(r-n)/e.value;++o<l;)(s=a[o]).x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*c}Pp.prototype=Object.create($f.prototype);var Bp=(1+Math.sqrt(5))/2;function Yp(e,t,n,i,r,s){for(var a,o,l,c,u,h,d,f,p,m,_,g=[],y=t.children,v=0,b=0,x=y.length,M=t.value;v<x;){l=r-n,c=s-i;do{u=y[b++].value}while(!u&&b<x);for(h=d=u,_=u*u*(m=Math.max(c/l,l/c)/(M*e)),p=Math.max(d/_,_/h);b<x;++b){if(u+=o=y[b].value,o<h&&(h=o),o>d&&(d=o),_=u*u*m,(f=Math.max(d/_,_/h))>p){u-=o;break}p=f}g.push(a={value:u,dice:l<c,children:y.slice(v,b)}),a.dice?bp(a,n,i,r,M?i+=c*u/M:s):zp(a,n,i,M?n+=l*u/M:r,s),M-=u,v=b}return g}const Fp=function e(t){function n(e,n,i,r,s){Yp(t,e,n,i,r,s)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Bp);function Np(){var e=Fp,t=!1,n=1,i=1,r=[0],s=dp,a=dp,o=dp,l=dp,c=dp;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=i,e.eachBefore(h),r=[0],t&&e.eachBefore(vp),e}function h(t){var n=r[t.depth],i=t.x0+n,u=t.y0+n,h=t.x1-n,d=t.y1-n;h<i&&(i=h=(i+h)/2),d<u&&(u=d=(u+d)/2),t.x0=i,t.y0=u,t.x1=h,t.y1=d,t.children&&(n=r[t.depth+1]=s(t)/2,i+=c(t)-n,u+=a(t)-n,(h-=o(t)-n)<i&&(i=h=(i+h)/2),(d-=l(t)-n)<u&&(u=d=(u+d)/2),e(t,i,u,h,d))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],i=+e[1],u):[n,i]},u.tile=function(t){return arguments.length?(e=hp(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:fp(+e),u):s},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:fp(+e),u):a},u.paddingRight=function(e){return arguments.length?(o="function"==typeof e?e:fp(+e),u):o},u.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:fp(+e),u):l},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:fp(+e),u):c},u}function Ip(e,t,n,i,r){var s,a,o=e.children,l=o.length,c=new Array(l+1);for(c[0]=a=s=0;s<l;++s)c[s+1]=a+=o[s].value;!function e(t,n,i,r,s,a,l){if(t>=n-1){var u=o[t];return u.x0=r,u.y0=s,u.x1=a,void(u.y1=l)}for(var h=c[t],d=i/2+h,f=t+1,p=n-1;f<p;){var m=f+p>>>1;c[m]<d?f=m+1:p=m}d-c[f-1]<c[f]-d&&t+1<f&&--f;var _=c[f]-h,g=i-_;if(a-r>l-s){var y=(r*g+a*_)/i;e(t,f,_,r,s,y,l),e(f,n,g,y,s,a,l)}else{var v=(s*g+l*_)/i;e(t,f,_,r,s,a,v),e(f,n,g,r,v,a,l)}}(0,l,e.value,t,n,i,r)}function Hp(e,t,n,i,r){(1&e.depth?zp:bp)(e,t,n,i,r)}const jp=function e(t){function n(e,n,i,r,s){if((a=e._squarify)&&a.ratio===t)for(var a,o,l,c,u,h=-1,d=a.length,f=e.value;++h<d;){for(l=(o=a[h]).children,c=o.value=0,u=l.length;c<u;++c)o.value+=l[c].value;o.dice?bp(o,n,i,r,i+=(s-i)*o.value/f):zp(o,n,i,n+=(r-n)*o.value/f,s),f-=o.value}else e._squarify=a=Yp(t,e,n,i,r,s),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Bp);function Up(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Wp(e,t){var n=st(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function Gp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Vp=Math.SQRT2,qp=2,Xp=4,$p=1e-12;function Jp(e){return((e=Math.exp(e))+1/e)/2}function Kp(e,t){var n,i,r=e[0],s=e[1],a=e[2],o=t[0],l=t[1],c=t[2],u=o-r,h=l-s,d=u*u+h*h;if(d<$p)i=Math.log(c/a)/Vp,n=function(e){return[r+e*u,s+e*h,a*Math.exp(Vp*e*i)]};else{var f=Math.sqrt(d),p=(c*c-a*a+Xp*d)/(2*a*qp*f),m=(c*c-a*a-Xp*d)/(2*c*qp*f),_=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(m*m+1)-m);i=(g-_)/Vp,n=function(e){var t,n=e*i,o=Jp(_),l=a/(qp*f)*(o*(t=Vp*n+_,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(_));return[r+l*u,s+l*h,a*o/Jp(Vp*n+_)]}}return n.duration=1e3*i,n}function Zp(e){return function(t,n){var i=e((t=Ke(t)).h,(n=Ke(n)).h),r=at(t.s,n.s),s=at(t.l,n.l),a=at(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=s(e),t.opacity=a(e),t+""}}}const Qp=Zp(st);var em=Zp(at),tm=Math.PI/180,nm=180/Math.PI,im=.96422,rm=1,sm=.82521,am=4/29,om=6/29,lm=3*om*om,cm=.008856451679035631;function um(e){if(e instanceof dm)return new dm(e.l,e.a,e.b,e.opacity);if(e instanceof ym)return vm(e);e instanceof Ge||(e=Ue(e));var t,n,i=_m(e.r),r=_m(e.g),s=_m(e.b),a=fm((.2225045*i+.7168786*r+.0606169*s)/rm);return i===r&&r===s?t=n=a:(t=fm((.4360747*i+.3850649*r+.1430804*s)/im),n=fm((.0139322*i+.0971045*r+.7141733*s)/sm)),new dm(116*a-16,500*(t-a),200*(a-n),e.opacity)}function hm(e,t,n,i){return 1===arguments.length?um(e):new dm(e,t,n,null==i?1:i)}function dm(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function fm(e){return e>cm?Math.pow(e,1/3):e/lm+am}function pm(e){return e>om?e*e*e:lm*(e-am)}function mm(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _m(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function gm(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof ym)return new ym(e.h,e.c,e.l,e.opacity);if(e instanceof dm||(e=um(e)),0===e.a&&0===e.b)return new ym(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nm;return new ym(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new ym(e,t,n,null==i?1:i)}function ym(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function vm(e){if(isNaN(e.h))return new dm(e.l,0,0,e.opacity);var t=e.h*tm;return new dm(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function bm(e,t){var n=at((e=hm(e)).l,(t=hm(t)).l),i=at(e.a,t.a),r=at(e.b,t.b),s=at(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=s(t),e+""}}function xm(e){return function(t,n){var i=e((t=gm(t)).h,(n=gm(n)).h),r=at(t.c,n.c),s=at(t.l,n.l),a=at(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=r(e),t.l=s(e),t.opacity=a(e),t+""}}}Me(dm,hm,we(Se,{brighter:function(e){return new dm(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new dm(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Ge(mm(3.1338561*(t=im*pm(t))-1.6168667*(e=rm*pm(e))-.4906146*(n=sm*pm(n))),mm(-.9787684*t+1.9161415*e+.033454*n),mm(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Me(ym,gm,we(Se,{brighter:function(e){return new ym(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new ym(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return vm(this).rgb()}}));const Mm=xm(st);var wm=xm(at),Sm=-.14861,Lm=1.78277,Tm=-.29227,km=-.90649,Am=1.97294,Em=Am*km,Cm=Am*Lm,Dm=Lm*Tm-km*Sm;function Om(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof Pm)return new Pm(e.h,e.s,e.l,e.opacity);e instanceof Ge||(e=Ue(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(Dm*i+Em*t-Cm*n)/(Dm+Em-Cm),s=i-r,a=(Am*(n-r)-Tm*s)/km,o=Math.sqrt(a*a+s*s)/(Am*r*(1-r)),l=o?Math.atan2(a,s)*nm-120:NaN;return new Pm(l<0?l+360:l,o,r,e.opacity)}(e):new Pm(e,t,n,null==i?1:i)}function Pm(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Rm(e){return function t(n){function i(t,i){var r=e((t=Om(t)).h,(i=Om(i)).h),s=at(t.s,i.s),a=at(t.l,i.l),o=at(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=s(e),t.l=a(Math.pow(e,n)),t.opacity=o(e),t+""}}return n=+n,i.gamma=t,i}(1)}Me(Pm,Om,we(Se,{brighter:function(e){return e=null==e?Te:Math.pow(Te,e),new Pm(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Le:Math.pow(Le,e),new Pm(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*tm,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Ge(255*(t+n*(Sm*i+Lm*r)),255*(t+n*(Tm*i+km*r)),255*(t+n*(Am*i)),this.opacity)}}));const zm=Rm(st);var Bm=Rm(at);function Ym(e,t){for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return s[t](e-t)}}function Fm(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}function Nm(e){for(var t,n=-1,i=e.length,r=e[i-1],s=0;++n<i;)t=r,r=e[n],s+=t[1]*r[0]-t[0]*r[1];return s/2}function Im(e){for(var t,n,i=-1,r=e.length,s=0,a=0,o=e[r-1],l=0;++i<r;)t=o,o=e[i],l+=n=t[0]*o[1]-o[0]*t[1],s+=(t[0]+o[0])*n,a+=(t[1]+o[1])*n;return[s/(l*=3),a/l]}function Hm(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function jm(e,t){return e[0]-t[0]||e[1]-t[1]}function Um(e){for(var t=e.length,n=[0,1],i=2,r=2;r<t;++r){for(;i>1&&Hm(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Wm(e){if((n=e.length)<3)return null;var t,n,i=new Array(n),r=new Array(n);for(t=0;t<n;++t)i[t]=[+e[t][0],+e[t][1],t];for(i.sort(jm),t=0;t<n;++t)r[t]=[i[t][0],-i[t][1]];var s=Um(i),a=Um(r),o=a[0]===s[0],l=a[a.length-1]===s[s.length-1],c=[];for(t=s.length-1;t>=0;--t)c.push(e[i[s[t]][2]]);for(t=+o;t<a.length-l;++t)c.push(e[i[a[t]][2]]);return c}function Gm(e,t){for(var n,i,r=e.length,s=e[r-1],a=t[0],o=t[1],l=s[0],c=s[1],u=!1,h=0;h<r;++h)n=(s=e[h])[0],(i=s[1])>o!=c>o&&a<(l-n)*(o-i)/(c-i)+n&&(u=!u),l=n,c=i;return u}function Vm(e){for(var t,n,i=-1,r=e.length,s=e[r-1],a=s[0],o=s[1],l=0;++i<r;)t=a,n=o,t-=a=(s=e[i])[0],n-=o=s[1],l+=Math.sqrt(t*t+n*n);return l}function qm(){return Math.random()}const Xm=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(qm),$m=function e(t){function n(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var s;if(null!=i)s=i,i=null;else do{i=2*t()-1,s=2*t()-1,r=i*i+s*s}while(!r||r>1);return e+n*s*Math.sqrt(-2*Math.log(r)/r)}}return n.source=e,n}(qm),Jm=function e(t){function n(){var e=$m.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(qm),Km=function e(t){function n(e){return function(){for(var n=0,i=0;i<e;++i)n+=t();return n}}return n.source=e,n}(qm),Zm=function e(t){function n(e){var n=Km.source(t)(e);return function(){return n()/e}}return n.source=e,n}(qm),Qm=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(qm);function e_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function t_(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var n_=Array.prototype,i_=n_.map,r_=n_.slice,s_={name:"implicit"};function a_(){var e=Er(),t=[],n=[],i=s_;function r(r){var s=r+"",a=e.get(s);if(!a){if(i!==s_)return i;e.set(s,a=t.push(r))}return n[(a-1)%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=Er();for(var i,s,a=-1,o=n.length;++a<o;)e.has(s=(i=n[a])+"")||e.set(s,t.push(i));return r},r.range=function(e){return arguments.length?(n=r_.call(e),r):n.slice()},r.unknown=function(e){return arguments.length?(i=e,r):i},r.copy=function(){return a_(t,n).unknown(i)},e_.apply(r,arguments),r}function o_(){var e,t,n=a_().unknown(void 0),i=n.domain,r=n.range,s=[0,1],a=!1,o=0,l=0,c=.5;function u(){var n=i().length,u=s[1]<s[0],h=s[u-0],d=s[1-u];e=(d-h)/Math.max(1,n-o+2*l),a&&(e=Math.floor(e)),h+=(d-h-e*(n-o))*c,t=e*(1-o),a&&(h=Math.round(h),t=Math.round(t));var f=w(n).map((function(t){return h+e*t}));return r(u?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),u()):i()},n.range=function(e){return arguments.length?(s=[+e[0],+e[1]],u()):s.slice()},n.rangeRound=function(e){return s=[+e[0],+e[1]],a=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,u()):a},n.padding=function(e){return arguments.length?(o=Math.min(1,l=+e),u()):o},n.paddingInner=function(e){return arguments.length?(o=Math.min(1,e),u()):o},n.paddingOuter=function(e){return arguments.length?(l=+e,u()):l},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),u()):c},n.copy=function(){return o_(i(),s).round(a).paddingInner(o).paddingOuter(l).align(c)},e_.apply(u(),arguments)}function l_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return l_(t())},e}function c_(){return l_(o_.apply(null,arguments).paddingInner(1))}function u_(e){return+e}var h_=[0,1];function d_(e){return e}function f_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function p_(e){var t,n=e[0],i=e[e.length-1];return n>i&&(t=n,n=i,i=t),function(e){return Math.max(n,Math.min(i,e))}}function m_(e,t,n){var i=e[0],r=e[1],s=t[0],a=t[1];return r<i?(i=f_(r,i),s=n(a,s)):(i=f_(i,r),s=n(s,a)),function(e){return s(i(e))}}function __(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=f_(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(t){var n=c(e,t,1,i)-1;return s[n](r[n](t))}}function g_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function y_(){var e,t,n,i,r,s,a=h_,o=h_,l=xt,c=d_;function u(){return i=Math.min(a.length,o.length)>2?__:m_,r=s=null,h}function h(t){return isNaN(t=+t)?n:(r||(r=i(a.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((s||(s=i(o,a.map(e),_t)))(n)))},h.domain=function(e){return arguments.length?(a=i_.call(e,u_),c===d_||(c=p_(a)),u()):a.slice()},h.range=function(e){return arguments.length?(o=r_.call(e),u()):o.slice()},h.rangeRound=function(e){return o=r_.call(e),l=Gp,u()},h.clamp=function(e){return arguments.length?(c=e?p_(a):d_,h):c!==d_},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function v_(e,t){return y_()(e,t)}var b_=n(1151),x_=n(8678),M_=n(6301),w_=n(4228),S_=n(9062);function L_(e,t,n,i){var r,s=E(e,t,n);switch((i=(0,b_.A)(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=(0,x_.A)(s,a))||(i.precision=r),(0,M_.s)(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=(0,w_.A)(s,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=(0,S_.A)(s))||(i.precision=r-2*("%"===i.type))}return(0,M_.GP)(i)}function T_(e){var t=e.domain;return e.ticks=function(e){var n=t();return k(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return L_(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r=t(),s=0,a=r.length-1,o=r[s],l=r[a];return l<o&&(i=o,o=l,l=i,i=s,s=a,a=i),(i=A(o,l,n))>0?i=A(o=Math.floor(o/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=A(o=Math.ceil(o*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[s]=Math.floor(o/i)*i,r[a]=Math.ceil(l/i)*i,t(r)):i<0&&(r[s]=Math.ceil(o*i)/i,r[a]=Math.floor(l*i)/i,t(r)),e},e}function k_(){var e=v_(d_,d_);return e.copy=function(){return g_(e,k_())},e_.apply(e,arguments),T_(e)}function A_(e){var t;function n(e){return isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=i_.call(t,u_),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return A_(e).unknown(t)},e=arguments.length?i_.call(e,u_):[0,1],T_(n)}function E_(e,t){var n,i=0,r=(e=e.slice()).length-1,s=e[i],a=e[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),e[i]=t.floor(s),e[r]=t.ceil(a),e}function C_(e){return Math.log(e)}function D_(e){return Math.exp(e)}function O_(e){return-Math.log(-e)}function P_(e){return-Math.exp(-e)}function R_(e){return isFinite(e)?+("1e"+e):e<0?0:e}function z_(e){return function(t){return-e(-t)}}function B_(e){var t,n,i=e(C_,D_),r=i.domain,s=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(s),n=function(e){return 10===e?R_:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(s),r()[0]<0?(t=z_(t),n=z_(n),e(O_,P_)):e(C_,D_),i}return i.base=function(e){return arguments.length?(s=+e,a()):s},i.domain=function(e){return arguments.length?(r(e),a()):r()},i.ticks=function(e){var i,a=r(),o=a[0],l=a[a.length-1];(i=l<o)&&(d=o,o=l,l=d);var c,u,h,d=t(o),f=t(l),p=null==e?10:+e,m=[];if(!(s%1)&&f-d<p){if(d=Math.round(d)-1,f=Math.round(f)+1,o>0){for(;d<f;++d)for(u=1,c=n(d);u<s;++u)if(!((h=c*u)<o)){if(h>l)break;m.push(h)}}else for(;d<f;++d)for(u=s-1,c=n(d);u>=1;--u)if(!((h=c*u)<o)){if(h>l)break;m.push(h)}}else m=k(d,f,Math.min(f-d,p)).map(n);return i?m.reverse():m},i.tickFormat=function(e,r){if(null==r&&(r=10===s?".0e":","),"function"!=typeof r&&(r=(0,M_.GP)(r)),e===1/0)return r;null==e&&(e=10);var a=Math.max(1,s*e/i.ticks().length);return function(e){var i=e/n(Math.round(t(e)));return i*s<s-.5&&(i*=s),i<=a?r(e):""}},i.nice=function(){return r(E_(r(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},i}function Y_(){var e=B_(y_()).domain([1,10]);return e.copy=function(){return g_(e,Y_()).base(e.base())},e_.apply(e,arguments),e}function F_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function N_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function I_(e){var t=1,n=e(F_(t),N_(t));return n.constant=function(n){return arguments.length?e(F_(t=+n),N_(t)):t},T_(n)}function H_(){var e=I_(y_());return e.copy=function(){return g_(e,H_()).constant(e.constant())},e_.apply(e,arguments)}function j_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function U_(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function W_(e){return e<0?-e*e:e*e}function G_(e){var t=e(d_,d_),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(d_,d_):.5===n?e(U_,W_):e(j_(n),j_(1/n)):n},T_(t)}function V_(){var e=G_(y_());return e.copy=function(){return g_(e,V_()).exponent(e.exponent())},e_.apply(e,arguments),e}function q_(){return V_.apply(null,arguments).exponent(.5)}function X_(){var e,t=[],n=[],i=[];function s(){var e=0,r=Math.max(1,n.length);for(i=new Array(r-1);++e<r;)i[e-1]=O(t,e/r);return a}function a(t){return isNaN(t=+t)?e:n[c(i,t)]}return a.invertExtent=function(e){var r=n.indexOf(e);return r<0?[NaN,NaN]:[r>0?i[r-1]:t[0],r<i.length?i[r]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,i=0,a=e.length;i<a;++i)null==(n=e[i])||isNaN(n=+n)||t.push(n);return t.sort(r),s()},a.range=function(e){return arguments.length?(n=r_.call(e),s()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return i.slice()},a.copy=function(){return X_().domain(t).range(n).unknown(e)},e_.apply(a,arguments)}function $_(){var e,t=0,n=1,i=1,r=[.5],s=[0,1];function a(t){return t<=t?s[c(r,t,0,i)]:e}function o(){var e=-1;for(r=new Array(i);++e<i;)r[e]=((e+1)*n-(e-i)*t)/(i+1);return a}return a.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],o()):[t,n]},a.range=function(e){return arguments.length?(i=(s=r_.call(e)).length-1,o()):s.slice()},a.invertExtent=function(e){var a=s.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=i?[r[i-1],n]:[r[a-1],r[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return r.slice()},a.copy=function(){return $_().domain([t,n]).range(s).unknown(e)},e_.apply(T_(a),arguments)}function J_(){var e,t=[.5],n=[0,1],i=1;function r(r){return r<=r?n[c(t,r,0,i)]:e}return r.domain=function(e){return arguments.length?(t=r_.call(e),i=Math.min(t.length,n.length-1),r):t.slice()},r.range=function(e){return arguments.length?(n=r_.call(e),i=Math.min(t.length,n.length-1),r):n.slice()},r.invertExtent=function(e){var i=n.indexOf(e);return[t[i-1],t[i]]},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return J_().domain(t).range(n).unknown(e)},e_.apply(r,arguments)}var K_=n(4307),Z_=n(3079),Q_=(0,Z_.A)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));const eg=Q_;var tg=Q_.range,ng=n(2462),ig=n(5638),rg=n(4126),sg=(0,Z_.A)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*rg.Tt-e.getMinutes()*rg.rR)}),(function(e,t){e.setTime(+e+t*rg.JJ)}),(function(e,t){return(t-e)/rg.JJ}),(function(e){return e.getHours()}));const ag=sg;var og=sg.range,lg=(0,Z_.A)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*rg.Tt)}),(function(e,t){e.setTime(+e+t*rg.rR)}),(function(e,t){return(t-e)/rg.rR}),(function(e){return e.getMinutes()}));const cg=lg;var ug=lg.range,hg=(0,Z_.A)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*rg.Tt)}),(function(e,t){return(t-e)/rg.Tt}),(function(e){return e.getUTCSeconds()}));const dg=hg;var fg=hg.range,pg=(0,Z_.A)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));pg.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,Z_.A)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):pg:null};const mg=pg;var _g=pg.range,gg=n(5065),yg=1e3,vg=60*yg,bg=60*vg,xg=24*bg,Mg=7*xg,wg=30*xg,Sg=365*xg;function Lg(e){return new Date(e)}function Tg(e){return e instanceof Date?+e:+new Date(+e)}function kg(e,t,n,i,r,a,o,l,c){var u=v_(d_,d_),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),_=c("%I %p"),g=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y"),x=[[o,1,yg],[o,5,5*yg],[o,15,15*yg],[o,30,30*yg],[a,1,vg],[a,5,5*vg],[a,15,15*vg],[a,30,30*vg],[r,1,bg],[r,3,3*bg],[r,6,6*bg],[r,12,12*bg],[i,1,xg],[i,2,2*xg],[n,1,Mg],[t,1,wg],[t,3,3*wg],[e,1,Sg]];function M(s){return(o(s)<s?f:a(s)<s?p:r(s)<s?m:i(s)<s?_:t(s)<s?n(s)<s?g:y:e(s)<s?v:b)(s)}function w(t,n,i,r){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(i-n)/t,o=s((function(e){return e[2]})).right(x,a);o===x.length?(r=E(n/Sg,i/Sg,t),t=e):o?(r=(o=x[a/x[o-1][2]<x[o][2]/a?o-1:o])[1],t=o[0]):(r=Math.max(E(n,i,t),1),t=l)}return null==r?t:t.every(r)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(i_.call(e,Tg)):d().map(Lg)},u.ticks=function(e,t){var n,i=d(),r=i[0],s=i[i.length-1],a=s<r;return a&&(n=r,r=s,s=n),n=(n=w(e,r,s,t))?n.range(r,s+1):[],a?n.reverse():n},u.tickFormat=function(e,t){return null==t?M:c(t)},u.nice=function(e,t){var n=d();return(e=w(e,n[0],n[n.length-1],t))?d(E_(n,e)):u},u.copy=function(){return g_(u,kg(e,t,n,i,r,a,o,l,c))},u}function Ag(){return e_.apply(kg(K_.A,eg,ng.fz,ig.A,ag,cg,dg,mg,gg.DC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Eg=n(5267),Cg=(0,Z_.A)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));const Dg=Cg;var Og=Cg.range,Pg=n(1838),Rg=n(774),zg=(0,Z_.A)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*rg.JJ)}),(function(e,t){return(t-e)/rg.JJ}),(function(e){return e.getUTCHours()}));const Bg=zg;var Yg=zg.range,Fg=(0,Z_.A)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*rg.rR)}),(function(e,t){return(t-e)/rg.rR}),(function(e){return e.getUTCMinutes()}));const Ng=Fg;var Ig=Fg.range;function Hg(){return e_.apply(kg(Eg.A,Dg,Pg.Hl,Rg.A,Bg,Ng,dg,mg,gg.aL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jg(){var e,t,n,i,r,s=0,a=1,o=d_,l=!1;function c(t){return isNaN(t=+t)?r:o(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}return c.domain=function(r){return arguments.length?(e=i(s=+r[0]),t=i(a=+r[1]),n=e===t?0:1/(t-e),c):[s,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return i=r,e=r(s),t=r(a),n=e===t?0:1/(t-e),c}}function Ug(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Wg(){var e=T_(jg()(d_));return e.copy=function(){return Ug(e,Wg())},t_.apply(e,arguments)}function Gg(){var e=B_(jg()).domain([1,10]);return e.copy=function(){return Ug(e,Gg()).base(e.base())},t_.apply(e,arguments)}function Vg(){var e=I_(jg());return e.copy=function(){return Ug(e,Vg()).constant(e.constant())},t_.apply(e,arguments)}function qg(){var e=G_(jg());return e.copy=function(){return Ug(e,qg()).exponent(e.exponent())},t_.apply(e,arguments)}function Xg(){return qg.apply(null,arguments).exponent(.5)}function $g(){var e=[],t=d_;function n(n){if(!isNaN(n=+n))return t((c(e,n)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var i,s=0,a=t.length;s<a;++s)null==(i=t[s])||isNaN(i=+i)||e.push(i);return e.sort(r),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return $g(t).domain(e)},t_.apply(n,arguments)}function Jg(){var e,t,n,i,r,s,a,o=0,l=.5,c=1,u=d_,h=!1;function d(e){return isNaN(e=+e)?a:(e=.5+((e=+s(e))-t)*(e<t?i:r),u(h?Math.max(0,Math.min(1,e)):e))}return d.domain=function(a){return arguments.length?(e=s(o=+a[0]),t=s(l=+a[1]),n=s(c=+a[2]),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),d):[o,l,c]},d.clamp=function(e){return arguments.length?(h=!!e,d):h},d.interpolator=function(e){return arguments.length?(u=e,d):u},d.unknown=function(e){return arguments.length?(a=e,d):a},function(a){return s=a,e=a(o),t=a(l),n=a(c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),d}}function Kg(){var e=T_(Jg()(d_));return e.copy=function(){return Ug(e,Kg())},t_.apply(e,arguments)}function Zg(){var e=B_(Jg()).domain([.1,1,10]);return e.copy=function(){return Ug(e,Zg()).base(e.base())},t_.apply(e,arguments)}function Qg(){var e=I_(Jg());return e.copy=function(){return Ug(e,Qg()).constant(e.constant())},t_.apply(e,arguments)}function ey(){var e=G_(Jg());return e.copy=function(){return Ug(e,ey()).exponent(e.exponent())},t_.apply(e,arguments)}function ty(){return ey.apply(null,arguments).exponent(.5)}function ny(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}const iy=ny("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ry=ny("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),sy=ny("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ay=ny("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),oy=ny("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ly=ny("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cy=ny("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),uy=ny("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hy=ny("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),dy=ny("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function fy(e){return ct(e[e.length-1])}var py=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ny);const my=fy(py);var _y=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ny);const gy=fy(_y);var yy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ny);const vy=fy(yy);var by=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ny);const xy=fy(by);var My=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ny);const wy=fy(My);var Sy=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ny);const Ly=fy(Sy);var Ty=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ny);const ky=fy(Ty);var Ay=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ny);const Ey=fy(Ay);var Cy=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ny);const Dy=fy(Cy);var Oy=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ny);const Py=fy(Oy);var Ry=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ny);const zy=fy(Ry);var By=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ny);const Yy=fy(By);var Fy=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ny);const Ny=fy(Fy);var Iy=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ny);const Hy=fy(Iy);var jy=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ny);const Uy=fy(jy);var Wy=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ny);const Gy=fy(Wy);var Vy=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ny);const qy=fy(Vy);var Xy=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ny);const $y=fy(Xy);var Jy=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ny);const Ky=fy(Jy);var Zy=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ny);const Qy=fy(Zy);var ev=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ny);const tv=fy(ev);var nv=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ny);const iv=fy(nv);var rv=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ny);const sv=fy(rv);var av=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ny);const ov=fy(av);var lv=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ny);const cv=fy(lv);var uv=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ny);const hv=fy(uv);var dv=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ny);const fv=fy(dv);function pv(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}function mv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _v(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function gv(){}var yv=.7,vv=1.4285714285714286,bv="\\s*([+-]?\\d+)\\s*",xv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wv=/^#([0-9a-f]{3,8})$/,Sv=new RegExp("^rgb\\("+[bv,bv,bv]+"\\)$"),Lv=new RegExp("^rgb\\("+[Mv,Mv,Mv]+"\\)$"),Tv=new RegExp("^rgba\\("+[bv,bv,bv,xv]+"\\)$"),kv=new RegExp("^rgba\\("+[Mv,Mv,Mv,xv]+"\\)$"),Av=new RegExp("^hsl\\("+[xv,Mv,Mv]+"\\)$"),Ev=new RegExp("^hsla\\("+[xv,Mv,Mv,xv]+"\\)$"),Cv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Dv(){return this.rgb().formatHex()}function Ov(){return this.rgb().formatRgb()}function Pv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Rv(t):3===n?new Fv(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?zv(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?zv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Sv.exec(e))?new Fv(t[1],t[2],t[3],1):(t=Lv.exec(e))?new Fv(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Tv.exec(e))?zv(t[1],t[2],t[3],t[4]):(t=kv.exec(e))?zv(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Av.exec(e))?jv(t[1],t[2]/100,t[3]/100,1):(t=Ev.exec(e))?jv(t[1],t[2]/100,t[3]/100,t[4]):Cv.hasOwnProperty(e)?Rv(Cv[e]):"transparent"===e?new Fv(NaN,NaN,NaN,0):null}function Rv(e){return new Fv(e>>16&255,e>>8&255,255&e,1)}function zv(e,t,n,i){return i<=0&&(e=t=n=NaN),new Fv(e,t,n,i)}function Bv(e){return e instanceof gv||(e=Pv(e)),e?new Fv((e=e.rgb()).r,e.g,e.b,e.opacity):new Fv}function Yv(e,t,n,i){return 1===arguments.length?Bv(e):new Fv(e,t,n,null==i?1:i)}function Fv(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function Nv(){return"#"+Hv(this.r)+Hv(this.g)+Hv(this.b)}function Iv(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Hv(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function jv(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wv(e,t,n,i)}function Uv(e){if(e instanceof Wv)return new Wv(e.h,e.s,e.l,e.opacity);if(e instanceof gv||(e=Pv(e)),!e)return new Wv;if(e instanceof Wv)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=t===s?(n-i)/o+6*(n<i):n===s?(i-t)/o+2:(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Wv(a,o,l,e.opacity)}function Wv(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Gv(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}mv(gv,Pv,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Dv,formatHex:Dv,formatHsl:function(){return Uv(this).formatHsl()},formatRgb:Ov,toString:Ov}),mv(Fv,Yv,_v(gv,{brighter:function(e){return e=null==e?vv:Math.pow(vv,e),new Fv(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?yv:Math.pow(yv,e),new Fv(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nv,formatHex:Nv,formatRgb:Iv,toString:Iv})),mv(Wv,(function(e,t,n,i){return 1===arguments.length?Uv(e):new Wv(e,t,n,null==i?1:i)}),_v(gv,{brighter:function(e){return e=null==e?vv:Math.pow(vv,e),new Wv(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?yv:Math.pow(yv,e),new Wv(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Fv(Gv(e>=240?e-240:e+120,r,i),Gv(e,r,i),Gv(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Vv=Math.PI/180,qv=180/Math.PI,Xv=-.14861,$v=1.78277,Jv=-.29227,Kv=-.90649,Zv=1.97294,Qv=-1.7884503806,eb=3.5172982438,tb=-.6557636667999999;function nb(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof ib)return new ib(e.h,e.s,e.l,e.opacity);e instanceof Fv||(e=Bv(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(tb*i+Qv*t-eb*n)/-5.9615122912,s=i-r,a=(Zv*(n-r)-Jv*s)/Kv,o=Math.sqrt(a*a+s*s)/(Zv*r*(1-r)),l=o?Math.atan2(a,s)*qv-120:NaN;return new ib(l<0?l+360:l,o,r,e.opacity)}(e):new ib(e,t,n,null==i?1:i)}function ib(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}mv(ib,nb,_v(gv,{brighter:function(e){return e=null==e?vv:Math.pow(vv,e),new ib(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?yv:Math.pow(yv,e),new ib(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Vv,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Fv(255*(t+n*(Xv*i+$v*r)),255*(t+n*(Jv*i+Kv*r)),255*(t+n*(Zv*i)),this.opacity)}}));const rb=Bm(nb(300,.5,0),nb(-240,.5,1));var sb=Bm(nb(-100,.75,.35),nb(80,1.5,.8)),ab=Bm(nb(260,.75,.35),nb(80,1.5,.8)),ob=nb();function lb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return ob.h=360*e-100,ob.s=1.5-1.5*t,ob.l=.8-.9*t,ob+""}var cb=Yv(),ub=Math.PI/3,hb=2*Math.PI/3;function db(e){var t;return e=(.5-e)*Math.PI,cb.r=255*(t=Math.sin(e))*t,cb.g=255*(t=Math.sin(e+ub))*t,cb.b=255*(t=Math.sin(e+hb))*t,cb+""}function fb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function pb(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const mb=pb(ny("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var _b=pb(ny("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),gb=pb(ny("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),yb=pb(ny("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),vb=n(4124);function bb(e){return function(){return e}}var xb=Math.abs,Mb=Math.atan2,wb=Math.cos,Sb=Math.max,Lb=Math.min,Tb=Math.sin,kb=Math.sqrt,Ab=1e-12,Eb=Math.PI,Cb=Eb/2,Db=2*Eb;function Ob(e){return e>=1?Cb:e<=-1?-Cb:Math.asin(e)}function Pb(e){return e.innerRadius}function Rb(e){return e.outerRadius}function zb(e){return e.startAngle}function Bb(e){return e.endAngle}function Yb(e){return e&&e.padAngle}function Fb(e,t,n,i,r,s,a){var o=e-n,l=t-i,c=(a?s:-s)/kb(o*o+l*l),u=c*l,h=-c*o,d=e+u,f=t+h,p=n+u,m=i+h,_=(d+p)/2,g=(f+m)/2,y=p-d,v=m-f,b=y*y+v*v,x=r-s,M=d*m-p*f,w=(v<0?-1:1)*kb(Sb(0,x*x*b-M*M)),S=(M*v-y*w)/b,L=(-M*y-v*w)/b,T=(M*v+y*w)/b,k=(-M*y+v*w)/b,A=S-_,E=L-g,C=T-_,D=k-g;return A*A+E*E>C*C+D*D&&(S=T,L=k),{cx:S,cy:L,x01:-u,y01:-h,x11:S*(r/x-1),y11:L*(r/x-1)}}function Nb(){var e=Pb,t=Rb,n=bb(0),i=null,r=zb,s=Bb,a=Yb,o=null;function l(){var l,c,u,h=+e.apply(this,arguments),d=+t.apply(this,arguments),f=r.apply(this,arguments)-Cb,p=s.apply(this,arguments)-Cb,m=xb(p-f),_=p>f;if(o||(o=l=vr()),d<h&&(c=d,d=h,h=c),d>Ab)if(m>Db-Ab)o.moveTo(d*wb(f),d*Tb(f)),o.arc(0,0,d,f,p,!_),h>Ab&&(o.moveTo(h*wb(p),h*Tb(p)),o.arc(0,0,h,p,f,_));else{var g,y,v=f,b=p,x=f,M=p,w=m,S=m,L=a.apply(this,arguments)/2,T=L>Ab&&(i?+i.apply(this,arguments):kb(h*h+d*d)),k=Lb(xb(d-h)/2,+n.apply(this,arguments)),A=k,E=k;if(T>Ab){var C=Ob(T/h*Tb(L)),D=Ob(T/d*Tb(L));(w-=2*C)>Ab?(x+=C*=_?1:-1,M-=C):(w=0,x=M=(f+p)/2),(S-=2*D)>Ab?(v+=D*=_?1:-1,b-=D):(S=0,v=b=(f+p)/2)}var O=d*wb(v),P=d*Tb(v),R=h*wb(M),z=h*Tb(M);if(k>Ab){var B,Y=d*wb(b),F=d*Tb(b),N=h*wb(x),I=h*Tb(x);if(m<Eb&&(B=function(e,t,n,i,r,s,a,o){var l=n-e,c=i-t,u=a-r,h=o-s,d=h*l-u*c;if(!(d*d<Ab))return[e+(d=(u*(t-s)-h*(e-r))/d)*l,t+d*c]}(O,P,N,I,Y,F,R,z))){var H=O-B[0],j=P-B[1],U=Y-B[0],W=F-B[1],G=1/Tb(((u=(H*U+j*W)/(kb(H*H+j*j)*kb(U*U+W*W)))>1?0:u<-1?Eb:Math.acos(u))/2),V=kb(B[0]*B[0]+B[1]*B[1]);A=Lb(k,(h-V)/(G-1)),E=Lb(k,(d-V)/(G+1))}}S>Ab?E>Ab?(g=Fb(N,I,O,P,d,E,_),y=Fb(Y,F,R,z,d,E,_),o.moveTo(g.cx+g.x01,g.cy+g.y01),E<k?o.arc(g.cx,g.cy,E,Mb(g.y01,g.x01),Mb(y.y01,y.x01),!_):(o.arc(g.cx,g.cy,E,Mb(g.y01,g.x01),Mb(g.y11,g.x11),!_),o.arc(0,0,d,Mb(g.cy+g.y11,g.cx+g.x11),Mb(y.cy+y.y11,y.cx+y.x11),!_),o.arc(y.cx,y.cy,E,Mb(y.y11,y.x11),Mb(y.y01,y.x01),!_))):(o.moveTo(O,P),o.arc(0,0,d,v,b,!_)):o.moveTo(O,P),h>Ab&&w>Ab?A>Ab?(g=Fb(R,z,Y,F,h,-A,_),y=Fb(O,P,N,I,h,-A,_),o.lineTo(g.cx+g.x01,g.cy+g.y01),A<k?o.arc(g.cx,g.cy,A,Mb(g.y01,g.x01),Mb(y.y01,y.x01),!_):(o.arc(g.cx,g.cy,A,Mb(g.y01,g.x01),Mb(g.y11,g.x11),!_),o.arc(0,0,h,Mb(g.cy+g.y11,g.cx+g.x11),Mb(y.cy+y.y11,y.cx+y.x11),_),o.arc(y.cx,y.cy,A,Mb(y.y11,y.x11),Mb(y.y01,y.x01),!_))):o.arc(0,0,h,M,x,_):o.lineTo(R,z)}else o.moveTo(0,0);if(o.closePath(),l)return o=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Eb/2;return[wb(i)*n,Tb(i)*n]},l.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:bb(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:bb(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:bb(+e),l):n},l.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:bb(+e),l):i},l.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:bb(+e),l):r},l.endAngle=function(e){return arguments.length?(s="function"==typeof e?e:bb(+e),l):s},l.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:bb(+e),l):a},l.context=function(e){return arguments.length?(o=null==e?null:e,l):o},l}function Ib(e){this._context=e}function Hb(e){return new Ib(e)}function jb(e){return e[0]}function Ub(e){return e[1]}function Wb(){var e=jb,t=Ub,n=bb(!0),i=null,r=Hb,s=null;function a(a){var o,l,c,u=a.length,h=!1;for(null==i&&(s=r(c=vr())),o=0;o<=u;++o)!(o<u&&n(l=a[o],o,a))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(l,o,a),+t(l,o,a));if(c)return s=null,c+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:bb(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:bb(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:bb(!!e),a):n},a.curve=function(e){return arguments.length?(r=e,null!=i&&(s=r(i)),a):r},a.context=function(e){return arguments.length?(null==e?i=s=null:s=r(i=e),a):i},a}function Gb(){var e=jb,t=null,n=bb(0),i=Ub,r=bb(!0),s=null,a=Hb,o=null;function l(l){var c,u,h,d,f,p=l.length,m=!1,_=new Array(p),g=new Array(p);for(null==s&&(o=a(f=vr())),c=0;c<=p;++c){if(!(c<p&&r(d=l[c],c,l))===m)if(m=!m)u=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=c-1;h>=u;--h)o.point(_[h],g[h]);o.lineEnd(),o.areaEnd()}m&&(_[c]=+e(d,c,l),g[c]=+n(d,c,l),o.point(t?+t(d,c,l):_[c],i?+i(d,c,l):g[c]))}if(f)return o=null,f+""||null}function c(){return Wb().defined(r).curve(a).context(s)}return l.x=function(n){return arguments.length?(e="function"==typeof n?n:bb(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:bb(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:bb(+e),l):t},l.y=function(e){return arguments.length?(n="function"==typeof e?e:bb(+e),i=null,l):n},l.y0=function(e){return arguments.length?(n="function"==typeof e?e:bb(+e),l):n},l.y1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:bb(+e),l):i},l.lineX0=l.lineY0=function(){return c().x(e).y(n)},l.lineY1=function(){return c().x(e).y(i)},l.lineX1=function(){return c().x(t).y(n)},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:bb(!!e),l):r},l.curve=function(e){return arguments.length?(a=e,null!=s&&(o=a(s)),l):a},l.context=function(e){return arguments.length?(null==e?s=o=null:o=a(s=e),l):s},l}function Vb(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function qb(e){return e}function Xb(){var e=qb,t=Vb,n=null,i=bb(0),r=bb(Db),s=bb(0);function a(a){var o,l,c,u,h,d=a.length,f=0,p=new Array(d),m=new Array(d),_=+i.apply(this,arguments),g=Math.min(Db,Math.max(-Db,r.apply(this,arguments)-_)),y=Math.min(Math.abs(g)/d,s.apply(this,arguments)),v=y*(g<0?-1:1);for(o=0;o<d;++o)(h=m[p[o]=o]=+e(a[o],o,a))>0&&(f+=h);for(null!=t?p.sort((function(e,n){return t(m[e],m[n])})):null!=n&&p.sort((function(e,t){return n(a[e],a[t])})),o=0,c=f?(g-d*v)/f:0;o<d;++o,_=u)l=p[o],u=_+((h=m[l])>0?h*c:0)+v,m[l]={data:a[l],index:o,value:h,startAngle:_,endAngle:u,padAngle:y};return m}return a.value=function(t){return arguments.length?(e="function"==typeof t?t:bb(+t),a):e},a.sortValues=function(e){return arguments.length?(t=e,n=null,a):t},a.sort=function(e){return arguments.length?(n=e,t=null,a):n},a.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:bb(+e),a):i},a.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:bb(+e),a):r},a.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:bb(+e),a):s},a}Ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var $b=Kb(Hb);function Jb(e){this._curve=e}function Kb(e){function t(t){return new Jb(e(t))}return t._curve=e,t}function Zb(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(Kb(e)):t()._curve},e}function Qb(){return Zb(Wb().curve($b))}function ex(){var e=Gb().curve($b),t=e.curve,n=e.lineX0,i=e.lineX1,r=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Zb(n())},delete e.lineX0,e.lineEndAngle=function(){return Zb(i())},delete e.lineX1,e.lineInnerRadius=function(){return Zb(r())},delete e.lineY0,e.lineOuterRadius=function(){return Zb(s())},delete e.lineY1,e.curve=function(e){return arguments.length?t(Kb(e)):t()._curve},e}function tx(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}Jb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var nx=Array.prototype.slice;function ix(e){return e.source}function rx(e){return e.target}function sx(e){var t=ix,n=rx,i=jb,r=Ub,s=null;function a(){var a,o=nx.call(arguments),l=t.apply(this,o),c=n.apply(this,o);if(s||(s=a=vr()),e(s,+i.apply(this,(o[0]=l,o)),+r.apply(this,o),+i.apply(this,(o[0]=c,o)),+r.apply(this,o)),a)return s=null,a+""||null}return a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(e){return arguments.length?(n=e,a):n},a.x=function(e){return arguments.length?(i="function"==typeof e?e:bb(+e),a):i},a.y=function(e){return arguments.length?(r="function"==typeof e?e:bb(+e),a):r},a.context=function(e){return arguments.length?(s=null==e?null:e,a):s},a}function ax(e,t,n,i,r){e.moveTo(t,n),e.bezierCurveTo(t=(t+i)/2,n,t,r,i,r)}function ox(e,t,n,i,r){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+r)/2,i,n,i,r)}function lx(e,t,n,i,r){var s=tx(t,n),a=tx(t,n=(n+r)/2),o=tx(i,n),l=tx(i,r);e.moveTo(s[0],s[1]),e.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}function cx(){return sx(ax)}function ux(){return sx(ox)}function hx(){var e=sx(lx);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const dx={draw:function(e,t){var n=Math.sqrt(t/Eb);e.moveTo(n,0),e.arc(0,0,n,0,Db)}},fx={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};var px=Math.sqrt(1/3),mx=2*px;const _x={draw:function(e,t){var n=Math.sqrt(t/mx),i=n*px;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}};var gx=Math.sin(Eb/10)/Math.sin(7*Eb/10),yx=Math.sin(Db/10)*gx,vx=-Math.cos(Db/10)*gx;const bx={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),i=yx*n,r=vx*n;e.moveTo(0,-n),e.lineTo(i,r);for(var s=1;s<5;++s){var a=Db*s/5,o=Math.cos(a),l=Math.sin(a);e.lineTo(l*n,-o*n),e.lineTo(o*i-l*r,l*i+o*r)}e.closePath()}},xx={draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}};var Mx=Math.sqrt(3);const wx={draw:function(e,t){var n=-Math.sqrt(t/(3*Mx));e.moveTo(0,2*n),e.lineTo(-Mx*n,-n),e.lineTo(Mx*n,-n),e.closePath()}};var Sx=-.5,Lx=Math.sqrt(3)/2,Tx=1/Math.sqrt(12),kx=3*(Tx/2+1);const Ax={draw:function(e,t){var n=Math.sqrt(t/kx),i=n/2,r=n*Tx,s=i,a=n*Tx+n,o=-s,l=a;e.moveTo(i,r),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(Sx*i-Lx*r,Lx*i+Sx*r),e.lineTo(Sx*s-Lx*a,Lx*s+Sx*a),e.lineTo(Sx*o-Lx*l,Lx*o+Sx*l),e.lineTo(Sx*i+Lx*r,Sx*r-Lx*i),e.lineTo(Sx*s+Lx*a,Sx*a-Lx*s),e.lineTo(Sx*o+Lx*l,Sx*l-Lx*o),e.closePath()}};var Ex=[dx,fx,_x,xx,bx,wx,Ax];function Cx(){var e=bb(dx),t=bb(64),n=null;function i(){var i;if(n||(n=i=vr()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(t){return arguments.length?(e="function"==typeof t?t:bb(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:bb(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}function Dx(){}function Ox(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Px(e){this._context=e}function Rx(e){return new Px(e)}function zx(e){this._context=e}function Bx(e){return new zx(e)}function Yx(e){this._context=e}function Fx(e){return new Yx(e)}function Nx(e,t){this._basis=new Px(e),this._beta=t}Px.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ox(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ox(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},zx.prototype={areaStart:Dx,areaEnd:Dx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ox(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Yx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ox(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Nx.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i,r=e[0],s=t[0],a=e[n]-r,o=t[n]-s,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(r+i*a),this._beta*t[l]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Ix=function e(t){function n(e){return 1===t?new Px(e):new Nx(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Hx(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function jx(e,t){this._context=e,this._k=(1-t)/6}jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Hx(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Hx(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ux=function e(t){function n(e){return new jx(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Wx(e,t){this._context=e,this._k=(1-t)/6}Wx.prototype={areaStart:Dx,areaEnd:Dx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Hx(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gx=function e(t){function n(e){return new Wx(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Vx(e,t){this._context=e,this._k=(1-t)/6}Vx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hx(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qx=function e(t){function n(e){return new Vx(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Xx(e,t,n){var i=e._x1,r=e._y1,s=e._x2,a=e._y2;if(e._l01_a>Ab){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ab){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,a,e._x2,e._y2)}function $x(e,t){this._context=e,this._alpha=t}$x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Xx(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jx=function e(t){function n(e){return t?new $x(e,t):new jx(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Kx(e,t){this._context=e,this._alpha=t}Kx.prototype={areaStart:Dx,areaEnd:Dx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xx(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zx=function e(t){function n(e){return t?new Kx(e,t):new Wx(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Qx(e,t){this._context=e,this._alpha=t}Qx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xx(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eM=function e(t){function n(e){return t?new Qx(e,t):new Vx(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function tM(e){this._context=e}function nM(e){return new tM(e)}function iM(e){return e<0?-1:1}function rM(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(iM(s)+iM(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function sM(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function aM(e,t,n){var i=e._x0,r=e._y0,s=e._x1,a=e._y1,o=(s-i)/3;e._context.bezierCurveTo(i+o,r+o*t,s-o,a-o*n,s,a)}function oM(e){this._context=e}function lM(e){this._context=new cM(e)}function cM(e){this._context=e}function uM(e){return new oM(e)}function hM(e){return new lM(e)}function dM(e){this._context=e}function fM(e){var t,n,i=e.length-1,r=new Array(i),s=new Array(i),a=new Array(i);for(r[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<i-1;++t)r[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,s[i-1]=7,a[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=r[t]/s[t-1],s[t]-=n,a[t]-=n*a[t-1];for(r[i-1]=a[i-1]/s[i-1],t=i-2;t>=0;--t)r[t]=(a[t]-r[t+1])/s[t];for(s[i-1]=(e[i]+r[i-1])/2,t=0;t<i-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function pM(e){return new dM(e)}function mM(e,t){this._context=e,this._t=t}function _M(e){return new mM(e,.5)}function gM(e){return new mM(e,0)}function yM(e){return new mM(e,1)}function vM(e,t){if((r=e.length)>1)for(var n,i,r,s=1,a=e[t[0]],o=a.length;s<r;++s)for(i=a,a=e[t[s]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function bM(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function xM(e,t){return e[t]}function MM(){var e=bb([]),t=bM,n=vM,i=xM;function r(r){var s,a,o=e.apply(this,arguments),l=r.length,c=o.length,u=new Array(c);for(s=0;s<c;++s){for(var h,d=o[s],f=u[s]=new Array(l),p=0;p<l;++p)f[p]=h=[0,+i(r[p],d,p,r)],h.data=r[p];f.key=d}for(s=0,a=t(u);s<c;++s)u[a[s]].index=s;return n(u,a),u}return r.keys=function(t){return arguments.length?(e="function"==typeof t?t:bb(nx.call(t)),r):e},r.value=function(e){return arguments.length?(i="function"==typeof e?e:bb(+e),r):i},r.order=function(e){return arguments.length?(t=null==e?bM:"function"==typeof e?e:bb(nx.call(e)),r):t},r.offset=function(e){return arguments.length?(n=null==e?vM:e,r):n},r}function wM(e,t){if((i=e.length)>0){for(var n,i,r,s=0,a=e[0].length;s<a;++s){for(r=n=0;n<i;++n)r+=e[n][s][1]||0;if(r)for(n=0;n<i;++n)e[n][s][1]/=r}vM(e,t)}}function SM(e,t){if((o=e.length)>0)for(var n,i,r,s,a,o,l=0,c=e[t[0]].length;l<c;++l)for(s=a=0,n=0;n<o;++n)(r=(i=e[t[n]][l])[1]-i[0])>0?(i[0]=s,i[1]=s+=r):r<0?(i[1]=a,i[0]=a+=r):(i[0]=0,i[1]=r)}function LM(e,t){if((n=e.length)>0){for(var n,i=0,r=e[t[0]],s=r.length;i<s;++i){for(var a=0,o=0;a<n;++a)o+=e[a][i][1]||0;r[i][1]+=r[i][0]=-o/2}vM(e,t)}}function TM(e,t){if((r=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,r,s=0,a=1;a<i;++a){for(var o=0,l=0,c=0;o<r;++o){for(var u=e[t[o]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,f=0;f<o;++f){var p=e[t[f]];d+=(p[a][1]||0)-(p[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=s,l&&(s-=c/l)}n[a-1][1]+=n[a-1][0]=s,vM(e,t)}}function kM(e){var t=e.map(AM);return bM(e).sort((function(e,n){return t[e]-t[n]}))}function AM(e){for(var t,n=-1,i=0,r=e.length,s=-1/0;++n<r;)(t=+e[n][1])>s&&(s=t,i=n);return i}function EM(e){var t=e.map(CM);return bM(e).sort((function(e,n){return t[e]-t[n]}))}function CM(e){for(var t,n=0,i=-1,r=e.length;++i<r;)(t=+e[i][1])&&(n+=t);return n}function DM(e){return EM(e).reverse()}function OM(e){var t,n,i=e.length,r=e.map(CM),s=kM(e),a=0,o=0,l=[],c=[];for(t=0;t<i;++t)n=s[t],a<o?(a+=r[n],l.push(n)):(o+=r[n],c.push(n));return c.reverse().concat(l)}function PM(e){return bM(e).reverse()}tM.prototype={areaStart:Dx,areaEnd:Dx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},oM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:aM(this,this._t0,sM(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,aM(this,sM(this,n=rM(this,e,t)),n);break;default:aM(this,this._t0,n=rM(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(lM.prototype=Object.create(oM.prototype)).point=function(e,t){oM.prototype.point.call(this,t,e)},cM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}},dM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=fM(e),r=fM(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},mM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var RM=n(7190);function zM(e,t,n){var i=new Ft,r=t;return null==t?(i.restart(e,t,n),i):(t=+t,n=null==n?Bt():+n,i.restart((function s(a){a+=r,i.restart(s,r+=t,n),e(a)}),t,n),i)}function BM(e){return function(){return e}}function YM(e){return e[0]}function FM(e){return e[1]}function NM(){this._=null}function IM(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function HM(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function jM(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function UM(e){for(;e.L;)e=e.L;return e}NM.prototype={constructor:NM,insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=UM(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(HM(this,n),n=(e=n).U),n.C=!1,i.C=!0,jM(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(jM(this,n),n=(e=n).U),n.C=!1,i.C=!0,HM(this,i)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,s=e.L,a=e.R;if(n=s?a?UM(a):s:a,r?r.L===e?r.L=n:r.R=n:this._=n,s&&a?(i=n.C,n.C=e.C,n.L=s,s.U=n,n!==a?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=a,a.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,HM(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,jM(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,HM(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,jM(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,HM(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,jM(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}};const WM=NM;function GM(e,t,n,i){var r=[null,null],s=mw.push(r)-1;return r.left=e,r.right=t,n&&qM(r,e,t,n),i&&qM(r,t,e,i),fw[e.index].halfedges.push(s),fw[t.index].halfedges.push(s),r}function VM(e,t,n){var i=[t,n];return i.left=e,i}function qM(e,t,n,i){e[0]||e[1]?e.left===n?e[1]=i:e[0]=i:(e[0]=i,e.left=t,e.right=n)}function XM(e,t,n,i,r){var s,a=e[0],o=e[1],l=a[0],c=a[1],u=0,h=1,d=o[0]-l,f=o[1]-c;if(s=t-l,d||!(s>0)){if(s/=d,d<0){if(s<u)return;s<h&&(h=s)}else if(d>0){if(s>h)return;s>u&&(u=s)}if(s=i-l,d||!(s<0)){if(s/=d,d<0){if(s>h)return;s>u&&(u=s)}else if(d>0){if(s<u)return;s<h&&(h=s)}if(s=n-c,f||!(s>0)){if(s/=f,f<0){if(s<u)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>u&&(u=s)}if(s=r-c,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>u&&(u=s)}else if(f>0){if(s<u)return;s<h&&(h=s)}return!(u>0||h<1)||(u>0&&(e[0]=[l+u*d,c+u*f]),h<1&&(e[1]=[l+h*d,c+h*f]),!0)}}}}}function $M(e,t,n,i,r){var s=e[1];if(s)return!0;var a,o,l=e[0],c=e.left,u=e.right,h=c[0],d=c[1],f=u[0],p=u[1],m=(h+f)/2,_=(d+p)/2;if(p===d){if(m<t||m>=i)return;if(h>f){if(l){if(l[1]>=r)return}else l=[m,n];s=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];s=[m,n]}}else if(o=_-(a=(h-f)/(p-d))*m,a<-1||a>1)if(h>f){if(l){if(l[1]>=r)return}else l=[(n-o)/a,n];s=[(r-o)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-o)/a,r];s=[(n-o)/a,n]}else if(d<p){if(l){if(l[0]>=i)return}else l=[t,a*t+o];s=[i,a*i+o]}else{if(l){if(l[0]<t)return}else l=[i,a*i+o];s=[t,a*t+o]}return e[0]=l,e[1]=s,!0}function JM(e,t){var n=e.site,i=t.left,r=t.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function KM(e,t){return t[+(t.left!==e.site)]}function ZM(e,t){return t[+(t.left===e.site)]}var QM,ew=[];function tw(){IM(this),this.x=this.y=this.arc=this.site=this.cy=null}function nw(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,s=n.site;if(i!==s){var a=r[0],o=r[1],l=i[0]-a,c=i[1]-o,u=s[0]-a,h=s[1]-o,d=2*(l*h-c*u);if(!(d>=-gw)){var f=l*l+c*c,p=u*u+h*h,m=(h*f-c*p)/d,_=(l*p-u*f)/d,g=ew.pop()||new tw;g.arc=e,g.site=r,g.x=m+a,g.y=(g.cy=_+o)+Math.sqrt(m*m+_*_),e.circle=g;for(var y=null,v=pw._;v;)if(g.y<v.y||g.y===v.y&&g.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}pw.insert(y,g),y||(QM=g)}}}}function iw(e){var t=e.circle;t&&(t.P||(QM=t.N),pw.remove(t),ew.push(t),IM(t),e.circle=null)}var rw=[];function sw(){IM(this),this.edge=this.site=this.circle=null}function aw(e){var t=rw.pop()||new sw;return t.site=e,t}function ow(e){iw(e),dw.remove(e),rw.push(e),IM(e)}function lw(e){var t=e.circle,n=t.x,i=t.cy,r=[n,i],s=e.P,a=e.N,o=[e];ow(e);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<_w&&Math.abs(i-l.circle.cy)<_w;)s=l.P,o.unshift(l),ow(l),l=s;o.unshift(l),iw(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<_w&&Math.abs(i-c.circle.cy)<_w;)a=c.N,o.push(c),ow(c),c=a;o.push(c),iw(c);var u,h=o.length;for(u=1;u<h;++u)c=o[u],l=o[u-1],qM(c.edge,l.site,c.site,r);l=o[0],(c=o[h-1]).edge=GM(l.site,c.site,null,r),nw(l),nw(c)}function cw(e){for(var t,n,i,r,s=e[0],a=e[1],o=dw._;o;)if((i=uw(o,a)-s)>_w)o=o.L;else{if(!((r=s-hw(o,a))>_w)){i>-_w?(t=o.P,n=o):r>-_w?(t=o,n=o.N):t=n=o;break}if(!o.R){t=o;break}o=o.R}!function(e){fw[e.index]={site:e,halfedges:[]}}(e);var l=aw(e);if(dw.insert(t,l),t||n){if(t===n)return iw(t),n=aw(t.site),dw.insert(l,n),l.edge=n.edge=GM(t.site,l.site),nw(t),void nw(n);if(n){iw(t),iw(n);var c=t.site,u=c[0],h=c[1],d=e[0]-u,f=e[1]-h,p=n.site,m=p[0]-u,_=p[1]-h,g=2*(d*_-f*m),y=d*d+f*f,v=m*m+_*_,b=[(_*y-f*v)/g+u,(d*v-m*y)/g+h];qM(n.edge,c,p,b),l.edge=GM(c,e,null,b),n.edge=GM(e,p,null,b),nw(t),nw(n)}else l.edge=GM(t.site,l.site)}}function uw(e,t){var n=e.site,i=n[0],r=n[1],s=r-t;if(!s)return i;var a=e.P;if(!a)return-1/0;var o=(n=a.site)[0],l=n[1],c=l-t;if(!c)return o;var u=o-i,h=1/s-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+r-s/2)))/h+i:(i+o)/2}function hw(e,t){var n=e.N;if(n)return uw(n,t);var i=e.site;return i[1]===t?i[0]:1/0}var dw,fw,pw,mw,_w=1e-6,gw=1e-12;function yw(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function vw(e,t){return t[1]-e[1]||t[0]-e[0]}function bw(e,t){var n,i,r,s=e.sort(vw).pop();for(mw=[],fw=new Array(e.length),dw=new WM,pw=new WM;;)if(r=QM,s&&(!r||s[1]<r.y||s[1]===r.y&&s[0]<r.x))s[0]===n&&s[1]===i||(cw(s),n=s[0],i=s[1]),s=e.pop();else{if(!r)break;lw(r.arc)}if(function(){for(var e,t,n,i,r=0,s=fw.length;r<s;++r)if((e=fw[r])&&(i=(t=e.halfedges).length)){var a=new Array(i),o=new Array(i);for(n=0;n<i;++n)a[n]=n,o[n]=JM(e,mw[t[n]]);for(a.sort((function(e,t){return o[t]-o[e]})),n=0;n<i;++n)o[n]=t[a[n]];for(n=0;n<i;++n)t[n]=o[n]}}(),t){var a=+t[0][0],o=+t[0][1],l=+t[1][0],c=+t[1][1];!function(e,t,n,i){for(var r,s=mw.length;s--;)$M(r=mw[s],e,t,n,i)&&XM(r,e,t,n,i)&&(Math.abs(r[0][0]-r[1][0])>_w||Math.abs(r[0][1]-r[1][1])>_w)||delete mw[s]}(a,o,l,c),function(e,t,n,i){var r,s,a,o,l,c,u,h,d,f,p,m,_=fw.length,g=!0;for(r=0;r<_;++r)if(s=fw[r]){for(a=s.site,o=(l=s.halfedges).length;o--;)mw[l[o]]||l.splice(o,1);for(o=0,c=l.length;o<c;)p=(f=ZM(s,mw[l[o]]))[0],m=f[1],h=(u=KM(s,mw[l[++o%c]]))[0],d=u[1],(Math.abs(p-h)>_w||Math.abs(m-d)>_w)&&(l.splice(o,0,mw.push(VM(a,f,Math.abs(p-e)<_w&&i-m>_w?[e,Math.abs(h-e)<_w?d:i]:Math.abs(m-i)<_w&&n-p>_w?[Math.abs(d-i)<_w?h:n,i]:Math.abs(p-n)<_w&&m-t>_w?[n,Math.abs(h-n)<_w?d:t]:Math.abs(m-t)<_w&&p-e>_w?[Math.abs(d-t)<_w?h:e,t]:null))-1),++c);c&&(g=!1)}if(g){var y,v,b,x=1/0;for(r=0,g=null;r<_;++r)(s=fw[r])&&(b=(y=(a=s.site)[0]-e)*y+(v=a[1]-t)*v)<x&&(x=b,g=s);if(g){var M=[e,t],w=[e,i],S=[n,i],L=[n,t];g.halfedges.push(mw.push(VM(a=g.site,M,w))-1,mw.push(VM(a,w,S))-1,mw.push(VM(a,S,L))-1,mw.push(VM(a,L,M))-1)}}for(r=0;r<_;++r)(s=fw[r])&&(s.halfedges.length||delete fw[r])}(a,o,l,c)}this.edges=mw,this.cells=fw,dw=pw=mw=fw=null}function xw(){var e=YM,t=FM,n=null;function i(i){return new bw(i.map((function(n,r){var s=[Math.round(e(n,r,i)/_w)*_w,Math.round(t(n,r,i)/_w)*_w];return s.index=r,s.data=n,s})),n)}return i.polygons=function(e){return i(e).polygons()},i.links=function(e){return i(e).links()},i.triangles=function(e){return i(e).triangles()},i.x=function(t){return arguments.length?(e="function"==typeof t?t:BM(+t),i):e},i.y=function(e){return arguments.length?(t="function"==typeof e?e:BM(+e),i):t},i.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}function Mw(e){return function(){return e}}function ww(e,t,n){this.target=e,this.type=t,this.transform=n}function Sw(e,t,n){this.k=e,this.x=t,this.y=n}bw.prototype={constructor:bw,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return KM(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,i){if(s=(r=n.halfedges).length)for(var r,s,a,o=n.site,l=-1,c=t[r[s-1]],u=c.left===o?c.right:c.left;++l<s;)a=u,u=(c=t[r[l]]).left===o?c.right:c.left,a&&u&&i<a.index&&i<u.index&&yw(o,a,u)<0&&e.push([o.data,a.data,u.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var i,r,s=this,a=s._found||0,o=s.cells.length;!(r=s.cells[a]);)if(++a>=o)return null;var l=e-r.site[0],c=t-r.site[1],u=l*l+c*c;do{r=s.cells[i=a],a=null,r.halfedges.forEach((function(n){var i=s.edges[n],o=i.left;if(o!==r.site&&o||(o=i.right)){var l=e-o[0],c=t-o[1],h=l*l+c*c;h<u&&(u=h,a=o.index)}}))}while(null!==a);return s._found=i,null==n||u<=n*n?r.site:null}},Sw.prototype={constructor:Sw,scale:function(e){return 1===e?this:new Sw(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Sw(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lw=new Sw(1,0,0);function Tw(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Lw;return e.__zoom}function kw(){ge.f0.stopImmediatePropagation()}function Aw(){ge.f0.preventDefault(),ge.f0.stopImmediatePropagation()}function Ew(){return!ge.f0.ctrlKey&&!ge.f0.button}function Cw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Dw(){return this.__zoom||Lw}function Ow(){return-ge.f0.deltaY*(1===ge.f0.deltaMode?.05:ge.f0.deltaMode?1:.002)}function Pw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rw(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function zw(){var e,t,n=Ew,i=Cw,r=Rw,s=Ow,a=Pw,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Kp,h=me("start","zoom","end"),d=500,f=150,p=0;function m(e){e.property("__zoom",Dw).on("wheel.zoom",M).on("mousedown.zoom",w).on("dblclick.zoom",S).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(e,t){return(t=Math.max(o[0],Math.min(o[1],t)))===e.k?e:new Sw(t,e.x,e.y)}function g(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new Sw(e.k,i,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function v(e,t,n){e.on("start.zoom",(function(){b(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).end()})).tween("zoom",(function(){var e=this,r=arguments,s=b(e,r),a=i.apply(e,r),o=null==n?y(a):"function"==typeof n?n.apply(e,r):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=e.__zoom,h="function"==typeof t?t.apply(e,r):t,d=u(c.invert(o).concat(l/c.k),h.invert(o).concat(l/h.k));return function(e){if(1===e)e=h;else{var t=d(e),n=l/t[2];e=new Sw(n,o[0]-t[0]*n,o[1]-t[1]*n)}s.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.extent=i.apply(e,t),this.taps=0}function M(){if(n.apply(this,arguments)){var e=b(this,arguments),t=this.__zoom,i=Math.max(o[0],Math.min(o[1],t.k*Math.pow(2,s.apply(this,arguments)))),a=(0,Lt.A)(this);if(e.wheel)e.mouse[0][0]===a[0]&&e.mouse[0][1]===a[1]||(e.mouse[1]=t.invert(e.mouse[0]=a)),clearTimeout(e.wheel);else{if(t.k===i)return;e.mouse=[a,t.invert(a)],rn(this),e.start()}Aw(),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),f),e.zoom("mouse",r(g(_(t,i),e.mouse[0],e.mouse[1]),e.extent,l))}}function w(){if(!t&&n.apply(this,arguments)){var e=b(this,arguments,!0),i=(0,_e.A)(ge.f0.view).on("mousemove.zoom",(function(){if(Aw(),!e.moved){var t=ge.f0.clientX-a,n=ge.f0.clientY-o;e.moved=t*t+n*n>p}e.zoom("mouse",r(g(e.that.__zoom,e.mouse[0]=(0,Lt.A)(e.that),e.mouse[1]),e.extent,l))}),!0).on("mouseup.zoom",(function(){i.on("mousemove.zoom mouseup.zoom",null),xe(ge.f0.view,e.moved),Aw(),e.end()}),!0),s=(0,Lt.A)(this),a=ge.f0.clientX,o=ge.f0.clientY;be(ge.f0.view),kw(),e.mouse=[s,this.__zoom.invert(s)],rn(this),e.start()}}function S(){if(n.apply(this,arguments)){var e=this.__zoom,t=(0,Lt.A)(this),s=e.invert(t),a=e.k*(ge.f0.shiftKey?.5:2),o=r(g(_(e,a),t,s),i.apply(this,arguments),l);Aw(),c>0?(0,_e.A)(this).transition().duration(c).call(v,o,t):(0,_e.A)(this).call(m.transform,o)}}function L(){if(n.apply(this,arguments)){var t,i,r,s,a=ge.f0.touches,o=a.length,l=b(this,arguments,ge.f0.changedTouches.length===o);for(kw(),i=0;i<o;++i)r=a[i],s=[s=(0,St.A)(this,a,r.identifier),this.__zoom.invert(s),r.identifier],l.touch0?l.touch1||l.touch0[2]===s[2]||(l.touch1=s,l.taps=0):(l.touch0=s,t=!0,l.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(l.taps<2&&(e=setTimeout((function(){e=null}),d)),rn(this),l.start())}}function T(){if(this.__zooming){var t,n,i,s,a=b(this,arguments),o=ge.f0.changedTouches,c=o.length;for(Aw(),e&&(e=clearTimeout(e)),a.taps=0,t=0;t<c;++t)n=o[t],i=(0,St.A)(this,o,n.identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=i);if(n=a.that.__zoom,a.touch1){var u=a.touch0[0],h=a.touch0[1],d=a.touch1[0],f=a.touch1[1],p=(p=d[0]-u[0])*p+(p=d[1]-u[1])*p,m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m;n=_(n,Math.sqrt(p/m)),i=[(u[0]+d[0])/2,(u[1]+d[1])/2],s=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",r(g(n,i,s),a.extent,l))}}function k(){if(this.__zooming){var e,n,i=b(this,arguments),r=ge.f0.changedTouches,s=r.length;for(kw(),t&&clearTimeout(t),t=setTimeout((function(){t=null}),d),e=0;e<s;++e)n=r[e],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var a=(0,_e.A)(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return m.transform=function(e,t,n){var i=e.selection?e.selection():e;i.property("__zoom",Dw),e!==i?v(e,t,n):i.interrupt().each((function(){b(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n){m.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n)},m.scaleTo=function(e,t,n){m.transform(e,(function(){var e=i.apply(this,arguments),s=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,o=s.invert(a),c="function"==typeof t?t.apply(this,arguments):t;return r(g(_(s,c),a,o),e,l)}),n)},m.translateBy=function(e,t,n){m.transform(e,(function(){return r(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}))},m.translateTo=function(e,t,n,s){m.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,o=null==s?y(e):"function"==typeof s?s.apply(this,arguments):s;return r(Lw.translate(o[0],o[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),s)},x.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){(0,ge.ex)(new ww(m,e,this.that.__zoom),h.apply,h,[e,this.that,this.args])}},m.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:Mw(+e),m):s},m.filter=function(e){return arguments.length?(n="function"==typeof e?e:Mw(!!e),m):n},m.touchable=function(e){return arguments.length?(a="function"==typeof e?e:Mw(!!e),m):a},m.extent=function(e){return arguments.length?(i="function"==typeof e?e:Mw([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(o[0]=+e[0],o[1]=+e[1],m):[o[0],o[1]]},m.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(e){return arguments.length?(r=e,m):r},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(u=e,m):u},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m}Tw.prototype=Sw.prototype},7390:e=>{e.exports=i,i.strict=r,i.loose=s;var t=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function i(e){return r(e)||s(e)}function r(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function s(e){return n[t.call(e)]}},1e3:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(2082))},8011:function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(e){return function(i,r,s,a){var o=t(i),l=n[e][t(i)];return 2===o&&(l=l[r?0:1]),l.replace(/%d/i,i)}},r=["","","","","","","","","","","",""];e.defineLocale("ar-dz",{months:r,monthsShort:r,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:0,doy:4}})}(n(2082))},3663:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(2082))},6150:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},r=function(e){return function(t,r,s,a){var o=n(t),l=i[e][n(t)];return 2===o&&(l=l[r?0:1]),l.replace(/%d/i,t)}},s=["","","","","","","","","","","",""];e.defineLocale("ar-ly",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(2082))},7583:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(2082))},5285:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(2082))},8927:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(2082))},3204:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},s=function(e){return function(t,n,s,a){var o=i(t),l=r[e][i(t)];return 2===o&&(l=l[n?0:1]),l.replace(/%d/i,t)}},a=["","","","","","","","","","","",""];e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:s("s"),ss:s("s"),m:s("m"),mm:s("m"),h:s("h"),hh:s("h"),d:s("d"),dd:s("d"),M:s("M"),MM:s("M"),y:s("y"),yy:s("y")},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(2082))},2636:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"bir ne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10;return e+(t[n]||t[e%100-n]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(2082))},6686:function(e,t,n){!function(e){"use strict";function t(e,t,n){return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+(i=+e,r={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:t,mm:t,h:t,hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(2082))},2804:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",w:"",ww:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(2082))},7878:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(2082))},1150:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn-bd",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t||""===t?e:""===t?e>=3?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<6?"":e<12?"":e<15?"":e<18?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},1347:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},5884:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShortRegex:/^(\d{1,2})/,monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},5215:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){return e>9?n(e%10):e}var i=[/^gen/i,/^c[\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],r=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,s=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:s,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:s,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dech da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:function(e){switch(n(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(2082))},600:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+(1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi");case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+(1===e?"minuta":2===e||3===e||4===e?"minute":"minuta");case"h":return t?"jedan sat":"jednog sata";case"hh":return i+(1===e?"sat":2===e||3===e||4===e?"sata":"sati");case"dd":return i+(1===e?"dan":"dana");case"MM":return i+(1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci");case"yy":return i+(1===e?"godina":2===e||3===e||4===e?"godine":"godina")}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},5747:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(2082))},4821:function(e,t,n){!function(e){"use strict";var t={format:"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),standalone:"ledna_nora_bezna_dubna_kvtna_ervna_ervence_srpna_z_jna_listopadu_prosince".split("_")},n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),i=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],r=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function s(e){return e>1&&e<5&&1!=~~(e/10)}function a(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"pr sekund":"pr sekundami";case"ss":return t||i?r+(s(e)?"sekundy":"sekund"):r+"sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":return t||i?r+(s(e)?"minuty":"minut"):r+"minutami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?r+(s(e)?"hodiny":"hodin"):r+"hodinami";case"d":return t||i?"den":"dnem";case"dd":return t||i?r+(s(e)?"dny":"dn"):r+"dny";case"M":return t||i?"msc":"mscem";case"MM":return t||i?r+(s(e)?"msce":"msc"):r+"msci";case"y":return t||i?"rok":"rokem";case"yy":return t||i?r+(s(e)?"roky":"let"):r+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},1642:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(2082))},8811:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(2082))},7568:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},6272:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},4374:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},9996:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},3941:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(2082))},5630:function(e,t,n){!function(e){"use strict";e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){return 6===this.day()?"[ ] dddd [{}] LT":"[ ] dddd [{}] LT"},sameElse:"L"},calendar:function(e,t){var n,i=this._calendarEl[e],r=t&&t.hours();return n=i,("undefined"!=typeof Function&&n instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(i=i.apply(t)),i.replace("{}",r%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},8751:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(2082))},4933:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(2082))},1102:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(2082))},935:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(2082))},3672:function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(2082))},434:function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(2082))},3409:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(2082))},8167:function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(2082))},1643:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_ag_sept_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(2082))},4125:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},709:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:4},invalidDate:"Fecha invlida"})}(n(2082))},2140:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(2082))},279:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"})}(n(2082))},3126:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["mne sekundi","mni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},5045:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},1774:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(2082))},4998:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];function i(e,i,r,s){var a="";switch(r){case"s":return s?"muutaman sekunnin":"muutama sekunti";case"ss":a=s?"sekunnin":"sekuntia";break;case"m":return s?"minuutin":"minuutti";case"mm":a=s?"minuutin":"minuuttia";break;case"h":return s?"tunnin":"tunti";case"hh":a=s?"tunnin":"tuntia";break;case"d":return s?"pivn":"piv";case"dd":a=s?"pivn":"piv";break;case"M":return s?"kuukauden":"kuukausi";case"MM":a=s?"kuukauden":"kuukautta";break;case"y":return s?"vuoden":"vuosi";case"yy":a=s?"vuoden":"vuotta"}return function(e,i){return e<10?i?n[e]:t[e]:e}(e,s)+" "+a}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},8304:function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(2082))},6912:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},3072:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(2082))},7887:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(2082))},1883:function(e,t,n){!function(e){"use strict";var t=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,n=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i];e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:t,monthsShortRegex:t,monthsStrictRegex:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,monthsShortStrictRegex:/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(2082))},9350:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(2082))},5535:function(e,t,n){!function(e){"use strict";e.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Meitheamh","Iil","Lnasa","Men Fmhair","Deireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","Mrt","Aib","Beal","Meith","Iil","Ln","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Sathairn"],weekdaysShort:["Domh","Luan","Mirt","Cad","Dar","Aoine","Sath"],weekdaysMin:["Do","Lu","M","C","D","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d monna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(2082))},5812:function(e,t,n){!function(e){"use strict";e.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(2082))},6364:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},4349:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:[" "," "],ss:[e+" ",e+" "],m:[" "," "],mm:[e+" ",e+" "],h:[" "," "],hh:[e+" ",e+" "],d:[" "," "],dd:[e+" ",e+" "],M:[" "," "],MM:[e+" ",e+" "],y:[" "," "],yy:[e+" ",e+" "]};return i?r[n][0]:r[n][1]}e.defineLocale("gom-deva",{months:{standalone:"___________".split("_"),format:"___________".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm []",LTS:"A h:mm:ss []",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm []",LLLL:"dddd, MMMM Do, YYYY, A h:mm []",llll:"ddd, D MMM YYYY, A h:mm []"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e,t){return"D"===t?e+"":e},week:{dow:0,doy:3},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>12?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<12?"":e<16?"":e<20?"":""}})}(n(2082))},5830:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return i?r[n][0]:r[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(2082))},2699:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},4320:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){return e<5?" ":e<10?"":e<12?n?'"':" ":e<18?n?'"':" ":""}})}(n(2082))},5668:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=[/^/i,/^|/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^|/i,/^/i,/^|/i,/^|/i];e.defineLocale("hi",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},monthsParse:i,longMonthsParse:i,shortMonthsParse:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],monthsRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsShortRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsStrictRegex:/^(?||?|?|?|?|?|?|?|||?\.?||\.?||?||?)/i,monthsShortStrictRegex:/^(\.?|\.?|?|\.?|?|?|\.?|\.?|\.?|\.?|\.?|\.?)/i,calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},9541:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+(1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi");case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+(1===e?"minuta":2===e||3===e||4===e?"minute":"minuta");case"h":return t?"jedan sat":"jednog sata";case"hh":return i+(1===e?"sat":2===e||3===e||4===e?"sata":"sati");case"dd":return i+(1===e?"dan":"dana");case"MM":return i+(1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci");case"yy":return i+(1===e?"godina":2===e||3===e||4===e?"godine":"godina")}}e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prolu] [nedjelju] [u] LT";case 3:return"[prolu] [srijedu] [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},7328:function(e,t,n){!function(e){"use strict";var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(e,t,n,i){var r=e;switch(n){case"s":return i||t?"nhny msodperc":"nhny msodperce";case"ss":return r+(i||t)?" msodperc":" msodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return r+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" ra":" rja");case"hh":return r+(i||t?" ra":" rja");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return r+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hnap":" hnapja");case"MM":return r+(i||t?" hnap":" hnapja");case"y":return"egy"+(i||t?" v":" ve");case"yy":return r+(i||t?" v":" ve")}return""}function i(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan._feb._mrc._pr._mj._jn._jl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},9431:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})}(n(2082))},1002:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(2082))},8931:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,i,r){var s=e+" ";switch(i){case"s":return n||r?"nokkrar sekndur":"nokkrum sekndum";case"ss":return t(e)?s+(n||r?"sekndur":"sekndum"):s+"seknda";case"m":return n?"mnta":"mntu";case"mm":return t(e)?s+(n||r?"mntur":"mntum"):n?s+"mnta":s+"mntu";case"hh":return t(e)?s+(n||r?"klukkustundir":"klukkustundum"):s+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return t(e)?n?s+"dagar":s+(r?"daga":"dgum"):n?s+"dagur":s+(r?"dag":"degi");case"M":return n?"mnuur":r?"mnu":"mnui";case"MM":return t(e)?n?s+"mnuir":s+(r?"mnui":"mnuum"):n?s+"mnuur":s+(r?"mnu":"mnui");case"y":return n||r?"r":"ri";case"yy":return t(e)?s+(n||r?"r":"rum"):s+(n||r?"r":"ri")}}e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},1124:function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},4714:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},9226:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(e,t){return""===t[1]?1:parseInt(t[1]||e,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"y":return 1===e?"":e+"";case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(2082))},8851:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(2082))},9211:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(|||||)(|)/,(function(e,t,n){return""===n?t+"":t+n+""}))},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):e},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}})}(n(2082))},2450:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(2082))},9639:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(2082))},4538:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e){return e+""},week:{dow:0,doy:6}})}(n(2082))},7321:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""}})}(n(2082))},7359:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=[" ","","","","","","","",""," "," "," "];e.defineLocale("ku",{months:i,monthsShort:i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return//.test(e)},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(2082))},867:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(2082))},2593:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?r[n][0]:r[n][1]}function n(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return n(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return n(e)}return n(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return n(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return n(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},294:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}})}(n(2082))},1192:function(e,t,n){!function(e){"use strict";var t={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(e,t,n,i){return t?r(n)[0]:i?r(n)[1]:r(n)[2]}function i(e){return e%10==0||e>10&&e<20}function r(e){return t[e].split("_")}function s(e,t,s,a){var o=e+" ";return 1===e?o+n(0,t,s[0],a):t?o+(i(e)?r(s)[1]:r(s)[0]):a?o+r(s)[1]:o+(i(e)?r(s)[1]:r(s)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(e,t,n,i){return t?"kelios sekunds":i?"keli sekundi":"kelias sekundes"},ss:s,m:n,mm:s,h:n,hh:s,d:n,dd:s,M:n,MM:s,y:n,yy:s},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(2082))},2717:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function i(e,i,r){return e+" "+n(t[r],e,i)}function r(e,i,r){return n(t[r],e,i)}e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(e,t){return t?"daas sekundes":"dam sekundm"},ss:i,m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},5213:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];return 1===i.length?n?r[0]:r[1]:e+" "+t.correctGrammaticalCase(e,r)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},8377:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},1735:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(2082))},2166:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||" "===t||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})}(n(2082))},6764:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){switch(n){case"s":return t?" ":" ";case"ss":return e+(t?" ":" ");case"m":case"mm":return e+(t?" ":" ");case"h":case"hh":return e+(t?" ":" ");case"d":case"dd":return e+(t?" ":" ");case"M":case"MM":return e+(t?" ":" ");case"y":case"yy":return e+(t?" ":" ");default:return e}}e.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" ";default:return e}}})}(n(2082))},5528:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function i(e,t,n,i){var r="";if(t)switch(n){case"s":r=" ";break;case"ss":r="%d ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d "}else switch(n){case"s":r=" ";break;case"ss":r="%d ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d "}return r.replace(/%d/i,e)}e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t?e:""===t||""===t||""===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"":e<12?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},2177:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(2082))},9455:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(2082))},1950:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},1273:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(2082))},1523:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},4010:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(2082))},5907:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(2082))},3105:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(2082))},2703:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},4535:function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genir_febrir_mar_abril_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),format:"de genir_de febrir_de mar_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[ui a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ir a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(2082))},274:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},567:function(e,t,n){!function(e){"use strict";var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),i=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function s(e,t,n){var i=e+" ";switch(n){case"ss":return i+(r(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return i+(r(e)?"godziny":"godzin");case"ww":return i+(r(e)?"tygodnie":"tygodni");case"MM":return i+(r(e)?"miesice":"miesicy");case"yy":return i+(r(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,i){return e?/D MMMM/.test(i)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:s,m:s,mm:s,h:s,hh:s,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:s,M:"miesic",MM:s,y:"rok",yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},8820:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"do_2_3_4_5_6_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",invalidDate:"Data invlida"})}(n(2082))},8287:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},1340:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=" ";return(e%100>=20||e>=100&&e%100==0)&&(i=" de "),e+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"sptmni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:t,m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,w:"o sptmn",ww:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(2082))},2878:function(e,t,n){!function(e){"use strict";function t(e,t,n){return"m"===n?t?"":"":e+" "+(i=+e,r={ss:t?"__":"__",mm:t?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}var n=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:t,m:t,mm:t,h:"",hh:t,d:"",dd:t,w:"",ww:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:4}})}(n(2082))},8736:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(2082))},5607:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},3227:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,n){return e>11?n?"..":" ":n?"..":" "}})}(n(2082))},5437:function(e,t,n){!function(e){"use strict";var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function i(e){return e>1&&e<5}function r(e,t,n,r){var s=e+" ";switch(n){case"s":return t||r?"pr seknd":"pr sekundami";case"ss":return t||r?s+(i(e)?"sekundy":"seknd"):s+"sekundami";case"m":return t?"minta":r?"mintu":"mintou";case"mm":return t||r?s+(i(e)?"minty":"mint"):s+"mintami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?s+(i(e)?"hodiny":"hodn"):s+"hodinami";case"d":return t||r?"de":"dom";case"dd":return t||r?s+(i(e)?"dni":"dn"):s+"dami";case"M":return t||r?"mesiac":"mesiacom";case"MM":return t||r?s+(i(e)?"mesiace":"mesiacov"):s+"mesiacmi";case"y":return t||r?"rok":"rokom";case"yy":return t||r?s+(i(e)?"roky":"rokov"):s+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:case 4:case 5:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},3352:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"nekaj sekund":"nekaj sekundami";case"ss":return r+(1===e?t?"sekundo":"sekundi":2===e?t||i?"sekundi":"sekundah":e<5?t||i?"sekunde":"sekundah":"sekund");case"m":return t?"ena minuta":"eno minuto";case"mm":return r+(1===e?t?"minuta":"minuto":2===e?t||i?"minuti":"minutama":e<5?t||i?"minute":"minutami":t||i?"minut":"minutami");case"h":return t?"ena ura":"eno uro";case"hh":return r+(1===e?t?"ura":"uro":2===e?t||i?"uri":"urama":e<5?t||i?"ure":"urami":t||i?"ur":"urami");case"d":return t||i?"en dan":"enim dnem";case"dd":return r+(1===e?t||i?"dan":"dnem":2===e?t||i?"dni":"dnevoma":t||i?"dni":"dnevi");case"M":return t||i?"en mesec":"enim mesecem";case"MM":return r+(1===e?t||i?"mesec":"mesecem":2===e?t||i?"meseca":"mesecema":e<5?t||i?"mesece":"meseci":t||i?"mesecev":"meseci");case"y":return t||i?"eno leto":"enim letom";case"yy":return r+(1===e?t||i?"leto":"letom":2===e?t||i?"leti":"letoma":e<5?t||i?"leta":"leti":t||i?"let":"leti")}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},9811:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},425:function(e,t,n){!function(e){"use strict";var t={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],d:[" "," "],dd:["","",""],M:[" "," "],MM:["","",""],y:[" "," "],yy:["","",""]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,i,r){var s,a=t.words[i];return 1===i.length?"y"===i&&n?" ":r||n?a[0]:a[1]:(s=t.correctGrammaticalCase(e,a),"yy"===i&&n&&""===s?e+" ":e+" "+s)}};e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},6342:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,i,r){var s,a=t.words[i];return 1===i.length?"y"===i&&n?"jedna godina":r||n?a[0]:a[1]:(s=t.correctGrammaticalCase(e,a),"yy"===i&&n&&"godinu"===s?e+" godina":e+" "+s)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(2082))},8405:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(2082))},2298:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t||2===t?":a":":e")},week:{dow:1,doy:4}})}(n(2082))},2553:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(2082))},6064:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||||/,meridiem:function(e,t,n){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t||""===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(2082))},812:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(2082))},7882:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(2082))},7254:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("tg",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=11?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<11?"":e<16?"":e<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(2082))},879:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(2082))},4082:function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'nji",4:"'nji",100:"'nji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"anwar_Fewral_Mart_Aprel_Ma_Iun_Iul_Awgust_Sentabr_Oktabr_Noabr_Dekabr".split("_"),monthsShort:"an_Few_Mar_Apr_Ma_In_Il_Awg_Sen_Okt_No_Dek".split("_"),weekdays:"ekenbe_Duenbe_Sienbe_arenbe_Penenbe_Anna_enbe".split("_"),weekdaysShort:"ek_Du_Si_ar_Pen_Ann_en".split("_"),weekdaysMin:"k_D_S_r_Pn_An_n".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s so",past:"%s ",s:"birne sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gn",dd:"%d gn",M:"bir a",MM:"%d a",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var i=e%10;return e+(t[i]||t[e%100-i]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(2082))},768:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(2082))},6259:function(e,t,n){!function(e){"use strict";var t="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e,n,i,r){var s=function(e){var n=Math.floor(e%1e3/100),i=Math.floor(e%100/10),r=e%10,s="";return n>0&&(s+=t[n]+"vatlh"),i>0&&(s+=(""!==s?" ":"")+t[i]+"maH"),r>0&&(s+=(""!==s?" ":"")+t[r]),""===s?"pagh":s}(e);switch(i){case"ss":return s+" lup";case"mm":return s+" tup";case"hh":return s+" rep";case"dd":return s+" jaj";case"MM":return s+" jar";case"yy":return s+" DIS"}}e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:n,m:"wa tup",mm:n,h:"wa rep",hh:n,d:"wa jaj",dd:n,M:"wa jar",MM:n,y:"wa DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},2025:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"":"":n?"s":"S"},meridiemParse:/||s|S/,isPM:function(e){return"s"===e||"S"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'nc";var i=e%10;return e+(t[i]||t[e%100-i]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(2082))},5817:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return i||t?r[n][0]:r[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(2082))},7706:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(2082))},3034:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(2082))},5029:function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(e,t){return 12===e&&(e=0)," "===t||""===t||" "===t?e:" "===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?" ":i<900?"":i<1130?" ":i<1230?"":i<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-";case"w":case"W":return e+"-";default:return e}},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(2082))},9807:function(e,t,n){!function(e){"use strict";function t(e,t,n){return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+(i=+e,r={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}function n(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:n("[ "),nextDay:n("[ "),lastDay:n("[ "),nextWeek:n("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[] dddd [").call(this);case 1:case 2:case 4:return n("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:t,m:t,mm:t,h:"",hh:t,d:"",dd:t,M:"",MM:t,y:"",yy:t},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(2082))},5664:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(2082))},8968:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(2082))},9512:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(2082))},9366:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(2082))},3702:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(2082))},7535:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(2082))},4383:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddLT":"[]dddLT"},lastDay:"[]LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddLT":"[]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(2082))},447:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1200?"":1200===i?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(2082))},6810:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"D/M/YYYY",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(2082))},3367:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(2082))},2082:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,i;function r(){return t.apply(null,arguments)}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function c(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=[],r=e.length;for(n=0;n<r;++n)i.push(t(e[n],n));return i}function f(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,i){return Rt(e,t,n,i,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function _(e){if(null==e._isValid){var t=m(e),n=i.call(t.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=p(NaN);return null!=e?f(m(t),e):m(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=r.momentProperties=[],v=!1;function b(e,t){var n,i,r,s=y.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=m(t)),c(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)c(r=t[i=y[n]])||(e[i]=r);return e}function x(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,r.updateOffset(this),v=!1)}function M(e){return e instanceof x||null!=e&&null!=e._isAMomentObject}function w(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,s,a,l=[],c=arguments.length;for(s=0;s<c;s++){if(i="","object"==typeof arguments[s]){for(a in i+="\n["+s+"] ",arguments[0])o(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[s];l.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var L,T={};function k(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),T[e]||(w(t),T[e]=!0)}function A(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e,t){var n,i=f({},e);for(n in t)o(t,n)&&(a(e[n])&&a(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)o(e,n)&&!o(t,n)&&a(e[n])&&(i[n]=f({},i[n]));return i}function C(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,L=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};function D(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var O=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},z={};function B(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(z[e]=r),t&&(z[t[0]]=function(){return D(r.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function Y(e,t){return e.isValid()?(t=F(t,e.localeData()),R[t]=R[t]||function(e){var t,n,i,r=e.match(O);for(t=0,n=r.length;t<n;t++)z[r[t]]?r[t]=z[r[t]]:r[t]=(i=r[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,s="";for(i=0;i<n;i++)s+=A(r[i])?r[i].call(t,e):r[i];return s}}(t),R[t](e)):e.localeData().invalidDate()}function F(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);)e=e.replace(P,i),P.lastIndex=0,n-=1;return e}var N={};function I(e,t){var n=e.toLowerCase();N[n]=N[n+"s"]=N[t]=e}function H(e){return"string"==typeof e?N[e]||N[e.toLowerCase()]:void 0}function j(e){var t,n,i={};for(n in e)o(e,n)&&(t=H(n))&&(i[t]=e[n]);return i}var U={};function W(e,t){U[e]=t}function G(e){return e%4==0&&e%100!=0||e%400==0}function V(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function q(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=V(t)),n}function X(e,t){return function(n){return null!=n?(J(this,e,n),r.updateOffset(this,t),this):$(this,e)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function J(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&G(e.year())&&1===e.month()&&29===e.date()?(n=q(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),De(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var K,Z=/\d/,Q=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,ie=/\d\d?/,re=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ae=/\d{1,3}/,oe=/\d{1,4}/,le=/[+-]?\d{1,6}/,ce=/\d+/,ue=/[+-]?\d+/,he=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pe(e,t,n){K[e]=A(t)?t:function(e,i){return e&&n?n:t}}function me(e,t){return o(K,e)?K[e](t._strict,t._locale):new RegExp(_e(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,r){return t||n||i||r}))))}function _e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}K={};var ge={};function ye(e,t){var n,i,r=t;for("string"==typeof e&&(e=[e]),u(t)&&(r=function(e,n){n[t]=q(e)}),i=e.length,n=0;n<i;n++)ge[e[n]]=r}function ve(e,t){ye(e,(function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)}))}function be(e,t,n){null!=t&&o(ge,e)&&ge[e](t,n._a,n,e)}var xe,Me=0,we=1,Se=2,Le=3,Te=4,ke=5,Ae=6,Ee=7,Ce=8;function De(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?G(e)?29:28:31-i%7%2}xe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),I("month","M"),W("month",8),pe("M",ie),pe("MM",ie,Q),pe("MMM",(function(e,t){return t.monthsShortRegex(e)})),pe("MMMM",(function(e,t){return t.monthsRegex(e)})),ye(["M","MM"],(function(e,t){t[we]=q(e)-1})),ye(["MMM","MMMM"],(function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[we]=r:m(n).invalidMonth=e}));var Oe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ze=fe,Be=fe;function Ye(e,t,n){var i,r,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=xe.call(this._shortMonthsParse,a))?r:null:-1!==(r=xe.call(this._longMonthsParse,a))?r:null:"MMM"===t?-1!==(r=xe.call(this._shortMonthsParse,a))||-1!==(r=xe.call(this._longMonthsParse,a))?r:null:-1!==(r=xe.call(this._longMonthsParse,a))||-1!==(r=xe.call(this._shortMonthsParse,a))?r:null}function Fe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=q(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),De(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ne(e){return null!=e?(Fe(this,e),r.updateOffset(this,!0),this):$(this,"Month")}function Ie(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],s=[];for(t=0;t<12;t++)n=p([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),s.sort(e),t=0;t<12;t++)i[t]=_e(i[t]),r[t]=_e(r[t]);for(t=0;t<24;t++)s[t]=_e(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function He(e){return G(e)?366:365}B("Y",0,0,(function(){var e=this.year();return e<=9999?D(e,4):"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),I("year","y"),W("year",1),pe("Y",ue),pe("YY",ie,Q),pe("YYYY",oe,te),pe("YYYYY",le,ne),pe("YYYYYY",le,ne),ye(["YYYYY","YYYYYY"],Me),ye("YYYY",(function(e,t){t[Me]=2===e.length?r.parseTwoDigitYear(e):q(e)})),ye("YY",(function(e,t){t[Me]=r.parseTwoDigitYear(e)})),ye("Y",(function(e,t){t[Me]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return q(e)+(q(e)>68?1900:2e3)};var je=X("FullYear",!0);function Ue(e,t,n,i,r,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,i,r,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,i,r,s,a),o}function We(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ge(e,t,n){var i=7+t-n;return-(7+We(e,0,i).getUTCDay()-t)%7+i-1}function Ve(e,t,n,i,r){var s,a,o=1+7*(t-1)+(7+n-i)%7+Ge(e,i,r);return o<=0?a=He(s=e-1)+o:o>He(e)?(s=e+1,a=o-He(e)):(s=e,a=o),{year:s,dayOfYear:a}}function qe(e,t,n){var i,r,s=Ge(e.year(),t,n),a=Math.floor((e.dayOfYear()-s-1)/7)+1;return a<1?i=a+Xe(r=e.year()-1,t,n):a>Xe(e.year(),t,n)?(i=a-Xe(e.year(),t,n),r=e.year()+1):(r=e.year(),i=a),{week:i,year:r}}function Xe(e,t,n){var i=Ge(e,t,n),r=Ge(e+1,t,n);return(He(e)-i+r)/7}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),W("week",5),W("isoWeek",5),pe("w",ie),pe("ww",ie,Q),pe("W",ie),pe("WW",ie,Q),ve(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=q(e)}));function $e(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),pe("d",ie),pe("e",ie),pe("E",ie),pe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),pe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),pe("dddd",(function(e,t){return t.weekdaysRegex(e)})),ve(["dd","ddd","dddd"],(function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:m(n).invalidWeekday=e})),ve(["d","e","E"],(function(e,t,n,i){t[i]=q(e)}));var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qe=fe,et=fe,tt=fe;function nt(e,t,n){var i,r,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=xe.call(this._weekdaysParse,a))?r:null:"ddd"===t?-1!==(r=xe.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=xe.call(this._minWeekdaysParse,a))?r:null:"dddd"===t?-1!==(r=xe.call(this._weekdaysParse,a))||-1!==(r=xe.call(this._shortWeekdaysParse,a))||-1!==(r=xe.call(this._minWeekdaysParse,a))?r:null:"ddd"===t?-1!==(r=xe.call(this._shortWeekdaysParse,a))||-1!==(r=xe.call(this._weekdaysParse,a))||-1!==(r=xe.call(this._minWeekdaysParse,a))?r:null:-1!==(r=xe.call(this._minWeekdaysParse,a))||-1!==(r=xe.call(this._weekdaysParse,a))||-1!==(r=xe.call(this._shortWeekdaysParse,a))?r:null}function it(){function e(e,t){return t.length-e.length}var t,n,i,r,s,a=[],o=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),i=_e(this.weekdaysMin(n,"")),r=_e(this.weekdaysShort(n,"")),s=_e(this.weekdays(n,"")),a.push(i),o.push(r),l.push(s),c.push(i),c.push(r),c.push(s);a.sort(e),o.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function rt(){return this.hours()%12||12}function st(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function at(e,t){return t._meridiemParse}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,rt),B("k",["kk",2],0,(function(){return this.hours()||24})),B("hmm",0,0,(function(){return""+rt.apply(this)+D(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+rt.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+D(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)})),st("a",!0),st("A",!1),I("hour","h"),W("hour",13),pe("a",at),pe("A",at),pe("H",ie),pe("h",ie),pe("k",ie),pe("HH",ie,Q),pe("hh",ie,Q),pe("kk",ie,Q),pe("hmm",re),pe("hmmss",se),pe("Hmm",re),pe("Hmmss",se),ye(["H","HH"],Le),ye(["k","kk"],(function(e,t,n){var i=q(e);t[Le]=24===i?0:i})),ye(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ye(["h","hh"],(function(e,t,n){t[Le]=q(e),m(n).bigHour=!0})),ye("hmm",(function(e,t,n){var i=e.length-2;t[Le]=q(e.substr(0,i)),t[Te]=q(e.substr(i)),m(n).bigHour=!0})),ye("hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[Le]=q(e.substr(0,i)),t[Te]=q(e.substr(i,2)),t[ke]=q(e.substr(r)),m(n).bigHour=!0})),ye("Hmm",(function(e,t,n){var i=e.length-2;t[Le]=q(e.substr(0,i)),t[Te]=q(e.substr(i))})),ye("Hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[Le]=q(e.substr(0,i)),t[Te]=q(e.substr(i,2)),t[ke]=q(e.substr(r))}));var ot=X("Hours",!0);var lt,ct={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Oe,monthsShort:Pe,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:Ze,weekdaysShort:Ke,meridiemParse:/[ap]\.?m?\.?/i},ut={},ht={};function dt(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function ft(e){return e?e.toLowerCase().replace("_","-"):e}function pt(t){var i=null;if(void 0===ut[t]&&e&&e.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(t))try{i=lt._abbr,n(5358)("./"+t),mt(i)}catch(e){ut[t]=null}return ut[t]}function mt(e,t){var n;return e&&((n=c(t)?gt(e):_t(e,t))?lt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),lt._abbr}function _t(e,t){if(null!==t){var n,i=ct;if(t.abbr=e,null!=ut[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ut[e]._config;else if(null!=t.parentLocale)if(null!=ut[t.parentLocale])i=ut[t.parentLocale]._config;else{if(null==(n=pt(t.parentLocale)))return ht[t.parentLocale]||(ht[t.parentLocale]=[]),ht[t.parentLocale].push({name:e,config:t}),null;i=n._config}return ut[e]=new C(E(i,t)),ht[e]&&ht[e].forEach((function(e){_t(e.name,e.config)})),mt(e),ut[e]}return delete ut[e],null}function gt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return lt;if(!s(e)){if(t=pt(e))return t;e=[e]}return function(e){for(var t,n,i,r,s=0;s<e.length;){for(t=(r=ft(e[s]).split("-")).length,n=(n=ft(e[s+1]))?n.split("-"):null;t>0;){if(i=pt(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&dt(r,n)>=t-1)break;t--}s++}return lt}(e)}function yt(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[we]<0||n[we]>11?we:n[Se]<1||n[Se]>De(n[Me],n[we])?Se:n[Le]<0||n[Le]>24||24===n[Le]&&(0!==n[Te]||0!==n[ke]||0!==n[Ae])?Le:n[Te]<0||n[Te]>59?Te:n[ke]<0||n[ke]>59?ke:n[Ae]<0||n[Ae]>999?Ae:-1,m(e)._overflowDayOfYear&&(t<Me||t>Se)&&(t=Se),m(e)._overflowWeeks&&-1===t&&(t=Ee),m(e)._overflowWeekday&&-1===t&&(t=Ce),m(e).overflow=t),e}var vt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xt=/Z|[+-]\d\d(?::?\d\d)?/,Mt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],wt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],St=/^\/?Date\((-?\d+)/i,Lt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,n,i,r,s,a,o=e._i,l=vt.exec(o)||bt.exec(o),c=Mt.length,u=wt.length;if(l){for(m(e).iso=!0,t=0,n=c;t<n;t++)if(Mt[t][1].exec(l[1])){r=Mt[t][0],i=!1!==Mt[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=u;t<n;t++)if(wt[t][1].exec(l[3])){s=(l[2]||" ")+wt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!i&&null!=s)return void(e._isValid=!1);if(l[4]){if(!xt.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=r+(s||"")+(a||""),Ot(e)}else e._isValid=!1}function At(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Et(e){var t,n,i,r,s,a,o,l,c=Lt.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],r=c[2],s=c[5],a=c[6],o=c[7],l=[At(n),Pe.indexOf(i),parseInt(r,10),parseInt(s,10),parseInt(a,10)],o&&l.push(parseInt(o,10)),t=l,!function(e,t,n){return!e||Ke.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return Tt[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(c[8],c[9],c[10]),e._d=We.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Ct(e,t,n){return null!=e?e:null!=t?t:n}function Dt(e){var t,n,i,s,a,o=[];if(!e._d){for(i=function(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Se]&&null==e._a[we]&&function(e){var t,n,i,r,s,a,o,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,a=4,n=Ct(t.GG,e._a[Me],qe(zt(),1,4).year),i=Ct(t.W,1),((r=Ct(t.E,1))<1||r>7)&&(l=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,c=qe(zt(),s,a),n=Ct(t.gg,e._a[Me],c.year),i=Ct(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+s,(t.e<0||t.e>6)&&(l=!0)):r=s),i<1||i>Xe(n,s,a)?m(e)._overflowWeeks=!0:null!=l?m(e)._overflowWeekday=!0:(o=Ve(n,i,r,s,a),e._a[Me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=Ct(e._a[Me],i[Me]),(e._dayOfYear>He(a)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=We(a,0,e._dayOfYear),e._a[we]=n.getUTCMonth(),e._a[Se]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Le]&&0===e._a[Te]&&0===e._a[ke]&&0===e._a[Ae]&&(e._nextDay=!0,e._a[Le]=0),e._d=(e._useUTC?We:Ue).apply(null,o),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Le]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(m(e).weekdayMismatch=!0)}}function Ot(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,s,a,o,l,c=""+e._i,u=c.length,h=0;for(l=(i=F(e._f,e._locale).match(O)||[]).length,t=0;t<l;t++)s=i[t],(n=(c.match(me(s,e))||[])[0])&&((a=c.substr(0,c.indexOf(n))).length>0&&m(e).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),h+=n.length),z[s]?(n?m(e).empty=!1:m(e).unusedTokens.push(s),be(s,n,e)):e._strict&&!n&&m(e).unusedTokens.push(s);m(e).charsLeftOver=u-h,c.length>0&&m(e).unusedInput.push(c),e._a[Le]<=12&&!0===m(e).bigHour&&e._a[Le]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Le]=function(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[Le],e._meridiem),null!==(o=m(e).era)&&(e._a[Me]=e._locale.erasConvertYear(o,e._a[Me])),Dt(e),yt(e)}else Et(e);else kt(e)}function Pt(e){var t=e._i,n=e._f;return e._locale=e._locale||gt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),M(t)?new x(yt(t)):(h(t)?e._d=t:s(n)?function(e){var t,n,i,r,s,a,o=!1,l=e._f.length;if(0===l)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)s=0,a=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Ot(t),_(t)&&(a=!0),s+=m(t).charsLeftOver,s+=10*m(t).unusedTokens.length,m(t).score=s,o?s<i&&(i=s,n=t):(null==i||s<i||a)&&(i=s,n=t,a&&(o=!0));f(e,n||t)}(e):n?Ot(e):function(e){var t=e._i;c(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=St.exec(e._i);null===t?(kt(e),!1===e._isValid&&(delete e._isValid,Et(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):s(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),Dt(e)):a(t)?function(e){if(!e._d){var t=j(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Dt(e)}}(e):u(t)?e._d=new Date(t):r.createFromInputFallback(e)}(e),_(e)||(e._d=null),e))}function Rt(e,t,n,i,r){var o,c={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(a(e)&&l(e)||s(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=r,c._l=n,c._i=e,c._f=t,c._strict=i,(o=new x(yt(Pt(c))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function zt(e,t,n,i){return Rt(e,t,n,i,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Bt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=zt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Yt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=zt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Ft(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return zt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function It(e){var t=j(e),n=t.year||0,i=t.quarter||0,r=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,i=!1,r=Nt.length;for(t in e)if(o(e,t)&&(-1===xe.call(Nt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<r;++n)if(e[Nt[n]]){if(i)return!1;parseFloat(e[Nt[n]])!==q(e[Nt[n]])&&(i=!0)}return!0}(t),this._milliseconds=+h+1e3*u+6e4*c+1e3*l*60*60,this._days=+a+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=gt(),this._bubble()}function Ht(e){return e instanceof It}function jt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ut(e,t){B(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+D(~~(e/60),2)+t+D(~~e%60,2)}))}Ut("Z",":"),Ut("ZZ",""),pe("Z",de),pe("ZZ",de),ye(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Gt(de,e)}));var Wt=/([\+\-]|\d\d)/gi;function Gt(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(Wt)||["-",0,0])[1]+q(n[2]))?0:"+"===n[0]?i:-i}function Vt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(M(e)||h(e)?e.valueOf():zt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):zt(e).local()}function qt(e){return-Math.round(e._d.getTimezoneOffset())}function Xt(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var $t=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Jt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Kt(e,t){var n,i,r,s,a,l,c=e,h=null;return Ht(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(c={},t?c[t]=+e:c.milliseconds=+e):(h=$t.exec(e))?(n="-"===h[1]?-1:1,c={y:0,d:q(h[Se])*n,h:q(h[Le])*n,m:q(h[Te])*n,s:q(h[ke])*n,ms:q(jt(1e3*h[Ae]))*n}):(h=Jt.exec(e))?(n="-"===h[1]?-1:1,c={y:Zt(h[2],n),M:Zt(h[3],n),w:Zt(h[4],n),d:Zt(h[5],n),h:Zt(h[6],n),m:Zt(h[7],n),s:Zt(h[8],n)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(s=zt(c.from),a=zt(c.to),r=s.isValid()&&a.isValid()?(a=Vt(a,s),s.isBefore(a)?l=Qt(s,a):((l=Qt(a,s)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=r.milliseconds,c.M=r.months),i=new It(c),Ht(e)&&o(e,"_locale")&&(i._locale=e._locale),Ht(e)&&o(e,"_isValid")&&(i._isValid=e._isValid),i}function Zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function en(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),tn(this,Kt(n,i),e),this}}function tn(e,t,n,i){var s=t._milliseconds,a=jt(t._days),o=jt(t._months);e.isValid()&&(i=null==i||i,o&&Fe(e,$(e,"Month")+o*n),a&&J(e,"Date",$(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&r.updateOffset(e,a||o))}Kt.fn=It.prototype,Kt.invalid=function(){return Kt(NaN)};var nn=en(1,"add"),rn=en(-1,"subtract");function sn(e){return"string"==typeof e||e instanceof String}function an(e){return M(e)||h(e)||sn(e)||u(e)||function(e){var t=s(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&sn(e)})).length),t&&n}(e)||function(e){var t,n,i=a(e)&&!l(e),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=s.length;for(t=0;t<c;t+=1)n=s[t],r=r||o(e,n);return i&&r}(e)||null==e}function on(e,t){if(e.date()<t.date())return-on(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function ln(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gt(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var cn=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function un(){return this._locale}var hn=1e3,dn=6e4,fn=36e5,pn=126227808e5;function mn(e,t){return(e%t+t)%t}function _n(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-pn:new Date(e,t,n).valueOf()}function gn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-pn:Date.UTC(e,t,n)}function yn(e,t){return t.erasAbbrRegex(e)}function vn(){var e,t,n=[],i=[],r=[],s=[],a=this.eras();for(e=0,t=a.length;e<t;++e)i.push(_e(a[e].name)),n.push(_e(a[e].abbr)),r.push(_e(a[e].narrow)),s.push(_e(a[e].name)),s.push(_e(a[e].abbr)),s.push(_e(a[e].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function bn(e,t){B(0,[e,e.length],0,t)}function xn(e,t,n,i,r){var s;return null==e?qe(this,i,r).year:(t>(s=Xe(e,i,r))&&(t=s),Mn.call(this,e,t,n,i,r))}function Mn(e,t,n,i,r){var s=Ve(e,t,n,i,r),a=We(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),pe("N",yn),pe("NN",yn),pe("NNN",yn),pe("NNNN",(function(e,t){return t.erasNameRegex(e)})),pe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?m(n).era=r:m(n).invalidEra=e})),pe("y",ce),pe("yy",ce),pe("yyy",ce),pe("yyyy",ce),pe("yo",(function(e,t){return t._eraYearOrdinalRegex||ce})),ye(["y","yy","yyy","yyyy"],Me),ye(["yo"],(function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Me]=n._locale.eraYearOrdinalParse(e,r):t[Me]=parseInt(e,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),bn("gggg","weekYear"),bn("ggggg","weekYear"),bn("GGGG","isoWeekYear"),bn("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),pe("G",ue),pe("g",ue),pe("GG",ie,Q),pe("gg",ie,Q),pe("GGGG",oe,te),pe("gggg",oe,te),pe("GGGGG",le,ne),pe("ggggg",le,ne),ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=q(e)})),ve(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),I("quarter","Q"),W("quarter",7),pe("Q",Z),ye("Q",(function(e,t){t[we]=3*(q(e)-1)})),B("D",["DD",2],"Do","date"),I("date","D"),W("date",9),pe("D",ie),pe("DD",ie,Q),pe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ye(["D","DD"],Se),ye("Do",(function(e,t){t[Se]=q(e.match(ie)[0])}));var wn=X("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),W("dayOfYear",4),pe("DDD",ae),pe("DDDD",ee),ye(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=q(e)})),B("m",["mm",2],0,"minute"),I("minute","m"),W("minute",14),pe("m",ie),pe("mm",ie,Q),ye(["m","mm"],Te);var Sn=X("Minutes",!1);B("s",["ss",2],0,"second"),I("second","s"),W("second",15),pe("s",ie),pe("ss",ie,Q),ye(["s","ss"],ke);var Ln,Tn,kn=X("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),I("millisecond","ms"),W("millisecond",16),pe("S",ae,Z),pe("SS",ae,Q),pe("SSS",ae,ee),Ln="SSSS";Ln.length<=9;Ln+="S")pe(Ln,ce);function An(e,t){t[Ae]=q(1e3*("0."+e))}for(Ln="S";Ln.length<=9;Ln+="S")ye(Ln,An);Tn=X("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var En=x.prototype;function Cn(e){return e}En.add=nn,En.calendar=function(e,t){1===arguments.length&&(arguments[0]?an(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=a(e)&&!l(e),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)i=i||o(e,r[t]);return n&&i}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||zt(),i=Vt(n,this).startOf("day"),s=r.calendarFormat(this,i)||"sameElse",c=t&&(A(t[s])?t[s].call(this,n):t[s]);return this.format(c||this.localeData().calendar(s,this,zt(n)))},En.clone=function(){return new x(this)},En.diff=function(e,t,n){var i,r,s;if(!this.isValid())return NaN;if(!(i=Vt(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=H(t)){case"year":s=on(this,i)/12;break;case"month":s=on(this,i);break;case"quarter":s=on(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return n?s:V(s)},En.endOf=function(e){var t,n;if(void 0===(e=H(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gn:_n,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=fn-mn(t+(this._isUTC?0:this.utcOffset()*dn),fn)-1;break;case"minute":t=this._d.valueOf(),t+=dn-mn(t,dn)-1;break;case"second":t=this._d.valueOf(),t+=hn-mn(t,hn)-1}return this._d.setTime(t),r.updateOffset(this,!0),this},En.format=function(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=Y(this,e);return this.localeData().postformat(t)},En.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||zt(e).isValid())?Kt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},En.fromNow=function(e){return this.from(zt(),e)},En.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||zt(e).isValid())?Kt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},En.toNow=function(e){return this.to(zt(),e)},En.get=function(e){return A(this[e=H(e)])?this[e]():this},En.invalidAt=function(){return m(this).overflow},En.isAfter=function(e,t){var n=M(e)?e:zt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},En.isBefore=function(e,t){var n=M(e)?e:zt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},En.isBetween=function(e,t,n,i){var r=M(e)?e:zt(e),s=M(t)?t:zt(t);return!!(this.isValid()&&r.isValid()&&s.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(s,n):!this.isAfter(s,n))},En.isSame=function(e,t){var n,i=M(e)?e:zt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},En.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},En.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},En.isValid=function(){return _(this)},En.lang=cn,En.locale=ln,En.localeData=un,En.max=Yt,En.min=Bt,En.parsingFlags=function(){return f({},m(this))},En.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:U[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=j(e)),r=i.length;for(n=0;n<r;n++)this[i[n].unit](e[i[n].unit])}else if(A(this[e=H(e)]))return this[e](t);return this},En.startOf=function(e){var t,n;if(void 0===(e=H(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gn:_n,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mn(t+(this._isUTC?0:this.utcOffset()*dn),fn);break;case"minute":t=this._d.valueOf(),t-=mn(t,dn);break;case"second":t=this._d.valueOf(),t-=mn(t,hn)}return this._d.setTime(t),r.updateOffset(this,!0),this},En.subtract=rn,En.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},En.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},En.toDate=function(){return new Date(this.valueOf())},En.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Y(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Y(n,"Z")):Y(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},En.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(En[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),En.toJSON=function(){return this.isValid()?this.toISOString():null},En.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},En.unix=function(){return Math.floor(this.valueOf()/1e3)},En.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},En.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},En.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},En.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},En.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},En.eraYear=function(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-r(s[e].since).year())*n+s[e].offset;return this.year()},En.year=je,En.isLeapYear=function(){return G(this.year())},En.weekYear=function(e){return xn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},En.isoWeekYear=function(e){return xn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},En.quarter=En.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},En.month=Ne,En.daysInMonth=function(){return De(this.year(),this.month())},En.week=En.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},En.isoWeek=En.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},En.weeksInYear=function(){var e=this.localeData()._week;return Xe(this.year(),e.dow,e.doy)},En.weeksInWeekYear=function(){var e=this.localeData()._week;return Xe(this.weekYear(),e.dow,e.doy)},En.isoWeeksInYear=function(){return Xe(this.year(),1,4)},En.isoWeeksInISOWeekYear=function(){return Xe(this.isoWeekYear(),1,4)},En.date=wn,En.day=En.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},En.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},En.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},En.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},En.hour=En.hours=ot,En.minute=En.minutes=Sn,En.second=En.seconds=kn,En.millisecond=En.milliseconds=Tn,En.utcOffset=function(e,t,n){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Gt(de,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=qt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?tn(this,Kt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:qt(this)},En.utc=function(e){return this.utcOffset(0,e)},En.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(qt(this),"m")),this},En.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Gt(he,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},En.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?zt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},En.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},En.isLocal=function(){return!!this.isValid()&&!this._isUTC},En.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},En.isUtc=Xt,En.isUTC=Xt,En.zoneAbbr=function(){return this._isUTC?"UTC":""},En.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},En.dates=S("dates accessor is deprecated. Use date instead.",wn),En.months=S("months accessor is deprecated. Use month instead",Ne),En.years=S("years accessor is deprecated. Use year instead",je),En.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),En.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Pt(t))._a?(e=t._isUTC?p(t._a):zt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&q(e[i])!==q(t[i]))&&a++;return a+s}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Dn=C.prototype;function On(e,t,n,i){var r=gt(),s=p().set(i,t);return r[n](s,e)}function Pn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return On(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=On(e,i,n,"month");return r}function Rn(e,t,n,i){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var r,s=gt(),a=e?s._week.dow:0,o=[];if(null!=n)return On(t,(n+a)%7,i,"day");for(r=0;r<7;r++)o[r]=On(t,(r+a)%7,i,"day");return o}Dn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return A(i)?i.call(t,n):i},Dn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(O).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},Dn.invalidDate=function(){return this._invalidDate},Dn.ordinal=function(e){return this._ordinal.replace("%d",e)},Dn.preparse=Cn,Dn.postformat=Cn,Dn.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return A(r)?r(e,t,n,i):r.replace(/%d/i,e)},Dn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return A(n)?n(t):n.replace(/%s/i,t)},Dn.set=function(e){var t,n;for(n in e)o(e,n)&&(A(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Dn.eras=function(e,t){var n,i,s,a=this._eras||gt("en")._eras;for(n=0,i=a.length;n<i;++n)switch("string"==typeof a[n].since&&(s=r(a[n].since).startOf("day"),a[n].since=s.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":s=r(a[n].until).startOf("day").valueOf(),a[n].until=s.valueOf()}return a},Dn.erasParse=function(e,t,n){var i,r,s,a,o,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(s=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),o=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[i];break;case"NNNN":if(s===e)return l[i];break;case"NNNNN":if(o===e)return l[i]}else if([s,a,o].indexOf(e)>=0)return l[i]},Dn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n},Dn.erasAbbrRegex=function(e){return o(this,"_erasAbbrRegex")||vn.call(this),e?this._erasAbbrRegex:this._erasRegex},Dn.erasNameRegex=function(e){return o(this,"_erasNameRegex")||vn.call(this),e?this._erasNameRegex:this._erasRegex},Dn.erasNarrowRegex=function(e){return o(this,"_erasNarrowRegex")||vn.call(this),e?this._erasNarrowRegex:this._erasRegex},Dn.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Re).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone},Dn.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Re.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Dn.monthsParse=function(e,t,n){var i,r,s;if(this._monthsParseExact)return Ye.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},Dn.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ie.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Be),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Dn.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Ie.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=ze),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Dn.week=function(e){return qe(e,this._week.dow,this._week.doy).week},Dn.firstDayOfYear=function(){return this._week.doy},Dn.firstDayOfWeek=function(){return this._week.dow},Dn.weekdays=function(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?$e(n,this._week.dow):e?n[e.day()]:n},Dn.weekdaysMin=function(e){return!0===e?$e(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Dn.weekdaysShort=function(e){return!0===e?$e(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Dn.weekdaysParse=function(e,t,n){var i,r,s;if(this._weekdaysParseExact)return nt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},Dn.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Dn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Dn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||it.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Dn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Dn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},mt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===q(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",mt),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",gt);var zn=Math.abs;function Bn(e,t,n,i){var r=Kt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Yn(e){return e<0?Math.floor(e):Math.ceil(e)}function Fn(e){return 4800*e/146097}function Nn(e){return 146097*e/4800}function In(e){return function(){return this.as(e)}}var Hn=In("ms"),jn=In("s"),Un=In("m"),Wn=In("h"),Gn=In("d"),Vn=In("w"),qn=In("M"),Xn=In("Q"),$n=In("y");function Jn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Kn=Jn("milliseconds"),Zn=Jn("seconds"),Qn=Jn("minutes"),ei=Jn("hours"),ti=Jn("days"),ni=Jn("months"),ii=Jn("years");var ri=Math.round,si={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ai(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}var oi=Math.abs;function li(e){return(e>0)-(e<0)||+e}function ci(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,s,a,o,l=oi(this._milliseconds)/1e3,c=oi(this._days),u=oi(this._months),h=this.asSeconds();return h?(e=V(l/60),t=V(e/60),l%=60,e%=60,n=V(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=h<0?"-":"",s=li(this._months)!==li(h)?"-":"",a=li(this._days)!==li(h)?"-":"",o=li(this._milliseconds)!==li(h)?"-":"",r+"P"+(n?s+n+"Y":"")+(u?s+u+"M":"")+(c?a+c+"D":"")+(t||e||l?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(l?o+i+"S":"")):"P0D"}var ui=It.prototype;return ui.isValid=function(){return this._isValid},ui.abs=function(){var e=this._data;return this._milliseconds=zn(this._milliseconds),this._days=zn(this._days),this._months=zn(this._months),e.milliseconds=zn(e.milliseconds),e.seconds=zn(e.seconds),e.minutes=zn(e.minutes),e.hours=zn(e.hours),e.months=zn(e.months),e.years=zn(e.years),this},ui.add=function(e,t){return Bn(this,e,t,1)},ui.subtract=function(e,t){return Bn(this,e,t,-1)},ui.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=H(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Fn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Nn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},ui.asMilliseconds=Hn,ui.asSeconds=jn,ui.asMinutes=Un,ui.asHours=Wn,ui.asDays=Gn,ui.asWeeks=Vn,ui.asMonths=qn,ui.asQuarters=Xn,ui.asYears=$n,ui.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},ui._bubble=function(){var e,t,n,i,r,s=this._milliseconds,a=this._days,o=this._months,l=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*Yn(Nn(o)+a),a=0,o=0),l.milliseconds=s%1e3,e=V(s/1e3),l.seconds=e%60,t=V(e/60),l.minutes=t%60,n=V(t/60),l.hours=n%24,a+=V(n/24),o+=r=V(Fn(a)),a-=Yn(Nn(r)),i=V(o/12),o%=12,l.days=a,l.months=o,l.years=i,this},ui.clone=function(){return Kt(this)},ui.get=function(e){return e=H(e),this.isValid()?this[e+"s"]():NaN},ui.milliseconds=Kn,ui.seconds=Zn,ui.minutes=Qn,ui.hours=ei,ui.days=ti,ui.weeks=function(){return V(this.days()/7)},ui.months=ni,ui.years=ii,ui.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,s=si;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(s=Object.assign({},si,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),i=function(e,t,n,i){var r=Kt(e).abs(),s=ri(r.as("s")),a=ri(r.as("m")),o=ri(r.as("h")),l=ri(r.as("d")),c=ri(r.as("M")),u=ri(r.as("w")),h=ri(r.as("y")),d=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=i,ai.apply(null,d)}(this,!r,s,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},ui.toISOString=ci,ui.toString=ci,ui.toJSON=ci,ui.locale=ln,ui.localeData=un,ui.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ci),ui.lang=cn,B("X",0,0,"unix"),B("x",0,0,"valueOf"),pe("x",ue),pe("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ye("x",(function(e,t,n){n._d=new Date(q(e))})),r.version="2.29.4",t=zt,r.fn=En,r.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},r.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=p,r.unix=function(e){return zt(1e3*e)},r.months=function(e,t){return Pn(e,t,"months")},r.isDate=h,r.locale=mt,r.invalid=g,r.duration=Kt,r.isMoment=M,r.weekdays=function(e,t,n){return Rn(e,t,n,"weekdays")},r.parseZone=function(){return zt.apply(null,arguments).parseZone()},r.localeData=gt,r.isDuration=Ht,r.monthsShort=function(e,t){return Pn(e,t,"monthsShort")},r.weekdaysMin=function(e,t,n){return Rn(e,t,n,"weekdaysMin")},r.defineLocale=_t,r.updateLocale=function(e,t){if(null!=t){var n,i,r=ct;null!=ut[e]&&null!=ut[e].parentLocale?ut[e].set(E(ut[e]._config,t)):(null!=(i=pt(e))&&(r=i._config),t=E(r,t),null==i&&(t.abbr=e),(n=new C(t)).parentLocale=ut[e],ut[e]=n),mt(e)}else null!=ut[e]&&(null!=ut[e].parentLocale?(ut[e]=ut[e].parentLocale,e===mt()&&mt(e)):null!=ut[e]&&delete ut[e]);return ut[e]},r.locales=function(){return L(ut)},r.weekdaysShort=function(e,t,n){return Rn(e,t,n,"weekdaysShort")},r.normalizeUnits=H,r.relativeTimeRounding=function(e){return void 0===e?ri:"function"==typeof e&&(ri=e,!0)},r.relativeTimeThreshold=function(e,t){return void 0!==si[e]&&(void 0===t?si[e]:(si[e]=t,"s"===e&&(si.ss=t-1),!0))},r.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=En,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},200:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>te});var i="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,r=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(i&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}(),s=i&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),r))}};function a(e){return e&&"[object Function]"==={}.toString.call(e)}function o(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function l(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function c(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=o(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?e:c(l(e))}function u(e){return e&&e.referenceNode?e.referenceNode:e}var h=i&&!(!window.MSInputMethodContext||!document.documentMode),d=i&&/MSIE 10/.test(navigator.userAgent);function f(e){return 11===e?h:10===e?d:h||d}function p(e){if(!e)return document.documentElement;for(var t=f(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===o(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function m(e){return null!==e.parentNode?m(e.parentNode):e}function _(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,s=document.createRange();s.setStart(i,0),s.setEnd(r,0);var a,o,l=s.commonAncestorContainer;if(e!==l&&t!==l||i.contains(r))return"BODY"===(o=(a=l).nodeName)||"HTML"!==o&&p(a.firstElementChild)!==a?p(l):l;var c=m(e);return c.host?_(c.host,t):_(e,m(t).host)}function g(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[t]}return e[t]}function y(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+i+"Width"])}function v(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],f(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function b(e){var t=e.body,n=e.documentElement,i=f(10)&&getComputedStyle(n);return{height:v("Height",t,n,i),width:v("Width",t,n,i)}}var x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function S(e){return w({},e,{right:e.left+e.width,bottom:e.top+e.height})}function L(e){var t={};try{if(f(10)){t=e.getBoundingClientRect();var n=g(e,"top"),i=g(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(e){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},s="HTML"===e.nodeName?b(e.ownerDocument):{},a=s.width||e.clientWidth||r.width,l=s.height||e.clientHeight||r.height,c=e.offsetWidth-a,u=e.offsetHeight-l;if(c||u){var h=o(e);c-=y(h,"x"),u-=y(h,"y"),r.width-=c,r.height-=u}return S(r)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=f(10),r="HTML"===t.nodeName,s=L(e),a=L(t),l=c(e),u=o(t),h=parseFloat(u.borderTopWidth),d=parseFloat(u.borderLeftWidth);n&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var p=S({top:s.top-a.top-h,left:s.left-a.left-d,width:s.width,height:s.height});if(p.marginTop=0,p.marginLeft=0,!i&&r){var m=parseFloat(u.marginTop),_=parseFloat(u.marginLeft);p.top-=h-m,p.bottom-=h-m,p.left-=d-_,p.right-=d-_,p.marginTop=m,p.marginLeft=_}return(i&&!n?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=g(t,"top"),r=g(t,"left"),s=n?-1:1;return e.top+=i*s,e.bottom+=i*s,e.left+=r*s,e.right+=r*s,e}(p,t)),p}function k(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===o(e,"position"))return!0;var n=l(e);return!!n&&k(n)}function A(e){if(!e||!e.parentElement||f())return document.documentElement;for(var t=e.parentElement;t&&"none"===o(t,"transform");)t=t.parentElement;return t||document.documentElement}function E(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},a=r?A(e):_(e,u(t));if("viewport"===i)s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=T(e,n),r=Math.max(n.clientWidth,window.innerWidth||0),s=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:g(n),o=t?0:g(n,"left");return S({top:a-i.top+i.marginTop,left:o-i.left+i.marginLeft,width:r,height:s})}(a,r);else{var o=void 0;"scrollParent"===i?"BODY"===(o=c(l(t))).nodeName&&(o=e.ownerDocument.documentElement):o="window"===i?e.ownerDocument.documentElement:i;var h=T(o,a,r);if("HTML"!==o.nodeName||k(a))s=h;else{var d=b(e.ownerDocument),f=d.height,p=d.width;s.top+=h.top-h.marginTop,s.bottom=f+h.top,s.left+=h.left-h.marginLeft,s.right=p+h.left}}var m="number"==typeof(n=n||0);return s.left+=m?n:n.left||0,s.top+=m?n:n.top||0,s.right-=m?n:n.right||0,s.bottom-=m?n:n.bottom||0,s}function C(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=E(n,i,s,r),o={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},l=Object.keys(o).map((function(e){return w({key:e},o[e],{area:(t=o[e],t.width*t.height)});var t})).sort((function(e,t){return t.area-e.area})),c=l.filter((function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight})),u=c.length>0?c[0].key:l[0].key,h=e.split("-")[1];return u+(h?"-"+h:"")}function D(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return T(n,i?A(t):_(t,u(n)),i)}function O(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function P(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function R(e,t,n){n=n.split("-")[0];var i=O(e),r={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(n),a=s?"top":"left",o=s?"left":"top",l=s?"height":"width",c=s?"width":"height";return r[a]=t[a]+t[l]/2-i[l]/2,r[o]=n===o?t[o]-i[c]:t[P(o)],r}function z(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function B(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var i=z(e,(function(e){return e[t]===n}));return e.indexOf(i)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&a(n)&&(t.offsets.popper=S(t.offsets.popper),t.offsets.reference=S(t.offsets.reference),t=n(t,e))})),t}function Y(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=D(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=C(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=R(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=B(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function F(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function N(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],s=r?""+r+n:e;if(void 0!==document.body.style[s])return s}return null}function I(){return this.state.isDestroyed=!0,F(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function H(e){var t=e.ownerDocument;return t?t.defaultView:window}function j(e,t,n,i){var r="BODY"===e.nodeName,s=r?e.ownerDocument.defaultView:e;s.addEventListener(t,n,{passive:!0}),r||j(c(s.parentNode),t,n,i),i.push(s)}function U(e,t,n,i){n.updateBound=i,H(e).addEventListener("resize",n.updateBound,{passive:!0});var r=c(e);return j(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function W(){this.state.eventsEnabled||(this.state=U(this.reference,this.options,this.state,this.scheduleUpdate))}function G(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,H(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function V(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function q(e,t){Object.keys(t).forEach((function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&V(t[n])&&(i="px"),e.style[n]=t[n]+i}))}var X=i&&/Firefox/i.test(navigator.userAgent);function $(e,t,n){var i=z(e,(function(e){return e.name===t})),r=!!i&&e.some((function(e){return e.name===n&&e.enabled&&e.order<i.order}));if(!r){var s="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return r}var J=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],K=J.slice(3);function Z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=K.indexOf(e),i=K.slice(n+1).concat(K.slice(0,n));return t?i.reverse():i}var Q={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets,s=r.reference,a=r.popper,o=-1!==["bottom","top"].indexOf(n),l=o?"left":"top",c=o?"width":"height",u={start:M({},l,s[l]),end:M({},l,s[l]+s[c]-a[c])};e.offsets.popper=w({},a,u[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n,i=t.offset,r=e.placement,s=e.offsets,a=s.popper,o=s.reference,l=r.split("-")[0];return n=V(+i)?[+i,0]:function(e,t,n,i){var r=[0,0],s=-1!==["right","left"].indexOf(i),a=e.split(/(\+|\-)/).map((function(e){return e.trim()})),o=a.indexOf(z(a,(function(e){return-1!==e.search(/,|\s/)})));a[o]&&-1===a[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==o?[a.slice(0,o).concat([a[o].split(l)[0]]),[a[o].split(l)[1]].concat(a.slice(o+1))]:[a];return(c=c.map((function(e,i){var r=(1===i?!s:s)?"height":"width",a=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+r[1],a=r[2];return s?0===a.indexOf("%")?S("%p"===a?n:i)[t]/100*s:"vh"===a||"vw"===a?("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s:s:e}(e,r,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,i){V(n)&&(r[t]+=n*("-"===e[i-1]?-1:1))}))})),r}(i,a,o,l),"left"===l?(a.top+=n[0],a.left-=n[1]):"right"===l?(a.top+=n[0],a.left+=n[1]):"top"===l?(a.left+=n[0],a.top-=n[1]):"bottom"===l&&(a.left+=n[0],a.top+=n[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||p(e.instance.popper);e.instance.reference===n&&(n=p(n));var i=N("transform"),r=e.instance.popper.style,s=r.top,a=r.left,o=r[i];r.top="",r.left="",r[i]="";var l=E(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);r.top=s,r.left=a,r[i]=o,t.boundaries=l;var c=t.priority,u=e.offsets.popper,h={primary:function(e){var n=u[e];return u[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(u[e],l[e])),M({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=u[n];return u[e]>l[e]&&!t.escapeWithReference&&(i=Math.min(u[n],l[e]-("right"===e?u.width:u.height))),M({},n,i)}};return c.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=w({},u,h[t](e))})),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,r=e.placement.split("-")[0],s=Math.floor,a=-1!==["top","bottom"].indexOf(r),o=a?"right":"bottom",l=a?"left":"top",c=a?"width":"height";return n[o]<s(i[l])&&(e.offsets.popper[l]=s(i[l])-n[c]),n[l]>s(i[o])&&(e.offsets.popper[l]=s(i[o])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!$(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],s=e.offsets,a=s.popper,l=s.reference,c=-1!==["left","right"].indexOf(r),u=c?"height":"width",h=c?"Top":"Left",d=h.toLowerCase(),f=c?"left":"top",p=c?"bottom":"right",m=O(i)[u];l[p]-m<a[d]&&(e.offsets.popper[d]-=a[d]-(l[p]-m)),l[d]+m>a[p]&&(e.offsets.popper[d]+=l[d]+m-a[p]),e.offsets.popper=S(e.offsets.popper);var _=l[d]+l[u]/2-m/2,g=o(e.instance.popper),y=parseFloat(g["margin"+h]),v=parseFloat(g["border"+h+"Width"]),b=_-e.offsets.popper[d]-y-v;return b=Math.max(Math.min(a[u]-m,b),0),e.arrowElement=i,e.offsets.arrow=(M(n={},d,Math.round(b)),M(n,f,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(F(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=E(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],r=P(i),s=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case"flip":a=[i,r];break;case"clockwise":a=Z(i);break;case"counterclockwise":a=Z(i,!0);break;default:a=t.behavior}return a.forEach((function(o,l){if(i!==o||a.length===l+1)return e;i=e.placement.split("-")[0],r=P(i);var c=e.offsets.popper,u=e.offsets.reference,h=Math.floor,d="left"===i&&h(c.right)>h(u.left)||"right"===i&&h(c.left)<h(u.right)||"top"===i&&h(c.bottom)>h(u.top)||"bottom"===i&&h(c.top)<h(u.bottom),f=h(c.left)<h(n.left),p=h(c.right)>h(n.right),m=h(c.top)<h(n.top),_=h(c.bottom)>h(n.bottom),g="left"===i&&f||"right"===i&&p||"top"===i&&m||"bottom"===i&&_,y=-1!==["top","bottom"].indexOf(i),v=!!t.flipVariations&&(y&&"start"===s&&f||y&&"end"===s&&p||!y&&"start"===s&&m||!y&&"end"===s&&_),b=!!t.flipVariationsByContent&&(y&&"start"===s&&p||y&&"end"===s&&f||!y&&"start"===s&&_||!y&&"end"===s&&m),x=v||b;(d||g||x)&&(e.flipped=!0,(d||g)&&(i=a[l+1]),x&&(s=function(e){return"end"===e?"start":"start"===e?"end":e}(s)),e.placement=i+(s?"-"+s:""),e.offsets.popper=w({},e.offsets.popper,R(e.instance.popper,e.offsets.reference,e.placement)),e=B(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,r=i.popper,s=i.reference,a=-1!==["left","right"].indexOf(n),o=-1===["top","left"].indexOf(n);return r[a?"left":"top"]=s[n]-(o?r[a?"width":"height"]:0),e.placement=P(t),e.offsets.popper=S(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!$(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=z(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,r=e.offsets.popper,s=z(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a,o,l=void 0!==s?s:t.gpuAcceleration,c=p(e.instance.popper),u=L(c),h={position:r.position},d=function(e,t){var n=e.offsets,i=n.popper,r=n.reference,s=Math.round,a=Math.floor,o=function(e){return e},l=s(r.width),c=s(i.width),u=-1!==["left","right"].indexOf(e.placement),h=-1!==e.placement.indexOf("-"),d=t?u||h||l%2==c%2?s:a:o,f=t?s:o;return{left:d(l%2==1&&c%2==1&&!h&&t?i.left-1:i.left),top:f(i.top),bottom:f(i.bottom),right:d(i.right)}}(e,window.devicePixelRatio<2||!X),f="bottom"===n?"top":"bottom",m="right"===i?"left":"right",_=N("transform");if(o="bottom"===f?"HTML"===c.nodeName?-c.clientHeight+d.bottom:-u.height+d.bottom:d.top,a="right"===m?"HTML"===c.nodeName?-c.clientWidth+d.right:-u.width+d.right:d.left,l&&_)h[_]="translate3d("+a+"px, "+o+"px, 0)",h[f]=0,h[m]=0,h.willChange="transform";else{var g="bottom"===f?-1:1,y="right"===m?-1:1;h[f]=o*g,h[m]=a*y,h.willChange=f+", "+m}var v={"x-placement":e.placement};return e.attributes=w({},v,e.attributes),e.styles=w({},h,e.styles),e.arrowStyles=w({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return q(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&q(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,r){var s=D(r,t,e,n.positionFixed),a=C(n.placement,s,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),q(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},ee=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=s(this.update.bind(this)),this.options=w({},e.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(w({},e.Defaults.modifiers,r.modifiers)).forEach((function(t){i.options.modifiers[t]=w({},e.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return w({name:e},i.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&a(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return x(e,[{key:"update",value:function(){return Y.call(this)}},{key:"destroy",value:function(){return I.call(this)}},{key:"enableEventListeners",value:function(){return W.call(this)}},{key:"disableEventListeners",value:function(){return G.call(this)}}]),e}();ee.Utils=("undefined"!=typeof window?window:n.g).PopperUtils,ee.placements=J,ee.Defaults=Q;const te=ee},2317:(e,t,n)=>{"use strict";function i(){}n.r(t),n.d(t,{AddEquation:()=>F,AddOperation:()=>ue,AdditiveBlending:()=>R,AlphaFormat:()=>Ge,AlwaysDepth:()=>te,AmbientLight:()=>Ao,AnimationClip:()=>Uo,AnimationMixer:()=>ql,AnimationObjectGroup:()=>Gl,AnimationUtils:()=>Io,ArcCurve:()=>Za,ArrayCamera:()=>Zr,ArrowHelper:()=>wc,Audio:()=>Ll,AudioAnalyser:()=>kl,AudioContext:()=>bl,AudioListener:()=>Sl,AudioLoader:()=>xl,AxesHelper:()=>Sc,AxisHelper:()=>Jc,BackSide:()=>L,BasicDepthPacking:()=>jt,BasicShadowMap:()=>x,BinaryTextureLoader:()=>tu,Bone:()=>ls,BooleanKeyframeTrack:()=>Do,BoundingBoxHelper:()=>Kc,Box2:()=>ac,Box3:()=>cn,Box3Helper:()=>xc,BoxBufferGeometry:()=>Zn,BoxGeometry:()=>Kn,BoxHelper:()=>bc,BufferAttribute:()=>Yn,BufferGeometry:()=>Jn,BufferGeometryLoader:()=>Go,ByteType:()=>Re,Cache:()=>Ia,Camera:()=>Cn,CameraHelper:()=>vc,CanvasRenderer:()=>su,CanvasTexture:()=>Vr,CatmullRomCurve3:()=>ro,CineonToneMapping:()=>me,CircleBufferGeometry:()=>Aa,CircleGeometry:()=>ka,ClampToEdgeWrapping:()=>Le,Clock:()=>ic,ClosedSplineCurve3:()=>qc,Color:()=>gn,ColorKeyframeTrack:()=>zo,CompressedTexture:()=>ys,CompressedTextureLoader:()=>Ga,ConeBufferGeometry:()=>Ta,ConeGeometry:()=>La,CubeCamera:()=>wl,CubeGeometry:()=>Kn,CubeReflectionMapping:()=>ge,CubeRefractionMapping:()=>ye,CubeTexture:()=>ki,CubeTextureLoader:()=>Xa,CubeUVReflectionMapping:()=>Me,CubeUVRefractionMapping:()=>we,CubicBezierCurve:()=>lo,CubicBezierCurve3:()=>co,CubicInterpolant:()=>Yo,CullFaceBack:()=>_,CullFaceFront:()=>g,CullFaceFrontBack:()=>y,CullFaceNone:()=>m,Curve:()=>Ja,CurvePath:()=>go,CustomBlending:()=>Y,CylinderBufferGeometry:()=>Sa,CylinderGeometry:()=>wa,Cylindrical:()=>sc,DataTexture:()=>ln,DataTextureLoader:()=>Va,DefaultLoadingManager:()=>ja,DepthFormat:()=>Ke,DepthStencilFormat:()=>Ze,DepthTexture:()=>vs,DirectionalLight:()=>ko,DirectionalLightHelper:()=>yc,DirectionalLightShadow:()=>To,DiscreteInterpolant:()=>No,DodecahedronBufferGeometry:()=>Os,DodecahedronGeometry:()=>Ds,DoubleSide:()=>T,DstAlphaFactor:()=>$,DstColorFactor:()=>K,DynamicBufferAttribute:()=>Yc,EdgesGeometry:()=>Ma,EdgesHelper:()=>Zc,EllipseCurve:()=>Ka,EqualDepth:()=>re,EquirectangularReflectionMapping:()=>ve,EquirectangularRefractionMapping:()=>be,Euler:()=>Mn,EventDispatcher:()=>i,ExtrudeBufferGeometry:()=>ua,ExtrudeGeometry:()=>ca,Face3:()=>On,Face4:()=>Lc,FaceColors:()=>C,FaceNormalsHelper:()=>gc,FileLoader:()=>Wa,FlatShading:()=>k,Float32Attribute:()=>Gc,Float32BufferAttribute:()=>Gn,Float64Attribute:()=>Vc,Float64BufferAttribute:()=>Vn,FloatType:()=>Ne,Fog:()=>ns,FogExp2:()=>ts,Font:()=>ol,FontLoader:()=>cl,FrontFaceDirectionCCW:()=>b,FrontFaceDirectionCW:()=>v,FrontSide:()=>S,Frustum:()=>dn,GammaEncoding:()=>Bt,Geometry:()=>Bn,GeometryUtils:()=>nu,GreaterDepth:()=>ae,GreaterEqualDepth:()=>se,GridHelper:()=>mc,Group:()=>_s,HalfFloatType:()=>Ie,HemisphereLight:()=>xo,HemisphereLightHelper:()=>pc,IcosahedronBufferGeometry:()=>Cs,IcosahedronGeometry:()=>Es,ImageBitmapLoader:()=>sl,ImageLoader:()=>qa,ImageUtils:()=>iu,ImmediateRenderObject:()=>oc,InstancedBufferAttribute:()=>Ql,InstancedBufferGeometry:()=>$l,InstancedInterleavedBuffer:()=>Zl,Int16Attribute:()=>Hc,Int16BufferAttribute:()=>Hn,Int32Attribute:()=>Uc,Int32BufferAttribute:()=>Un,Int8Attribute:()=>Fc,Int8BufferAttribute:()=>Fn,IntType:()=>Ye,InterleavedBuffer:()=>Kl,InterleavedBufferAttribute:()=>Jl,Interpolant:()=>Oo,InterpolateDiscrete:()=>Lt,InterpolateLinear:()=>Tt,InterpolateSmooth:()=>kt,JSONLoader:()=>Qo,KeyframeTrack:()=>Ho,LOD:()=>as,LatheBufferGeometry:()=>ya,LatheGeometry:()=>ga,Layers:()=>wn,LensFlare:()=>ou,LessDepth:()=>ne,LessEqualDepth:()=>ie,Light:()=>bo,LightShadow:()=>Mo,Line:()=>hs,Line3:()=>fi,LineBasicMaterial:()=>us,LineCurve:()=>uo,LineCurve3:()=>ho,LineDashedMaterial:()=>Fa,LineLoop:()=>fs,LinePieces:()=>kc,LineSegments:()=>ds,LineStrip:()=>Tc,LinearEncoding:()=>Rt,LinearFilter:()=>Ce,LinearInterpolant:()=>Fo,LinearMipMapLinearFilter:()=>Oe,LinearMipMapNearestFilter:()=>De,LinearToneMapping:()=>de,Loader:()=>Ko,LoaderUtils:()=>Zo,LoadingManager:()=>Ha,LogLuvEncoding:()=>Ft,LoopOnce:()=>Mt,LoopPingPong:()=>St,LoopRepeat:()=>wt,LuminanceAlphaFormat:()=>$e,LuminanceFormat:()=>Xe,MOUSE:()=>p,Material:()=>ci,MaterialLoader:()=>Wo,Math:()=>Wt,Matrix3:()=>$t,Matrix4:()=>Vt,MaxEquation:()=>j,Mesh:()=>mi,MeshBasicMaterial:()=>ui,MeshDepthMaterial:()=>Ur,MeshDistanceMaterial:()=>Wr,MeshFaceMaterial:()=>Ac,MeshLambertMaterial:()=>Ya,MeshNormalMaterial:()=>Ba,MeshPhongMaterial:()=>Ra,MeshPhysicalMaterial:()=>Pa,MeshStandardMaterial:()=>Oa,MeshToonMaterial:()=>za,MinEquation:()=>H,MirroredRepeatWrapping:()=>Te,MixOperation:()=>ce,MultiMaterial:()=>Ec,MultiplyBlending:()=>B,MultiplyOperation:()=>le,NearestFilter:()=>ke,NearestMipMapLinearFilter:()=>Ee,NearestMipMapNearestFilter:()=>Ae,NeverDepth:()=>ee,NoBlending:()=>O,NoColors:()=>E,NoToneMapping:()=>he,NormalBlending:()=>P,NotEqualDepth:()=>oe,NumberKeyframeTrack:()=>Bo,Object3D:()=>En,ObjectLoader:()=>el,OctahedronBufferGeometry:()=>As,OctahedronGeometry:()=>ks,OneFactor:()=>W,OneMinusDstAlphaFactor:()=>J,OneMinusDstColorFactor:()=>Z,OneMinusSrcAlphaFactor:()=>X,OneMinusSrcColorFactor:()=>V,OrthographicCamera:()=>Dn,PCFShadowMap:()=>M,PCFSoftShadowMap:()=>w,ParametricBufferGeometry:()=>Ms,ParametricGeometry:()=>xs,Particle:()=>Dc,ParticleBasicMaterial:()=>Rc,ParticleSystem:()=>Oc,ParticleSystemMaterial:()=>zc,Path:()=>yo,PerspectiveCamera:()=>Kr,Plane:()=>hn,PlaneBufferGeometry:()=>ei,PlaneGeometry:()=>Qn,PlaneHelper:()=>Mc,PointCloud:()=>Cc,PointCloudMaterial:()=>Pc,PointLight:()=>Lo,PointLightHelper:()=>dc,Points:()=>ms,PointsMaterial:()=>ps,PolarGridHelper:()=>_c,PolyhedronBufferGeometry:()=>Ss,PolyhedronGeometry:()=>ws,PositionalAudio:()=>Tl,Projector:()=>ru,PropertyBinding:()=>Wl,PropertyMixer:()=>Al,QuadraticBezierCurve:()=>fo,QuadraticBezierCurve3:()=>po,Quaternion:()=>qt,QuaternionKeyframeTrack:()=>Ro,QuaternionLinearInterpolant:()=>Po,REVISION:()=>f,RGBADepthPacking:()=>Ut,RGBAFormat:()=>qe,RGBA_ASTC_10x10_Format:()=>vt,RGBA_ASTC_10x5_Format:()=>_t,RGBA_ASTC_10x6_Format:()=>gt,RGBA_ASTC_10x8_Format:()=>yt,RGBA_ASTC_12x10_Format:()=>bt,RGBA_ASTC_12x12_Format:()=>xt,RGBA_ASTC_4x4_Format:()=>lt,RGBA_ASTC_5x4_Format:()=>ct,RGBA_ASTC_5x5_Format:()=>ut,RGBA_ASTC_6x5_Format:()=>ht,RGBA_ASTC_6x6_Format:()=>dt,RGBA_ASTC_8x5_Format:()=>ft,RGBA_ASTC_8x6_Format:()=>pt,RGBA_ASTC_8x8_Format:()=>mt,RGBA_PVRTC_2BPPV1_Format:()=>at,RGBA_PVRTC_4BPPV1_Format:()=>st,RGBA_S3TC_DXT1_Format:()=>et,RGBA_S3TC_DXT3_Format:()=>tt,RGBA_S3TC_DXT5_Format:()=>nt,RGBDEncoding:()=>Ht,RGBEEncoding:()=>Yt,RGBEFormat:()=>Je,RGBFormat:()=>Ve,RGBM16Encoding:()=>It,RGBM7Encoding:()=>Nt,RGB_ETC1_Format:()=>ot,RGB_PVRTC_2BPPV1_Format:()=>rt,RGB_PVRTC_4BPPV1_Format:()=>it,RGB_S3TC_DXT1_Format:()=>Qe,RawShaderMaterial:()=>Da,Ray:()=>di,Raycaster:()=>ec,RectAreaLight:()=>Eo,RectAreaLightHelper:()=>fc,ReinhardToneMapping:()=>fe,RepeatWrapping:()=>Se,ReverseSubtractEquation:()=>I,RingBufferGeometry:()=>_a,RingGeometry:()=>ma,Scene:()=>is,SceneUtils:()=>au,ShaderChunk:()=>pn,ShaderLib:()=>bn,ShaderMaterial:()=>hi,ShadowMaterial:()=>Ca,Shape:()=>vo,ShapeBufferGeometry:()=>ba,ShapeGeometry:()=>va,ShapePath:()=>al,ShapeUtils:()=>aa,ShortType:()=>ze,Skeleton:()=>os,SkeletonHelper:()=>hc,SkinnedMesh:()=>cs,SmoothShading:()=>A,Sphere:()=>un,SphereBufferGeometry:()=>pa,SphereGeometry:()=>fa,Spherical:()=>rc,SphericalReflectionMapping:()=>xe,Spline:()=>$c,SplineCurve:()=>mo,SplineCurve3:()=>Xc,SpotLight:()=>So,SpotLightHelper:()=>cc,SpotLightShadow:()=>wo,Sprite:()=>ss,SpriteMaterial:()=>rs,SrcAlphaFactor:()=>q,SrcAlphaSaturateFactor:()=>Q,SrcColorFactor:()=>G,StereoCamera:()=>Ml,StringKeyframeTrack:()=>Co,SubtractEquation:()=>N,SubtractiveBlending:()=>z,TetrahedronBufferGeometry:()=>Ts,TetrahedronGeometry:()=>Ls,TextBufferGeometry:()=>da,TextGeometry:()=>ha,Texture:()=>rn,TextureLoader:()=>$a,TorusBufferGeometry:()=>Fs,TorusGeometry:()=>Ys,TorusKnotBufferGeometry:()=>Bs,TorusKnotGeometry:()=>zs,Triangle:()=>pi,TriangleFanDrawMode:()=>Pt,TriangleStripDrawMode:()=>Ot,TrianglesDrawMode:()=>Dt,TubeBufferGeometry:()=>Rs,TubeGeometry:()=>Ps,UVMapping:()=>_e,Uint16Attribute:()=>jc,Uint16BufferAttribute:()=>jn,Uint32Attribute:()=>Wc,Uint32BufferAttribute:()=>Wn,Uint8Attribute:()=>Nc,Uint8BufferAttribute:()=>Nn,Uint8ClampedAttribute:()=>Ic,Uint8ClampedBufferAttribute:()=>In,Uncharted2ToneMapping:()=>pe,Uniform:()=>Xl,UniformsLib:()=>vn,UniformsUtils:()=>mn,UnsignedByteType:()=>Pe,UnsignedInt248Type:()=>We,UnsignedIntType:()=>Fe,UnsignedShort4444Type:()=>He,UnsignedShort5551Type:()=>je,UnsignedShort565Type:()=>Ue,UnsignedShortType:()=>Be,Vector2:()=>Gt,Vector3:()=>Xt,Vector4:()=>sn,VectorKeyframeTrack:()=>jo,Vertex:()=>Bc,VertexColors:()=>D,VertexNormalsHelper:()=>lc,VideoTexture:()=>gs,WebGLRenderTarget:()=>an,WebGLRenderTargetCube:()=>on,WebGLRenderer:()=>es,WebGLUtils:()=>Jr,WireframeGeometry:()=>bs,WireframeHelper:()=>Qc,WrapAroundEnding:()=>Ct,XHRLoader:()=>eu,ZeroCurvatureEnding:()=>At,ZeroFactor:()=>U,ZeroSlopeEnding:()=>Et,sRGBEncoding:()=>zt}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var r,s,a,o,l,c,u,h,d,f="91",p={LEFT:0,MIDDLE:1,RIGHT:2},m=0,_=1,g=2,y=3,v=0,b=1,x=0,M=1,w=2,S=0,L=1,T=2,k=1,A=2,E=0,C=1,D=2,O=0,P=1,R=2,z=3,B=4,Y=5,F=100,N=101,I=102,H=103,j=104,U=200,W=201,G=202,V=203,q=204,X=205,$=206,J=207,K=208,Z=209,Q=210,ee=0,te=1,ne=2,ie=3,re=4,se=5,ae=6,oe=7,le=0,ce=1,ue=2,he=0,de=1,fe=2,pe=3,me=4,_e=300,ge=301,ye=302,ve=303,be=304,xe=305,Me=306,we=307,Se=1e3,Le=1001,Te=1002,ke=1003,Ae=1004,Ee=1005,Ce=1006,De=1007,Oe=1008,Pe=1009,Re=1010,ze=1011,Be=1012,Ye=1013,Fe=1014,Ne=1015,Ie=1016,He=1017,je=1018,Ue=1019,We=1020,Ge=1021,Ve=1022,qe=1023,Xe=1024,$e=1025,Je=qe,Ke=1026,Ze=1027,Qe=33776,et=33777,tt=33778,nt=33779,it=35840,rt=35841,st=35842,at=35843,ot=36196,lt=37808,ct=37809,ut=37810,ht=37811,dt=37812,ft=37813,pt=37814,mt=37815,_t=37816,gt=37817,yt=37818,vt=37819,bt=37820,xt=37821,Mt=2200,wt=2201,St=2202,Lt=2300,Tt=2301,kt=2302,At=2400,Et=2401,Ct=2402,Dt=0,Ot=1,Pt=2,Rt=3e3,zt=3001,Bt=3007,Yt=3002,Ft=3003,Nt=3004,It=3005,Ht=3006,jt=3200,Ut=3201,Wt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Wt.DEG2RAD},radToDeg:function(e){return e*Wt.RAD2DEG},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Gt(e,t){this.x=e||0,this.y=t||0}function Vt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function qt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function Xt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function $t(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Gt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Gt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(h=new Gt,d=new Gt,function(e,t){return h.set(e,e),d.set(t,t),this.clamp(h,d)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}}),Object.assign(Vt.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,s,a,o,l,c,u,h,d,f,p,m){var _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=i,_[1]=r,_[5]=s,_[9]=a,_[13]=o,_[2]=l,_[6]=c,_[10]=u,_[14]=h,_[3]=d,_[7]=f,_[11]=p,_[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Vt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(c=new Xt,function(e){var t=this.elements,n=e.elements,i=1/c.setFromMatrixColumn(e,0).length(),r=1/c.setFromMatrixColumn(e,1).length(),s=1/c.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var h=s*c,d=s*u,f=a*c,p=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-a*o,t[2]=p-h*l,t[6]=f+d*l,t[10]=s*o}else if("YXZ"===e.order){var m=o*c,_=o*u,g=l*c,y=l*u;t[0]=m+y*a,t[4]=g*a-_,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=_*a-g,t[6]=y+m*a,t[10]=s*o}else if("ZXY"===e.order)m=o*c,_=o*u,g=l*c,y=l*u,t[0]=m-y*a,t[4]=-s*u,t[8]=g+_*a,t[1]=_+g*a,t[5]=s*c,t[9]=y-m*a,t[2]=-s*l,t[6]=a,t[10]=s*o;else if("ZYX"===e.order)h=s*c,d=s*u,f=a*c,p=a*u,t[0]=o*c,t[4]=f*l-d,t[8]=h*l+p,t[1]=o*u,t[5]=p*l+h,t[9]=d*l-f,t[2]=-l,t[6]=a*o,t[10]=s*o;else if("YZX"===e.order){var v=s*o,b=s*l,x=a*o,M=a*l;t[0]=o*c,t[4]=M-v*u,t[8]=x*u+b,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=b*u+x,t[10]=v-M*u}else"XZY"===e.order&&(v=s*o,b=s*l,x=a*o,M=a*l,t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=v*u+M,t[5]=s*c,t[9]=b*u-x,t[2]=x*u-b,t[6]=a*c,t[10]=M*u+v);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,s=e._w,a=n+n,o=i+i,l=r+r,c=n*a,u=n*o,h=n*l,d=i*o,f=i*l,p=r*l,m=s*a,_=s*o,g=s*l;return t[0]=1-(d+p),t[4]=u-g,t[8]=h+_,t[1]=u+g,t[5]=1-(c+p),t[9]=f-m,t[2]=h-_,t[6]=f+m,t[10]=1-(c+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(a=new Xt,o=new Xt,l=new Xt,function(e,t,n){var i=this.elements;return l.subVectors(e,t),0===l.lengthSq()&&(l.z=1),l.normalize(),a.crossVectors(n,l),0===a.lengthSq()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),a.crossVectors(n,l)),a.normalize(),o.crossVectors(l,a),i[0]=a.x,i[4]=o.x,i[8]=l.x,i[1]=a.y,i[5]=o.y,i[9]=l.y,i[2]=a.z,i[6]=o.z,i[10]=l.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],_=n[14],g=n[3],y=n[7],v=n[11],b=n[15],x=i[0],M=i[4],w=i[8],S=i[12],L=i[1],T=i[5],k=i[9],A=i[13],E=i[2],C=i[6],D=i[10],O=i[14],P=i[3],R=i[7],z=i[11],B=i[15];return r[0]=s*x+a*L+o*E+l*P,r[4]=s*M+a*T+o*C+l*R,r[8]=s*w+a*k+o*D+l*z,r[12]=s*S+a*A+o*O+l*B,r[1]=c*x+u*L+h*E+d*P,r[5]=c*M+u*T+h*C+d*R,r[9]=c*w+u*k+h*D+d*z,r[13]=c*S+u*A+h*O+d*B,r[2]=f*x+p*L+m*E+_*P,r[6]=f*M+p*T+m*C+_*R,r[10]=f*w+p*k+m*D+_*z,r[14]=f*S+p*A+m*O+_*B,r[3]=g*x+y*L+v*E+b*P,r[7]=g*M+y*T+v*C+b*R,r[11]=g*w+y*k+v*D+b*z,r[15]=g*S+y*A+v*O+b*B,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Xt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*o*u-i*l*u-r*a*h+n*l*h+i*a*d-n*o*d)+e[7]*(+t*o*d-t*l*h+r*s*h-i*s*d+i*l*c-r*o*c)+e[11]*(+t*l*u-t*a*d-r*s*u+n*s*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*u+t*a*h+i*s*u-n*s*h+n*o*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],_=i[12],g=i[13],y=i[14],v=i[15],b=f*y*h-g*p*h+g*u*m-c*y*m-f*u*v+c*p*v,x=_*p*h-d*y*h-_*u*m+l*y*m+d*u*v-l*p*v,M=d*g*h-_*f*h+_*c*m-l*g*m-d*c*v+l*f*v,w=_*f*u-d*g*u-_*c*p+l*g*p+d*c*y-l*f*y,S=r*b+s*x+a*M+o*w;if(0===S){var L="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(L);return console.warn(L),this.identity()}var T=1/S;return n[0]=b*T,n[1]=(g*p*o-f*y*o-g*a*m+s*y*m+f*a*v-s*p*v)*T,n[2]=(c*y*o-g*u*o+g*a*h-s*y*h-c*a*v+s*u*v)*T,n[3]=(f*u*o-c*p*o-f*a*h+s*p*h+c*a*m-s*u*m)*T,n[4]=x*T,n[5]=(d*y*o-_*p*o+_*a*m-r*y*m-d*a*v+r*p*v)*T,n[6]=(_*u*o-l*y*o-_*a*h+r*y*h+l*a*v-r*u*v)*T,n[7]=(l*p*o-d*u*o+d*a*h-r*p*h-l*a*m+r*u*m)*T,n[8]=M*T,n[9]=(_*f*o-d*g*o-_*s*m+r*g*m+d*s*v-r*f*v)*T,n[10]=(l*g*o-_*c*o+_*s*h-r*g*h-l*s*v+r*c*v)*T,n[11]=(d*c*o-l*f*o-d*s*h+r*f*h+l*s*m-r*c*m)*T,n[12]=w*T,n[13]=(d*g*a-_*f*a+_*s*p-r*g*p-d*s*y+r*f*y)*T,n[14]=(_*c*a-l*g*a-_*s*u+r*g*u+l*s*y-r*c*y)*T,n[15]=(l*f*a-d*c*a+d*s*u-r*f*u-l*s*p+r*c*p)*T,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:(r=new Xt,s=new Vt,function(e,t,n){var i=this.elements,a=r.set(i[0],i[1],i[2]).length(),o=r.set(i[4],i[5],i[6]).length(),l=r.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],s.copy(this);var c=1/a,u=1/o,h=1/l;return s.elements[0]*=c,s.elements[1]*=c,s.elements[2]*=c,s.elements[4]*=u,s.elements[5]*=u,s.elements[6]*=u,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,t.setFromRotationMatrix(s),n.x=a,n.y=o,n.z=l,this}),makePerspective:function(e,t,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),h=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,i,r,s){var a=this.elements,o=1/(t-e),l=1/(n-i),c=1/(s-r),u=(t+e)*o,h=(n+i)*l,d=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(qt,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,s,a){var o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],h=r[s+0],d=r[s+1],f=r[s+2],p=r[s+3];if(u!==p||o!==h||l!==d||c!==f){var m=1-a,_=o*h+l*d+c*f+u*p,g=_>=0?1:-1,y=1-_*_;if(y>Number.EPSILON){var v=Math.sqrt(y),b=Math.atan2(v,_*g);m=Math.sin(m*b)/v,a=Math.sin(a*b)/v}var x=a*g;if(o=o*m+h*x,l=l*m+d*x,c=c*m+f*x,u=u*m+p*x,m===1-a){var M=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=M,l*=M,c*=M,u*=M}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(qt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(qt.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,s=e.order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=o(n/2),d=o(i/2),f=o(r/2);return"XYZ"===s?(this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f):"YXZ"===s?(this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f):"ZXY"===s?(this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f):"ZYX"===s?(this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f):"YZX"===s?(this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f):"XZY"===s&&(this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],s=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],h=n[10],d=i+o+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-l)*t,this._y=(s-c)*t,this._z=(a-r)*t):i>o&&i>h?(t=2*Math.sqrt(1+i-o-h),this._w=(u-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(s+c)/t):o>h?(t=2*Math.sqrt(1+o-i-h),this._w=(s-c)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+h-i-o),this._w=(a-r)/t,this._x=(s+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Xt;return function(n,i){return void 0===t&&(t=new Xt),(e=n.dot(i)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,s=this._w,a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var o=Math.sqrt(1-a*a);if(Math.abs(o)<.001)return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(o,a),c=Math.sin((1-t)*l)/o,u=Math.sin(t*l)/o;return this._w=s*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Xt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(u=new qt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(u.setFromEuler(e))}),applyAxisAngle:function(){var e=new qt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*n,c=o*n+a*t-r*i,u=o*i+r*n-s*t,h=-r*t-s*n-a*i;return this.x=l*o+h*-r+c*-a-u*-s,this.y=c*o+h*-s+u*-r-l*-a,this.z=u*o+h*-a+l*-s-c*-r,this},project:function(){var e=new Vt;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Vt;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Xt,t=new Xt;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Xt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Xt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Wt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign($t.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,s,a,o,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Xt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],_=i[6],g=i[1],y=i[4],v=i[7],b=i[2],x=i[5],M=i[8];return r[0]=s*p+a*g+o*b,r[3]=s*m+a*y+o*x,r[6]=s*_+a*v+o*M,r[1]=l*p+c*g+u*b,r[4]=l*m+c*y+u*x,r[7]=l*_+c*v+u*M,r[2]=h*p+d*g+f*b,r[5]=h*m+d*y+f*x,r[8]=h*_+d*v+f*M,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],f=d*l-c*h,p=c*u-d*o,m=h*o-l*u,_=r*f+s*p+a*m;if(0===_){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/_;return i[0]=f*y,i[1]=(a*h-d*s)*y,i[2]=(c*s-a*l)*y,i[3]=p*y,i[4]=(d*r-a*u)*y,i[5]=(a*o-c*r)*y,i[6]=m*y,i[7]=(s*u-h*r)*y,i[8]=(l*r-s*o)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,s,a){var o=Math.cos(r),l=Math.sin(r);this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],s=i[3],a=i[6],o=i[1],l=i[4],c=i[7];return i[0]=t*r+n*o,i[3]=t*s+n*l,i[6]=t*a+n*c,i[1]=-n*r+t*o,i[4]=-n*s+t*l,i[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Jt,Kt,Zt,Qt,en,tn,nn=0;function rn(e,t,n,i,r,s,a,o,l,c){Object.defineProperty(this,"id",{value:nn++}),this.uuid=Wt.generateUUID(),this.name="",this.image=void 0!==e?e:rn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:rn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Le,this.wrapT=void 0!==i?i:Le,this.magFilter=void 0!==r?r:Ce,this.minFilter=void 0!==s?s:Oe,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:qe,this.type=void 0!==o?o:Pe,this.offset=new Gt(0,0),this.repeat=new Gt(1,1),this.center=new Gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Rt,this.version=0,this.onUpdate=null}function sn(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function an(e,t,n){this.width=e,this.height=t,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Ce),this.texture=new rn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function on(e,t,n){an.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function ln(e,t,n,i,r,s,a,o,l,c,u,h){rn.call(this,null,s,a,o,l,c,i,r,u,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:ke,this.minFilter=void 0!==c?c:ke,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function cn(e,t){this.min=void 0!==e?e:new Xt(1/0,1/0,1/0),this.max=void 0!==t?t:new Xt(-1/0,-1/0,-1/0)}function un(e,t){this.center=void 0!==e?e:new Xt,this.radius=void 0!==t?t:0}function hn(e,t){this.normal=void 0!==e?e:new Xt(1,0,0),this.constant=void 0!==t?t:0}function dn(e,t,n,i,r,s){this.planes=[void 0!==e?e:new hn,void 0!==t?t:new hn,void 0!==n?n:new hn,void 0!==i?i:new hn,void 0!==r?r:new hn,void 0!==s?s:new hn]}rn.DEFAULT_IMAGE=void 0,rn.DEFAULT_MAPPING=_e,rn.prototype=Object.assign(Object.create(i.prototype),{constructor:rn,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Wt.generateUUID()),t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===_e){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Se:e.x=e.x-Math.floor(e.x);break;case Le:e.x=e.x<0?0:1;break;case Te:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Se:e.y=e.y-Math.floor(e.y);break;case Le:e.y=e.y<0?0:1;break;case Te:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(rn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(sn.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],_=o[10];if(Math.abs(c-h)<s&&Math.abs(u-p)<s&&Math.abs(f-m)<s){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+_-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,v=(_+1)/2,b=(c+h)/4,x=(u+p)/4,M=(f+m)/4;return g>y&&g>v?g<s?(n=0,i=.707106781,r=.707106781):(i=b/(n=Math.sqrt(g)),r=x/n):y>v?y<s?(n=.707106781,i=0,r=.707106781):(n=b/(i=Math.sqrt(y)),r=M/i):v<s?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(v)),i=M/r),this.set(n,i,r,t),this}var w=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(w)<.001&&(w=1),this.x=(m-f)/w,this.y=(u-p)/w,this.z=(h-c)/w,this.w=Math.acos((l+d+_-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new sn,t=new sn),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),an.prototype=Object.assign(Object.create(i.prototype),{constructor:an,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),on.prototype=Object.create(an.prototype),on.prototype.constructor=on,on.prototype.isWebGLRenderTargetCube=!0,ln.prototype=Object.create(rn.prototype),ln.prototype.constructor=ln,ln.prototype.isDataTexture=!0,Object.assign(cn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,l=e.length;o<l;o+=3){var c=e[o],u=e[o+1],h=e[o+2];c<t&&(t=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>s&&(s=u),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,s,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,l=e.count;o<l;o++){var c=e.getX(o),u=e.getY(o),h=e.getZ(o);c<t&&(t=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>s&&(s=u),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,s,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Xt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Xt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Xt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,i=new Xt;function r(r){var s=r.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(t=0,n=a.length;t<n;t++)i.copy(a[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(s.isBufferGeometry){var o=s.attributes.position;if(void 0!==o)for(t=0,n=o.count;t<n;t++)i.fromBufferAttribute(o,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Xt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Kt=new Xt,function(e){return this.clampPoint(e.center,Kt),Kt.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new Xt,t=new Xt,n=new Xt,i=new Xt,r=new Xt,s=new Xt,a=new Xt,o=new Xt,l=new Xt,c=new Xt;function u(i){var r,s;for(r=0,s=i.length-3;r<=s;r+=3){a.fromArray(i,r);var o=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=e.dot(a),u=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>o)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(o),l.subVectors(this.max,o),e.subVectors(a.a,o),t.subVectors(a.b,o),n.subVectors(a.c,o),i.subVectors(t,e),r.subVectors(n,t),s.subVectors(e,n);var h=[0,-i.z,i.y,0,-r.z,r.y,0,-s.z,s.y,i.z,0,-i.x,r.z,0,-r.x,s.z,0,-s.x,-i.y,i.x,0,-r.y,r.x,0,-s.y,s.x,0];return!!u(h)&&!!u(h=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,r),u(h=[c.x,c.y,c.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Xt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Xt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Xt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new un),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Jt=[new Xt,new Xt,new Xt,new Xt,new Xt,new Xt,new Xt,new Xt],function(e){return this.isEmpty()||(Jt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jt)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(un.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Zt=new cn,function(e,t){var n=this.center;void 0!==t?n.copy(t):Zt.setFromPoints(e).getCenter(n);for(var i=0,r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Xt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new cn),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(hn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Xt,t=new Xt;return function(n,i,r){var s=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Xt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Xt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Xt);var i=t.delta(e),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?void 0:n.copy(i).multiplyScalar(s).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Xt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Xt,t=new $t;return function(n,i){var r=i||t.getNormalMatrix(n),s=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(dn.prototype,{set:function(e,t,n,i,r,s){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],_=n[13],g=n[14],y=n[15];return t[0].setComponents(a-i,u-o,p-h,y-m).normalize(),t[1].setComponents(a+i,u+o,p+h,y+m).normalize(),t[2].setComponents(a+r,u+l,p+d,y+_).normalize(),t[3].setComponents(a-r,u-l,p-d,y-_).normalize(),t[4].setComponents(a-s,u-c,p-f,y-g).normalize(),t[5].setComponents(a+s,u+c,p+f,y+g).normalize(),this},intersectsObject:(tn=new un,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),tn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(tn)}),intersectsSprite:function(){var e=new un;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:(Qt=new Xt,en=new Xt,function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];Qt.x=i.normal.x>0?e.min.x:e.max.x,en.x=i.normal.x>0?e.max.x:e.min.x,Qt.y=i.normal.y>0?e.min.y:e.max.y,en.y=i.normal.y>0?e.max.y:e.min.y,Qt.z=i.normal.z>0?e.min.z:e.max.z,en.z=i.normal.z>0?e.max.z:e.min.z;var r=i.distanceToPoint(Qt),s=i.distanceToPoint(en);if(r<0&&s<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var fn,pn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},mn={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}},_n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(gn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=Wt.euclideanModulo(t,1),n=Wt.clamp(n,0,1),i=Wt.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;this.r=e(s,r,t+1/3),this.g=e(s,r,t),this.b=e(s,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(a,o,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,u=(c=n[1]).length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(c=_n[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,s=this.b,a=Math.max(i,r,s),o=Math.min(i,r,s),l=(o+a)/2;if(o===a)t=0,n=0;else{var c=a-o;switch(n=l<=.5?c/(a+o):c/(2-a-o),a){case i:t=(r-s)/c+(r<s?6:0);break;case r:t=(s-i)/c+2;break;case s:t=(i-r)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(fn={},function(e,t,n){return this.getHSL(fn),fn.h+=e,fn.s+=t,fn.l+=n,this.setHSL(fn.h,fn.s,fn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var yn,vn={common:{diffuse:{value:new gn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new $t},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new gn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new $t}}},bn={basic:{uniforms:mn.merge([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.fog]),vertexShader:pn.meshbasic_vert,fragmentShader:pn.meshbasic_frag},lambert:{uniforms:mn.merge([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.fog,vn.lights,{emissive:{value:new gn(0)}}]),vertexShader:pn.meshlambert_vert,fragmentShader:pn.meshlambert_frag},phong:{uniforms:mn.merge([vn.common,vn.specularmap,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.gradientmap,vn.fog,vn.lights,{emissive:{value:new gn(0)},specular:{value:new gn(1118481)},shininess:{value:30}}]),vertexShader:pn.meshphong_vert,fragmentShader:pn.meshphong_frag},standard:{uniforms:mn.merge([vn.common,vn.envmap,vn.aomap,vn.lightmap,vn.emissivemap,vn.bumpmap,vn.normalmap,vn.displacementmap,vn.roughnessmap,vn.metalnessmap,vn.fog,vn.lights,{emissive:{value:new gn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},points:{uniforms:mn.merge([vn.points,vn.fog]),vertexShader:pn.points_vert,fragmentShader:pn.points_frag},dashed:{uniforms:mn.merge([vn.common,vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pn.linedashed_vert,fragmentShader:pn.linedashed_frag},depth:{uniforms:mn.merge([vn.common,vn.displacementmap]),vertexShader:pn.depth_vert,fragmentShader:pn.depth_frag},normal:{uniforms:mn.merge([vn.common,vn.bumpmap,vn.normalmap,vn.displacementmap,{opacity:{value:1}}]),vertexShader:pn.normal_vert,fragmentShader:pn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pn.cube_vert,fragmentShader:pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pn.equirect_vert,fragmentShader:pn.equirect_frag},distanceRGBA:{uniforms:mn.merge([vn.common,vn.displacementmap,{referencePosition:{value:new Xt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pn.distanceRGBA_vert,fragmentShader:pn.distanceRGBA_frag},shadow:{uniforms:mn.merge([vn.lights,vn.fog,{color:{value:new gn(0)},opacity:{value:1}}]),vertexShader:pn.shadow_vert,fragmentShader:pn.shadow_frag}};function xn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,s=e.createBuffer();e.bindBuffer(n,s),e.bufferData(n,i,r),t.onUploadCallback();var a=e.FLOAT;return i instanceof Float32Array?a=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=e.UNSIGNED_SHORT:i instanceof Int16Array?a=e.SHORT:i instanceof Uint32Array?a=e.UNSIGNED_INT:i instanceof Int32Array?a=e.INT:i instanceof Int8Array?a=e.BYTE:i instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(function(t,n,i){var r=n.array,s=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===s.count?e.bufferSubData(i,0,r):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,s.offset*r.BYTES_PER_ELEMENT,r.subarray(s.offset,s.offset+s.count)),s.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function Mn(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||Mn.DefaultOrder}function wn(){this.mask=1}bn.physical={uniforms:mn.merge([bn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},Mn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Mn.DefaultOrder="XYZ",Object.defineProperties(Mn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Mn.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Wt.clamp,r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,f))):"XZY"===t?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Vt;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(yn=new qt,function(e){return yn.setFromEuler(this),this.setFromQuaternion(yn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Xt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(wn.prototype,{set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return!!(this.mask&e.mask)}});var Sn,Ln,Tn,kn,An=0;function En(){Object.defineProperty(this,"id",{value:An++}),this.uuid=Wt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=En.DefaultUp.clone();var e=new Xt,t=new Mn,n=new qt,i=new Xt(1,1,1);t.onChange((function(){n.setFromEuler(t,!1)})),n.onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new Vt},normalMatrix:{value:new $t}}),this.matrix=new Vt,this.matrixWorld=new Vt,this.matrixAutoUpdate=En.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new wn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Cn(){En.call(this),this.type="Camera",this.matrixWorldInverse=new Vt,this.projectionMatrix=new Vt}function Dn(e,t,n,i,r,s){Cn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function On(e,t,n,i,r,s){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Xt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new gn,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}En.DefaultUp=new Xt(0,1,0),En.DefaultMatrixAutoUpdate=!0,En.prototype=Object.assign(Object.create(i.prototype),{constructor:En,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(kn=new qt,function(e,t){return kn.setFromAxisAngle(e,t),this.quaternion.multiply(kn),this}),rotateOnWorldAxis:function(){var e=new qt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Xt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Xt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Xt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Xt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Xt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Xt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Xt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Tn=new Vt,function(e){return e.applyMatrix4(Tn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new Vt,t=new Xt;return function(n,i,r){n.isVector3?t.copy(n):t.set(n,i,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Xt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Sn=new Xt,Ln=new Xt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new qt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Sn,e,Ln),e}),getWorldScale:function(){var e=new Xt,t=new qt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Xt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new qt;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Xt),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.matrix=this.matrix.toArray(),void 0!==this.geometry){i.geometry=r(e.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var o=0,l=a.length;o<l;o++){var c=a[o];r(e.shapes,c)}else r(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(o=0,l=this.material.length;o<l;o++)u.push(r(e.materials,this.material[o]));i.material=u}else i.material=r(e.materials,this.material);if(this.children.length>0)for(i.children=[],o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object);if(t){var h=m(e.geometries),d=m(e.materials),f=m(e.textures),p=m(e.images);a=m(e.shapes),h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),Cn.prototype=Object.assign(Object.create(En.prototype),{constructor:Cn,isCamera:!0,copy:function(e,t){return En.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new qt;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Xt),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){En.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Dn.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Dn,isOrthographicCamera:!0,copy:function(e,t){return Cn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;s=(r+=u*(this.view.offsetX/l))+u*(this.view.width/l),o=(a-=h*(this.view.offsetY/c))-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far)},toJSON:function(e){var t=En.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(On.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Pn,Rn,zn=0;function Bn(){Object.defineProperty(this,"id",{value:zn+=2}),this.uuid=Wt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Yn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Fn(e,t,n){Yn.call(this,new Int8Array(e),t,n)}function Nn(e,t,n){Yn.call(this,new Uint8Array(e),t,n)}function In(e,t,n){Yn.call(this,new Uint8ClampedArray(e),t,n)}function Hn(e,t,n){Yn.call(this,new Int16Array(e),t,n)}function jn(e,t,n){Yn.call(this,new Uint16Array(e),t,n)}function Un(e,t,n){Yn.call(this,new Int32Array(e),t,n)}function Wn(e,t,n){Yn.call(this,new Uint32Array(e),t,n)}function Gn(e,t,n){Yn.call(this,new Float32Array(e),t,n)}function Vn(e,t,n){Yn.call(this,new Float64Array(e),t,n)}function qn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Xn(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Bn.prototype=Object.assign(Object.create(i.prototype),{constructor:Bn,isGeometry:!0,applyMatrix:function(e){for(var t=(new $t).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var s=0,a=r.vertexNormals.length;s<a;s++)r.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Vt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Vt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Vt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Vt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Vt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:(Rn=new En,function(e){Rn.lookAt(e),Rn.updateMatrix(),this.applyMatrix(Rn.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,o=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=[],u=[],h=[],d=0,f=0;d<r.length;d+=3,f+=2)t.vertices.push(new Xt(r[d],r[d+1],r[d+2])),void 0!==s&&c.push(new Xt(s[d],s[d+1],s[d+2])),void 0!==a&&t.colors.push(new gn(a[d],a[d+1],a[d+2])),void 0!==o&&u.push(new Gt(o[f],o[f+1])),void 0!==l&&h.push(new Gt(l[f],l[f+1]));function p(e,n,i,r){var d=new On(e,n,i,void 0!==s?[c[e].clone(),c[n].clone(),c[i].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()]:[],r);t.faces.push(d),void 0!==o&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[i].clone()]),void 0!==l&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[i].clone()])}var m=e.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var _=m[d],g=_.start,y=(f=g,g+_.count);f<y;f+=3)void 0!==n?p(n[f],n[f+1],n[f+2],_.materialIndex):p(f,f+1,f+2,_.materialIndex);else if(void 0!==n)for(d=0;d<n.length;d+=3)p(n[d],n[d+1],n[d+2]);else for(d=0;d<r.length/3;d+=3)p(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Pn=new Xt,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pn).negate(),this.translate(Pn.x,Pn.y,Pn.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Vt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Xt,t=new Xt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],s=this.vertices[r.a],a=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,s,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Xt;if(e){var o,l,c,u=new Xt,h=new Xt;for(i=0,r=this.faces.length;i<r;i++)s=this.faces[i],o=this.vertices[s.a],l=this.vertices[s.b],c=this.vertices[s.c],u.subVectors(c,l),h.subVectors(o,l),u.cross(h),a[s.a].add(u),a[s.b].add(u),a[s.c].add(u)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)a[(s=this.faces[i]).a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(s=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(a[s.a]),d[1].copy(a[s.b]),d[2].copy(a[s.c])):(d[0]=a[s.a].clone(),d[1]=a[s.b].clone(),d[2]=a[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var s=new Bn;for(s.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Xt,c={a:new Xt,b:new Xt,c:new Xt},a.push(l),o.push(c)}var l,c,u=this.morphNormals[e];for(s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=u.faceNormals[n],c=u.vertexNormals[n],l.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new cn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new un),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new $t).getNormalMatrix(t));for(var f=0,p=a.length;f<p;f++){var m=a[f].clone();void 0!==t&&m.applyMatrix4(t),s.push(m)}for(f=0,p=d.length;f<p;f++)h.push(d[f].clone());for(f=0,p=l.length;f<p;f++){var _,g,y,v=l[f],b=v.vertexNormals,x=v.vertexColors;(_=new On(v.a+r,v.b+r,v.c+r)).normal.copy(v.normal),void 0!==i&&_.normal.applyMatrix3(i).normalize();for(var M=0,w=b.length;M<w;M++)g=b[M].clone(),void 0!==i&&g.applyMatrix3(i).normalize(),_.vertexNormals.push(g);for(_.color.copy(v.color),M=0,w=x.length;M<w;M++)y=x[M],_.vertexColors.push(y.clone());_.materialIndex=v.materialIndex+n,o.push(_)}for(f=0,p=u.length;f<p;f++){var S=u[f],L=[];if(void 0!==S){for(M=0,w=S.length;M<w;M++)L.push(S[M].clone());c.push(L)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,s,a,o,l={},c=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,c.push(this.vertices[n]),u[n]=c.length-1):u[n]=u[l[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],s=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(s[f]===s[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),a=0,o=this.faceVertexUvs.length;a<o;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Xt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var i,r,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(s&&s.length===t&&(i=[]),a&&a.length===t&&(r=[]),n=0;n<t;n++){var o=e[n]._id;i&&i.push(s[o]),r&&r.push(a[o])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var s=this.vertices[r];i.push(s.x,s.y,s.z)}var a=[],o=[],l={},c=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var f=this.faces[r],p=void 0!==this.faceVertexUvs[0][r],m=f.normal.length()>0,_=f.vertexNormals.length>0,g=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,v=0;if(v=w(v,0,0),v=w(v,1,!0),v=w(v,2,!1),v=w(v,3,p),v=w(v,4,m),v=w(v,5,_),v=w(v,6,g),v=w(v,7,y),a.push(v),a.push(f.a,f.b,f.c),a.push(f.materialIndex),p){var b=this.faceVertexUvs[0][r];a.push(T(b[0]),T(b[1]),T(b[2]))}if(m&&a.push(S(f.normal)),_){var x=f.vertexNormals;a.push(S(x[0]),S(x[1]),S(x[2]))}if(g&&a.push(L(f.color)),y){var M=f.vertexColors;a.push(L(M[0]),L(M[1]),L(M[2]))}}function w(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=o.length/3,o.push(e.x,e.y,e.z)),l[t]}function L(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=c.length,c.push(e.getHex())),u[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=i,e.data.normals=o,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Bn).copy(this)},copy:function(e){var t,n,i,r,s,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.vertices;for(t=0,n=o.length;t<n;t++)this.vertices.push(o[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(s=0,a=h.length;s<a;s++){var f=h[s];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)m.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(m.normals=[],i=0,r=p[t].normals.length;i<r;i++)m.normals.push(p[t].normals[i].clone());this.morphTargets.push(m)}var _=e.morphNormals;for(t=0,n=_.length;t<n;t++){var g={};if(void 0!==_[t].vertexNormals)for(g.vertexNormals=[],i=0,r=_[t].vertexNormals.length;i<r;i++){var y=_[t].vertexNormals[i],v={};v.a=y.a.clone(),v.b=y.b.clone(),v.c=y.c.clone(),g.vertexNormals.push(v)}if(void 0!==_[t].faceNormals)for(g.faceNormals=[],i=0,r=_[t].faceNormals.length;i<r;i++)g.faceNormals.push(_[t].faceNormals[i].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var x=e.skinIndices;for(t=0,n=x.length;t<n;t++)this.skinIndices.push(x[t].clone());var M=e.lineDistances;for(t=0,n=M.length;t<n;t++)this.lineDistances.push(M[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Yn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Yn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new gn),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Gt),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new Xt),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new sn),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Fn.prototype=Object.create(Yn.prototype),Fn.prototype.constructor=Fn,Nn.prototype=Object.create(Yn.prototype),Nn.prototype.constructor=Nn,In.prototype=Object.create(Yn.prototype),In.prototype.constructor=In,Hn.prototype=Object.create(Yn.prototype),Hn.prototype.constructor=Hn,jn.prototype=Object.create(Yn.prototype),jn.prototype.constructor=jn,Un.prototype=Object.create(Yn.prototype),Un.prototype.constructor=Un,Wn.prototype=Object.create(Yn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Object.create(Yn.prototype),Gn.prototype.constructor=Gn,Vn.prototype=Object.create(Yn.prototype),Vn.prototype.constructor=Vn,Object.assign(qn.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,s=0;s<r.length;s++){var a=r[s];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*s-t.start,n.push(t)),t={start:3*s,materialIndex:i})}void 0!==t&&(t.count=3*s-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,o=e.morphTargets,l=o.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var u,h=e.morphNormals,d=h.length;if(d>0){for(u=[],c=0;c<d;c++)u[c]=[];this.morphTargets.normal=u}var f=e.skinIndices,p=e.skinWeights,m=f.length===i.length,_=p.length===i.length;for(c=0;c<n.length;c++){var g=n[c];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var v=g.normal;this.normals.push(v,v,v)}var b,x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var M=g.color;this.colors.push(M,M,M)}!0===s&&(void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Gt,new Gt,new Gt))),!0===a&&(void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Gt,new Gt,new Gt)));for(var w=0;w<l;w++){var S=o[w].vertices;t[w].push(S[g.a],S[g.b],S[g.c])}for(w=0;w<d;w++){var L=h[w].vertexNormals[c];u[w].push(L.a,L.b,L.c)}m&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),_&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var $n=1;function Jn(){Object.defineProperty(this,"id",{value:$n+=2}),this.uuid=Wt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Kn(e,t,n,i,r,s){Bn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new Zn(e,t,n,i,r,s)),this.mergeVertices()}function Zn(e,t,n,i,r,s){Jn.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};var a=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var o=[],l=[],c=[],u=[],h=0,d=0;function f(e,t,n,i,r,s,f,p,m,_,g){var y,v,b=s/m,x=f/_,M=s/2,w=f/2,S=p/2,L=m+1,T=_+1,k=0,A=0,E=new Xt;for(v=0;v<T;v++){var C=v*x-w;for(y=0;y<L;y++){var D=y*b-M;E[e]=D*i,E[t]=C*r,E[n]=S,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=p>0?1:-1,c.push(E.x,E.y,E.z),u.push(y/m),u.push(1-v/_),k+=1}}for(v=0;v<_;v++)for(y=0;y<m;y++){var O=h+y+L*v,P=h+y+L*(v+1),R=h+(y+1)+L*(v+1),z=h+(y+1)+L*v;o.push(O,P,z),o.push(P,R,z),A+=6}a.addGroup(d,A,g),d+=A,h+=k}f("z","y","x",-1,-1,n,t,e,s,r,0),f("z","y","x",1,-1,n,t,-e,s,r,1),f("x","z","y",1,1,e,n,t,i,s,2),f("x","z","y",1,-1,e,n,-t,i,s,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.addAttribute("position",new Gn(l,3)),this.addAttribute("normal",new Gn(c,3)),this.addAttribute("uv",new Gn(u,2))}function Qn(e,t,n,i){Bn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new ei(e,t,n,i)),this.mergeVertices()}function ei(e,t,n,i){Jn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,s,a=(e=e||1)/2,o=(t=t||1)/2,l=Math.floor(n)||1,c=Math.floor(i)||1,u=l+1,h=c+1,d=e/l,f=t/c,p=[],m=[],_=[],g=[];for(s=0;s<h;s++){var y=s*f-o;for(r=0;r<u;r++){var v=r*d-a;m.push(v,-y,0),_.push(0,0,1),g.push(r/l),g.push(1-s/c)}}for(s=0;s<c;s++)for(r=0;r<l;r++){var b=r+u*s,x=r+u*(s+1),M=r+1+u*(s+1),w=r+1+u*s;p.push(b,x,w),p.push(x,M,w)}this.setIndex(p),this.addAttribute("position",new Gn(m,3)),this.addAttribute("normal",new Gn(_,3)),this.addAttribute("uv",new Gn(g,2))}Jn.prototype=Object.assign(Object.create(i.prototype),{constructor:Jn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Xn(e)>65535?Wn:jn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new Yn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new $t).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Vt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Vt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Vt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Vt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Vt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new En;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Xt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Gn(3*t.vertices.length,3),i=new Gn(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Gn(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Gn(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new qn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Yn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Yn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new Yn(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Yn(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var s=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Yn(s,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var o=[],l=e.morphTargets[a],c=0,u=l.length;c<u;c++){var h=l[c],d=new Gn(3*h.length,3);o.push(d.copyVector3sArray(h))}this.morphAttributes[a]=o}if(e.skinIndices.length>0){var f=new Gn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new Gn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new cn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new cn,t=new Xt;return function(){null===this.boundingSphere&&(this.boundingSphere=new un);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,s=0,a=n.count;s<a;s++)t.x=n.getX(s),t.y=n.getY(s),t.z=n.getZ(s),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Yn(new Float32Array(i.length),3));else for(var r=t.normal.array,s=0,a=r.length;s<a;s++)r[s]=0;var o,l,c,u=t.normal.array,h=new Xt,d=new Xt,f=new Xt,p=new Xt,m=new Xt;if(e){var _=e.array;0===n.length&&this.addGroup(0,_.length);for(var g=0,y=n.length;g<y;++g){var v=n[g],b=v.start;for(s=b,a=b+v.count;s<a;s+=3)o=3*_[s+0],l=3*_[s+1],c=3*_[s+2],h.fromArray(i,o),d.fromArray(i,l),f.fromArray(i,c),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),u[o]+=p.x,u[o+1]+=p.y,u[o+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z,u[c]+=p.x,u[c+1]+=p.y,u[c+2]+=p.z}}else for(s=0,a=i.length;s<a;s+=9)h.fromArray(i,s),d.fromArray(i,s+3),f.fromArray(i,s+6),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),u[s]=p.x,u[s+1]=p.y,u[s+2]=p.z,u[s+3]=p.x,u[s+4]=p.y,u[s+5]=p.z,u[s+6]=p.x,u[s+7]=p.y,u[s+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,s=e.attributes[i],a=s.array,o=0,l=s.itemSize*t;o<a.length;o++,l++)r[l]=a[o];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Xt;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Jn,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],s=r.array,a=r.itemSize,o=new s.constructor(t.length*a),l=0,c=0,u=0,h=t.length;u<h;u++){l=t[u]*a;for(var d=0;d<a;d++)o[c++]=s[l++]}e.addAttribute(i,new Yn(o,a))}var f=this.groups;for(u=0,h=f.length;u<h;u++){var p=f[u];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var s=this.attributes;for(var n in s){var a=s[n];r=Array.prototype.slice.call(a.array),e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Jn).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var s=e.attributes;for(t in s){var a=s[t];this.addAttribute(t,a.clone())}var o=e.morphAttributes;for(t in o){var l=[],c=o[t];for(n=0,i=c.length;n<i;n++)l.push(c[n].clone());this.morphAttributes[t]=l}var u=e.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Kn.prototype=Object.create(Bn.prototype),Kn.prototype.constructor=Kn,Zn.prototype=Object.create(Jn.prototype),Zn.prototype.constructor=Zn,Qn.prototype=Object.create(Bn.prototype),Qn.prototype.constructor=Qn,ei.prototype=Object.create(Jn.prototype),ei.prototype.constructor=ei;var ti,ni,ii,ri,si,ai,oi,li=0;function ci(){Object.defineProperty(this,"id",{value:li++}),this.uuid=Wt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=P,this.side=S,this.flatShading=!1,this.vertexColors=E,this.opacity=1,this.transparent=!1,this.blendSrc=q,this.blendDst=X,this.blendEquation=F,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ie,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ui(e){ci.call(this),this.type="MeshBasicMaterial",this.color=new gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function hi(e){ci.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function di(e,t){this.origin=void 0!==e?e:new Xt,this.direction=void 0!==t?t:new Xt}function fi(e,t){this.start=void 0!==e?e:new Xt,this.end=void 0!==t?t:new Xt}function pi(e,t,n){this.a=void 0!==e?e:new Xt,this.b=void 0!==t?t:new Xt,this.c=void 0!==n?n:new Xt}function mi(e,t){En.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Jn,this.material=void 0!==t?t:new ui({color:16777215*Math.random()}),this.drawMode=Dt,this.updateMorphTargets()}function _i(e,t,n,i){var r,s,a,o=new gn(0),l=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),c(o,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){c(o,l=e)},render:function(t,i,u,h){var d=i.background;null===d?c(o,l):d&&d.isColor&&(c(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===a&&((a=new mi(new Zn(1,1,1),new hi({uniforms:bn.cube.uniforms,vertexShader:bn.cube.vertexShader,fragmentShader:bn.cube.fragmentShader,side:L,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a.geometry)),a.material.uniforms.tCube.value=d,t.push(a,a.geometry,a.material,0,null)):d&&d.isTexture&&(void 0===r&&(r=new Dn(-1,1,1,-1,0,1),s=new mi(new ei(2,2),new ui({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=d,e.renderBufferDirect(r,null,s.geometry,s.material,s,null))}}}function gi(e,t,n){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(e,r,s){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var o=e.attributes.position;o.isInterleavedBufferAttribute?(s=o.data.count,a.drawArraysInstancedANGLE(i,0,s,e.maxInstancedCount)):a.drawArraysInstancedANGLE(i,r,s,e.maxInstancedCount),n.update(s,i,e.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function yi(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var s=void 0!==n.precision?n.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var o=!0===n.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=c>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:o,maxTextures:l,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:_,floatFragmentTextures:g,floatVertexTextures:_&&g}}function vi(){var e=this,t=null,n=0,i=!1,r=!1,s=new hn,a=new $t,o={value:null,needsUpdate:!1};function l(){o.value!==t&&(o.value=t,o.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=o.value,!0!==r||null===c){var u=i+4*l,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<u)&&(c=new Float32Array(u));for(var d=0,f=i;d!==l;++d,f+=4)s.copy(t[d]).applyMatrix4(h,a),s.normal.toArray(c,f),c[f+3]=s.constant}o.value=c,o.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,s){var a=0!==e.length||r||0!==n||i;return i=r,t=c(e,s,0),n=e.length,a},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,s,a,u,h,d){if(!i||null===e||0===e.length||r&&!a)r?c(null):l();else{var f=r?0:n,p=4*f,m=h.clippingState||null;o.value=m,m=c(e,u,p,d);for(var _=0;_!==p;++_)m[_]=t[_];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=f}}}function bi(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function xi(e,t,n){var i={},r={};function s(e){var a=e.target,o=i[a.id];for(var l in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[l]);a.removeEventListener("dispose",s),delete i[a.id];var c=r[a.id];c&&(t.remove(c),delete r[a.id]),(c=r[o.id])&&(t.remove(c),delete r[o.id]),n.memory.geometries--}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",s),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Jn).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(n){var i=n.index,r=n.attributes;for(var s in null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[s],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var s in a)for(var o=a[s],l=0,c=o.length;l<c;l++)t.update(o[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var i=r[n.id];if(i)return i;var s,a=[],o=n.index,l=n.attributes;if(null!==o)for(var c=0,u=(s=o.array).length;c<u;c+=3){var h=s[c+0],d=s[c+1],f=s[c+2];a.push(h,d,d,f,f,h)}else for(c=0,u=(s=l.position.array).length/3-1;c<u;c+=3)h=c+0,d=c+1,f=c+2,a.push(h,d,d,f,f,h);return i=new(Xn(a)>65535?Wn:jn)(a,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),r[n.id]=i,i}}}function Mi(e,t,n){var i,r,s;this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,s=e.bytesPerElement},this.render=function(t,a){e.drawElements(i,a,r,t*s),n.update(a,i)},this.renderInstances=function(e,a,o){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(i,o,r,a*s,e.maxInstancedCount),n.update(o,i,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function wi(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(r=r||1,t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(n-2);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Si(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Li(e){var t={},n=new Float32Array(8);return{update:function(i,r,s,a){var o=i.morphTargetInfluences,l=o.length,c=t[r.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[r.id]=c}var h=s.morphTargets&&r.morphAttributes.position,d=s.morphNormals&&r.morphAttributes.normal;for(u=0;u<l;u++)0!==(f=c[u])[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u));for(u=0;u<l;u++)(f=c[u])[0]=u,f[1]=o[u];for(c.sort(Si),u=0;u<8;u++){var f;if(f=c[u]){var p=f[0],m=f[1];if(m){h&&r.addAttribute("morphTarget"+u,h[p]),d&&r.addAttribute("morphNormal"+u,d[p]),n[u]=m;continue}}n[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Ti(e,t){var n={};return{update:function(i){var r=t.render.frame,s=i.geometry,a=e.get(i,s);return n[a.id]!==r&&(s.isGeometry&&a.updateFromObject(i),e.update(a),n[a.id]=r),a},dispose:function(){n={}}}}function ki(e,t,n,i,r,s,a,o,l,c){e=void 0!==e?e:[],t=void 0!==t?t:ge,rn.call(this,e,t,n,i,r,s,a,o,l,c),this.flipY=!1}ci.prototype=Object.assign(Object.create(i.prototype),{constructor:ci,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===k;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==P&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==S&&(n.side=this.side),this.vertexColors!==E&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),s=i(e.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ui.prototype=Object.create(ci.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshBasicMaterial=!0,ui.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},hi.prototype=Object.create(ci.prototype),hi.prototype.constructor=hi,hi.prototype.isShaderMaterial=!0,hi.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mn.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},hi.prototype.toJSON=function(e){var t=ci.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(di.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Xt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Xt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Xt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Xt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(ni=new Xt,ii=new Xt,ri=new Xt,function(e,t,n,i){ni.copy(e).add(t).multiplyScalar(.5),ii.copy(t).sub(e).normalize(),ri.copy(this.origin).sub(ni);var r,s,a,o,l=.5*e.distanceTo(t),c=-this.direction.dot(ii),u=ri.dot(this.direction),h=-ri.dot(ii),d=ri.lengthSq(),f=Math.abs(1-c*c);if(f>0)if(s=c*u-h,o=l*f,(r=c*h-u)>=0)if(s>=-o)if(s<=o){var p=1/f;a=(r*=p)*(r+c*(s*=p)+2*u)+s*(c*r+s+2*h)+d}else s=l,a=-(r=Math.max(0,-(c*s+u)))*r+s*(s+2*h)+d;else s=-l,a=-(r=Math.max(0,-(c*s+u)))*r+s*(s+2*h)+d;else s<=-o?a=-(r=Math.max(0,-(-c*l+u)))*r+(s=r>0?-l:Math.min(Math.max(-l,-h),l))*(s+2*h)+d:s<=o?(r=0,a=(s=Math.min(Math.max(-l,-h),l))*(s+2*h)+d):a=-(r=Math.max(0,-(c*l+u)))*r+(s=r>0?l:Math.min(Math.max(-l,-h),l))*(s+2*h)+d;else s=c>0?-l:l,a=-(r=Math.max(0,-(c*s+u)))*r+s*(s+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(ii).multiplyScalar(s).add(ni),a}),intersectSphere:function(){var e=new Xt;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,s=t.radius*t.radius;if(r>s)return null;var a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,n):this.at(o,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,s,a,o,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),u>=0?(a=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),n>o||a>i?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:(ti=new Xt,function(e){return null!==this.intersectBox(e,ti)}),intersectTriangle:function(){var e=new Xt,t=new Xt,n=new Xt,i=new Xt;return function(r,s,a,o,l){t.subVectors(s,r),n.subVectors(a,r),i.crossVectors(t,n);var c,u=this.direction.dot(i);if(u>0){if(o)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,r);var h=c*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=c*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var f=-c*e.dot(i);return f<0?null:this.at(f/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(fi.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Xt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Xt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Xt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(si=new Xt,ai=new Xt,function(e,t){si.subVectors(e,this.start),ai.subVectors(this.end,this.start);var n=ai.dot(ai),i=ai.dot(si)/n;return t&&(i=Wt.clamp(i,0,1)),i}),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Xt),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(pi,{getNormal:(oi=new Xt,function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Xt),i.subVectors(n,t),oi.subVectors(e,t),i.cross(oi);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}),getBarycoord:function(){var e=new Xt,t=new Xt,n=new Xt;return function(i,r,s,a,o){e.subVectors(a,r),t.subVectors(s,r),n.subVectors(i,r);var l=e.dot(e),c=e.dot(t),u=e.dot(n),h=t.dot(t),d=t.dot(n),f=l*h-c*c;if(void 0===o&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new Xt),0===f)return o.set(-2,-1,-1);var p=1/f,m=(h*u-c*d)*p,_=(l*d-c*u)*p;return o.set(1-m-_,_,m)}}(),containsPoint:function(){var e=new Xt;return function(t,n,i,r){return pi.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(pi.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Xt,t=new Xt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Xt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return pi.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Xt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return pi.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return pi.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new hn,t=[new fi,new fi,new fi],n=new Xt,i=new Xt;return function(r,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new Xt);var a=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),!0===this.containsPoint(n))s.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var o=0;o<t.length;o++){t[o].closestPointToPoint(n,!0,i);var l=n.distanceToSquared(i);l<a&&(a=l,s.copy(i))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),mi.prototype=Object.assign(Object.create(En.prototype),{constructor:mi,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return En.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,s=Object.keys(r);if(s.length>0){var a=r[s[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var o=i.morphTargets;if(void 0!==o&&o.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new Vt,t=new di,n=new un,i=new Xt,r=new Xt,s=new Xt,a=new Xt,o=new Xt,l=new Xt,c=new Gt,u=new Gt,h=new Gt,d=new Xt,f=new Xt,p=new Xt;function m(e,t,n,i,r,s,a){return pi.getBarycoord(e,t,n,i,d),r.multiplyScalar(d.x),s.multiplyScalar(d.y),a.multiplyScalar(d.z),r.add(s).add(a),r.clone()}function _(e,t,n,i,r,s,a,o){if(null===(t.side===L?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side!==T,o)))return null;p.copy(o),p.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(p);return l<n.near||l>n.far?null:{distance:l,point:p.clone(),object:e}}function g(e,t,n,a,o,l,d,p){i.fromBufferAttribute(a,l),r.fromBufferAttribute(a,d),s.fromBufferAttribute(a,p);var g=_(e,e.material,t,n,i,r,s,f);if(g){o&&(c.fromBufferAttribute(o,l),u.fromBufferAttribute(o,d),h.fromBufferAttribute(o,p),g.uv=m(f,i,r,s,c,u,h));var y=new On(l,d,p);pi.getNormal(i,r,s,y.normal),g.face=y,g.faceIndex=l}return g}return function(d,p){var y,v=this.geometry,b=this.material,x=this.matrixWorld;if(void 0!==b&&(null===v.boundingSphere&&v.computeBoundingSphere(),n.copy(v.boundingSphere),n.applyMatrix4(x),!1!==d.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(d.ray).applyMatrix4(e),null===v.boundingBox||!1!==t.intersectsBox(v.boundingBox))))if(v.isBufferGeometry){var M,w,S,L,T,k=v.index,A=v.attributes.position,E=v.attributes.uv;if(null!==k)for(L=0,T=k.count;L<T;L+=3)M=k.getX(L),w=k.getX(L+1),S=k.getX(L+2),(y=g(this,d,t,A,E,M,w,S))&&(y.faceIndex=Math.floor(L/3),p.push(y));else if(void 0!==A)for(L=0,T=A.count;L<T;L+=3)(y=g(this,d,t,A,E,M=L,w=L+1,S=L+2))&&(y.index=M,p.push(y))}else if(v.isGeometry){var C,D,O,P,R=Array.isArray(b),z=v.vertices,B=v.faces,Y=v.faceVertexUvs[0];Y.length>0&&(P=Y);for(var F=0,N=B.length;F<N;F++){var I=B[F],H=R?b[I.materialIndex]:b;if(void 0!==H){if(C=z[I.a],D=z[I.b],O=z[I.c],!0===H.morphTargets){var j=v.morphTargets,U=this.morphTargetInfluences;i.set(0,0,0),r.set(0,0,0),s.set(0,0,0);for(var W=0,G=j.length;W<G;W++){var V=U[W];if(0!==V){var q=j[W].vertices;i.addScaledVector(a.subVectors(q[I.a],C),V),r.addScaledVector(o.subVectors(q[I.b],D),V),s.addScaledVector(l.subVectors(q[I.c],O),V)}}i.add(C),r.add(D),s.add(O),C=i,D=r,O=s}if(y=_(this,H,d,t,C,D,O,f)){if(P&&P[F]){var X=P[F];c.copy(X[0]),u.copy(X[1]),h.copy(X[2]),y.uv=m(f,C,D,O,c,u,h)}y.face=I,y.faceIndex=F,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ki.prototype=Object.create(rn.prototype),ki.prototype.constructor=ki,ki.prototype.isCubeTexture=!0,Object.defineProperty(ki.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ai=new rn,Ei=new ki;function Ci(){this.seq=[],this.map={}}var Di=[],Oi=[],Pi=new Float32Array(16),Ri=new Float32Array(9);function zi(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,s=Di[r];if(void 0===s&&(s=new Float32Array(r),Di[r]=s),0!==t){i.toArray(s,0);for(var a=1,o=0;a!==t;++a)o+=n,e[a].toArray(s,o)}return s}function Bi(e,t){var n=Oi[t];void 0===n&&(n=new Int32Array(t),Oi[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function Yi(e,t){e.uniform1f(this.addr,t)}function Fi(e,t){e.uniform1i(this.addr,t)}function Ni(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function Ii(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function Hi(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function ji(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function Ui(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Ri.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Ri))}function Wi(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Pi.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Pi))}function Gi(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||Ai,i)}function Vi(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||Ei,i)}function qi(e,t){e.uniform2iv(this.addr,t)}function Xi(e,t){e.uniform3iv(this.addr,t)}function $i(e,t){e.uniform4iv(this.addr,t)}function Ji(e,t){e.uniform1fv(this.addr,t)}function Ki(e,t){e.uniform1iv(this.addr,t)}function Zi(e,t){e.uniform2fv(this.addr,zi(t,this.size,2))}function Qi(e,t){e.uniform3fv(this.addr,zi(t,this.size,3))}function er(e,t){e.uniform4fv(this.addr,zi(t,this.size,4))}function tr(e,t){e.uniformMatrix2fv(this.addr,!1,zi(t,this.size,4))}function nr(e,t){e.uniformMatrix3fv(this.addr,!1,zi(t,this.size,9))}function ir(e,t){e.uniformMatrix4fv(this.addr,!1,zi(t,this.size,16))}function rr(e,t,n){var i=t.length,r=Bi(n,i);e.uniform1iv(this.addr,r);for(var s=0;s!==i;++s)n.setTexture2D(t[s]||Ai,r[s])}function sr(e,t,n){var i=t.length,r=Bi(n,i);e.uniform1iv(this.addr,r);for(var s=0;s!==i;++s)n.setTextureCube(t[s]||Ei,r[s])}function ar(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return Yi;case 35664:return Ni;case 35665:return Ii;case 35666:return Hi;case 35674:return ji;case 35675:return Ui;case 35676:return Wi;case 35678:case 36198:return Gi;case 35680:return Vi;case 5124:case 35670:return Fi;case 35667:case 35671:return qi;case 35668:case 35672:return Xi;case 35669:case 35673:return $i}}(t.type)}function or(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ji;case 35664:return Zi;case 35665:return Qi;case 35666:return er;case 35674:return tr;case 35675:return nr;case 35676:return ir;case 35678:return rr;case 35680:return sr;case 5124:case 35670:return Ki;case 35667:case 35671:return qi;case 35668:case 35672:return Xi;case 35669:case 35673:return $i}}(t.type)}function lr(e){this.id=e,Ci.call(this)}lr.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var s=n[i];s.setValue(e,t[s.id])}};var cr=/([\w\d_]+)(\])?(\[|\.)?/g;function ur(e,t){e.seq.push(t),e.map[t.id]=t}function hr(e,t,n){var i=e.name,r=i.length;for(cr.lastIndex=0;;){var s=cr.exec(i),a=cr.lastIndex,o=s[1],l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){ur(n,void 0===c?new ar(o,e,t):new or(o,e,t));break}var u=n.map[o];void 0===u&&ur(n,u=new lr(o)),n=u}}function dr(e,t,n){Ci.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var s=e.getActiveUniform(t,r),a=s.name;hr(s,e.getUniformLocation(t,a),this)}}function fr(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}dr.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},dr.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},dr.upload=function(e,t,n,i){for(var r=0,s=t.length;r!==s;++r){var a=t[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,i)}},dr.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var s=e[i];s.id in t&&n.push(s)}return n};var pr=0;function mr(e){switch(e){case Rt:return["Linear","( value )"];case zt:return["sRGB","( value )"];case Yt:return["RGBE","( value )"];case Nt:return["RGBM","( value, 7.0 )"];case It:return["RGBM","( value, 16.0 )"];case Ht:return["RGBD","( value, 256.0 )"];case Bt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function _r(e,t){var n=mr(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function gr(e,t){var n;switch(t){case de:n="Linear";break;case fe:n="Reinhard";break;case pe:n="Uncharted2";break;case me:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function yr(e){return""!==e}function vr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function br(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function xr(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,(function(e,t){var n=pn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return xr(n)}))}function Mr(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,i){for(var r="",s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[ i \]/g,"[ "+s+" ]");return r}))}function wr(e,t,n,i,r,s){var a=e.context,o=i.defines,l=r.vertexShader,c=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";s.shadowMapType===M?u="SHADOWMAP_TYPE_PCF":s.shadowMapType===w&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(s.envMap){switch(i.envMap.mapping){case ge:case ye:h="ENVMAP_TYPE_CUBE";break;case Me:case we:h="ENVMAP_TYPE_CUBE_UV";break;case ve:case be:h="ENVMAP_TYPE_EQUIREC";break;case xe:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ye:case be:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case le:f="ENVMAP_BLENDING_MULTIPLY";break;case ce:f="ENVMAP_BLENDING_MIX";break;case ue:f="ENVMAP_BLENDING_ADD"}}var p,m,_,g,y=e.gammaFactor>0?e.gammaFactor:1,v=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(yr).join("\n")}(i.extensions,s,t),b=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),x=a.createProgram();i.isRawShaderMaterial?((p=[b].filter(yr).join("\n")).length>0&&(p+="\n"),(m=[v,b].filter(yr).join("\n")).length>0&&(m+="\n")):(p=["precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+r.name,b,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+d:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yr).join("\n"),m=[v,"precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+r.name,b,s.alphaTest?"#define ALPHATEST "+s.alphaTest:"","#define GAMMA_FACTOR "+y,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+h:"",s.envMap?"#define "+d:"",s.envMap?"#define "+f:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexColors?"#define USE_COLOR":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+u:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",s.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",s.toneMapping!==he?"#define TONE_MAPPING":"",s.toneMapping!==he?pn.tonemapping_pars_fragment:"",s.toneMapping!==he?gr("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.outputEncoding||s.mapEncoding||s.envMapEncoding||s.emissiveMapEncoding?pn.encodings_pars_fragment:"",s.mapEncoding?_r("mapTexelToLinear",s.mapEncoding):"",s.envMapEncoding?_r("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMapEncoding?_r("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.outputEncoding?(_=s.outputEncoding,g=mr(_),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"):"",s.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(yr).join("\n")),l=br(l=vr(l=xr(l),s),s),c=br(c=vr(c=xr(c),s),s);var S=p+(l=Mr(l)),L=m+(c=Mr(c)),T=fr(a,a.VERTEX_SHADER,S),k=fr(a,a.FRAGMENT_SHADER,L);a.attachShader(x,T),a.attachShader(x,k),void 0!==i.index0AttributeName?a.bindAttribLocation(x,0,i.index0AttributeName):!0===s.morphTargets&&a.bindAttribLocation(x,0,"position"),a.linkProgram(x);var A,E,C=a.getProgramInfoLog(x).trim(),D=a.getShaderInfoLog(T).trim(),O=a.getShaderInfoLog(k).trim(),P=!0,R=!0;return!1===a.getProgramParameter(x,a.LINK_STATUS)?(P=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(x,a.VALIDATE_STATUS),"gl.getProgramInfoLog",C,D,O)):""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==D&&""!==O||(R=!1),R&&(this.diagnostics={runnable:P,material:i,programLog:C,vertexShader:{log:D,prefix:p},fragmentShader:{log:O,prefix:m}}),a.deleteShader(T),a.deleteShader(k),this.getUniforms=function(){return void 0===A&&(A=new dr(a,x,e)),A},this.getAttributes=function(){return void 0===E&&(E=function(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var s=e.getActiveAttrib(t,r).name;n[s]=e.getAttribLocation(t,s)}return n}(a,x)),E},this.destroy=function(){a.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=pr++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=k,this}function Sr(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Rt,n===Rt&&t&&(n=Bt),n}this.getParameters=function(t,i,s,o,l,c,u){var h=r[t.type],d=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),s=Math.min(r,t.length);return s<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+s+"."),0):s}(u):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Me||t.envMap.mapping===we),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!o,useFog:t.fog,fogExp:o&&o.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===T,flipSided:t.side===L,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var a=0;a<s.length;a++)i.push(n[s[a]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(n,r,s,a){for(var o,l=0,c=i.length;l<c;l++){var u=i[l];if(u.code===a){++(o=u).usedTimes;break}}return void 0===o&&(o=new wr(e,t,a,n,r,s),i.push(o)),o},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function Lr(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Tr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function kr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ar(){var e=[],t=0,n=[],i=[];return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(r,s,a,o,l){var c=e[t];void 0===c?(c={id:r.id,object:r,geometry:s,material:a,program:a.program,renderOrder:r.renderOrder,z:o,group:l},e[t]=c):(c.id=r.id,c.object=r,c.geometry=s,c.material=a,c.program=a.program,c.renderOrder=r.renderOrder,c.z=o,c.group=l),(!0===a.transparent?i:n).push(c),t++},sort:function(){n.length>1&&n.sort(Tr),i.length>1&&i.sort(kr)}}}function Er(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new Ar,e[i]=r),r},dispose:function(){e={}}}}function Cr(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Xt,color:new gn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"SpotLight":n={position:new Xt,direction:new Xt,color:new gn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"PointLight":n={position:new Xt,color:new gn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Gt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Xt,skyColor:new gn,groundColor:new gn};break;case"RectAreaLight":n={color:new gn,position:new Xt,halfWidth:new Xt,halfHeight:new Xt}}return e[t.id]=n,n}}}var Dr,Or,Pr,Rr,zr,Br,Yr,Fr,Nr=0;function Ir(){var e=new Cr,t={id:Nr++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Xt,i=new Vt,r=new Vt;return{setup:function(s,a,o){for(var l=0,c=0,u=0,h=0,d=0,f=0,p=0,m=0,_=o.matrixWorldInverse,g=0,y=s.length;g<y;g++){var v=s[g],b=v.color,x=v.intensity,M=v.distance,w=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)l+=b.r*x,c+=b.g*x,u+=b.b*x;else if(v.isDirectionalLight){if((L=e.get(v)).color.copy(v.color).multiplyScalar(v.intensity),L.direction.setFromMatrixPosition(v.matrixWorld),n.setFromMatrixPosition(v.target.matrixWorld),L.direction.sub(n),L.direction.transformDirection(_),L.shadow=v.castShadow,v.castShadow){var S=v.shadow;L.shadowBias=S.bias,L.shadowRadius=S.radius,L.shadowMapSize=S.mapSize}t.directionalShadowMap[h]=w,t.directionalShadowMatrix[h]=v.shadow.matrix,t.directional[h]=L,h++}else if(v.isSpotLight)(L=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),L.position.applyMatrix4(_),L.color.copy(b).multiplyScalar(x),L.distance=M,L.direction.setFromMatrixPosition(v.matrixWorld),n.setFromMatrixPosition(v.target.matrixWorld),L.direction.sub(n),L.direction.transformDirection(_),L.coneCos=Math.cos(v.angle),L.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),L.decay=0===v.distance?0:v.decay,L.shadow=v.castShadow,v.castShadow&&(S=v.shadow,L.shadowBias=S.bias,L.shadowRadius=S.radius,L.shadowMapSize=S.mapSize),t.spotShadowMap[f]=w,t.spotShadowMatrix[f]=v.shadow.matrix,t.spot[f]=L,f++;else if(v.isRectAreaLight)(L=e.get(v)).color.copy(b).multiplyScalar(x),L.position.setFromMatrixPosition(v.matrixWorld),L.position.applyMatrix4(_),r.identity(),i.copy(v.matrixWorld),i.premultiply(_),r.extractRotation(i),L.halfWidth.set(.5*v.width,0,0),L.halfHeight.set(0,.5*v.height,0),L.halfWidth.applyMatrix4(r),L.halfHeight.applyMatrix4(r),t.rectArea[p]=L,p++;else if(v.isPointLight)(L=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),L.position.applyMatrix4(_),L.color.copy(v.color).multiplyScalar(v.intensity),L.distance=v.distance,L.decay=0===v.distance?0:v.decay,L.shadow=v.castShadow,v.castShadow&&(S=v.shadow,L.shadowBias=S.bias,L.shadowRadius=S.radius,L.shadowMapSize=S.mapSize,L.shadowCameraNear=S.camera.near,L.shadowCameraFar=S.camera.far),t.pointShadowMap[d]=w,t.pointShadowMatrix[d]=v.shadow.matrix,t.point[d]=L,d++;else if(v.isHemisphereLight){var L;(L=e.get(v)).direction.setFromMatrixPosition(v.matrixWorld),L.direction.transformDirection(_),L.direction.normalize(),L.skyColor.copy(v.color).multiplyScalar(x),L.groundColor.copy(v.groundColor).multiplyScalar(x),t.hemi[m]=L,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=h,t.spot.length=f,t.rectArea.length=p,t.point.length=d,t.hemi.length=m,t.hash=t.id+","+h+","+d+","+f+","+p+","+m+","+a.length},state:t}}function Hr(){var e=new Ir,t=[],n=[],i=[];return{init:function(){t.length=0,n.length=0,i.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:i,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){i.push(e)}}}function jr(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new Hr,e[i]=r),r},dispose:function(){e={}}}}function Ur(e){ci.call(this),this.type="MeshDepthMaterial",this.depthPacking=jt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Wr(e){ci.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Xt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Gr(e,t,n){for(var i=new dn,r=new Vt,s=new Gt,a=new Gt(n,n),o=new Xt,l=new Xt,c=1,u=2,h=1+(c|u),d=new Array(h),f=new Array(h),p={},m={0:L,1:S,2:T},_=[new Xt(1,0,0),new Xt(-1,0,0),new Xt(0,0,1),new Xt(0,0,-1),new Xt(0,1,0),new Xt(0,-1,0)],g=[new Xt(0,1,0),new Xt(0,1,0),new Xt(0,1,0),new Xt(0,1,0),new Xt(0,0,1),new Xt(0,0,-1)],y=[new sn,new sn,new sn,new sn,new sn,new sn],v=0;v!==h;++v){var b=!!(v&c),x=!!(v&u),w=new Ur({depthPacking:Ut,morphTargets:b,skinning:x});d[v]=w;var k=new Wr({morphTargets:b,skinning:x});f[v]=k}var A=this;function E(t,n,i,r,s,a){var o=t.geometry,l=null,h=d,_=t.customDepthMaterial;if(i&&(h=f,_=t.customDistanceMaterial),_)l=_;else{var g=!1;n.morphTargets&&(o&&o.isBufferGeometry?g=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(g=o.morphTargets&&o.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,v=0;g&&(v|=c),y&&(v|=u),l=h[v]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=l.uuid,x=n.uuid,M=p[b];void 0===M&&(M={},p[b]=M);var w=M[x];void 0===w&&(w=l.clone(),M[x]=w),l=w}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:m[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=s,l.farDistance=a),l}function C(n,r,s,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);var o=t.update(n),c=n.material;if(Array.isArray(c))for(var u=o.groups,h=0,d=u.length;h<d;h++){var f=u[h],p=c[f.materialIndex];if(p&&p.visible){var m=E(n,p,a,l,s.near,s.far);e.renderBufferDirect(s,null,o,m,n,f)}}else c.visible&&(m=E(n,c,a,l,s.near,s.far),e.renderBufferDirect(s,null,o,m,n,null))}for(var _=n.children,g=0,y=_.length;g<y;g++)C(_[g],r,s,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=M,this.render=function(t,n,c){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var u,h=e.context,d=e.state;d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],v=m.shadow,b=m&&m.isPointLight;if(void 0!==v){var x=v.camera;if(s.copy(v.mapSize),s.min(a),b){var M=s.x,w=s.y;y[0].set(2*M,w,M,w),y[1].set(0,w,M,w),y[2].set(3*M,w,M,w),y[3].set(M,w,M,w),y[4].set(3*M,0,M,w),y[5].set(M,0,M,w),s.x*=4,s.y*=2}if(null===v.map){var S={minFilter:ke,magFilter:ke,format:qe};v.map=new an(s.x,s.y,S),v.map.texture.name=m.name+".shadowMap",x.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(m);var L=v.map,T=v.matrix;l.setFromMatrixPosition(m.matrixWorld),x.position.copy(l),b?(u=6,T.makeTranslation(-l.x,-l.y,-l.z)):(u=1,o.setFromMatrixPosition(m.target.matrixWorld),x.lookAt(o),x.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(x.projectionMatrix),T.multiply(x.matrixWorldInverse)),e.setRenderTarget(L),e.clear();for(var k=0;k<u;k++){if(b){o.copy(x.position),o.add(_[k]),x.up.copy(g[k]),x.lookAt(o),x.updateMatrixWorld();var E=y[k];d.viewport(E)}r.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),i.setFromMatrix(r),C(n,c,x,b)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}A.needsUpdate=!1}}}function Vr(e,t,n,i,r,s,a,o,l){rn.call(this,e,t,n,i,r,s,a,o,l),this.needsUpdate=!0}function qr(e,t,n,i,r){var s,a,o,l,c,u,h=new Xt,d=new qt,f=new Xt;function p(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(m,_,g){if(0!==m.length){void 0===o&&function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);s=t.createBuffer(),a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),o=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(i),t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),e}(),l={position:t.getAttribLocation(o,"position"),uv:t.getAttribLocation(o,"uv")},c={uvOffset:t.getUniformLocation(o,"uvOffset"),uvScale:t.getUniformLocation(o,"uvScale"),rotation:t.getUniformLocation(o,"rotation"),center:t.getUniformLocation(o,"center"),scale:t.getUniformLocation(o,"scale"),color:t.getUniformLocation(o,"color"),map:t.getUniformLocation(o,"map"),opacity:t.getUniformLocation(o,"opacity"),modelViewMatrix:t.getUniformLocation(o,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(o,"projectionMatrix"),fogType:t.getUniformLocation(o,"fogType"),fogDensity:t.getUniformLocation(o,"fogDensity"),fogNear:t.getUniformLocation(o,"fogNear"),fogFar:t.getUniformLocation(o,"fogFar"),fogColor:t.getUniformLocation(o,"fogColor"),fogDepth:t.getUniformLocation(o,"fogDepth"),alphaTest:t.getUniformLocation(o,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var h=i.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),u=new Vr(i)}(),n.useProgram(o),n.initAttributes(),n.enableAttribute(l.position),n.enableAttribute(l.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,s),t.vertexAttribPointer(l.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(l.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.uniformMatrix4fv(c.projectionMatrix,!1,g.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(c.map,0);var y=0,v=0,b=_.fog;b?(t.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(t.uniform1f(c.fogNear,b.near),t.uniform1f(c.fogFar,b.far),t.uniform1i(c.fogType,1),y=1,v=1):b.isFogExp2&&(t.uniform1f(c.fogDensity,b.density),t.uniform1i(c.fogType,2),y=2,v=2)):(t.uniform1i(c.fogType,0),y=0,v=0);for(var x=0,M=m.length;x<M;x++)(L=m[x]).modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,L.matrixWorld),L.z=-L.modelViewMatrix.elements[14];m.sort(p);var w=[],S=[];for(x=0,M=m.length;x<M;x++){var L,T=(L=m[x]).material;if(!1!==T.visible){L.onBeforeRender(e,_,g,void 0,T,void 0),t.uniform1f(c.alphaTest,T.alphaTest),t.uniformMatrix4fv(c.modelViewMatrix,!1,L.modelViewMatrix.elements),L.matrixWorld.decompose(h,d,f),w[0]=f.x,w[1]=f.y,S[0]=L.center.x-.5,S[1]=L.center.y-.5;var k=0;_.fog&&T.fog&&(k=v),y!==k&&(t.uniform1i(c.fogType,k),y=k),null!==T.map?(t.uniform2f(c.uvOffset,T.map.offset.x,T.map.offset.y),t.uniform2f(c.uvScale,T.map.repeat.x,T.map.repeat.y)):(t.uniform2f(c.uvOffset,0,0),t.uniform2f(c.uvScale,1,1)),t.uniform1f(c.opacity,T.opacity),t.uniform3f(c.color,T.color.r,T.color.g,T.color.b),t.uniform1f(c.rotation,T.rotation),t.uniform2fv(c.center,S),t.uniform2fv(c.scale,w),n.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha),n.buffers.depth.setTest(T.depthTest),n.buffers.depth.setMask(T.depthWrite),n.buffers.color.setMask(T.colorWrite),i.setTexture2D(T.map||u,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),L.onAfterRender(e,_,g,void 0,T,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Xr(e,t,n){var i=new function(){var t=!1,n=new sn,i=null,r=new sn(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},r=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?q(e.DEPTH_TEST):X(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case ee:e.depthFunc(e.NEVER);break;case te:e.depthFunc(e.ALWAYS);break;case ne:e.depthFunc(e.LESS);break;case ie:e.depthFunc(e.LEQUAL);break;case re:e.depthFunc(e.EQUAL);break;case se:e.depthFunc(e.GEQUAL);break;case ae:e.depthFunc(e.GREATER);break;case oe:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){var t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(t){t?q(e.STENCIL_TEST):X(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&s===a||(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){a===t&&o===n&&l===i||(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},a=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=new Uint8Array(a),l=new Uint8Array(a),c=new Uint8Array(a),u={},h=null,d=null,f=null,p=null,y=null,v=null,b=null,x=null,M=null,w=!1,S=null,k=null,A=null,E=null,C=null,D=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),F=!1,N=0,I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(N=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),F=N>=1):-1!==I.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),F=N>=2);var H=null,j={},U=new sn,W=new sn;function G(t,n,i){var r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<i;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return s}var V={};function q(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function X(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}function $(t,i,r,s,a,o,l,c){if(t!==O?q(e.BLEND):X(e.BLEND),t!==Y){if(t!==f||c!==w)switch(t){case R:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case z:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case B:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}p=null,y=null,v=null,b=null,x=null,M=null}else a=a||i,o=o||r,l=l||s,i===p&&a===b||(e.blendEquationSeparate(n.convert(i),n.convert(a)),p=i,b=a),r===y&&s===v&&o===x&&l===M||(e.blendFuncSeparate(n.convert(r),n.convert(s),n.convert(o),n.convert(l)),y=r,v=s,x=o,M=l);f=t,w=c}function J(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function K(t){t!==m?(q(e.CULL_FACE),t!==k&&(t===_?e.cullFace(e.BACK):t===g?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):X(e.CULL_FACE),k=t}function Z(t,n,i){t?(q(e.POLYGON_OFFSET_FILL),E===n&&C===i||(e.polygonOffset(n,i),E=n,C=i)):X(e.POLYGON_OFFSET_FILL)}function Q(t){void 0===t&&(t=e.TEXTURE0+D-1),H!==t&&(e.activeTexture(t),H=t)}return V[e.TEXTURE_2D]=G(e.TEXTURE_2D,e.TEXTURE_2D,1),V[e.TEXTURE_CUBE_MAP]=G(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),r.setClear(1),s.setClear(0),q(e.DEPTH_TEST),r.setFunc(ie),J(!1),K(_),q(e.CULL_FACE),q(e.BLEND),$(P),{buffers:{color:i,depth:r,stencil:s},initAttributes:function(){for(var e=0,t=o.length;e<t;e++)o[e]=0},enableAttribute:function(n){o[n]=1,0===l[n]&&(e.enableVertexAttribArray(n),l[n]=1),0!==c[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),c[n]=0)},enableAttributeAndDivisor:function(n,i){o[n]=1,0===l[n]&&(e.enableVertexAttribArray(n),l[n]=1),c[n]!==i&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),c[n]=i)},disableUnusedAttributes:function(){for(var t=0,n=l.length;t!==n;++t)l[t]!==o[t]&&(e.disableVertexAttribArray(t),l[t]=0)},enable:q,disable:X,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)h.push(n[i]);return h},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:$,setMaterial:function(t,n){t.side===T?X(e.CULL_FACE):q(e.CULL_FACE);var s=t.side===L;n&&(s=!s),J(s),!0===t.transparent?$(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):$(O),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),i.setMask(t.colorWrite),Z(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:J,setCullFace:K,setLineWidth:function(t){t!==A&&(F&&e.lineWidth(t),A=t)},setPolygonOffset:Z,setScissorTest:function(t){t?q(e.SCISSOR_TEST):X(e.SCISSOR_TEST)},activeTexture:Q,bindTexture:function(t,n){null===H&&Q();var i=j[H];void 0===i&&(i={type:void 0,texture:void 0},j[H]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||V[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===W.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),W.copy(t))},reset:function(){for(var t=0;t<l.length;t++)1===l[t]&&(e.disableVertexAttribArray(t),l[t]=0);u={},h=null,H=null,j={},d=null,f=null,S=null,k=null,i.reset(),r.reset(),s.reset()}}}function $r(e,t,n,i,r,s,a){var o,l="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,c={};function u(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function h(e){return Wt.isPowerOfTwo(e.width)&&Wt.isPowerOfTwo(e.height)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==ke&&e.minFilter!==Ce}function f(t,n,r,s){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log2(Math.max(r,s))}function p(t){return t===ke||t===Ae||t===Ee?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}(n),n.isVideoTexture&&delete c[n.id],a.memory.textures--}function _(t){var n=t.target;n.removeEventListener("dispose",_),function(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var s=0;s<6;s++)e.deleteFramebuffer(n.__webglFramebuffer[s]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[s]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}}(n),a.memory.textures--}function g(t,p){var _=i.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;c[t]!==n&&(c[t]=n,e.update())}(t),t.version>0&&_.__version!==t.version){var g=t.image;if(void 0===g)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==g.complete)return void function(t,i,c){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+c),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var p=u(i.image,r.maxTextureSize);(function(e){return e.wrapS!==Le||e.wrapT!==Le||e.minFilter!==ke&&e.minFilter!==Ce})(i)&&!1===h(p)&&(p=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===o&&(o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),o.width=Wt.floorPowerOfTwo(e.width),o.height=Wt.floorPowerOfTwo(e.height),o.getContext("2d").drawImage(e,0,0,o.width,o.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+o.width+"x"+o.height,e),o):e}(p));var _=h(p),g=s.convert(i.format),v=s.convert(i.type);y(e.TEXTURE_2D,i,_);var b,x=i.mipmaps;if(i.isDepthTexture){var M=e.DEPTH_COMPONENT;if(i.type===Ne){if(!l)throw new Error("Float Depth Texture only supported in WebGL2.0");M=e.DEPTH_COMPONENT32F}else l&&(M=e.DEPTH_COMPONENT16);i.format===Ke&&M===e.DEPTH_COMPONENT&&i.type!==Be&&i.type!==Fe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Be,v=s.convert(i.type)),i.format===Ze&&(M=e.DEPTH_STENCIL,i.type!==We&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=We,v=s.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,M,p.width,p.height,0,g,v,null)}else if(i.isDataTexture)if(x.length>0&&_){for(var w=0,S=x.length;w<S;w++)b=x[w],n.texImage2D(e.TEXTURE_2D,w,g,b.width,b.height,0,g,v,b.data);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,p.width,p.height,0,g,v,p.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(w=0,S=x.length;w<S;w++)b=x[w],i.format!==qe&&i.format!==Ve?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_2D,w,g,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,w,g,b.width,b.height,0,g,v,b.data);t.__maxMipLevel=x.length-1}else if(x.length>0&&_){for(w=0,S=x.length;w<S;w++)b=x[w],n.texImage2D(e.TEXTURE_2D,w,g,g,v,b);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,g,v,p),t.__maxMipLevel=0;d(i,_)&&f(e.TEXTURE_2D,i,p.width,p.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(_,t,p);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,_.__webglTexture)}function y(n,a,o){var l;if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,s.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,s.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,s.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,s.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Le&&a.wrapT===Le||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(a.minFilter)),a.minFilter!==ke&&a.minFilter!==Ce&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Ne&&null===t.get("OES_texture_float_linear"))return;if(a.type===Ie&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function v(t,r,a,o){var l=s.convert(r.texture.format),c=s.convert(r.texture.type);n.texImage2D(o,0,l,r.width,r.height,0,l,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,o,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function b(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=g,this.setTextureCube=function(t,o){var l=i.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",m),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,_=[],g=0;g<6;g++)_[g]=c||p?p?t.image[g].image:t.image[g]:u(t.image[g],r.maxCubemapSize);var v=_[0],b=h(v),x=s.convert(t.format),M=s.convert(t.type);for(y(e.TEXTURE_CUBE_MAP,t,b),g=0;g<6;g++)if(c)for(var w,S=_[g].mipmaps,L=0,T=S.length;L<T;L++)w=S[L],t.format!==qe&&t.format!==Ve?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,L,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,L,x,w.width,w.height,0,x,M,w.data);else p?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,x,_[g].width,_[g].height,0,x,M,_[g].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,x,x,M,_[g]);l.__maxMipLevel=c?S.length-1:0,d(t,b)&&f(e.TEXTURE_CUBE_MAP,t,v.width,v.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=i.get(t),s=i.get(t.texture);t.addEventListener("dispose",_),s.__webglTexture=e.createTexture(),a.memory.textures++;var o=!0===t.isWebGLRenderTargetCube,l=h(t);if(o){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(o){for(n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,l),c=0;c<6;c++)v(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);d(t.texture,l)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,s.__webglTexture),y(e.TEXTURE_2D,t.texture,l),v(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,l)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ke)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ze)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var s=0;s<6;s++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[s]),n.__webglDepthbuffer[s]=e.createRenderbuffer(),b(n.__webglDepthbuffer[s],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),b(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(d(r,h(t))){var s=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(s,a),f(s,r,t.width,t.height),n.bindTexture(s,null)}}}function Jr(e,t){return{convert:function(n){var i;if(n===Se)return e.REPEAT;if(n===Le)return e.CLAMP_TO_EDGE;if(n===Te)return e.MIRRORED_REPEAT;if(n===ke)return e.NEAREST;if(n===Ae)return e.NEAREST_MIPMAP_NEAREST;if(n===Ee)return e.NEAREST_MIPMAP_LINEAR;if(n===Ce)return e.LINEAR;if(n===De)return e.LINEAR_MIPMAP_NEAREST;if(n===Oe)return e.LINEAR_MIPMAP_LINEAR;if(n===Pe)return e.UNSIGNED_BYTE;if(n===He)return e.UNSIGNED_SHORT_4_4_4_4;if(n===je)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ue)return e.UNSIGNED_SHORT_5_6_5;if(n===Re)return e.BYTE;if(n===ze)return e.SHORT;if(n===Be)return e.UNSIGNED_SHORT;if(n===Ye)return e.INT;if(n===Fe)return e.UNSIGNED_INT;if(n===Ne)return e.FLOAT;if(n===Ie&&null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===Ge)return e.ALPHA;if(n===Ve)return e.RGB;if(n===qe)return e.RGBA;if(n===Xe)return e.LUMINANCE;if(n===$e)return e.LUMINANCE_ALPHA;if(n===Ke)return e.DEPTH_COMPONENT;if(n===Ze)return e.DEPTH_STENCIL;if(n===F)return e.FUNC_ADD;if(n===N)return e.FUNC_SUBTRACT;if(n===I)return e.FUNC_REVERSE_SUBTRACT;if(n===U)return e.ZERO;if(n===W)return e.ONE;if(n===G)return e.SRC_COLOR;if(n===V)return e.ONE_MINUS_SRC_COLOR;if(n===q)return e.SRC_ALPHA;if(n===X)return e.ONE_MINUS_SRC_ALPHA;if(n===$)return e.DST_ALPHA;if(n===J)return e.ONE_MINUS_DST_ALPHA;if(n===K)return e.DST_COLOR;if(n===Z)return e.ONE_MINUS_DST_COLOR;if(n===Q)return e.SRC_ALPHA_SATURATE;if((n===Qe||n===et||n===tt||n===nt)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Qe)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===et)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===tt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===nt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===it||n===rt||n===st||n===at)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===it)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===rt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===st)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===at)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ot&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===lt||n===ct||n===ut||n===ht||n===dt||n===ft||n===pt||n===mt||n===_t||n===gt||n===yt||n===vt||n===bt||n===xt)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if((n===H||n===j)&&null!==(i=t.get("EXT_blend_minmax"))){if(n===H)return i.MIN_EXT;if(n===j)return i.MAX_EXT}return n===We&&null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}}}function Kr(e,t,n,i){Cn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Zr(e){Kr.call(this),this.cameras=e||[]}function Qr(e){var t=this,n=null,i=null,r=null,s=new Vt,a=new Vt;"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData);var o=new Vt,l=new qt,c=new Xt,u=new Kr;u.bounds=new sn(0,0,.5,1),u.layers.enable(1);var h=new Kr;h.bounds=new sn(.5,0,.5,1),h.layers.enable(2);var d,f,p=new Zr([u,h]);function m(){if(null!==n&&n.isPresenting){var i=n.getEyeParameters("left"),r=i.renderWidth,s=i.renderHeight;f=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(2*r,s,1)}else t.enabled&&e.setDrawingBufferSize(d.width,d.height,f)}p.layers.enable(1),p.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",m,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e)},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(i);var d=n.stageParameters;d?s.fromArray(d.sittingToStandingTransform):s.makeTranslation(0,t.userHeight,0);var f=i.pose,m=null!==r?r:e;if(m.matrix.copy(s),m.matrix.decompose(m.position,m.quaternion,m.scale),null!==f.orientation&&(l.fromArray(f.orientation),m.quaternion.multiply(l)),null!==f.position&&(l.setFromRotationMatrix(s),c.fromArray(f.position),c.applyQuaternion(l),m.position.add(c)),m.updateMatrixWorld(),!1===n.isPresenting)return e;u.near=e.near,h.near=e.near,u.far=e.far,h.far=e.far,p.matrixWorld.copy(e.matrixWorld),p.matrixWorldInverse.copy(e.matrixWorldInverse),u.matrixWorldInverse.fromArray(i.leftViewMatrix),h.matrixWorldInverse.fromArray(i.rightViewMatrix),a.getInverse(s),u.matrixWorldInverse.multiply(a),h.matrixWorldInverse.multiply(a);var _=m.parent;null!==_&&(o.getInverse(_.matrixWorld),u.matrixWorldInverse.multiply(o),h.matrixWorldInverse.multiply(o)),u.matrixWorld.getInverse(u.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),u.projectionMatrix.fromArray(i.leftProjectionMatrix),h.projectionMatrix.fromArray(i.rightProjectionMatrix),p.projectionMatrix.copy(u.projectionMatrix);var g=n.getLayers();if(g.length){var y=g[0];null!==y.leftBounds&&4===y.leftBounds.length&&u.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&h.bounds.fromArray(y.rightBounds)}return p},this.getStandingMatrix=function(){return s},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",m)}}function es(e){console.log("THREE.WebGLRenderer",f);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=de,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,m,_,g,y,v,b,x,M,w,S,L,T,k,A,C,D,O,P=this,R=!1,z=null,B=null,Y=-1,F="",N=null,I=null,H=new sn,j=new sn,U=null,W=0,G=t.width,V=t.height,q=1,X=new sn(0,0,G,V),$=new sn(0,0,G,V),J=!1,K=new dn,Z=new vi,Q=!1,ee=!1,te=new Vt,ne=new Xt;function ie(){return null===z?q:1}try{var re={alpha:i,depth:r,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c};if(t.addEventListener("webglcontextlost",le,!1),t.addEventListener("webglcontextrestored",ce,!1),null===(d=n||t.getContext("webgl",re)||t.getContext("experimental-webgl",re)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function se(){(p=new bi(d)).get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_float_linear"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays"),O=new Jr(d,p),m=new yi(d,p,e),(_=new Xr(d,p,O)).scissor(j.copy($).multiplyScalar(q)),_.viewport(H.copy(X).multiplyScalar(q)),g=new wi(d),y=new Lr,v=new $r(d,p,_,y,m,O,g),b=new xn(d),x=new xi(d,b,g),M=new Ti(x,g),k=new Li(d),w=new Sr(P,p,m),S=new Er,L=new jr,T=new _i(P,_,x,o),A=new gi(d,p,g),C=new Mi(d,p,g),D=new qr(P,d,_,v,m),g.programs=w.programs,P.context=d,P.capabilities=m,P.extensions=p,P.properties=y,P.renderLists=S,P.state=_,P.info=g}se();var ae=new Qr(P);this.vr=ae;var oe=new Gr(P,M,m.maxTextureSize);function le(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,se()}function ue(e){var t=e.target;t.removeEventListener("dispose",ue),function(e){he(e),y.remove(e)}(t)}function he(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&w.releaseProgram(t)}this.shadowMap=oe,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var e=p.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=p.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(e){void 0!==e&&(q=e,this.setSize(G,V,!1))},this.getSize=function(){return{width:G,height:V}},this.setSize=function(e,n,i){var r=ae.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(G=e,V=n,t.width=e*q,t.height=n*q,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:G*q,height:V*q}},this.setDrawingBufferSize=function(e,n,i){G=e,V=n,q=i,t.width=e*i,t.height=n*i,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return H},this.setViewport=function(e,t,n,i){X.set(e,V-t-i,n,i),_.viewport(H.copy(X).multiplyScalar(q))},this.setScissor=function(e,t,n,i){$.set(e,V-t-i,n,i),_.scissor(j.copy($).multiplyScalar(q))},this.setScissorTest=function(e){_.setScissorTest(J=e)},this.getClearColor=function(){return T.getClearColor()},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=d.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=d.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=d.STENCIL_BUFFER_BIT),d.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.dispose=function(){t.removeEventListener("webglcontextlost",le,!1),t.removeEventListener("webglcontextrestored",ce,!1),S.dispose(),L.dispose(),y.dispose(),M.dispose(),ae.dispose(),_e()},this.renderBufferImmediate=function(e,t,n){_.initAttributes();var i=y.get(e);e.hasPositions&&!i.position&&(i.position=d.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=d.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=d.createBuffer()),e.hasColors&&!i.color&&(i.color=d.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(d.bindBuffer(d.ARRAY_BUFFER,i.position),d.bufferData(d.ARRAY_BUFFER,e.positionArray,d.DYNAMIC_DRAW),_.enableAttribute(r.position),d.vertexAttribPointer(r.position,3,d.FLOAT,!1,0,0)),e.hasNormals){if(d.bindBuffer(d.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var s=0,a=3*e.count;s<a;s+=9){var o=e.normalArray,l=(o[s+0]+o[s+3]+o[s+6])/3,c=(o[s+1]+o[s+4]+o[s+7])/3,u=(o[s+2]+o[s+5]+o[s+8])/3;o[s+0]=l,o[s+1]=c,o[s+2]=u,o[s+3]=l,o[s+4]=c,o[s+5]=u,o[s+6]=l,o[s+7]=c,o[s+8]=u}d.bufferData(d.ARRAY_BUFFER,e.normalArray,d.DYNAMIC_DRAW),_.enableAttribute(r.normal),d.vertexAttribPointer(r.normal,3,d.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(d.bindBuffer(d.ARRAY_BUFFER,i.uv),d.bufferData(d.ARRAY_BUFFER,e.uvArray,d.DYNAMIC_DRAW),_.enableAttribute(r.uv),d.vertexAttribPointer(r.uv,2,d.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==E&&(d.bindBuffer(d.ARRAY_BUFFER,i.color),d.bufferData(d.ARRAY_BUFFER,e.colorArray,d.DYNAMIC_DRAW),_.enableAttribute(r.color),d.vertexAttribPointer(r.color,3,d.FLOAT,!1,0,0)),_.disableUnusedAttributes(),d.drawArrays(d.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,s){var a=r.isMesh&&r.matrixWorld.determinant()<0;_.setMaterial(i,a);var o=we(e,t,i,r),l=n.id+"_"+o.id+"_"+(!0===i.wireframe),c=!1;l!==F&&(F=l,c=!0),r.morphTargetInfluences&&(k.update(r,n,i,o),c=!0);var u,h=n.index,f=n.attributes.position,m=1;!0===i.wireframe&&(h=x.getWireframeAttribute(n),m=2);var g=A;null!==h&&(u=b.get(h),(g=C).setIndex(u)),c&&(function(e,t,n,i){if(n&&n.isInstancedBufferGeometry&&null===p.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===i&&(i=0),_.initAttributes();var r=n.attributes,s=t.getAttributes(),a=e.defaultAttributeValues;for(var o in s){var l=s[o];if(l>=0){var c=r[o];if(void 0!==c){var u=c.normalized,h=c.itemSize,f=b.get(c);if(void 0===f)continue;var m=f.buffer,g=f.type,y=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var v=c.data,x=v.stride,M=c.offset;v&&v.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(l,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):_.enableAttribute(l),d.bindBuffer(d.ARRAY_BUFFER,m),d.vertexAttribPointer(l,h,g,u,x*y,(i*x+M)*y)}else c.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(l,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):_.enableAttribute(l),d.bindBuffer(d.ARRAY_BUFFER,m),d.vertexAttribPointer(l,h,g,u,0,i*h*y)}else if(void 0!==a){var w=a[o];if(void 0!==w)switch(w.length){case 2:d.vertexAttrib2fv(l,w);break;case 3:d.vertexAttrib3fv(l,w);break;case 4:d.vertexAttrib4fv(l,w);break;default:d.vertexAttrib1fv(l,w)}}}}_.disableUnusedAttributes()}}(i,o,n),null!==h&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,u.buffer));var y=1/0;null!==h?y=h.count:void 0!==f&&(y=f.count);var v=n.drawRange.start*m,M=n.drawRange.count*m,w=null!==s?s.start*m:0,S=null!==s?s.count*m:1/0,L=Math.max(v,w),T=Math.min(y,v+M,w+S)-1,E=Math.max(0,T-L+1);if(0!==E){if(r.isMesh)if(!0===i.wireframe)_.setLineWidth(i.wireframeLinewidth*ie()),g.setMode(d.LINES);else switch(r.drawMode){case Dt:g.setMode(d.TRIANGLES);break;case Ot:g.setMode(d.TRIANGLE_STRIP);break;case Pt:g.setMode(d.TRIANGLE_FAN)}else if(r.isLine){var D=i.linewidth;void 0===D&&(D=1),_.setLineWidth(D*ie()),r.isLineSegments?g.setMode(d.LINES):r.isLineLoop?g.setMode(d.LINE_LOOP):g.setMode(d.LINE_STRIP)}else r.isPoints&&g.setMode(d.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,L,E):g.render(L,E)}},this.compile=function(e,t){(h=L.get(e,t)).init(),e.traverse((function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Me(t.material[n],e.fog,t);else Me(t.material,e.fog,t)}))};var fe,pe=!1,me=null;function _e(){pe=!1}function ge(){var e=ae.getDevice();e&&e.isPresenting?e.requestAnimationFrame(ye):window.requestAnimationFrame(ye)}function ye(e){!1!==pe&&(me(e),ge())}function ve(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!K.intersectsSprite(e)||h.pushSprite(e);else if(e.isImmediateRenderObject)n&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te),u.push(e,null,e.material,ne.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||K.intersectsObject(e))){n&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te);var i=M.update(e),r=e.material;if(Array.isArray(r))for(var s=i.groups,a=0,o=s.length;a<o;a++){var l=s[a],c=r[l.materialIndex];c&&c.visible&&u.push(e,i,c,ne.z,l)}else r.visible&&u.push(e,i,r,ne.z,null)}var d=e.children;for(a=0,o=d.length;a<o;a++)ve(d[a],t,n)}}function be(e,t,n,i){for(var r=0,s=e.length;r<s;r++){var a=e[r],o=a.object,l=a.geometry,c=void 0===i?a.material:i,u=a.group;if(n.isArrayCamera){I=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(o.layers.test(p.layers)){var m=p.bounds,g=m.x*G,y=m.y*V,v=m.z*G,b=m.w*V;_.viewport(H.set(g,y,v,b).multiplyScalar(q)),xe(o,t,p,l,c,u)}}}else I=null,xe(o,t,n,l,c,u)}}function xe(e,t,n,i,r,s){if(e.onBeforeRender(P,t,n,i,r,s),h=L.get(t,I||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;_.setMaterial(r,a);var o=we(n,t.fog,r,e);F="",function(e,t,n){e.render((function(e){P.renderBufferImmediate(e,t,n)}))}(e,o,r)}else P.renderBufferDirect(n,t.fog,i,r,e,s);e.onAfterRender(P,t,n,i,r,s),h=L.get(t,I||n)}function Me(e,t,n){var i=y.get(e),r=h.state.lights,s=h.state.shadowsArray,a=w.getParameters(e,r.state,s,t,Z.numPlanes,Z.numIntersection,n),o=w.getProgramCode(e,a),l=i.program,c=!0;if(void 0===l)e.addEventListener("dispose",ue);else if(l.code!==o)he(e);else if(i.lightsHash!==r.state.hash)y.update(e,"lightsHash",r.state.hash),c=!1;else{if(void 0!==a.shaderID)return;c=!1}if(c){if(a.shaderID){var u=bn[a.shaderID];i.shader={name:e.type,uniforms:mn.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,P),l=w.acquireProgram(e,i.shader,a,o),i.program=l,e.program=l}var d=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<P.maxMorphTargets;f++)d["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,f=0;f<P.maxMorphNormals;f++)d["morphNormal"+f]>=0&&e.numSupportedMorphNormals++;var p=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=Z.numPlanes,i.numIntersection=Z.numIntersection,p.clippingPlanes=Z.uniform),i.fog=t,i.lightsHash=r.state.hash,e.lights&&(p.ambientLightColor.value=r.state.ambient,p.directionalLights.value=r.state.directional,p.spotLights.value=r.state.spot,p.rectAreaLights.value=r.state.rectArea,p.pointLights.value=r.state.point,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),_=dr.seqWithValue(m.seq,p);i.uniformsList=_}function we(e,t,n,i){W=0;var r=y.get(n),s=h.state.lights;if(Q&&(ee||e!==N)){var a=e===N&&n.id===Y;Z.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,a)}!1===n.needsUpdate&&(void 0===r.program||n.fog&&r.fog!==t||n.lights&&r.lightsHash!==s.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Z.numPlanes&&r.numIntersection===Z.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Me(n,t,i),n.needsUpdate=!1);var o,l,c=!1,u=!1,f=!1,p=r.program,g=p.getUniforms(),v=r.shader.uniforms;if(_.useProgram(p.program)&&(c=!0,u=!0,f=!0),n.id!==Y&&(Y=n.id,u=!0),c||e!==N){if(g.setValue(d,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&g.setValue(d,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),N!==(I||e)&&(N=I||e,u=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var b=g.map.cameraPosition;void 0!==b&&b.setValue(d,ne.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(d,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(d,i,"bindMatrix"),g.setOptional(d,i,"bindMatrixInverse");var x=i.skeleton;if(x){var M=x.bones;if(m.floatVertexTextures){if(void 0===x.boneTexture){var w=Math.sqrt(4*M.length);w=Wt.ceilPowerOfTwo(w),w=Math.max(w,4);var S=new Float32Array(w*w*4);S.set(x.boneMatrices);var L=new ln(S,w,w,qe,Ne);L.needsUpdate=!0,x.boneMatrices=S,x.boneTexture=L,x.boneTextureSize=w}g.setValue(d,"boneTexture",x.boneTexture),g.setValue(d,"boneTextureSize",x.boneTextureSize)}else g.setOptional(d,x,"boneMatrices")}}return u&&(g.setValue(d,"toneMappingExposure",P.toneMappingExposure),g.setValue(d,"toneMappingWhitePoint",P.toneMappingWhitePoint),n.lights&&(l=f,(o=v).ambientLightColor.needsUpdate=l,o.directionalLights.needsUpdate=l,o.pointLights.needsUpdate=l,o.spotLights.needsUpdate=l,o.rectAreaLights.needsUpdate=l,o.hemisphereLights.needsUpdate=l),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(v,t),n.isMeshBasicMaterial?Se(v,n):n.isMeshLambertMaterial?(Se(v,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(v,n)):n.isMeshPhongMaterial?(Se(v,n),n.isMeshToonMaterial?function(e,t){Le(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(v,n):Le(v,n)):n.isMeshStandardMaterial?(Se(v,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Te(e,t)}(v,n):Te(v,n)):n.isMeshDepthMaterial?(Se(v,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(v,n)):n.isMeshDistanceMaterial?(Se(v,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(v,n)):n.isMeshNormalMaterial?(Se(v,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(v,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(v,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(v,n)):n.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*q,e.scale.value=.5*V,e.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var n=t.map.offset,i=t.map.repeat,r=t.map.rotation,s=t.map.center;t.map.matrix.setUvTransform(n.x,n.y,i.x,i.y,r,s.x,s.y)}e.uvTransform.value.copy(t.map.matrix)}}(v,n):n.isShadowMaterial&&(v.color.value=n.color,v.opacity.value=n.opacity),void 0!==v.ltc_1&&(v.ltc_1.value=vn.LTC_1),void 0!==v.ltc_2&&(v.ltc_2.value=vn.LTC_2),dr.upload(d,r.uniformsList,v,P)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(dr.upload(d,r.uniformsList,v,P),n.uniformsNeedUpdate=!1),g.setValue(d,"modelViewMatrix",i.modelViewMatrix),g.setValue(d,"normalMatrix",i.normalMatrix),g.setValue(d,"modelMatrix",i.matrixWorld),p}function Se(e,t){var n;if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=y.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var i=n.offset,r=n.repeat,s=n.rotation,a=n.center;n.matrix.setUvTransform(i.x,i.y,r.x,r.y,s,a.x,a.y)}e.uvTransform.value.copy(n.matrix)}}function Le(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Te(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}this.animate=function(e){null!==(me=e)?pe||(ge(),pe=!0):_e()},this.render=function(e,t,n,i){if(t&&t.isCamera){if(!R){F="",Y=-1,N=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ae.enabled&&(t=ae.getCamera(t)),(h=L.get(e,t)).init(),e.onBeforeRender(P,e,t,n),te.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),K.setFromMatrix(te),ee=this.localClippingEnabled,Q=Z.init(this.clippingPlanes,ee,t),(u=S.get(e,t)).init(),ve(e,t,P.sortObjects),!0===P.sortObjects&&u.sort(),Q&&Z.beginShadows();var r=h.state.shadowsArray;oe.render(r,e,t),h.setupLights(t),Q&&Z.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),T.render(u,e,t,i);var s=u.opaque,a=u.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;s.length&&be(s,e,t,o),a.length&&be(a,e,t,o)}else s.length&&be(s,e,t),a.length&&be(a,e,t);var l=h.state.spritesArray;D.render(l,e,t),n&&v.updateRenderTargetMipmap(n),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),e.onAfterRender(P,e,t),ae.enabled&&ae.submitFrame(),u=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=W;return e>=m.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+m.maxTextures),W+=1,e},this.setTexture2D=(fe=!1,function(e,t){e&&e.isWebGLRenderTarget&&(fe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),fe=!0),e=e.texture),v.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),v.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v.setTextureCube(t,n):v.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return z},this.setRenderTarget=function(e){z=e,e&&void 0===y.get(e).__webglFramebuffer&&v.setupRenderTarget(e);var t=null,n=!1;if(e){var i=y.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,H.copy(e.viewport),j.copy(e.scissor),U=e.scissorTest}else H.copy(X).multiplyScalar(q),j.copy($).multiplyScalar(q),U=J;if(B!==t&&(d.bindFramebuffer(d.FRAMEBUFFER,t),B=t),_.viewport(H),_.scissor(j),_.setScissorTest(U),n){var r=y.get(e.texture);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,s){if(e&&e.isWebGLRenderTarget){var a=y.get(e).__webglFramebuffer;if(a){var o=!1;a!==B&&(d.bindFramebuffer(d.FRAMEBUFFER,a),o=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==qe&&O.convert(c)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Pe||O.convert(u)===d.getParameter(d.IMPLEMENTATION_COLOR_READ_TYPE)||u===Ne&&(p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||u===Ie&&p.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");d.checkFramebufferStatus(d.FRAMEBUFFER)===d.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&d.readPixels(t,n,i,r,O.convert(c),O.convert(u),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&d.bindFramebuffer(d.FRAMEBUFFER,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,s=O.convert(t.format);this.setTexture2D(t,0),d.copyTexImage2D(d.TEXTURE_2D,n||0,s,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,s=t.image.height,a=O.convert(n.format),o=O.convert(n.type),l=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),d.texSubImage2D(d.TEXTURE_2D,i||0,e.x,e.y,r,s,a,o,l)}}function ts(e,t){this.name="",this.color=new gn(e),this.density=void 0!==t?t:25e-5}function ns(e,t,n){this.name="",this.color=new gn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function is(){En.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function rs(e){ci.call(this),this.type="SpriteMaterial",this.color=new gn(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function ss(e){En.call(this),this.type="Sprite",this.material=void 0!==e?e:new rs,this.center=new Gt(.5,.5)}function as(){En.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function os(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Vt)}}function ls(){En.call(this),this.type="Bone"}function cs(e,t){mi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Vt,this.bindMatrixInverse=new Vt;var n=new os(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function us(e){ci.call(this),this.type="LineBasicMaterial",this.color=new gn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function hs(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new ds(e,t);En.call(this),this.type="Line",this.geometry=void 0!==e?e:new Jn,this.material=void 0!==t?t:new us({color:16777215*Math.random()})}function ds(e,t){hs.call(this,e,t),this.type="LineSegments"}function fs(e,t){hs.call(this,e,t),this.type="LineLoop"}function ps(e){ci.call(this),this.type="PointsMaterial",this.color=new gn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function ms(e,t){En.call(this),this.type="Points",this.geometry=void 0!==e?e:new Jn,this.material=void 0!==t?t:new ps({color:16777215*Math.random()})}function _s(){En.call(this),this.type="Group"}function gs(e,t,n,i,r,s,a,o,l){rn.call(this,e,t,n,i,r,s,a,o,l),this.generateMipmaps=!1}function ys(e,t,n,i,r,s,a,o,l,c,u,h){rn.call(this,null,s,a,o,l,c,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function vs(e,t,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:Ke)!==Ke&&c!==Ze)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ke&&(n=Be),void 0===n&&c===Ze&&(n=We),rn.call(this,null,i,r,s,a,o,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:ke,this.minFilter=void 0!==o?o:ke,this.flipY=!1,this.generateMipmaps=!1}function bs(e){Jn.call(this),this.type="WireframeGeometry";var t,n,i,r,s,a,o,l,c,u,h=[],d=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var _=m[t];for(n=0;n<3;n++)o=_[p[n]],l=_[p[(n+1)%3]],d[0]=Math.min(o,l),d[1]=Math.max(o,l),void 0===f[c=d[0]+","+d[1]]&&(f[c]={index1:d[0],index2:d[1]})}for(c in f)a=f[c],u=e.vertices[a.index1],h.push(u.x,u.y,u.z),u=e.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var g,y,v,b,x,M,w;if(u=new Xt,null!==e.index){for(g=e.attributes.position,y=e.index,0===(v=e.groups).length&&(v=[{start:0,count:y.count,materialIndex:0}]),r=0,s=v.length;r<s;++r)for(t=x=(b=v[r]).start,i=x+b.count;t<i;t+=3)for(n=0;n<3;n++)o=y.getX(t+n),l=y.getX(t+(n+1)%3),d[0]=Math.min(o,l),d[1]=Math.max(o,l),void 0===f[c=d[0]+","+d[1]]&&(f[c]={index1:d[0],index2:d[1]});for(c in f)a=f[c],u.fromBufferAttribute(g,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(g,a.index2),h.push(u.x,u.y,u.z)}else for(t=0,i=(g=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)M=3*t+n,u.fromBufferAttribute(g,M),h.push(u.x,u.y,u.z),w=3*t+(n+1)%3,u.fromBufferAttribute(g,w),h.push(u.x,u.y,u.z)}this.addAttribute("position",new Gn(h,3))}function xs(e,t,n){Bn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ms(e,t,n)),this.mergeVertices()}function Ms(e,t,n){Jn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,s=[],a=[],o=[],l=[],c=1e-5,u=new Xt,h=new Xt,d=new Xt,f=new Xt,p=new Xt,m=t+1;for(i=0;i<=n;i++){var _=i/n;for(r=0;r<=t;r++){var g=r/t;e(g,_,h),a.push(h.x,h.y,h.z),g-c>=0?(e(g-c,_,d),f.subVectors(h,d)):(e(g+c,_,d),f.subVectors(d,h)),_-c>=0?(e(g,_-c,d),p.subVectors(h,d)):(e(g,_+c,d),p.subVectors(d,h)),u.crossVectors(f,p).normalize(),o.push(u.x,u.y,u.z),l.push(g,_)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var y=i*m+r,v=i*m+r+1,b=(i+1)*m+r+1,x=(i+1)*m+r;s.push(y,v,x),s.push(v,b,x)}this.setIndex(s),this.addAttribute("position",new Gn(a,3)),this.addAttribute("normal",new Gn(o,3)),this.addAttribute("uv",new Gn(l,2))}function ws(e,t,n,i){Bn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Ss(e,t,n,i)),this.mergeVertices()}function Ss(e,t,n,i){Jn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],s=[];function a(e,t,n,i){var r,s,a=Math.pow(2,i),l=[];for(r=0;r<=a;r++){l[r]=[];var c=e.clone().lerp(n,r/a),u=t.clone().lerp(n,r/a),h=a-r;for(s=0;s<=h;s++)l[r][s]=0===s&&r===a?c:c.clone().lerp(u,s/h)}for(r=0;r<a;r++)for(s=0;s<2*(a-r)-1;s++){var d=Math.floor(s/2);s%2==0?(o(l[r][d+1]),o(l[r+1][d]),o(l[r][d])):(o(l[r][d+1]),o(l[r+1][d+1]),o(l[r+1][d]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var n=new Xt,i=new Xt,r=new Xt,s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),a(n,i,r,e)}(i=i||0),function(e){for(var t=new Xt,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new Xt,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=u(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;s.push(n,1-i)}(function(){for(var e=new Xt,t=new Xt,n=new Xt,i=new Xt,a=new Gt,o=new Gt,l=new Gt,h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(s[d+0],s[d+1]),o.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var f=u(i);c(a,d+0,e,f),c(o,d+2,t,f),c(l,d+4,n,f)}})(),function(){for(var e=0;e<s.length;e+=6){var t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.addAttribute("position",new Gn(r,3)),this.addAttribute("normal",new Gn(r.slice(),3)),this.addAttribute("uv",new Gn(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Ls(e,t){Bn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ts(e,t)),this.mergeVertices()}function Ts(e,t){Ss.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ks(e,t){Bn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new As(e,t)),this.mergeVertices()}function As(e,t){Ss.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Es(e,t){Bn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Cs(e,t)),this.mergeVertices()}function Cs(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Ss.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ds(e,t){Bn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Os(e,t)),this.mergeVertices()}function Os(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];Ss.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ps(e,t,n,i,r,s){Bn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Rs(e,t,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Rs(e,t,n,i,r){Jn.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var a,o,l=new Xt,c=new Xt,u=new Gt,h=new Xt,d=[],f=[],p=[],m=[];function _(r){h=e.getPointAt(r/t,h);var a=s.normals[r],u=s.binormals[r];for(o=0;o<=i;o++){var p=o/i*Math.PI*2,m=Math.sin(p),_=-Math.cos(p);c.x=_*a.x+m*u.x,c.y=_*a.y+m*u.y,c.z=_*a.z+m*u.z,c.normalize(),f.push(c.x,c.y,c.z),l.x=h.x+n*c.x,l.y=h.y+n*c.y,l.z=h.z+n*c.z,d.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)_(a);_(!1===r?t:0),function(){for(a=0;a<=t;a++)for(o=0;o<=i;o++)u.x=a/t,u.y=o/i,p.push(u.x,u.y)}(),function(){for(o=1;o<=t;o++)for(a=1;a<=i;a++){var e=(i+1)*(o-1)+(a-1),n=(i+1)*o+(a-1),r=(i+1)*o+a,s=(i+1)*(o-1)+a;m.push(e,n,s),m.push(n,r,s)}}()}(),this.setIndex(m),this.addAttribute("position",new Gn(d,3)),this.addAttribute("normal",new Gn(f,3)),this.addAttribute("uv",new Gn(p,2))}function zs(e,t,n,i,r,s,a){Bn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Bs(e,t,n,i,r,s)),this.mergeVertices()}function Bs(e,t,n,i,r,s){Jn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,s=s||3;var a,o,l=[],c=[],u=[],h=[],d=new Xt,f=new Xt,p=new Xt,m=new Xt,_=new Xt,g=new Xt,y=new Xt;for(a=0;a<=n;++a){var v=a/n*r*Math.PI*2;for(k(v,r,s,e,p),k(v+.01,r,s,e,m),g.subVectors(m,p),y.addVectors(m,p),_.crossVectors(g,y),y.crossVectors(_,g),_.normalize(),y.normalize(),o=0;o<=i;++o){var b=o/i*Math.PI*2,x=-t*Math.cos(b),M=t*Math.sin(b);d.x=p.x+(x*y.x+M*_.x),d.y=p.y+(x*y.y+M*_.y),d.z=p.z+(x*y.z+M*_.z),c.push(d.x,d.y,d.z),f.subVectors(d,p).normalize(),u.push(f.x,f.y,f.z),h.push(a/n),h.push(o/i)}}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var w=(i+1)*(o-1)+(a-1),S=(i+1)*o+(a-1),L=(i+1)*o+a,T=(i+1)*(o-1)+a;l.push(w,S,T),l.push(S,L,T)}function k(e,t,n,i,r){var s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(l),this.addAttribute("position",new Gn(c,3)),this.addAttribute("normal",new Gn(u,3)),this.addAttribute("uv",new Gn(h,2))}function Ys(e,t,n,i,r){Bn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Fs(e,t,n,i,r)),this.mergeVertices()}function Fs(e,t,n,i,r){Jn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var s,a,o=[],l=[],c=[],u=[],h=new Xt,d=new Xt,f=new Xt;for(s=0;s<=n;s++)for(a=0;a<=i;a++){var p=a/i*r,m=s/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),f.subVectors(d,h).normalize(),c.push(f.x,f.y,f.z),u.push(a/i),u.push(s/n)}for(s=1;s<=n;s++)for(a=1;a<=i;a++){var _=(i+1)*s+a-1,g=(i+1)*(s-1)+a-1,y=(i+1)*(s-1)+a,v=(i+1)*s+a;o.push(_,g,v),o.push(g,y,v)}this.setIndex(o),this.addAttribute("position",new Gn(l,3)),this.addAttribute("normal",new Gn(c,3)),this.addAttribute("uv",new Gn(u,2))}Ur.prototype=Object.create(ci.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isMeshDepthMaterial=!0,Ur.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Wr.prototype=Object.create(ci.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isMeshDistanceMaterial=!0,Wr.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Vr.prototype=Object.create(rn.prototype),Vr.prototype.constructor=Vr,Kr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Kr,isPerspectiveCamera:!0,copy:function(e,t){return Cn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Wt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Wt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Wt.RAD2DEG*Math.atan(Math.tan(.5*Wt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Wt.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){var a=s.fullWidth,o=s.fullHeight;r+=s.offsetX*i/a,t-=s.offsetY*n/o,i*=s.width/a,n*=s.height/o}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=En.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Zr.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Zr,isArrayCamera:!0}),ts.prototype.isFogExp2=!0,ts.prototype.clone=function(){return new ts(this.color.getHex(),this.density)},ts.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ns.prototype.isFog=!0,ns.prototype.clone=function(){return new ns(this.color.getHex(),this.near,this.far)},ns.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},is.prototype=Object.assign(Object.create(En.prototype),{constructor:is,copy:function(e,t){return En.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=En.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),rs.prototype=Object.create(ci.prototype),rs.prototype.constructor=rs,rs.prototype.isSpriteMaterial=!0,rs.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},ss.prototype=Object.assign(Object.create(En.prototype),{constructor:ss,isSprite:!0,raycast:(Dr=new Xt,Or=new Xt,Pr=new Xt,function(e,t){Or.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(Or,Dr),Pr.setFromMatrixScale(this.matrixWorld);var n=Pr.x*Pr.y/4;if(!(Or.distanceToSquared(Dr)>n)){var i=e.ray.origin.distanceTo(Dr);i<e.near||i>e.far||t.push({distance:i,point:Dr.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return En.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),as.prototype=Object.assign(Object.create(En.prototype),{constructor:as,copy:function(e){En.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(Rr=new Xt,function(e,t){Rr.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Rr);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new Xt,t=new Xt;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var s=1,a=i.length;s<a&&r>=i[s].distance;s++)i[s-1].object.visible=!1,i[s].object.visible=!0;for(;s<a;s++)i[s].object.visible=!1}}}(),toJSON:function(e){var t=En.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var s=n[i];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}}),Object.assign(os.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Vt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(zr=new Vt,Br=new Vt,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,s=e.length;r<s;r++){var a=e[r]?e[r].matrixWorld:Br;zr.multiplyMatrices(a,t[r]),zr.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new os(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),ls.prototype=Object.assign(Object.create(En.prototype),{constructor:ls,isBone:!0}),cs.prototype=Object.assign(Object.create(mi.prototype),{constructor:cs,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new ls,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new sn,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),(e=1/i.manhattanLength())!=1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){mi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),us.prototype=Object.create(ci.prototype),us.prototype.constructor=us,us.prototype.isLineBasicMaterial=!0,us.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},hs.prototype=Object.assign(Object.create(En.prototype),{constructor:hs,isLine:!0,computeLineDistances:(Yr=new Xt,Fr=new Xt,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)Yr.fromBufferAttribute(t,i-1),Fr.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Yr.distanceTo(Fr);e.addAttribute("lineDistance",new THREE.Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var s=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=s.length;i<r;i++)n[i]=n[i-1],n[i]+=s[i-1].distanceTo(s[i])}return this}),raycast:function(){var e=new Vt,t=new di,n=new un;return function(i,r){var s=i.linePrecision,a=s*s,o=this.geometry,l=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var c=new Xt,u=new Xt,h=new Xt,d=new Xt,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var p=o.index,m=o.attributes.position.array;if(null!==p)for(var _=p.array,g=0,y=_.length-1;g<y;g+=f){var v=_[g],b=_[g+1];c.fromArray(m,3*v),u.fromArray(m,3*b),t.distanceSqToSegment(c,u,d,h)>a||(d.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(d))<i.near||w>i.far||r.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,y=m.length/3-1;g<y;g+=f)c.fromArray(m,3*g),u.fromArray(m,3*g+3),t.distanceSqToSegment(c,u,d,h)>a||(d.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(d))<i.near||w>i.far||r.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(o.isGeometry){var x=o.vertices,M=x.length;for(g=0;g<M-1;g+=f){var w;t.distanceSqToSegment(x[g],x[g+1],d,h)>a||(d.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(d))<i.near||w>i.far||r.push({distance:w,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ds.prototype=Object.assign(Object.create(hs.prototype),{constructor:ds,isLineSegments:!0,computeLineDistances:function(){var e=new Xt,t=new Xt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],s=0,a=i.count;s<a;s+=2)e.fromBufferAttribute(i,s),t.fromBufferAttribute(i,s+1),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+e.distanceTo(t);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var o=n.vertices;for(r=n.lineDistances,s=0,a=o.length;s<a;s+=2)e.copy(o[s]),t.copy(o[s+1]),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+e.distanceTo(t)}return this}}()}),fs.prototype=Object.assign(Object.create(hs.prototype),{constructor:fs,isLineLoop:!0}),ps.prototype=Object.create(ci.prototype),ps.prototype.constructor=ps,ps.prototype.isPointsMaterial=!0,ps.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},ms.prototype=Object.assign(Object.create(En.prototype),{constructor:ms,isPoints:!0,raycast:function(){var e=new Vt,t=new di,n=new un;return function(i,r){var s=this,a=this.geometry,o=this.matrixWorld,l=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(o),n.radius+=l,!1!==i.ray.intersectsSphere(n)){e.getInverse(o),t.copy(i.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new Xt,d=new Xt;if(a.isBufferGeometry){var f=a.index,p=a.attributes.position.array;if(null!==f)for(var m=f.array,_=0,g=m.length;_<g;_++){var y=m[_];h.fromArray(p,3*y),x(h,y)}else{_=0;for(var v=p.length/3;_<v;_++)h.fromArray(p,3*_),x(h,_)}}else{var b=a.vertices;for(_=0,v=b.length;_<v;_++)x(b[_],_)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<u){t.closestPointToPoint(e,d),d.applyMatrix4(o);var l=i.ray.origin.distanceTo(d);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:s})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_s.prototype=Object.assign(Object.create(En.prototype),{constructor:_s,isGroup:!0}),gs.prototype=Object.assign(Object.create(rn.prototype),{constructor:gs,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),ys.prototype=Object.create(rn.prototype),ys.prototype.constructor=ys,ys.prototype.isCompressedTexture=!0,vs.prototype=Object.create(rn.prototype),vs.prototype.constructor=vs,vs.prototype.isDepthTexture=!0,bs.prototype=Object.create(Jn.prototype),bs.prototype.constructor=bs,xs.prototype=Object.create(Bn.prototype),xs.prototype.constructor=xs,Ms.prototype=Object.create(Jn.prototype),Ms.prototype.constructor=Ms,ws.prototype=Object.create(Bn.prototype),ws.prototype.constructor=ws,Ss.prototype=Object.create(Jn.prototype),Ss.prototype.constructor=Ss,Ls.prototype=Object.create(Bn.prototype),Ls.prototype.constructor=Ls,Ts.prototype=Object.create(Ss.prototype),Ts.prototype.constructor=Ts,ks.prototype=Object.create(Bn.prototype),ks.prototype.constructor=ks,As.prototype=Object.create(Ss.prototype),As.prototype.constructor=As,Es.prototype=Object.create(Bn.prototype),Es.prototype.constructor=Es,Cs.prototype=Object.create(Ss.prototype),Cs.prototype.constructor=Cs,Ds.prototype=Object.create(Bn.prototype),Ds.prototype.constructor=Ds,Os.prototype=Object.create(Ss.prototype),Os.prototype.constructor=Os,Ps.prototype=Object.create(Bn.prototype),Ps.prototype.constructor=Ps,Rs.prototype=Object.create(Jn.prototype),Rs.prototype.constructor=Rs,zs.prototype=Object.create(Bn.prototype),zs.prototype.constructor=zs,Bs.prototype=Object.create(Jn.prototype),Bs.prototype.constructor=Bs,Ys.prototype=Object.create(Bn.prototype),Ys.prototype.constructor=Ys,Fs.prototype=Object.create(Jn.prototype),Fs.prototype.constructor=Fs;function Ns(e,t,n,i,r){var s,a;if(r===function(e,t,n,i){for(var r=0,s=t,a=n-i;s<n;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)a=ia(s,e[s],e[s+1],a);else for(s=n-i;s>=t;s-=i)a=ia(s,e[s],e[s+1],a);return a&&Qs(a,a.next)&&(ra(a),a=a.next),a}function Is(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Qs(i,i.next)&&0!==Zs(i.prev,i,i.next))i=i.next;else{if(ra(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Hs(e,t,n,i,r,s,a){if(e){!a&&s&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Xs(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,s);for(var o,l,c=e;e.prev!==e.next;)if(o=e.prev,l=e.next,s?Us(e,i,r,s):js(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),ra(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Hs(e=Ws(e,t,n),t,n,i,r,s,2):2===a&&Gs(e,t,n,i,r,s):Hs(Is(e),t,n,i,r,s,1);break}}}function js(e){var t=e.prev,n=e,i=e.next;if(Zs(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Js(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Zs(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Us(e,t,n,i){var r=e.prev,s=e,a=e.next;if(Zs(r,s,a)>=0)return!1;for(var o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,c=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,h=Xs(o,l,t,n,i),d=Xs(c,u,t,n,i),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Js(r.x,r.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Zs(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Js(r.x,r.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Zs(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function Ws(e,t,n){var i=e;do{var r=i.prev,s=i.next.next;!Qs(r,s)&&ea(r,i,i.next,s)&&ta(r,s)&&ta(s,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(s.i/n),ra(i),ra(i.next),i=e=s),i=i.next}while(i!==e);return i}function Gs(e,t,n,i,r,s){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Ks(a,o)){var l=na(a,o);return a=Is(a,a.next),l=Is(l,l.next),Hs(a,t,n,i,r,s),void Hs(l,t,n,i,r,s)}o=o.next}a=a.next}while(a!==e)}function Vs(e,t){return e.x-t.x}function qs(e,t){if(t=function(e,t){var n,i=t,r=e.x,s=e.y,a=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var o=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>a){if(a=o,o===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n.prev;var l,c=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=u&&r!==i.x&&Js(s<h?r:a,s,u,h,s<h?a:r,s,i.x,i.y)&&((l=Math.abs(s-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&ta(i,e)&&(n=i,d=l),i=i.next;return n}(e,t),t){var n=na(t,e);Is(n,n.next)}}function Xs(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function $s(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Js(e,t,n,i,r,s,a,o){return(r-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(i-o)-(n-a)*(t-o)>=0&&(n-a)*(s-o)-(r-a)*(i-o)>=0}function Ks(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ea(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&ta(e,t)&&ta(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function Zs(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Qs(e,t){return e.x===t.x&&e.y===t.y}function ea(e,t,n,i){return!!(Qs(e,t)&&Qs(n,i)||Qs(e,i)&&Qs(n,t))||Zs(e,t,n)>0!=Zs(e,t,i)>0&&Zs(n,i,e)>0!=Zs(n,i,t)>0}function ta(e,t){return Zs(e.prev,e,e.next)<0?Zs(e,t,e.next)>=0&&Zs(e,e.prev,t)>=0:Zs(e,t,e.prev)<0||Zs(e,e.next,t)<0}function na(e,t){var n=new sa(e.i,e.x,e.y),i=new sa(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function ia(e,t,n,i){var r=new sa(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ra(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sa(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var aa={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return aa.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];oa(e),la(n,e);var s=e.length;t.forEach(oa);for(var a=0;a<t.length;a++)i.push(s),s+=t[a].length,la(n,t[a]);var o=function(e,t,n){n=n||2;var i,r,s,a,o,l,c,u=t&&t.length,h=u?t[0]*n:e.length,d=Ns(e,0,h,n,!0),f=[];if(!d)return f;if(u&&(d=function(e,t,n,i){var r,s,a,o=[];for(r=0,s=t.length;r<s;r++)(a=Ns(e,t[r]*i,r<s-1?t[r+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),o.push($s(a));for(o.sort(Vs),r=0;r<o.length;r++)qs(o[r],n),n=Is(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=s=e[0],r=a=e[1];for(var p=n;p<h;p+=n)(o=e[p])<i&&(i=o),(l=e[p+1])<r&&(r=l),o>s&&(s=o),l>a&&(a=l);c=0!==(c=Math.max(s-i,a-r))?1/c:0}return Hs(d,f,n,i,r,c),f}(n,i);for(a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function oa(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function la(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function ca(e,t){Bn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ua(e,t)),this.mergeVertices()}function ua(e,t){void 0!==e&&(Jn.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function ha(e,t){Bn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new da(e,t)),this.mergeVertices()}function da(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Bn;var i=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ua.call(this,i,t),this.type="TextBufferGeometry"}function fa(e,t,n,i,r,s,a){Bn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new pa(e,t,n,i,r,s,a)),this.mergeVertices()}function pa(e,t,n,i,r,s,a){Jn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var o,l,c=(s=void 0!==s?s:0)+(a=void 0!==a?a:Math.PI),u=0,h=[],d=new Xt,f=new Xt,p=[],m=[],_=[],g=[];for(l=0;l<=n;l++){var y=[],v=l/n;for(o=0;o<=t;o++){var b=o/t;d.x=-e*Math.cos(i+b*r)*Math.sin(s+v*a),d.y=e*Math.cos(s+v*a),d.z=e*Math.sin(i+b*r)*Math.sin(s+v*a),m.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),_.push(f.x,f.y,f.z),g.push(b,1-v),y.push(u++)}h.push(y)}for(l=0;l<n;l++)for(o=0;o<t;o++){var x=h[l][o+1],M=h[l][o],w=h[l+1][o],S=h[l+1][o+1];(0!==l||s>0)&&p.push(x,M,S),(l!==n-1||c<Math.PI)&&p.push(M,w,S)}this.setIndex(p),this.addAttribute("position",new Gn(m,3)),this.addAttribute("normal",new Gn(_,3)),this.addAttribute("uv",new Gn(g,2))}function ma(e,t,n,i,r,s){Bn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new _a(e,t,n,i,r,s)),this.mergeVertices()}function _a(e,t,n,i,r,s){Jn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},e=e||.5,t=t||1,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,o,l,c=[],u=[],h=[],d=[],f=e,p=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new Xt,_=new Gt;for(o=0;o<=i;o++){for(l=0;l<=n;l++)a=r+l/n*s,m.x=f*Math.cos(a),m.y=f*Math.sin(a),u.push(m.x,m.y,m.z),h.push(0,0,1),_.x=(m.x/t+1)/2,_.y=(m.y/t+1)/2,d.push(_.x,_.y);f+=p}for(o=0;o<i;o++){var g=o*(n+1);for(l=0;l<n;l++){var y=a=l+g,v=a+n+1,b=a+n+2,x=a+1;c.push(y,v,x),c.push(v,b,x)}}this.setIndex(c),this.addAttribute("position",new Gn(u,3)),this.addAttribute("normal",new Gn(h,3)),this.addAttribute("uv",new Gn(d,2))}function ga(e,t,n,i){Bn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new ya(e,t,n,i)),this.mergeVertices()}function ya(e,t,n,i){Jn.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Wt.clamp(i,0,2*Math.PI);var r,s,a,o=[],l=[],c=[],u=1/t,h=new Xt,d=new Gt;for(s=0;s<=t;s++){var f=n+s*u*i,p=Math.sin(f),m=Math.cos(f);for(a=0;a<=e.length-1;a++)h.x=e[a].x*p,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),d.x=s/t,d.y=a/(e.length-1),c.push(d.x,d.y)}for(s=0;s<t;s++)for(a=0;a<e.length-1;a++){var _=r=a+s*e.length,g=r+e.length,y=r+e.length+1,v=r+1;o.push(_,g,v),o.push(g,y,v)}if(this.setIndex(o),this.addAttribute("position",new Gn(l,3)),this.addAttribute("uv",new Gn(c,2)),this.computeVertexNormals(),i===2*Math.PI){var b=this.attributes.normal.array,x=new Xt,M=new Xt,w=new Xt;for(r=t*e.length*3,s=0,a=0;s<e.length;s++,a+=3)x.x=b[a+0],x.y=b[a+1],x.z=b[a+2],M.x=b[r+a+0],M.y=b[r+a+1],M.z=b[r+a+2],w.addVectors(x,M).normalize(),b[a+0]=b[r+a+0]=w.x,b[a+1]=b[r+a+1]=w.y,b[a+2]=b[r+a+2]=w.z}}function va(e,t){Bn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ba(e,t)),this.mergeVertices()}function ba(e,t){Jn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],s=[],a=0,o=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(a,o,l),a+=o,o=0;function c(e){var a,l,c,u=i.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===aa.isClockWise(d))for(d=d.reverse(),a=0,l=f.length;a<l;a++)c=f[a],!0===aa.isClockWise(c)&&(f[a]=c.reverse());var p=aa.triangulateShape(d,f);for(a=0,l=f.length;a<l;a++)c=f[a],d=d.concat(c);for(a=0,l=d.length;a<l;a++){var m=d[a];i.push(m.x,m.y,0),r.push(0,0,1),s.push(m.x,m.y)}for(a=0,l=p.length;a<l;a++){var _=p[a],g=_[0]+u,y=_[1]+u,v=_[2]+u;n.push(g,y,v),o+=3}}this.setIndex(n),this.addAttribute("position",new Gn(i,3)),this.addAttribute("normal",new Gn(r,3)),this.addAttribute("uv",new Gn(s,2))}function xa(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function Ma(e,t){Jn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,s,a=[],o=Math.cos(Wt.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(s=new Bn).fromBufferGeometry(e):s=e.clone(),s.mergeVertices(),s.computeFaceNormals();for(var h=s.vertices,d=s.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],_=0;_<3;_++)n=m[u[_]],i=m[u[(_+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:f,face2:void 0}:c[r].face2=f;for(r in c){var g=c[r];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=o){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new Gn(a,3))}function wa(e,t,n,i,r,s,a,o){Bn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Sa(e,t,n,i,r,s,a,o)),this.mergeVertices()}function Sa(e,t,n,i,r,s,a,o){Jn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=void 0!==s&&s,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI;var c=[],u=[],h=[],d=[],f=0,p=[],m=n/2,_=0;function g(n){var r,s,p,g=new Gt,y=new Xt,v=0,b=!0===n?e:t,x=!0===n?1:-1;for(s=f,r=1;r<=i;r++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),f++;for(p=f,r=0;r<=i;r++){var M=r/i*o+a,w=Math.cos(M),S=Math.sin(M);y.x=b*S,y.y=m*x,y.z=b*w,u.push(y.x,y.y,y.z),h.push(0,x,0),g.x=.5*w+.5,g.y=.5*S*x+.5,d.push(g.x,g.y),f++}for(r=0;r<i;r++){var L=s+r,T=p+r;!0===n?c.push(T,T+1,L):c.push(T+1,T,L),v+=3}l.addGroup(_,v,!0===n?1:2),_+=v}!function(){var s,g,y=new Xt,v=new Xt,b=0,x=(t-e)/n;for(g=0;g<=r;g++){var M=[],w=g/r,S=w*(t-e)+e;for(s=0;s<=i;s++){var L=s/i,T=L*o+a,k=Math.sin(T),A=Math.cos(T);v.x=S*k,v.y=-w*n+m,v.z=S*A,u.push(v.x,v.y,v.z),y.set(k,x,A).normalize(),h.push(y.x,y.y,y.z),d.push(L,1-w),M.push(f++)}p.push(M)}for(s=0;s<i;s++)for(g=0;g<r;g++){var E=p[g][s],C=p[g+1][s],D=p[g+1][s+1],O=p[g][s+1];c.push(E,C,O),c.push(C,D,O),b+=6}l.addGroup(_,b,0),_+=b}(),!1===s&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.addAttribute("position",new Gn(u,3)),this.addAttribute("normal",new Gn(h,3)),this.addAttribute("uv",new Gn(d,2))}function La(e,t,n,i,r,s,a){wa.call(this,0,e,t,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}function Ta(e,t,n,i,r,s,a){Sa.call(this,0,e,t,n,i,r,s,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}function ka(e,t,n,i){Bn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Aa(e,t,n,i)),this.mergeVertices()}function Aa(e,t,n,i){Jn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,s,a=[],o=[],l=[],c=[],u=new Xt,h=new Gt;for(o.push(0,0,0),l.push(0,0,1),c.push(.5,.5),s=0,r=3;s<=t;s++,r+=3){var d=n+s/t*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),o.push(u.x,u.y,u.z),l.push(0,0,1),h.x=(o[r]/e+1)/2,h.y=(o[r+1]/e+1)/2,c.push(h.x,h.y)}for(r=1;r<=t;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new Gn(o,3)),this.addAttribute("normal",new Gn(l,3)),this.addAttribute("uv",new Gn(c,2))}ca.prototype=Object.create(Bn.prototype),ca.prototype.constructor=ca,ua.prototype=Object.create(Jn.prototype),ua.prototype.constructor=ua,ua.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:t,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},ua.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var i=0;i<n;i++){var r=e[i];this.addShape(r,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Gn(t.arrays.position,3)),this.addAttribute("uv",new Gn(t.arrays.uv,2))},ua.prototype.addShape=function(e,t){var n,i,r,s,a,o,l,c,u=t.arrays?t.arrays:this.getArrays(),h=u.position,d=u.index,f=u.uv,p=[],m=void 0!==t.amount?t.amount:100,_=void 0!==t.bevelThickness?t.bevelThickness:6,g=void 0!==t.bevelSize?t.bevelSize:_-2,y=void 0!==t.bevelSegments?t.bevelSegments:3,v=void 0===t.bevelEnabled||t.bevelEnabled,b=void 0!==t.curveSegments?t.curveSegments:12,x=void 0!==t.steps?t.steps:1,M=t.extrudePath,w=!1,S=void 0!==t.UVGenerator?t.UVGenerator:ca.WorldUVGenerator;M&&(n=M.getSpacedPoints(x),w=!0,v=!1,i=void 0!==t.frames?t.frames:M.computeFrenetFrames(x,!1),r=new Xt,s=new Xt,a=new Xt),v||(y=0,_=0,g=0);var L=this,T=e.extractPoints(b),k=T.shape,A=T.holes;if(!aa.isClockWise(k))for(k=k.reverse(),l=0,c=A.length;l<c;l++)o=A[l],aa.isClockWise(o)&&(A[l]=o.reverse());var E=aa.triangulateShape(k,A),C=k;for(l=0,c=A.length;l<c;l++)o=A[l],k=k.concat(o);function D(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var O,P,R,z,B,Y,F=k.length,N=E.length;function I(e,t,n){var i,r,s,a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,h=a*c-o*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),f=Math.sqrt(l*l+c*c),p=t.x-o/d,m=t.y+a/d,_=((n.x-c/f-p)*c-(n.y+l/f-m)*l)/(a*c-o*l),g=(i=p+a*_-e.x)*i+(r=m+o*_-e.y)*r;if(g<=2)return new Gt(i,r);s=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(o)===Math.sign(c)&&(y=!0),y?(i=-o,r=a,s=Math.sqrt(u)):(i=a,r=o,s=Math.sqrt(u/2))}return new Gt(i/s,r/s)}for(var H=[],j=0,U=C.length,W=U-1,G=j+1;j<U;j++,W++,G++)W===U&&(W=0),G===U&&(G=0),H[j]=I(C[j],C[W],C[G]);var V,q,X=[],$=H.concat();for(l=0,c=A.length;l<c;l++){for(o=A[l],V=[],j=0,W=(U=o.length)-1,G=j+1;j<U;j++,W++,G++)W===U&&(W=0),G===U&&(G=0),V[j]=I(o[j],o[W],o[G]);X.push(V),$=$.concat(V)}for(O=0;O<y;O++){for(R=O/y,z=_*Math.cos(R*Math.PI/2),P=g*Math.sin(R*Math.PI/2),j=0,U=C.length;j<U;j++)K((B=D(C[j],H[j],P)).x,B.y,-z);for(l=0,c=A.length;l<c;l++)for(o=A[l],V=X[l],j=0,U=o.length;j<U;j++)K((B=D(o[j],V[j],P)).x,B.y,-z)}for(P=g,j=0;j<F;j++)B=v?D(k[j],$[j],P):k[j],w?(s.copy(i.normals[0]).multiplyScalar(B.x),r.copy(i.binormals[0]).multiplyScalar(B.y),a.copy(n[0]).add(s).add(r),K(a.x,a.y,a.z)):K(B.x,B.y,0);for(q=1;q<=x;q++)for(j=0;j<F;j++)B=v?D(k[j],$[j],P):k[j],w?(s.copy(i.normals[q]).multiplyScalar(B.x),r.copy(i.binormals[q]).multiplyScalar(B.y),a.copy(n[q]).add(s).add(r),K(a.x,a.y,a.z)):K(B.x,B.y,m/x*q);for(O=y-1;O>=0;O--){for(R=O/y,z=_*Math.cos(R*Math.PI/2),P=g*Math.sin(R*Math.PI/2),j=0,U=C.length;j<U;j++)K((B=D(C[j],H[j],P)).x,B.y,m+z);for(l=0,c=A.length;l<c;l++)for(o=A[l],V=X[l],j=0,U=o.length;j<U;j++)B=D(o[j],V[j],P),w?K(B.x,B.y+n[x-1].y,n[x-1].x+z):K(B.x,B.y,m+z)}function J(e,t){var n,i;for(j=e.length;--j>=0;){n=j,(i=j-1)<0&&(i=e.length-1);var r=0,s=x+2*y;for(r=0;r<s;r++){var a=F*r,o=F*(r+1);Q(t+n+a,t+i+a,t+i+o,t+n+o)}}}function K(e,t,n){p.push(e),p.push(t),p.push(n)}function Z(e,t,n){ee(e),ee(t),ee(n);var i=h.length/3,r=S.generateTopUV(L,h,i-3,i-2,i-1);te(r[0]),te(r[1]),te(r[2])}function Q(e,t,n,i){ee(e),ee(t),ee(i),ee(t),ee(n),ee(i);var r=h.length/3,s=S.generateSideWallUV(L,h,r-6,r-3,r-2,r-1);te(s[0]),te(s[1]),te(s[3]),te(s[1]),te(s[2]),te(s[3])}function ee(e){d.push(h.length/3),h.push(p[3*e+0]),h.push(p[3*e+1]),h.push(p[3*e+2])}function te(e){f.push(e.x),f.push(e.y)}!function(){var e=h.length/3;if(v){var t=0,n=F*t;for(j=0;j<N;j++)Z((Y=E[j])[2]+n,Y[1]+n,Y[0]+n);for(n=F*(t=x+2*y),j=0;j<N;j++)Z((Y=E[j])[0]+n,Y[1]+n,Y[2]+n)}else{for(j=0;j<N;j++)Z((Y=E[j])[2],Y[1],Y[0]);for(j=0;j<N;j++)Z((Y=E[j])[0]+F*x,Y[1]+F*x,Y[2]+F*x)}L.addGroup(e,h.length/3-e,0)}(),function(){var e=h.length/3,t=0;for(J(C,t),t+=C.length,l=0,c=A.length;l<c;l++)J(o=A[l],t),t+=o.length;L.addGroup(e,h.length/3-e,1)}(),t.arrays||(this.setIndex(d),this.addAttribute("position",new Gn(h,3)),this.addAttribute("uv",new Gn(f,2)))},ca.WorldUVGenerator={generateTopUV:function(e,t,n,i,r){var s=t[3*n],a=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Gt(s,a),new Gt(o,l),new Gt(c,u)]},generateSideWallUV:function(e,t,n,i,r,s){var a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*s],_=t[3*s+1],g=t[3*s+2];return Math.abs(o-u)<.01?[new Gt(a,1-l),new Gt(c,1-h),new Gt(d,1-p),new Gt(m,1-g)]:[new Gt(o,1-l),new Gt(u,1-h),new Gt(f,1-p),new Gt(_,1-g)]}},ha.prototype=Object.create(Bn.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(ua.prototype),da.prototype.constructor=da,fa.prototype=Object.create(Bn.prototype),fa.prototype.constructor=fa,pa.prototype=Object.create(Jn.prototype),pa.prototype.constructor=pa,ma.prototype=Object.create(Bn.prototype),ma.prototype.constructor=ma,_a.prototype=Object.create(Jn.prototype),_a.prototype.constructor=_a,ga.prototype=Object.create(Bn.prototype),ga.prototype.constructor=ga,ya.prototype=Object.create(Jn.prototype),ya.prototype.constructor=ya,va.prototype=Object.create(Bn.prototype),va.prototype.constructor=va,va.prototype.toJSON=function(){var e=Bn.prototype.toJSON.call(this);return xa(this.parameters.shapes,e)},ba.prototype=Object.create(Jn.prototype),ba.prototype.constructor=ba,ba.prototype.toJSON=function(){var e=Jn.prototype.toJSON.call(this);return xa(this.parameters.shapes,e)},Ma.prototype=Object.create(Jn.prototype),Ma.prototype.constructor=Ma,wa.prototype=Object.create(Bn.prototype),wa.prototype.constructor=wa,Sa.prototype=Object.create(Jn.prototype),Sa.prototype.constructor=Sa,La.prototype=Object.create(wa.prototype),La.prototype.constructor=La,Ta.prototype=Object.create(Sa.prototype),Ta.prototype.constructor=Ta,ka.prototype=Object.create(Bn.prototype),ka.prototype.constructor=ka,Aa.prototype=Object.create(Jn.prototype),Aa.prototype.constructor=Aa;var Ea=Object.freeze({WireframeGeometry:bs,ParametricGeometry:xs,ParametricBufferGeometry:Ms,TetrahedronGeometry:Ls,TetrahedronBufferGeometry:Ts,OctahedronGeometry:ks,OctahedronBufferGeometry:As,IcosahedronGeometry:Es,IcosahedronBufferGeometry:Cs,DodecahedronGeometry:Ds,DodecahedronBufferGeometry:Os,PolyhedronGeometry:ws,PolyhedronBufferGeometry:Ss,TubeGeometry:Ps,TubeBufferGeometry:Rs,TorusKnotGeometry:zs,TorusKnotBufferGeometry:Bs,TorusGeometry:Ys,TorusBufferGeometry:Fs,TextGeometry:ha,TextBufferGeometry:da,SphereGeometry:fa,SphereBufferGeometry:pa,RingGeometry:ma,RingBufferGeometry:_a,PlaneGeometry:Qn,PlaneBufferGeometry:ei,LatheGeometry:ga,LatheBufferGeometry:ya,ShapeGeometry:va,ShapeBufferGeometry:ba,ExtrudeGeometry:ca,ExtrudeBufferGeometry:ua,EdgesGeometry:Ma,ConeGeometry:La,ConeBufferGeometry:Ta,CylinderGeometry:wa,CylinderBufferGeometry:Sa,CircleGeometry:ka,CircleBufferGeometry:Aa,BoxGeometry:Kn,BoxBufferGeometry:Zn});function Ca(e){ci.call(this),this.type="ShadowMaterial",this.color=new gn(0),this.transparent=!0,this.setValues(e)}function Da(e){hi.call(this,e),this.type="RawShaderMaterial"}function Oa(e){ci.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Pa(e){Oa.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Ra(e){ci.call(this),this.type="MeshPhongMaterial",this.color=new gn(16777215),this.specular=new gn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function za(e){Ra.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ba(e){ci.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ya(e){ci.call(this),this.type="MeshLambertMaterial",this.color=new gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=le,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Fa(e){us.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Ca.prototype=Object.create(ci.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isShadowMaterial=!0,Ca.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this},Da.prototype=Object.create(hi.prototype),Da.prototype.constructor=Da,Da.prototype.isRawShaderMaterial=!0,Oa.prototype=Object.create(ci.prototype),Oa.prototype.constructor=Oa,Oa.prototype.isMeshStandardMaterial=!0,Oa.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Pa.prototype=Object.create(Oa.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isMeshPhysicalMaterial=!0,Pa.prototype.copy=function(e){return Oa.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Ra.prototype=Object.create(ci.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isMeshPhongMaterial=!0,Ra.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},za.prototype=Object.create(Ra.prototype),za.prototype.constructor=za,za.prototype.isMeshToonMaterial=!0,za.prototype.copy=function(e){return Ra.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ba.prototype=Object.create(ci.prototype),Ba.prototype.constructor=Ba,Ba.prototype.isMeshNormalMaterial=!0,Ba.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ya.prototype=Object.create(ci.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isMeshLambertMaterial=!0,Ya.prototype.copy=function(e){return ci.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Fa.prototype=Object.create(us.prototype),Fa.prototype.constructor=Fa,Fa.prototype.isLineDashedMaterial=!0,Fa.prototype.copy=function(e){return us.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Na=Object.freeze({ShadowMaterial:Ca,SpriteMaterial:rs,RawShaderMaterial:Da,ShaderMaterial:hi,PointsMaterial:ps,MeshPhysicalMaterial:Pa,MeshStandardMaterial:Oa,MeshPhongMaterial:Ra,MeshToonMaterial:za,MeshNormalMaterial:Ba,MeshLambertMaterial:Ya,MeshDepthMaterial:Ur,MeshDistanceMaterial:Wr,MeshBasicMaterial:ui,LineDashedMaterial:Fa,LineBasicMaterial:us,Material:ci}),Ia={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ha(e,t,n){var i=this,r=!1,s=0,a=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,s,a),r=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,a),s===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}}var ja=new Ha,Ua={};function Wa(e){this.manager=void 0!==e?e:ja}function Ga(e){this.manager=void 0!==e?e:ja,this._parser=null}function Va(e){this.manager=void 0!==e?e:ja,this._parser=null}function qa(e){this.manager=void 0!==e?e:ja}function Xa(e){this.manager=void 0!==e?e:ja}function $a(e){this.manager=void 0!==e?e:ja}function Ja(){this.type="Curve",this.arcLengthDivisions=200}function Ka(e,t,n,i,r,s,a,o){Ja.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=a||!1,this.aRotation=o||0}function Za(e,t,n,i,r,s){Ka.call(this,e,t,n,n,i,r,s),this.type="ArcCurve"}function Qa(){var e=0,t=0,n=0,i=0;function r(r,s,a,o){e=r,t=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,a,o){var l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+o)+(i-n)/o;r(t,n,l*=a,c*=a)},calc:function(r){var s=r*r;return e+t*r+n*s+i*(s*r)}}}Object.assign(Wa.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=Ia.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;if(void 0===Ua[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var o=a[1],l=!!a[2],c=a[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),f=0;f<c.length;f++)d[f]=c.charCodeAt(f);u="blob"===h?new Blob([d.buffer],{type:o}):d.buffer;break;case"document":var p=new DOMParser;u=p.parseFromString(c,o);break;case"json":u=JSON.parse(c);break;default:u=c}window.setTimeout((function(){t&&t(u),r.manager.itemEnd(e)}),0)}catch(t){window.setTimeout((function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)}),0)}}else{Ua[e]=[],Ua[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var _ in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response;Ia.add(e,n);var i=Ua[e];if(delete Ua[e],200===this.status){for(var s=0,a=i.length;s<a;s++)(o=i[s]).onLoad&&o.onLoad(n);r.manager.itemEnd(e)}else if(0===this.status){for(console.warn("THREE.FileLoader: HTTP Status 0 received."),s=0,a=i.length;s<a;s++)(o=i[s]).onLoad&&o.onLoad(n);r.manager.itemEnd(e)}else{for(s=0,a=i.length;s<a;s++){var o;(o=i[s]).onError&&o.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=Ua[e],i=0,r=n.length;i<r;i++){var s=n[i];s.onProgress&&s.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=Ua[e];delete Ua[e];for(var i=0,s=n.length;i<s;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(_,this.requestHeader[_]);m.send(null)}return r.manager.itemStart(e),m}Ua[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ga.prototype,{load:function(e,t,n,i){var r=this,s=[],a=new ys;a.image=s;var o=new Wa(this.manager);function l(l){o.load(e[l],(function(e){var n=r._parser(e,!0);s[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=Ce),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,i)}if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,h=e.length;u<h;++u)l(u);else o.load(e,(function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,o=0;o<i;o++){s[o]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+l]),s[o].format=n.format,s[o].width=n.width,s[o].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Ce),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,i);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Va.prototype,{load:function(e,t,n,i){var r=this,s=new ln,a=new Wa(this.manager);return a.setResponseType("arraybuffer"),a.load(e,(function(e){var n=r._parser(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:Le,s.wrapT=void 0!==n.wrapT?n.wrapT:Le,s.magFilter=void 0!==n.magFilter?n.magFilter:Ce,s.minFilter=void 0!==n.minFilter?n.minFilter:Oe,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps),1===n.mipmapCount&&(s.minFilter=Ce),s.needsUpdate=!0,t&&t(s,n))}),n,i),s}}),Object.assign(qa.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=Ia.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",(function(){Ia.add(e,this),t&&t(this),r.manager.itemEnd(e)}),!1),a.addEventListener("error",(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)}),!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Xa.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new ki,s=new qa(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var a=0;function o(n){s.load(e[n],(function(e){r.images[n]=e,6==++a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)o(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign($a.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new rn,s=new qa(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(n){r.image=n;var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Ve:qe,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ja.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),s=0;for(i.push(0),n=1;n<=e;n++)s+=(t=this.getPoint(n/e)).distanceTo(r),i.push(s),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,s=i.length;n=t||e*i[s-1];for(var a,o=0,l=s-1;o<=l;)if((a=i[r=Math.floor(o+(l-o)/2)]-n)<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(s-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(s-1)},getTangent:function(e){var t=1e-4,n=e-t,i=e+t;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n);return this.getPoint(i).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,s=new Xt,a=[],o=[],l=[],c=new Xt,u=new Vt;for(n=0;n<=e;n++)i=n/e,a[n]=this.getTangentAt(i),a[n].normalize();o[0]=new Xt,l[0]=new Xt;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),f=Math.abs(a[0].y),p=Math.abs(a[0].z);for(d<=h&&(h=d,s.set(1,0,0)),f<=h&&(h=f,s.set(0,1,0)),p<=h&&s.set(0,0,1),c.crossVectors(a[0],s).normalize(),o[0].crossVectors(a[0],c),l[0].crossVectors(a[0],o[0]),n=1;n<=e;n++)o[n]=o[n-1].clone(),l[n]=l[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(Wt.clamp(a[n-1].dot(a[n]),-1,1)),o[n].applyMatrix4(u.makeRotationAxis(c,r))),l[n].crossVectors(a[n],o[n]);if(!0===t)for(r=Math.acos(Wt.clamp(o[0].dot(o[e]),-1,1)),r/=e,a[0].dot(c.crossVectors(o[0],o[e]))>0&&(r=-r),n=1;n<=e;n++)o[n].applyMatrix4(u.makeRotationAxis(a[n],r*n)),l[n].crossVectors(a[n],o[n]);return{tangents:a,normals:o,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ka.prototype=Object.create(Ja.prototype),Ka.prototype.constructor=Ka,Ka.prototype.isEllipseCurve=!0,Ka.prototype.getPoint=function(e,t){for(var n=t||new Gt,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);var a=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=o-this.aX,d=l-this.aY;o=h*c-d*u+this.aX,l=h*u+d*c+this.aY}return n.set(o,l)},Ka.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ka.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ka.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Za.prototype=Object.create(Ka.prototype),Za.prototype.constructor=Za,Za.prototype.isArcCurve=!0;var eo=new Xt,to=new Qa,no=new Qa,io=new Qa;function ro(e,t,n,i){Ja.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function so(e,t,n,i,r){var s=.5*(i-t),a=.5*(r-n),o=e*e;return(2*n-2*i+s+a)*(e*o)+(-3*n+3*i-2*s-a)*o+s*e+n}function ao(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function oo(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function lo(e,t,n,i){Ja.call(this),this.type="CubicBezierCurve",this.v0=e||new Gt,this.v1=t||new Gt,this.v2=n||new Gt,this.v3=i||new Gt}function co(e,t,n,i){Ja.call(this),this.type="CubicBezierCurve3",this.v0=e||new Xt,this.v1=t||new Xt,this.v2=n||new Xt,this.v3=i||new Xt}function uo(e,t){Ja.call(this),this.type="LineCurve",this.v1=e||new Gt,this.v2=t||new Gt}function ho(e,t){Ja.call(this),this.type="LineCurve3",this.v1=e||new Xt,this.v2=t||new Xt}function fo(e,t,n){Ja.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Gt,this.v1=t||new Gt,this.v2=n||new Gt}function po(e,t,n){Ja.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Xt,this.v1=t||new Xt,this.v2=n||new Xt}function mo(e){Ja.call(this),this.type="SplineCurve",this.points=e||[]}ro.prototype=Object.create(Ja.prototype),ro.prototype.constructor=ro,ro.prototype.isCatmullRomCurve3=!0,ro.prototype.getPoint=function(e,t){var n,i,r,s,a=t||new Xt,o=this.points,l=o.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),h=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o.length)+1)*o.length:0===h&&u===l-1&&(u=l-2,h=1),this.closed||u>0?n=o[(u-1)%l]:(eo.subVectors(o[0],o[1]).add(o[0]),n=eo),i=o[u%l],r=o[(u+1)%l],this.closed||u+2<l?s=o[(u+2)%l]:(eo.subVectors(o[l-1],o[l-2]).add(o[l-1]),s=eo),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(i),d),p=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(s),d);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),to.initNonuniformCatmullRom(n.x,i.x,r.x,s.x,f,p,m),no.initNonuniformCatmullRom(n.y,i.y,r.y,s.y,f,p,m),io.initNonuniformCatmullRom(n.z,i.z,r.z,s.z,f,p,m)}else"catmullrom"===this.curveType&&(to.initCatmullRom(n.x,i.x,r.x,s.x,this.tension),no.initCatmullRom(n.y,i.y,r.y,s.y,this.tension),io.initCatmullRom(n.z,i.z,r.z,s.z,this.tension));return a.set(to.calc(h),no.calc(h),io.calc(h)),a},ro.prototype.copy=function(e){Ja.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ro.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ro.prototype.fromJSON=function(e){Ja.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Xt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},lo.prototype=Object.create(Ja.prototype),lo.prototype.constructor=lo,lo.prototype.isCubicBezierCurve=!0,lo.prototype.getPoint=function(e,t){var n=t||new Gt,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(oo(e,i.x,r.x,s.x,a.x),oo(e,i.y,r.y,s.y,a.y)),n},lo.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},lo.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},lo.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},co.prototype=Object.create(Ja.prototype),co.prototype.constructor=co,co.prototype.isCubicBezierCurve3=!0,co.prototype.getPoint=function(e,t){var n=t||new Xt,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(oo(e,i.x,r.x,s.x,a.x),oo(e,i.y,r.y,s.y,a.y),oo(e,i.z,r.z,s.z,a.z)),n},co.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},co.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},co.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},uo.prototype=Object.create(Ja.prototype),uo.prototype.constructor=uo,uo.prototype.isLineCurve=!0,uo.prototype.getPoint=function(e,t){var n=t||new Gt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},uo.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},uo.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},uo.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},uo.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},uo.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ho.prototype=Object.create(Ja.prototype),ho.prototype.constructor=ho,ho.prototype.isLineCurve3=!0,ho.prototype.getPoint=function(e,t){var n=t||new Xt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ho.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ho.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ho.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ho.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fo.prototype=Object.create(Ja.prototype),fo.prototype.constructor=fo,fo.prototype.isQuadraticBezierCurve=!0,fo.prototype.getPoint=function(e,t){var n=t||new Gt,i=this.v0,r=this.v1,s=this.v2;return n.set(ao(e,i.x,r.x,s.x),ao(e,i.y,r.y,s.y)),n},fo.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},fo.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},fo.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},po.prototype=Object.create(Ja.prototype),po.prototype.constructor=po,po.prototype.isQuadraticBezierCurve3=!0,po.prototype.getPoint=function(e,t){var n=t||new Xt,i=this.v0,r=this.v1,s=this.v2;return n.set(ao(e,i.x,r.x,s.x),ao(e,i.y,r.y,s.y),ao(e,i.z,r.z,s.z)),n},po.prototype.copy=function(e){return Ja.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},po.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},po.prototype.fromJSON=function(e){return Ja.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},mo.prototype=Object.create(Ja.prototype),mo.prototype.constructor=mo,mo.prototype.isSplineCurve=!0,mo.prototype.getPoint=function(e,t){var n=t||new Gt,i=this.points,r=(i.length-1)*e,s=Math.floor(r),a=r-s,o=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],u=i[s>i.length-3?i.length-1:s+2];return n.set(so(a,o.x,l.x,c.x,u.x),so(a,o.y,l.y,c.y,u.y)),n},mo.prototype.copy=function(e){Ja.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},mo.prototype.toJSON=function(){var e=Ja.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},mo.prototype.fromJSON=function(e){Ja.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Gt).fromArray(i))}return this};var _o=Object.freeze({ArcCurve:Za,CatmullRomCurve3:ro,CubicBezierCurve:lo,CubicBezierCurve3:co,EllipseCurve:Ka,LineCurve:uo,LineCurve3:ho,QuadraticBezierCurve:fo,QuadraticBezierCurve3:po,SplineCurve:mo});function go(){Ja.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function yo(e){go.call(this),this.type="Path",this.currentPoint=new Gt,e&&this.setFromPoints(e)}function vo(e){yo.call(this,e),this.uuid=Wt.generateUUID(),this.type="Shape",this.holes=[]}function bo(e,t){En.call(this),this.type="Light",this.color=new gn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function xo(e,t,n){bo.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(En.DefaultUp),this.updateMatrix(),this.groundColor=new gn(t)}function Mo(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Gt(512,512),this.map=null,this.matrix=new Vt}function wo(){Mo.call(this,new Kr(50,1,.5,500))}function So(e,t,n,i,r,s){bo.call(this,e,t),this.type="SpotLight",this.position.copy(En.DefaultUp),this.updateMatrix(),this.target=new En,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new wo}function Lo(e,t,n,i){bo.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Mo(new Kr(90,1,.5,500))}function To(){Mo.call(this,new Dn(-5,5,5,-5,.5,500))}function ko(e,t){bo.call(this,e,t),this.type="DirectionalLight",this.position.copy(En.DefaultUp),this.updateMatrix(),this.target=new En,this.shadow=new To}function Ao(e,t){bo.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Eo(e,t,n,i){bo.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Co(e,t,n,i){Ho.call(this,e,t,n,i)}function Do(e,t,n){Ho.call(this,e,t,n)}function Oo(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Po(e,t,n,i){Oo.call(this,e,t,n,i)}function Ro(e,t,n,i){Ho.call(this,e,t,n,i)}function zo(e,t,n,i){Ho.call(this,e,t,n,i)}function Bo(e,t,n,i){Ho.call(this,e,t,n,i)}function Yo(e,t,n,i){Oo.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Fo(e,t,n,i){Oo.call(this,e,t,n,i)}function No(e,t,n,i){Oo.call(this,e,t,n,i)}go.prototype=Object.assign(Object.create(Ja.prototype),{constructor:go,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new uo(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,s=this.curves[i],a=s.getLength(),o=0===a?0:1-r/a;return s.getPointAt(o)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var s=r[i],a=s&&s.isEllipseCurve?2*e:s&&s.isLineCurve?1:s&&s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a),l=0;l<o.length;l++){var c=o[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Ja.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ja.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Ja.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new _o[i.type]).fromJSON(i))}return this}}),yo.prototype=Object.assign(Object.create(go.prototype),{constructor:yo,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new uo(this.currentPoint.clone(),new Gt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new fo(this.currentPoint.clone(),new Gt(e,t),new Gt(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,s){var a=new lo(this.currentPoint.clone(),new Gt(e,t),new Gt(n,i),new Gt(r,s));this.curves.push(a),this.currentPoint.set(r,s)},splineThru:function(e){var t=new mo([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,s){var a=this.currentPoint.x,o=this.currentPoint.y;this.absarc(e+a,t+o,n,i,r,s)},absarc:function(e,t,n,i,r,s){this.absellipse(e,t,n,n,i,r,s)},ellipse:function(e,t,n,i,r,s,a,o){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,n,i,r,s,a,o)},absellipse:function(e,t,n,i,r,s,a,o){var l=new Ka(e,t,n,i,r,s,a,o);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return go.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=go.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return go.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),vo.prototype=Object.assign(Object.create(yo.prototype),{constructor:vo,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){yo.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=yo.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){yo.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new yo).fromJSON(i))}return this}}),bo.prototype=Object.assign(Object.create(En.prototype),{constructor:bo,isLight:!0,copy:function(e){return En.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=En.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),xo.prototype=Object.assign(Object.create(bo.prototype),{constructor:xo,isHemisphereLight:!0,copy:function(e){return bo.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Mo.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),wo.prototype=Object.assign(Object.create(Mo.prototype),{constructor:wo,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Wt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),So.prototype=Object.assign(Object.create(bo.prototype),{constructor:So,isSpotLight:!0,copy:function(e){return bo.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Lo.prototype=Object.assign(Object.create(bo.prototype),{constructor:Lo,isPointLight:!0,copy:function(e){return bo.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),To.prototype=Object.assign(Object.create(Mo.prototype),{constructor:To}),ko.prototype=Object.assign(Object.create(bo.prototype),{constructor:ko,isDirectionalLight:!0,copy:function(e){return bo.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ao.prototype=Object.assign(Object.create(bo.prototype),{constructor:Ao,isAmbientLight:!0}),Eo.prototype=Object.assign(Object.create(bo.prototype),{constructor:Eo,isRectAreaLight:!0,copy:function(e){return bo.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=bo.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Co.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Co,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Do.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Do,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Oo.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var s;n:{i:if(!(e<i)){for(var a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,e<(i=t[++n]))break t}s=t.length;break n}if(e>=r)break e;var o=t[1];for(e<o&&(n=2,r=o),a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,e>=(r=t[--n-1]))break t}s=n,n=0}for(;n<s;){var l=n+s>>>1;e<t[l]?s=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,s=0;s!==i;++s)t[s]=n[r+s];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Oo.prototype,{beforeStart_:Oo.prototype.copySampleValue_,afterEnd_:Oo.prototype.copySampleValue_}),Po.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Po,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=(n-t)/(i-t),c=o+a;o!==c;o+=4)qt.slerpFlat(r,0,s,o-a,s,o,l);return r}}),Ro.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Ro,ValueTypeName:"quaternion",DefaultInterpolation:Tt,InterpolantFactoryMethodLinear:function(e){return new Po(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),zo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:zo,ValueTypeName:"color"}),Bo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:Bo,ValueTypeName:"number"}),Yo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Yo,DefaultSettings_:{endingStart:At,endingEnd:At},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case Et:r=e,a=2*t-n;break;case Ct:a=t+i[r=i.length-2]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Et:s=e,o=2*n-t;break;case Ct:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,_=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,v=d*m-d*p,b=0;b!==a;++b)r[b]=_*s[c+b]+g*s[l+b]+y*s[o+b]+v*s[u+b];return r}}),Fo.prototype=Object.assign(Object.create(Oo.prototype),{constructor:Fo,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),u=1-c,h=0;h!==a;++h)r[h]=s[l+h]*u+s[o+h]*c;return r}}),No.prototype=Object.assign(Object.create(Oo.prototype),{constructor:No,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Io={arraySlice:function(e,t,n){return Io.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),s=0,a=0;a!==i;++s)for(var o=n[s]*t,l=0;l!==t;++l)r[a++]=e[o+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,s=e[0];void 0!==s&&void 0===s[i];)s=e[r++];if(void 0!==s){var a=s[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=s[i])&&(t.push(s.time),n.push.apply(n,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{void 0!==(a=s[i])&&(t.push(s.time),a.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{void 0!==(a=s[i])&&(t.push(s.time),n.push(a)),s=e[r++]}while(void 0!==s)}}};function Ho(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Io.convertArray(t,this.TimeBufferType),this.values=Io.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function jo(e,t,n,i){Ho.call(this,e,t,n,i)}function Uo(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Wt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Wo(e){this.manager=void 0!==e?e:ja,this.textures={}}function Go(e){this.manager=void 0!==e?e:ja}Object.assign(Ho,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Ho._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];Io.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Io.convertArray(e.times,Array),values:Io.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bo;case"vector":case"vector2":case"vector3":case"vector4":return jo;case"color":return zo;case"quaternion":return Ro;case"bool":case"boolean":return Do;case"string":return Co}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Ho.prototype,{constructor:Ho,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Tt,InterpolantFactoryMethodDiscrete:function(e){return new No(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Fo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Yo(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Lt:t=this.InterpolantFactoryMethodDiscrete;break;case Tt:t=this.InterpolantFactoryMethodLinear;break;case kt:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lt;case this.InterpolantFactoryMethodLinear:return Tt;case this.InterpolantFactoryMethodSmooth:return kt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,s=i-1;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(r=(s=Math.max(s,1))-1);var a=this.getValueSize();this.times=Io.arraySlice(n,r,s),this.values=Io.arraySlice(this.values,r*a,s*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var s=null,a=0;a!==r;a++){var o=n[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(null!==s&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(void 0!==i&&Io.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===kt,r=1,s=e.length-1,a=1;a<s;++a){var o=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(i)o=!0;else for(var c=a*n,u=c-n,h=c+n,d=0;d!==n;++d){var f=t[c+d];if(f!==t[u+d]||f!==t[h+d]){o=!0;break}}if(o){if(a!==r){e[r]=e[a];var p=a*n,m=r*n;for(d=0;d!==n;++d)t[m+d]=t[p+d]}++r}}if(s>0){for(e[r]=e[s],p=s*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[p+d];++r}return r!==e.length&&(this.times=Io.arraySlice(e,0,r),this.values=Io.arraySlice(t,0,r*n)),this}}),jo.prototype=Object.assign(Object.create(Ho.prototype),{constructor:jo,ValueTypeName:"vector"}),Object.assign(Uo,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,s=n.length;r!==s;++r)t.push(Ho.parse(n[r]).scale(i));return new Uo(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,s=n.length;r!==s;++r)t.push(Ho.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,s=[],a=0;a<r;a++){var o=[],l=[];o.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=Io.getKeyframeOrder(o);o=Io.sortedArray(o,1,c),l=Io.sortedArray(l,1,c),i||0!==o[0]||(o.push(r),l.push(l[0])),s.push(new Bo(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/n))}return new Uo(e,-1,s)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,s=0,a=e.length;s<a;s++){var o=e[s],l=o.name.match(r);if(l&&l.length>1){var c=i[h=l[1]];c||(i[h]=c=[]),c.push(o)}}var u=[];for(var h in i)u.push(Uo.CreateFromMorphTargetSequence(h,i[h],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var s=[],a=[];Io.flattenJSON(n,s,a,i),0!==s.length&&r.push(new e(t,s,a))}},i=[],r=e.name||"default",s=e.length||-1,a=e.fps||30,o=e.hierarchy||[],l=0;l<o.length;l++){var c=o[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)u[c[h].morphTargets[d]]=-1;for(var f in u){var p=[],m=[];for(d=0;d!==c[h].morphTargets.length;++d){var _=c[h];p.push(_.time),m.push(_.morphTarget===f?1:0)}i.push(new Bo(".morphTargetInfluence["+f+"]",p,m))}s=u.length*(a||1)}else{var g=".bones["+t[l].name+"]";n(jo,g+".position",c,"pos",i),n(Ro,g+".quaternion",c,"rot",i),n(jo,g+".scale",c,"scl",i)}}return 0===i.length?null:new Uo(r,s,i)}}),Object.assign(Uo.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Wo.prototype,{load:function(e,t,n,i){var r=this;new Wa(r.manager).load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Na[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new Gt).fromArray(r)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i}}),Object.assign(Go.prototype,{load:function(e,t,n,i){var r=this;new Wa(r.manager).load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){var t=new Jn,n=e.data.index;if(void 0!==n){var i=new Jo[n.type](n.array);t.setIndex(new Yn(i,1))}var r=e.data.attributes;for(var s in r){var a=r[s];i=new Jo[a.type](a.array),t.addAttribute(s,new Yn(i,a.itemSize,a.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==o)for(var l=0,c=o.length;l!==c;++l){var u=o[l];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new Xt;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new un(d,h.radius)}return t}});var Vo,qo,Xo,$o,Jo={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ko(){}Ko.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],s=t[n+1];if(r.test(e))return s}return null}},Object.assign(Ko.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:(Vo={NoBlending:O,NormalBlending:P,AdditiveBlending:R,SubtractiveBlending:z,MultiplyBlending:B,CustomBlending:Y},qo=new gn,Xo=new $a,$o=new Wo,function(e,t,n){var i={};function r(e,r,s,a,o){var l,c=t+e,u=Ko.Handlers.get(c);null!==u?l=u.load(c):(Xo.setCrossOrigin(n),l=Xo.load(c)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=Se),1!==r[1]&&(l.wrapT=Se)),void 0!==s&&l.offset.fromArray(s),void 0!==a&&("repeat"===a[0]&&(l.wrapS=Se),"mirror"===a[0]&&(l.wrapS=Te),"repeat"===a[1]&&(l.wrapT=Se),"mirror"===a[1]&&(l.wrapT=Te)),void 0!==o&&(l.anisotropy=o);var h=Wt.generateUUID();return i[h]=l,h}var s={uuid:Wt.generateUUID(),type:"MeshLambertMaterial"};for(var a in e){var o=e[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":s.name=o;break;case"blending":s.blending=Vo[o];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",a,"is no longer supported.");break;case"colorDiffuse":s.color=qo.fromArray(o).getHex();break;case"colorSpecular":s.specular=qo.fromArray(o).getHex();break;case"colorEmissive":s.emissive=qo.fromArray(o).getHex();break;case"specularCoef":s.shininess=o;break;case"shading":"basic"===o.toLowerCase()&&(s.type="MeshBasicMaterial"),"phong"===o.toLowerCase()&&(s.type="MeshPhongMaterial"),"standard"===o.toLowerCase()&&(s.type="MeshStandardMaterial");break;case"mapDiffuse":s.map=r(o,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapEmissive":s.emissiveMap=r(o,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapLight":s.lightMap=r(o,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapAO":s.aoMap=r(o,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapBump":s.bumpMap=r(o,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":s.bumpScale=o;break;case"mapNormal":s.normalMap=r(o,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":s.normalScale=o;break;case"mapSpecular":s.specularMap=r(o,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapMetalness":s.metalnessMap=r(o,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapRoughness":s.roughnessMap=r(o,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapAlpha":s.alphaMap=r(o,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"flipSided":s.side=L;break;case"doubleSided":s.side=T;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),s.opacity=o;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":s[a]=o;break;case"vertexColors":!0===o&&(s.vertexColors=D),"face"===o&&(s.vertexColors=C);break;default:console.error("THREE.Loader.createMaterial: Unsupported",a,o)}}return"MeshBasicMaterial"===s.type&&delete s.emissive,"MeshPhongMaterial"!==s.type&&delete s.specular,s.opacity<1&&(s.transparent=!0),$o.setTextures(i),$o.parse(s)})});var Zo={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};function Qo(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:ja,this.withCredentials=!1}function el(e){this.manager=void 0!==e?e:ja,this.texturePath=""}Object.assign(Qo.prototype,{load:function(e,t,n,i){var r=this,s=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Zo.extractUrlBase(e),a=new Wa(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,(function(n){var i=JSON.parse(n),a=i.metadata;if(void 0!==a){var o=a.type;if(void 0!==o&&"object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=r.parse(i,s);t(l.geometry,l.materials)}),n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new Bn;return function(e,t){function n(e,t){return e&1<<t}var i,r,s,a,o,l,c,u,h,d,f,p,m,_,g,y,v,b,x,M,w,S,L,T,k,A=e.faces,E=e.vertices,C=e.normals,D=e.colors,O=e.scale,P=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&P++;for(i=0;i<P;i++)t.faceVertexUvs[i]=[]}for(a=0,o=E.length;a<o;)(b=new Xt).x=E[a++]*O,b.y=E[a++]*O,b.z=E[a++]*O,t.vertices.push(b);for(a=0,o=A.length;a<o;)if(f=n(d=A[a++],0),p=n(d,1),m=n(d,3),_=n(d,4),g=n(d,5),y=n(d,6),v=n(d,7),f){if((M=new On).a=A[a],M.b=A[a+1],M.c=A[a+3],(w=new On).a=A[a+1],w.b=A[a+2],w.c=A[a+3],a+=4,p&&(h=A[a++],M.materialIndex=h,w.materialIndex=h),s=t.faces.length,m)for(i=0;i<P;i++)for(T=e.uvs[i],t.faceVertexUvs[i][s]=[],t.faceVertexUvs[i][s+1]=[],r=0;r<4;r++)k=new Gt(T[2*(u=A[a++])],T[2*u+1]),2!==r&&t.faceVertexUvs[i][s].push(k),0!==r&&t.faceVertexUvs[i][s+1].push(k);if(_&&(c=3*A[a++],M.normal.set(C[c++],C[c++],C[c]),w.normal.copy(M.normal)),g)for(i=0;i<4;i++)c=3*A[a++],L=new Xt(C[c++],C[c++],C[c]),2!==i&&M.vertexNormals.push(L),0!==i&&w.vertexNormals.push(L);if(y&&(S=D[l=A[a++]],M.color.setHex(S),w.color.setHex(S)),v)for(i=0;i<4;i++)S=D[l=A[a++]],2!==i&&M.vertexColors.push(new gn(S)),0!==i&&w.vertexColors.push(new gn(S));t.faces.push(M),t.faces.push(w)}else{if((x=new On).a=A[a++],x.b=A[a++],x.c=A[a++],p&&(h=A[a++],x.materialIndex=h),s=t.faces.length,m)for(i=0;i<P;i++)for(T=e.uvs[i],t.faceVertexUvs[i][s]=[],r=0;r<3;r++)k=new Gt(T[2*(u=A[a++])],T[2*u+1]),t.faceVertexUvs[i][s].push(k);if(_&&(c=3*A[a++],x.normal.set(C[c++],C[c++],C[c])),g)for(i=0;i<3;i++)c=3*A[a++],L=new Xt(C[c++],C[c++],C[c]),x.vertexNormals.push(L);if(y&&(l=A[a++],x.color.setHex(D[l])),v)for(i=0;i<3;i++)l=A[a++],x.vertexColors.push(new gn(D[l]));t.faces.push(x)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var s=e.skinWeights[i],a=n>1?e.skinWeights[i+1]:0,o=n>2?e.skinWeights[i+2]:0,l=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new sn(s,a,o,l))}if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=n){var c=e.skinIndices[i],u=n>1?e.skinIndices[i+1]:0,h=n>2?e.skinIndices[i+2]:0,d=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new sn(c,u,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var s=t.morphTargets[i].vertices,a=e.morphTargets[i].vertices,o=0,l=a.length;o<l;o+=3){var c=new Xt;c.x=a[o]*n,c.y=a[o+1]*n,c.z=a[o+2]*n,s.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces,h=e.morphColors[0].colors;for(i=0,r=u.length;i<r;i++)u[i].color.fromArray(h,3*i)}}(e,n),function(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var s=Uo.parseAnimation(i[r],t.bones);s&&n.push(s)}if(t.morphTargets){var a=Uo.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Ko.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(el.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new Wa(r.manager).load(e,(function(n){var s=null;try{s=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=s.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(s,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")}),n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(o)})),s=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,i,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new vo).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Qo,r=new Go,s=0,a=e.length;s<a;s++){var o,l=e[s];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Ea[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Ea[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Ea[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Ea[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Ea[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Ea[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Ea[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Ea[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Ea[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Ea[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Ea[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Ea[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var c=[];for(s=0,a=l.shapes.length;s<a;s++){var u=t[l.shapes[s]];c.push(u)}o=new Ea[l.type](c,l.curveSegments);break;case"BufferGeometry":o=r.parse(l);break;case"Geometry":o=i.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}o.uuid=l.uuid,void 0!==l.name&&(o.name=l.name),n[l.uuid]=o}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new Wo;i.setTextures(t);for(var r=0,s=e.length;r<s;r++){var a=e[r];if("MultiMaterial"===a.type){for(var o=[],l=0;l<a.materials.length;l++)o.push(i.parse(a.materials[l]));n[a.uuid]=o}else n[a.uuid]=i.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=Uo.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),s.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemEnd(e),n.manager.itemError(e)}))}if(void 0!==e&&e.length>0){var s=new qa(new Ha(t));s.setCrossOrigin(this.crossOrigin);for(var a=0,o=e.length;a<o;a++){var l=e[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;i[l.uuid]=r(c)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,s=e.length;r<s;r++){var a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var o=new rn(t[a.image]);o.needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=n(a.mapping,nl)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=n(a.wrap[0],il),o.wrapT=n(a.wrap[1],il)),void 0!==a.format&&(o.format=a.format),void 0!==a.minFilter&&(o.minFilter=n(a.minFilter,rl)),void 0!==a.magFilter&&(o.magFilter=n(a.magFilter,rl)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),i[a.uuid]=o}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var s=e[i];void 0===n[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(n[s])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new is,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new gn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new ns(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new ts(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Kr(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Dn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Ao(e.color,e.intensity);break;case"DirectionalLight":i=new ko(e.color,e.intensity);break;case"PointLight":i=new Lo(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Eo(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new So(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new xo(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),o=s(e.material);i=a.bones&&a.bones.length>0?new cs(a,o):new mi(a,o);break;case"LOD":i=new as;break;case"Line":i=new hs(r(e.geometry),s(e.material),e.mode);break;case"LineLoop":i=new fs(r(e.geometry),s(e.material));break;case"LineSegments":i=new ds(r(e.geometry),s(e.material));break;case"PointCloud":case"Points":i=new ms(r(e.geometry),s(e.material));break;case"Sprite":i=new ss(s(e.material));break;case"Group":i=new _s;break;default:i=new En}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],t,n));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var d=u[h],f=i.getObjectByProperty("uuid",d.object);void 0!==f&&i.addLevel(f,d.distance)}return i}});var tl,nl={UVMapping:_e,CubeReflectionMapping:ge,CubeRefractionMapping:ye,EquirectangularReflectionMapping:ve,EquirectangularRefractionMapping:be,SphericalReflectionMapping:xe,CubeUVReflectionMapping:Me,CubeUVRefractionMapping:we},il={RepeatWrapping:Se,ClampToEdgeWrapping:Le,MirroredRepeatWrapping:Te},rl={NearestFilter:ke,NearestMipMapNearestFilter:Ae,NearestMipMapLinearFilter:Ee,LinearFilter:Ce,LinearMipMapNearestFilter:De,LinearMipMapLinearFilter:Oe};function sl(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ja,this.options=void 0}function al(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function ol(e){this.type="Font",this.data=e}function ll(e,t,n,i,r,s){var a=s.glyphs[e]||s.glyphs["?"];if(a){var o,l,c,u,h,d,f,p,m=new al;if(a.o)for(var _=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,y=_.length;g<y;)switch(_[g++]){case"m":o=_[g++]*n+i,l=_[g++]*n+r,m.moveTo(o,l);break;case"l":o=_[g++]*n+i,l=_[g++]*n+r,m.lineTo(o,l);break;case"q":c=_[g++]*n+i,u=_[g++]*n+r,h=_[g++]*n+i,d=_[g++]*n+r,m.quadraticCurveTo(h,d,c,u);break;case"b":c=_[g++]*n+i,u=_[g++]*n+r,h=_[g++]*n+i,d=_[g++]*n+r,f=_[g++]*n+i,p=_[g++]*n+r,m.bezierCurveTo(h,d,f,p,c,u)}return{offsetX:a.ha*n,path:m}}}function cl(e){this.manager=void 0!==e?e:ja}sl.prototype={constructor:sl,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,s=Ia.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){Ia.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)}))},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(al.prototype,{moveTo:function(e,t){this.currentPath=new yo,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,s){this.currentPath.bezierCurveTo(e,t,n,i,r,s)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],s=new vo;s.curves=r.curves,t.push(s)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,s=0;s<n;r=s++){var a=t[r],o=t[s],l=o.x-a.x,c=o.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[s],l=-l,o=t[r],c=-c),e.y<a.y||e.y>o.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==a.y)continue;if(o.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=o.x)return!0}}return i}var r=aa.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return n(s);var a,o,l,c=[];if(1===s.length)return o=s[0],(l=new vo).curves=o.curves,c.push(l),c;var u=!r(s[0].getPoints());u=e?!u:u;var h,d,f=[],p=[],m=[],_=0;p[_]=void 0,m[_]=[];for(var g=0,y=s.length;g<y;g++)a=r(h=(o=s[g]).getPoints()),(a=e?!a:a)?(!u&&p[_]&&_++,p[_]={s:new vo,p:h},p[_].s.curves=o.curves,u&&_++,m[_]=[]):m[_].push({h:o,p:h[0]});if(!p[0])return n(s);if(p.length>1){for(var v=!1,b=[],x=0,M=p.length;x<M;x++)f[x]=[];for(x=0,M=p.length;x<M;x++)for(var w=m[x],S=0;S<w.length;S++){for(var L=w[S],T=!0,k=0;k<p.length;k++)i(L.p,p[k].p)&&(x!==k&&b.push({froms:x,tos:k,hole:S}),T?(T=!1,f[k].push(L)):v=!0);T&&f[x].push(L)}b.length>0&&(v||(m=f))}g=0;for(var A=p.length;g<A;g++){l=p[g].s,c.push(l);for(var E=0,C=(d=m[g]).length;E<C;E++)l.holes.push(d[E].h)}return c}}),Object.assign(ol.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var i=[],r=function(e,t,n,i){for(var r=String(e).split(""),s=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*s,o=[],l=0,c=0,u=0;u<r.length;u++){var h=r[u];if("\n"===h)l=0,c-=a;else{var d=ll(h,0,s,l,c,i);l+=d.offsetX,o.push(d.path)}}return o}(e,t,0,this.data),s=0,a=r.length;s<a;s++)Array.prototype.push.apply(i,r[s].toShapes());return i}}),Object.assign(cl.prototype,{load:function(e,t,n,i){var r=this,s=new Wa(this.manager);s.setPath(this.path),s.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new ol(e)},setPath:function(e){return this.path=e,this}});var ul,hl,dl,fl,pl,ml,_l,gl,yl,vl,bl={getContext:function(){return void 0===tl&&(tl=new(window.AudioContext||window.webkitAudioContext)),tl},setContext:function(e){tl=e}};function xl(e){this.manager=void 0!==e?e:ja}function Ml(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Kr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Kr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function wl(e,t,n){En.call(this),this.type="CubeCamera";var i=90,r=new Kr(i,1,e,t);r.up.set(0,-1,0),r.lookAt(new Xt(1,0,0)),this.add(r);var s=new Kr(i,1,e,t);s.up.set(0,-1,0),s.lookAt(new Xt(-1,0,0)),this.add(s);var a=new Kr(i,1,e,t);a.up.set(0,0,1),a.lookAt(new Xt(0,1,0)),this.add(a);var o=new Kr(i,1,e,t);o.up.set(0,0,-1),o.lookAt(new Xt(0,-1,0)),this.add(o);var l=new Kr(i,1,e,t);l.up.set(0,-1,0),l.lookAt(new Xt(0,0,1)),this.add(l);var c=new Kr(i,1,e,t);c.up.set(0,-1,0),c.lookAt(new Xt(0,0,-1)),this.add(c);var u={format:Ve,magFilter:Ce,minFilter:Ce};this.renderTarget=new on(n,n,u),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,o,n),n.activeCubeFace=4,e.render(t,l,n),n.texture.generateMipmaps=i,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,s=0;s<6;s++)r.activeCubeFace=s,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function Sl(){En.call(this),this.type="AudioListener",this.context=bl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ll(e){En.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Tl(e){Ll.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function kl(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Al(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(xl.prototype,{load:function(e,t,n,i){var r=new Wa(this.manager);r.setResponseType("arraybuffer"),r.load(e,(function(e){bl.getContext().decodeAudioData(e,(function(e){t(e)}))}),n,i)}}),Object.assign(Ml.prototype,{update:(yl=new Vt,vl=new Vt,function(e){if(ul!==this||hl!==e.focus||dl!==e.fov||fl!==e.aspect*this.aspect||pl!==e.near||ml!==e.far||_l!==e.zoom||gl!==this.eyeSep){ul=this,hl=e.focus,dl=e.fov,fl=e.aspect*this.aspect,pl=e.near,ml=e.far,_l=e.zoom;var t,n,i=e.projectionMatrix.clone(),r=(gl=this.eyeSep/2)*pl/hl,s=pl*Math.tan(Wt.DEG2RAD*dl*.5)/_l;vl.elements[12]=-gl,yl.elements[12]=gl,t=-s*fl+r,n=s*fl+r,i.elements[0]=2*pl/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(i),t=-s*fl-r,n=s*fl-r,i.elements[0]=2*pl/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vl),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yl)})}),wl.prototype=Object.create(En.prototype),wl.prototype.constructor=wl,Sl.prototype=Object.assign(Object.create(En.prototype),{constructor:Sl,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Xt,t=new qt,n=new Xt,i=new Xt;return function(r){En.prototype.updateMatrixWorld.call(this,r);var s=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),s.positionX?(s.positionX.setValueAtTime(e.x,this.context.currentTime),s.positionY.setValueAtTime(e.y,this.context.currentTime),s.positionZ.setValueAtTime(e.z,this.context.currentTime),s.forwardX.setValueAtTime(i.x,this.context.currentTime),s.forwardY.setValueAtTime(i.y,this.context.currentTime),s.forwardZ.setValueAtTime(i.z,this.context.currentTime),s.upX.setValueAtTime(a.x,this.context.currentTime),s.upY.setValueAtTime(a.y,this.context.currentTime),s.upZ.setValueAtTime(a.z,this.context.currentTime)):(s.setPosition(e.x,e.y,e.z),s.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Ll.prototype=Object.assign(Object.create(En.prototype),{constructor:Ll,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Tl.prototype=Object.assign(Object.create(Ll.prototype),{constructor:Tl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Xt;return function(t){En.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(kl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Al.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,s=this.cumulativeWeight;if(0===s){for(var a=0;a!==i;++a)n[r+a]=n[a];s=t}else{var o=t/(s+=t);this._mixBufferRegion(n,r,0,o,i)}this.cumulativeWeight=s},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*t;this._mixBufferRegion(n,i,a,1-r,t)}for(var o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){s.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var s=0;s!==r;++s)e[t+s]=e[n+s]},_slerp:function(e,t,n,i){qt.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var s=1-i,a=0;a!==r;++a){var o=t+a;e[o]=e[o]*s+e[n+a]*i}}});var El,Cl,Dl,Ol,Pl,Rl,zl,Bl,Yl,Fl,Nl,Il,Hl,jl="\\[\\]\\.:\\/";function Ul(e,t,n){var i=n||Wl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Wl(e,t,n){this.path=t,this.parsedPath=n||Wl.parseTrackName(t),this.node=Wl.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Gl(){this.uuid=Wt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Vl(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,s=new Array(r),a={endingStart:At,endingEnd:At},o=0;o!==r;++o){var l=i[o].createInterpolant(null);s[o]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=wt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ql(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Xl(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function $l(){Jn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Jl(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Kl(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Zl(e,t,n){Kl.call(this,e,t),this.meshPerAttribute=n||1}function Ql(e,t,n){Yn.call(this,e,t),this.meshPerAttribute=n||1}function ec(e,t,n,i){this.ray=new di(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function tc(e,t){return e.distance-t.distance}function nc(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,s=0,a=r.length;s<a;s++)nc(r[s],t,n,!0)}function ic(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function rc(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function sc(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function ac(e,t){this.min=void 0!==e?e:new Gt(1/0,1/0),this.max=void 0!==t?t:new Gt(-1/0,-1/0)}function oc(e){En.call(this),this.material=e,this.render=function(){}}function lc(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,s=void 0!==i?i:1,a=0,o=this.object.geometry;o&&o.isGeometry?a=3*o.faces.length:o&&o.isBufferGeometry&&(a=o.attributes.normal.count);var l=new Jn,c=new Gn(2*a*3,3);l.addAttribute("position",c),ds.call(this,l,new us({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function cc(e,t){En.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Jn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,s=1;r<32;r++,s++){var a=r/32*Math.PI*2,o=s/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}n.addAttribute("position",new Gn(i,3));var l=new us({fog:!1});this.cone=new ds(n,l),this.add(this.cone),this.update()}function uc(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,uc(e.children[n]));return t}function hc(e){for(var t=uc(e),n=new Jn,i=[],r=[],s=new gn(0,0,1),a=new gn(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new Gn(i,3)),n.addAttribute("color",new Gn(r,3));var c=new us({vertexColors:D,depthTest:!1,depthWrite:!1,transparent:!0});ds.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function dc(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new pa(t,4,2),r=new ui({wireframe:!0,fog:!1});mi.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function fc(e,t){En.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new us({fog:!1}),i=new Jn;i.addAttribute("position",new Yn(new Float32Array(15),3)),this.line=new hs(i,n),this.add(this.line),this.update()}function pc(e,t,n){En.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new As(t);i.rotateY(.5*Math.PI),this.material=new ui({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=D);var r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.addAttribute("color",new Yn(s,3)),this.add(new mi(i,this.material)),this.update()}function mc(e,t,n,i){e=e||10,t=t||10,n=new gn(void 0!==n?n:4473924),i=new gn(void 0!==i?i:8947848);for(var r=t/2,s=e/t,a=e/2,o=[],l=[],c=0,u=0,h=-a;c<=t;c++,h+=s){o.push(-a,0,h,a,0,h),o.push(h,0,-a,h,0,a);var d=c===r?n:i;d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3}var f=new Jn;f.addAttribute("position",new Gn(o,3)),f.addAttribute("color",new Gn(l,3));var p=new us({vertexColors:D});ds.call(this,f,p)}function _c(e,t,n,i,r,s){e=e||10,t=t||16,n=n||8,i=i||64,r=new gn(void 0!==r?r:4473924),s=new gn(void 0!==s?s:8947848);var a,o,l,c,u,h,d,f=[],p=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),a=Math.sin(l)*e,o=Math.cos(l)*e,f.push(0,0,0),f.push(a,0,o),d=1&c?r:s,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?r:s,h=e-e/n*c,u=0;u<i;u++)l=u/i*(2*Math.PI),a=Math.sin(l)*h,o=Math.cos(l)*h,f.push(a,0,o),p.push(d.r,d.g,d.b),l=(u+1)/i*(2*Math.PI),a=Math.sin(l)*h,o=Math.cos(l)*h,f.push(a,0,o),p.push(d.r,d.g,d.b);var m=new Jn;m.addAttribute("position",new Gn(f,3)),m.addAttribute("color",new Gn(p,3));var _=new us({vertexColors:D});ds.call(this,m,_)}function gc(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,s=void 0!==i?i:1,a=0,o=this.object.geometry;o&&o.isGeometry?a=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Jn,c=new Gn(2*a*3,3);l.addAttribute("position",c),ds.call(this,l,new us({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function yc(e,t,n){En.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Jn;i.addAttribute("position",new Gn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new us({fog:!1});this.lightPlane=new hs(i,r),this.add(this.lightPlane),(i=new Jn).addAttribute("position",new Gn([0,0,0,0,0,1],3)),this.targetLine=new hs(i,r),this.add(this.targetLine),this.update()}function vc(e){var t=new Jn,n=new us({color:16777215,vertexColors:C}),i=[],r=[],s={},a=new gn(16755200),o=new gn(16711680),l=new gn(43775),c=new gn(16777215),u=new gn(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new Gn(i,3)),t.addAttribute("color",new Gn(r,3)),ds.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function bc(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Jn;r.setIndex(new Yn(n,1)),r.addAttribute("position",new Yn(i,3)),ds.call(this,r,new us({color:t})),this.matrixAutoUpdate=!1,this.update()}function xc(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Jn;r.setIndex(new Yn(i,1)),r.addAttribute("position",new Gn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ds.call(this,r,new us({color:n})),this.geometry.computeBoundingSphere()}function Mc(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Jn;r.addAttribute("position",new Gn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),hs.call(this,r,new us({color:i}));var s=new Jn;s.addAttribute("position",new Gn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new mi(s,new ui({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function wc(e,t,n,i,r,s){En.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===s&&(s=.2*r),void 0===Fl&&((Fl=new Jn).addAttribute("position",new Gn([0,0,0,0,1,0],3)),(Nl=new Sa(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new hs(Fl,new us({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mi(Nl,new ui({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,s)}function Sc(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Jn;n.addAttribute("position",new Gn(t,3)),n.addAttribute("color",new Gn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new us({vertexColors:D});ds.call(this,n,i)}function Lc(e,t,n,i,r,s,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new On(e,t,n,r,s,a)}Object.assign(Ul.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Wl,{Composite:Ul,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Wl.Composite(e,t,n):new Wl(e,t,n)},sanitizeNodeName:(Yl=new RegExp("["+jl+"]","g"),function(e){return e.replace(/\s/g,"_").replace(Yl,"")}),parseTrackName:(El="[^"+jl+"]",Cl="[^"+jl.replace("\\.","")+"]",Dl=/((?:WC+[\/:])*)/.source.replace("WC",El),Ol=/(WCOD+)?/.source.replace("WCOD",Cl),Pl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",El),Rl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",El),zl=new RegExp("^"+Dl+Ol+Pl+Rl+"$"),Bl=["material","materials","bones"],function(e){var t=zl.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Bl.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var s=i(r.children);if(s)return s}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Wl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Wl.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var s=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===s){s=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==s){if(void 0===e[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[s]}}var o=e[i];if(void 0!==o){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Wl.prototype,{_getValue_unbound:Wl.prototype.getValue,_setValue_unbound:Wl.prototype.setValue}),Object.assign(Gl.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,f=i[d];if(void 0===f){f=t++,i[d]=f,e.push(h);for(var p=0,m=o;p!==m;++p)a[p].push(new Wl(h,r[p],s[p]))}else if(f<n){l=e[f];var _=--n,g=e[_];for(i[g.uuid]=f,e[f]=g,i[d]=_,e[_]=h,p=0,m=o;p!==m;++p){var y=a[p],v=y[_],b=y[f];y[f]=v,void 0===b&&(b=new Wl(h,r[p],s[p])),y[_]=b}}else e[f]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,s=0,a=arguments.length;s!==a;++s){var o=arguments[s],l=o.uuid,c=n[l];if(void 0!==c&&c>=t){var u=t++,h=e[u];n[h.uuid]=c,e[c]=h,n[l]=u,e[u]=o;for(var d=0,f=r;d!==f;++d){var p=i[d],m=p[u],_=p[c];p[c]=m,p[u]=_}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,s=r.length,a=0,o=arguments.length;a!==o;++a){var l=arguments[a].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){var u=--n,h=e[u],d=e[g=--t];i[h.uuid]=c,e[c]=h,i[d.uuid]=u,e[u]=d,e.pop();for(var f=0,p=s;f!==p;++f){var m=(y=r[f])[u],_=y[g];y[c]=m,y[u]=_,y.pop()}}else{var g;for(i[(d=e[g=--t]).uuid]=c,e[c]=d,e.pop(),f=0,p=s;f!==p;++f){var y;(y=r[f])[c]=y[g],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,s.push(e),a.push(t),r.push(u);for(var h=c,d=o.length;h!==d;++h){var f=o[h];u[h]=new Wl(f,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(Vl.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,s=r/i,a=i/r;e.warp(1,s,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,s=this._timeScaleInterpolant,a=this.timeScale;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);var o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var s=(e-r)*n;if(s<0||0===n)return;this._startTime=null,t=n*s}t*=this._updateTimeScale(e);var a=this._updateTime(t),o=this._updateWeight(e);if(o>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(i,o)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===Mt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var s=i===St;if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,r+=Math.abs(a);var o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(s&&!(1&~r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=Et,i.endingEnd=Et):(i.endingStart=e?this.zeroSlopeAtStart?Et:At:Ct,i.endingEnd=t?this.zeroSlopeAtEnd?Et:At:Ct)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);var a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=n,this}}),ql.prototype=Object.assign(Object.create(i.prototype),{constructor:ql,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName,c=l[o];void 0===c&&(c={},l[o]=c);for(var u=0;u!==r;++u){var h=i[u],d=h.name,f=c[d];if(void 0!==f)s[u]=f;else{if(void 0!==(f=s[u])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,o,d));continue}var p=t&&t._propertyBindings[u].binding.parsedPath;++(f=new Al(Wl.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,o,d),s[u]=f}a[u].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,s=0,a=r.length;s!==a;++s){var o=r[s];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{var a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],s=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=s.length,s.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r];e:{for(var c in a)break e;delete s[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Fo(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Uo.findByName(n,e):e,s=null!==r?r.uuid:e,a=this._actionsByClip[s],o=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;o=a.knownActions[0],null===r&&(r=o._clip)}if(null===r)return null;var c=new Vl(this,r,t);return this._bindAction(c,o),this._addInactiveAction(c,s,i),c},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Uo.findByName(n,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(i,e,r,s);var o=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)o[a].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var s=r.knownActions,a=0,o=s.length;a!==o;++a){var l=s[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var s=this._bindingsByRootAndName[t];if(void 0!==s)for(var a in s){var o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Xl.prototype.clone=function(){return new Xl(void 0===this.value.clone?this.value:this.value.clone())},$l.prototype=Object.assign(Object.create(Jn.prototype),{constructor:$l,isInstancedBufferGeometry:!0,copy:function(e){return Jn.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Jl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Jl.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(Kl.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Kl.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Zl.prototype=Object.assign(Object.create(Kl.prototype),{constructor:Zl,isInstancedInterleavedBuffer:!0,copy:function(e){return Kl.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ql.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Ql,isInstancedBufferAttribute:!0,copy:function(e){return Yn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(ec.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return nc(e,this,i,t),i.sort(tc),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,s=e.length;r<s;r++)nc(e[r],this,i,t);return i.sort(tc),i}}),Object.assign(ic.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(rc.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Wt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(sc.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(ac.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Gt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Gt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Gt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Gt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Gt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Gt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),oc.prototype=Object.create(En.prototype),oc.prototype.constructor=oc,oc.prototype.isImmediateRenderObject=!0,lc.prototype=Object.create(ds.prototype),lc.prototype.constructor=lc,lc.prototype.update=function(){var e=new Xt,t=new Xt,n=new $t;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,s=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var o=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var d=l[u],f=0,p=d.vertexNormals.length;f<p;f++){var m=o[d[i[f]]],_=d.vertexNormals[f];e.copy(m).applyMatrix4(r),t.copy(_).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),s.setXYZ(c,e.x,e.y,e.z),c+=1,s.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(c=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(r),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),s.setXYZ(c,e.x,e.y,e.z),c+=1,s.setXYZ(c,t.x,t.y,t.z),c+=1}s.needsUpdate=!0}}(),cc.prototype=Object.create(En.prototype),cc.prototype.constructor=cc,cc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},cc.prototype.update=function(){var e=new Xt,t=new Xt;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),hc.prototype=Object.create(ds.prototype),hc.prototype.constructor=hc,hc.prototype.updateMatrixWorld=function(){var e=new Xt,t=new Vt,n=new Vt;return function(i){var r=this.bones,s=this.geometry,a=s.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var o=0,l=0;o<r.length;o++){var c=r[o];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}s.getAttribute("position").needsUpdate=!0,En.prototype.updateMatrixWorld.call(this,i)}}(),dc.prototype=Object.create(mi.prototype),dc.prototype.constructor=dc,dc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},dc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},fc.prototype=Object.create(En.prototype),fc.prototype.constructor=fc,fc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},fc.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},pc.prototype=Object.create(En.prototype),pc.prototype.constructor=pc,pc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},pc.prototype.update=function(){var e=new Xt,t=new gn,n=new gn;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var s=0,a=r.count;s<a;s++){var o=s<a/2?t:n;r.setXYZ(s,o.r,o.g,o.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),mc.prototype=Object.create(ds.prototype),mc.prototype.constructor=mc,_c.prototype=Object.create(ds.prototype),_c.prototype.constructor=_c,gc.prototype=Object.create(ds.prototype),gc.prototype.constructor=gc,gc.prototype.update=function(){var e=new Xt,t=new Xt,n=new $t;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,s=this.object.geometry,a=s.vertices,o=s.faces,l=0,c=0,u=o.length;c<u;c++){var h=o[c],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),yc.prototype=Object.create(En.prototype),yc.prototype.constructor=yc,yc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},yc.prototype.update=function(){var e=new Xt,t=new Xt,n=new Xt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),vc.prototype=Object.create(ds.prototype),vc.prototype.constructor=vc,vc.prototype.update=function(){var e,t,n=new Xt,i=new Cn;function r(r,s,a,o){n.set(s,a,o).unproject(i);var l=t[r];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,h=l.length;u<h;u++)c.setXYZ(l[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),bc.prototype=Object.create(ds.prototype),bc.prototype.constructor=bc,bc.prototype.update=function(){var e=new cn;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),bc.prototype.setFromObject=function(e){return this.object=e,this.update(),this},xc.prototype=Object.create(ds.prototype),xc.prototype.constructor=xc,xc.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),En.prototype.updateMatrixWorld.call(this,e))},Mc.prototype=Object.create(hs.prototype),Mc.prototype.constructor=Mc,Mc.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),En.prototype.updateMatrixWorld.call(this,e)},wc.prototype=Object.create(En.prototype),wc.prototype.constructor=wc,wc.prototype.setDirection=(Hl=new Xt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Hl.set(e.z,0,-e.x).normalize(),Il=Math.acos(e.y),this.quaternion.setFromAxisAngle(Hl,Il))}),wc.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},wc.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Sc.prototype=Object.create(ds.prototype),Sc.prototype.constructor=Sc;var Tc=0,kc=1;function Ac(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Ec(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Cc(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ms(e,t)}function Dc(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ss(e)}function Oc(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ms(e,t)}function Pc(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ps(e)}function Rc(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ps(e)}function zc(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ps(e)}function Bc(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Xt(e,t,n)}function Yc(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Yn(e,t).setDynamic(!0)}function Fc(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Fn(e,t)}function Nc(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Nn(e,t)}function Ic(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new In(e,t)}function Hc(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Hn(e,t)}function jc(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new jn(e,t)}function Uc(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Un(e,t)}function Wc(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wn(e,t)}function Gc(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Gn(e,t)}function Vc(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Vn(e,t)}function qc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ro.call(this,e),this.type="catmullrom",this.closed=!0}function Xc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ro.call(this,e),this.type="catmullrom"}function $c(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ro.call(this,e),this.type="catmullrom"}function Jc(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Sc(e)}function Kc(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new bc(e,t)}function Zc(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ds(new Ma(e.geometry),new us({color:void 0!==t?t:16777215}))}function Qc(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ds(new bs(e.geometry),new us({color:void 0!==t?t:16777215}))}function eu(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Wa(e)}function tu(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Va(e)}Ja.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ja.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(go.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Bn,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Xt(r.x,r.y,r.z||0))}return t}}),Object.assign(yo.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),qc.prototype=Object.create(ro.prototype),Xc.prototype=Object.create(ro.prototype),$c.prototype=Object.create(ro.prototype),Object.assign($c.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),mc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},hc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ko.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Zo.extractUrlBase(e)}}),Object.assign(ac.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(cn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),fi.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Wt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Wt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Wt.ceilPowerOfTwo(e)}}),Object.assign($t.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Vt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Xt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,s)}}),hn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},qt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(di.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(pi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(pi,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pi.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pi.getNormal(e,t,n,i)}}),Object.assign(vo.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ca(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new va(this,e)}}),Object.assign(Gt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(sn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Bn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(En.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(En.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(as.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(os.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Ja.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Kr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(bo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Yn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Jn.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Jn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Xl.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ci.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new gn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===k}}}),Object.defineProperties(Ra.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(hi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(es.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(es.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Gr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(an.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Qr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Ll.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new xl).load(e,(function(e){t.setBuffer(e)})),this},kl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},wl.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var nu={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},iu={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new $a;r.setCrossOrigin(this.crossOrigin);var s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Xa;r.setCrossOrigin(this.crossOrigin);var s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function ru(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function su(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var au={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function ou(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},6767:function(e,t){!function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,i,r=e.scale[0],s=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,t){t||(n=i=0),e[0]=(n+=e[0])*r+a,e[1]=(i+=e[1])*s+o}}function i(e,t){for(var n=0,i=e.length;n<i;){var r=n+i>>>1;e[r]<t?n=r+1:i=r}return n}function r(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:s(e,t)};return null==t.id&&delete n.id,n}function s(e,t){var i=n(e.transform),r=e.arcs;function s(e,t){t.length&&t.pop();for(var n,s=r[e<0?~e:e],a=0,o=s.length;a<o;++a)t.push(n=s[a].slice()),i(n,a);e<0&&function(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(t,o)}function a(e){return e=e.slice(),i(e,0),e}function o(e){for(var t=[],n=0,i=e.length;n<i;++n)s(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function l(e){for(var t=o(e);t.length<4;)t.push(t[0].slice());return t}function c(e){return e.map(l)}var u={Point:function(e){return a(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(a)},LineString:function(e){return o(e.arcs)},MultiLineString:function(e){return e.arcs.map(o)},Polygon:function(e){return c(e.arcs)},MultiPolygon:function(e){return e.arcs.map(c)}};return function e(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(e)}:n in u?{type:n,coordinates:u[n](t)}:null}(t)}function a(e,t){var n={},i={},r={},s=[],a=-1;function o(e,t){for(var i in e){var r=e[i];delete t[r.start],delete r.start,delete r.end,r.forEach((function(e){n[e<0?~e:e]=1})),s.push(r)}}return t.forEach((function(n,i){var r,s=e.arcs[n<0?~n:n];s.length<3&&!s[1][0]&&!s[1][1]&&(r=t[++a],t[a]=n,t[i]=r)})),t.forEach((function(t){var n,s,a=function(t){var n,i=e.arcs[t<0?~t:t],r=i[0];return e.transform?(n=[0,0],i.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=i[i.length-1],t<0?[n,r]:[r,n]}(t),o=a[0],l=a[1];if(n=r[o])if(delete r[n.end],n.push(t),n.end=l,s=i[l]){delete i[s.start];var c=s===n?n:n.concat(s);i[c.start=n.start]=r[c.end=s.end]=c}else i[n.start]=r[n.end]=n;else if(n=i[l])if(delete i[n.start],n.unshift(t),n.start=o,s=r[o]){delete r[s.end];var u=s===n?n:s.concat(n);i[u.start=s.start]=r[u.end=n.end]=u}else i[n.start]=r[n.end]=n;else i[(n=[t]).start=o]=r[n.end=l]=n})),o(r,i),o(i,r),t.forEach((function(e){n[e<0?~e:e]||s.push([e])})),s}function o(e,t,n){var i=[];function r(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function s(e){e.forEach(r)}function o(e){e.forEach(s)}if(arguments.length>1){var l,c=[],u={LineString:s,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};(function e(t){"GeometryCollection"===t.type?t.geometries.forEach(e):t.type in u&&(l=t,u[t.type](t.arcs))})(t),c.forEach(arguments.length<3?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)})}else for(var h=0,d=e.arcs.length;h<d;++h)i.push(h);return{type:"MultiLineString",arcs:a(e,i)}}function l(e){var t=e[0],n=e[1],i=e[2];return Math.abs((t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1]))}function c(e,t){var n={},i=[],r=[];function o(e){e.forEach((function(t){t.forEach((function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)}))})),i.push(e)}function l(t){return Math.abs(function(e){for(var t,n=-1,i=e.length,r=e[i-1],s=0;++n<i;)t=r,r=e[n],s+=t[0]*r[1]-t[1]*r[0];return s/2}(s(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}return t.forEach((function(e){"Polygon"===e.type?o(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(o)})),i.forEach((function(e){if(!e._){var t=[],i=[e];for(e._=1,r.push(t);e=i.pop();)t.push(e),e.forEach((function(e){e.forEach((function(e){n[e<0?~e:e].forEach((function(e){e._||(e._=1,i.push(e))}))}))}))}})),i.forEach((function(e){delete e._})),{type:"MultiPolygon",arcs:r.map((function(t){var i,r=[];if(t.forEach((function(e){e.forEach((function(e){e.forEach((function(e){n[e<0?~e:e].length<2&&r.push(e)}))}))})),(i=(r=a(e,r)).length)>1)for(var s,o,c=1,u=l(r[0]);c<i;++c)(s=l(r[c]))>u&&(o=r[0],r[0]=r[c],r[c]=o,u=s);return r}))}}function u(e,t){return e[1][2]-t[1][2]}e.version="1.6.27",e.mesh=function(e){return s(e,o.apply(this,arguments))},e.meshArcs=o,e.merge=function(e){return s(e,c.apply(this,arguments))},e.mergeArcs=c,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return r(e,t)}))}:r(e,t)},e.neighbors=function(e){var t={},n=e.map((function(){return[]}));function r(e,n){e.forEach((function(e){e<0&&(e=~e);var i=t[e];i?i.push(n):t[e]=[n]}))}function s(e,t){e.forEach((function(e){r(e,t)}))}var a={LineString:r,MultiLineString:s,Polygon:s,MultiPolygon:function(e,t){e.forEach((function(e){s(e,t)}))}};for(var o in e.forEach((function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach((function(t){e(t,n)})):t.type in a&&a[t.type](t.arcs,n)})),t)for(var l=t[o],c=l.length,u=0;u<c;++u)for(var h=u+1;h<c;++h){var d,f=l[u],p=l[h];(d=n[f])[o=i(d,p)]!==p&&d.splice(o,0,p),(d=n[p])[o=i(d,f)]!==f&&d.splice(o,0,f)}return n},e.presimplify=function(e,i){var r=n(e.transform),s=function(e){if(!e)return t;var n,i,r=e.scale[0],s=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,t){t||(n=i=0);var l=Math.round((e[0]-a)/r),c=Math.round((e[1]-o)/s);e[0]=l-n,e[1]=c-i,n=l,i=c}}(e.transform),a=function(){var e={},t=[],n=0;function i(e,n){for(;n>0;){var i=(n+1>>1)-1,r=t[i];if(u(e,r)>=0)break;t[r._=n]=r,t[e._=n=i]=e}}function r(e,i){for(;;){var r=i+1<<1,s=r-1,a=i,o=t[a];if(s<n&&u(t[s],o)<0&&(o=t[a=s]),r<n&&u(t[r],o)<0&&(o=t[a=r]),a===i)break;t[o._=i]=o,t[e._=i=a]=e}}return e.push=function(e){return i(t[e._=n]=e,n++),n},e.pop=function(){if(!(n<=0)){var e,i=t[0];return--n>0&&(e=t[n],r(t[e._=0]=e,0)),i}},e.remove=function(e){var s,a=e._;if(t[a]===e)return a!==--n&&(u(s=t[n],e)<0?i:r)(t[s._=a]=s,a),a},e}();function o(e){a.remove(e),e[1][2]=i(e),a.push(e)}return i||(i=l),e.arcs.forEach((function(e){var t,n,l,c,u=[],h=0;for(n=0,l=e.length;n<l;++n)c=e[n],r(e[n]=[c[0],c[1],1/0],n);for(n=1,l=e.length-1;n<l;++n)(t=e.slice(n-1,n+2))[1][2]=i(t),u.push(t),a.push(t);for(n=0,l=u.length;n<l;++n)(t=u[n]).previous=u[n-1],t.next=u[n+1];for(;t=a.pop();){var d=t.previous,f=t.next;t[1][2]<h?t[1][2]=h:h=t[1][2],d&&(d.next=f,d[2]=t[2],o(d)),f&&(f.previous=d,f[0]=t[0],o(f))}e.forEach(s)})),e},Object.defineProperty(e,"__esModule",{value:!0})}(t)},1041:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ASTNode:()=>m,ArrayExpression:()=>o,BinaryExpression:()=>l,CallExpression:()=>c,ConditionalExpression:()=>u,Identifier:()=>a,Literal:()=>r,LogicalExpression:()=>h,MemberExpression:()=>d,ObjectExpression:()=>f,Property:()=>s,RawCode:()=>i,UnaryExpression:()=>p,codegen:()=>Ue,constants:()=>Ie,functions:()=>je,parse:()=>Ne});const i="RawCode",r="Literal",s="Property",a="Identifier",o="ArrayExpression",l="BinaryExpression",c="CallExpression",u="ConditionalExpression",h="LogicalExpression",d="MemberExpression",f="ObjectExpression",p="UnaryExpression";function m(e){this.type=e}var _,g,y,v,b;m.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=function(e){switch(e.type){case o:return e.elements;case l:case h:return[e.left,e.right];case c:return[e.callee].concat(e.arguments);case u:return[e.test,e.consequent,e.alternate];case d:return[e.object,e.property];case f:return e.properties;case s:return[e.key,e.value];case p:return[e.argument];default:return[]}}(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};var x=1,M=2,w=3,S=4,L=5,T=6,k=7,A=8;(_={})[x]="Boolean",_[M]="<end>",_[w]="Identifier",_[S]="Keyword",_[L]="Null",_[T]="Numeric",_[k]="Punctuator",_[A]="String",_[9]="RegularExpression";var E="ArrayExpression",C="BinaryExpression",D="CallExpression",O="ConditionalExpression",P="Identifier",R="Literal",z="LogicalExpression",B="MemberExpression",Y="ObjectExpression",F="Property",N="UnaryExpression",I="Unexpected token %0",H="Unexpected number",j="Unexpected string",U="Unexpected identifier",W="Unexpected reserved word",G="Unexpected end of input",V="Invalid regular expression",q="Invalid regular expression: missing /",X="Octal literals are not allowed in strict mode.",$="Duplicate data property in object literal not allowed in strict mode",J="ILLEGAL",K="Disabled.",Z=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Q=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ee(e,t){if(!e)throw new Error("ASSERT: "+t)}function te(e){return e>=48&&e<=57}function ne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function ie(e){return"01234567".indexOf(e)>=0}function re(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function se(e){return 10===e||13===e||8232===e||8233===e}function ae(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Z.test(String.fromCharCode(e))}function oe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Q.test(String.fromCharCode(e))}var le={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function ce(){for(var e;y<v&&(re(e=g.charCodeAt(y))||se(e));)++y}function ue(e){var t,n,i,r=0;for(n="u"===e?4:2,t=0;t<n;++t)y<v&&ne(g[y])?(i=g[y++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):we({},I,J);return String.fromCharCode(r)}function he(){var e,t,n,i;for(t=0,"}"===(e=g[y])&&we({},I,J);y<v&&ne(e=g[y++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&we({},I,J),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),i=56320+(t-65536&1023),String.fromCharCode(n,i))}function de(){var e,t;for(e=g.charCodeAt(y++),t=String.fromCharCode(e),92===e&&(117!==g.charCodeAt(y)&&we({},I,J),++y,(e=ue("u"))&&"\\"!==e&&ae(e.charCodeAt(0))||we({},I,J),t=e);y<v&&oe(e=g.charCodeAt(y));)++y,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==g.charCodeAt(y)&&we({},I,J),++y,(e=ue("u"))&&"\\"!==e&&oe(e.charCodeAt(0))||we({},I,J),t+=e);return t}function fe(){var e,t,n,i,r=y,s=g.charCodeAt(y),a=g[y];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++y,{type:k,value:String.fromCharCode(s),start:r,end:y};default:if(61===(e=g.charCodeAt(y+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return y+=2,{type:k,value:String.fromCharCode(s)+String.fromCharCode(e),start:r,end:y};case 33:case 61:return y+=2,61===g.charCodeAt(y)&&++y,{type:k,value:g.slice(r,y),start:r,end:y}}}return">>>="===(i=g.substr(y,4))?{type:k,value:i,start:r,end:y+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:k,value:n,start:r,end:y+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:k,value:t,start:r,end:y+=2}:"<>=!+-*%&|^/".indexOf(a)>=0?(++y,{type:k,value:a,start:r,end:y}):void we({},I,J)}function pe(){var e,t,n;if(ee(te((n=g[y]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=y,e="","."!==n){if(e=g[y++],n=g[y],"0"===e){if("x"===n||"X"===n)return++y,function(e){for(var t="";y<v&&ne(g[y]);)t+=g[y++];return 0===t.length&&we({},I,J),ae(g.charCodeAt(y))&&we({},I,J),{type:T,value:parseInt("0x"+t,16),start:e,end:y}}(t);if(ie(n))return function(e){for(var t="0"+g[y++];y<v&&ie(g[y]);)t+=g[y++];return(ae(g.charCodeAt(y))||te(g.charCodeAt(y)))&&we({},I,J),{type:T,value:parseInt(t,8),octal:!0,start:e,end:y}}(t);n&&te(n.charCodeAt(0))&&we({},I,J)}for(;te(g.charCodeAt(y));)e+=g[y++];n=g[y]}if("."===n){for(e+=g[y++];te(g.charCodeAt(y));)e+=g[y++];n=g[y]}if("e"===n||"E"===n)if(e+=g[y++],"+"!==(n=g[y])&&"-"!==n||(e+=g[y++]),te(g.charCodeAt(y)))for(;te(g.charCodeAt(y));)e+=g[y++];else we({},I,J);return ae(g.charCodeAt(y))&&we({},I,J),{type:T,value:parseFloat(e),start:t,end:y}}function me(){var e,t,n;return ce(),y>=v?{type:M,start:y,end:y}:ae(e=g.charCodeAt(y))?(t=y,n=92===g.charCodeAt(y)?de():function(){var e,t;for(e=y++;y<v;){if(92===(t=g.charCodeAt(y)))return y=e,de();if(!oe(t))break;++y}return g.slice(e,y)}(),{type:1===n.length?w:le.hasOwnProperty(n)?S:"null"===n?L:"true"===n||"false"===n?x:w,value:n,start:t,end:y}):40===e||41===e||59===e?fe():39===e||34===e?function(){var e,t,n,i,r="",s=!1;for(ee("'"===(e=g[y])||'"'===e,"String literal must starts with a quote"),t=y,++y;y<v;){if((n=g[y++])===e){e="";break}if("\\"===n)if((n=g[y++])&&se(n.charCodeAt(0)))"\r"===n&&"\n"===g[y]&&++y;else switch(n){case"u":case"x":"{"===g[y]?(++y,r+=he()):r+=ue(n);break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:ie(n)?(0!==(i="01234567".indexOf(n))&&(s=!0),y<v&&ie(g[y])&&(s=!0,i=8*i+"01234567".indexOf(g[y++]),"0123".indexOf(n)>=0&&y<v&&ie(g[y])&&(i=8*i+"01234567".indexOf(g[y++]))),r+=String.fromCharCode(i)):r+=n}else{if(se(n.charCodeAt(0)))break;r+=n}}return""!==e&&we({},I,J),{type:A,value:r,octal:s,start:t,end:y}}():46===e?te(g.charCodeAt(y+1))?pe():fe():te(e)?pe():fe()}function _e(){var e;return y=(e=b).end,b=me(),y=e.end,e}function ge(){var e;e=y,b=me(),y=e}function ye(e,t,n){var i=new m("||"===e||"&&"===e?z:C);return i.operator=e,i.left=t,i.right=n,i}function ve(e){var t=new m(P);return t.name=e,t}function be(e){var t=new m(R);return t.value=e.value,t.raw=g.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function xe(e,t,n){var i=new m(B);return i.computed="["===e,i.object=t,i.property=n,i.computed||(n.member=!0),i}function Me(e,t,n){var i=new m(F);return i.key=t,i.value=n,i.kind=e,i}function we(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,((e,t)=>(ee(t<i.length,"Message reference must be in range"),i[t])));throw(n=new Error(r)).index=y,n.description=r,n}function Se(e){e.type===M&&we(e,G),e.type===T&&we(e,H),e.type===A&&we(e,j),e.type===w&&we(e,U),e.type===S&&we(e,W),we(e,I,e.value)}function Le(e){var t=_e();t.type===k&&t.value===e||Se(t)}function Te(e){return b.type===k&&b.value===e}function ke(e){return b.type===S&&b.value===e}function Ae(){var e;return y=b.start,(e=_e()).type===A||e.type===T?(e.octal&&we(e,X),be(e)):ve(e.value)}function Ee(){var e,t,n;return y=b.start,(e=b).type===w?(n=Ae(),Le(":"),Me("init",n,Ye())):e.type!==M&&e.type!==k?(t=Ae(),Le(":"),Me("init",t,Ye())):void Se(e)}var Ce={if:1};function De(){var e,t,n,i,r,s,a;if(Te("("))return function(){var e;return Le("("),e=Fe(),Le(")"),e}();if(Te("["))return function(){var e=[];for(y=b.start,Le("[");!Te("]");)Te(",")?(_e(),e.push(null)):(e.push(Ye()),Te("]")||Le(","));return _e(),function(e){var t=new m(E);return t.elements=e,t}(e)}();if(Te("{"))return function(){var e,t,n=[],i={},r=String;for(y=b.start,Le("{");!Te("}");)t="$"+((e=Ee()).key.type===P?e.key.name:r(e.key.value)),Object.prototype.hasOwnProperty.call(i,t)?we({},$):i[t]=!0,n.push(e),Te("}")||Le(",");return Le("}"),function(e){var t=new m(Y);return t.properties=e,t}(n)}();if(e=b.type,y=b.start,e===w||Ce[b.value])n=ve(_e().value);else if(e===A||e===T)b.octal&&we(b,X),n=be(_e());else{if(e===S)throw new Error(K);e===x?((t=_e()).value="true"===t.value,n=be(t)):e===L?((t=_e()).value=null,n=be(t)):Te("/")||Te("/=")?(n=be((b=null,ce(),i=y,r=function(){var e,t,n,i;for(ee("/"===(e=g[y]),"Regular expression literal must start with a slash"),t=g[y++],n=!1,i=!1;y<v;)if(t+=e=g[y++],"\\"===e)se((e=g[y++]).charCodeAt(0))&&we({},q),t+=e;else if(se(e.charCodeAt(0)))we({},q);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||we({},q),{value:t.substr(1,t.length-2),literal:t}}(),s=function(){var e,t,n;for(t="",n="";y<v&&oe((e=g[y]).charCodeAt(0));)++y,"\\"===e&&y<v?we({},I,J):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&we({},V,n),{value:n,literal:t}}(),a=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";we({},V)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){we({},V)}try{return new RegExp(e,t)}catch(e){return null}}(r.value,s.value),{literal:r.literal+s.literal,value:a,regex:{pattern:r.value,flags:s.value},start:i,end:y})),ge()):Se(_e())}return n}function Oe(){var e=[];if(Le("("),!Te(")"))for(;y<v&&(e.push(Ye()),!Te(")"));)Le(",");return Le(")"),e}function Pe(){var e;return Le("["),e=Fe(),Le("]"),e}function Re(){var e=function(){var e,t,n,i,r;for(e=De();;)if(Te("."))Le("."),e=xe(".",e,(r=void 0,y=b.start,function(e){return e.type===w||e.type===S||e.type===x||e.type===L}(r=_e())||Se(r),ve(r.value)));else if(Te("("))t=e,n=Oe(),i=void 0,(i=new m(D)).callee=t,i.arguments=n,e=i;else{if(!Te("["))break;e=xe("[",e,Pe())}return e}();if(b.type===k&&(Te("++")||Te("--")))throw new Error(K);return e}function ze(){var e,t,n,i,r;if(b.type!==k&&b.type!==S)t=Re();else{if(Te("++")||Te("--"))throw new Error(K);if(Te("+")||Te("-")||Te("~")||Te("!"))e=_e(),t=ze(),n=e.value,i=t,(r=new m(N)).operator=n,r.argument=i,r.prefix=!0,t=r;else{if(ke("delete")||ke("void")||ke("typeof"))throw new Error(K);t=Re()}}return t}function Be(e){var t=0;if(e.type!==k&&e.type!==S)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Ye(){var e,t;return e=function(){var e,t,n,i,r,s,a,o,l,c;if(e=b,l=ze(),0===(r=Be(i=b)))return l;for(i.prec=r,_e(),t=[e,b],s=[l,i,a=ze()];(r=Be(b))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=ye(o,l,a),s.push(n);(i=_e()).prec=r,s.push(i),t.push(b),n=ze(),s.push(n)}for(n=s[c=s.length-1],t.pop();c>1;)t.pop(),n=ye(s[c-1].value,s[c-2],n),c-=2;return n}(),Te("?")&&(_e(),t=Ye(),Le(":"),e=function(e,t,n){var i=new m(O);return i.test=e,i.consequent=t,i.alternate=n,i}(e,t,Ye())),e}function Fe(){var e=Ye();if(Te(","))throw new Error(K);return e}function Ne(e){y=0,v=(g=e).length,b=null,ge();var t=Fe();if(b.type!==M)throw new Error("Unexpect token after expression.");return t}const Ie={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};var He=n(2501);function je(e){function t(t,n,i){return r=>function(t,n,i,r){let s=e(n[0]);return i&&(s=i+"("+s+")",0===i.lastIndexOf("new ",0)&&(s="("+s+")")),s+"."+t+(r<0?"":0===r?"()":"("+n.slice(1).map(e).join(",")+")")}(t,r,n,i)}const n="new Date",i="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&(0,He.z3)("Missing arguments to clamp function."),t.length>3&&(0,He.z3)("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),join:t("join",null),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),reverse:function(t){return"("+e(t[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",i,0),lower:t("toLowerCase",i,0),substring:t("substring",i),split:t("split",i),replace:t("replace",i),trim:t("trim",i,0),regexp:r,test:t("test",r),if:function(t){t.length<3&&(0,He.z3)("Missing arguments to if function."),t.length>3&&(0,He.z3)("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Ue(e){const t=(e=e||{}).whitelist?(0,He.M1)(e.whitelist):{},n=e.blacklist?(0,He.M1)(e.blacklist):{},i=e.constants||Ie,r=(e.functions||je)(h),s=e.globalvar,a=e.fieldvar,o=(0,He.Tn)(s)?s:e=>`${s}["${e}"]`;let l={},c={},u=0;function h(e){if((0,He.Kg)(e))return e;const t=d[e.type];return null==t&&(0,He.z3)("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const r=e.name;return u>0?r:(0,He.mQ)(n,r)?(0,He.z3)("Illegal identifier: "+r):(0,He.mQ)(i,r)?i[r]:(0,He.mQ)(t,r)?r:(l[r]=1,o(r))},MemberExpression:e=>{const t=!e.computed,n=h(e.object);t&&(u+=1);const i=h(e.property);return n===a&&(c[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(i)]=1),t&&(u-=1),n+(t?"."+i:"["+i+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&(0,He.z3)("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,i=(0,He.mQ)(r,t)&&r[t];return i||(0,He.z3)("Unrecognized function: "+t),(0,He.Tn)(i)?i(n):i+"("+n.map(h).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(h).join(",")+"]",BinaryExpression:e=>"("+h(e.left)+e.operator+h(e.right)+")",UnaryExpression:e=>"("+e.operator+h(e.argument)+")",ConditionalExpression:e=>"("+h(e.test)+"?"+h(e.consequent)+":"+h(e.alternate)+")",LogicalExpression:e=>"("+h(e.left)+e.operator+h(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(h).join(",")+"}",Property:e=>{u+=1;const t=h(e.key);return u-=1,t+":"+h(e.value)}};function f(e){const t={code:h(e),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},t}return f.functions=r,f.constants=i,f}},6879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{defaultLocale:()=>Bt,locale:()=>zt,numberFormatDefaultLocale:()=>At,numberFormatLocale:()=>kt,resetDefaultLocale:()=>Yt,resetNumberFormatDefaultLocale:()=>Tt,resetTimeFormatDefaultLocale:()=>Dt,timeFormatDefaultLocale:()=>Pt,timeFormatLocale:()=>Ot});const i=Math.sqrt(50),r=Math.sqrt(10),s=Math.sqrt(2);function a(e,t,n){const o=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(o)),c=o/Math.pow(10,l),u=c>=i?10:c>=r?5:c>=s?2:1;let h,d,f;return l<0?(f=Math.pow(10,-l)/u,h=Math.round(e*f),d=Math.round(t*f),h/f<e&&++h,d/f>t&&--d,f=-f):(f=Math.pow(10,l)*u,h=Math.round(e/f),d=Math.round(t/f),h*f<e&&++h,d*f>t&&--d),d<h&&.5<=n&&n<2?a(e,t,2*n):[h,d,f]}function o(e,t,n){return a(e=+e,t=+t,n=+n)[2]}var l,c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(e){if(!(t=c.exec(e)))throw new Error("invalid format: "+e);var t;return new h({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function h(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function d(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function f(e){return(e=d(Math.abs(e)))?e[1]:NaN}function p(e,t){var n=d(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}u.prototype=h.prototype,h.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const m={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>p(100*e,t),r:p,s:function(e,t){var n=d(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(l=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+d(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _(e){return e}var g,y,v,b=Array.prototype.map,x=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function M(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?_:(t=b.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?_:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(b.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",h=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function p(e){var t=(e=u(e)).fill,n=e.align,f=e.sign,p=e.symbol,_=e.zero,g=e.width,y=e.comma,v=e.precision,b=e.trim,M=e.type;"n"===M?(y=!0,M="g"):m[M]||(void 0===v&&(v=12),b=!0,M="g"),(_||"0"===t&&"="===n)&&(_=!0,t="0",n="=");var w="$"===p?r:"#"===p&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",S="$"===p?s:/[%p]/.test(M)?c:"",L=m[M],T=/[defgprs%]/.test(M);function k(e){var r,s,c,u=w,p=S;if("c"===M)p=L(e)+p,e="";else{var m=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:L(Math.abs(e),v),b&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),m&&0==+e&&"+"!==f&&(m=!1),u=(m?"("===f?f:h:"-"===f||"("===f?"":f)+u,p=("s"===M?x[8+l/3]:"")+p+(m&&"("===f?")":""),T)for(r=-1,s=e.length;++r<s;)if(48>(c=e.charCodeAt(r))||c>57){p=(46===c?a+e.slice(r+1):e.slice(r))+p,e=e.slice(0,r);break}}y&&!_&&(e=i(e,1/0));var k=u.length+e.length+p.length,A=k<g?new Array(g-k+1).join(t):"";switch(y&&_&&(e=i(A+e,A.length?g-p.length:1/0),A=""),n){case"<":e=u+e+p+A;break;case"=":e=u+A+e+p;break;case"^":e=A.slice(0,k=A.length>>1)+u+e+p+A.slice(k);break;default:e=A+u+e+p}return o(e)}return v=void 0===v?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return e+""},k}return{format:p,formatPrefix:function(e,t){var n=p(((e=u(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(f(t)/3))),r=Math.pow(10,-i),s=x[8+i/3];return function(e){return n(r*e)+s}}}}g=M({thousands:",",grouping:[3],currency:["$",""]}),y=g.format,v=g.formatPrefix;var w=n(6865),S=n(2501);const L=new Date,T=new Date;function k(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=t=>(e(t=new Date(+t)),t),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=e=>{const t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),r.range=(n,i,s)=>{const a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;let o;do{a.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<i);return a},r.filter=n=>k((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})),n&&(r.count=(t,i)=>(L.setTime(+t),T.setTime(+i),e(L),e(T),Math.floor(n(L,T))),r.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?t=>i(t)%e==0:t=>r.count(0,t)%e==0):r:null)),r}const A=864e5,E=6048e5;function C(e){return k((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/E))}const D=C(0),O=C(1),P=C(2),R=C(3),z=C(4),B=C(5),Y=C(6);function F(e){return k((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/E))}D.range,O.range,P.range,R.range,z.range,B.range,Y.range;const N=F(0),I=F(1),H=F(2),j=F(3),U=F(4),W=F(5),G=F(6),V=(N.range,I.range,H.range,j.range,U.range,W.range,G.range,k((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/A),(e=>e.getDate()-1))),q=(V.range,k((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/A),(e=>e.getUTCDate()-1))),X=(q.range,k((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/A),(e=>Math.floor(e/A))).range,k((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));X.every=e=>isFinite(e=Math.floor(e))&&e>0?k((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,X.range;const $=k((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function J(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function K(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Z(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Q(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=he(r),u=de(r),h=he(s),d=de(s),f=he(a),p=de(a),m=he(o),_=de(o),g=he(l),y=de(l),v={a:function(e){return a[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Pe,e:Pe,f:Fe,g:$e,G:Ke,H:Re,I:ze,j:Be,L:Ye,m:Ne,M:Ie,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:bt,s:xt,S:He,u:je,U:Ue,V:Ge,w:Ve,W:qe,x:null,X:null,y:Xe,Y:Je,Z:Ze,"%":vt},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Qe,e:Qe,f:rt,g:mt,G:gt,H:et,I:tt,j:nt,L:it,m:st,M:at,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:bt,s:xt,S:ot,u:lt,U:ct,V:ht,w:dt,W:ft,x:null,X:null,y:pt,Y:_t,Z:yt,"%":vt},x={a:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return S(e,t,n,i)},d:we,e:we,f:Ee,g:ve,G:ye,H:Le,I:Le,j:Se,L:Ae,m:Me,M:Te,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:xe,Q:De,s:Oe,S:ke,u:pe,U:me,V:_e,w:fe,W:ge,x:function(e,t,i){return S(e,n,t,i)},X:function(e,t,n){return S(e,i,t,n)},y:ve,Y:ye,Z:be,"%":Ce};function M(e,t){return function(n){var i,r,s,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(r=se[i=e.charAt(++o)])?i=e.charAt(++o):r="e"===i?" ":"0",(s=t[i])&&(i=s(n,r)),a.push(i),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function w(e,t){return function(n){var i,r,s=Z(1900,void 0,1);if(S(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=K(Z(s.y,0,1))).getUTCDay(),i=r>4||0===r?I.ceil(i):I(i),i=q.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=J(Z(s.y,0,1))).getDay(),i=r>4||0===r?O.ceil(i):O(i),i=V.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?K(Z(s.y,0,1)).getUTCDay():J(Z(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,K(s)):J(s)}}function S(e,t,n,i){for(var r,s,a=0,o=t.length,l=n.length;a<o;){if(i>=l)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(s=x[r in se?t.charAt(a++):r])||(i=s(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=M(n,v),v.X=M(i,v),v.c=M(t,v),b.x=M(n,b),b.X=M(i,b),b.c=M(t,b),{format:function(e){var t=M(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=M(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}$.every=e=>isFinite(e=Math.floor(e))&&e>0?k((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,$.range;var ee,te,ne,ie,re,se={"-":"",_:" ",0:"0"},ae=/^\s*\d+/,oe=/^%/,le=/[\\^$*+?|[\]().{}]/g;function ce(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function ue(e){return e.replace(le,"\\$&")}function he(e){return new RegExp("^(?:"+e.map(ue).join("|")+")","i")}function de(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function fe(e,t,n){var i=ae.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function pe(e,t,n){var i=ae.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function me(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function _e(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function ge(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function ye(e,t,n){var i=ae.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function ve(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function be(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function xe(e,t,n){var i=ae.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function Me(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function we(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Se(e,t,n){var i=ae.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Le(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Te(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function ke(e,t,n){var i=ae.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Ae(e,t,n){var i=ae.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Ee(e,t,n){var i=ae.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Ce(e,t,n){var i=oe.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function De(e,t,n){var i=ae.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Oe(e,t,n){var i=ae.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Pe(e,t){return ce(e.getDate(),t,2)}function Re(e,t){return ce(e.getHours(),t,2)}function ze(e,t){return ce(e.getHours()%12||12,t,2)}function Be(e,t){return ce(1+V.count(X(e),e),t,3)}function Ye(e,t){return ce(e.getMilliseconds(),t,3)}function Fe(e,t){return Ye(e,t)+"000"}function Ne(e,t){return ce(e.getMonth()+1,t,2)}function Ie(e,t){return ce(e.getMinutes(),t,2)}function He(e,t){return ce(e.getSeconds(),t,2)}function je(e){var t=e.getDay();return 0===t?7:t}function Ue(e,t){return ce(D.count(X(e)-1,e),t,2)}function We(e){var t=e.getDay();return t>=4||0===t?z(e):z.ceil(e)}function Ge(e,t){return e=We(e),ce(z.count(X(e),e)+(4===X(e).getDay()),t,2)}function Ve(e){return e.getDay()}function qe(e,t){return ce(O.count(X(e)-1,e),t,2)}function Xe(e,t){return ce(e.getFullYear()%100,t,2)}function $e(e,t){return ce((e=We(e)).getFullYear()%100,t,2)}function Je(e,t){return ce(e.getFullYear()%1e4,t,4)}function Ke(e,t){var n=e.getDay();return ce((e=n>=4||0===n?z(e):z.ceil(e)).getFullYear()%1e4,t,4)}function Ze(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ce(t/60|0,"0",2)+ce(t%60,"0",2)}function Qe(e,t){return ce(e.getUTCDate(),t,2)}function et(e,t){return ce(e.getUTCHours(),t,2)}function tt(e,t){return ce(e.getUTCHours()%12||12,t,2)}function nt(e,t){return ce(1+q.count($(e),e),t,3)}function it(e,t){return ce(e.getUTCMilliseconds(),t,3)}function rt(e,t){return it(e,t)+"000"}function st(e,t){return ce(e.getUTCMonth()+1,t,2)}function at(e,t){return ce(e.getUTCMinutes(),t,2)}function ot(e,t){return ce(e.getUTCSeconds(),t,2)}function lt(e){var t=e.getUTCDay();return 0===t?7:t}function ct(e,t){return ce(N.count($(e)-1,e),t,2)}function ut(e){var t=e.getUTCDay();return t>=4||0===t?U(e):U.ceil(e)}function ht(e,t){return e=ut(e),ce(U.count($(e),e)+(4===$(e).getUTCDay()),t,2)}function dt(e){return e.getUTCDay()}function ft(e,t){return ce(I.count($(e)-1,e),t,2)}function pt(e,t){return ce(e.getUTCFullYear()%100,t,2)}function mt(e,t){return ce((e=ut(e)).getUTCFullYear()%100,t,2)}function _t(e,t){return ce(e.getUTCFullYear()%1e4,t,4)}function gt(e,t){var n=e.getUTCDay();return ce((e=n>=4||0===n?U(e):U.ceil(e)).getUTCFullYear()%1e4,t,4)}function yt(){return"+0000"}function vt(){return"%"}function bt(e){return+e}function xt(e){return Math.floor(+e/1e3)}function Mt(e){const t={};return n=>t[n]||(t[n]=e(n))}function wt(e){const t=Mt(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(e){const n=u(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return i=t(n),r=t(".1f")(1)[1],e=>{const t=i(e),n=t.indexOf(r);if(n<0)return t;let s=function(e,t){let n,i=e.lastIndexOf("e");if(i>0)return i;for(i=e.length;--i>t;)if(n=e.charCodeAt(i),n>=48&&n<=57)return i+1}(t,n);const a=s<t.length?t.slice(s):"";for(;--s>n;)if("0"!==t[s]){++s;break}return t.slice(0,s)+a}}return t(n);var i,r},formatSpan(e,i,r,s){s=u(null==s?",f":s);const a=function(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?o(t,e,n):o(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}(e,i,r),l=Math.max(Math.abs(e),Math.abs(i));let c;if(null==s.precision)switch(s.type){case"s":return isNaN(c=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(f(t)/3)))-f(Math.abs(e)))}(a,l))||(s.precision=c),n(s,l);case"":case"e":case"g":case"p":case"r":isNaN(c=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,f(t)-f(e))+1}(a,l))||(s.precision=c-("e"===s.type));break;case"f":case"%":isNaN(c=function(e){return Math.max(0,-f(Math.abs(e)))}(a))||(s.precision=c-2*("%"===s.type))}return t(s)}}}let St,Lt;function Tt(){return St=wt({format:y,formatPrefix:v})}function kt(e){return wt(M(e))}function At(e){return arguments.length?St=kt(e):St}function Et(e,t,n){n=n||{},(0,S.Gv)(n)||(0,S.z3)(`Invalid time multi-format specifier: ${n}`);const i=t(w.cs),r=t(w.eX),s=t(w.Al),a=t(w.vH),o=t(w.V8),l=t(w.Lp),c=t(w.pz),u=t(w.UX),h=e(n[w.R5]||".%L"),d=e(n[w.cs]||":%S"),f=e(n[w.eX]||"%I:%M"),p=e(n[w.Al]||"%I %p"),m=e(n[w.vH]||n[w.d_]||"%a %d"),_=e(n[w.V8]||"%b %d"),g=e(n[w.Lp]||"%B"),y=e(n[w.pz]||"%B"),v=e(n[w.UX]||"%Y");return e=>(i(e)<e?h:r(e)<e?d:s(e)<e?f:a(e)<e?p:l(e)<e?o(e)<e?m:_:u(e)<e?c(e)<e?g:y:v)(e)}function Ct(e){const t=Mt(e.format),n=Mt(e.utcFormat);return{timeFormat:e=>(0,S.Kg)(e)?t(e):Et(t,w.f$,e),utcFormat:e=>(0,S.Kg)(e)?n(e):Et(n,w.Kc,e),timeParse:Mt(e.parse),utcParse:Mt(e.utcParse)}}function Dt(){return Lt=Ct({format:te,parse:ne,utcFormat:ie,utcParse:re})}function Ot(e){return Ct(Q(e))}function Pt(e){return arguments.length?Lt=Ot(e):Lt}ee=Q({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),te=ee.format,ne=ee.parse,ie=ee.utcFormat,re=ee.utcParse,Tt(),Dt();const Rt=(e,t)=>(0,S.X$)({},e,t);function zt(e,t){const n=e?kt(e):At(),i=t?Ot(t):Pt();return Rt(n,i)}function Bt(e,t){const n=arguments.length;return n&&2!==n&&(0,S.z3)("defaultLocale expects either zero or two arguments."),n?Rt(At(e),Pt(t)):Rt(At(),Pt())}function Yt(){return Tt(),Dt(),Bt()}},5430:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataPrefix:()=>Kp,IndexPrefix:()=>Zp,ScalePrefix:()=>Qp,SignalPrefix:()=>em,bandspace:()=>Bm,bandwidth:()=>Ym,codeGenerator:()=>a_,codegenParams:()=>s_,containerSize:()=>Qm,contrast:()=>ym,copy:()=>Fm,data:()=>zp,dataVisitor:()=>tm,dayAbbrevFormat:()=>Jp,dayFormat:()=>$p,debug:()=>mm,domain:()=>Nm,encode:()=>Fp,expressionFunction:()=>o_,format:()=>Ip,functionContext:()=>t_,geoArea:()=>om,geoBounds:()=>lm,geoCentroid:()=>cm,geoScale:()=>um,geoShape:()=>Wm,inScope:()=>hm,indata:()=>Bp,indataVisitor:()=>nm,indexof:()=>Dm,info:()=>pm,invert:()=>Im,join:()=>Cm,lastindexof:()=>Om,luminance:()=>gm,merge:()=>vm,modify:()=>wm,monthAbbrevFormat:()=>Xp,monthFormat:()=>qp,parseExpression:()=>l_,pathShape:()=>Gm,pinchAngle:()=>Lm,pinchDistance:()=>Sm,pluck:()=>km,range:()=>Hm,replace:()=>Rm,reverse:()=>zm,scale:()=>jm,scaleGradient:()=>Um,scaleVisitor:()=>im,screen:()=>Km,setdata:()=>Yp,slice:()=>Pm,timeFormat:()=>Hp,timeParse:()=>Up,treeAncestors:()=>$m,treePath:()=>Xm,utcFormat:()=>jp,utcParse:()=>Wp,warn:()=>fm,windowSize:()=>Zm});var i={};n.r(i),n.d(i,{interpolate:()=>yt,interpolateArray:()=>ut,interpolateBasis:()=>Ze,interpolateBasisClosed:()=>Qe,interpolateCubehelix:()=>ss,interpolateCubehelixLong:()=>as,interpolateDate:()=>dt,interpolateDiscrete:()=>Fr,interpolateHcl:()=>ts,interpolateHclLong:()=>ns,interpolateHsl:()=>Jr,interpolateHslLong:()=>Kr,interpolateHue:()=>Nr,interpolateLab:()=>Qr,interpolateNumber:()=>ft,interpolateNumberArray:()=>lt,interpolateObject:()=>pt,interpolateRgb:()=>rt,interpolateRgbBasis:()=>at,interpolateRgbBasisClosed:()=>ot,interpolateRound:()=>vt,interpolateString:()=>gt,interpolateTransformCss:()=>Gr,interpolateTransformSvg:()=>Vr,interpolateZoom:()=>Xr,piecewise:()=>Er,quantize:()=>os});var r=n(2501);const s="Literal",a="CallExpression";function o(e){this.type=e}var l,c,u,h,d;o.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case a:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};var f=1,p=2,m=3,_=4,g=5,y=6,v=7,b=8;(l={})[f]="Boolean",l[p]="<end>",l[m]="Identifier",l[_]="Keyword",l[g]="Null",l[y]="Numeric",l[v]="Punctuator",l[b]="String",l[9]="RegularExpression";var x="ArrayExpression",M="BinaryExpression",w="CallExpression",S="ConditionalExpression",L="Identifier",T="Literal",k="LogicalExpression",A="MemberExpression",E="ObjectExpression",C="Property",D="UnaryExpression",O="Unexpected token %0",P="Unexpected number",R="Unexpected string",z="Unexpected identifier",B="Unexpected reserved word",Y="Unexpected end of input",F="Invalid regular expression",N="Invalid regular expression: missing /",I="Octal literals are not allowed in strict mode.",H="Duplicate data property in object literal not allowed in strict mode",j="ILLEGAL",U="Disabled.",W=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),G=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function V(e,t){if(!e)throw new Error("ASSERT: "+t)}function q(e){return e>=48&&e<=57}function X(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function $(e){return"01234567".indexOf(e)>=0}function J(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function K(e){return 10===e||13===e||8232===e||8233===e}function Z(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&W.test(String.fromCharCode(e))}function Q(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&G.test(String.fromCharCode(e))}const ee={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function te(){for(;u<h;){const e=c.charCodeAt(u);if(!J(e)&&!K(e))break;++u}}function ne(e){var t,n,i,r=0;for(n="u"===e?4:2,t=0;t<n;++t)u<h&&X(c[u])?(i=c[u++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):_e({},O,j);return String.fromCharCode(r)}function ie(){var e,t,n,i;for(t=0,"}"===(e=c[u])&&_e({},O,j);u<h&&X(e=c[u++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&_e({},O,j),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),i=56320+(t-65536&1023),String.fromCharCode(n,i))}function re(){var e,t;for(e=c.charCodeAt(u++),t=String.fromCharCode(e),92===e&&(117!==c.charCodeAt(u)&&_e({},O,j),++u,(e=ne("u"))&&"\\"!==e&&Z(e.charCodeAt(0))||_e({},O,j),t=e);u<h&&Q(e=c.charCodeAt(u));)++u,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==c.charCodeAt(u)&&_e({},O,j),++u,(e=ne("u"))&&"\\"!==e&&Q(e.charCodeAt(0))||_e({},O,j),t+=e);return t}function se(){var e,t,n,i,r=u,s=c.charCodeAt(u),a=c[u];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++u,{type:v,value:String.fromCharCode(s),start:r,end:u};default:if(61===(e=c.charCodeAt(u+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return u+=2,{type:v,value:String.fromCharCode(s)+String.fromCharCode(e),start:r,end:u};case 33:case 61:return u+=2,61===c.charCodeAt(u)&&++u,{type:v,value:c.slice(r,u),start:r,end:u}}}return">>>="===(i=c.substr(u,4))?{type:v,value:i,start:r,end:u+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:v,value:n,start:r,end:u+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:v,value:t,start:r,end:u+=2}:("//"===t&&_e({},O,j),"<>=!+-*%&|^/".indexOf(a)>=0?(++u,{type:v,value:a,start:r,end:u}):void _e({},O,j))}function ae(){var e,t,n;if(V(q((n=c[u]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=u,e="","."!==n){if(e=c[u++],n=c[u],"0"===e){if("x"===n||"X"===n)return++u,function(e){let t="";for(;u<h&&X(c[u]);)t+=c[u++];return 0===t.length&&_e({},O,j),Z(c.charCodeAt(u))&&_e({},O,j),{type:y,value:parseInt("0x"+t,16),start:e,end:u}}(t);if($(n))return function(e){let t="0"+c[u++];for(;u<h&&$(c[u]);)t+=c[u++];return(Z(c.charCodeAt(u))||q(c.charCodeAt(u)))&&_e({},O,j),{type:y,value:parseInt(t,8),octal:!0,start:e,end:u}}(t);n&&q(n.charCodeAt(0))&&_e({},O,j)}for(;q(c.charCodeAt(u));)e+=c[u++];n=c[u]}if("."===n){for(e+=c[u++];q(c.charCodeAt(u));)e+=c[u++];n=c[u]}if("e"===n||"E"===n)if(e+=c[u++],"+"!==(n=c[u])&&"-"!==n||(e+=c[u++]),q(c.charCodeAt(u)))for(;q(c.charCodeAt(u));)e+=c[u++];else _e({},O,j);return Z(c.charCodeAt(u))&&_e({},O,j),{type:y,value:parseFloat(e),start:t,end:u}}function oe(){if(te(),u>=h)return{type:p,start:u,end:u};const e=c.charCodeAt(u);return Z(e)?(t=u,n=92===c.charCodeAt(u)?re():function(){var e,t;for(e=u++;u<h;){if(92===(t=c.charCodeAt(u)))return u=e,re();if(!Q(t))break;++u}return c.slice(e,u)}(),{type:1===n.length?m:ee.hasOwnProperty(n)?_:"null"===n?g:"true"===n||"false"===n?f:m,value:n,start:t,end:u}):40===e||41===e||59===e?se():39===e||34===e?function(){var e,t,n,i,r="",s=!1;for(V("'"===(e=c[u])||'"'===e,"String literal must starts with a quote"),t=u,++u;u<h;){if((n=c[u++])===e){e="";break}if("\\"===n)if((n=c[u++])&&K(n.charCodeAt(0)))"\r"===n&&"\n"===c[u]&&++u;else switch(n){case"u":case"x":"{"===c[u]?(++u,r+=ie()):r+=ne(n);break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:$(n)?(0!==(i="01234567".indexOf(n))&&(s=!0),u<h&&$(c[u])&&(s=!0,i=8*i+"01234567".indexOf(c[u++]),"0123".indexOf(n)>=0&&u<h&&$(c[u])&&(i=8*i+"01234567".indexOf(c[u++]))),r+=String.fromCharCode(i)):r+=n}else{if(K(n.charCodeAt(0)))break;r+=n}}return""!==e&&_e({},O,j),{type:b,value:r,octal:s,start:t,end:u}}():46===e?q(c.charCodeAt(u+1))?ae():se():q(e)?ae():se();var t,n}function le(){const e=d;return u=e.end,d=oe(),u=e.end,e}function ce(){const e=u;d=oe(),u=e}function ue(e,t,n){const i=new o("||"===e||"&&"===e?k:M);return i.operator=e,i.left=t,i.right=n,i}function he(e,t){const n=new o(w);return n.callee=e,n.arguments=t,n}function de(e){const t=new o(L);return t.name=e,t}function fe(e){const t=new o(T);return t.value=e.value,t.raw=c.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function pe(e,t,n){const i=new o(A);return i.computed="["===e,i.object=t,i.property=n,i.computed||(n.member=!0),i}function me(e,t,n){const i=new o(C);return i.key=t,i.value=n,i.kind=e,i}function _e(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,((e,t)=>(V(t<i.length,"Message reference must be in range"),i[t])));throw(n=new Error(r)).index=u,n.description=r,n}function ge(e){e.type===p&&_e(e,Y),e.type===y&&_e(e,P),e.type===b&&_e(e,R),e.type===m&&_e(e,z),e.type===_&&_e(e,B),_e(e,O,e.value)}function ye(e){const t=le();t.type===v&&t.value===e||ge(t)}function ve(e){return d.type===v&&d.value===e}function be(e){return d.type===_&&d.value===e}function xe(){u=d.start;const e=le();return e.type===b||e.type===y?(e.octal&&_e(e,I),fe(e)):de(e.value)}function Me(){var e,t,n;return u=d.start,(e=d).type===m?(n=xe(),ye(":"),me("init",n,De())):e.type!==p&&e.type!==v?(t=xe(),ye(":"),me("init",t,De())):void ge(e)}const we={if:1};function Se(){var e,t,n;if(ve("("))return function(){ye("(");const e=Oe();return ye(")"),e}();if(ve("["))return function(){const e=[];for(u=d.start,ye("[");!ve("]");)ve(",")?(le(),e.push(null)):(e.push(De()),ve("]")||ye(","));return le(),function(e){const t=new o(x);return t.elements=e,t}(e)}();if(ve("{"))return function(){var e,t,n=[],i={},r=String;for(u=d.start,ye("{");!ve("}");)t="$"+((e=Me()).key.type===L?e.key.name:r(e.key.value)),Object.prototype.hasOwnProperty.call(i,t)?_e({},H):i[t]=!0,n.push(e),ve("}")||ye(",");return ye("}"),function(e){const t=new o(E);return t.properties=e,t}(n)}();if(e=d.type,u=d.start,e===m||we[d.value])n=de(le().value);else if(e===b||e===y)d.octal&&_e(d,I),n=fe(le());else{if(e===_)throw new Error(U);e===f?((t=le()).value="true"===t.value,n=fe(t)):e===g?((t=le()).value=null,n=fe(t)):ve("/")||ve("/=")?(n=fe(function(){var e,t,n,i;return d=null,te(),e=u,t=function(){var e,t,n,i;for(V("/"===(e=c[u]),"Regular expression literal must start with a slash"),t=c[u++],n=!1,i=!1;u<h;)if(t+=e=c[u++],"\\"===e)K((e=c[u++]).charCodeAt(0))&&_e({},N),t+=e;else if(K(e.charCodeAt(0)))_e({},N);else if(n)"]"===e&&(n=!1);else{if("/"===e){i=!0;break}"["===e&&(n=!0)}return i||_e({},N),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";u<h&&Q((e=c[u]).charCodeAt(0));)++u,"\\"===e&&u<h?_e({},O,j):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&_e({},F,n),{value:n,literal:t}}(),i=function(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";_e({},F)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){_e({},F)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:u}}()),ce()):ge(le())}return n}function Le(){const e=[];if(ye("("),!ve(")"))for(;u<h&&(e.push(De()),!ve(")"));)ye(",");return ye(")"),e}function Te(){u=d.start;const e=le();return function(e){return e.type===m||e.type===_||e.type===f||e.type===g}(e)||ge(e),de(e.value)}function ke(){ye("[");const e=Oe();return ye("]"),e}function Ae(){const e=function(){var e;for(e=Se();;)if(ve("."))ye("."),e=pe(".",e,Te());else if(ve("("))e=he(e,Le());else{if(!ve("["))break;e=pe("[",e,ke())}return e}();if(d.type===v&&(ve("++")||ve("--")))throw new Error(U);return e}function Ee(){var e,t;if(d.type!==v&&d.type!==_)t=Ae();else{if(ve("++")||ve("--"))throw new Error(U);if(ve("+")||ve("-")||ve("~")||ve("!"))e=le(),t=Ee(),t=function(e,t){const n=new o(D);return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(be("delete")||be("void")||be("typeof"))throw new Error(U);t=Ae()}}return t}function Ce(e){let t=0;if(e.type!==v&&e.type!==_)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function De(){var e,t;return e=function(){var e,t,n,i,r,s,a,o,l,c;if(e=d,l=Ee(),0===(r=Ce(i=d)))return l;for(i.prec=r,le(),t=[e,d],s=[l,i,a=Ee()];(r=Ce(d))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=ue(o,l,a),s.push(n);(i=le()).prec=r,s.push(i),t.push(d),n=Ee(),s.push(n)}for(n=s[c=s.length-1],t.pop();c>1;)t.pop(),n=ue(s[c-1].value,s[c-2],n),c-=2;return n}(),ve("?")&&(le(),t=De(),ye(":"),e=function(e,t,n){const i=new o(S);return i.test=e,i.consequent=t,i.alternate=n,i}(e,t,De())),e}function Oe(){const e=De();if(ve(","))throw new Error(U);return e}var Pe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Re(e){function t(t,n,i){return r=>function(t,n,i,r){let s=e(n[0]);return i&&(s=i+"("+s+")",0===i.lastIndexOf("new ",0)&&(s="("+s+")")),s+"."+t+(r<0?"":0===r?"()":"("+n.slice(1).map(e).join(",")+")")}(t,r,n,i)}const n="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&(0,r.z3)("Missing arguments to clamp function."),t.length>3&&(0,r.z3)("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",i,0),lower:t("toLowerCase",i,0),substring:t("substring",i),split:t("split",i),trim:t("trim",i,0),regexp:s,test:t("test",s),if:function(t){t.length<3&&(0,r.z3)("Missing arguments to if function."),t.length>3&&(0,r.z3)("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function ze(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Be(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ye(e){let t,n,i;function r(e,i,r=0,s=e.length){if(r<s){if(0!==t(i,i))return s;do{const t=r+s>>>1;n(e[t],i)<0?r=t+1:s=t}while(r<s)}return r}return 2!==e.length?(t=ze,n=(t,n)=>ze(e(t),n),i=(t,n)=>e(t)-n):(t=e===ze||e===Be?e:Fe,n=e,i=e),{left:r,center:function(e,t,n=0,s=e.length){const a=r(e,t,n,s-1);return a>n&&i(e[a-1],t)>-i(e[a],t)?a-1:a},right:function(e,i,r=0,s=e.length){if(r<s){if(0!==t(i,i))return s;do{const t=r+s>>>1;n(e[t],i)<=0?r=t+1:s=t}while(r<s)}return r}}}function Fe(){return 0}function Ne(e){return null===e?NaN:+e}const Ie=Ye(ze),He=Ie.right,je=(Ie.left,Ye(Ne).center,He),Ue=Math.sqrt(50),We=Math.sqrt(10),Ge=Math.sqrt(2);function Ve(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=Ue?10:s>=We?5:s>=Ge?2:1;let o,l,c;return r<0?(c=Math.pow(10,-r)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Ve(e,t,2*n):[o,l,c]}function qe(e,t,n){if(!((n=+n)>0))return[];if((e=+e)==(t=+t))return[e];const i=t<e,[r,s,a]=i?Ve(t,e,n):Ve(e,t,n);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(i)if(a<0)for(let e=0;e<o;++e)l[e]=(s-e)/-a;else for(let e=0;e<o;++e)l[e]=(s-e)*a;else if(a<0)for(let e=0;e<o;++e)l[e]=(r+e)/-a;else for(let e=0;e<o;++e)l[e]=(r+e)*a;return l}function Xe(e,t,n){return Ve(e=+e,t=+t,n=+n)[2]}function $e(e,t,n){n=+n;const i=(t=+t)<(e=+e),r=i?Xe(t,e,n):Xe(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}var Je=n(5036);function Ke(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function Ze(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return Ke((n-i/t)*t,a,r,s,o)}}function Qe(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],s=e[i%t],a=e[(i+1)%t],o=e[(i+2)%t];return Ke((n-i/t)*t,r,s,a,o)}}const et=e=>()=>e;function tt(e,t){return function(n){return e+n*t}}function nt(e,t){var n=t-e;return n?tt(e,n>180||n<-180?n-360*Math.round(n/360):n):et(isNaN(e)?t:e)}function it(e,t){var n=t-e;return n?tt(e,n):et(isNaN(e)?t:e)}const rt=function e(t){var n=function(e){return 1==(e=+e)?it:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):et(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=(0,Je.Qh)(e)).r,(t=(0,Je.Qh)(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),a=it(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=s(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function st(e){return function(t){var n,i,r=t.length,s=new Array(r),a=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=(0,Je.Qh)(t[n]),s[n]=i.r||0,a[n]=i.g||0,o[n]=i.b||0;return s=e(s),a=e(a),o=e(o),i.opacity=1,function(e){return i.r=s(e),i.g=a(e),i.b=o(e),i+""}}}var at=st(Ze),ot=st(Qe);function lt(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(s){for(n=0;n<i;++n)r[n]=e[n]*(1-s)+t[n]*s;return r}}function ct(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ut(e,t){return(ct(t)?lt:ht)(e,t)}function ht(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=yt(e[n],t[n]);for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=s[n](e);return a}}function dt(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pt(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=yt(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_t=new RegExp(mt.source,"g");function gt(e,t){var n,i,r,s=mt.lastIndex=_t.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=mt.exec(e))&&(i=_t.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:ft(n,i)})),s=_t.lastIndex;return s<t.length&&(r=t.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)o[(n=l[i]).i]=n.x(e);return o.join("")})}function yt(e,t){var n,i=typeof t;return null==t||"boolean"===i?et(t):("number"===i?ft:"string"===i?(n=(0,Je.Ay)(t))?(t=n,rt):gt:t instanceof Je.Ay?rt:t instanceof Date?dt:ct(t)?lt:Array.isArray(t)?ht:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?pt:ft)(e,t)}function vt(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function bt(e){return+e}var xt=[0,1];function Mt(e){return e}function wt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function St(e,t,n){var i=e[0],r=e[1],s=t[0],a=t[1];return r<i?(i=wt(r,i),s=n(a,s)):(i=wt(i,r),s=n(s,a)),function(e){return s(i(e))}}function Lt(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=wt(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(t){var n=je(e,t,1,i)-1;return s[n](r[n](t))}}function Tt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function kt(){var e,t,n,i,r,s,a=xt,o=xt,l=yt,c=Mt;function u(){var e=Math.min(a.length,o.length);return c!==Mt&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),i=e>2?Lt:St,r=s=null,h}function h(t){return null==t||isNaN(t=+t)?n:(r||(r=i(a.map(e),o,l)))(e(c(t)))}return h.invert=function(n){return c(t((s||(s=i(o,a.map(e),ft)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,bt),u()):a.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=vt,u()},h.clamp=function(e){return arguments.length?(c=!!e||Mt,u()):c!==Mt},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,u()}}function At(){return kt()(Mt,Mt)}function Et(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Ct(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}var Dt,Ot=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pt(e){if(!(t=Ot.exec(e)))throw new Error("invalid format: "+e);var t;return new Rt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Rt(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function zt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Bt(e){return(e=zt(Math.abs(e)))?e[1]:NaN}function Yt(e,t){var n=zt(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Pt.prototype=Rt.prototype,Rt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ft={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yt(100*e,t),r:Yt,s:function(e,t){var n=zt(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(Dt=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+zt(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nt(e){return e}var It,Ht,jt,Ut=Array.prototype.map,Wt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Gt(e,t,n,i){var r,s=$e(e,t,n);switch((i=Pt(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Bt(t)/3)))-Bt(Math.abs(e)))}(s,a))||(i.precision=r),jt(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bt(t)-Bt(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-Bt(Math.abs(e)))}(s))||(i.precision=r-2*("%"===i.type))}return Ht(i)}function Vt(e){var t=e.domain;return e.ticks=function(e){var n=t();return qe(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return Gt(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,s=t(),a=0,o=s.length-1,l=s[a],c=s[o],u=10;for(c<l&&(r=l,l=c,c=r,r=a,a=o,o=r);u-- >0;){if((r=Xe(l,c,n))===i)return s[a]=l,s[o]=c,t(s);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function qt(e,t){var n,i=0,r=(e=e.slice()).length-1,s=e[i],a=e[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),e[i]=t.floor(s),e[r]=t.ceil(a),e}function Xt(e){return Math.log(e)}function $t(e){return Math.exp(e)}function Jt(e){return-Math.log(-e)}function Kt(e){return-Math.exp(-e)}function Zt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qt(e){return(t,n)=>-e(-t,n)}function en(e){const t=e(Xt,$t),n=t.domain;let i,r,s=10;function a(){return i=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),r=function(e){return 10===e?Zt:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(i=Qt(i),r=Qt(r),e(Jt,Kt)):e(Xt,$t),t}return t.base=function(e){return arguments.length?(s=+e,a()):s},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],o=t[t.length-1];const l=o<a;l&&([a,o]=[o,a]);let c,u,h=i(a),d=i(o);const f=null==e?10:+e;let p=[];if(!(s%1)&&d-h<f){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(c=1;c<s;++c)if(u=h<0?c/r(-h):c*r(h),!(u<a)){if(u>o)break;p.push(u)}}else for(;h<=d;++h)for(c=s-1;c>=1;--c)if(u=h>0?c/r(-h):c*r(h),!(u<a)){if(u>o)break;p.push(u)}2*p.length<f&&(p=qe(a,o,f))}else p=qe(h,d,Math.min(d-h,f)).map(r);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!=typeof n&&(s%1||null!=(n=Pt(n)).precision||(n.trim=!0),n=Ht(n)),e===1/0)return n;const a=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/r(Math.round(i(e)));return t*s<s-.5&&(t*=s),t<=a?n(e):""}},t.nice=()=>n(qt(n(),{floor:e=>r(Math.floor(i(e))),ceil:e=>r(Math.ceil(i(e)))})),t}function tn(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nn(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rn(e){return e<0?-e*e:e*e}function sn(e){var t=e(Mt,Mt),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(Mt,Mt):.5===n?e(nn,rn):e(tn(n),tn(1/n)):n},Vt(t)}function an(){var e=sn(kt());return e.copy=function(){return Tt(e,an()).exponent(e.exponent())},Et.apply(e,arguments),e}function on(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ln(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cn(e){var t=1,n=e(on(t),ln(t));return n.constant=function(n){return arguments.length?e(on(t=+n),ln(t)):t},Vt(n)}It=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?Nt:(t=Ut.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(e.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Nt:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ut.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Pt(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,m=e.comma,_=e.precision,g=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Ft[y]||(void 0===_&&(_=12),g=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var v="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?s:/[%p]/.test(y)?l:"",x=Ft[y],M=/[defgprs%]/.test(y);function w(e){var r,s,l,d=v,w=b;if("c"===y)w=x(e)+w,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),_),g&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),S&&0==+e&&"+"!==h&&(S=!1),d=(S?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===y?Wt[8+Dt/3]:"")+w+(S&&"("===h?")":""),M)for(r=-1,s=e.length;++r<s;)if(48>(l=e.charCodeAt(r))||l>57){w=(46===l?a+e.slice(r+1):e.slice(r))+w,e=e.slice(0,r);break}}m&&!f&&(e=i(e,1/0));var L=d.length+e.length+w.length,T=L<p?new Array(p-L+1).join(t):"";switch(m&&f&&(e=i(T+e,T.length?p-w.length:1/0),T=""),n){case"<":e=d+e+w+T;break;case"=":e=d+T+e+w;break;case"^":e=T.slice(0,L=T.length>>1)+d+e+w+T.slice(L);break;default:e=T+d+e+w}return o(e)}return _=void 0===_?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=Pt(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Bt(t)/3))),r=Math.pow(10,-i),s=Wt[8+i/3];return function(e){return n(r*e)+s}}}}({thousands:",",grouping:[3],currency:["$",""]}),Ht=It.format,jt=It.formatPrefix;const un=1e3,hn=6e4,dn=36e5,fn=864e5,pn=6048e5,mn=31536e6,_n=new Date,gn=new Date;function yn(e,t,n,i){function r(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return r.floor=t=>(e(t=new Date(+t)),t),r.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),r.round=e=>{const t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),r.range=(n,i,s)=>{const a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;let o;do{a.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<i);return a},r.filter=n=>yn((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})),n&&(r.count=(t,i)=>(_n.setTime(+t),gn.setTime(+i),e(_n),e(gn),Math.floor(n(_n,gn))),r.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?t=>i(t)%e==0:t=>r.count(0,t)%e==0):r:null)),r}const vn=yn((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));vn.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?yn((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):vn:null),vn.range;const bn=yn((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*un)}),((e,t)=>(t-e)/un),(e=>e.getUTCSeconds())),xn=(bn.range,yn((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*un)}),((e,t)=>{e.setTime(+e+t*hn)}),((e,t)=>(t-e)/hn),(e=>e.getMinutes()))),Mn=(xn.range,yn((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*hn)}),((e,t)=>(t-e)/hn),(e=>e.getUTCMinutes()))),wn=(Mn.range,yn((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*un-e.getMinutes()*hn)}),((e,t)=>{e.setTime(+e+t*dn)}),((e,t)=>(t-e)/dn),(e=>e.getHours()))),Sn=(wn.range,yn((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*dn)}),((e,t)=>(t-e)/dn),(e=>e.getUTCHours()))),Ln=(Sn.range,yn((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hn)/fn),(e=>e.getDate()-1))),Tn=(Ln.range,yn((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/fn),(e=>e.getUTCDate()-1))),kn=(Tn.range,yn((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/fn),(e=>Math.floor(e/fn))));function An(e){return yn((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hn)/pn))}kn.range;const En=An(0),Cn=An(1),Dn=An(2),On=An(3),Pn=An(4),Rn=An(5),zn=An(6);function Bn(e){return yn((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/pn))}En.range,Cn.range,Dn.range,On.range,Pn.range,Rn.range,zn.range;const Yn=Bn(0),Fn=Bn(1),Nn=Bn(2),In=Bn(3),Hn=Bn(4),jn=Bn(5),Un=Bn(6),Wn=(Yn.range,Fn.range,Nn.range,In.range,Hn.range,jn.range,Un.range,yn((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),Gn=(Wn.range,yn((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),Vn=(Gn.range,yn((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));Vn.every=e=>isFinite(e=Math.floor(e))&&e>0?yn((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,Vn.range;const qn=yn((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function Xn(e,t,n,i,r,s){const a=[[bn,1,un],[bn,5,5e3],[bn,15,15e3],[bn,30,3e4],[s,1,hn],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,dn],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,fn],[i,2,1728e5],[n,1,pn],[t,1,2592e6],[t,3,7776e6],[e,1,mn]];function o(t,n,i){const r=Math.abs(n-t)/i,s=Ye((([,,e])=>e)).right(a,r);if(s===a.length)return e.every($e(t/mn,n/mn,i));if(0===s)return vn.every(Math.max($e(t,n,i),1));const[o,l]=a[r/a[s-1][2]<a[s][2]/r?s-1:s];return o.every(l)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const r=n&&"function"==typeof n.range?n:o(e,t,n),s=r?r.range(e,+t+1):[];return i?s.reverse():s},o]}qn.every=e=>isFinite(e=Math.floor(e))&&e>0?yn((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,qn.range;const[$n,Jn]=Xn(qn,Gn,Yn,kn,Sn,Mn),[Kn,Zn]=Xn(Vn,Wn,En,Ln,wn,xn);function Qn(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ei(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ti(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var ni,ii,ri,si={"-":"",_:" ",0:"0"},ai=/^\s*\d+/,oi=/^%/,li=/[\\^$*+?|[\]().{}]/g;function ci(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function ui(e){return e.replace(li,"\\$&")}function hi(e){return new RegExp("^(?:"+e.map(ui).join("|")+")","i")}function di(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function fi(e,t,n){var i=ai.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function pi(e,t,n){var i=ai.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function mi(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function _i(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function gi(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function yi(e,t,n){var i=ai.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function vi(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function bi(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function xi(e,t,n){var i=ai.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function Mi(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function wi(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Si(e,t,n){var i=ai.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Li(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Ti(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function ki(e,t,n){var i=ai.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Ai(e,t,n){var i=ai.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Ei(e,t,n){var i=ai.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Ci(e,t,n){var i=oi.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Di(e,t,n){var i=ai.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Oi(e,t,n){var i=ai.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function Pi(e,t){return ci(e.getDate(),t,2)}function Ri(e,t){return ci(e.getHours(),t,2)}function zi(e,t){return ci(e.getHours()%12||12,t,2)}function Bi(e,t){return ci(1+Ln.count(Vn(e),e),t,3)}function Yi(e,t){return ci(e.getMilliseconds(),t,3)}function Fi(e,t){return Yi(e,t)+"000"}function Ni(e,t){return ci(e.getMonth()+1,t,2)}function Ii(e,t){return ci(e.getMinutes(),t,2)}function Hi(e,t){return ci(e.getSeconds(),t,2)}function ji(e){var t=e.getDay();return 0===t?7:t}function Ui(e,t){return ci(En.count(Vn(e)-1,e),t,2)}function Wi(e){var t=e.getDay();return t>=4||0===t?Pn(e):Pn.ceil(e)}function Gi(e,t){return e=Wi(e),ci(Pn.count(Vn(e),e)+(4===Vn(e).getDay()),t,2)}function Vi(e){return e.getDay()}function qi(e,t){return ci(Cn.count(Vn(e)-1,e),t,2)}function Xi(e,t){return ci(e.getFullYear()%100,t,2)}function $i(e,t){return ci((e=Wi(e)).getFullYear()%100,t,2)}function Ji(e,t){return ci(e.getFullYear()%1e4,t,4)}function Ki(e,t){var n=e.getDay();return ci((e=n>=4||0===n?Pn(e):Pn.ceil(e)).getFullYear()%1e4,t,4)}function Zi(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ci(t/60|0,"0",2)+ci(t%60,"0",2)}function Qi(e,t){return ci(e.getUTCDate(),t,2)}function er(e,t){return ci(e.getUTCHours(),t,2)}function tr(e,t){return ci(e.getUTCHours()%12||12,t,2)}function nr(e,t){return ci(1+Tn.count(qn(e),e),t,3)}function ir(e,t){return ci(e.getUTCMilliseconds(),t,3)}function rr(e,t){return ir(e,t)+"000"}function sr(e,t){return ci(e.getUTCMonth()+1,t,2)}function ar(e,t){return ci(e.getUTCMinutes(),t,2)}function or(e,t){return ci(e.getUTCSeconds(),t,2)}function lr(e){var t=e.getUTCDay();return 0===t?7:t}function cr(e,t){return ci(Yn.count(qn(e)-1,e),t,2)}function ur(e){var t=e.getUTCDay();return t>=4||0===t?Hn(e):Hn.ceil(e)}function hr(e,t){return e=ur(e),ci(Hn.count(qn(e),e)+(4===qn(e).getUTCDay()),t,2)}function dr(e){return e.getUTCDay()}function fr(e,t){return ci(Fn.count(qn(e)-1,e),t,2)}function pr(e,t){return ci(e.getUTCFullYear()%100,t,2)}function mr(e,t){return ci((e=ur(e)).getUTCFullYear()%100,t,2)}function _r(e,t){return ci(e.getUTCFullYear()%1e4,t,4)}function gr(e,t){var n=e.getUTCDay();return ci((e=n>=4||0===n?Hn(e):Hn.ceil(e)).getUTCFullYear()%1e4,t,4)}function yr(){return"+0000"}function vr(){return"%"}function br(e){return+e}function xr(e){return Math.floor(+e/1e3)}function Mr(e){return new Date(e)}function wr(e){return e instanceof Date?+e:+new Date(+e)}function Sr(e,t,n,i,r,s,a,o,l,c){var u=At(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),_=c("%I %p"),g=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function x(e){return(l(e)<e?f:o(e)<e?p:a(e)<e?m:s(e)<e?_:i(e)<e?r(e)<e?g:y:n(e)<e?v:b)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,wr)):d().map(Mr)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?x:c(t)},u.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(qt(n,e)):u},u.copy=function(){return Tt(u,Sr(e,t,n,i,r,s,a,o,l,c))},u}function Lr(){var e,t,n,i,r,s=0,a=1,o=Mt,l=!1;function c(t){return null==t||isNaN(t=+t)?r:o(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,i;return arguments.length?([n,i]=t,o=e(n,i),c):[o(0),o(1)]}}return c.domain=function(r){return arguments.length?([s,a]=r,e=i(s=+s),t=i(a=+a),n=e===t?0:1/(t-e),c):[s,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(yt),c.rangeRound=u(vt),c.unknown=function(e){return arguments.length?(r=e,c):r},function(r){return i=r,e=r(s),t=r(a),n=e===t?0:1/(t-e),c}}function Tr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kr(){var e=Vt(Lr()(Mt));return e.copy=function(){return Tr(e,kr())},Ct.apply(e,arguments)}function Ar(){var e=sn(Lr());return e.copy=function(){return Tr(e,Ar()).exponent(e.exponent())},Ct.apply(e,arguments)}function Er(e,t){void 0===t&&(t=e,e=yt);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return s[t](e-t)}}function Cr(){var e,t,n,i,r,s,a,o=0,l=.5,c=1,u=1,h=Mt,d=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+s(e))-t)*(u*e<u*t?i:r),h(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,i,r;return arguments.length?([n,i,r]=t,h=Er(e,[n,i,r]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([o,l,c]=a,e=s(o=+o),t=s(l=+l),n=s(c=+c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,f):[o,l,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.range=p(yt),f.rangeRound=p(vt),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return s=a,e=a(o),t=a(l),n=a(c),i=e===t?0:.5/(t-e),r=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function Dr(){var e=sn(Cr());return e.copy=function(){return Tr(e,Dr()).exponent(e.exponent())},Ct.apply(e,arguments)}function Or(e,t,n=Ne){if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),a=+n(e[s],s,e);return a+(+n(e[s+1],s+1,e)-a)*(r-s)}}ni=function(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=hi(r),u=di(r),h=hi(s),d=di(s),f=hi(a),p=di(a),m=hi(o),_=di(o),g=hi(l),y=di(l),v={a:function(e){return a[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Pi,e:Pi,f:Fi,g:$i,G:Ki,H:Ri,I:zi,j:Bi,L:Yi,m:Ni,M:Ii,p:function(e){return r[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:br,s:xr,S:Hi,u:ji,U:Ui,V:Gi,w:Vi,W:qi,x:null,X:null,y:Xi,Y:Ji,Z:Zi,"%":vr},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Qi,e:Qi,f:rr,g:mr,G:gr,H:er,I:tr,j:nr,L:ir,m:sr,M:ar,p:function(e){return r[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:br,s:xr,S:or,u:lr,U:cr,V:hr,w:dr,W:fr,x:null,X:null,y:pr,Y:_r,Z:yr,"%":vr},x={a:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return S(e,t,n,i)},d:wi,e:wi,f:Ei,g:vi,G:yi,H:Li,I:Li,j:Si,L:Ai,m:Mi,M:Ti,p:function(e,t,n){var i=c.exec(t.slice(n));return i?(e.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:xi,Q:Di,s:Oi,S:ki,u:pi,U:mi,V:_i,w:fi,W:gi,x:function(e,t,i){return S(e,n,t,i)},X:function(e,t,n){return S(e,i,t,n)},y:vi,Y:yi,Z:bi,"%":Ci};function M(e,t){return function(n){var i,r,s,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(r=si[i=e.charAt(++o)])?i=e.charAt(++o):r="e"===i?" ":"0",(s=t[i])&&(i=s(n,r)),a.push(i),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function w(e,t){return function(n){var i,r,s=ti(1900,void 0,1);if(S(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=ei(ti(s.y,0,1))).getUTCDay(),i=r>4||0===r?Fn.ceil(i):Fn(i),i=Tn.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=Qn(ti(s.y,0,1))).getDay(),i=r>4||0===r?Cn.ceil(i):Cn(i),i=Ln.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?ei(ti(s.y,0,1)).getUTCDay():Qn(ti(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,ei(s)):Qn(s)}}function S(e,t,n,i){for(var r,s,a=0,o=t.length,l=n.length;a<o;){if(i>=l)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(s=x[r in si?t.charAt(a++):r])||(i=s(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=M(n,v),v.X=M(i,v),v.c=M(t,v),b.x=M(n,b),b.X=M(i,b),b.c=M(t,b),{format:function(e){var t=M(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=M(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ii=ni.format,ni.parse,ri=ni.utcFormat,ni.utcParse;class Pr extends Map{constructor(e,t=zr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(Rr(this,e))}has(e){return super.has(Rr(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}(this,e))}}function Rr({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function zr(e){return null!==e&&"object"==typeof e?e.valueOf():e}Set;const Br=Symbol("implicit");function Yr(){var e=new Pr,t=[],n=[],i=Br;function r(r){let s=e.get(r);if(void 0===s){if(i!==Br)return i;e.set(r,s=t.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Pr;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return r},r.range=function(e){return arguments.length?(n=Array.from(e),r):n.slice()},r.unknown=function(e){return arguments.length?(i=e,r):i},r.copy=function(){return Yr(t,n).unknown(i)},Et.apply(r,arguments),r}function Fr(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Nr(e,t){var n=nt(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}var Ir,Hr=180/Math.PI,jr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ur(e,t,n,i,r,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Hr,skewX:Math.atan(l)*Hr,scaleX:a,scaleY:o}}function Wr(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(s,a){var o=[],l=[];return s=e(s),a=e(a),function(e,i,r,s,a,o){if(e!==r||i!==s){var l=a.push("translate(",null,t,null,n);o.push({i:l-4,x:ft(e,r)},{i:l-2,x:ft(i,s)})}else(r||s)&&a.push("translate("+r+t+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,l),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:ft(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}(s.rotate,a.rotate,o,l),function(e,t,n,s){e!==t?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:ft(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}(s.skewX,a.skewX,o,l),function(e,t,n,i,s,a){if(e!==n||t!==i){var o=s.push(r(s)+"scale(",null,",",null,")");a.push({i:o-4,x:ft(e,n)},{i:o-2,x:ft(t,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,l),s=a=null,function(e){for(var t,n=-1,i=l.length;++n<i;)o[(t=l[n]).i]=t.x(e);return o.join("")}}}var Gr=Wr((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jr:Ur(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Vr=Wr((function(e){return null==e?jr:(Ir||(Ir=document.createElementNS("http://www.w3.org/2000/svg","g")),Ir.setAttribute("transform",e),(e=Ir.transform.baseVal.consolidate())?Ur((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):jr)}),", ",")",")");function qr(e){return((e=Math.exp(e))+1/e)/2}const Xr=function e(t,n,i){function r(e,r){var s,a,o=e[0],l=e[1],c=e[2],u=r[0],h=r[1],d=r[2],f=u-o,p=h-l,m=f*f+p*p;if(m<1e-12)a=Math.log(d/c)/t,s=function(e){return[o+e*f,l+e*p,c*Math.exp(t*e*a)]};else{var _=Math.sqrt(m),g=(d*d-c*c+i*m)/(2*c*n*_),y=(d*d-c*c-i*m)/(2*d*n*_),v=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-v)/t,s=function(e){var i=e*a,r=qr(v),s=c/(n*_)*(r*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*i+v)-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[o+s*f,l+s*p,c*r/qr(t*i+v)]}}return s.duration=1e3*a*t/Math.SQRT2,s}return r.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},r}(Math.SQRT2,2,4);function $r(e){return function(t,n){var i=e((t=(0,Je.KI)(t)).h,(n=(0,Je.KI)(n)).h),r=it(t.s,n.s),s=it(t.l,n.l),a=it(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=s(e),t.opacity=a(e),t+""}}}const Jr=$r(nt);var Kr=$r(it),Zr=n(3503);function Qr(e,t){var n=it((e=(0,Zr.Ay)(e)).l,(t=(0,Zr.Ay)(t)).l),i=it(e.a,t.a),r=it(e.b,t.b),s=it(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=s(t),e+""}}function es(e){return function(t,n){var i=e((t=(0,Zr.aq)(t)).h,(n=(0,Zr.aq)(n)).h),r=it(t.c,n.c),s=it(t.l,n.l),a=it(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=r(e),t.l=s(e),t.opacity=a(e),t+""}}}const ts=es(nt);var ns=es(it),is=n(740);function rs(e){return function t(n){function i(t,i){var r=e((t=(0,is.A)(t)).h,(i=(0,is.A)(i)).h),s=it(t.s,i.s),a=it(t.l,i.l),o=it(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=s(e),t.l=a(Math.pow(e,n)),t.opacity=o(e),t+""}}return n=+n,i.gamma=t,i}(1)}const ss=rs(nt);var as=rs(it);function os(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var ls=n(6865);function cs(e,t,n){const i=e-t+2*n;return e?i>0?i:1:0}const us="linear",hs="log",ds="pow",fs="sqrt",ps="symlog",ms="time",_s="utc",gs="sequential",ys="diverging",vs="quantile",bs="quantize",xs="threshold",Ms="continuous",ws="discrete",Ss="discretizing",Ls="interpolating",Ts="temporal";function ks(){const e=Yr().unknown(void 0),t=e.domain,n=e.range;let i,r,s=[0,1],a=!1,o=0,l=0,c=.5;function u(){const e=t().length,u=s[1]<s[0],h=s[1-u],d=cs(e,o,l);let f=s[u-0];i=(h-f)/(d||1),a&&(i=Math.floor(i)),f+=(h-f-i*(e-o))*c,r=i*(1-o),a&&(f=Math.round(f),r=Math.round(r));const p=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s}(e).map((e=>f+i*e));return n(u?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),u()):t()},e.range=function(e){return arguments.length?(s=[+e[0],+e[1]],u()):s.slice()},e.rangeRound=function(e){return s=[+e[0],+e[1]],a=!0,u()},e.bandwidth=function(){return r},e.step=function(){return i},e.round=function(e){return arguments.length?(a=!!e,u()):a},e.padding=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),o=l,u()):o},e.paddingInner=function(e){return arguments.length?(o=Math.max(0,Math.min(1,e)),u()):o},e.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),u()):l},e.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),u()):c},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const i=s[1]<s[0],a=i?n().reverse():n(),o=a.length-1;let l,c,u,h=+e[0],d=+e[1];return h!=h||d!=d||(d<h&&(u=h,h=d,d=u),d<a[0]||h>s[1-i])?void 0:(l=Math.max(0,He(a,h)-1),c=h===d?l:He(a,d)-1,h-a[l]>r+1e-10&&++l,i&&(u=l,l=o-c,c=o-u),l>c?void 0:t().slice(l,c+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return ks().domain(t()).range(s).round(a).paddingInner(o).paddingOuter(l).align(c)},u()}function As(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return As(t())},e}var Es=Array.prototype.map;const Cs=Array.prototype.slice,Ds=new Map,Os=Symbol("vega_scale");function Ps(e,t,n){return arguments.length>1?(Ds.set(e,function(e,t,n){const i=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?(i=n,function(e){let t,n=e[0],r=e[1];return r<n&&(t=n,n=r,r=t),[i.invert(n),i.invert(r)]}):n.invertExtent?function(e){return function(t){const n=e.range();let i,r,s,a,o=t[0],l=t[1],c=-1;for(l<o&&(r=o,o=l,l=r),s=0,a=n.length;s<a;++s)n[s]>=o&&n[s]<=l&&(c<0&&(c=s),i=s);if(!(c<0))return o=e.invertExtent(n[c]),l=e.invertExtent(n[i]),[void 0===o[0]?o[1]:o[0],void 0===l[1]?l[0]:l[1]]}}(n):void 0),n.type=e,function(e){return e[Os]=!0,e}(n);var i};return i.metadata=(0,r.M1)((0,r.YO)(n)),i}(e,t,n)),this):function(e){return Ds.has(e)}(e)?Ds.get(e):void 0}function Rs(e,t){const n=Ds.get(e);return n&&n.metadata[t]}function zs(e){return Rs(e,ws)}Ps("identity",(function e(t){var n;function i(e){return null==e||isNaN(e=+e)?n:e}return i.invert=i,i.domain=i.range=function(e){return arguments.length?(t=Array.from(e,bt),i):t.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,bt):[0,1],Vt(i)})),Ps(us,(function e(){var t=At();return t.copy=function(){return Tt(t,e())},Et.apply(t,arguments),Vt(t)}),Ms),Ps(hs,(function e(){const t=en(kt()).domain([1,10]);return t.copy=()=>Tt(t,e()).base(t.base()),Et.apply(t,arguments),t}),[Ms,hs]),Ps(ds,an,Ms),Ps(fs,(function(){return an.apply(null,arguments).exponent(.5)}),Ms),Ps(ps,(function e(){var t=cn(kt());return t.copy=function(){return Tt(t,e()).constant(t.constant())},Et.apply(t,arguments)}),Ms),Ps(ms,(function(){return Et.apply(Sr(Kn,Zn,Vn,Wn,En,Ln,wn,xn,bn,ii).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[Ms,Ts]),Ps(_s,(function(){return Et.apply(Sr($n,Jn,qn,Gn,Yn,Tn,Sn,Mn,bn,ri).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[Ms,Ts]),Ps(gs,kr,[Ms,Ls]),Ps(`${gs}-${us}`,kr,[Ms,Ls]),Ps(`${gs}-${hs}`,(function e(){var t=en(Lr()).domain([1,10]);return t.copy=function(){return Tr(t,e()).base(t.base())},Ct.apply(t,arguments)}),[Ms,Ls,hs]),Ps(`${gs}-${ds}`,Ar,[Ms,Ls]),Ps(`${gs}-${fs}`,(function(){return Ar.apply(null,arguments).exponent(.5)}),[Ms,Ls]),Ps(`${gs}-${ps}`,(function e(){var t=cn(Lr());return t.copy=function(){return Tr(t,e()).constant(t.constant())},Ct.apply(t,arguments)}),[Ms,Ls]),Ps(`${ys}-${us}`,(function e(){var t=Vt(Cr()(Mt));return t.copy=function(){return Tr(t,e())},Ct.apply(t,arguments)}),[Ms,Ls]),Ps(`${ys}-${hs}`,(function e(){var t=en(Cr()).domain([.1,1,10]);return t.copy=function(){return Tr(t,e()).base(t.base())},Ct.apply(t,arguments)}),[Ms,Ls,hs]),Ps(`${ys}-${ds}`,Dr,[Ms,Ls]),Ps(`${ys}-${fs}`,(function(){return Dr.apply(null,arguments).exponent(.5)}),[Ms,Ls]),Ps(`${ys}-${ps}`,(function e(){var t=cn(Cr());return t.copy=function(){return Tr(t,e()).constant(t.constant())},Ct.apply(t,arguments)}),[Ms,Ls]),Ps(vs,(function e(){var t,n=[],i=[],r=[];function s(){var e=0,t=Math.max(1,i.length);for(r=new Array(t-1);++e<t;)r[e-1]=Or(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:i[je(r,e)]}return a.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[t>0?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(ze),s()},a.range=function(e){return arguments.length?(i=Array.from(e),s()):i.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return e().domain(n).range(i).unknown(t)},Et.apply(a,arguments)}),[Ss,vs]),Ps(bs,(function e(){var t,n=0,i=1,r=1,s=[.5],a=[0,1];function o(e){return null!=e&&e<=e?a[je(s,e,0,r)]:t}function l(){var e=-1;for(s=new Array(r);++e<r;)s[e]=((e+1)*i-(e-r)*n)/(r+1);return o}return o.domain=function(e){return arguments.length?([n,i]=e,n=+n,i=+i,l()):[n,i]},o.range=function(e){return arguments.length?(r=(a=Array.from(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,s[0]]:t>=r?[s[r-1],i]:[s[t-1],s[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return e().domain([n,i]).range(a).unknown(t)},Et.apply(Vt(o),arguments)}),Ss),Ps(xs,(function e(){var t,n=[.5],i=[0,1],r=1;function s(e){return null!=e&&e<=e?i[je(n,e,0,r)]:t}return s.domain=function(e){return arguments.length?(n=Array.from(e),r=Math.min(n.length,i.length-1),s):n.slice()},s.range=function(e){return arguments.length?(i=Array.from(e),r=Math.min(n.length,i.length-1),s):i.slice()},s.invertExtent=function(e){var t=i.indexOf(e);return[n[t-1],n[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(n).range(i).unknown(t)},Et.apply(s,arguments)}),Ss),Ps("bin-ordinal",(function e(){let t=[],n=[];function i(e){return null==e||e!=e?void 0:n[(je(t,e)-1)%n.length]}return i.domain=function(e){return arguments.length?(t=function(e){return Es.call(e,r.Ro)}(e),i):t.slice()},i.range=function(e){return arguments.length?(n=Cs.call(e),i):n.slice()},i.tickFormat=function(e,n){return Gt(t[0],(0,r.se)(t),null==e?10:e,n)},i.copy=function(){return e().domain(i.domain()).range(i.range())},i}),[ws,Ss]),Ps("ordinal",Yr,ws),Ps("band",ks,ws),Ps("point",(function(){return As(ks().paddingInner(1))}),ws);const Bs=["clamp","base","constant","exponent"];function Ys(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}function Fs(e,t){for(const n in e)Is(n,t(e[n]))}const Ns={};function Is(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Ns[e]=t,this):Ns[e]}Fs({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Ys),Fs({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>function(e,t,n){return Er(function(e,t){const n=i[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}(Ys(e))));const Hs="symbol",js="discrete",Us=e=>(0,r.cy)(e)?e.map((e=>String(e))):String(e),Ws=(e,t)=>e[1]-t[1],Gs=(e,t)=>t[1]-e[1];function Vs(e,t){return e.bins?function(e,t){let n=e.range(),i=n[0],s=(0,r.se)(n),a=Ws;return i>s&&(n=s,s=i,i=n,a=Gs),i=Math.floor(i),s=Math.ceil(s),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=s)).sort(a).map((e=>e[0]))}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function qs(e,t,n){const i=Vs(e,t),r=e.base(),s=Math.log(r),a=Math.max(1,r*t/i.length),o=e=>{let t=e/Math.pow(r,Math.round(Math.log(e)/s));return t*r<r-.5&&(t*=r),t<=a};return n?i.filter(o):o}const Xs={[vs]:"quantiles",[bs]:"thresholds",[xs]:"domain"},$s={[vs]:"quantiles",[bs]:"domain"};const Js=e=>Xs[e.type]||e.bins;function Ks(e,t,n,i,r,s,a){const o=$s[t.type]&&s!==ms&&s!==_s?function(e,t,n){const i=t[$s[t.type]](),r=i.length;let s,a=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}(e,t,r):function(e,t,n,i,r,s){const a=t.type;let o=Us;if(a===ms||r===ms)o=e.timeFormat(i);else if(a===_s||r===_s)o=e.utcFormat(i);else if(Rs(a,hs)){const r=e.formatFloat(i);if(s||t.bins)o=r;else{const e=qs(t,n,!1);o=t=>e(t)?r(t):""}}else if(t.tickFormat){const r=t.domain();o=e.formatSpan(r[0],r[r.length-1],n,i)}else i&&(o=e.format(i));return o}(e,t,n,r,s,a);return i===Hs&&Js(t)?Zs(o):i===js?ea(o):ta(o)}const Zs=e=>(t,n,i)=>{const r=Qs(i[n+1],Qs(i.max,1/0)),s=na(t,e),a=na(r,e);return s&&a?s+"  "+a:a?"< "+a:" "+s},Qs=(e,t)=>null!=e?e:t,ea=e=>(t,n)=>n?e(t):null,ta=e=>t=>e(t),na=(e,t)=>Number.isFinite(e)?t(e):null;function ia(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),s=function(e,t,n,i){const s=i||t.type;return(0,r.Kg)(n)&&Rs(s,Ts)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||s!==ms?n||s!==_s?Ks(e,t,5,null,n,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,t,n.format,n.formatType);if(Rs(t.type,Ss)){const e=function(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=(0,r.se)(e),t}(e.bins):e.type===hs?qs(e,t,!0):Xs[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[Xs[e.type]]()):Vs(e,t)}(t).slice(1).map(s),n=e.length;return`${n} boundar${1===n?"y":"ies"}: ${e.join(", ")}`}if(zs(t.type)){const e=t.domain(),n=e.length;return`${n} value${1===n?"":"s"}: ${n>i?e.slice(0,i-2).map(s).join(", ")+", ending with "+e.slice(-1).map(s):e.map(s).join(", ")}`}{const e=t.domain();return`values from ${s(e[0])} to ${s((0,r.se)(e))}`}}class ra{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=t[i],s=e+r,a=Math.abs(e)<Math.abs(r)?e-(s-r):r-(s-e);a&&(t[n++]=a),e=s}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,i,r=this._n,s=0;if(r>0){for(s=e[--r];r>0&&(t=s,n=e[--r],s=t+n,i=n-(s-t),!i););r>0&&(i<0&&e[r-1]<0||i>0&&e[r-1]>0)&&(n=2*i,t=s+n,n==t-s&&(s=t))}return s}}var sa=1e-6,aa=Math.PI,oa=aa/2,la=aa/4,ca=2*aa,ua=180/aa,ha=aa/180,da=Math.abs,fa=(Math.atan,Math.atan2),pa=Math.cos,ma=(Math.ceil,Math.exp,Math.floor,Math.hypot),_a=(Math.log,Math.pow,Math.sin),ga=(Math.sign,Math.sqrt);function ya(e){return e>1?oa:e<-1?-oa:Math.asin(e)}function va(){}function ba(e,t){e&&Ma.hasOwnProperty(e.type)&&Ma[e.type](e,t)}Math.tan;var xa={Feature:function(e,t){ba(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)ba(n[i].geometry,t)}},Ma={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){wa(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)wa(n[i],t,0)},Polygon:function(e,t){Sa(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Sa(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)ba(n[i],t)}};function wa(e,t,n){var i,r=-1,s=e.length-n;for(t.lineStart();++r<s;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sa(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)wa(e[n],t,1);t.polygonEnd()}function La(e,t){e&&xa.hasOwnProperty(e.type)?xa[e.type](e,t):ba(e,t)}var Ta,ka,Aa,Ea,Ca,Da,Oa,Pa,Ra,za,Ba,Ya,Fa,Na,Ia,Ha,ja=new ra,Ua=new ra,Wa={point:va,lineStart:va,lineEnd:va,polygonStart:function(){ja=new ra,Wa.lineStart=Ga,Wa.lineEnd=Va},polygonEnd:function(){var e=+ja;Ua.add(e<0?ca+e:e),this.lineStart=this.lineEnd=this.point=va},sphere:function(){Ua.add(ca)}};function Ga(){Wa.point=qa}function Va(){Xa(Ta,ka)}function qa(e,t){Wa.point=Xa,Ta=e,ka=t,Aa=e*=ha,Ea=pa(t=(t*=ha)/2+la),Ca=_a(t)}function Xa(e,t){var n=(e*=ha)-Aa,i=n>=0?1:-1,r=i*n,s=pa(t=(t*=ha)/2+la),a=_a(t),o=Ca*a,l=Ea*s+o*pa(r),c=o*i*_a(r);ja.add(fa(c,l)),Aa=e,Ea=s,Ca=a}function $a(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}var Ja,Ka,Za,Qa,eo,to,no,io,ro,so,ao,oo,lo,co,uo,ho,fo={point:po,lineStart:_o,lineEnd:go,polygonStart:function(){fo.point=yo,fo.lineStart=vo,fo.lineEnd=bo,Na=new ra,Wa.polygonStart()},polygonEnd:function(){Wa.polygonEnd(),fo.point=po,fo.lineStart=_o,fo.lineEnd=go,ja<0?(Da=-(Pa=180),Oa=-(Ra=90)):Na>sa?Ra=90:Na<-sa&&(Oa=-90),Ha[0]=Da,Ha[1]=Pa},sphere:function(){Da=-(Pa=180),Oa=-(Ra=90)}};function po(e,t){Ia.push(Ha=[Da=e,Pa=e]),t<Oa&&(Oa=t),t>Ra&&(Ra=t)}function mo(e,t){var n,i,r,s=function(e){var t=e[0],n=e[1],i=pa(n);return[i*pa(t),i*_a(t),_a(n)]}([e*ha,t*ha]);if(Fa){var a=$a(Fa,s),o=$a([a[1],-a[0],0],a);i=ga((n=o)[0]*n[0]+n[1]*n[1]+n[2]*n[2]),n[0]/=i,n[1]/=i,n[2]/=i,o=[fa((r=o)[1],r[0]),ya(r[2])];var l,c=e-za,u=c>0?1:-1,h=o[0]*ua*u,d=da(c)>180;d^(u*za<h&&h<u*e)?(l=o[1]*ua)>Ra&&(Ra=l):d^(u*za<(h=(h+360)%360-180)&&h<u*e)?(l=-o[1]*ua)<Oa&&(Oa=l):(t<Oa&&(Oa=t),t>Ra&&(Ra=t)),d?e<za?xo(Da,e)>xo(Da,Pa)&&(Pa=e):xo(e,Pa)>xo(Da,Pa)&&(Da=e):Pa>=Da?(e<Da&&(Da=e),e>Pa&&(Pa=e)):e>za?xo(Da,e)>xo(Da,Pa)&&(Pa=e):xo(e,Pa)>xo(Da,Pa)&&(Da=e)}else Ia.push(Ha=[Da=e,Pa=e]);t<Oa&&(Oa=t),t>Ra&&(Ra=t),Fa=s,za=e}function _o(){fo.point=mo}function go(){Ha[0]=Da,Ha[1]=Pa,fo.point=po,Fa=null}function yo(e,t){if(Fa){var n=e-za;Na.add(da(n)>180?n+(n>0?360:-360):n)}else Ba=e,Ya=t;Wa.point(e,t),mo(e,t)}function vo(){Wa.lineStart()}function bo(){yo(Ba,Ya),Wa.lineEnd(),da(Na)>sa&&(Da=-(Pa=180)),Ha[0]=Da,Ha[1]=Pa,Fa=null}function xo(e,t){return(t-=e)<0?t+360:t}function Mo(e,t){return e[0]-t[0]}function wo(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var So={sphere:va,point:Lo,lineStart:ko,lineEnd:Co,polygonStart:function(){So.lineStart=Do,So.lineEnd=Oo},polygonEnd:function(){So.lineStart=ko,So.lineEnd=Co}};function Lo(e,t){e*=ha;var n=pa(t*=ha);To(n*pa(e),n*_a(e),_a(t))}function To(e,t,n){++Ja,Za+=(e-Za)/Ja,Qa+=(t-Qa)/Ja,eo+=(n-eo)/Ja}function ko(){So.point=Ao}function Ao(e,t){e*=ha;var n=pa(t*=ha);co=n*pa(e),uo=n*_a(e),ho=_a(t),So.point=Eo,To(co,uo,ho)}function Eo(e,t){e*=ha;var n=pa(t*=ha),i=n*pa(e),r=n*_a(e),s=_a(t),a=fa(ga((a=uo*s-ho*r)*a+(a=ho*i-co*s)*a+(a=co*r-uo*i)*a),co*i+uo*r+ho*s);Ka+=a,to+=a*(co+(co=i)),no+=a*(uo+(uo=r)),io+=a*(ho+(ho=s)),To(co,uo,ho)}function Co(){So.point=Lo}function Do(){So.point=Po}function Oo(){Ro(oo,lo),So.point=Lo}function Po(e,t){oo=e,lo=t,e*=ha,t*=ha,So.point=Ro;var n=pa(t);co=n*pa(e),uo=n*_a(e),ho=_a(t),To(co,uo,ho)}function Ro(e,t){e*=ha;var n=pa(t*=ha),i=n*pa(e),r=n*_a(e),s=_a(t),a=uo*s-ho*r,o=ho*i-co*s,l=co*r-uo*i,c=ma(a,o,l),u=ya(c),h=c&&-u/c;ro.add(h*a),so.add(h*o),ao.add(h*l),Ka+=u,to+=u*(co+(co=i)),no+=u*(uo+(uo=r)),io+=u*(ho+(ho=s)),To(co,uo,ho)}var zo={},Bo={},Yo=34,Fo=10,No=13;function Io(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Ho(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var i in e)i in t||n.push(t[i]=i)})),n}function jo(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Uo(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,r=[],s=e.length,a=0,o=0,l=s<=0,c=!1;function u(){if(l)return Bo;if(c)return c=!1,zo;var t,i,r=a;if(e.charCodeAt(r)===Yo){for(;a++<s&&e.charCodeAt(a)!==Yo||e.charCodeAt(++a)===Yo;);return(t=a)>=s?l=!0:(i=e.charCodeAt(a++))===Fo?c=!0:i===No&&(c=!0,e.charCodeAt(a)===Fo&&++a),e.slice(r+1,t-1).replace(/""/g,'"')}for(;a<s;){if((i=e.charCodeAt(t=a++))===Fo)c=!0;else if(i===No)c=!0,e.charCodeAt(a)===Fo&&++a;else if(i!==n)continue;return e.slice(r,t)}return l=!0,e.slice(r,s)}for(e.charCodeAt(s-1)===Fo&&--s,e.charCodeAt(s-1)===No&&--s;(i=u())!==Bo;){for(var h=[];i!==zo&&i!==Bo;)h.push(i),i=u();t&&null==(h=t(h,o++))||r.push(h)}return r}function r(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function s(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?function(e){var t,n=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+jo(-t,6):t>9999?"+"+jo(t,6):jo(t,4))+"-"+jo(e.getUTCMonth()+1,2)+"-"+jo(e.getUTCDate(),2)+(s?"T"+jo(n,2)+":"+jo(i,2)+":"+jo(r,2)+"."+jo(s,3)+"Z":r?"T"+jo(n,2)+":"+jo(i,2)+":"+jo(r,2)+"Z":i||n?"T"+jo(n,2)+":"+jo(i,2)+"Z":"")}(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,s=i(e,(function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=Io(e);return function(i,r){return t(n(i),r,e)}}(e,t):Io(e)}));return s.columns=r||[],s},parseRows:i,format:function(t,n){return null==n&&(n=Ho(t)),[n.map(a).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Ho(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(s).join("\n")},formatRow:s,formatValue:a}}n(6879);const Wo=/^(data:|([A-Za-z]+:)?\/\/)/,Go=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Vo=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,qo="file://";async function Xo(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function $o(e,t){t=(0,r.X$)({},this.options,t);const n=this.fileAccess,i={href:null};let s,a,o;const l=Go.test(e.replace(Vo,""));null!=e&&"string"==typeof e&&l||(0,r.z3)("Sanitize failure, invalid URI: "+(0,r.r$)(e));const c=Wo.test(e);return(o=t.baseURL)&&!c&&(e.startsWith("/")||o.endsWith("/")||(e="/"+e),e=o+e),a=(s=e.startsWith(qo))||"file"===t.mode||"http"!==t.mode&&!c&&n,s?e=e.slice(7):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function Jo(e){return e?t=>new Promise(((n,i)=>{e.readFile(t,((e,t)=>{e?i(e):n(t)}))})):Ko}async function Ko(){(0,r.z3)("No file system access.")}function Zo(e){return e?async function(t,n){const i=(0,r.X$)({},this.options.http,n),s=n&&n.response,a=await e(t,i);return a.ok?(0,r.Tn)(a[s])?a[s]():a.text():(0,r.z3)(a.status+""+a.statusText)}:Qo}async function Qo(){(0,r.z3)("No HTTP fetch method available.")}function el(e){const t=function(t,n){const i={delimiter:e};return tl(t,n?(0,r.X$)(n,i):i)};return t.responseType="text",t}function tl(e,t){return t.header&&(e=t.header.map(r.r$).join(t.delimiter)+"\n"+e),Uo(t.delimiter).parse(e+"")}function nl(e,t){const n=t&&t.property?(0,r.ZZ)(t.property):r.D_;return!(0,r.Gv)(e)||(i=e,"function"==typeof Buffer&&(0,r.Tn)(Buffer.isBuffer)&&Buffer.isBuffer(i))?n(JSON.parse(e)):function(e,t){return!(0,r.cy)(e)&&(0,r.xZ)(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var i}r.G4,r.Ro,r.Ro,r.ay,r.dI,r.D_,tl.responseType="text",nl.responseType="json";el(","),el("\t");const il=function(e){return t=>({options:t||{},sanitize:$o,load:Xo,fileAccess:!1,file:Jo(null),http:Zo(e)})}("undefined"!=typeof fetch&&fetch);function rl(e){const t=e||r.D_,n=[],i={};return n.add=e=>{const r=t(e);return i[r]||(i[r]=1,n.push(e)),n},n.remove=e=>{const r=t(e);if(i[r]){i[r]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}const sl=Symbol("vega_id");function al(e){return!(!e||!ol(e))}function ol(e){return e[sl]}const ll="_:mod:_";function cl(){Object.defineProperty(this,ll,{writable:!0,value:{}})}cl.prototype={set(e,t,n,i){const s=this,a=s[e],o=s[ll];return null!=t&&t>=0?(a[t]!==n||i)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||i)&&(s[e]=n,o[e]=(0,r.cy)(n)?1+n.length:-1),s},modified(e,t){const n=this[ll];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if((0,r.cy)(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[ll]={},this}};let ul=0;const hl=new cl;function dl(e,t,n,i){this.id=++ul,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function fl(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}dl.prototype={targets(){return this._targets||(this._targets=rl(r.id))},set(e){return this.value!==e?(this.value=e,1):0},skip:fl(1),modified:fl(2),parameters(e,t,n){t=!1!==t;const i=this._argval=this._argval||new cl,s=this._argops=this._argops||[],a=[];let o,l,c,u;const h=(e,n,r)=>{r instanceof dl?(r!==this&&(t&&r.targets().add(this),a.push(r)),s.push({op:r,name:e,index:n})):i.set(e,n,r)};for(o in e)if(l=e[o],"pulse"===o)(0,r.YO)(l).forEach((e=>{e instanceof dl?e!==this&&(e.targets().add(this),a.push(e)):(0,r.z3)("Pulse parameters must be operator instances.")})),this.source=l;else if((0,r.cy)(l))for(i.set(o,-1,Array(c=l.length)),u=0;u<c;++u)h(o,u,l[u]);else h(o,-1,l);return this.marshall().clear(),n&&(s.initonly=!0),a},marshall(e){const t=this._argval||hl,n=this._argops;let i,r,s,a;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],s=i.op,a=s.modified()&&s.stamp===e,t.set(i.name,i.index,s.value,a);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let pl=0;function ml(e,t,n){this.id=++pl,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function _l(e,t,n){return new ml(e,t,n)}ml.prototype={_filter:r.vN,_apply:r.D_,targets(){return this._targets||(this._targets=rl(r.id))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let e=0;e<i;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=_l(e);return this.targets().add(t),t},apply(e){const t=_l(null,e);return this.targets().add(t),t},merge(){const e=_l();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce(e){const t=_l();return this.targets().add(_l(null,null,(0,r.sg)(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between(e,t){let n=!1;return e.targets().add(_l(null,null,(()=>n=!0))),t.targets().add(_l(null,null,(()=>n=!1))),this.filter((()=>n))},detach(){this._filter=r.vN,this._targets=null}};function gl(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function yl(e,t){const n=[];return(0,r.rt)(e,t,(e=>n.push(e))),n}function vl(e,t){const n={};return e.visit(t,(e=>{n[ol(e)]=1})),e=>n[ol(e)]?null:e}function bl(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}function xl(e){return function(){return this._log[e].apply(this,arguments)}}function Ml(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function wl(e){this._context=e}function Sl(){}function Ll(e){this._context=e}function Tl(e){this._context=e}function kl(e,t){this._basis=new wl(e),this._beta=t}gl.prototype={StopPropagation:{},ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new gl(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new gl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,vl(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return(0,r.cy)(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?(0,r.cy)(e)?e.some((e=>n[e])):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=bl(n.addF,t)),2&e&&(n.remF=bl(n.remF,t)),4&e&&(n.modF=bl(n.modF,t)),16&e&&(n.srcF=bl(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=yl(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=yl(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=yl(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(16&e)return(0,r.rt)(n.source,n.srcF,i),n;1&e&&(0,r.rt)(n.add,n.addF,i),2&e&&(0,r.rt)(n.rem,n.remF,i),4&e&&(0,r.rt)(n.mod,n.modF,i);const s=n.source;if(8&e&&s){const e=n.add.length+n.mod.length;e===s.length||(e?(0,r.rt)(s,vl(n,5),i):(0,r.rt)(s,n.srcF,i))}return n}},(0,r.B)((function(e,t,n,i){const r=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const e of n)if(e.stamp===t){if(e.fields){const t=r.fields||(r.fields={});for(const n in e.fields)t[n]=1}e.changed(r.ADD)&&(s|=r.ADD),e.changed(r.REM)&&(s|=r.REM),e.changed(r.MOD)&&(s|=r.MOD)}this.changes=s}),gl,{fork(e){const t=new gl(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?(0,r.cy)(e)?e.some((e=>n[e])):n[e]:0},filter(){(0,r.z3)("MultiPulse does not support filtering.")},materialize(){(0,r.z3)("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let s=0;if(e&n.SOURCE)for(;s<r;++s)i[s].visit(e,t);else for(;s<r;++s)i[s].stamp===n.stamp&&i[s].visit(e,t);return n}}),xl("error"),xl("warn"),xl("info"),xl("debug"),xl("level"),(0,r.B)((function(e,t){dl.call(this,e,null,t)}),dl,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}}),wl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ml(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ml(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ll.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ml(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ml(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},kl.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i,r=e[0],s=t[0],a=e[n]-r,o=t[n]-s,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(r+i*a),this._beta*t[l]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Al=function e(t){function n(e){return 1===t?new wl(e):new kl(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function El(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Cl(e,t){this._context=e,this._k=(1-t)/6}Cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:El(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:El(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dl=function e(t){function n(e){return new Cl(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Ol(e,t){this._context=e,this._k=(1-t)/6}Ol.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:El(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pl=function e(t){function n(e){return new Ol(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Rl(e,t){this._context=e,this._k=(1-t)/6}Rl.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:El(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zl=function e(t){function n(e){return new Rl(e,t)}return n.tension=function(t){return e(+t)},n}(0),Bl=Math.abs,Yl=Math.atan2,Fl=Math.cos,Nl=Math.max,Il=Math.min,Hl=Math.sin,jl=Math.sqrt,Ul=1e-12,Wl=Math.PI,Gl=Wl/2,Vl=2*Wl;function ql(e){return e>=1?Gl:e<=-1?-Gl:Math.asin(e)}function Xl(e,t,n){var i=e._x1,r=e._y1,s=e._x2,a=e._y2;if(e._l01_a>Ul){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ul){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,s,a,e._x2,e._y2)}function $l(e,t){this._context=e,this._alpha=t}$l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Xl(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jl=function e(t){function n(e){return t?new $l(e,t):new Cl(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Kl(e,t){this._context=e,this._alpha=t}Kl.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xl(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zl=function e(t){function n(e){return t?new Kl(e,t):new Rl(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ql(e,t){this._context=e,this._alpha=t}Ql.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xl(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ec=function e(t){function n(e){return t?new Ql(e,t):new Ol(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function tc(e){this._context=e}function nc(e){return new tc(e)}function ic(e){this._context=e}function rc(e){return e<0?-1:1}function sc(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(rc(s)+rc(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function ac(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function oc(e,t,n){var i=e._x0,r=e._y0,s=e._x1,a=e._y1,o=(s-i)/3;e._context.bezierCurveTo(i+o,r+o*t,s-o,a-o*n,s,a)}function lc(e){this._context=e}function cc(e){this._context=new uc(e)}function uc(e){this._context=e}function hc(e){this._context=e}function dc(e){var t,n,i=e.length-1,r=new Array(i),s=new Array(i),a=new Array(i);for(r[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<i-1;++t)r[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,s[i-1]=7,a[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=r[t]/s[t-1],s[t]-=n,a[t]-=n*a[t-1];for(r[i-1]=a[i-1]/s[i-1],t=i-2;t>=0;--t)r[t]=(a[t]-r[t+1])/s[t];for(s[i-1]=(e[i]+r[i-1])/2,t=0;t<i-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function fc(e,t){this._context=e,this._t=t}function pc(e){return function(){return e}}tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},ic.prototype={areaStart:Sl,areaEnd:Sl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oc(this,this._t0,ac(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oc(this,ac(this,n=sc(this,e,t)),n);break;default:oc(this,this._t0,n=sc(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(cc.prototype=Object.create(lc.prototype)).point=function(e,t){lc.prototype.point.call(this,t,e)},uc.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}},hc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=dc(e),r=dc(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const mc=Math.PI,_c=2*mc,gc=1e-6,yc=_c-gc;function vc(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class bc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?vc:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vc;const n=10**t;return function(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,r,s){this._append`C${+e},${+t},${+n},${+i},${this._x1=+r},${this._y1=+s}`}arcTo(e,t,n,i,r){if(e=+e,t=+t,n=+n,i=+i,(r=+r)<0)throw new Error(`negative radius: ${r}`);let s=this._x1,a=this._y1,o=n-e,l=i-t,c=s-e,u=a-t,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>gc)if(Math.abs(u*o-l*c)>gc&&r){let d=n-s,f=i-a,p=o*o+l*l,m=d*d+f*f,_=Math.sqrt(p),g=Math.sqrt(h),y=r*Math.tan((mc-Math.acos((p+h-m)/(2*_*g)))/2),v=y/g,b=y/_;Math.abs(v-1)>gc&&this._append`L${e+v*c},${t+v*u}`,this._append`A${r},${r},0,0,${+(u*d>c*f)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,n,i,r,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),o=n*Math.sin(i),l=e+a,c=t+o,u=1^s,h=s?i-r:r-i;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>gc||Math.abs(this._y1-c)>gc)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%_c+_c),h>yc?this._append`A${n},${n},0,1,${u},${e-a},${t-o}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>gc&&this._append`A${n},${n},0,${+(h>=mc)},${u},${this._x1=e+n*Math.cos(r)},${this._y1=t+n*Math.sin(r)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function xc(){return new bc}function Mc(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new bc(t)}function wc(e){return e.innerRadius}function Sc(e){return e.outerRadius}function Lc(e){return e.startAngle}function Tc(e){return e.endAngle}function kc(e){return e&&e.padAngle}function Ac(e,t,n,i,r,s,a){var o=e-n,l=t-i,c=(a?s:-s)/jl(o*o+l*l),u=c*l,h=-c*o,d=e+u,f=t+h,p=n+u,m=i+h,_=(d+p)/2,g=(f+m)/2,y=p-d,v=m-f,b=y*y+v*v,x=r-s,M=d*m-p*f,w=(v<0?-1:1)*jl(Nl(0,x*x*b-M*M)),S=(M*v-y*w)/b,L=(-M*y-v*w)/b,T=(M*v+y*w)/b,k=(-M*y+v*w)/b,A=S-_,E=L-g,C=T-_,D=k-g;return A*A+E*E>C*C+D*D&&(S=T,L=k),{cx:S,cy:L,x01:-u,y01:-h,x11:S*(r/x-1),y11:L*(r/x-1)}}function Ec(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Cc(e){return e[0]}function Dc(e){return e[1]}function Oc(e,t){var n=pc(!0),i=null,r=nc,s=null,a=Mc(o);function o(o){var l,c,u,h=(o=Ec(o)).length,d=!1;for(null==i&&(s=r(u=a())),l=0;l<=h;++l)!(l<h&&n(c=o[l],l,o))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(c,l,o),+t(c,l,o));if(u)return s=null,u+""||null}return e="function"==typeof e?e:void 0===e?Cc:pc(e),t="function"==typeof t?t:void 0===t?Dc:pc(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:pc(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:pc(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:pc(!!e),o):n},o.curve=function(e){return arguments.length?(r=e,null!=i&&(s=r(i)),o):r},o.context=function(e){return arguments.length?(null==e?i=s=null:s=r(i=e),o):i},o}function Pc(e,t,n){var i=null,r=pc(!0),s=null,a=nc,o=null,l=Mc(c);function c(c){var u,h,d,f,p,m=(c=Ec(c)).length,_=!1,g=new Array(m),y=new Array(m);for(null==s&&(o=a(p=l())),u=0;u<=m;++u){if(!(u<m&&r(f=c[u],u,c))===_)if(_=!_)h=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=u-1;d>=h;--d)o.point(g[d],y[d]);o.lineEnd(),o.areaEnd()}_&&(g[u]=+e(f,u,c),y[u]=+t(f,u,c),o.point(i?+i(f,u,c):g[u],n?+n(f,u,c):y[u]))}if(p)return o=null,p+""||null}function u(){return Oc().defined(r).curve(a).context(s)}return e="function"==typeof e?e:void 0===e?Cc:pc(+e),t="function"==typeof t?t:pc(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Dc:pc(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:pc(+t),i=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:pc(+t),c):e},c.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:pc(+e),c):i},c.y=function(e){return arguments.length?(t="function"==typeof e?e:pc(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:pc(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:pc(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(i).y(t)},c.defined=function(e){return arguments.length?(r="function"==typeof e?e:pc(!!e),c):r},c.curve=function(e){return arguments.length?(a=e,null!=s&&(o=a(s)),c):a},c.context=function(e){return arguments.length?(null==e?s=o=null:o=a(s=e),c):s},c}xc.prototype=bc.prototype,Array.prototype.slice,jl(3);const Rc={draw(e,t){const n=jl(t/Wl);e.moveTo(n,0),e.arc(0,0,n,0,Vl)}};jl(1/3),Hl(Wl/10),Hl(7*Wl/10);function zc(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}Hl(Vl/10),Fl(Vl/10),jl(3),jl(3),jl(3),jl(12);const Bc=()=>"undefined"!=typeof Image?Image:null;let Yc=0;const Fc="p_";function Nc(e){return e&&e.gradient}function Ic(e,t,n){const i=e.gradient;let r=e.id,s="radial"===i?Fc:"";return r||(r=e.id="gradient_"+Yc++,"radial"===i?(e.x1=Hc(e.x1,.5),e.y1=Hc(e.y1,.5),e.r1=Hc(e.r1,0),e.x2=Hc(e.x2,.5),e.y2=Hc(e.y2,.5),e.r2=Hc(e.r2,.5),s=Fc):(e.x1=Hc(e.x1,0),e.y1=Hc(e.y1,0),e.x2=Hc(e.x2,1),e.y2=Hc(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+s+r+")"}function Hc(e,t){return null!=e?e:t}const jc={basis:{curve:function(e){return new wl(e)}},"basis-closed":{curve:function(e){return new Ll(e)}},"basis-open":{curve:function(e){return new Tl(e)}},bundle:{curve:Al,tension:"beta",value:.85},cardinal:{curve:Dl,tension:"tension",value:0},"cardinal-open":{curve:Pl,tension:"tension",value:0},"cardinal-closed":{curve:zl,tension:"tension",value:0},"catmull-rom":{curve:Jl,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Zl,tension:"alpha",value:.5},"catmull-rom-open":{curve:ec,tension:"alpha",value:.5},linear:{curve:nc},"linear-closed":{curve:function(e){return new ic(e)}},monotone:{horizontal:function(e){return new cc(e)},vertical:function(e){return new lc(e)}},natural:{curve:function(e){return new hc(e)}},step:{curve:function(e){return new fc(e,.5)}},"step-after":{curve:function(e){return new fc(e,1)}},"step-before":{curve:function(e){return new fc(e,0)}}};function Uc(e,t,n){var i=(0,r.mQ)(jc,e)&&jc[e],s=null;return i&&(s=i.curve||i[t||"vertical"],i.tension&&null!=n&&(s=s[i.tension](n))),s}const Wc={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Gc=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Vc=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,qc=/^((\s+,?\s*)|(,\s*))/,Xc=/^[01]/;function $c(e){const t=[];return(e.match(Gc)||[]).forEach((e=>{let n=e[0];const i=n.toLowerCase(),r=Wc[i],s=function(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let s=0;s<t;++s){const t="a"!==e||3!==s&&4!==s?Vc:Xc,a=n.slice(r).match(t);if(null===a)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const o=n.slice(r).match(qc);null!==o&&(r+=o[0].length)}return i}(i,r,e.slice(1).trim()),a=s.length;if(a<r||a&&a%r!=0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([n,...s.slice(0,r)]),a!==r){"m"===i&&(n="M"===n?"L":"l");for(let e=r;e<a;e+=r)t.push([n,...s.slice(e,e+r)])}})),t}const Jc=Math.PI/180,Kc=Math.PI/2,Zc=2*Math.PI,Qc=Math.sqrt(3)/2;var eu={},tu={},nu=[].join;function iu(e){const t=nu.call(e);if(tu[t])return tu[t];var n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7];const u=c*a,h=-l*o,d=l*a,f=c*o,p=Math.cos(r),m=Math.sin(r),_=Math.cos(s),g=Math.sin(s),y=.5*(s-r),v=Math.sin(.5*y),b=8/3*v*v/Math.sin(y),x=n+p-b*m,M=i+m+b*p,w=n+_,S=i+g,L=w+b*g,T=S-b*_;return tu[t]=[u*x+h*M,d*x+f*M,u*L+h*T,d*L+f*T,u*w+h*S,d*w+f*S]}const ru=["l",0,0,0,0,0,0,0];function su(e,t,n){const i=ru[0]=e[0];if("a"===i||"A"===i)ru[1]=t*e[1],ru[2]=n*e[2],ru[3]=e[3],ru[4]=e[4],ru[5]=e[5],ru[6]=t*e[6],ru[7]=n*e[7];else if("h"===i||"H"===i)ru[1]=t*e[1];else if("v"===i||"V"===i)ru[1]=n*e[1];else for(var r=1,s=e.length;r<s;++r)ru[r]=(r%2==1?t:n)*e[r];return ru}function au(e,t,n,i,r,s){var a,o,l,c,u,h=null,d=0,f=0,p=0,m=0,_=0,g=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==s&&(s=r),e.beginPath&&e.beginPath();for(var y=0,v=t.length;y<v;++y){switch(a=t[y],1===r&&1===s||(a=su(a,r,s)),a[0]){case"l":d+=a[1],f+=a[2],e.lineTo(d+n,f+i);break;case"L":d=a[1],f=a[2],e.lineTo(d+n,f+i);break;case"h":d+=a[1],e.lineTo(d+n,f+i);break;case"H":d=a[1],e.lineTo(d+n,f+i);break;case"v":f+=a[1],e.lineTo(d+n,f+i);break;case"V":f=a[1],e.lineTo(d+n,f+i);break;case"m":_=d+=a[1],g=f+=a[2],e.moveTo(d+n,f+i);break;case"M":_=d=a[1],g=f=a[2],e.moveTo(d+n,f+i);break;case"c":o=d+a[5],l=f+a[6],p=d+a[3],m=f+a[4],e.bezierCurveTo(d+a[1]+n,f+a[2]+i,p+n,m+i,o+n,l+i),d=o,f=l;break;case"C":d=a[5],f=a[6],p=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,p+n,m+i,d+n,f+i);break;case"s":o=d+a[3],l=f+a[4],p=2*d-p,m=2*f-m,e.bezierCurveTo(p+n,m+i,d+a[1]+n,f+a[2]+i,o+n,l+i),p=d+a[1],m=f+a[2],d=o,f=l;break;case"S":o=a[3],l=a[4],p=2*d-p,m=2*f-m,e.bezierCurveTo(p+n,m+i,a[1]+n,a[2]+i,o+n,l+i),d=o,f=l,p=a[1],m=a[2];break;case"q":o=d+a[3],l=f+a[4],p=d+a[1],m=f+a[2],e.quadraticCurveTo(p+n,m+i,o+n,l+i),d=o,f=l;break;case"Q":o=a[3],l=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,o+n,l+i),d=o,f=l,p=a[1],m=a[2];break;case"t":o=d+a[1],l=f+a[2],null===h[0].match(/[QqTt]/)?(p=d,m=f):"t"===h[0]?(p=2*d-c,m=2*f-u):"q"===h[0]&&(p=2*d-p,m=2*f-m),c=p,u=m,e.quadraticCurveTo(p+n,m+i,o+n,l+i),f=l,p=(d=o)+a[1],m=f+a[2];break;case"T":o=a[1],l=a[2],p=2*d-p,m=2*f-m,e.quadraticCurveTo(p+n,m+i,o+n,l+i),d=o,f=l;break;case"a":ou(e,d+n,f+i,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+f+i]),d+=a[6],f+=a[7];break;case"A":ou(e,d+n,f+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),d=a[6],f=a[7];break;case"z":case"Z":d=_,f=g,e.closePath()}h=a}}function ou(e,t,n,i){const r=function(e,t,n,i,r,s,a,o,l){const c=nu.call(arguments);if(eu[c])return eu[c];const u=a*Jc,h=Math.sin(u),d=Math.cos(u),f=d*(o-e)*.5+h*(l-t)*.5,p=d*(l-t)*.5-h*(o-e)*.5;let m=f*f/((n=Math.abs(n))*n)+p*p/((i=Math.abs(i))*i);m>1&&(m=Math.sqrt(m),n*=m,i*=m);const _=d/n,g=h/n,y=-h/i,v=d/i,b=_*o+g*l,x=y*o+v*l,M=_*e+g*t,w=y*e+v*t;let S=1/((M-b)*(M-b)+(w-x)*(w-x))-.25;S<0&&(S=0);let L=Math.sqrt(S);s==r&&(L=-L);const T=.5*(b+M)-L*(w-x),k=.5*(x+w)+L*(M-b),A=Math.atan2(x-k,b-T);let E=Math.atan2(w-k,M-T)-A;E<0&&1===s?E+=Zc:E>0&&0===s&&(E-=Zc);const C=Math.ceil(Math.abs(E/(Kc+.001))),D=[];for(let e=0;e<C;++e){const t=A+e*E/C,r=A+(e+1)*E/C;D[e]=[T,k,t,r,n,i,h,d]}return eu[c]=D}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let t=0;t<r.length;++t){const n=iu(r[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const lu=.5773502691896257,cu={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Zc)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,s=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-s),e.lineTo(r,-s),e.lineTo(0,-n),e.lineTo(-r,-s),e.lineTo(-i,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Qc*n,r=i-n*lu,s=n/4;e.moveTo(0,-i-r),e.lineTo(-s,i-r),e.lineTo(s,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Qc*n,r=i-n*lu;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Qc*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Qc*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Qc*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Qc*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};var uu={};const hu=.448084975506;function du(e){return e.x}function fu(e){return e.y}function pu(e){return e.width}function mu(e){return e.height}function _u(e){return"function"==typeof e?e:()=>+e}function gu(e,t,n){return Math.max(t,Math.min(e,n))}function yu(e,t){return null!=e?e:t}const vu=e=>e.x||0,bu=e=>e.y||0,xu=e=>!(!1===e.defined),Mu=function(){var e=wc,t=Sc,n=pc(0),i=null,r=Lc,s=Tc,a=kc,o=null,l=Mc(c);function c(){var c,u,h=+e.apply(this,arguments),d=+t.apply(this,arguments),f=r.apply(this,arguments)-Gl,p=s.apply(this,arguments)-Gl,m=Bl(p-f),_=p>f;if(o||(o=c=l()),d<h&&(u=d,d=h,h=u),d>Ul)if(m>Vl-Ul)o.moveTo(d*Fl(f),d*Hl(f)),o.arc(0,0,d,f,p,!_),h>Ul&&(o.moveTo(h*Fl(p),h*Hl(p)),o.arc(0,0,h,p,f,_));else{var g,y,v=f,b=p,x=f,M=p,w=m,S=m,L=a.apply(this,arguments)/2,T=L>Ul&&(i?+i.apply(this,arguments):jl(h*h+d*d)),k=Il(Bl(d-h)/2,+n.apply(this,arguments)),A=k,E=k;if(T>Ul){var C=ql(T/h*Hl(L)),D=ql(T/d*Hl(L));(w-=2*C)>Ul?(x+=C*=_?1:-1,M-=C):(w=0,x=M=(f+p)/2),(S-=2*D)>Ul?(v+=D*=_?1:-1,b-=D):(S=0,v=b=(f+p)/2)}var O=d*Fl(v),P=d*Hl(v),R=h*Fl(M),z=h*Hl(M);if(k>Ul){var B,Y=d*Fl(b),F=d*Hl(b),N=h*Fl(x),I=h*Hl(x);if(m<Wl)if(B=function(e,t,n,i,r,s,a,o){var l=n-e,c=i-t,u=a-r,h=o-s,d=h*l-u*c;if(!(d*d<Ul))return[e+(d=(u*(t-s)-h*(e-r))/d)*l,t+d*c]}(O,P,N,I,Y,F,R,z)){var H=O-B[0],j=P-B[1],U=Y-B[0],W=F-B[1],G=1/Hl(function(e){return e>1?0:e<-1?Wl:Math.acos(e)}((H*U+j*W)/(jl(H*H+j*j)*jl(U*U+W*W)))/2),V=jl(B[0]*B[0]+B[1]*B[1]);A=Il(k,(h-V)/(G-1)),E=Il(k,(d-V)/(G+1))}else A=E=0}S>Ul?E>Ul?(g=Ac(N,I,O,P,d,E,_),y=Ac(Y,F,R,z,d,E,_),o.moveTo(g.cx+g.x01,g.cy+g.y01),E<k?o.arc(g.cx,g.cy,E,Yl(g.y01,g.x01),Yl(y.y01,y.x01),!_):(o.arc(g.cx,g.cy,E,Yl(g.y01,g.x01),Yl(g.y11,g.x11),!_),o.arc(0,0,d,Yl(g.cy+g.y11,g.cx+g.x11),Yl(y.cy+y.y11,y.cx+y.x11),!_),o.arc(y.cx,y.cy,E,Yl(y.y11,y.x11),Yl(y.y01,y.x01),!_))):(o.moveTo(O,P),o.arc(0,0,d,v,b,!_)):o.moveTo(O,P),h>Ul&&w>Ul?A>Ul?(g=Ac(R,z,Y,F,h,-A,_),y=Ac(O,P,N,I,h,-A,_),o.lineTo(g.cx+g.x01,g.cy+g.y01),A<k?o.arc(g.cx,g.cy,A,Yl(g.y01,g.x01),Yl(y.y01,y.x01),!_):(o.arc(g.cx,g.cy,A,Yl(g.y01,g.x01),Yl(g.y11,g.x11),!_),o.arc(0,0,h,Yl(g.cy+g.y11,g.cx+g.x11),Yl(y.cy+y.y11,y.cx+y.x11),_),o.arc(y.cx,y.cy,A,Yl(y.y11,y.x11),Yl(y.y01,y.x01),!_))):o.arc(0,0,h,M,x,_):o.lineTo(R,z)}else o.moveTo(0,0);if(o.closePath(),c)return o=null,c+""||null}return c.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Wl/2;return[Fl(i)*n,Hl(i)*n]},c.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:pc(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:pc(+e),c):t},c.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:pc(+e),c):n},c.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:pc(+e),c):i},c.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:pc(+e),c):r},c.endAngle=function(e){return arguments.length?(s="function"==typeof e?e:pc(+e),c):s},c.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:pc(+e),c):a},c.context=function(e){return arguments.length?(o=null==e?null:e,c):o},c}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),wu=Pc().x(vu).y1(bu).y0((e=>(e.y||0)+(e.height||0))).defined(xu),Su=Pc().y(bu).x1(vu).x0((e=>(e.x||0)+(e.width||0))).defined(xu),Lu=Oc().x(vu).y(bu).defined(xu),Tu=function(){var e=du,t=fu,n=pu,i=mu,r=_u(0),s=r,a=r,o=r,l=null;function c(c,u,h){var d,f=null!=u?u:+e.call(this,c),p=null!=h?h:+t.call(this,c),m=+n.call(this,c),_=+i.call(this,c),g=Math.min(m,_)/2,y=gu(+r.call(this,c),0,g),v=gu(+s.call(this,c),0,g),b=gu(+a.call(this,c),0,g),x=gu(+o.call(this,c),0,g);if(l||(l=d=xc()),y<=0&&v<=0&&b<=0&&x<=0)l.rect(f,p,m,_);else{var M=f+m,w=p+_;l.moveTo(f+y,p),l.lineTo(M-v,p),l.bezierCurveTo(M-hu*v,p,M,p+hu*v,M,p+v),l.lineTo(M,w-x),l.bezierCurveTo(M,w-hu*x,M-hu*x,w,M-x,w),l.lineTo(f+b,w),l.bezierCurveTo(f+hu*b,w,f,w-hu*b,f,w-b),l.lineTo(f,p+y),l.bezierCurveTo(f,p+hu*y,f+hu*y,p,f+y,p),l.closePath()}if(d)return l=null,d+""||null}return c.x=function(t){return arguments.length?(e=_u(t),c):e},c.y=function(e){return arguments.length?(t=_u(e),c):t},c.width=function(e){return arguments.length?(n=_u(e),c):n},c.height=function(e){return arguments.length?(i=_u(e),c):i},c.cornerRadius=function(e,t,n,i){return arguments.length?(r=_u(e),s=null!=t?_u(t):r,o=null!=n?_u(n):r,a=null!=i?_u(i):s,c):r},c.context=function(e){return arguments.length?(l=null==e?null:e,c):l},c}().x(vu).y(bu).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>yu(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>yu(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>yu(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>yu(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),ku=function(e,t){let n=null,i=Mc(r);function r(){let r;if(n||(n=r=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:pc(e||Rc),t="function"==typeof t?t:pc(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:pc(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:pc(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>{return t=e.shape||"circle",(0,r.mQ)(cu,t)?cu[t]:function(e){if(!(0,r.mQ)(uu,e)){const t=$c(e);uu[e]={draw:function(e,n){au(e,t,0,0,Math.sqrt(n)/2)}}}return uu[e]}(t);var t})).size((e=>yu(e.size,64))),Au=function(){var e,t,n,i,r,s,a,o,l=null;function c(e,t,n){const i=n/2;if(r){var c=a-t,u=e-s;if(c||u){var h=Math.hypot(c,u),d=(c/=h)*o,f=(u/=h)*o,p=Math.atan2(u,c);l.moveTo(s-d,a-f),l.lineTo(e-c*i,t-u*i),l.arc(e,t,i,p-Math.PI,p),l.lineTo(s+d,a+f),l.arc(s,a,o,p,p+Math.PI)}else l.arc(e,t,i,0,Zc);l.closePath()}else r=1;s=e,a=t,o=i}function u(s){var a,o,u,h=s.length,d=!1;for(null==l&&(l=u=xc()),a=0;a<=h;++a)!(a<h&&i(o=s[a],a,s))===d&&(d=!d)&&(r=0),d&&c(+e(o,a,s),+t(o,a,s),+n(o,a,s));if(u)return l=null,u+""||null}return u.x=function(t){return arguments.length?(e=t,u):e},u.y=function(e){return arguments.length?(t=e,u):t},u.size=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(i=e,u):i},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u}().x(vu).y(bu).defined(xu).size((e=>e.size||1));function Eu(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Cu(e,t,n,i){return Tu.context(e)(t,n,i)}var Du=1;function Ou(e,t,n){var i=t.clip,s=e._defs,a=t.clip_id||(t.clip_id="clip"+Du++),o=s.clipping[a]||(s.clipping[a]={id:a});return(0,r.Tn)(i)?o.path=i(null):Eu(n)?o.path=Cu(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function Pu(e){this.clear(),e&&this.union(e)}function Ru(e){this.mark=e,this.bounds=this.bounds||new Pu}function zu(e){this._pending=0,this._loader=e||il()}function Bu(e){e._pending+=1}function Yu(e){e._pending-=1}function Fu(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const i=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(i+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,i):0))}return e}Pu.prototype={clone(){return new Pu(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),c=t-t*o+n*l,u=n-t*l-n*o;return[o*i-l*r+c,l*i+o*r+u,o*i-l*a+c,l*i+o*a+u,o*s-l*r+c,l*s+o*r+u,o*s-l*a+c,l*s+o*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},(0,r.B)((function(e){Ru.call(this,e),this.items=this.items||[]}),Ru),zu.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Bu(t),t._loader.sanitize(e,{context:"href"}).then((e=>(Yu(t),e))).catch((()=>(Yu(t),null)))},loadImage(e){const t=this,n=Bc();return Bu(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const i=e.href;if(!i||!n)throw{url:i};const s=new n,a=(0,r.mQ)(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=a&&(s.crossOrigin=a),s.onload=()=>Yu(t),s.onerror=()=>Yu(t),s.src=i,s})).catch((e=>(Yu(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready(){const e=this;return new Promise((t=>{!function n(i){e.pending()?setTimeout((()=>{n(!0)}),10):t(i)}(!1)}))}};const Nu=Zc-1e-8;let Iu,Hu,ju,Uu,Wu,Gu,Vu,qu;const Xu=(e,t)=>Iu.add(e,t),$u=(e,t)=>Xu(Hu=e,ju=t),Ju=e=>Xu(e,Iu.y1),Ku=e=>Xu(Iu.x1,e),Zu=(e,t)=>Wu*e+Vu*t,Qu=(e,t)=>Gu*e+qu*t,eh=(e,t)=>Xu(Zu(e,t),Qu(e,t)),th=(e,t)=>$u(Zu(e,t),Qu(e,t));function nh(e,t){return Iu=e,t?(Uu=t*Jc,Wu=qu=Math.cos(Uu),Gu=Math.sin(Uu),Vu=-Gu):(Wu=qu=1,Uu=Gu=Vu=0),ih}const ih={beginPath(){},closePath(){},moveTo:th,lineTo:th,rect(e,t,n,i){Uu?(eh(e+n,t),eh(e+n,t+i),eh(e,t+i),th(e,t)):(Xu(e+n,t+i),$u(e,t))},quadraticCurveTo(e,t,n,i){const r=Zu(e,t),s=Qu(e,t),a=Zu(n,i),o=Qu(n,i);rh(Hu,r,a,Ju),rh(ju,s,o,Ku),$u(a,o)},bezierCurveTo(e,t,n,i,r,s){const a=Zu(e,t),o=Qu(e,t),l=Zu(n,i),c=Qu(n,i),u=Zu(r,s),h=Qu(r,s);sh(Hu,a,l,u,Ju),sh(ju,o,c,h,Ku),$u(u,h)},arc(e,t,n,i,r,s){if(i+=Uu,r+=Uu,Hu=n*Math.cos(r)+e,ju=n*Math.sin(r)+t,Math.abs(r-i)>Nu)Xu(e-n,t-n),Xu(e+n,t+n);else{const a=i=>Xu(n*Math.cos(i)+e,n*Math.sin(i)+t);let o,l;if(a(i),a(r),r!==i)if((i%=Zc)<0&&(i+=Zc),(r%=Zc)<0&&(r+=Zc),r<i&&(s=!s,o=i,i=r,r=o),s)for(r-=Zc,o=i-i%Kc,l=0;l<4&&o>r;++l,o-=Kc)a(o);else for(o=i-i%Kc+Kc,l=0;l<4&&o<r;++l,o+=Kc)a(o)}}};function rh(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function sh(e,t,n,i,r){const s=i-e+3*t-3*n,a=e+n-2*t,o=e-t;let l,c=0,u=0;Math.abs(s)>1e-14?(l=a*a+o*s,l>=0&&(l=Math.sqrt(l),c=(-a+l)/s,u=(-a-l)/s)):c=.5*o/a,0<c&&c<1&&r(ah(c,e,t,n,i)),0<u&&u<1&&r(ah(u,e,t,n,i))}function ah(e,t,n,i,r){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*i+o*e*r}var oh=(oh=zc(1,1))?oh.getContext("2d"):null;const lh=new Pu;function ch(e){return function(t,n){if(!oh)return!0;e(oh,t),lh.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:s,y2:a}=lh;for(let e=r;e<=a;++e)for(let t=i;t<=s;++t)if(oh.isPointInPath(t,e))return!0;return!1}}function uh(e,t){return t.contains(e.x||0,e.y||0)}function hh(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,s=e.height||0;return t.intersects(lh.set(n,i,n+r,i+s))}function dh(e,t,n,i,r){const{x1:s,y1:a,x2:o,y2:l}=e,c=i-t,u=r-n;let h,d,f,p,m=0,_=1;for(p=0;p<4;++p){if(0===p&&(h=-c,d=-(s-t)),1===p&&(h=c,d=o-t),2===p&&(h=-u,d=-(a-n)),3===p&&(h=u,d=l-n),Math.abs(h)<1e-10&&d<0)return!1;if(f=d/h,h<0){if(f>_)return!1;f>m&&(m=f)}else if(h>0){if(f<m)return!1;f<_&&(_=f)}}return!0}function fh(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ph(e,t){return null==e?t:e}function mh(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function _h(e,t,n){return Nc(n)?function(e,t,n){const i=n.width(),r=n.height();let s;if("radial"===t.gradient)s=e.createRadialGradient(n.x1+ph(t.x1,.5)*i,n.y1+ph(t.y1,.5)*r,Math.max(i,r)*ph(t.r1,0),n.x1+ph(t.x2,.5)*i,n.y1+ph(t.y2,.5)*r,Math.max(i,r)*ph(t.r2,.5));else{const a=ph(t.x1,0),o=ph(t.y1,0),l=ph(t.x2,1),c=ph(t.y2,0);if(a!==l&&o!==c&&i!==r){const n=zc(Math.ceil(i),Math.ceil(r)),s=n.getContext("2d");return s.scale(i,r),s.fillStyle=mh(s.createLinearGradient(a,o,l,c),t.stops),s.fillRect(0,0,i,r),e.createPattern(n,"no-repeat")}s=e.createLinearGradient(n.x1+a*i,n.y1+o*r,n.x1+l*i,n.y1+c*r)}return mh(s,t.stops)}(e,n,t.bounds):n}function gh(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=_h(e,t,t.fill),!0)}var yh=[];function vh(e,t,n){var i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=_h(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||yh),e.lineDashOffset=t.strokeDashOffset||0),!0)}function bh(e,t){return e.zindex-t.zindex||e.index-t.index}function xh(e){if(!e.zdirty)return e.zitems;var t,n,i,r=e.items,s=[];for(n=0,i=r.length;n<i;++n)(t=r[n]).index=n,t.zindex&&s.push(t);return e.zdirty=!1,e.zitems=s.sort(bh)}function Mh(e,t){var n,i,r=e.items;if(!r||!r.length)return;const s=xh(e);if(s&&s.length){for(n=0,i=r.length;n<i;++n)r[n].zindex||t(r[n]);r=s}for(n=0,i=r.length;n<i;++n)t(r[n])}function wh(e,t){var n,i,r=e.items;if(!r||!r.length)return null;const s=xh(e);for(s&&s.length&&(r=s),i=r.length;--i>=0;)if(n=t(r[i]))return n;if(r===s)for(i=(r=e.items).length;--i>=0;)if(!r[i].zindex&&(n=t(r[i])))return n;return null}function Sh(e){return function(t,n,i){Mh(n,(n=>{i&&!i.intersects(n.bounds)||Th(e,t,n,n)}))}}function Lh(e){return function(t,n,i){!n.items.length||i&&!i.intersects(n.bounds)||Th(e,t,n.items[0],n.items)}}function Th(e,t,n,i){var r=null==n.opacity?1:n.opacity;0!==r&&(e(t,i)||(fh(t,n),n.fill&&gh(t,n,r)&&t.fill(),n.stroke&&vh(t,n,r)&&t.stroke()))}function kh(e){return e=e||r.vN,function(t,n,i,r,s,a){return i*=t.pixelRatio,r*=t.pixelRatio,wh(n,(n=>{const o=n.bounds;if((!o||o.contains(s,a))&&o)return e(t,n,i,r,s,a)?n:void 0}))}}function Ah(e,t){return function(n,i,r,s){var a,o,l=Array.isArray(i)?i[0]:i,c=null==t?l.fill:t,u=l.stroke&&n.isPointInStroke;return u&&(a=l.strokeWidth,o=l.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=o?o:"butt"),!e(n,i)&&(c&&n.isPointInPath(r,s)||u&&n.isPointInStroke(r,s))}}function Eh(e){return kh(Ah(e))}function Ch(e,t){return"translate("+e+","+t+")"}function Dh(e){return"rotate("+e+")"}function Oh(e){return Ch(e.x||0,e.y||0)}function Ph(e,t,n){function i(e,n){var i=n.x||0,r=n.y||0,s=n.angle||0;e.translate(i,r),s&&e.rotate(s*=Jc),e.beginPath(),t(e,n),s&&e.rotate(-s),e.translate(-i,-r)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return Ch(e.x||0,e.y||0)+(e.angle?" "+Dh(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(nh(e,n.angle),n),Fu(e,n).translate(n.x||0,n.y||0)},draw:Sh(i),pick:Eh(i),isect:n||ch(i)}}var Rh=Ph("arc",(function(e,t){return Mu.context(e)(t)}));function zh(e,t,n){function i(e,n){e.beginPath(),t(e,n)}const r=Ah(i);return{type:e,tag:"path",nested:!0,attr:function(e,n){var i=n.mark.items;i.length&&e("d",t(null,i))},bound:function(e,n){var i=n.items;return 0===i.length?e:(t(nh(e),i),Fu(e,i[0]))},draw:Lh(i),pick:function(e,t,n,i,s,a){var o=t.items,l=t.bounds;return!o||!o.length||l&&!l.contains(s,a)?null:(n*=e.pixelRatio,i*=e.pixelRatio,r(e,o,n,i)?o[0]:null)},isect:uh,tip:n}}var Bh=zh("area",(function(e,t){const n=t[0],i=n.interpolate||"linear";return("horizontal"===n.orient?Su:wu).curve(Uc(i,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,i,r="horizontal"===e[0].orient?t[1]:t[0],s="horizontal"===e[0].orient?"y":"x",a=e.length,o=1/0;--a>=0;)!1!==e[a].defined&&(i=Math.abs(e[a][s]-r))<o&&(o=i,n=e[a]);return n}));function Yh(e,t){e.beginPath(),Eu(t)?Cu(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Fh(e){const t=ph(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Nh(e,t){const n=Fh(t);e("d",Cu(null,t,n,n))}function Ih(e,t,n,i){const r=Fh(t);e.beginPath(),Cu(e,t,(n||0)+r,(i||0)+r)}const Hh=Ah(Ih),jh=Ah(Ih,!1),Uh=Ah(Ih,!0);var Wh={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",Oh(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let t=0;t<i;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Fu(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n,i){Mh(t,(t=>{const r=t.x||0,s=t.y||0,a=t.strokeForeground,o=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&o&&(Ih(e,t,r,s),fh(e,t),t.fill&&gh(e,t,o)&&e.fill(),t.stroke&&!a&&vh(e,t,o)&&e.stroke()),e.save(),e.translate(r,s),t.clip&&Yh(e,t),n&&n.translate(-r,-s),Mh(t,(t=>{("group"===t.marktype||null==i||i.includes(t.marktype))&&this.draw(e,t,n,i)})),n&&n.translate(r,s),e.restore(),a&&t.stroke&&o&&(Ih(e,t,r,s),fh(e,t),vh(e,t,o)&&e.stroke())}))},pick:function(e,t,n,i,r,s){if(t.bounds&&!t.bounds.contains(r,s)||!t.items)return null;const a=n*e.pixelRatio,o=i*e.pixelRatio;return wh(t,(l=>{let c,u,h;const d=l.bounds;if(d&&!d.contains(r,s))return;u=l.x||0,h=l.y||0;const f=u+(l.width||0),p=h+(l.height||0),m=l.clip;if(m&&(r<u||r>f||s<h||s>p))return;if(e.save(),e.translate(u,h),u=r-u,h=s-h,m&&Eu(l)&&!Uh(e,l,a,o))return e.restore(),null;const _=l.strokeForeground,g=!1!==t.interactive;return g&&_&&l.stroke&&jh(e,l,a,o)?(e.restore(),l):(c=wh(l,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,u,h)?this.pick(e,n,i,u,h):null)),!c&&g&&(l.fill||!_&&l.stroke)&&Hh(e,l,a,o)&&(c=l),e.restore(),c||null)}))},isect:hh,content:function(e,t,n){e("clip-path",t.clip?Ou(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),Nh(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Nh(e,t):e("d","")}},Gh={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Vh(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function qh(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function Xh(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function $h(e,t){return"center"===e?t/2:"right"===e?t:0}function Jh(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Kh={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const i=Vh(t,n),r=qh(t,i),s=Xh(t,i),a=(t.x||0)-$h(t.align,r),o=(t.y||0)-Jh(t.baseline,s);e("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",Gh["xmlns:xlink"],"xlink:href"),e("transform",Ch(a,o)),e("width",r),e("height",s),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,i=qh(t,n),r=Xh(t,n),s=(t.x||0)-$h(t.align,i),a=(t.y||0)-Jh(t.baseline,r);return e.set(s,a,s+i,a+r)},draw:function(e,t,n){Mh(t,(t=>{if(n&&!n.intersects(t.bounds))return;const i=Vh(t,this);let r=qh(t,i),s=Xh(t,i);if(0===r||0===s)return;let a,o,l,c,u=(t.x||0)-$h(t.align,r),h=(t.y||0)-Jh(t.baseline,s);!1!==t.aspect&&(o=i.width/i.height,l=t.width/t.height,o==o&&l==l&&o!==l&&(l<o?(c=r/o,h+=(s-c)/2,s=c):(c=s*o,u+=(r-c)/2,r=c))),(i.complete||i.toDataURL)&&(fh(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(i,u,h,r,s))}))},pick:kh(),isect:r.vN,get:Vh,xOffset:$h,yOffset:Jh},Zh=zh("line",(function(e,t){const n=t[0],i=n.interpolate||"linear";return Lu.curve(Uc(i,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,i,r=Math.pow(e[0].strokeWidth||1,2),s=e.length;--s>=0;)if(!1!==e[s].defined&&(n=e[s].x-t[0])*n+(i=e[s].y-t[1])*i<r)return e[s];return null}));function Qh(e,t){var n=t.path;if(null==n)return!0;var i=t.x||0,r=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*Jc,l=t.pathCache;l&&l.path===n||((t.pathCache=l=$c(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),au(e,l,0,0,s,a),e.rotate(-o),e.translate(-i,-r)):au(e,l,i,r,s,a)}var ed={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,i=t.scaleY||1;1===n&&1===i||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return Ch(e.x||0,e.y||0)+(e.angle?" "+Dh(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return Qh(nh(e,t.angle),t)?e.set(0,0,0,0):Fu(e,t,!0)},draw:Sh(Qh),pick:Eh(Qh),isect:ch(Qh)};function td(e,t){e.beginPath(),Cu(e,t)}var nd={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Cu(null,t))},bound:function(e,t){var n,i;return Fu(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)},draw:Sh(td),pick:Eh(td),isect:hh};function id(e,t,n){var i,r,s,a;return!(!t.stroke||!vh(e,t,n)||(i=t.x||0,r=t.y||0,s=null!=t.x2?t.x2:i,a=null!=t.y2?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(s,a),0))}var rd={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",Oh(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,i;return Fu(e.set(n=t.x||0,i=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i),t)},draw:function(e,t,n){Mh(t,(t=>{if(!n||n.intersects(t.bounds)){var i=null==t.opacity?1:t.opacity;i&&id(e,t,i)&&(fh(e,t),e.stroke())}}))},pick:kh((function(e,t,n,i){return!!e.isPointInStroke&&id(e,t,1)&&e.isPointInStroke(n,i)})),isect:function(e,t){const n=e.x||0,i=e.y||0;return dh(t,n,i,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i)}},sd=Ph("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),ad=Ph("symbol",(function(e,t){return ku.context(e)(t)}),uh);const od=(0,r.EV)();var ld={height:pd,measureWidth:dd,estimateWidth:ud,width:ud,canvas:cd};function cd(e){ld.width=e&&oh?dd:ud}function ud(e,t){return hd(gd(e,t),pd(e))}function hd(e,t){return~~(.8*e.length*t)}function dd(e,t){return pd(e)<=0||!(t=gd(e,t))?0:fd(t,vd(e))}function fd(e,t){const n=`(${t}) ${e}`;let i=od.get(n);return void 0===i&&(oh.font=t,i=oh.measureText(e).width,od.set(n,i)),i}function pd(e){return null!=e.fontSize?+e.fontSize||0:11}function md(e){return null!=e.lineHeight?e.lineHeight:pd(e)+2}function _d(e){return t=e.lineBreak&&e.text&&!(0,r.cy)(e.text)?e.text.split(e.lineBreak):e.text,(0,r.cy)(t)?t.length>1?t:t[0]:t;var t}function gd(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,i=function(e){if(ld.width===dd){const t=vd(e);return e=>fd(e,t)}if(ld.width===ud){const t=pd(e);return e=>hd(e,t)}return t=>ld.width(e,t)}(e);if(i(t)<n)return t;var r,s=e.ellipsis||"",a="rtl"===e.dir,o=0,l=t.length;if(n-=i(s),a){for(;o<l;)r=o+l>>>1,i(t.slice(r))>n?o=r+1:l=r;return s+t.slice(o)}for(;o<l;)r=1+(o+l>>>1),i(t.slice(0,r))<n?o=r:l=r-1;return t.slice(0,o)+s}(e,n):n}function yd(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function vd(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+pd(e)+"px "+yd(e,t)}function bd(e){var t=e.baseline,n=pd(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*md(e):"line-bottom"===t?.29*n-.5*md(e):0)}cd(!0);const xd={left:"start",center:"middle",right:"end"},Md=new Pu;function wd(e){var t,n=e.x||0,i=e.y||0,r=e.radius||0;return r&&(t=(e.theta||0)-Kc,n+=r*Math.cos(t),i+=r*Math.sin(t)),Md.x1=n,Md.y1=i,Md}function Sd(e,t,n){var i,s=ld.height(t),a=t.align,o=wd(t),l=o.x1,c=o.y1,u=t.dx||0,h=(t.dy||0)+bd(t)-Math.round(.8*s),d=_d(t);if((0,r.cy)(d)?(s+=md(t)*(d.length-1),i=d.reduce(((e,n)=>Math.max(e,ld.width(t,n))),0)):i=ld.width(t,d),"center"===a?u-=i/2:"right"===a&&(u-=i),e.set(u+=l,h+=c,u+i,h+s),t.angle&&!n)e.rotate(t.angle*Jc,l,c);else if(2===n)return e.rotatedPoints(t.angle*Jc,l,c);return e}var Ld={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,i=t.dx||0,r=(t.dy||0)+bd(t),s=wd(t),a=s.x1,o=s.y1,l=t.angle||0;e("text-anchor",xd[t.align]||"start"),l?(n=Ch(a,o)+" "+Dh(l),(i||r)&&(n+=" "+Ch(i,r))):n=Ch(a+i,o+r),e("transform",n)},bound:Sd,draw:function(e,t,n){Mh(t,(t=>{var i,s,a,o,l,c,u,h=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===h||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=vd(t),e.textAlign=t.align||"left",s=(i=wd(t)).x1,a=i.y1,t.angle&&(e.save(),e.translate(s,a),e.rotate(t.angle*Jc),s=a=0),s+=t.dx||0,a+=(t.dy||0)+bd(t),c=_d(t),fh(e,t),(0,r.cy)(c))for(l=md(t),o=0;o<c.length;++o)u=gd(t,c[o]),t.fill&&gh(e,t,h)&&e.fillText(u,s,a),t.stroke&&vh(e,t,h)&&e.strokeText(u,s,a),a+=l;else u=gd(t,c),t.fill&&gh(e,t,h)&&e.fillText(u,s,a),t.stroke&&vh(e,t,h)&&e.strokeText(u,s,a);t.angle&&e.restore()}}))},pick:kh((function(e,t,n,i,r,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=wd(t),o=a.x1,l=a.y1,c=Sd(Md,t,1),u=-t.angle*Jc,h=Math.cos(u),d=Math.sin(u),f=h*r-d*s+(o-h*o+d*l),p=d*r+h*s+(l-d*o-h*l);return c.contains(f,p)})),isect:function(e,t){const n=Sd(Md,e,2);return dh(t,n[0],n[1],n[2],n[3])||dh(t,n[0],n[1],n[4],n[5])||dh(t,n[4],n[5],n[6],n[7])||dh(t,n[2],n[3],n[6],n[7])}},Td=zh("trail",(function(e,t){return Au.context(e)(t)}),(function(e,t){for(var n,i,r=e.length;--r>=0;)if(!1!==e[r].defined&&(n=e[r].x-t[0])*n+(i=e[r].y-t[1])*i<(n=e[r].size||1)*n)return e[r];return null})),kd={arc:Rh,area:Bh,group:Wh,image:Kh,line:Zh,path:ed,rect:nd,rule:rd,shape:sd,symbol:ad,text:Ld,trail:Td};function Ad(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Ed(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Cd(e,t,n,i){var r,s=e.childNodes[t];return s&&s.tagName.toLowerCase()===n.toLowerCase()||(r=s||null,s=Ad(e.ownerDocument,n,i),e.insertBefore(s,r)),s}function Dd(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function Od(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Pd(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Rd(e,t){this._active=null,this._handlers={},this._loader=e||il(),this._tooltip=t||zd}function zd(e,t,n,i){e.element().setAttribute("title",i||"")}function Bd(e){this._el=null,this._bgcolor=null,this._loader=new zu(e)}Rd.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),i=Ad(null,"a");for(const e in t)i.setAttribute(e,t[e]);i.dispatchEvent(n)})).catch((()=>{}))},handleTooltip(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,i){var r,s,a=e&&e.mark;if(a&&(r=kd[a.marktype]).tip){for((s=Pd(t,n))[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=r.tip(a.items,s)}return e}(t,e,this.canvas(),this._origin);const i=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,i)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,s=r.width(),a=r.height();let o=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)o+=e.x||0,l+=e.y||0;return{x:o,y:l,width:s,height:a,left:o,top:l,right:o+s,bottom:l+a}}},Bd.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then((()=>n)):Promise.resolve(n)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Yd="dragenter",Fd="dragleave",Nd="dragover",Id="pointerdown",Hd="pointermove",jd="pointerout",Ud="pointerover",Wd="mousedown",Gd="mousemove",Vd="mouseout",qd="mouseover",Xd="click",$d="mousewheel",Jd="touchstart",Kd="touchmove",Zd="touchend",Qd=["keydown","keypress","keyup",Yd,Fd,Nd,Id,"pointerup",Hd,jd,Ud,Wd,"mouseup",Gd,Vd,qd,Xd,"dblclick","wheel",$d,Jd,Kd,Zd],ef=Hd,tf=jd,nf=Xd;function rf(e,t){Rd.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function sf(e,t){(e=>e===Jd||e===Kd||e===Zd?[Jd,Kd,Zd]:[e])(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function af(e,t,n){t.forEach((t=>e.fire(t,n)))}function of(e,t,n){return function(i){const r=this._active,s=this.pickEvent(i);s===r||(r&&r.exit||af(this,n,i),this._active=s,af(this,t,i)),af(this,e,i)}}function lf(e){return function(t){af(this,e,t),this._active=null}}(0,r.B)(rf,Rd,{initialize(e,t,n){return this._canvas=e&&Ed(e,"canvas"),[Xd,Wd,Id,Hd,jd,Fd].forEach((e=>sf(this,e))),Rd.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Qd,DOMMouseScroll(e){this.fire($d,e)},pointermove:of([Hd,Gd],[Ud,qd],[jd,Vd]),dragover:of([Nd],[Yd],[Fd]),pointerout:lf([jd,Vd]),dragleave:lf([Fd]),pointerdown(e){this._down=this._active,this.fire(Id,e)},mousedown(e){this._down=this._active,this.fire(Wd,e)},click(e){this._down===this._active&&(this.fire(Xd,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Jd,e,!0)},touchmove(e){this.fire(Kd,e,!0)},touchend(e){this.fire(Zd,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===nf&&i&&i.href?this.handleHref(t,i,i.href):e!==ef&&e!==tf||this.handleTooltip(t,i,e!==tf),r)for(let e=0,n=r.length;e<n;++e)r[e].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(sf(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=Pd(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const s=this.context();return kd[e.marktype].pick.call(this,s,e,t,n,i,r)}});var cf="undefined"!=typeof window&&window.devicePixelRatio||1;function uf(e){Bd.call(this,e),this._options={},this._redraw=!1,this._dirty=new Pu,this._tempb=new Pu}const hf=Bd.prototype;function df(e,t){Rd.call(this,e,t);const n=this;n._hrefHandler=ff(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=ff(n,((e,t)=>{n.handleTooltip(e,t,e.type!==tf)}))}(0,r.B)(uf,Bd,{initialize(e,t,n,i,r,s){return this._options=s||{},this._canvas=this._options.externalContext?null:zc(1,1,this._options.type),e&&this._canvas&&(Dd(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),hf.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(hf.resize.call(this,e,t,n,i),this._canvas)!function(e,t,n,i,r,s){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),l=a?cf:r;e.width=t*l,e.height=n*l;for(const e in s)o[e]=s[e];a&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||(0,r.z3)("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),i=this._origin,r=this._width,s=this._height,a=this._dirty,o=(l=i,c=r,u=s,(new Pu).set(0,0,c,u).translate(-l[0],-l[1]));var l,c,u;n.save();const h=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(n,o.intersect(a),i);return this.clear(-i[0],-i[1],r,s),this.draw(n,e,h,t),n.restore(),a.clear(),this},draw(e,t,n,i){if("group"!==t.marktype&&null!=i&&!i.includes(t.marktype))return;const s=kd[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),(0,r.Tn)(n)?(e.beginPath(),n(e),e.clip()):Yh(e,t.group)}(e,t),s.draw.call(this,e,t,n,i),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,s=this.context();"pdf"===r.type||r.externalContext||s.clearRect(e,t,n,i),null!=this._bgcolor&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,i))}});const ff=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};(0,r.B)(df,Rd,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(nf,this._hrefHandler),i.removeEventListener(ef,this._tooltipHandler),i.removeEventListener(tf,this._tooltipHandler)),this._svg=i=e&&Ed(e,"svg"),i&&(i.addEventListener(nf,this._hrefHandler),i.addEventListener(ef,this._tooltipHandler),i.addEventListener(tf,this._tooltipHandler)),Rd.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const r={type:e,handler:t,listener:ff(this,t)};(i[n]||(i[n]=[])).push(r),this._svg&&this._svg.addEventListener(n,r.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const pf="aria-hidden",mf="aria-label",_f="role",gf="aria-roledescription",yf="graphics-object",vf="graphics-symbol",bf=(e,t,n)=>({[_f]:e,[gf]:t,[mf]:n||void 0}),xf=(0,r.M1)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Mf={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,i=t.title?kf(e):null,r=e.context,s=r.scales[t.scale].value,a=r.dataflow.locale(),o=s.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${zs(o)?"discrete":o} scale`+` with ${ia(a,s,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?kf(e):null,i=`${t.type||""} legend`.trim(),s=t.scales,a=Object.keys(s),o=e.context,l=o.scales[s[a[0]]].value,c=o.dataflow.locale();return((u=i).length?u[0].toUpperCase()+u.slice(1):u)+(n?` titled '${n}'`:"")+` for ${function(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+(0,r.se)(e)}(a)}`+` with ${ia(c,l,e)}`;var u}},"title-text":{desc:"title",caption:e=>`Title text '${Tf(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Tf(e)}'`}},wf={ariaRole:_f,ariaRoleDescription:gf,description:mf};function Sf(e,t){const n=!1===t.aria;if(e(pf,n||void 0),n||null==t.description)for(const t in wf)e(wf[t],void 0);else{const n=t.mark.marktype;e(mf,t.description),e(_f,t.ariaRole||("group"===n?yf:vf)),e(gf,t.ariaRoleDescription||`${n} mark`)}}function Lf(e){return!1===e.aria?{[pf]:!0}:xf[e.role]?null:Mf[e.role]?function(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return bf(t.role||vf,t.desc,n.description||i(n))}catch(e){return null}}(e,Mf[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return bf(n?yf:vf,`${t} mark container`,e.description)}(e)}function Tf(e){return(0,r.YO)(e.text).join(" ")}function kf(e){try{return(0,r.YO)((0,r.se)(e.items).items[0].text).join(" ")}catch(e){return null}}const Af=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function Ef(){let e="",t="",n="";const i=[],r=()=>t=n="",s=(e,n)=>{var i;return null!=n&&(t+=` ${e}="${i=n,Af(i).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open(o){(s=>{t&&(e+=`${t}>${n}`,r()),i.push(s)})(o),t="<"+o;for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(const e of c)for(const t in e)s(t,e[t]);return a},close(){const s=i.pop();return e+=t?t+(n?`>${n}</${s}>`:"/>"):`</${s}>`,r(),a},attr:s,text:e=>(n+=Af(e),a),toString:()=>e};return a}const Cf=e=>Df(Ef(),e)+"";function Df(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let t=0;t<i;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const t of n)3===t.nodeType?e.text(t.nodeValue):Df(e,t)}return e.close()}const Of={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Pf={blend:"mix-blend-mode"},Rf={fill:"none","stroke-miterlimit":10},zf="http://www.w3.org/2000/xmlns/",Bf=Gh.xmlns;function Yf(e){Bd.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const Ff=Bd.prototype;function Nf(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function If(e,t,n){let i,r,s;if("radial"===t.gradient){let i=Cd(e,n++,"pattern",Bf);Xf(i,{id:Fc+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),i=Cd(i,0,"rect",Bf),Xf(i,{width:1,height:1,fill:`url(${Jf()}#${t.id})`}),Xf(e=Cd(e,n++,"radialGradient",Bf),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Xf(e=Cd(e,n++,"linearGradient",Bf),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)s=Cd(e,i,"stop",Bf),s.setAttribute("offset",t.stops[i].offset),s.setAttribute("stop-color",t.stops[i].color);return Dd(e,i),n}function Hf(e,t,n){let i;return(e=Cd(e,n,"clipPath",Bf)).setAttribute("id",t.id),t.path?(i=Cd(e,0,"path",Bf),i.setAttribute("d",t.path)):(i=Cd(e,0,"rect",Bf),Xf(i,{x:0,y:0,width:t.width,height:t.height})),Dd(e,1),n+1}function jf(e,t,n,i,r){let s,a=e._svg;if(!a&&(s=t.ownerDocument,a=Ad(s,i,Bf),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===i))){const t=Ad(s,"path",Bf);a.appendChild(t),t.__data__=e;const n=Ad(s,"g",Bf);a.appendChild(n),n.__data__=e;const i=Ad(s,"path",Bf);a.appendChild(i),i.__data__=e,i.__values__={fill:"default"}}return(a.ownerSVGElement!==r||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}(0,r.B)(Yf,Bd,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=Cd(e,0,"svg",Bf),this._svg.setAttributeNS(zf,"xmlns",Bf),this._svg.setAttributeNS(zf,"xmlns:xlink",Gh["xmlns:xlink"]),this._svg.setAttribute("version",Gh.version),this._svg.setAttribute("class","marks"),Dd(e,1),this._root=Cd(this._svg,0,"g",Bf),Xf(this._root,Rf),Dd(this._svg,1)),this.background(this._bgcolor),Ff.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Ff.background.apply(this,arguments)},resize(e,t,n,i){return Ff.resize.call(this,e,t,n,i),this._svg&&(Xf(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Cd(e,0,"rect",Bf),Xf(n,{width:this._width,height:this._height,fill:t}));const i=Cf(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Dd(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,s,a,o,l;for(a=0,o=e.length;a<o;++a)n=e[a],i=n.mark,i.marktype!==r&&(r=i.marktype,s=kd[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,Nf(n,t),i.items.forEach((e=>{e.dirty=t}))),i.zdirty||(n.exit?(s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null):(n=s.nested?i.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(s,n._svg,n):(this._dirtyAll=!1,Nf(n,t)),n._update=t)));return!this._dirtyAll},mark(e,t,n,i){if(!this.isDirty(t))return t._svg;const r=this._svg,s=t.marktype,a=kd[s],o=!1===t.interactive?"none":null,l="g"===a.tag,c=jf(t,e,n,"g",r);if("group"!==s&&null!=i&&!i.includes(s))return Dd(c,0),t._svg;c.setAttribute("class",Od(t));const u=Lf(t);for(const e in u)$f(c,e,u[e]);l||$f(c,"pointer-events",o),$f(c,"clip-path",t.clip?Ou(this,t,t.group):null);let h=null,d=0;const f=e=>{const t=this.isDirty(e),n=jf(e,c,h,a.tag,r);t&&(this._update(a,n,e),l&&function(e,t,n,i){t=t.lastChild.previousSibling;let r,s=0;Mh(n,(n=>{r=e.mark(t,n,r,i),++s})),Dd(t,1+s)}(this,n,e,i)),h=n,++d};return a.nested?t.items.length&&f(t.items[0]):Mh(t,f),Dd(c,d),c},_update(e,t,n){Uf=t,Wf=t.__values__,Sf(Vf,n),e.attr(Vf,n,this);const i=Gf[e.type];i&&i.call(this,e,t,n),Uf&&this.style(Uf,n)},style(e,t){if(null!=t){for(const n in Of){let i="font"===n?yd(t):t[n];if(i===Wf[n])continue;const r=Of[n];null==i?e.removeAttribute(r):(Nc(i)&&(i=Ic(i,this._defs.gradient,Jf())),e.setAttribute(r,i+"")),Wf[n]=i}for(const n in Pf)qf(e,Pf[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=Cd(e,1,"defs",Bf)),i=If(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=Cd(e,1,"defs",Bf)),i=Hf(n,t.clipping[r],i);n&&(0===i?(e.removeChild(n),t.el=null):Dd(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});let Uf=null,Wf=null;const Gf={group(e,t,n){const i=Uf=t.childNodes[2];Wf=i.__values__,e.foreground(Vf,n,this),Wf=t.__values__,Uf=t.childNodes[1],e.content(Vf,n,this);const r=Uf=t.childNodes[0];e.background(Vf,n,this);const s=!1===n.mark.interactive?"none":null;if(s!==Wf.events&&($f(i,"pointer-events",s),$f(r,"pointer-events",s),Wf.events=s),n.strokeForeground&&n.stroke){const e=n.fill;$f(i,"display",null),this.style(r,n),$f(r,"stroke",null),e&&(n.fill=null),Wf=i.__values__,this.style(i,n),e&&(n.fill=e),Uf=null}else $f(i,"display","none")},image(e,t,n){!1===n.smooth?(qf(t,"image-rendering","optimizeSpeed"),qf(t,"image-rendering","pixelated")):qf(t,"image-rendering",null)},text(e,t,n){const i=_d(n);let s,a,o,l;(0,r.cy)(i)?(a=i.map((e=>gd(n,e))),s=a.join("\n"),s!==Wf.text&&(Dd(t,0),o=t.ownerDocument,l=md(n),a.forEach(((e,i)=>{const r=Ad(o,"tspan",Bf);r.__data__=n,r.textContent=e,i&&(r.setAttribute("x",0),r.setAttribute("dy",l)),t.appendChild(r)})),Wf.text=s)):(a=gd(n,i),a!==Wf.text&&(t.textContent=a,Wf.text=a)),$f(t,"font-family",yd(n)),$f(t,"font-size",pd(n)+"px"),$f(t,"font-style",n.fontStyle),$f(t,"font-variant",n.fontVariant),$f(t,"font-weight",n.fontWeight)}};function Vf(e,t,n){t!==Wf[e]&&(n?function(e,t,n,i){null!=n?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}(Uf,e,t,n):$f(Uf,e,t),Wf[e]=t)}function qf(e,t,n){n!==Wf[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Wf[t]=n)}function Xf(e,t){for(const n in t)$f(e,n,t[n])}function $f(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Jf(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Kf(e){Bd.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}(0,r.B)(Kf,Bd,{svg(){return this._text},_render(e){const t=Ef();t.open("svg",(0,r.X$)({},Gh,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Rf,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=kd[t.marktype],i=n.tag,s=[Sf,n.attr];e.open("g",{class:Od(t),"clip-path":t.clip?Ou(this,t,t.group):null},Lf(t),{"pointer-events":"g"!==i&&!1===t.interactive?"none":null});const a=a=>{const o=this.href(a);if(o&&e.open("a",o),e.open(i,this.attr(t,a,s,"g"!==i?i:null)),"text"===i){const t=_d(a);if((0,r.cy)(t)){const n={x:0,dy:md(a)};for(let i=0;i<t.length;++i)e.open("tspan",i?n:null).text(gd(a,t[i])).close()}else e.text(gd(a,t))}else if("g"===i){const i=a.strokeForeground,r=a.fill,s=a.stroke;i&&s&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),Mh(a,(t=>this.mark(e,t))),e.close(),i&&s?(r&&(a.fill=null),a.stroke=s,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),r&&(a.fill=r)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),o&&e.close()};return n.nested?t.items&&t.items.length&&a(t.items[0]):Mh(t,a),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr(e,t,n,i){const r={},s=(e,t,n,i)=>{r[i||e]=t};return Array.isArray(n)?n.forEach((e=>e(s,t,this))):n(s,t,this),i&&function(e,t,n,i,r){let s;if(null==t)return e;if("bgrect"===i&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===i&&!1===t.smooth&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===i&&(e["font-family"]=yd(t),e["font-size"]=pd(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in Of){let i=t[n];const s=Of[n];("transparent"!==i||"fill"!==s&&"stroke"!==s)&&null!=i&&(Nc(i)&&(i=Ic(i,r.gradient,"")),e[s]=i)}for(const e in Pf){const n=t[e];null!=n&&(s=s||[],s.push(`${Pf[e]}: ${n};`))}s&&(e.style=s.join(" "))}(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const i=t[n],r=i.stops;"radial"===i.gradient?(e.open("pattern",{id:Fc+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):e.open("linearGradient",{id:n,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(let t=0;t<r.length;++t)e.open("stop",{offset:r[t].offset,"stop-color":r[t].color}).close();e.close()}for(const t in n){const i=n[t];e.open("clipPath",{id:t}),i.path?e.open("path",{d:i.path}).close():e.open("rect",{x:0,y:0,width:i.width,height:i.height}).close(),e.close()}e.close()}}});const Zf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Qf(e){Bd.call(this,e),this._svgRenderer=new Yf(e),this._canvasRenderer=new uf(e)}const ep=Bd.prototype;function tp(e,t){rf.call(this,e,t)}(0,r.B)(Qf,Bd,{initialize(e,t,n,i,r){this._root_el=Cd(e,0,"div");const s=Cd(this._root_el,0,"div"),a=Cd(this._root_el,1,"div");return this._root_el.style.position="relative",Zf.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Zf.svgOnTop?a:s,this._canvasEl=Zf.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,i,r),this._svgRenderer.initialize(this._svgEl,t,n,i,r),ep.initialize.call(this,e,t,n,i,r)},dirty(e){return Zf.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const n=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter((e=>!Zf.svgMarkTypes.includes(e)));this._svgRenderer.render(e,Zf.svgMarkTypes),this._canvasRenderer.render(e,n)},resize(e,t,n,i){return ep.resize.call(this,e,t,n,i),this._svgRenderer.resize(e,t,n,i),this._canvasRenderer.resize(e,t,n,i),this},background(e){return Zf.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}),(0,r.B)(tp,rf,{initialize(e,t,n){const i=Cd(Cd(e,0,"div"),Zf.svgOnTop?0:1,"div");return rf.prototype.initialize.call(this,i,t,n)}});const np={};function ip(e,t,n,i){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const r=e.items,s=e.marktype,a=r.length;let o=0;if("group"===s)for(;o<a;++o)rp(r[o],t,n,i);else for(const e=kd[s].isect;o<a;++o){const n=r[o];sp(n,t,e)&&i.push(n)}}return i}function rp(e,t,n,i){n&&n(e.mark)&&sp(e,t,kd.group.isect)&&i.push(e);const r=e.items,s=r&&r.length;if(s){const a=e.x||0,o=e.y||0;t.translate(-a,-o);for(let e=0;e<s;++e)ip(r[e],t,n,i);t.translate(a,o)}return i}function sp(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}function ap(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function op(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lp(){return 0}np.canvas=np.png={renderer:uf,headless:uf,handler:rf},np.svg={renderer:Yf,headless:Kf,handler:df},np.hybrid={renderer:Qf,headless:Qf,handler:tp},np.none={},new Pu,Map;class cp extends Set{constructor(e,t=up){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const t of e)this.add(t)}has(e){return super.has(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}(this,e))}add(e){return super.add(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e))}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}(this,e))}}function up(e){return null!==e&&"object"==typeof e?e.valueOf():e}function hp(e){return e instanceof cp?e:new cp(e)}var dp;(dp={})[1]="Boolean",dp[2]="<end>",dp[3]="Identifier",dp[4]="Keyword",dp[5]="Null",dp[6]="Numeric",dp[7]="Punctuator",dp[8]="String",dp[9]="RegularExpression";const fp=Symbol("vega_selection_getter");function pp(e){return e.getter&&e.getter[fp]||(e.getter=(0,r.ZZ)(e.field),e.getter[fp]=!0),e.getter}const mp="intersect",_p="union",gp="or",yp="and",vp="_vgsid_",bp=(0,r.ZZ)(vp),xp="index:unit";function Mp(e,t){for(var n,i,s=t.fields,a=t.values,o=s.length,l=0;l<o;++l)if(n=pp(i=s[l])(e),(0,r.$P)(n)&&(n=(0,r.Ro)(n)),(0,r.$P)(a[l])&&(a[l]=(0,r.Ro)(a[l])),(0,r.cy)(a[l])&&(0,r.$P)(a[l][0])&&(a[l]=a[l].map(r.Ro)),"E"===i.type){if((0,r.cy)(a[l])?a[l].indexOf(n)<0:n!==a[l])return!1}else if("R"===i.type){if(!(0,r.PK)(n,a[l]))return!1}else if("R-RE"===i.type){if(!(0,r.PK)(n,a[l],!0,!1))return!1}else if("R-E"===i.type){if(!(0,r.PK)(n,a[l],!1,!1))return!1}else if("R-LE"===i.type&&!(0,r.PK)(n,a[l],!1,!0))return!1;return!0}const wp=function(e){let t,n,i;function r(e,i,r=0,s=e.length){if(r<s){if(0!==t(i,i))return s;do{const t=r+s>>>1;n(e[t],i)<0?r=t+1:s=t}while(r<s)}return r}return 2!==e.length?(t=ap,n=(t,n)=>ap(e(t),n),i=(t,n)=>e(t)-n):(t=e===ap||e===op?e:lp,n=e,i=e),{left:r,center:function(e,t,n=0,s=e.length){const a=r(e,t,n,s-1);return a>n&&i(e[a-1],t)>-i(e[a],t)?a-1:a},right:function(e,i,r=0,s=e.length){if(r<s){if(0!==t(i,i))return s;do{const t=r+s>>>1;n(e[t],i)<=0?r=t+1:s=t}while(r<s)}return r}}}(bp),Sp=wp.left,Lp=wp.right;var Tp={[`${vp}_union`]:function(...e){const t=new cp;for(const n of e)for(const e of n)t.add(e);return t},[`${vp}_intersect`]:function(e,...t){e=new cp(e),t=t.map(hp);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=(0,r.Ro)(t[0]),i=(0,r.Ro)(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=(0,r.Ro)(t[0]),i=(0,r.Ro)(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};function kp(e,t,n,i){"Literal"!==t[0].type&&(0,r.z3)("First argument to selection functions must be a string literal.");const s=t[0].value,a="unit",o="@"+a,l=":"+s;(t.length>=2&&(0,r.se)(t).value)!==mp||(0,r.mQ)(i,o)||(i[o]=n.getData(s).indataRef(n,a)),(0,r.mQ)(i,l)||(i[l]=n.getData(s).tuplesRef())}var Ap=Math.random;const Ep=Math.sqrt(2*Math.PI),Cp=Math.SQRT2;let Dp=NaN;function Op(e,t){e=e||0,t=null==t?1:t;let n,i,r=0,s=0;if(Dp==Dp)r=Dp,Dp=NaN;else{do{r=2*Ap()-1,s=2*Ap()-1,n=r*r+s*s}while(0===n||n>1);i=Math.sqrt(-2*Math.log(n)/n),r*=i,Dp=s*i}return e+r*t}function Pp(e,t,n){const i=(e-(t=t||0))/(n=null==n?1:n),r=Math.abs(i);let s;if(r>37)s=0;else{const e=Math.exp(-r*r/2);let t;r<7.07106781186547?(t=.0352624965998911*r+.700383064443688,t=t*r+6.37396220353165,t=t*r+33.912866078383,t=t*r+112.079291497871,t=t*r+221.213596169931,t=t*r+220.206867912376,s=e*t,t=.0883883476483184*r+1.75566716318264,t=t*r+16.064177579207,t=t*r+86.7807322029461,t=t*r+296.564248779674,t=t*r+637.333633378831,t=t*r+793.826512519948,t=t*r+440.413735824752,s/=t):(t=r+.65,t=r+4/t,t=r+3/t,t=r+2/t,t=r+1/t,s=e/t/2.506628274631)}return i>0?1-s:s}function Rp(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*Cp*function(e){let t,n=-Math.log((1-e)*(1+e));return n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0,t*e}(2*e-1)}function zp(e){const t=this.context.data[e];return t?t.values.value:[]}function Bp(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r?r.count:r}function Yp(e,t){const n=this.context.dataflow,i=this.context.data[e].input;return n.pulse(i,n.changeset().remove(r.vN).insert(t)),1}function Fp(e,t,n){if(e){const n=this.context.dataflow,i=e.mark.source;n.pulse(i,n.changeset().encode(e,t))}return void 0!==n?n:e}Math.PI;const Np=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Ip=Np("format"),Hp=Np("timeFormat"),jp=Np("utcFormat"),Up=Np("timeParse"),Wp=Np("utcParse"),Gp=new Date(2e3,0,1);function Vp(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(Gp.setYear(2e3),Gp.setMonth(e),Gp.setDate(t),Hp.call(this,Gp,n)):""}function qp(e){return Vp.call(this,e,1,"%B")}function Xp(e){return Vp.call(this,e,1,"%b")}function $p(e){return Vp.call(this,0,2+e,"%A")}function Jp(e){return Vp.call(this,0,2+e,"%a")}const Kp=":",Zp="@",Qp="%",em="$";function tm(e,t,n,i){t[0].type!==s&&(0,r.z3)("First argument to data functions must be a string literal.");const a=t[0].value,o=Kp+a;if(!(0,r.mQ)(o,i))try{i[o]=n.getData(a).tuplesRef()}catch(e){}}function nm(e,t,n,i){t[0].type!==s&&(0,r.z3)("First argument to indata must be a string literal."),t[1].type!==s&&(0,r.z3)("Second argument to indata must be a string literal.");const a=t[0].value,o=t[1].value,l=Zp+o;(0,r.mQ)(l,i)||(i[l]=n.getData(a).indataRef(n,o))}function im(e,t,n,i){if(t[0].type===s)rm(n,i,t[0].value);else for(e in n.scales)rm(n,i,e)}function rm(e,t,n){const i=Qp+n;if(!(0,r.mQ)(t,i))try{t[i]=e.scaleRef(n)}catch(e){}}function sm(e,t){if((0,r.Tn)(e))return e;if((0,r.Kg)(e)){const i=t.scales[e];return i&&((n=i.value)&&!0===n[Os])?i.value:void 0}var n}function am(e,t){return function(n,i,r){if(n){const t=sm(n,(r||this).context);return t&&t.path[e](i)}return t(i)}}const om=am("area",(function(e){return Ua=new ra,La(e,Wa),2*Ua})),lm=am("bounds",(function(e){var t,n,i,r,s,a,o;if(Ra=Pa=-(Da=Oa=1/0),Ia=[],La(e,fo),n=Ia.length){for(Ia.sort(Mo),t=1,s=[i=Ia[0]];t<n;++t)wo(i,(r=Ia[t])[0])||wo(i,r[1])?(xo(i[0],r[1])>xo(i[0],i[1])&&(i[1]=r[1]),xo(r[0],i[1])>xo(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(a=-1/0,t=0,i=s[n=s.length-1];t<=n;i=r,++t)r=s[t],(o=xo(i[1],r[0]))>a&&(a=o,Da=r[0],Pa=i[1])}return Ia=Ha=null,Da===1/0||Oa===1/0?[[NaN,NaN],[NaN,NaN]]:[[Da,Oa],[Pa,Ra]]})),cm=am("centroid",(function(e){Ja=Ka=Za=Qa=eo=to=no=io=0,ro=new ra,so=new ra,ao=new ra,La(e,So);var t=+ro,n=+so,i=+ao,r=ma(t,n,i);return r<1e-12&&(t=to,n=no,i=io,Ka<sa&&(t=Za,n=Qa,i=eo),(r=ma(t,n,i))<1e-12)?[NaN,NaN]:[fa(n,t)*ua,ya(i/r)*ua]}));function um(e,t){const n=sm(e,(t||this).context);return n&&n.scale()}function hm(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function dm(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function fm(){return dm(this.context.dataflow,"warn",arguments)}function pm(){return dm(this.context.dataflow,"info",arguments)}function mm(){return dm(this.context.dataflow,"debug",arguments)}function _m(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gm(e){const t=(0,Je.Qh)(e);return.2126*_m(t.r)+.7152*_m(t.g)+.0722*_m(t.b)}function ym(e,t){const n=gm(e),i=gm(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function vm(){const e=[].slice.call(arguments);return e.unshift({}),(0,r.X$)(...e)}function bm(e,t){return e===t||e!=e&&t!=t||((0,r.cy)(e)?!(!(0,r.cy)(t)||e.length!==t.length)&&function(e,t){for(let n=0,i=e.length;n<i;++n)if(!bm(e[n],t[n]))return!1;return!0}(e,t):!(!(0,r.Gv)(e)||!(0,r.Gv)(t))&&xm(e,t))}function xm(e,t){for(const n in e)if(!bm(e[n],t[n]))return!1;return!0}function Mm(e){return t=>xm(e,t)}function wm(e,t,n,i,s,a){const o=this.context.dataflow,l=this.context.data[e],c=l.input,u=o.stamp();let h,d,f=l.changes;if(!1===o._trigger||!(c.value.length||t||i))return 0;if((!f||f.stamp<u)&&(l.changes=f=o.changeset(),f.stamp=u,o.runAfter((()=>{l.modified=!0,o.pulse(c,f).run()}),!0,1)),n&&(h=!0===n?r.vN:(0,r.cy)(n)||al(n)?n:Mm(n),f.remove(h)),t&&f.insert(t),i&&(h=Mm(i),c.value.some(h)?f.remove(h):f.insert(i)),s)for(d in a)f.modify(s,d,a[d]);return 1}function Sm(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Lm(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Tm={};function km(e,t){const n=Tm[t]||(Tm[t]=(0,r.ZZ)(t));return(0,r.cy)(e)?e.map(n):n(e)}function Am(e){return(0,r.cy)(e)||ArrayBuffer.isView(e)?e:null}function Em(e){return Am(e)||((0,r.Kg)(e)?e:null)}function Cm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Am(e).join(...n)}function Dm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Em(e).indexOf(...n)}function Om(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Em(e).lastIndexOf(...n)}function Pm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Em(e).slice(...n)}function Rm(e,t,n){return(0,r.Tn)(n)&&(0,r.z3)("Function argument passed to replace."),String(e).replace(t,n)}function zm(e){return Am(e).slice().reverse()}function Bm(e,t,n){return cs(e||0,t||0,n||0)}function Ym(e,t){const n=sm(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Fm(e,t){const n=sm(e,(t||this).context);return n?n.copy():void 0}function Nm(e,t){const n=sm(e,(t||this).context);return n?n.domain():[]}function Im(e,t,n){const i=sm(e,(n||this).context);return i?(0,r.cy)(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Hm(e,t){const n=sm(e,(t||this).context);return n&&n.range?n.range():[]}function jm(e,t,n){const i=sm(e,(n||this).context);return i?i(t):void 0}function Um(e,t,n,i,s){e=sm(e,(s||this).context);const a=function(e,t){var n,i=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:i,stop:function(e,t){return i.push({offset:e,color:t}),n}}}(t,n);let o=e.domain(),l=o[0],c=(0,r.se)(o),u=r.D_;return c-l?u=function(e,t,n){const i=n-t;let s,a,o;return i&&Number.isFinite(i)?(s=(a=e.type).indexOf("-"),a=s<0?a:a.slice(s+1),o=Ps(a)().domain([t,n]).range([0,1]),Bs.forEach((t=>e[t]?o[t](e[t]()):0)),o):(0,r.dY)(.5)}(e,l,c):e=(e.interpolator?Ps("sequential")().interpolator(e.interpolator()):Ps("linear")().interpolate(e.interpolate()).range(e.range())).domain([l=0,c=1]),e.ticks&&(o=e.ticks(+i||15),l!==o[0]&&o.unshift(l),c!==(0,r.se)(o)&&o.push(c)),o.forEach((t=>a.stop(u(t),e(t)))),a}function Wm(e,t,n){const i=sm(e,(n||this).context);return function(e){return i?i.path.context(e)(t):""}}function Gm(e){let t=null;return function(n){return n?au(n,t=t||$c(e)):e}}const Vm=e=>e.data;function qm(e,t){const n=zp.call(t,e);return n.root&&n.root.lookup||{}}function Xm(e,t,n){const i=qm(e,this),r=i[t],s=i[n];return r&&s?r.path(s).map(Vm):void 0}function $m(e,t){const n=qm(e,this)[t];return n?n.ancestors().map(Vm):void 0}const Jm=()=>"undefined"!=typeof window&&window||null;function Km(){const e=Jm();return e?e.screen:{}}function Zm(){const e=Jm();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Qm(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function e_(e,t,n){if(!e)return[];const[i,s]=e,a=(new Pu).set(i[0],i[1],s[0],s[1]);return function(e,t,n){const i=[],s=(new Pu).union(t),a=e.marktype;return a?ip(e,s,n,i):"group"===a?rp(e,s,n,i):(0,r.z3)("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,a,function(e){let t=null;if(e){const n=(0,r.YO)(e.marktype),i=(0,r.YO)(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!i.length||i.some((t=>e.name===t)))}return t}(t))}const t_={random:()=>Ap(),cumulativeNormal:Pp,cumulativeLogNormal:function(e,t,n){return Pp(Math.log(e),t,n)},cumulativeUniform:function(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)},densityNormal:function(e,t,n){const i=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*i*i)/(n*Ep)},densityLogNormal:function(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*Ep*e)},densityUniform:function(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0},quantileNormal:Rp,quantileLogNormal:function(e,t,n){return Math.exp(Rp(e,t,n))},quantileUniform:function(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN},sampleNormal:Op,sampleLogNormal:function(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Op()*t)},sampleUniform:function(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Ap()},isArray:r.cy,isBoolean:r.Lm,isDate:r.$P,isDefined:e=>void 0!==e,isNumber:r.Et,isObject:r.Gv,isRegExp:r.gd,isString:r.Kg,isTuple:al,isValid:e=>null!=e&&e==e,toBoolean:r.G4,toDate:e=>(0,r.ay)(e),toNumber:r.Ro,toString:r.dI,indexof:Dm,join:Cm,lastindexof:Om,replace:Rm,reverse:zm,slice:Pm,flush:r.bX,lerp:r.Cc,merge:vm,pad:r.eV,peek:r.se,pluck:km,span:r.Ln,inrange:r.PK,truncate:r.xv,rgb:Je.Qh,lab:Zr.Ay,hcl:Zr.aq,hsl:Je.KI,luminance:gm,contrast:ym,sequence:function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s},format:Ip,utcFormat:jp,utcParse:Wp,utcOffset:ls.SN,utcSequence:ls.Yf,timeFormat:Hp,timeParse:Up,timeOffset:ls.TO,timeSequence:ls.TD,timeUnitSpecifier:ls.Uo,monthFormat:qp,monthAbbrevFormat:Xp,dayFormat:$p,dayAbbrevFormat:Jp,quarter:r.$G,utcquarter:r.vu,week:ls.HH,utcweek:ls.BU,dayofyear:ls.xo,utcdayofyear:ls.VM,warn:fm,info:pm,debug:mm,extent:e=>(0,r.Xx)(e),inScope:hm,intersect:e_,clampRange:r.BS,pinchDistance:Sm,pinchAngle:Lm,screen:Km,containerSize:Qm,windowSize:Zm,bandspace:Bm,setdata:Yp,pathShape:Gm,panLinear:r.VC,panLog:r.KH,panPow:r.co,panSymlog:r.zy,zoomLinear:r.lL,zoomLog:r.oV,zoomPow:r.SW,zoomSymlog:r.B2,encode:Fp,modify:wm,lassoAppend:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const s=(e=(0,r.YO)(e))[e.length-1];return void 0===s||Math.hypot(s[0]-t,s[1]-n)>i?[...e,[t,n]]:e},lassoPath:function(e){return(0,r.YO)(e).reduce(((t,n,i)=>{let[r,s]=n;return t+(0==i?`M ${r},${s} `:i===e.length-1?" Z":`L ${r},${s} `)}),"")},intersectLasso:function(e,t,n){const{x:i,y:r,mark:s}=n,a=(new Pu).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[e,n]of t)e<a.x1&&(a.x1=e),e>a.x2&&(a.x2=e),n<a.y1&&(a.y1=n),n>a.y2&&(a.y2=n);return a.translate(i,r),e_([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter((e=>function(e,t,n){let i=0;for(let r=0,s=n.length-1;r<n.length;s=r++){const[a,o]=n[s],[l,c]=n[r];c>t!=o>t&&e<(a-l)*(t-c)/(o-c)+l&&i++}return 1&i}(e.x,e.y,t)))}},n_=["view","item","group","xy","x","y"],i_="this.",r_={},s_={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${(0,r.r$)(em+e)}]`,functions:function(e){const t=Re(e);n_.forEach((e=>t[e]="event.vega."+e));for(const e in t_)t[e]=i_+e;return(0,r.X$)(t,function(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=im,n._range=im,n._scale=im;const i=t=>"_["+(t.type===s?(0,r.r$)(Qp+t.value):(0,r.r$)(Qp)+"+"+e(t))+"]";return{_bandwidth:e=>`this.__bandwidth(${i(e[0])})`,_range:e=>`${i(e[0])}.range()`,_scale:t=>`${i(t[0])}(${e(t[1])})`}}(e,t_,r_)),t},constants:Pe,visitors:r_},a_=function(e){const t=(e=e||{}).allowed?(0,r.M1)(e.allowed):{},n=e.forbidden?(0,r.M1)(e.forbidden):{},i=e.constants||Pe,s=(e.functions||Re)(d),a=e.globalvar,o=e.fieldvar,l=(0,r.Tn)(a)?a:e=>`${a}["${e}"]`;let c={},u={},h=0;function d(e){if((0,r.Kg)(e))return e;const t=f[e.type];return null==t&&(0,r.z3)("Unsupported type: "+e.type),t(e)}const f={Literal:e=>e.raw,Identifier:e=>{const s=e.name;return h>0?s:(0,r.mQ)(n,s)?(0,r.z3)("Illegal identifier: "+s):(0,r.mQ)(i,s)?i[s]:(0,r.mQ)(t,s)?s:(c[s]=1,l(s))},MemberExpression:e=>{const t=!e.computed,n=d(e.object);t&&(h+=1);const i=d(e.property);return n===o&&(u[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(i)]=1),t&&(h-=1),n+(t?"."+i:"["+i+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&(0,r.z3)("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,i=(0,r.mQ)(s,t)&&s[t];return i||(0,r.z3)("Unrecognized function: "+t),(0,r.Tn)(i)?i(n):i+"("+n.map(d).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(d).join(",")+"]",BinaryExpression:e=>"("+d(e.left)+" "+e.operator+" "+d(e.right)+")",UnaryExpression:e=>"("+e.operator+d(e.argument)+")",ConditionalExpression:e=>"("+d(e.test)+"?"+d(e.consequent)+":"+d(e.alternate)+")",LogicalExpression:e=>"("+d(e.left)+e.operator+d(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(d).join(",")+"}",Property:e=>{h+=1;const t=d(e.key);return h-=1,t+":"+d(e.value)}};function p(e){const t={code:d(e),globals:Object.keys(c),fields:Object.keys(u)};return c={},u={},t}return p.functions=s,p.constants=i,p}(s_);function o_(e,t,n){return 1===arguments.length?t_[e]:(t_[e]=t,n&&(r_[e]=n),a_&&(a_.functions[e]=i_+e),this)}function l_(e,t){const n={};let i;try{i=function(e){u=0,h=(c=e).length,d=null,ce();const t=Oe();if(d.type!==p)throw new Error("Unexpect token after expression.");return t}(e=(0,r.Kg)(e)?e:(0,r.r$)(e)+"")}catch(t){(0,r.z3)("Expression parse error: "+e)}i.visit((e=>{if(e.type!==a)return;const i=e.callee.name,r=s_.visitors[i];r&&r(i,e.arguments,t,n)}));const s=a_(i);return s.globals.forEach((e=>{const i=em+e;!(0,r.mQ)(n,i)&&t.getSignal(e)&&(n[i]=t.signalRef(e))})),{$expr:(0,r.X$)({code:s.code},t.options.ast?{ast:i}:null),$fields:s.fields,$params:n}}o_("bandwidth",Ym,im),o_("copy",Fm,im),o_("domain",Nm,im),o_("range",Hm,im),o_("invert",Im,im),o_("scale",jm,im),o_("gradient",Um,im),o_("geoArea",om,im),o_("geoBounds",lm,im),o_("geoCentroid",cm,im),o_("geoShape",Wm,im),o_("geoScale",um,im),o_("indata",Bp,nm),o_("data",zp,tm),o_("treePath",Xm,tm),o_("treeAncestors",$m,tm),o_("vlSelectionTest",(function(e,t,n){for(var i,r,s,a,o,l=this.context.data[e],c=l?l.values.value:[],u=l?l[xp]&&l[xp].value:void 0,h=n===mp,d=c.length,f=0;f<d;++f)if(i=c[f],u&&h){if(-1===(s=(r=r||{})[a=i.unit]||0))continue;if(o=Mp(t,i),r[a]=o?-1:++s,o&&1===u.size)return!0;if(!o&&s===u.get(a).count)return!1}else if(h^(o=Mp(t,i)))return o;return d&&h}),kp),o_("vlSelectionIdTest",(function(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],s=i?i[xp]&&i[xp].value:void 0,a=n===mp,o=bp(t),l=Sp(r,o);if(l===r.length)return!1;if(bp(r[l])!==o)return!1;if(s&&a){if(1===s.size)return!0;if(Lp(r,o)-l<s.size)return!1}return!0}),kp),o_("vlSelectionResolve",(function(e,t,n,i){for(var s,a,o,l,c,u,h,d,f,p,m,_,g=this.context.data[e],y=g?g.values.value:[],v={},b={},x={},M=y.length,w=0;w<M;++w)if(l=(s=y[w]).unit,a=s.fields,o=s.values,a&&o){for(m=0,_=a.length;m<_;++m)c=a[m],d=(h=v[c.field]||(v[c.field]={}))[l]||(h[l]=[]),x[c.field]=f=c.type.charAt(0),p=Tp[`${f}_union`],h[l]=p(d,(0,r.YO)(o[m]));n&&(d=b[l]||(b[l]=[])).push((0,r.YO)(o).reduce(((e,t,n)=>(e[a[n].field]=t,e)),{}))}else c=vp,u=bp(s),(d=(h=v[c]||(v[c]={}))[l]||(h[l]=[])).push(u),n&&(d=b[l]||(b[l]=[])).push({[vp]:u});return t=t||_p,v[vp]?v[vp]=Tp[`${vp}_${t}`](...Object.values(v[vp])):Object.keys(v).forEach((e=>{v[e]=Object.keys(v[e]).map((t=>v[e][t])).reduce(((n,i)=>void 0===n?i:Tp[`${x[e]}_${t}`](n,i)))})),y=Object.keys(b),n&&y.length&&(v[i?"vlPoint":"vlMulti"]=t===_p?{[gp]:y.reduce(((e,t)=>(e.push(...b[t]),e)),[])}:{[yp]:y.map((e=>({[gp]:b[e]})))}),v}),kp),o_("vlSelectionTuples",(function(e,t){return e.map((e=>(0,r.X$)(t.fields?{values:t.fields.map((t=>pp(t)(e.datum)))}:{[vp]:bp(e.datum)},t)))}))},6865:(e,t,n)=>{"use strict";n.d(t,{vH:()=>W,d_:()=>G,Al:()=>q,R5:()=>J,eX:()=>X,Lp:()=>j,pz:()=>H,cs:()=>$,V8:()=>U,UX:()=>I,xo:()=>ne,f$:()=>le,TO:()=>he,TD:()=>pe,Uo:()=>Q,Kc:()=>ce,SN:()=>de,Yf:()=>me,VM:()=>re,BU:()=>se,HH:()=>ie});var i=n(2501);const r=new Date,s=new Date;function a(e,t,n,i){function o(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return o.floor=t=>(e(t=new Date(+t)),t),o.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),o.round=e=>{const t=o(e),n=o.ceil(e);return e-t<n-e?t:n},o.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),o.range=(n,i,r)=>{const s=[];if(n=o.ceil(n),r=null==r?1:Math.floor(r),!(n<i&&r>0))return s;let a;do{s.push(a=new Date(+n)),t(n,r),e(n)}while(a<n&&n<i);return s},o.filter=n=>a((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})),n&&(o.count=(t,i)=>(r.setTime(+t),s.setTime(+i),e(r),e(s),Math.floor(n(r,s))),o.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?o.filter(i?t=>i(t)%e==0:t=>o.count(0,t)%e==0):o:null)),o}const o=1e3,l=6e4,c=36e5,u=864e5,h=6048e5,d=a((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*l)/u),(e=>e.getDate()-1)),f=(d.range,a((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/u),(e=>e.getUTCDate()-1)));function p(e){return a((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*l)/h))}f.range,a((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/u),(e=>Math.floor(e/u))).range;const m=p(0),_=p(1),g=p(2),y=p(3),v=p(4),b=p(5),x=p(6);function M(e){return a((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/h))}m.range,_.range,g.range,y.range,v.range,b.range,x.range;const w=M(0),S=M(1),L=M(2),T=M(3),k=M(4),A=M(5),E=M(6),C=(w.range,S.range,L.range,T.range,k.range,A.range,E.range,a((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));C.every=e=>isFinite(e=Math.floor(e))&&e>0?a((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,C.range;const D=a((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));D.every=e=>isFinite(e=Math.floor(e))&&e>0?a((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,D.range;const O=a((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth())),P=(O.range,a((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),R=(P.range,a((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*o-e.getMinutes()*l)}),((e,t)=>{e.setTime(+e+t*c)}),((e,t)=>(t-e)/c),(e=>e.getHours()))),z=(R.range,a((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*c)}),((e,t)=>(t-e)/c),(e=>e.getUTCHours()))),B=(z.range,a((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*o)}),((e,t)=>{e.setTime(+e+t*l)}),((e,t)=>(t-e)/l),(e=>e.getMinutes()))),Y=(B.range,a((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*l)}),((e,t)=>(t-e)/l),(e=>e.getUTCMinutes()))),F=(Y.range,a((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*o)}),((e,t)=>(t-e)/o),(e=>e.getUTCSeconds()))),N=(F.range,a((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e)));N.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):N:null),N.range;const I="year",H="quarter",j="month",U="week",W="date",G="day",V="dayofyear",q="hours",X="minutes",$="seconds",J="milliseconds",K=[I,H,j,U,W,G,V,q,X,$,J].reduce(((e,t,n)=>(e[t]=1+n,e)),{}),Z={[I]:"%Y ",[H]:"Q%q ",[j]:"%b ",[W]:"%d ",[U]:"W%U ",[G]:"%a ",[V]:"%j ",[q]:"%H:00",[X]:"00:%M",[$]:":%S",[J]:".%L",[`${I}-${j}`]:"%Y-%m ",[`${I}-${j}-${W}`]:"%Y-%m-%d ",[`${q}-${X}`]:"%H:%M"};function Q(e,t){const n=(0,i.X$)({},Z,t),r=function(e){const t=(0,i.YO)(e).slice(),n={};return t.length||(0,i.z3)("Missing time unit."),t.forEach((e=>{(0,i.mQ)(K,e)?n[e]=1:(0,i.z3)(`Invalid time unit: ${e}.`)})),(n[U]||n[G]?1:0)+(n[H]||n[j]||n[W]?1:0)+(n[V]?1:0)>1&&(0,i.z3)(`Incompatible time units: ${e}`),t.sort(((e,t)=>K[e]-K[t])),t}(e),s=r.length;let a,o,l="",c=0;for(c=0;c<s;)for(a=r.length;a>c;--a)if(o=r.slice(c,a).join("-"),null!=n[o]){l+=n[o],c=a;break}return l.trim()}const ee=new Date;function te(e){return ee.setFullYear(e),ee.setMonth(0),ee.setDate(1),ee.setHours(0,0,0,0),ee}function ne(e){return function(e){return d.count(te(e.getFullYear())-1,e)}(new Date(e))}function ie(e){return function(e){return m.count(te(e.getFullYear())-1,e)}(new Date(e))}function re(e){return function(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return f.count(t-1,e)}(new Date(e))}function se(e){return function(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return w.count(t-1,e)}(new Date(e))}const ae={[I]:C,[H]:O.every(3),[j]:O,[U]:m,[W]:d,[G]:d,[V]:d,[q]:R,[X]:B,[$]:F,[J]:N},oe={[I]:D,[H]:P.every(3),[j]:P,[U]:w,[W]:f,[G]:f,[V]:f,[q]:z,[X]:Y,[$]:F,[J]:N};function le(e){return ae[e]}function ce(e){return oe[e]}function ue(e,t,n){return e?e.offset(t,n):void 0}function he(e,t,n){return ue(le(e),t,n)}function de(e,t,n){return ue(ce(e),t,n)}function fe(e,t,n,i){return e?e.range(t,n,i):void 0}function pe(e,t,n,i){return fe(le(e),t,n,i)}function me(e,t,n,i){return fe(ce(e),t,n,i)}[I,j,W,q,X,$,J].slice(0,-1).slice(0,-1).slice(0,-1).slice(0,-1)},2501:(e,t,n)=>{"use strict";function i(e,t,n){return e.fields=t||[],e.fname=n,e}function r(e){return 1===e.length?s(e[0]):a(e)}n.d(t,{$D:()=>p,$G:()=>F,$P:()=>Q,B:()=>J,B2:()=>Y,BS:()=>H,Cc:()=>re,D_:()=>u,EV:()=>ae,Et:()=>te,G4:()=>he,Gv:()=>b,KH:()=>C,Kg:()=>ie,Lm:()=>Z,Ln:()=>ce,M1:()=>me,PK:()=>K,Ro:()=>M,SW:()=>B,Tn:()=>j,VC:()=>E,X$:()=>G,Xx:()=>V,YO:()=>I,ZZ:()=>l,ay:()=>fe,bX:()=>$,co:()=>D,cy:()=>v,dI:()=>pe,dY:()=>U,eV:()=>le,gd:()=>ne,id:()=>c,lL:()=>R,mQ:()=>X,oV:()=>z,r$:()=>ue,rt:()=>ge,se:()=>x,sg:()=>W,vF:()=>y,vN:()=>h,vu:()=>N,xZ:()=>ee,xv:()=>_e,z3:()=>o,zy:()=>O});const s=e=>function(t){return t[e]},a=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function o(e){throw Error(e)}function l(e,t,n){const s=function(e){const t=[],n=e.length;let i,r,s,a=null,l=0,c="";function u(){t.push(c+e.substring(i,r)),c="",i=r+1}for(e+="",i=r=0;r<n;++r)if(s=e[r],"\\"===s)c+=e.substring(i,r++),i=r;else if(s===a)u(),a=null,l=-1;else{if(a)continue;i===l&&'"'===s||i===l&&"'"===s?(i=r+1,a=s):"."!==s||l?"["===s?(r>i&&u(),l=i=r+1):"]"===s&&(l||o("Access path missing open bracket: "+e),l>0&&u(),l=0,i=r+1):r>i?u():i=r+1}return l&&o("Access path missing closing bracket: "+e),a&&o("Access path missing closing quote: "+e),r>i&&(r++,u()),t}(e);return e=1===s.length?s[0]:e,i((n&&n.get||r)(s),[e],t||e)}const c=l("id"),u=i((e=>e),[],"identity"),h=(i((()=>0),[],"zero"),i((()=>1),[],"one"),i((()=>!0),[],"true"));function d(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}i((()=>!1),[],"false");const f=0,p=1,m=2,_=3,g=4;function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,i=e||f;return{level(e){return arguments.length?(i=+e,this):i},error(){return i>=p&&n(t||"error","ERROR",arguments),this},warn(){return i>=m&&n(t||"warn","WARN",arguments),this},info(){return i>=_&&n(t||"log","INFO",arguments),this},debug(){return i>=g&&n(t||"log","DEBUG",arguments),this}}}var v=Array.isArray;function b(e){return e===Object(e)}function x(e){return e[e.length-1]}function M(e){return null==e||""===e?null:+e}const w=e=>t=>e*Math.exp(t),S=e=>t=>Math.log(e*t),L=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),T=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,k=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function A(e,t,n,i){const r=n(e[0]),s=n(x(e)),a=(s-r)*t;return[i(r-a),i(s-a)]}function E(e,t){return A(e,t,M,u)}function C(e,t){var n=Math.sign(e[0]);return A(e,t,S(n),w(n))}function D(e,t,n){return A(e,t,k(n),k(1/n))}function O(e,t,n){return A(e,t,L(n),T(n))}function P(e,t,n,i,r){const s=i(e[0]),a=i(x(e)),o=null!=t?i(t):(s+a)/2;return[r(o+(s-o)*n),r(o+(a-o)*n)]}function R(e,t,n){return P(e,t,n,M,u)}function z(e,t,n){const i=Math.sign(e[0]);return P(e,t,n,S(i),w(i))}function B(e,t,n,i){return P(e,t,n,k(i),k(1/i))}function Y(e,t,n,i){return P(e,t,n,L(i),T(i))}function F(e){return 1+~~(new Date(e).getMonth()/3)}function N(e){return 1+~~(new Date(e).getUTCMonth()/3)}function I(e){return null!=e?v(e)?e:[e]:[]}function H(e,t,n){let i,r=e[0],s=e[1];return s<r&&(i=s,s=r,r=i),i=s-r,i>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-i),r+i]}function j(e){return"function"==typeof e}function U(e){return j(e)?e:()=>e}function W(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout((()=>(t(i),n=null)),e)}}function G(e){for(let t,n,i=1,r=arguments.length;i<r;++i)for(n in t=arguments[i],t)e[n]=t[n];return e}function V(e,t){let n,i,r,s,a=0;if(e&&(n=e.length))if(null==t){for(i=e[a];a<n&&(null==i||i!=i);i=e[++a]);for(r=s=i;a<n;++a)i=e[a],null!=i&&(i<r&&(r=i),i>s&&(s=i))}else{for(i=t(e[a]);a<n&&(null==i||i!=i);i=t(e[++a]));for(r=s=i;a<n;++a)i=t(e[a]),null!=i&&(i<r&&(r=i),i>s&&(s=i))}return[r,s]}const q=Object.prototype.hasOwnProperty;function X(e,t){return q.call(e,t)}function $(e,t,n,i,r,s){if(!n&&0!==n)return s;const a=+n;let o,l=e[0],c=x(e);c<l&&(o=l,l=c,c=o),o=Math.abs(t-l);const u=Math.abs(c-t);return o<u&&o<=a?i:u<=a?r:s}function J(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),G(i,n)}function K(e,t,n,i){let r,s=t[0],a=t[t.length-1];return s>a&&(r=s,s=a,a=r),i=void 0===i||i,((n=void 0===n||n)?s<=e:s<e)&&(i?e<=a:e<a)}function Z(e){return"boolean"==typeof e}function Q(e){return"[object Date]"===Object.prototype.toString.call(e)}function ee(e){return e&&j(e[Symbol.iterator])}function te(e){return"number"==typeof e}function ne(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function ie(e){return"string"==typeof e}function re(e,t){const n=e[0],i=x(e),r=+t;return r?1===r?i:n+r*(i-n):n}const se=1e4;function ae(e){let t,n,i;e=+e||se;const r=()=>{t={},n={},i=0},s=(r,s)=>(++i>e&&(n=t,t={},i=1),t[r]=s);return r(),{clear:r,has:e=>X(t,e)||X(n,e),get:e=>X(t,e)?t[e]:X(n,e)?s(e,n[e]):void 0,set:(e,n)=>X(t,e)?t[e]=n:s(e,n)}}function oe(e,t){let n="";for(;--t>=0;)n+=e;return n}function le(e,t,n,i){const r=n||" ",s=e+"",a=t-s.length;return a<=0?s:"left"===i?oe(r,a)+s:"center"===i?oe(r,~~(a/2))+s+oe(r,Math.ceil(a/2)):s+oe(r,a)}function ce(e){return e&&x(e)-e[0]||0}function ue(e){return v(e)?"["+e.map(ue)+"]":b(e)||ie(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function he(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const de=e=>te(e)||Q(e)?e:Date.parse(e);function fe(e,t){return t=t||de,null==e||""===e?null:t(e)}function pe(e){return null==e||""===e?null:e+""}function me(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function _e(e,t,n,i){const r=null!=i?i:"",s=e+"",a=s.length,o=Math.max(0,t-r.length);return a<=t?s:"left"===n?r+s.slice(a-o):"center"===n?s.slice(0,Math.ceil(o/2))+r+s.slice(a-~~(o/2)):s.slice(0,o)+r}function ge(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const i=t(e[r]);i&&n(i,r,e)}}else e.forEach(n)}},3767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var i=n(5072),r=n.n(i),s=n(7825),a=n.n(s),o=n(7659),l=n.n(o),c=n(5056),u=n.n(c),h=n(540),d=n.n(h),f=n(1113),p=n.n(f),m=n(5032),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=l().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=d(),r()(m.A,_);const g=m.A&&m.A.locals?m.A.locals:void 0},3179:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var i=n(5072),r=n.n(i),s=n(7825),a=n.n(s),o=n(7659),l=n.n(o),c=n(5056),u=n.n(c),h=n(540),d=n.n(h),f=n(1113),p=n.n(f),m=n(838),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=l().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=d(),r()(m.A,_);const g=m.A&&m.A.locals?m.A.locals:void 0},4012:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var i=n(5072),r=n.n(i),s=n(7825),a=n.n(s),o=n(7659),l=n.n(o),c=n(5056),u=n.n(c),h=n(540),d=n.n(h),f=n(1113),p=n.n(f),m=n(6379),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=l().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=d(),r()(m.A,_);const g=m.A&&m.A.locals?m.A.locals:void 0},3853:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var i=n(5072),r=n.n(i),s=n(7825),a=n.n(s),o=n(7659),l=n.n(o),c=n(5056),u=n.n(c),h=n(540),d=n.n(h),f=n(1113),p=n.n(f),m=n(2624),_={};_.styleTagTransform=p(),_.setAttributes=u(),_.insert=l().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=d(),r()(m.A,_);const g=m.A&&m.A.locals?m.A.locals:void 0},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},a=[],o=0;o<e.length;o++){var l=e[o],c=i.base?l[0]+i.base:l[0],u=s[c]||0,h="".concat(c," ").concat(u);s[c]=u+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=r(f,i);i.byIndex=o,t.splice(o,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var o=n(s[a]);t[o].references--}for(var l=i(e,r),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},7659:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlRendererView=t.HtmlRendererModel=t.ImageRendererView=t.ImageRendererModel=t.HyperlinkRendererView=t.HyperlinkRendererModel=t.BarRendererView=t.BarRendererModel=t.TextRendererView=t.TextRendererModel=t.CellRendererView=t.CellRendererModel=void 0;const i=n(3430),r=n(7190),s=n(9952),a=n(2055),o=n(4057),l=n(5291),c=n(9915),u=n(3291),h=n(9496);class d extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:d.model_name,_model_module:d.model_module,_model_module_version:d.model_module_version,_view_name:d.view_name,_view_module:d.view_module,_view_module_version:d.view_module_version})}}t.CellRendererModel=d,d.model_name="CellRendererModel",d.model_module=o.MODULE_NAME,d.model_module_version=o.MODULE_VERSION,d.view_name="CellRendererView",d.view_module=o.MODULE_NAME,d.view_module_version=o.MODULE_VERSION;class f extends a.WidgetView{constructor(){super(...arguments),this.processors={}}async render(){await this.initializeRenderer(),this.updateRenderer(),this.on("renderer-needs-update",this.updateRenderer.bind(this))}async onThemeChanged(){return await this.initializeRenderer(),this.updateRenderer()}async initializeRenderer(){const e={},t=this.model.get_attrs().map((e=>e.name));this.model.on_some_change(t,this._on_some_processors_change,this);for(const n of t)e[n]=this.updateProcessor(n);this.processors=await a.resolvePromisesDict(e)}_on_some_processors_change(e){const t={};for(const n in e.changed)t[n]=this.updateProcessor(n);a.resolvePromisesDict(t).then((e=>{this.processors=Object.assign(Object.assign({},this.processors),e),this.trigger("renderer-needs-update")}))}updateRenderer(){const e={};for(const t of this.model.get_attrs())t.phosphorName&&(e[t.phosphorName]=e=>this.process(t.name,e,t.defaultValue));this.renderer=this.createRenderer(e),this.trigger("renderer-changed")}updateProcessor(e){const t=this.model.get(e);return h.Scalar.isScalar(t)?t:(this.listenTo(t,"change",(()=>{this.trigger("renderer-needs-update")})),this.create_child_view(t))}process(e,t,n){const i=this.processors[e];return h.Scalar.isScalar(i)?"font"===e&&"string"==typeof i&&("number"==typeof t.value&&!Number.isFinite(t.value)||t.value instanceof Date&&Number.isNaN(t.value.getTime()))?`italic ${i}`:i:i instanceof c.VegaExprView?i.process(t,n):"date"==i.model.type||"date_color_linear"==i.model.type?i.scale(new Date(t.value)):i.scale(t.value)}}t.CellRendererView=f;class p extends d{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:p.model_name,_view_name:p.view_name,font:"12px sans-serif",text_color:null,text_wrap:!1,text_elide_direction:"right",text_value:null,background_color:null,vertical_alignment:"center",horizontal_alignment:"left",format:null,format_type:"number",missing:""})}get_attrs(){return[{name:"font",phosphorName:"font",defaultValue:"12px sans-serif"},{name:"text_wrap",phosphorName:"wrapText",defaultValue:!1},{name:"text_elide_direction",phosphorName:"elideDirection",defaultValue:"right"},{name:"text_color",phosphorName:"textColor",defaultValue:h.Theme.getFontColor()},{name:"text_value",phosphorName:null,defaultValue:null},{name:"background_color",phosphorName:"backgroundColor",defaultValue:h.Theme.getBackgroundColor()},{name:"vertical_alignment",phosphorName:"verticalAlignment",defaultValue:"center"},{name:"horizontal_alignment",phosphorName:"horizontalAlignment",defaultValue:"left"},{name:"format",phosphorName:null,defaultValue:null}]}}t.TextRendererModel=p,p.serializers=Object.assign(Object.assign({},d.serializers),{font:{deserialize:a.unpack_models},text_color:{deserialize:a.unpack_models},text_wrap:{deserialize:a.unpack_models},text_elide_direction:{deserialize:a.unpack_models},text_value:{deserialize:a.unpack_models},background_color:{deserialize:a.unpack_models},vertical_alignment:{deserialize:a.unpack_models},horizontal_alignment:{deserialize:a.unpack_models},format:{deserialize:a.unpack_models}}),p.model_name="TextRendererModel",p.view_name="TextRendererView";class m extends f{render(){return super.render().then((()=>{this.model.on_some_change(["missing","format_type"],(()=>{this.trigger("renderer-needs-update")}),this)}))}createRenderer(e){return new s.TextRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}getFormatter(e={}){return e=>{let t;if(null===e.value)t=this.model.get("missing");else{const n=this.process("format",e,null);t=null===n?String(e.value):"time"==this.model.get("format_type")?String(r.timeFormat(n)(new Date(e.value))):String(i.format(n)(e.value))}return this.process("text_value",e,t)||t}}}t.TextRendererView=m;class _ extends p{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:_.model_name,_view_name:_.view_name,bar_color:"#4682b4",bar_value:0,orientation:"horizontal",bar_vertical_alignment:"bottom",bar_horizontal_alignment:"left",show_text:!0})}get_attrs(){return super.get_attrs().concat([{name:"bar_color",phosphorName:"barColor",defaultValue:"#4682b4"},{name:"bar_value",phosphorName:"barValue",defaultValue:0},{name:"orientation",phosphorName:"orientation",defaultValue:"horizontal"},{name:"bar_vertical_alignment",phosphorName:"barVerticalAlignment",defaultValue:"bottom"},{name:"bar_horizontal_alignment",phosphorName:"barHorizontalAlignment",defaultValue:"left"},{name:"show_text",phosphorName:"showText",defaultValue:!0}])}}t.BarRendererModel=_,_.serializers=Object.assign(Object.assign({},p.serializers),{bar_color:{deserialize:a.unpack_models},bar_value:{deserialize:a.unpack_models},orientation:{deserialize:a.unpack_models},bar_vertical_alignment:{deserialize:a.unpack_models},bar_horizontal_alignment:{deserialize:a.unpack_models},show_text:{deserialize:a.unpack_models}}),_.model_name="BarRendererModel",_.view_name="BarRendererView",t.BarRendererView=class extends m{createRenderer(e){return new l.BarRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}};class g extends p{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:_.model_name,_view_name:_.view_name,url:{},url_name:{}})}get_attrs(){return super.get_attrs().concat([{name:"url",phosphorName:"url",defaultValue:null},{name:"url_name",phosphorName:"urlName",defaultValue:null}])}}t.HyperlinkRendererModel=g,g.serializers=Object.assign(Object.assign({},p.serializers),{url:{deserialize:a.unpack_models},url_name:{deserialize:a.unpack_models}}),g.model_name="HyperlinkRendererModel",g.view_name="HyperlinkRendererView",t.HyperlinkRendererView=class extends m{createRenderer(e){return new s.HyperlinkRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}};class y extends d{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:y.model_name,_view_name:y.view_name,background_color:{},placeholder:{},text_color:{},width:{},height:{}})}get_attrs(){return[{name:"background_color",phosphorName:"backgroundColor",defaultValue:""},{name:"placeholder",phosphorName:"placeholder",defaultValue:"..."},{name:"text_color",phosphorName:"textColor",defaultValue:"#000000"},{name:"width",phosphorName:"width",defaultValue:""},{name:"height",phosphorName:"height",defaultValue:"100%"}]}}t.ImageRendererModel=y,y.serializers=Object.assign(Object.assign({},p.serializers),{background_color:{deserialize:a.unpack_models},placeholder:{deserialize:a.unpack_models},text_color:{deserialize:a.unpack_models},width:{deserialize:a.unpack_models},height:{deserialize:a.unpack_models}}),y.model_name="ImageRendererModel",y.view_name="ImageRendererView",t.ImageRendererView=class extends f{createRenderer(e){return s.ImageRenderer?new s.ImageRenderer(Object.assign({},e)):new s.TextRenderer({format:e=>"ImageRenderer not available. Check that you are using JupyterLab>=4.1.",wrapText:!0})}};class v extends d{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:v.model_name,_view_name:v.view_name,font:"12px sans-serif",placeholder:"...",text_color:null,background_color:null,vertical_alignment:"center",horizontal_alignment:"left"})}get_attrs(){return[{name:"font",phosphorName:"font",defaultValue:"12px sans-serif"},{name:"placeholder",phosphorName:"placeholder",defaultValue:"..."},{name:"text_color",phosphorName:"textColor",defaultValue:h.Theme.getFontColor()},{name:"background_color",phosphorName:"backgroundColor",defaultValue:h.Theme.getBackgroundColor()},{name:"vertical_alignment",phosphorName:"verticalAlignment",defaultValue:"center"},{name:"horizontal_alignment",phosphorName:"horizontalAlignment",defaultValue:"left"}]}}t.HtmlRendererModel=v,v.serializers=Object.assign(Object.assign({},d.serializers),{font:{deserialize:a.unpack_models},placeholder:{deserialize:a.unpack_models},text_color:{deserialize:a.unpack_models},background_color:{deserialize:a.unpack_models},vertical_alignment:{deserialize:a.unpack_models},horizontal_alignment:{deserialize:a.unpack_models}}),v.model_name="HtmlRendererModel",v.view_name="HtmlRendererView",t.HtmlRendererView=class extends f{createRenderer(e){let t;return s.AsyncCellRenderer?(t=new u.exportedClass(Object.assign({},e)),t.imageLoaded.connect((()=>{setTimeout((()=>{this.trigger("renderer-needs-update")}),0)}))):t=new s.TextRenderer({format:e=>"AsyncCellRenderer not available. Check that you are using JupyterLab>=4.1.",wrapText:!0}),t}}},5291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarRenderer=void 0;const i=n(9952);class r extends i.TextRenderer{constructor(e={}){super(e),this.barColor=e.barColor||"#4682b4",this.barValue=e.barValue||0,this.orientation=e.orientation||"horizontal",this.barVerticalAlignment=e.barVerticalAlignment||"bottom",this.barHorizontalAlignment=e.barHorizontalAlignment||"left",this.showText=e.showText||!0}paint(e,t){const n=i.CellRenderer.resolveOption(this.showText,t);this.drawBackground(e,t),this.drawBar(e,t),n&&this.drawText(e,t)}prepare(e,t){const{font:n,textColor:i,barColor:r,backgroundColor:s,horizontalAlignment:a}=this;n&&"string"==typeof n&&(e.font=n),s&&"string"==typeof s?e.fillStyle=s:r&&"string"==typeof r?e.fillStyle=r:i&&"string"==typeof i&&(e.fillStyle=i),e.textAlign="string"==typeof a?a:"left",e.textBaseline="bottom"}drawBar(e,t){const n=i.CellRenderer.resolveOption(this.barColor,t);let r=i.CellRenderer.resolveOption(this.barValue,t);const s=i.CellRenderer.resolveOption(this.barVerticalAlignment,t),a=i.CellRenderer.resolveOption(this.barHorizontalAlignment,t),o=i.CellRenderer.resolveOption(this.orientation,t);if(!n)return;r>1&&(r=1),r<0&&(r=0);let l=t.x,c=t.y;if(e.fillStyle=n,"horizontal"===o){const n=r*t.width;"center"===a&&(l+=(t.width-n)/2),"right"===a&&(l+=t.width-n),e.fillRect(l,c,n,t.height)}else{const n=r*t.height;"center"===s?c+=(t.height-n)/2:"bottom"===s&&(c+=t.height-n),e.fillRect(l,c,t.width,n)}}}t.BarRenderer=r},1474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize_data=t.deserialize_data_simple=t.unpack_raw_data=void 0;const i=n(2418),r=n(9488);function s(e){if(Array.isArray(e)){const t=[];return e.forEach(((e,n)=>{t.push(s(e))})),t}if(e instanceof Object&&"string"!=typeof e){const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t}return"$NaN$"===e?Number.NaN:"$Infinity$"===e?Number.POSITIVE_INFINITY:"$NegInfinity$"===e?Number.NEGATIVE_INFINITY:"$NaT$"===e?new Date("INVALID"):e}function a(e,t){const n={};if(Array.isArray(e.data)){if(0===e.data.length)return n;const t=s(e.data);for(const e of Object.keys(t[0])){const i=new Array(t.length);let r=0;for(const n of t)i[r++]=n[e];n[e]=i}return n}for(const r of Object.keys(e.data))if(n[r]=[],Array.isArray(e.data[r]))n[r]=e.data[r];else if("raw"==e.data[r].type)n[r]=s(e.data[r].value);else if(0!==e.data[r].value.length){let s=i.array_or_json_serializer.deserialize(e.data[r],t);if("date"===s.type){const e=s;s=[];for(let t=0;t<e.length;t++)s[t]=new Date(e[t]).toISOString()}n[r]=s}return n}t.unpack_raw_data=s,t.deserialize_data_simple=a,t.deserialize_data=function(e,t){const n=a(e,t);return new r.DataSource(n,e.fields,e.schema,!0)}},2992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UniqueValueStateManager=t.InteractiveFilterDialog=void 0;const i=n(8818),r=n(9952),s=n(8418),a=n(270),o=n(9952),l=n(4704),c=n(3975),u=n(8671),h=n(9496),d=n(9488);class f extends l.BoxPanel{constructor(e){super(),this._columnDType="number",this._region="column-header",this._mode="value",this._filterOperator="<",this.hasFilter=!1,this.userInteractedWithDialog=!1,this.addClass("ipydatagrid-filterMenu"),this.node.style.position="absolute",this._model=e.model,this._filterByConditionWidget=new l.Widget,this._filterByConditionWidget.addClass("ipydatagrid-filter-condition-select"),this._uniqueValueGrid=new r.DataGrid({headerVisibility:"none",stretchLastColumn:!0}),this._uniqueValueGrid.addClass("ipydatagrid-unique-value-grid"),this._uniqueValueStateManager=new _({grid:this._uniqueValueGrid});const t=new g({stateManager:this._uniqueValueStateManager,dialog:this});this._uniqueValueGrid.mouseHandler=t,this._titleWidget=new l.Widget,this._titleWidget.addClass("ipydatagrid-filter-title"),this._applyWidget=new l.Widget,this._applyWidget.addClass("ipydatagrid-filter-apply"),this._textInputWidget=new p,this._selectAllCheckbox=new m,this._connectToCheckbox(),this.addWidget(this._titleWidget),this.addWidget(this._textInputWidget),this.addWidget(this._selectAllCheckbox),this.addWidget(this._filterByConditionWidget),this.addWidget(this._uniqueValueGrid),this.addWidget(this._applyWidget)}get column(){return this._column}_connectToCheckbox(){this._selectAllCheckbox.checkChanged.connect(((e,t)=>{this.userInteractedWithDialog=!0,this.addRemoveAllUniqueValuesToState(t)}))}hasValidFilterValue(){return""!==this._filterValue&&void 0!==this._filterValue&&(!Array.isArray(this._filterValue)||""!==this._filterValue[0]&&void 0!==this._filterValue[0]&&""!==this._filterValue[1]&&void 0!==this._filterValue[1])}applyFilter(){if(!this.hasValidFilterValue)return;if(!this.hasFilter&&!this.userInteractedWithDialog&&"value"===this._mode)return void this.close();const e="condition"===this._mode?this._filterValue:this._uniqueValueStateManager.getValues(this.region,this._column),t={type:"filter",column:this._column,operator:this._filterOperator,value:e};this._model.addTransform(t),this.close()}updateDialog(){const e=this._model.transformMetadata(this._column);e&&e.filter?(this._filterOperator=e.filter.operator,this._filterValue=e.filter.value):(this._filterOperator="<",this._filterValue=void 0),"value"===this._mode&&(this._filterOperator="in"),this._render()}_render(){if("condition"===this._mode)this._applyWidget.node.style.minHeight="65px",this._selectAllCheckbox.setHidden(!0),this._uniqueValueGrid.setHidden(!0),this._textInputWidget.setHidden(!0),this._filterByConditionWidget.setHidden(!1),c.VirtualDOM.render([this.createOperatorList()],this._filterByConditionWidget.node),c.VirtualDOM.render([this.createTitleNode()],this._titleWidget.node),c.VirtualDOM.render(["between"===this._filterOperator?this.createDualValueNode():this.createSingleValueNode()],this._applyWidget.node);else{if("value"!==this._mode)throw"unreachable";this._applyWidget.node.style.minHeight="30px",this._selectAllCheckbox.setHidden(!1),this._uniqueValueGrid.setHidden(!1),this._textInputWidget.setHidden(!1),this._filterByConditionWidget.setHidden(!0),c.VirtualDOM.render([this.createTitleNode()],this._titleWidget.node),c.VirtualDOM.render([this.createTextInputDialog()],this._textInputWidget.node),c.VirtualDOM.render([this.createApplyButtonNode()],this._applyWidget.node),this._renderUniqueVals()}}_renderUniqueVals(){this._model.uniqueValues(this._region,this._column).then((e=>{const t=new d.DataSource({index:[...e.keys()],uniqueVals:e},[{index:null},{uniqueVals:null}],{fields:[{name:"index",type:"integer",rows:[]},{name:"uniqueVals",type:"number",rows:[]}],primaryKey:["index"],primaryKeyUuid:"index"});this._uniqueValueGrid.dataModel=new i.ViewBasedJSONModel({datasource:t});const n={type:"sort",column:"uniqueVals",columnIndex:this.model.getSchemaIndex(this._region,0),desc:!1};this._uniqueValueGrid.dataModel.addTransform(n)}))}async updateSelectAllCheckboxState(){if(!this.userInteractedWithDialog&&!this.hasFilter)return void(this._selectAllCheckbox.checked=!0);const e=await this._model.uniqueValues(this._region,this._column);let t=!0;for(const n of e)if(!this._uniqueValueStateManager.has(this._region,this._column,n)){t=!1;break}this._selectAllCheckbox.checked=t}open(e){this._column=e.column,this._columnDType=this._model.metadata(e.region,0,this._model.columnNameToIndex(this._column)).type,this._region=e.region,this._mode=e.mode,this.hasFilter=void 0!==this._model.getFilterTransform(this._column),this.userInteractedWithDialog=!1,this.updateSelectAllCheckboxState(),this._uniqueValueGrid.style={voidColor:h.Theme.getBackgroundColor(),backgroundColor:h.Theme.getBackgroundColor(),gridLineColor:h.Theme.getBackgroundColor(),headerGridLineColor:h.Theme.getBorderColor(1),selectionFillColor:h.Theme.getBrandColor(2,.4),selectionBorderColor:h.Theme.getBrandColor(1),headerSelectionFillColor:h.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:h.Theme.getBorderColor(1),cursorFillColor:h.Theme.getBrandColor(3,.4),cursorBorderColor:h.Theme.getBrandColor(1)},this._uniqueValueGrid.cellRenderers.update({body:new u.FilterValueRenderer({stateManager:this._uniqueValueStateManager,dialog:this,textColor:h.Theme.getFontColor(),backgroundColor:h.Theme.getBackgroundColor()})}),this.updateDialog();const t=window.pageXOffset,n=window.pageYOffset,i=document.documentElement.clientWidth,r=document.documentElement.clientHeight,s=r-(e.forceY?e.y:0),a=this.node,o=a.style;o.top="",o.left="",o.width="",o.height="",o.visibility="hidden",o.maxHeight=`${s}px`,l.Widget.attach(this,document.body);const{width:c,height:d}=a.getBoundingClientRect();!e.forceX&&e.x+c>t+i&&(e.x=t+i-c),!e.forceY&&e.y+d>n+r&&(e.y>n+r?e.y=n+r-d:e.y=e.y-d),o.top=`${Math.max(0,e.y)}px`,o.left=`${Math.max(0,e.x)}px`,o.visibility=""}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"keydown":this._evtKeyDown(e)}}_evtMouseDown(e){this.node.contains(e.target)||this.close()}_evtKeyDown(e){switch(e.stopPropagation(),e.keyCode){case 13:return void this.applyFilter();case 27:return void this.close()}}onBeforeAttach(e){document.addEventListener("mousedown",this,!0),document.addEventListener("keydown",this,!0)}onAfterDetach(e){document.removeEventListener("mousedown",this,!0),document.removeEventListener("keydown",this,!0)}createTextInputDialog(){return c.h.div({className:"ipydatagrid-text-input-filter"},c.h.input({type:"text",style:{marginRight:"5px",width:"200px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),oninput:e=>{const t=e.srcElement,n=this._uniqueValueGrid.dataModel;if(""===t.value)return n.clearTransforms(),this._textInputFilterValue=void 0,void this._selectAllCheckbox.setHidden(!1);this._textInputFilterValue=t.value;const i=this._textInputFilterValue,r={type:"filter",column:this._column,columnIndex:1,operator:"stringContains",value:i};this._selectAllCheckbox.setHidden(!0),n.clearTransforms(),n.addTransform(r)}}))}createTitleNode(){return c.h.div({className:"",style:{paddingLeft:"5px",color:"var(--ipydatagrid-filter-dlg-textcolor,black)"}},"condition"===this._mode?"Filter by condition:":"Filter by value:")}createSingleValueNode(){return c.h.div({className:"widget-text",style:{paddingLeft:"5px",minHeight:"60px"}},c.h.input({type:"text",style:{marginRight:"5px",width:"200px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)",visibility:"empty"===this._filterOperator||"notempty"===this._filterOperator||"value"===this._mode?"hidden":"visible"},key:String(Math.random()),oninput:e=>{const t=e.srcElement;this._filterValue="number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value},value:void 0===this._filterValue||Array.isArray(this._filterValue)?"":String(this._filterValue)}),c.h.div({className:"",style:{width:"202px",textAlign:"right",paddingTop:"5px"}},c.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",padding:"1px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply")))}createDualValueNode(){const e=this._filterValue;return c.h.div({className:"widget-text",style:{paddingLeft:"5px",color:"var(--ipydatagrid-filter-dlg-textcolor,black)"}},c.h.input({style:{marginRight:"5px",width:"75px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),type:"text",oninput:e=>{const t=e.srcElement;this._filterValue=["number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value,this._filterValue[1]]},value:void 0!==e[0]?String(e[0]):""}),"and ",c.h.input({style:{marginRight:"5px",width:"75px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),type:"text",oninput:e=>{const t=e.srcElement;this._filterValue=[this._filterValue[0],"number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value]},value:void 0!==e[1]?String(e[1]):""}),c.h.div({className:"",style:{width:"202px",textAlign:"right",paddingTop:"5px"}},c.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",padding:"1px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply")))}createLoadingMessageNodes(){return c.h.div({className:"p-Menu-itemLabel widget-text",style:{paddingLeft:"5px"}},"Loading unique values...")}async createUniqueValueNodes(){const e=(await this._model.uniqueValues(this._region,this._column)).map((e=>c.h.option({value:e},String(e))));return c.h.li({className:"p-Menu-item"},c.h.div({className:"widget-select widget-select-multiple",style:{width:"200px"}},c.h.select({multiple:"",value:"",style:{width:"200px",height:"200px",margin:"5px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},onchange:e=>{const t=e.srcElement,n=[];for(let e=0;e<t.options.length;e++)t.options[e].selected&&n.push("number"===this._columnDType||"integer"===this._columnDType?Number(t.options[e].value):t.options[e].value);this._filterValue=n}},e)))}createOperatorList(){let e;return e="number"===this._columnDType||"integer"===this._columnDType?this._createNumericalOperators():["date","time","datetime"].includes(this._columnDType)?this._createDateOperators():"boolean"===this._columnDType?this._createBooleanOperators():this._createCategoricalOperators(),c.h.div({className:"widget-dropdown",style:{paddingLeft:"5px"}},c.h.select({style:{width:"200px",fontSize:"12px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),onchange:e=>{const t=e.srcElement;this._filterOperator=t.value,"between"===t.value&&(this._filterValue=new Array(2)),this._render()},value:this._filterOperator},...e))}createApplyButtonNode(){return c.h.div({className:"",style:{paddingLeft:"5px",textAlign:"right",minHeight:"30px"}},c.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply"))}_createNumericalOperators(){const e=this._filterOperator;return[c.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),c.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:"),c.h.option({value:"",disabled:"disabled"},""),c.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Less than:"),c.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Greater than:"),c.h.option(Object.assign({value:"<="},"<="===e&&{selected:""}),"Less than or equal to:"),c.h.option(Object.assign({value:">="},">="===e&&{selected:""}),"Greater than or equal to:"),c.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"In between:"),c.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Is equal to:"),c.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Is not equal to:")]}_createDateOperators(){const e=this._filterOperator;return[c.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),c.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:"),c.h.option({value:"",disabled:"disabled"},""),c.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Date is before:"),c.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Date is after:"),c.h.option(Object.assign({value:"<="},"<="===e&&{selected:""}),"Date is on or before:"),c.h.option(Object.assign({value:">="},">="===e&&{selected:""}),"Date is on or after:"),c.h.option(Object.assign({value:"isOnSameDay"},"isOnSameDay"===e&&{selected:""}),"Date is exactly:"),c.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"Date is in between:"),c.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Timestamp is exactly equal to:"),c.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Timestamp is not exactly equal to:")]}_createBooleanOperators(){const e=this._filterOperator;return[c.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),c.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:")]}_createCategoricalOperators(){const e=this._filterOperator;return[c.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty"),c.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty"),c.h.option({value:"",disabled:"disabled"},""),c.h.option(Object.assign({value:"contains"},"contains"===e&&{selected:""}),"Contains"),c.h.option(Object.assign({value:"!contains"},"!contains"===e&&{selected:""}),"Does not contain"),c.h.option(Object.assign({value:"startswith"},"startswith"===e&&{selected:""}),"Starts with"),c.h.option(Object.assign({value:"endswith"},"endswith"===e&&{selected:""}),"Ends with"),c.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Is exactly"),c.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Is not exactly"),c.h.option({value:"",disabled:"disabled"},""),c.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Is before"),c.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Is after"),c.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"Is in between")]}async addRemoveAllUniqueValuesToState(e){const t=await this.model.uniqueValues(this._region,this._column);for(const n of t)e?this._uniqueValueStateManager.add(this._region,this._column,n):this._uniqueValueStateManager.remove(this._region,this._column,n)}get model(){return this._model}set model(e){this._model=e}get value(){return this._filterValue}get operator(){return this._filterOperator}get region(){return this._region}get columnDType(){return this._columnDType}}t.InteractiveFilterDialog=f;class p extends l.Widget{constructor(){super(),this.node.style.minHeight="16px",this.node.style.overflow="visible"}}class m extends l.Widget{constructor(){super(),this.toggleCheckMark=()=>{this._checked=!this._checked,this.renderCheckbox(),this._checkedChanged.emit(this._checked)},this._checked=!1,this._checkedChanged=new s.Signal(this),this.canvas=document.createElement("canvas"),this.node.style.minHeight="16px",this.node.style.overflow="visible",this.node.appendChild(this.canvas)}get checked(){return this._checked}set checked(e){this._checked=e,this.renderCheckbox()}get checkChanged(){return this._checkedChanged}addCheckMark(){const e=this.canvas.getContext("2d");e.lineWidth=1,e.beginPath(),e.strokeStyle="#000000",e.moveTo(11,13),e.lineTo(12,16),e.lineTo(16,10),e.lineWidth=2,e.stroke()}renderCheckbox(){const e=this.canvas.getContext("2d"),t=100;this.canvas.style.width=t+"px",this.canvas.style.height=t+"px";const n=window.devicePixelRatio;this.canvas.width=Math.floor(t*n),this.canvas.height=Math.floor(t*n),e.scale(n,n),e.lineWidth=1,e.fillStyle="#ffffff",e.fillRect(8,8,10,10),e.strokeStyle="black",e.strokeRect(8,8,10,10),e.font="12px sans-serif",e.fillStyle=h.Theme.getFontColor(0),e.fillText("(Select All)",30,17),this._checked&&this.addCheckMark()}onAfterAttach(){this.renderCheckbox(),this.canvas.addEventListener("click",this.toggleCheckMark,!0)}onAfterDetach(e){this.canvas.removeEventListener("click",this.toggleCheckMark,!0)}}class _{constructor(e){this._state={},this._grid=e.grid}has(e,t,n){const i=this.getKeyName(e,t);return this._state.hasOwnProperty(i)&&this._state[i].has(n)}getKeyName(e,t){return`${e}:${t}`}add(e,t,n){const i=this.getKeyName(e,t);this._state.hasOwnProperty(i)||(this._state[i]=new Set),this._state[i].add(n);const r=new y("all",0,0,0,0);a.MessageLoop.postMessage(this._grid.viewport,r)}remove(e,t,n){const i=this.getKeyName(e,t);this._state.hasOwnProperty(i)&&this._state[i].delete(n);const r=new y("all",0,0,0,0);a.MessageLoop.postMessage(this._grid.viewport,r)}getValues(e,t){const n=this.getKeyName(e,t);return this._state.hasOwnProperty(n)?Array.from(this._state[n]):[]}}t.UniqueValueStateManager=_;class g extends o.BasicMouseHandler{constructor(e){super(),this._uniqueValuesSelectionState=e.stateManager,this._filterDialog=e.dialog}onMouseDown(e,t){const n=e.hitTest(t.clientX,t.clientY);if("void"===n.region)return;const i=n.row,r=this._filterDialog.column,s=this._filterDialog.region,a=e.dataModel.data("body",i,0),o=()=>{this._uniqueValuesSelectionState.has(s,r,a)?this._uniqueValuesSelectionState.remove(s,r,a):this._uniqueValuesSelectionState.add(s,r,a),this._filterDialog.updateSelectAllCheckboxState()};this._filterDialog.hasFilter||this._filterDialog.userInteractedWithDialog?o():this._filterDialog.addRemoveAllUniqueValuesToState(!0).then((()=>{this._filterDialog.userInteractedWithDialog=!0,o()}))}}class y extends a.ConflatableMessage{constructor(e,t,n,i,r){super("paint-request"),this._region=e,this._r1=t,this._c1=n,this._r2=i,this._c2=r}get region(){return this._region}get r1(){return this._r1}get c1(){return this._c1}get r2(){return this._r2}get c2(){return this._c2}conflate(e){return"all"===this._region||("all"===e._region?(this._region="all",!0):this._region===e._region&&(this._r1=Math.min(this._r1,e._r1),this._c1=Math.min(this._c1,e._c1),this._r2=Math.max(this._r2,e._r2),this._c2=Math.max(this._c2,e._c2),!0))}}},553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatherGridContextMenu=t.GridContextMenu=void 0;const i=n(4704);class r{constructor(e){this._menu=new i.Menu({commands:e.commands}),this._menu.addClass("ipydatagrid-context-menu")}}t.GridContextMenu=r;class s extends r{open(e,t){this._menu.clearItems();const n={region:t.region,rowIndex:t.row,columnIndex:t.column,clientX:t.x,clientY:t.y};switch(t.region){case"column-header":this._menu.addItem({command:s.CommandID.SortAscending,args:n}),this._menu.addItem({command:s.CommandID.SortDescending,args:n}),this._menu.addItem({command:s.CommandID.SortClear,args:n}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:s.CommandID.OpenFilterByConditionDialog,args:n}),this._menu.addItem({command:s.CommandID.OpenFilterByValueDialog,args:n}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:s.CommandID.ClearSelection,args:n}),this._menu.addItem({command:s.CommandID.ClearThisFilter,args:n}),this._menu.addItem({command:s.CommandID.ClearFiltersInAllColumns,args:n}),this._menu.addItem({command:s.CommandID.CopyToClipboard,args:n});break;case"corner-header":this._menu.addItem({command:s.CommandID.SortAscending,args:n}),this._menu.addItem({command:s.CommandID.SortDescending,args:n}),this._menu.addItem({command:s.CommandID.SortClear,args:n}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:s.CommandID.OpenFilterByConditionDialog,args:n}),this._menu.addItem({command:s.CommandID.OpenFilterByValueDialog,args:n}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:s.CommandID.CopySelectionToClipboard,args:n}),this._menu.addItem({command:s.CommandID.SaveSelectionAsCsv,args:n}),this._menu.addItem({command:s.CommandID.SaveAllAsCsv,args:n}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:s.CommandID.ClearSelection,args:n}),this._menu.addItem({command:s.CommandID.ClearThisFilter,args:n}),this._menu.addItem({command:s.CommandID.ClearFiltersInAllColumns,args:n});break;case"body":this._menu.addItem({command:s.CommandID.RevertGrid,args:n});break;default:throw"unreachable"}this._menu.open(t.x,t.y);const r=document.body.firstElementChild;this._menu.node.parentElement==document.body&&r!=this._menu.node&&(i.Widget.detach(this._menu),i.Widget.attach(this._menu,document.body,r))}}t.FeatherGridContextMenu=s,function(e){let t;!function(e){e.SortAscending="sort:Asc",e.SortDescending="sort:Desc",e.SortClear="sort:Clear",e.OpenFilterByConditionDialog="filterCondition:openDialog",e.OpenFilterByValueDialog="filterValue:openDialog",e.RevertGrid="grid:reset",e.ClearThisFilter="filter:clearCurrentColumn",e.ClearFiltersInAllColumns="filter:clearAllColumns",e.CopyToClipboard="copyToClipboard",e.CopySelectionToClipboard="copySelectionToClipboard",e.SaveSelectionAsCsv="saveSelectionAsCsv",e.SaveAllAsCsv="saveAllAsCsv",e.ClearSelection="clearSelection"}(t=e.CommandID||(e.CommandID={}))}(s=t.FeatherGridContextMenu||(t.FeatherGridContextMenu={}))},7483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRenderer=void 0;const i=n(9952),r=n(9496);class s extends i.TextRenderer{constructor(e){super(e.textOptions),this._isLightTheme=e.isLightTheme,this._grid=e.grid}get model(){return this._grid.dataModel}drawText(e,t){const n=i.CellRenderer.resolveOption(this.font,t);if(!n)return;const a=i.CellRenderer.resolveOption(this.textColor,t);if(!a)return;let o=(0,this.format)(t);if(!o)return;const l=i.CellRenderer.resolveOption(this.verticalAlignment,t),c=i.CellRenderer.resolveOption(this.horizontalAlignment,t),u=i.CellRenderer.resolveOption(this.elideDirection,t),h=i.CellRenderer.resolveOption(this.wrapText,t),d=t.height-("center"===l?1:2);if(d<=0)return;const f=i.TextRenderer.measureFontHeight(n);let p,m,_;switch(l){case"top":m=t.y+2+f;break;case"center":m=t.y+t.height/2+f/2;break;case"bottom":m=t.y+t.height-2;break;default:throw"unreachable"}switch(c){case"left":p=t.x+8,_=t.width-14;break;case"center":p=t.x+t.width/2,_=t.width;break;case"right":p=t.x+t.width-8,_=t.width-14;break;default:throw"unreachable"}f>d&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=n,e.fillStyle=a,e.textAlign=c,e.textBaseline="bottom";let g=e.measureText(o).width;if(h&&g>_){e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip();const n=o.split(/\s(?=\b)/);let i=m,r=n.shift();if(0===n.length){let t=e.measureText(r).width;for(;t>_&&""!==r;)for(let n=r.length;n>0;n--){const s=r.substring(0,n);if(e.measureText(s).width<_||1===s.length){const a=r.substring(n,r.length);r=a,t=e.measureText(r).width,e.fillText(s,p,i),i+=f;break}}}else for(;0!==n.length;){const t=n.shift(),s=[r,t].join(" ");e.measureText(s).width>_?(e.fillText(r,p,i),i+=f,r=t):r=s}return void e.fillText(r,p,i)}const y="";if("right"===u)for(;g>_&&o.length>1;)o=o.length>4&&g>=2*_?o.substring(0,o.length/2+1)+y:o.substring(0,o.length-2)+y,g=e.measureText(o).width;else for(;g>_&&o.length>1;)o=o.length>4&&g>=2*_?y+o.substring(o.length/2):y+o.substring(2),g=e.measureText(o).width;if(e.fillText(o,p,m),"column-header"===t.region&&t.row!==this._grid.dataModel.rowCount("column-header")-1)return;const v=s.iconWidth+s.iconWidth+s.iconSpacing+2*s.buttonPadding;e.fillStyle=i.CellRenderer.resolveOption(this.backgroundColor,t),e.fillRect(t.x+t.width-v,t.y+t.height-v,v,v);const b=t.x+t.width-s.iconWidth-s.buttonPadding;if(this.drawFilterIcon(e,t),e.fillStyle=r.Theme.getBorderColor(1),e.fill(),this.model){const n=this.model.getSchemaIndex(t.region,t.column),i=this.model.currentView.dataset.columns[n],s=this.model.transformMetadata(i);s&&s.filter&&(e.fillStyle=r.Theme.getBrandColor(this._isLightTheme?8:6),e.fill()),s&&s.sort&&(s.sort.desc?this.drawSortArrow(e,t,b,!1):this.drawSortArrow(e,t,b,!0),e.fillStyle=r.Theme.getBrandColor(this._isLightTheme?7:5),e.fill())}}drawFilterIcon(e,t){const n=t.x+t.width-s.iconWidth-s.buttonPadding,i=s.iconWidth/2+1,r=s.iconWidth/2-1,a=t.height-s.iconHeight-1+t.y;e.beginPath(),e.moveTo(n,a),e.lineTo(n+s.iconWidth,a),e.lineTo(n+i,t.y+t.height-s.iconHeight+2),e.lineTo(n+i,t.y+t.height-1.5*s.buttonPadding),e.lineTo(n+r,t.y+t.height-2*s.buttonPadding),e.lineTo(n+r,t.y+t.height-s.iconHeight+2),e.closePath()}drawSortArrow(e,t,n,i){const r=s.iconWidth-2,a=n-s.iconSpacing,o=a-r/2+.5,l=a-r/2-.5,c=t.height+t.y-s.buttonPadding-s.iconHeight+4,u=a-r/2,h=t.height+t.y-s.iconHeight-1,d=t.height-8+t.y+s.buttonPadding;e.beginPath(),i?(e.moveTo(u,h),e.lineTo(a,c),e.lineTo(a,c+1),e.lineTo(o,c+1),e.lineTo(u+.5,d),e.lineTo(u-.5,d),e.lineTo(u-.5,c+1),e.lineTo(a-r,c+1),e.lineTo(a-r,c)):(e.moveTo(u,d),e.lineTo(a-r,c+4.5),e.lineTo(a-r,c+3.5),e.lineTo(l,c+3.5),e.lineTo(l,h),e.lineTo(u+.5,h),e.lineTo(u+.5,c+3.5),e.lineTo(a,c+3.5),e.lineTo(a,c+4.5)),e.closePath()}}t.HeaderRenderer=s,s.buttonSize=11,s.iconHeight=12,s.iconWidth=7,s.buttonPadding=3,s.iconSpacing=1.5},3291:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.exportedClass=void 0;const r=n(2006),s=n(9952),a=n(8418),o=n(9496);let l;t.exportedClass=l,s.AsyncCellRenderer&&(t.exportedClass=((i=class e extends s.AsyncCellRenderer{constructor(e={}){super(),this._imgLoaded=new a.Signal(this),this.font=e.font||"12px",this.placeholder=e.placeholder||"...",this.textColor=e.textColor||o.Theme.getFontColor(),this.backgroundColor=e.backgroundColor||o.Theme.getBackgroundColor(),this.verticalAlignment=e.verticalAlignment||"bottom",this.horizontalAlignment=e.horizontalAlignment||"left"}isReady(t){return!t.value||void 0!==e.dataCache.get(t.value)}get imageLoaded(){return this._imgLoaded}async load(t){if(!t.value)return;const n=t.value,i=new r.PromiseDelegate;e.dataCache.set(n,void 0);const s=new Image;return s.src=this.htmlToSvg(t),s.width=t.width,s.height=t.height,s.onload=()=>{e.dataCache.set(n,s),i.resolve(),this._imgLoaded.emit()},i.promise}paintPlaceholder(e,t){this.drawBackground(e,t),this.drawPlaceholder(e,t)}paint(e,t){this.drawBackground(e,t),this.drawImage(e,t)}drawBackground(e,t){const n=s.CellRenderer.resolveOption(this.backgroundColor,t);n&&(e.fillStyle=n,e.fillRect(t.x,t.y,t.width,t.height))}drawPlaceholder(e,t){const n=s.CellRenderer.resolveOption(this.placeholder,t),i=s.CellRenderer.resolveOption(this.textColor,t),r=t.x+t.width/2,a=t.y+t.height/2;e.fillStyle=i,e.fillText(n,r,a)}drawImage(t,n){if(!n.value)return;const i=e.dataCache.get(n.value);if(!i)return this.drawPlaceholder(t,n);const r=s.CellRenderer.resolveOption(this.font,n),a=s.CellRenderer.resolveOption(this.textColor,n),o=s.TextRenderer.measureFontHeight(r),l=s.CellRenderer.resolveOption(this.verticalAlignment,n),c=s.CellRenderer.resolveOption(this.horizontalAlignment,n),u=n.height-("center"===l?1:2);u<=0||(t.textBaseline="bottom",t.textAlign=c,t.font=r,t.fillStyle=a,o>u&&(t.beginPath(),t.rect(n.x,n.y,n.width,n.height-1),t.clip()),t.drawImage(i,n.x,n.y))}htmlToSvg(e){const t=s.CellRenderer.resolveOption(this.font,e),n=s.CellRenderer.resolveOption(this.textColor,e),i=s.CellRenderer.resolveOption(this.verticalAlignment,e),r=s.CellRenderer.resolveOption(this.horizontalAlignment,e),a=s.CellRenderer.resolveOption(e.width,e),o=s.CellRenderer.resolveOption(e.height,e),l=s.CellRenderer.resolveOption(e.value,e);return"data:image/svg+xml,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${a}px" height="${o}px">\n      <foreignObject width="${a}px" height="${o}px">\n        <div\n          xmlns="http://www.w3.org/1999/xhtml"\n          style="display: table-cell; font: ${t}; width: ${a}px; height: ${o}px; color: ${n}; vertical-align: ${"center"===i?"middle":i}; text-align: ${r}"\n        >\n          <div style="display: inline-block; padding: 0 2px">${l}</div>\n        </div>\n      </foreignObject>\n    </svg>`)}}).dataCache=new Map,l=i))},7087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingView=void 0;const i=n(7044);class r extends i.View{constructor(e){super(e.datasource),this._streamed_data={},this._rowCount=e.rowCount}rowCount(e){return"body"===e?this._rowCount:this._bodyFields[0].rows.length}data(e,t,n){if("body"==e){const e=this._bodyFields[n];if(void 0!==this._streamed_data[e.name]){const n=this._streamed_data[e.name][t];return void 0!==n?n:"..."}return"..."}if("row-header"==e){const e=this._headerFields[n];if(void 0!==this._streamed_data[e.name]){const n=this._streamed_data[e.name][t];return void 0!==n?n:"..."}return"..."}return super.data(e,t,n)}setDataRange(e,t,n,i,r){let s;this._data.setColumns(r.columns);for(let a=n;a<=i;a++){s=this._bodyFields[a],void 0===this._streamed_data[s.name]&&(this._streamed_data[s.name]=[]);let n=0;for(let i=e;i<=t;i++)this._streamed_data[s.name][i]=r.data[s.name][n],n++}for(let n=0;n<this._headerFields.length;n++){s=this._headerFields[n],void 0===this._streamed_data[s.name]&&(this._streamed_data[s.name]=[]);let i=0;for(let n=e;n<=t;n++)this._streamed_data[s.name][n]=r.data[s.name][i],i++}}setData(e,t,n){const i=this._bodyFields[n];void 0===this._streamed_data[i.name]&&(this._streamed_data[i.name]=[]),this._streamed_data[i.name][t]=e}setRowCount(e){this._rowCount=e}}t.StreamingView=r},4922:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingViewBasedJSONModel=void 0;const i=n(1474),r=n(7087),s=n(8818);class a extends s.ViewBasedJSONModel{constructor(e){super(e)}setModelRangeData(e,t,n,i,r){this._currentView.setDataRange(e,t,n,i,r),this.emitChanged({type:"cells-changed",region:"body",row:e,column:n,rowSpan:t-e+1,columnSpan:i-n+1}),this.emitChanged({type:"cells-changed",region:"row-header",row:e,column:0,rowSpan:t-e+1,columnSpan:this._currentView.columnCount("row-header")})}uniqueValues(e,t){if(this._unique&&e==this._unique.region&&t==this._unique.column)return Promise.resolve(this._unique.values);const n=new Promise((t=>{this._dataModel.once("msg:custom",((n,r)=>{if("unique-values-reply"===n.event_type){const{value:s}=n;for(const e of Object.keys(s.data))"raw"!==s.data[e].type&&(s.data[e].value=r[s.data[e].value]);const a=i.deserialize_data_simple(s,null)[n.column];this._unique={region:e,column:n.column,values:a},t(this._unique.values)}}))})),r={type:"unique-values-request",column:t};return this._dataModel.send(r),n}updateDataset(e){this._dataModel=e.dataModel,this._dataset=e.datasource,this._updatePrimaryKeyMap();const t=new r.StreamingView({datasource:this._dataset,rowCount:e.rowCount});this.currentView=t}updateCellValue(e){"body"==e.region&&this._currentView.setData(e.value,e.row,e.column)}get currentView(){return this._currentView}set currentView(e){super.currentView=e}_transformStateChangedHandler(e,t){this._transformSignal.emit(t)}}t.StreamingViewBasedJSONModel=a},7395:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SortExecutor=t.FilterExecutor=t.TransformExecutor=void 0;const a=n(9488),o=s(n(2082));class l{}t.TransformExecutor=l,t.FilterExecutor=class extends l{constructor(e){super(),this._options=e}apply(e){let t;const n=this._options.field;switch(this._options.operator){case">":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return i.isAfter(r,"day")}return e.data[n][t]>this._options.value};break;case"<":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return i.isBefore(r,"day")}return e.data[n][t]<this._options.value};break;case"<=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return i.isSameOrBefore(r,"day")}return e.data[n][t]<=this._options.value};break;case">=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return i.isSameOrAfter(r,"day")}return e.data[n][t]>=this._options.value};break;case"=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return i.isSame(r)}return e.data[n][t]==this._options.value};break;case"!=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return!i.isSame(r)}return e.data[n][t]!==this._options.value};break;case"empty":t=t=>null===e.data[n][t];break;case"notempty":t=t=>null!==e.data[n][t];break;case"in":t=t=>this._options.value.includes(e.data[n][t]);break;case"between":t=t=>{const i=this._options.value;if(["date","datetime","time"].includes(this._options.dType)){const r=o.default.utc(e.data[n][t]),s=o.default.utc(i[0]),a=o.default.utc(i[1]);return r.isBetween(s,a,"day")}return e.data[n][t]>i[0]&&e.data[n][t]<i[1]};break;case"startswith":t=t=>e.data[n][t].startsWith(this._options.value);break;case"endswith":t=t=>e.data[n][t].endsWith(this._options.value);break;case"stringContains":t=t=>String(e.data[n][t]).toLowerCase().includes(String(this._options.value).toLowerCase());break;case"contains":t=t=>e.data[n][t].includes(this._options.value);break;case"!contains":t=t=>!e.data[n][t].includes(this._options.value);break;case"isOnSameDay":t=t=>{const i=o.default.utc(e.data[n][t]),r=o.default.utc(this._options.value);return i.isSame(r,"day")};break;default:throw"unreachable"}const i={},r=Array.from(Array(e.length).keys()).filter(t);for(const t of Object.keys(e.data)){let n=0;i[t]=[];for(const s of r)i[t][n++]=e.data[t][s]}return new a.DataSource(i,e.fields,e.schema)}},t.SortExecutor=class extends l{constructor(e){super(),this._options=e}apply(e){let t;const n=this._options.field,i=this._options.dType,r=e=>"string"!=typeof e?String(e):e,s=e=>null===e||"number"==typeof e&&Number.isNaN(e)||e instanceof Date&&Number.isNaN(e.getTime()),o=Array.from(Array(e.length).keys()).filter((t=>s(e.data[n][t]))),l=Array.from(Array(e.length).keys()).filter((t=>!s(e.data[n][t])));t="string"==i?this._options.desc?(t,i)=>r(e.data[n][t])<r(e.data[n][i])?1:-1:(t,i)=>r(e.data[n][t])>r(e.data[n][i])?1:-1:this._options.desc?(t,i)=>e.data[n][t]<e.data[n][i]?1:-1:(t,i)=>e.data[n][t]>e.data[n][i]?1:-1;const c={};let u=l.sort(t);u=u.concat(o);for(const t of Object.keys(e.data)){let n=0;c[t]=[];for(const i of u)c[t][n++]=e.data[t][i]}return new a.DataSource(c,e.fields,e.schema)}}},9085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransformStateManager=void 0;const i=n(7044),r=n(7395),s=n(5057),a=n(2006),o=n(8418);t.TransformStateManager=class{constructor(){this._state={},this._changed=new o.Signal(this)}_add(e){switch(this._state.hasOwnProperty(e.column)||(this._state[e.column]={sort:void 0,filter:void 0}),e.type){case"sort":for(const e of Object.keys(this._state))this._state[e].sort=void 0;this._state[e.column].sort=e;break;case"filter":this._state[e.column].filter=e;break;default:throw"unreachable"}}add(e){try{this._add(e),this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}replace(e){if(!a.JSONExt.deepEqual(e,this.activeTransforms))try{this._state={},s.each(e,(e=>{this._add(e)})),this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}createView(e){const t=this._createExecutors(e);let n=e;return s.each(t,(e=>{n=e.apply(n)})),new i.View(n)}_createExecutors(e){const t=[],n=[];return Object.keys(this._state).forEach((i=>{const s=this._state[i];if(s.sort){let n="";for(const t of e.schema.fields)t.name===s.sort.column&&(n=t.type);const i=new r.SortExecutor({field:s.sort.column,dType:n,desc:s.sort.desc});t.push(i)}if(s.filter){let t="";for(const n of e.schema.fields)n.name===s.filter.column&&(t=n.type);const i=new r.FilterExecutor({field:s.filter.column,dType:t,operator:s.filter.operator,value:s.filter.value});n.push(i)}})),[...n,...t]}remove(e,t){if(this._state.hasOwnProperty(e))try{const n=this._state[e];if("sort"===t)n.sort=void 0;else{if("filter"!==t)throw"unreachable";n.filter=void 0}n.sort||n.filter||delete this._state[e],this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}metadata(e){return this._state.hasOwnProperty(e)?this._state[e]:void 0}clear(){this._state={},this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}get changed(){return this._changed}get activeTransforms(){const e=[];return s.each(Object.keys(this._state),(t=>{this._state[t].sort&&e.push(this._state[t].sort),this._state[t].filter&&e.push(this._state[t].filter)})),e}getFilterTransform(e){if(this._state.hasOwnProperty(e))return this._state[e].filter}}},8671:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterValueRenderer=void 0;const i=n(9952),r=n(9496);class s extends i.TextRenderer{constructor(e){super({textColor:e.textColor,backgroundColor:e.backgroundColor}),this._stateManager=e.stateManager,this._dialog=e.dialog}drawText(e,t){const n=i.CellRenderer.resolveOption(this.font,t);if(!n)return;const s=i.CellRenderer.resolveOption(this.textColor,t);if(!s)return;const a=(0,this.format)(t);if(!a)return;const o=i.CellRenderer.resolveOption(this.verticalAlignment,t),l=i.CellRenderer.resolveOption(this.horizontalAlignment,t),c=t.height-("center"===o?1:2);if(c<=0)return;const u=i.TextRenderer.measureFontHeight(n);let h,d;switch(o){case"top":d=t.y+2+u;break;case"center":d=t.y+t.height/2+u/2;break;case"bottom":d=t.y+t.height-2;break;default:throw"unreachable"}switch(l){case"left":h=t.x+2;break;case"center":h=t.x+t.width/2;break;case"right":h=t.x+t.width-3;break;default:throw"unreachable"}u>c&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=n,e.fillStyle=s,e.textAlign=l,e.textBaseline="bottom",e.fillText(a,h+25,d),e.fillStyle=r.Theme.getBorderColor(1),e.fillStyle="#ffffff",e.fillRect(t.x+5,t.y+5,10,10),e.fillStyle="#000000",e.strokeRect(t.x+5,t.y+5,10,10),this._getCheckedState(t)&&(e.beginPath(),e.strokeStyle="#000000",e.moveTo(t.x+5+3,t.y+5+5),e.lineTo(t.x+5+4,t.y+5+8),e.lineTo(t.x+5+8,t.y+5+2),e.lineWidth=2,e.stroke())}_getCheckedState(e){return this._stateManager.has(this._dialog.region,this._dialog.column,e.value)||!this._dialog.hasFilter&&!this._dialog.userInteractedWithDialog}}t.FilterValueRenderer=s},7044:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.View=class{constructor(e){const t=n.splitFields(e.schema);this._data=e,this._bodyFields=t.bodyFields,this._headerFields=t.headerFields,this._missingValues=n.createMissingMap(e.schema)}rowCount(e){var t,n;return"body"===e?this._data.length:null!==(n=null===(t=this._bodyFields[0])||void 0===t?void 0:t.rows.length)&&void 0!==n?n:1}columnCount(e){return"body"===e?this._bodyFields.length:this._headerFields.length}metadata(e,t,n){return"body"===e||"column-header"===e?Object.assign({row:t,column:n},this._bodyFields[n]):Object.assign({row:t,column:n},this._headerFields[n])}data(e,t,n){let i,r;switch(e){case"body":i=this._bodyFields[n],r=this._data.data[i.name][t];break;case"column-header":i=this._bodyFields[n],r=i.rows[t];break;case"row-header":i=this._headerFields[n],r=this._data.data[i.name][t];break;case"corner-header":i=this._headerFields[n],r=i.rows[t];break;default:throw"unreachable"}return null!==this._missingValues&&"string"==typeof r&&!0===this._missingValues[r]?null:r}get dataset(){return this._data}getSchemaIndex(e,t){return"corner-header"===e?t:this._headerFields.length+t}uniqueValues(e,t){return Array.from(new Set(this.dataset.data[t]))}},function(e){e.splitFields=function(e){let t;t=void 0===e.primaryKey?[]:"string"==typeof e.primaryKey?[e.primaryKey]:e.primaryKey;const n=[],i=[];for(const r of e.fields)r.rows[0]!=e.primaryKeyUuid&&(-1===t.indexOf(r.name)?n.push(r):i.push(r));return{bodyFields:n,headerFields:i}},e.createMissingMap=function(e){if(!e.missingValues||0===e.missingValues.length)return null;const t=Object.create(null);for(const n of e.missingValues)t[n]=!0;return t}}(n||(n={}))},8818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewBasedJSONModel=void 0;const i=n(9952),r=n(8418),s=n(7044),a=n(9085),o=n(9496);class l extends i.MutableDataModel{constructor(e){super(),this._transformSignal=new r.Signal(this),this._dataSyncSignal=new r.Signal(this),this._primaryKeyMap=new Map,this.updateDataset(e),this._transformState=new a.TransformStateManager,this._transformState.changed.connect(((e,t)=>{this._transformStateChangedHandler(e,t)}));const t=o.ArrayUtils.generateMultiIndexArrayLocations(this);let n=o.ArrayUtils.generateColMergedCellLocations(this,t);o.ArrayUtils.validateMergingHierarchy(n)||(n=[]),this._mergedColumnCellLocations=n,this._columnCellGroups=o.ArrayUtils.generateColumnCellGroups(this._mergedColumnCellLocations);let i=o.ArrayUtils.generateRowMergedCellLocations(this);o.ArrayUtils.validateMergingHierarchy(i)||(i=[]),this._mergedRowCellLocations=i,this._rowCellGroups=o.ArrayUtils.generateRowCellGroups(this._mergedRowCellLocations)}updateDataset(e){this._dataset=e.datasource,this._updatePrimaryKeyMap();const t=new s.View(this._dataset);this.currentView=t}_updatePrimaryKeyMap(){this._primaryKeyMap.clear();const e=this._dataset.schema.primaryKey;for(let t=0;t<this._dataset.length;t++){const n=e.map((e=>this._dataset.data[e][t]));this._primaryKeyMap.set(JSON.stringify(n),t)}}areCellsMerged(e,t){const[n,i]=t,r=this.getMergedSiblingCells(e);for(const e of r)if(n===e[0]&&i===e[1])return!0;return!1}getMergedSiblingCells(e){const[t,n]=e;if(t<0||n<0||t>=this._mergedColumnCellLocations.length)return[];for(const e of this._mergedColumnCellLocations[t])for(const i of e){const[r,s]=i;if(t===r&&n==s)return e}return[]}rowCount(e){return this.currentView.rowCount(e)}columnCount(e){return this.currentView.columnCount(e)}groupCount(e){return"body"===e?0:"column-header"===e?this._columnCellGroups.length:"row-header"===e?this._rowCellGroups.length:0}group(e,t){return"column-header"===e?this._columnCellGroups[t]:"row-header"===e?this._rowCellGroups[t]:null}metadata(e,t,n){const i=this.currentView.metadata(e,t,n);return"body"==e&&(i.row=t,i.column=n,i.data=(e,t)=>{const n=this.columnNameToIndex(t.toString());return this.data("body",e,n)}),i}data(e,t,n){return this.currentView.data(e,t,n)}setData(e,t,n,i){const r=this.getDatasetRowFromView(e,t);return this.updateCellValue({region:e,row:r,column:n,value:i}),this.emitChanged({type:"cells-changed",region:e,row:t,column:n,rowSpan:1,columnSpan:1}),!0}setModelData(e,t,n,i){return this.updateCellValue({region:e,row:t,column:n,value:i}),this.emitChanged({type:"cells-changed",region:e,row:t,column:n,rowSpan:1,columnSpan:1}),!0}setRowData(e,t){return this.updateRowValue({row:e,value:t}),this.emitChanged({type:"cells-changed",region:"body",row:e,column:0,rowSpan:1,columnSpan:1}),!0}columnNameToIndex(e){const t=this.dataset.schema,n=t.primaryKey.length-1;let i=-1;return t.primaryKey.includes(e)?i=t.primaryKey.indexOf(e):t.fields.forEach(((t,r)=>{t.name==e&&(i=r-n)})),i}columnIndexToName(e,t){const n=this.dataset.schema;return"row-header"==t?n.primaryKey[e]:n.fields[n.primaryKey.length+e-1].name}columnNameToRegion(e){return this.dataset.schema.primaryKey.includes(e)?"row-header":"body"}get currentView(){return this._currentView}set currentView(e){this._currentView=e,this.emitChanged({type:"model-reset"});const t=Array.isArray(this._dataset.schema.primaryKey)?this._dataset.schema.primaryKey:[this._dataset.schema.primaryKey],n=[];for(let i=0;i<e.dataset.length;i++){const r=JSON.stringify(t.map((t=>e.dataset.data[t][i]))),s=this._primaryKeyMap.get(r);n.push(void 0===s?i:s)}this.dataSync.emit({type:"row-indices-updated",indices:n})}addTransform(e){this._transformState.add(e)}removeTransform(e,t){this._transformState.remove(e,t)}replaceTransforms(e){this._transformState.replace(e)}clearTransforms(){this._transformState.clear()}transformMetadata(e){return this._transformState.metadata(e)}uniqueValues(e,t){return Promise.resolve(Array.from(new Set(this.dataset.data[t])))}async uniqueValuesVisible(e,t){return this._currentView.uniqueValues(e,t)}get transformStateChanged(){return this._transformSignal}get activeTransforms(){return this._transformState.activeTransforms}getFilterTransform(e){return this._transformState.getFilterTransform(e)}getDatasetRowFromView(e,t){if("column-header"==e||"corner-header"==e)return t;const n=(Array.isArray(this._dataset.schema.primaryKey)?this._dataset.schema.primaryKey:[this._dataset.schema.primaryKey]).map((e=>this._currentView.dataset.data[e][t]));return this._primaryKeyMap.get(JSON.stringify(n))}updateCellValue(e){if("body"!==e.region)return;const t=this.metadata("body",0,e.column).name;this._dataset.data[t][e.row]=e.value,this.dataSync.emit({type:"cell-edit-event",column:t,columnIndex:e.column,row:e.row,region:e.region,value:e.value}),this.currentView=this._transformState.createView(this._dataset)}updateRowValue(e){for(const t of Array(e.value.length).keys()){const n=this.metadata("body",0,t).name;this._dataset.data[n][e.row]=e.value[t]}this.currentView=this._transformState.createView(this._dataset)}get dataSync(){return this._dataSyncSignal}get dataset(){return this._dataset}getSchemaIndex(e,t){return this.currentView.getSchemaIndex(e,t)}_transformStateChangedHandler(e,t){this.currentView=this._transformState.createView(this._dataset),this._transformSignal.emit(t)}}t.ViewBasedJSONModel=l},1117:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingDataGridView=t.StreamingDataGridModel=t.VegaExprView=t.VegaExprModel=t.HtmlRendererView=t.HtmlRendererModel=t.TextRendererView=t.TextRendererModel=t.HyperlinkRendererView=t.HyperlinkRendererModel=t.ImageRendererView=t.ImageRendererModel=t.BarRendererView=t.BarRendererModel=t.DataGridView=t.DataGridModel=void 0;const a=s(n(6731)),o=n(9952),l=n(2006),c=n(270),u=n(4704),h=n(2055),d=n(2418),f=n(1474),p=n(8818),m=n(4922),_=n(4057),g=n(9006),y=n(7654),v=n(9496);n(3853);class b extends h.DOMWidgetModel{constructor(){super(...arguments),this.synchingWithKernel=!1}defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_module:b.model_module,_model_module_version:b.model_module_version,_view_name:b.view_name,_view_module:b.view_module,_view_module_version:b.view_module_version,_visible_rows:[],_transforms:[],baseRowSize:20,baseColumnSize:64,baseRowHeaderSize:64,baseColumnHeaderSize:20,headerVisibility:"all",_data:{},renderers:{},corner_renderer:null,default_renderer:null,header_renderer:null,selection_mode:"none",selections:[],grid_style:{},editable:!1,column_widths:{},horizontal_stripes:!1,vertical_stripes:!1,_transform_on_backend:!1})}initialize(e,t){super.initialize(e,t),this.updateDataSync=this.updateDataSync.bind(this),this.syncTransformState=this.syncTransformState.bind(this),this.on("change:_data",this.updateData.bind(this)),this.on("change:_transforms",this.updateTransforms.bind(this)),this.on("change:selection_mode",this.updateSelectionModel,this),this.on("change:selections",this.updateSelections,this),this.updateData(),this.updateTransforms(),this.updateSelectionModel(),this.on("msg:custom",(e=>{"cell-changed"===e.event_type&&this.data_model.setModelData("body",e.row,e.column_index,e.value),"row-changed"===e.event_type&&this.data_model.setRowData(e.row,e.value)}))}updateDataSync(e,t){switch(t.type){case"row-indices-updated":this.set("_visible_rows",t.indices),this.save_changes();break;case"cell-edit-event":const e=this.get("_data");e.data[t.column][t.row]=t.value,this.set("_data",e),this.send({event_type:"cell-changed",region:t.region,row:t.row,column_index:t.columnIndex,value:t.value},Object.assign({},this._view_callbacks));break;default:throw"unreachable"}}syncTransformState(e,t){this.set("_transforms",t.transforms),this.save_changes()}updateData(){const e=this.data;this.data_model&&(this.data_model.updateDataset({datasource:e}),this.data_model.transformStateChanged.disconnect(this.syncTransformState),this.data_model.dataSync.disconnect(this.updateDataSync)),this.data_model=new p.ViewBasedJSONModel({datasource:e}),this.data_model.transformStateChanged.connect(this.syncTransformState),this.data_model.dataSync.connect(this.updateDataSync),this.updateTransforms(),this.trigger("data-model-changed"),this.updateSelectionModel()}updateTransforms(){const e=this.get("_transforms");this.get("_transform_on_backend")||this.selectionModel&&this.selectionModel.clear(),this.data_model.replaceTransforms(e)}updateSelectionModel(){this.selectionModel&&this.selectionModel.clear();const e=this.get("selection_mode");"none"!==e?(this.selectionModel=new o.BasicSelectionModel({dataModel:this.data_model}),this.selectionModel.selectionMode=e,this.trigger("selection-model-changed"),this.selectionModel.changed.connect(((e,t)=>{if(this.synchingWithKernel)return;this.synchingWithKernel=!0;const n=[];let i=e.selections();if("function"==typeof i.iter){let e=null;for(i=i.iter();e=i.next();)n.push({r1:Math.min(e.r1,e.r2),r2:Math.max(e.r1,e.r2),c1:Math.min(e.c1,e.c2),c2:Math.max(e.c1,e.c2)})}else{let e=null;for(;(e=i.next())&&!e.done;){const t=e.value;n.push({r1:Math.min(t.r1,t.r2),r2:Math.max(t.r1,t.r2),c1:Math.min(t.c1,t.c2),c2:Math.max(t.c1,t.c2)})}}this.set("selections",n),this.save_changes(),this.synchingWithKernel=!1}),this)):this.selectionModel=null}updateSelections(){if(!this.selectionModel||this.synchingWithKernel)return;this.synchingWithKernel=!0;const e=this.get("selections");this.selectionModel.clear();for(const t of e)this.selectionModel.select({r1:t.r1,c1:t.c1,r2:t.r2,c2:t.c2,cursorRow:t.r1,cursorColumn:t.c1,clear:"none"});this.synchingWithKernel=!1}get data(){return this.get("_data")}}t.DataGridModel=b,b.serializers=Object.assign(Object.assign({},h.DOMWidgetModel.serializers),{transforms:{deserialize:h.unpack_models},renderers:{deserialize:h.unpack_models},corner_renderer:{deserialize:h.unpack_models},default_renderer:{deserialize:h.unpack_models},header_renderer:{deserialize:h.unpack_models},_data:{deserialize:f.deserialize_data,serialize:function(e,t){const n={};for(const i of Object.keys(e.data))n[i]=d.array_or_json_serializer.serialize(e.data[i],t);return{data:n,fields:e.fields,schema:e.schema}}},grid_style:{deserialize:function e(t,n){if(t instanceof Object&&"string"!=typeof t){const i={};return Object.keys(t).forEach((r=>{i[function(e){e=e.toLowerCase();const t=[];for(let n=0;n<e.length;n++){const i=e.charAt(n);"_"!==i?t.push(i):(n++,t.push(e.charAt(n).toUpperCase()))}return t.join("")}(r)]=e(t[r],n)})),h.resolvePromisesDict(i)}return"string"==typeof t&&"IPY_MODEL_"===t.slice(0,10)?Promise.resolve(n.get_model(t.slice(10,t.length))).then((e=>e._function)):Promise.resolve(t)}}}),b.model_name="DataGridModel",b.model_module=_.MODULE_NAME,b.model_module_version=_.MODULE_VERSION,b.view_name="DataGridView",b.view_module=_.MODULE_NAME,b.view_module_version=_.MODULE_VERSION;class x extends h.DOMWidgetView{constructor(){super(...arguments),this.manageResizeEvent=()=>{c.MessageLoop.postMessage(this.luminoWidget,u.Widget.ResizeMessage.UnknownSize)}}_createElement(e){const t=w.getWidgetPanel();return this.luminoWidget=new t({view:this}),this._initializeTheme(),this.luminoWidget.node}get pWidget(){return this.luminoWidget}_setElement(e){if(this.el||e!==this.luminoWidget.node)throw new Error("Cannot reset the DOM element.");this.el=this.luminoWidget.node}_processLuminoMessage(e,t){t.call(this,e),"after-show"===e.type&&this.luminoWidget.isVisible&&this.manageResizeEvent()}processLuminoMessage(e){this._processLuminoMessage(e,super.processLuminoMessage)}processPhosphorMessage(e){this._processLuminoMessage(e,super.processPhosphorMessage)}_createGrid(){return new g.FeatherGrid({defaultSizes:{rowHeight:this.model.get("base_row_size"),columnWidth:this.model.get("base_column_size"),rowHeaderWidth:this.model.get("base_row_header_size"),columnHeaderHeight:this.model.get("base_column_header_size")},headerVisibility:this.model.get("header_visibility"),style:this.model.get("grid_style")})}render(){return this.el.classList.add("datagrid-container"),window.addEventListener("resize",this.manageResizeEvent),this.once("remove",(()=>{window.removeEventListener("resize",this.manageResizeEvent)})),this.grid=this._createGrid(),this.grid.columnWidths=this.model.get("column_widths"),this.grid.editable=this.model.get("editable"),this.grid.isLightTheme=this._isLightTheme,this.grid.dataModel=this.model.data_model,this.grid.selectionModel=this.model.selectionModel,this.grid.backboneModel=this.model,this.grid.cellClicked.connect(((e,t)=>{this.model.comm&&this.send({event_type:"cell-click",region:t.region,column:t.column,column_index:t.columnIndex,row:t.row,primary_key_row:t.primaryKeyRow,cell_value:t.cellValue})})),this.grid.columnsResized.connect(((e,t)=>{this.model.set("column_widths",l.JSONExt.deepCopy(this.grid.columnWidths)),this.model.save_changes()})),this.model._view_callbacks=this.callbacks(),this.model.on("data-model-changed",(()=>{this.grid.dataModel=this.model.data_model,this.handleColumnAutoFit()})),this.model.on("change:base_row_size",(()=>{this.grid.baseRowSize=this.model.get("base_row_size")})),this.model.on("change:base_column_size",(()=>{this.grid.baseColumnSize=this.model.get("base_column_size")})),this.model.on("change:column_widths",(()=>{this.grid.columnWidths=this.model.get("column_widths")})),this.model.on("change:base_row_header_size",(()=>{this.grid.baseRowHeaderSize=this.model.get("base_row_header_size")})),this.model.on("change:base_column_header_size",(()=>{this.grid.baseColumnHeaderSize=this.model.get("base_column_header_size")})),this.model.on("change:header_visibility",(()=>{this.grid.headerVisibility=this.model.get("header_visibility")})),this.model.on_some_change(["corner_renderer","header_renderer","default_renderer","renderers","grid_style"],(()=>{this.updateRenderers().then(this.updateGridStyle.bind(this)).then(this.updateGridRenderers.bind(this))}),this),this.model.on("selection-model-changed",(()=>{this.grid.selectionModel=this.model.selectionModel})),this.model.on("change:editable",(()=>{this.grid.editable=this.model.get("editable")})),this.model.on_some_change(["auto_fit_columns","auto_fit_params"],(()=>{this.handleColumnAutoFit()}),this),this.model.get("auto_fit_columns")&&this.handleColumnAutoFit(),this.updateRenderers().then((()=>{this.updateGridStyle(),this.updateGridRenderers(),this.luminoWidget.addWidget(this.grid)}))}handleColumnAutoFit(){if(!this.model.get("auto_fit_columns"))return void(this.grid.baseColumnSize=this.model.get("base_column_size"));let{area:e,padding:t,numCols:n}=this.model.get("auto_fit_params");e=null!=e?e:"all",t=null!=t?t:30,n=null!=n?n:void 0,this.grid.grid.fitColumnNames(e,t,n)}updateRenderers(){this.default_renderer&&this.stopListening(this.default_renderer,"renderer-changed"),this.header_renderer&&this.stopListening(this.header_renderer,"renderer-changed"),this.corner_renderer&&this.stopListening(this.corner_renderer,"renderer-changed");for(const e in this.renderers)this.stopListening(this.renderers[e],"renderer-changed");const e=[],t=this.model.get("default_renderer");e.push(this.create_child_view(t).then((e=>{this.default_renderer=e,this.listenTo(this.default_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const n=this.model.get("corner_renderer");n&&e.push(this.create_child_view(n).then((e=>{this.corner_renderer=e,this.listenTo(this.corner_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const i=this.model.get("header_renderer");i&&e.push(this.create_child_view(i).then((e=>{this.header_renderer=e,this.listenTo(this.header_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const r={};return a.each(this.model.get("renderers"),((e,t)=>{r[t]=this.create_child_view(e)})),e.push(h.resolvePromisesDict(r).then((e=>{this.renderers=e;for(const t in e)this.listenTo(e[t],"renderer-changed",this.updateGridRenderers.bind(this))}))),Promise.all(e)}updateGridStyle(){this.grid.updateGridStyle()}set isLightTheme(e){this._isLightTheme=e,this.grid&&(this.grid.isLightTheme=e)}get isLightTheme(){return this._isLightTheme}updateGridRenderers(){let e=this.default_renderer.renderer;(this.grid.grid.style.backgroundColor!==v.Theme.getBackgroundColor()||this.grid.grid.style.rowBackgroundColor||this.grid.grid.style.columnBackgroundColor)&&(e=new o.TextRenderer(Object.assign(Object.assign({},this.default_renderer.renderer),{backgroundColor:void 0})));const t=null!==this.model.get("header_renderer");let n=null;n=this.header_renderer&&t?this.header_renderer.renderer:new o.TextRenderer({font:"12px sans-serif",textColor:v.Theme.getFontColor(),backgroundColor:v.Theme.getBackgroundColor(2)});let i=null;this.corner_renderer&&(i=this.corner_renderer.renderer);const r={};Object.entries(this.renderers).forEach((([e,t])=>{r[e]=t.renderer})),this.grid.defaultRenderer=e,this.grid.columnHeaderRenderer=n,i&&(this.grid.cornerHeaderRenderer=i),this.grid.renderers=r}_initializeTheme(){void 0===this._isLightTheme&&(this._isLightTheme=!(document.body.classList.contains("theme-dark")||"false"===document.body.dataset.jpThemeLight))}}t.DataGridView=x;var M=n(2086);Object.defineProperty(t,"BarRendererModel",{enumerable:!0,get:function(){return M.BarRendererModel}}),Object.defineProperty(t,"BarRendererView",{enumerable:!0,get:function(){return M.BarRendererView}}),Object.defineProperty(t,"ImageRendererModel",{enumerable:!0,get:function(){return M.ImageRendererModel}}),Object.defineProperty(t,"ImageRendererView",{enumerable:!0,get:function(){return M.ImageRendererView}}),Object.defineProperty(t,"HyperlinkRendererModel",{enumerable:!0,get:function(){return M.HyperlinkRendererModel}}),Object.defineProperty(t,"HyperlinkRendererView",{enumerable:!0,get:function(){return M.HyperlinkRendererView}}),Object.defineProperty(t,"TextRendererModel",{enumerable:!0,get:function(){return M.TextRendererModel}}),Object.defineProperty(t,"TextRendererView",{enumerable:!0,get:function(){return M.TextRendererView}}),Object.defineProperty(t,"HtmlRendererModel",{enumerable:!0,get:function(){return M.HtmlRendererModel}}),Object.defineProperty(t,"HtmlRendererView",{enumerable:!0,get:function(){return M.HtmlRendererView}});var w,S=n(9915);Object.defineProperty(t,"VegaExprModel",{enumerable:!0,get:function(){return S.VegaExprModel}}),Object.defineProperty(t,"VegaExprView",{enumerable:!0,get:function(){return S.VegaExprView}}),function(e){e.getWidgetPanel=function(){return null!==h.JupyterLuminoPanelWidget&&void 0!==h.JupyterLuminoPanelWidget?h.JupyterLuminoPanelWidget:h.JupyterPhosphorPanelWidget}}(w||(w={}));class L extends b{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:L.model_name,_view_name:L.view_name,_row_count:0,_data:{},_debounce_delay:160,_transform_on_backend:!0})}initialize(e,t){super.initialize(e,t),this.on("change:_row_count",(()=>{const e=this.get("_row_count");if(e!=this.data_model.rowCount("body")){const t=this.data_model.currentView;t.setRowCount(e),this.data_model.currentView=t}})),this.on("msg:custom",((e,t)=>{if("data-reply"===e.event_type){for(const n of Object.keys(e.value.data))"raw"!==e.value.data[n].type&&(e.value.data[n].value=t[e.value.data[n].value]);const n=f.deserialize_data(e.value,null);this.data_model.setModelRangeData(e.r1,e.r2,e.c1,e.c2,n)}}))}updateData(){const e=this.data;this.data_model&&(this.data_model.updateDataset({dataModel:this,datasource:e,rowCount:this.get("_row_count")}),this.data_model.transformStateChanged.disconnect(this.syncTransformState),this.data_model.dataSync.disconnect(this.updateDataSync)),this.data_model=new m.StreamingViewBasedJSONModel({dataModel:this,datasource:this.data,rowCount:this.get("_row_count")}),this.data_model.transformStateChanged.connect(this.syncTransformState),this.data_model.dataSync.connect(this.updateDataSync),this.updateTransforms(),this.trigger("data-model-changed"),this.updateSelectionModel()}requestData(e,t,n,i){this.send({type:"data-request",r1:e,r2:t,c1:n,c2:i})}}t.StreamingDataGridModel=L,L.model_name="StreamingDataGridModel",L.view_name="StreamingDataGridView",t.StreamingDataGridView=class extends x{initialize(e){super.initialize(e),this.model.on("msg:custom",((e,t)=>{"tick"!==e.event_type||this.grid.tick()}))}_createGrid(){return new y.StreamingFeatherGrid({defaultSizes:{rowHeight:this.model.get("base_row_size"),columnWidth:this.model.get("base_column_size"),rowHeaderWidth:this.model.get("base_row_header_size"),columnHeaderHeight:this.model.get("base_column_header_size")},headerVisibility:this.model.get("header_visibility"),style:this.model.get("grid_style"),debounceDelay:this.model.get("_debounce_delay"),requestData:this.requestData.bind(this)})}requestData(e,t,n,i){this.model.requestData(e,t,n,i)}}},9488:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0,t.DataSource=class{constructor(e,t,n,i=!1){this._data=Object.assign({},e),i?(this._fields=t,this._schema=this._createSchema(t,n)):(this._fields=t,this._schema=n),this._columns=Object.keys(this._data)}get data(){return this._data}get fields(){return this._fields}get schema(){return this._schema}get columns(){return this._columns}get length(){return 0==this._columns.length?0:this.data[this._columns[0]].length}setColumns(e){this._columns=e}_createSchema(e,t){const n=[];return e.forEach(((e,i)=>{const r=Array.isArray(t.fields[i].name)?t.fields[i].name:[t.fields[i].name],s={name:Object.keys(e)[0],type:t.fields[i].type,rows:r};n.push(s)})),{primaryKey:t.primaryKey.map((n=>{for(let i=0;i<t.fields.length;i++)if((Array.isArray(n)?t.fields[i].name[0]:t.fields[i].name)==(Array.isArray(n)?n[0]:n))return Object.keys(e[i])[0];return"unreachable"})),primaryKeyUuid:t.primaryKeyUuid,fields:n}}}},976:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),window.__webpack_public_path__=document.querySelector("body").getAttribute("data-base-url")+"nbextensions/ipydatagrid",r(n(2561),t)},9006:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatherGrid=void 0;const i=n(8142),r=n(9952),s=n(270),a=n(8418),o=n(4704),l=n(2992),c=n(553),u=n(7483),h=n(2268),d=n(9672),f=n(9496);n(3767),n(4012);const p=new Map([["--ipydatagrid-filter-icon",["var(--ipydatagrid-filter-icon-light)","var(--ipydatagrid-filter-icon-dark)"]],["--ipydatagrid-sort-asc-icon",["var(--ipydatagrid-sort-asc-icon-light)","var(--ipydatagrid-sort-asc-icon-dark)"]],["--ipydatagrid-sort-desc-icon",["var(--ipydatagrid-sort-desc-icon-light)","var(--ipydatagrid-sort-desc-icon-dark)"]],["--ipydatagrid-layout-color0",["white","#111111"]],["--ipydatagrid-layout-color1",["white","#212121"]],["--ipydatagrid-layout-color2",["#eeeeee","#424242"]],["--ipydatagrid-layout-color3",["#bdbdbd","#616161"]],["--ipydatagrid-layout-color4",["#757575","#757575"]],["--ipydatagrid-ui-font-color0",["rgba(0, 0, 0, 1)","rgba(255, 255, 255, 1)"]],["--ipydatagrid-ui-font-color1",["rgba(0, 0, 0, 0.87)","rgba(255, 255, 255, 0.87)"]],["--ipydatagrid-ui-font-color2",["rgba(0, 0, 0, 0.54)","rgba(255, 255, 255, 0.54)"]],["--ipydatagrid-ui-font-color3",["rgba(0, 0, 0, 0.38)","rgba(255, 255, 255, 0.38)"]],["--ipydatagrid-border-color0",["#bdbdbd","#616161"]],["--ipydatagrid-border-color1",["#bdbdbd","#616161"]],["--ipydatagrid-border-color2",["#e0e0e0","#424242"]],["--ipydatagrid-border-color3",["#eeeeee","#212121"]],["--ipydatagrid-brand-color0",["#1976d2","#1976d2"]],["--ipydatagrid-brand-color1",["#2196f3","#2196f3"]],["--ipydatagrid-brand-color2",["#64b5f6","#64b5f6"]],["--ipydatagrid-brand-color3",["#bbdefb","#bbdefb"]],["--ipydatagrid-brand-color4",["#e3f2fd","#e3f2fd"]],["--ipydatagrid-brand-color5",["#00e6ff","#00e6ff"]],["--ipydatagrid-brand-color6",["#ffe100","#ffe100"]],["--ipydatagrid-brand-color7",["#009eb0","#009eb0"]],["--ipydatagrid-brand-color8",["#b09b00","#b09b00"]],["--ipydatagrid-menu-bgcolor",["white","black"]],["--ipydatagrid-menu-border-color",["#bdbdbd","#616161"]],["--ipydatagrid-filter-dlg-textcolor",["black","white"]],["--ipydatagrid-filter-dlg-bgcolor",["white","black"]]]);class m extends o.Widget{constructor(e={}){super(),this._baseRowSize=20,this._baseColumnSize=64,this._baseRowHeaderSize=64,this._baseColumnHeaderSize=20,this._columnWidths={},this._headerVisibility="all",this._renderers={},this._defaultRendererSet=!1,this._cellClicked=new a.Signal(this),this._columnsResized=new a.Signal(this),this._isLightTheme=!0,this.addClass("ipydatagrid-widget"),e.defaultSizes&&(this._baseRowSize=e.defaultSizes.rowHeight||this._baseRowSize,this._baseColumnSize=e.defaultSizes.columnWidth||this._baseColumnSize,this._baseRowHeaderSize=e.defaultSizes.rowHeaderWidth||this._baseRowHeaderSize,this._baseColumnHeaderSize=e.defaultSizes.columnHeaderHeight||this._baseColumnHeaderSize),this._headerVisibility=e.headerVisibility||this._headerVisibility,this._createGrid(e),this.backboneModel&&(this.grid.copyConfig=this.backboneModel.get("copy_config")),this._defaultRenderer=new r.TextRenderer({font:"12px sans-serif",textColor:f.Theme.getFontColor(),backgroundColor:this.grid.style.backgroundColor||f.Theme.getBackgroundColor(),horizontalAlignment:"center",verticalAlignment:"center"}),this._rowHeaderRenderer=new r.TextRenderer({textColor:f.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||f.Theme.getBackgroundColor(2),horizontalAlignment:"center",verticalAlignment:"center"}),(this.layout=new o.PanelLayout).addWidget(this.grid)}messageHook(e,t){if(e===this.grid.viewport){const e=this.grid.mouseHandler;if("column-resize-request"===t.type&&e.mouseIsDown){const e=t,n=this.dataModel.columnIndexToName(e.index,e.region);return this._columnWidths[n]=e.size,this._columnsResized.emit(),!0}}return!0}set dataModel(e){this._dataModel=e,this.grid&&(this.grid.dataModel=this._dataModel,this._updateHeaderRenderer(),this._filterDialog.model=this._dataModel,this._updateColumnWidths())}get dataModel(){return this._dataModel}set baseRowSize(e){this._baseRowSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{rowHeight:e}))}get baseRowSize(){return this._baseRowSize}set baseColumnSize(e){this._baseColumnSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{columnWidth:e}),this._updateColumnWidths())}get baseColumnSize(){return this._baseColumnSize}set columnWidths(e){this._columnWidths=e,this.grid&&this._updateColumnWidths()}get columnWidths(){return this._columnWidths}set baseRowHeaderSize(e){this._baseRowHeaderSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{rowHeaderWidth:e}),this._updateColumnWidths())}get baseRowHeaderSize(){return this._baseRowHeaderSize}set baseColumnHeaderSize(e){this._baseColumnHeaderSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{columnHeaderHeight:e}))}get baseColumnHeaderSize(){return this._baseColumnHeaderSize}set headerVisibility(e){this._headerVisibility=e,this.grid&&(this.grid.headerVisibility=e,this._updateColumnWidths())}get headerVisibility(){return this._headerVisibility}set defaultRenderer(e){this._defaultRenderer=e,this._defaultRendererSet=!0,this.grid&&this._updateGridRenderers()}get defaultRenderer(){return this._defaultRenderer}set columnHeaderRenderer(e){const t=e;this._columnHeaderRenderer=new u.HeaderRenderer({textOptions:{font:t.font,wrapText:t.wrapText,elideDirection:t.elideDirection,textColor:t.textColor,backgroundColor:this.grid.style.headerBackgroundColor||t.backgroundColor||f.Theme.getBackgroundColor(),verticalAlignment:t.verticalAlignment,horizontalAlignment:t.horizontalAlignment,format:t.format},isLightTheme:this._isLightTheme,grid:this.grid}),this.grid&&this._updateHeaderRenderer()}get columnHeaderRenderer(){return this._columnHeaderRenderer}set cornerHeaderRenderer(e){const t=e;this._cornerHeaderRenderer=new u.HeaderRenderer({textOptions:{font:t.font,wrapText:t.wrapText,elideDirection:t.elideDirection,textColor:t.textColor,backgroundColor:this.grid.style.headerBackgroundColor||t.backgroundColor||f.Theme.getBackgroundColor(),verticalAlignment:t.verticalAlignment,horizontalAlignment:t.horizontalAlignment,format:t.format},isLightTheme:this._isLightTheme,grid:this.grid}),this.grid&&this._updateHeaderRenderer()}get cornerHeaderRenderer(){return this._cornerHeaderRenderer}set renderers(e){this._renderers=e,this.grid&&this._updateGridRenderers()}get renderers(){return this._renderers}set selectionModel(e){this._selectionModel=e,this.grid&&(this.grid.selectionModel=this._selectionModel)}set editable(e){this._editable=e,this.grid&&(this.grid.editingEnabled=e)}get editable(){return this._editable}get cellRenderers(){return this.grid.cellRenderers}_createGrid(e={}){this.grid=new r.DataGrid(Object.assign(Object.assign({},e),{defaultSizes:{rowHeight:this._baseRowSize,columnWidth:this._baseColumnSize,rowHeaderWidth:this._baseRowHeaderSize,columnHeaderHeight:this._baseColumnHeaderSize},headerVisibility:this._headerVisibility})),s.MessageLoop.installMessageHook(this.grid.viewport,this),this._filterDialog=new l.InteractiveFilterDialog({model:this._dataModel}),this.contextMenu=new c.FeatherGridContextMenu({grid:this.grid,commands:this._createCommandRegistry()}),this.grid.dataModel=this._dataModel,this.grid.keyHandler=new h.KeyHandler;const t=new d.MouseHandler(this);t.cellClicked.connect(((e,t)=>{if(!this.grid.dataModel)return;const n=this.grid.dataModel,i=t.region;this._cellClicked.emit({region:i,column:n.metadata(i,t.row,t.column).name,columnIndex:t.column,row:t.row,primaryKeyRow:n.getDatasetRowFromView(i,t.row),cellValue:n.data(i,t.row,t.column)})})),this.grid.mouseHandler=t,this.grid.selectionModel=this._selectionModel,this.grid.editingEnabled=this._editable,this.updateGridStyle(),this._updateGridRenderers(),this._updateColumnWidths()}setGridStyle(){const e={size:4,color1:f.Theme.getBorderColor(1,1),color2:f.Theme.getBorderColor(1,.5),color3:f.Theme.getBorderColor(1,0)};this.backboneModel?(this.grid.style=this.backboneModel.get("grid_style"),this.grid.style={voidColor:this.grid.style.voidColor||f.Theme.getBackgroundColor(),backgroundColor:this.grid.style.backgroundColor||f.Theme.getBackgroundColor(),rowBackgroundColor:this.grid.style.rowBackgroundColor||void 0,columnBackgroundColor:this.grid.style.columnBackgroundColor||void 0,gridLineColor:this.grid.style.gridLineColor||f.Theme.getBorderColor(),verticalGridLineColor:this.grid.style.verticalGridLineColor||void 0,horizontalGridLineColor:this.grid.style.horizontalGridLineColor||void 0,headerBackgroundColor:this.grid.style.headerBackgroundColor||void 0,headerGridLineColor:this.grid.style.headerGridLineColor||f.Theme.getBorderColor(1),headerVerticalGridLineColor:this.grid.style.headerVerticalGridLineColor||void 0,headerHorizontalGridLineColor:this.grid.style.headerHorizontalGridLineColor||void 0,selectionFillColor:this.grid.style.selectionFillColor||f.Theme.getBrandColor(2,.4),selectionBorderColor:this.grid.style.selectionBorderColor||f.Theme.getBrandColor(1),headerSelectionFillColor:this.grid.style.headerSelectionFillColor||f.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:this.grid.style.headerSelectionBorderColor||f.Theme.getBorderColor(1),cursorFillColor:this.grid.style.cursorFillColor||f.Theme.getBrandColor(3,.4),cursorBorderColor:this.grid.style.cursorBorderColor||f.Theme.getBrandColor(1),scrollShadow:this.grid.style.scrollShadow||e}):this.grid.style={voidColor:f.Theme.getBackgroundColor(),backgroundColor:f.Theme.getBackgroundColor(),gridLineColor:f.Theme.getBorderColor(),headerGridLineColor:f.Theme.getBorderColor(1),selectionFillColor:f.Theme.getBrandColor(2,.4),selectionBorderColor:f.Theme.getBrandColor(1),headerSelectionFillColor:f.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:f.Theme.getBorderColor(1),cursorFillColor:f.Theme.getBrandColor(3,.4),cursorBorderColor:f.Theme.getBrandColor(1),scrollShadow:e}}updateGridStyle(){this.setGridStyle(),this._defaultRendererSet&&this.backboneModel||(this.defaultRenderer=new r.TextRenderer({font:"12px sans-serif",textColor:f.Theme.getFontColor(),backgroundColor:this.grid.style.backgroundColor||f.Theme.getBackgroundColor(),horizontalAlignment:"left",verticalAlignment:"center"})),this._rowHeaderRenderer=new r.TextRenderer({textColor:f.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||f.Theme.getBackgroundColor(2),horizontalAlignment:"center",verticalAlignment:"center"}),this._columnHeaderRenderer=new u.HeaderRenderer({textOptions:{textColor:f.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||f.Theme.getBackgroundColor(2),horizontalAlignment:"left",verticalAlignment:"center"},isLightTheme:this._isLightTheme,grid:this.grid}),this._cornerHeaderRenderer=new u.HeaderRenderer({textOptions:{textColor:f.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||f.Theme.getBackgroundColor(2),horizontalAlignment:"left",verticalAlignment:"center"},isLightTheme:this._isLightTheme,grid:this.grid}),this._updateHeaderRenderer()}downloadAsCsv(e){let t,n,i,r,s=0,a=0;const o=this.grid,l=o.dataModel;if(!l)return;const c=l.rowCount("body"),u=l.columnCount("body");if(0===c||0===u)return;let h=l.columnCount("row-header"),d=l.rowCount("column-header");const f=o.copyConfig.format,p=o.copyConfig.headers;if(e){const e=o.selectionModel;if(!e)return;const l=Array.from(e.selections());if(0===l.length)return;if(l.length>1)return void alert("Cannot save multiple grid selections.");switch(({r1:s,c1:a,r2:i,c2:r}=l[0]),s=Math.max(0,Math.min(s,c-1)),a=Math.max(0,Math.min(a,u-1)),i=Math.max(0,Math.min(i,c-1)),r=Math.max(0,Math.min(r,u-1)),i<s&&([s,i]=[i,s]),r<a&&([a,r]=[r,a]),t=i-s+1,n=r-a+1,p){case"none":h=0,d=0;break;case"row":d=0,n+=h;break;case"column":h=0,t+=d;break;case"all":t+=d,n+=h;break;default:throw"unreachable"}}else t=c+d,n=u+h;const m={region:"body",row:0,column:0,value:null,metadata:{}},_=new Array(t);for(let e=0;e<t;++e){const t=new Array(n);for(let i=0;i<n;++i){let n,r,o;e<d&&i<h?(n="corner-header",r=e,o=i):e<d?(n="column-header",r=e,o=i-h+a):i<h?(n="row-header",r=e-d+s,o=i):(n="body",r=e-d+s,o=i-h+a),m.region=n,m.row=r,m.column=o,m.value=l.data(n,r,o),m.metadata=l.metadata(n,r,o),t[i]=f(m)}_[e]=t}const g=_.map((e=>e.join(","))).join("\n"),y=new Blob([g],{type:"text/csv"}),v=document.createElement("a");v.download="out.csv",v.href=window.URL.createObjectURL(y),document.body.appendChild(v),v.click(),document.body.removeChild(v)}get cellClicked(){return this._cellClicked}get columnsResized(){return this._columnsResized}set isLightTheme(e){this._isLightTheme=e;let t=0;e?this.removeClass("dark"):(this.addClass("dark"),t=1);const n=document.documentElement;p.forEach(((e,i)=>{n.style.setProperty(i,e[t])})),this.updateGridStyle()}get isLightTheme(){return this._isLightTheme}_rendererResolver(e){const t=e.metadata.name,n=e.region;return this._renderers.hasOwnProperty(t)?this._renderers[t]:"row-header"===n?this._rowHeaderRenderer:this._defaultRenderer}_updateGridRenderers(){this.grid.cellRenderers.update({body:this._rendererResolver.bind(this)}),this.grid.cellRenderers.update({"row-header":this._rendererResolver.bind(this)})}_updateColumnWidths(){const e=this._columnWidths,t=this.grid.mouseHandler;if(t&&t.isResizing)return;if("row"===this._headerVisibility||"all"===this._headerVisibility){const t=this._baseRowHeaderSize,n=this.grid.columnCount("row-header");for(let i=0;i<n;i++){const n=this.dataModel.columnIndexToName(i,"row-header"),r=e.hasOwnProperty(n)?e[n]:t;this.grid.resizeColumn("row-header",i,r)}}const n=this._baseColumnSize,i=this.grid.columnCount("body");for(let t=0;t<i;t++){const i=this.dataModel.columnIndexToName(t,"body"),r=e.hasOwnProperty(i)?e[i]:n;this.grid.resizeColumn("body",t,r)}}_updateHeaderRenderer(){this.grid.cellRenderers.update({"column-header":this._columnHeaderRenderer});let e=!1;this.backboneModel&&(e=null!==this.backboneModel.get("corner_renderer")),this.grid.cellRenderers.update({"corner-header":e?this._cornerHeaderRenderer:this._columnHeaderRenderer})}_createCommandRegistry(){const e=new i.CommandRegistry;return e.addCommand(c.FeatherGridContextMenu.CommandID.SortAscending,{label:"Sort Ascending",mnemonic:1,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-sortAsc",execute:e=>{const t=e,n=this._dataModel.getSchemaIndex(t.region,t.columnIndex),i=this.dataModel.currentView.dataset.columns[n];this._dataModel.addTransform({type:"sort",column:i,columnIndex:n,desc:!1})}}),e.addCommand(c.FeatherGridContextMenu.CommandID.SortDescending,{label:"Sort Descending",mnemonic:1,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-sortDesc",execute:e=>{const t=e,n=this._dataModel.getSchemaIndex(t.region,t.columnIndex),i=this.dataModel.currentView.dataset.columns[n];this._dataModel.addTransform({type:"sort",column:i,columnIndex:n,desc:!0})}}),e.addCommand(c.FeatherGridContextMenu.CommandID.ClearThisFilter,{label:"Clear This Filter",mnemonic:-1,execute:e=>{const t=e,n=this._dataModel.getSchemaIndex(t.region,t.columnIndex),i=this.dataModel.currentView.dataset.columns[n];this._dataModel.removeTransform(i,"filter")}}),e.addCommand(c.FeatherGridContextMenu.CommandID.ClearFiltersInAllColumns,{label:"Clear Filters in All Columns",mnemonic:-1,execute:e=>{const t=this._dataModel.activeTransforms.filter((e=>"filter"!==e.type));this._dataModel.replaceTransforms(t)}}),e.addCommand(c.FeatherGridContextMenu.CommandID.OpenFilterByConditionDialog,{label:"Filter by condition...",mnemonic:4,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-filter",execute:e=>{const t=e,n=this._dataModel.getSchemaIndex(t.region,t.columnIndex),i=this.dataModel.currentView.dataset.columns[n];this._filterDialog.open({x:t.clientX,y:t.clientY,region:t.region,column:i,columnIndex:t.columnIndex,forceX:!1,forceY:!1,mode:"condition"})}}),e.addCommand(c.FeatherGridContextMenu.CommandID.OpenFilterByValueDialog,{label:"Filter by value...",mnemonic:4,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-filter",execute:e=>{const t=e,n=this._dataModel.getSchemaIndex(t.region,t.columnIndex),i=this.dataModel.currentView.dataset.columns[n];this._filterDialog.open({x:t.clientX,y:t.clientY,region:t.region,column:i,columnIndex:t.columnIndex,forceX:!1,forceY:!1,mode:"value"})}}),e.addCommand(c.FeatherGridContextMenu.CommandID.CopySelectionToClipboard,{label:"Copy Selection to Clipboard",mnemonic:-1,isEnabled:()=>null!==this.grid.selectionModel&&!this.grid.selectionModel.isEmpty,execute:()=>{this.grid.copyToClipboard()}}),e.addCommand(c.FeatherGridContextMenu.CommandID.SaveSelectionAsCsv,{label:"Download Selection as CSV",mnemonic:-1,isEnabled:()=>null!==this.grid.selectionModel&&!this.grid.selectionModel.isEmpty,execute:()=>{this.downloadAsCsv(!0)}}),e.addCommand(c.FeatherGridContextMenu.CommandID.SaveAllAsCsv,{label:"Download All as CSV",mnemonic:-1,execute:()=>{this.downloadAsCsv(!1)}}),e.addCommand(c.FeatherGridContextMenu.CommandID.SortClear,{label:"No Sort",mnemonic:1,execute:e=>{const t=e,n=this._dataModel.getSchemaIndex(t.region,t.columnIndex),i=this.dataModel.currentView.dataset.columns[n];this._dataModel.removeTransform(i,"sort")}}),e.addCommand(c.FeatherGridContextMenu.CommandID.ClearSelection,{label:"Clear Selection",mnemonic:-1,execute:()=>{var e;null===(e=this.grid.selectionModel)||void 0===e||e.clear()}}),e}}t.FeatherGrid=m},2561:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),n(3179),r(n(4057),t),r(n(1117),t)},2268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyHandler=void 0;const i=n(9952);class r extends i.BasicKeyHandler{constructor(){super()}onEscape(e,t){e.selectionModel&&(e.selectionModel.selections().next()?e.selectionModel.clear():(-1===document.body.tabIndex&&(document.body.tabIndex=0),document.body.focus()))}}t.KeyHandler=r},9672:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseHandler=void 0;const i=n(9952),r=n(9327),s=n(8418),a=n(7483);class o extends i.BasicMouseHandler{constructor(e){super(),this._mouseIsDown=!1,this._cellClicked=new s.Signal(this),this._grid=e}onMouseDown(e,t){const n=e.hitTest(t.clientX,t.clientY),s=n.region,l=1.5*a.HeaderRenderer.iconWidth,c=a.HeaderRenderer.buttonPadding,u=r.Platform.accelKey(t);if(this._mouseIsDown=!0,"void"!==n.region&&this._cellClicked.emit(n),"corner-header"===s||"column-header"===s){const i=e.columnSize("corner-header"===s?"row-header":"body",n.column),r=e.rowSize("column-header",n.row),a="column-header"===n.region&&n.row==this._grid.grid.dataModel.rowCount("column-header")-1||"corner-header"===n.region&&0===n.row;if(n.x>i-l-c&&n.x<i-c&&n.y>r-l-c&&n.y<r-c&&a)return void this._grid.contextMenu.open(e,Object.assign(Object.assign({},n),{x:t.clientX+window.scrollX,y:t.clientY+window.scrollY}))}if(e){const t=o.createCellConfigObject(e,n);if(!t)return;const r=e.cellRenderers.get(t);if(r instanceof i.HyperlinkRenderer){let n=i.CellRenderer.resolveOption(r.url,t);if(n||(n=i.TextRenderer.formatGeneric()(t)),u){window.postMessage({id:"ipydatagrid::hyperlinkclick",url:n},"*");const t=this.cursorForHandle("none");e.viewport.node.style.cursor=t}}}super.onMouseDown(e,t)}onMouseUp(e,t){this._mouseIsDown=!1,super.onMouseUp(e,t)}get mouseIsDown(){return this._mouseIsDown}get isResizing(){return null!==this.pressData&&("column-resize"==this.pressData.type||"row-resize"==this.pressData.type)}get cellClicked(){return this._cellClicked}static createCellConfigObject(e,t){const{region:n,row:i,column:r}=t;if("void"===n)return;const s=e.dataModel.data(n,i,r),a=e.dataModel.metadata(n,i,r);return Object.assign(Object.assign({},t),{value:s,metadata:a})}}t.MouseHandler=o},7654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingFeatherGrid=void 0;const i=n(1067),r=n(9006);class s extends r.FeatherGrid{constructor(e){super(e),this._requestData=e.requestData,this._pullData=new i.Debouncer(this.pullDataImpl.bind(this),e.debounceDelay)}messageHook(e,t){return e===this.grid.viewport&&("scroll-request"!==t.type&&"resize"!==t.type&&"row-resize-request"!==t.type&&"column-resize-request"!==t.type||this.tick()),!0}tick(){this._pullData.invoke()}pullDataImpl(){let e=this.grid.viewport.node.offsetWidth,t=this.grid.viewport.node.offsetHeight;if(e=Math.round(e),t=Math.round(t),e<=0||t<=0)return;const n=this.grid._columnSections.length-this.grid.scrollX,i=this.grid._rowSections.length-this.grid.scrollY,r=this.grid.headerWidth,s=this.grid.headerHeight,a=r,o=s,l=Math.min(e-1,r+n-1),c=Math.min(t-1,s+i-1),u=this.grid._rowSections.indexOf(o-s+this.grid.scrollY),h=this.grid._columnSections.indexOf(a-r+this.grid.scrollX),d=this.grid._rowSections.indexOf(c-s+this.grid.scrollY),f=this.grid._columnSections.indexOf(l-r+this.grid.scrollX);this._requestData(u,d,h,f)}}t.StreamingFeatherGrid=s},9496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=t.Scalar=t.ArrayUtils=void 0;const i=n(5675);!function(e){function t(e,t,n){if(0===n)return[0,t];for(let i=0;i<e[n-1].length;i++){const r=e[n-1][i],s=r.length,a=r[0][0],o=r[s-1][0];if(t>=a&&t<=o)return[a,o]}return[]}e.generateMultiIndexArrayLocations=function(e){const t=e._dataset.schema.primaryKey.slice(0,e._dataset.schema.primaryKey.length-1),n=e._dataset.schema.fields,i=[];for(let e=0;e<n.length-1;e++)t.includes(n[e].name)||i.push(e);return i},e.generateColMergedCellLocations=function(e,t){if(0===t.length)return[];const n=e._dataset.schema.fields,i=e._dataset.schema.primaryKey.length-1,r=[];let s=[];const a=t[0];let o;for(let e=0;e<n[a].rows.length;e++){let a=[];for(const r of t){const t=n[r].rows[e];0==a.length||o==t?a.push([e,r-i]):(s.push(a),a=[[e,r-i]]),o=t}s.push(a),r.push(s),s=[]}return r},e.generateRowMergedCellLocations=function(e){const n=e._dataset,i=n.schema.primaryKey.slice(0,n.schema.primaryKey.length-1);if(!(i.length>1))return[];const r=n.data,s=[];let a=[];for(let e=0;e<i.length;e++){let o,l=[];for(let c=0;c<n.length;c++){const n=r[i[e]][c],[u,h]=t(s,c,e);0==l.length||o==n&&l[0][0]>=u&&c<=h?l.push([c,e]):(a.push(l),l=[[c,e]]),o=n}a.push(l),s.push(a),a=[]}return s},e.validateMergingHierarchy=function(e){let t;for(const n of e)if(void 0!==t){if(n.length<t)return!1;t=n.length}else t=n.length;return!0},e.generateColumnCellGroups=function(e){const t=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)if(e[n][i].length>1){const r=e[n][i].length,s=e[n][i][0][1],a=e[n][i][r-1][1];t.push({r1:n,c1:s,r2:n,c2:a})}return t},e.generateRowCellGroups=function(e){const t=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)if(e[n][i].length>1){const r=e[n][i].length,s=e[n][i][0][0],a=e[n][i][r-1][0];t.push({r1:s,c1:n,r2:a,c2:n})}return t}}(t.ArrayUtils||(t.ArrayUtils={})),(t.Scalar||(t.Scalar={})).isScalar=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e},function(e){function t(e){const t=document.querySelector(".ipydatagrid-widget")||document.body;return window.getComputedStyle(t).getPropertyValue(e)||"#ffffff"}function n(e,n=1){return function(e,t){const n=i.rgb(e);return n.opacity=t,n.formatRgb()}(t(e),n)}e.getComputedColor=t,e.getCSSColor=n,e.getBackgroundColor=function(e=0,t=1){return n("--ipydatagrid-layout-color"+e,t)},e.getFontColor=function(e=0,t=1){return n("--ipydatagrid-ui-font-color"+e,t)},e.getBorderColor=function(e=0,t=1){return n("--ipydatagrid-border-color"+e,t)},e.getBrandColor=function(e=0,t=1){return n("--ipydatagrid-brand-color"+e,t)}}(t.Theme||(t.Theme={}))},9915:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VegaExprView=t.VegaExprModel=void 0;const i=n(1041),r=n(6879),s=n(5430),a=n(2055),o=n(4057),l=r.defaultLocale(),c={context:{dataflow:{locale:()=>l}}};for(const e in s.functionContext)s.functionContext[e]=s.functionContext[e].bind(c);class u extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:u.model_name,_model_module:u.model_module,_model_module_version:u.model_module_version,value:"default_value"})}initialize(e,t){super.initialize(e,t);const n={whitelist:["cell","default_value","functions"],globalvar:"cell",functions:e=>{const t=i.functions(e);for(const e in s.functionContext)t[e]="functions."+e;return t}};this._codegen=i.codegen(n),this.updateFunction(),this.on("change:value",this.updateFunction.bind(this))}process(e,t){return this._function(e,t,s.functionContext)}_processRegex(e,t){const n=t.match(/\[(.*?)\]/g),i=n[0].match(/\[(.*?)\]/)[1];return 1===n.length?`cell.metadata.data(cell.row, ${i})`:`cell.metadata.data(cell.row, ${i})${n.splice(1).join("")}`}_augmentExpression(e){let t=e.code;return t=t.replace(/cell.metadata.data(?<data>(\[(.*?)\])+)/g,this._processRegex),e.code=t,e}updateFunction(){let e=this._codegen(i.parse(this.get("value")));e=this._augmentExpression(e),this._function=Function("cell","default_value","functions",'"use strict";return('+e.code+")")}}t.VegaExprModel=u,u.model_name="VegaExprModel",u.model_module=o.MODULE_NAME,u.model_module_version=o.MODULE_VERSION,u.view_name="VegaExprView",u.view_module=o.MODULE_NAME,u.view_module_version=o.MODULE_VERSION;class h extends a.WidgetView{process(e,t){return this.model.process(e,t)}}t.VegaExprView=h},4057:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const i=n(8330);t.MODULE_VERSION=i.version,t.MODULE_NAME=i.name},6815:(e,t,n)=>{"use strict";e.exports=n.p+"f7326c9c6f75ea275ebb.svg"},198:(e,t,n)=>{"use strict";e.exports=n.p+"65a6e866e3629f704aec.svg"},8886:(e,t,n)=>{"use strict";e.exports=n.p+"96d88fdbfa699aa6426f.svg"},9357:(e,t,n)=>{"use strict";e.exports=n.p+"c16601f015b857497b62.svg"},9218:(e,t,n)=>{"use strict";e.exports=n.p+"54fe791afb0aec781e8a.svg"},5838:(e,t,n)=>{"use strict";e.exports=n.p+"e2d84c4e4f8354bfa7c9.svg"},2515:(e,t,n)=>{"use strict";e.exports=n.p+"81bf728c0119b97a865c.png"},3860:(e,t,n)=>{"use strict";e.exports=n.p+"63f3cfe3c7682305cb2a.png"},2577:(e,t,n)=>{"use strict";e.exports=n.p+"d1ad2f913c5dc1f01a03.png"},576:(e,t,n)=>{"use strict";e.exports=n.p+"c1e1ed3a9c1ad6a35a55.png"},2055:t=>{"use strict";t.exports=e},5036:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>b,Gw:()=>L,KI:()=>P,Q1:()=>r,Qh:()=>S,Uw:()=>a,b:()=>w,ef:()=>s});var i=n(3840);function r(){}var s=.7,a=1/s,o="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,h=new RegExp(`^rgb\\(${o},${o},${o}\\)$`),d=new RegExp(`^rgb\\(${c},${c},${c}\\)$`),f=new RegExp(`^rgba\\(${o},${o},${o},${l}\\)$`),p=new RegExp(`^rgba\\(${c},${c},${c},${l}\\)$`),m=new RegExp(`^hsl\\(${l},${c},${c}\\)$`),_=new RegExp(`^hsla\\(${l},${c},${c},${l}\\)$`),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function b(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?x(t):3===n?new L(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?M(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?M(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=h.exec(e))?new L(t[1],t[2],t[3],1):(t=d.exec(e))?new L(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?M(t[1],t[2],t[3],t[4]):(t=p.exec(e))?M(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m.exec(e))?D(t[1],t[2]/100,t[3]/100,1):(t=_.exec(e))?D(t[1],t[2]/100,t[3]/100,t[4]):g.hasOwnProperty(e)?x(g[e]):"transparent"===e?new L(NaN,NaN,NaN,0):null}function x(e){return new L(e>>16&255,e>>8&255,255&e,1)}function M(e,t,n,i){return i<=0&&(e=t=n=NaN),new L(e,t,n,i)}function w(e){return e instanceof r||(e=b(e)),e?new L((e=e.rgb()).r,e.g,e.b,e.opacity):new L}function S(e,t,n,i){return 1===arguments.length?w(e):new L(e,t,n,null==i?1:i)}function L(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function T(){return`#${C(this.r)}${C(this.g)}${C(this.b)}`}function k(){const e=A(this.opacity);return`${1===e?"rgb(":"rgba("}${E(this.r)}, ${E(this.g)}, ${E(this.b)}${1===e?")":`, ${e})`}`}function A(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function E(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function C(e){return((e=E(e))<16?"0":"")+e.toString(16)}function D(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new R(e,t,n,i)}function O(e){if(e instanceof R)return new R(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=b(e)),!e)return new R;if(e instanceof R)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,s=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,l=a-s,c=(a+s)/2;return l?(o=t===a?(n-i)/l+6*(n<i):n===a?(i-t)/l+2:(t-n)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new R(o,l,c,e.opacity)}function P(e,t,n,i){return 1===arguments.length?O(e):new R(e,t,n,null==i?1:i)}function R(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function z(e){return(e=(e||0)%360)<0?e+360:e}function B(e){return Math.max(0,Math.min(1,e||0))}function Y(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}(0,i.A)(r,b,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:y,formatHex:y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:v,toString:v}),(0,i.A)(L,S,(0,i.X)(r,{brighter(e){return e=null==e?a:Math.pow(a,e),new L(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?s:Math.pow(s,e),new L(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new L(E(this.r),E(this.g),E(this.b),A(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatHex8:function(){return`#${C(this.r)}${C(this.g)}${C(this.b)}${C(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:k,toString:k})),(0,i.A)(R,P,(0,i.X)(r,{brighter(e){return e=null==e?a:Math.pow(a,e),new R(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?s:Math.pow(s,e),new R(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new L(Y(e>=240?e-240:e+120,r,i),Y(e,r,i),Y(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new R(z(this.h),B(this.s),B(this.l),A(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=A(this.opacity);return`${1===e?"hsl(":"hsla("}${z(this.h)}, ${100*B(this.s)}%, ${100*B(this.l)}%${1===e?")":`, ${e})`}`}}))},740:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(3840),r=n(5036),s=n(7457),a=-.14861,o=1.78277,l=-.29227,c=-.90649,u=1.97294,h=u*c,d=u*o,f=o*l-c*a;function p(e,t,n,i){return 1===arguments.length?function(e){if(e instanceof m)return new m(e.h,e.s,e.l,e.opacity);e instanceof r.Gw||(e=(0,r.b)(e));var t=e.r/255,n=e.g/255,i=e.b/255,a=(f*i+h*t-d*n)/(f+h-d),o=i-a,p=(u*(n-a)-l*o)/c,_=Math.sqrt(p*p+o*o)/(u*a*(1-a)),g=_?Math.atan2(p,o)*s.u-120:NaN;return new m(g<0?g+360:g,_,a,e.opacity)}(e):new m(e,t,n,null==i?1:i)}function m(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}(0,i.A)(m,p,(0,i.X)(r.Q1,{brighter(e){return e=null==e?r.Uw:Math.pow(r.Uw,e),new m(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?r.ef:Math.pow(r.ef,e),new m(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*s.F,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),h=Math.sin(e);return new r.Gw(255*(t+n*(a*i+o*h)),255*(t+n*(l*i+c*h)),255*(t+n*(u*i)),this.opacity)}}))},3840:(e,t,n)=>{"use strict";function i(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function r(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}n.d(t,{A:()=>i,X:()=>r})},5675:(e,t,n)=>{"use strict";n.r(t),n.d(t,{color:()=>i.Ay,cubehelix:()=>s.A,gray:()=>r.wm,hcl:()=>r.aq,hsl:()=>i.KI,lab:()=>r.Ay,lch:()=>r.s1,rgb:()=>i.Qh});var i=n(5036),r=n(3503),s=n(740)},3503:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,aq:()=>w,s1:()=>M,wm:()=>p});var i=n(3840),r=n(5036),s=n(7457);const a=.96422,o=1,l=.82521,c=4/29,u=6/29,h=3*u*u,d=u*u*u;function f(e){if(e instanceof _)return new _(e.l,e.a,e.b,e.opacity);if(e instanceof S)return L(e);e instanceof r.Gw||(e=(0,r.b)(e));var t,n,i=b(e.r),s=b(e.g),c=b(e.b),u=g((.2225045*i+.7168786*s+.0606169*c)/o);return i===s&&s===c?t=n=u:(t=g((.4360747*i+.3850649*s+.1430804*c)/a),n=g((.0139322*i+.0971045*s+.7141733*c)/l)),new _(116*u-16,500*(t-u),200*(u-n),e.opacity)}function p(e,t){return new _(e,0,0,null==t?1:t)}function m(e,t,n,i){return 1===arguments.length?f(e):new _(e,t,n,null==i?1:i)}function _(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function g(e){return e>d?Math.pow(e,1/3):e/h+c}function y(e){return e>u?e*e*e:h*(e-c)}function v(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x(e){if(e instanceof S)return new S(e.h,e.c,e.l,e.opacity);if(e instanceof _||(e=f(e)),0===e.a&&0===e.b)return new S(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*s.u;return new S(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function M(e,t,n,i){return 1===arguments.length?x(e):new S(n,t,e,null==i?1:i)}function w(e,t,n,i){return 1===arguments.length?x(e):new S(e,t,n,null==i?1:i)}function S(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function L(e){if(isNaN(e.h))return new _(e.l,0,0,e.opacity);var t=e.h*s.F;return new _(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,i.A)(_,m,(0,i.X)(r.Q1,{brighter(e){return new _(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new _(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=a*y(t),e=o*y(e),n=l*y(n),new r.Gw(v(3.1338561*t-1.6168667*e-.4906146*n),v(-.9787684*t+1.9161415*e+.033454*n),v(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),(0,i.A)(S,w,(0,i.X)(r.Q1,{brighter(e){return new S(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new S(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return L(this).rgb()}}))},7457:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,u:()=>r});const i=Math.PI/180,r=180/Math.PI},6731:(e,t,n)=>{"use strict";n.r(t),n.d(t,{VERSION:()=>r,after:()=>Rt,all:()=>en,allKeys:()=>_e,any:()=>tn,assign:()=>Re,before:()=>zt,bind:()=>Mt,bindAll:()=>Lt,chain:()=>yt,chunk:()=>Fn,clone:()=>Fe,collect:()=>Xt,compact:()=>kn,compose:()=>Pt,constant:()=>Z,contains:()=>nn,countBy:()=>gn,create:()=>Ye,debounce:()=>Ct,default:()=>Un,defaults:()=>ze,defer:()=>At,delay:()=>kt,detect:()=>Gt,difference:()=>En,drop:()=>Ln,each:()=>qt,escape:()=>at,every:()=>en,extend:()=>Pe,extendOwn:()=>Re,filter:()=>Zt,find:()=>Gt,findIndex:()=>Nt,findKey:()=>Yt,findLastIndex:()=>It,findWhere:()=>Vt,first:()=>Sn,flatten:()=>An,foldl:()=>Jt,foldr:()=>Kt,forEach:()=>qt,functions:()=>De,get:()=>Ue,groupBy:()=>mn,has:()=>We,head:()=>Sn,identity:()=>Ge,include:()=>nn,includes:()=>nn,indexBy:()=>_n,indexOf:()=>Ut,initial:()=>wn,inject:()=>Jt,intersection:()=>Pn,invert:()=>Ce,invoke:()=>rn,isArguments:()=>$,isArray:()=>V,isArrayBuffer:()=>Y,isBoolean:()=>A,isDataView:()=>G,isDate:()=>P,isElement:()=>E,isEmpty:()=>le,isEqual:()=>me,isError:()=>z,isFinite:()=>J,isFunction:()=>I,isMap:()=>Se,isMatch:()=>ce,isNaN:()=>K,isNull:()=>T,isNumber:()=>O,isObject:()=>L,isRegExp:()=>R,isSet:()=>Te,isString:()=>D,isSymbol:()=>B,isTypedArray:()=>re,isUndefined:()=>k,isWeakMap:()=>Le,isWeakSet:()=>ke,iteratee:()=>Je,keys:()=>oe,last:()=>Tn,lastIndexOf:()=>Wt,map:()=>Xt,mapObject:()=>Ze,matcher:()=>Ve,matches:()=>Ve,max:()=>on,memoize:()=>Tt,methods:()=>De,min:()=>ln,mixin:()=>In,negate:()=>Ot,noop:()=>Qe,now:()=>it,object:()=>Bn,omit:()=>Mn,once:()=>Bt,pairs:()=>Ee,partial:()=>xt,partition:()=>yn,pick:()=>xn,pluck:()=>sn,property:()=>qe,propertyOf:()=>et,random:()=>nt,range:()=>Yn,reduce:()=>Jt,reduceRight:()=>Kt,reject:()=>Qt,rest:()=>Ln,restArguments:()=>S,result:()=>mt,sample:()=>hn,select:()=>Zt,shuffle:()=>dn,size:()=>vn,some:()=>tn,sortBy:()=>fn,sortedIndex:()=>Ht,tail:()=>Ln,take:()=>Sn,tap:()=>Ne,template:()=>pt,templateSettings:()=>lt,throttle:()=>Et,times:()=>tt,toArray:()=>un,toPath:()=>Ie,transpose:()=>Rn,unescape:()=>ot,union:()=>On,uniq:()=>Dn,unique:()=>Dn,uniqueId:()=>gt,unzip:()=>Rn,values:()=>Ae,where:()=>an,without:()=>Cn,wrap:()=>Dt,zip:()=>zn});var i={};n.r(i),n.d(i,{VERSION:()=>r,after:()=>Rt,all:()=>en,allKeys:()=>_e,any:()=>tn,assign:()=>Re,before:()=>zt,bind:()=>Mt,bindAll:()=>Lt,chain:()=>yt,chunk:()=>Fn,clone:()=>Fe,collect:()=>Xt,compact:()=>kn,compose:()=>Pt,constant:()=>Z,contains:()=>nn,countBy:()=>gn,create:()=>Ye,debounce:()=>Ct,default:()=>Hn,defaults:()=>ze,defer:()=>At,delay:()=>kt,detect:()=>Gt,difference:()=>En,drop:()=>Ln,each:()=>qt,escape:()=>at,every:()=>en,extend:()=>Pe,extendOwn:()=>Re,filter:()=>Zt,find:()=>Gt,findIndex:()=>Nt,findKey:()=>Yt,findLastIndex:()=>It,findWhere:()=>Vt,first:()=>Sn,flatten:()=>An,foldl:()=>Jt,foldr:()=>Kt,forEach:()=>qt,functions:()=>De,get:()=>Ue,groupBy:()=>mn,has:()=>We,head:()=>Sn,identity:()=>Ge,include:()=>nn,includes:()=>nn,indexBy:()=>_n,indexOf:()=>Ut,initial:()=>wn,inject:()=>Jt,intersection:()=>Pn,invert:()=>Ce,invoke:()=>rn,isArguments:()=>$,isArray:()=>V,isArrayBuffer:()=>Y,isBoolean:()=>A,isDataView:()=>G,isDate:()=>P,isElement:()=>E,isEmpty:()=>le,isEqual:()=>me,isError:()=>z,isFinite:()=>J,isFunction:()=>I,isMap:()=>Se,isMatch:()=>ce,isNaN:()=>K,isNull:()=>T,isNumber:()=>O,isObject:()=>L,isRegExp:()=>R,isSet:()=>Te,isString:()=>D,isSymbol:()=>B,isTypedArray:()=>re,isUndefined:()=>k,isWeakMap:()=>Le,isWeakSet:()=>ke,iteratee:()=>Je,keys:()=>oe,last:()=>Tn,lastIndexOf:()=>Wt,map:()=>Xt,mapObject:()=>Ze,matcher:()=>Ve,matches:()=>Ve,max:()=>on,memoize:()=>Tt,methods:()=>De,min:()=>ln,mixin:()=>In,negate:()=>Ot,noop:()=>Qe,now:()=>it,object:()=>Bn,omit:()=>Mn,once:()=>Bt,pairs:()=>Ee,partial:()=>xt,partition:()=>yn,pick:()=>xn,pluck:()=>sn,property:()=>qe,propertyOf:()=>et,random:()=>nt,range:()=>Yn,reduce:()=>Jt,reduceRight:()=>Kt,reject:()=>Qt,rest:()=>Ln,restArguments:()=>S,result:()=>mt,sample:()=>hn,select:()=>Zt,shuffle:()=>dn,size:()=>vn,some:()=>tn,sortBy:()=>fn,sortedIndex:()=>Ht,tail:()=>Ln,take:()=>Sn,tap:()=>Ne,template:()=>pt,templateSettings:()=>lt,throttle:()=>Et,times:()=>tt,toArray:()=>un,toPath:()=>Ie,transpose:()=>Rn,unescape:()=>ot,union:()=>On,uniq:()=>Dn,unique:()=>Dn,uniqueId:()=>gt,unzip:()=>Rn,values:()=>Ae,where:()=>an,without:()=>Cn,wrap:()=>Dt,zip:()=>zn});var r="1.13.6",s="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},a=Array.prototype,o=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,u=a.slice,h=o.toString,d=o.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,m=Array.isArray,_=Object.keys,g=Object.create,y=f&&ArrayBuffer.isView,v=isNaN,b=isFinite,x=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],w=Math.pow(2,53)-1;function S(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var s=Array(t+1);for(r=0;r<t;r++)s[r]=arguments[r];return s[t]=i,e.apply(this,s)}}function L(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function T(e){return null===e}function k(e){return void 0===e}function A(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)}function E(e){return!(!e||1!==e.nodeType)}function C(e){var t="[object "+e+"]";return function(e){return h.call(e)===t}}const D=C("String"),O=C("Number"),P=C("Date"),R=C("RegExp"),z=C("Error"),B=C("Symbol"),Y=C("ArrayBuffer");var F=C("Function"),N=s.document&&s.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof N&&(F=function(e){return"function"==typeof e||!1});const I=F,H=C("Object");var j=p&&H(new DataView(new ArrayBuffer(8))),U="undefined"!=typeof Map&&H(new Map),W=C("DataView");const G=j?function(e){return null!=e&&I(e.getInt8)&&Y(e.buffer)}:W,V=m||C("Array");function q(e,t){return null!=e&&d.call(e,t)}var X=C("Arguments");!function(){X(arguments)||(X=function(e){return q(e,"callee")})}();const $=X;function J(e){return!B(e)&&b(e)&&!isNaN(parseFloat(e))}function K(e){return O(e)&&v(e)}function Z(e){return function(){return e}}function Q(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=w}}function ee(e){return function(t){return null==t?void 0:t[e]}}const te=ee("byteLength"),ne=Q(te);var ie=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const re=f?function(e){return y?y(e)&&!G(e):ne(e)&&ie.test(h.call(e))}:Z(!1),se=ee("length");function ae(e,t){t=function(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=M.length,i=e.constructor,r=I(i)&&i.prototype||o,s="constructor";for(q(e,s)&&!t.contains(s)&&t.push(s);n--;)(s=M[n])in e&&e[s]!==r[s]&&!t.contains(s)&&t.push(s)}function oe(e){if(!L(e))return[];if(_)return _(e);var t=[];for(var n in e)q(e,n)&&t.push(n);return x&&ae(e,t),t}function le(e){if(null==e)return!0;var t=se(e);return"number"==typeof t&&(V(e)||D(e)||$(e))?0===t:0===se(oe(e))}function ce(e,t){var n=oe(t),i=n.length;if(null==e)return!i;for(var r=Object(e),s=0;s<i;s++){var a=n[s];if(t[a]!==r[a]||!(a in r))return!1}return!0}function ue(e){return e instanceof ue?e:this instanceof ue?void(this._wrapped=e):new ue(e)}function he(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,te(e))}ue.VERSION=r,ue.prototype.value=function(){return this._wrapped},ue.prototype.valueOf=ue.prototype.toJSON=ue.prototype.value,ue.prototype.toString=function(){return String(this._wrapped)};var de="[object DataView]";function fe(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&pe(e,t,n,i)}function pe(e,t,n,i){e instanceof ue&&(e=e._wrapped),t instanceof ue&&(t=t._wrapped);var r=h.call(e);if(r!==h.call(t))return!1;if(j&&"[object Object]"==r&&G(e)){if(!G(t))return!1;r=de}switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t);case"[object ArrayBuffer]":case de:return pe(he(e),he(t),n,i)}var s="[object Array]"===r;if(!s&&re(e)){if(te(e)!==te(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,o=t.constructor;if(a!==o&&!(I(a)&&a instanceof a&&I(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!fe(e[c],t[c],n,i))return!1}else{var u,d=oe(e);if(c=d.length,oe(t).length!==c)return!1;for(;c--;)if(!q(t,u=d[c])||!fe(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0}function me(e,t){return fe(e,t)}function _e(e){if(!L(e))return[];var t=[];for(var n in e)t.push(n);return x&&ae(e,t),t}function ge(e){var t=se(e);return function(n){if(null==n)return!1;var i=_e(n);if(se(i))return!1;for(var r=0;r<t;r++)if(!I(n[e[r]]))return!1;return e!==Me||!I(n[ye])}}var ye="forEach",ve=["clear","delete"],be=["get","has","set"],xe=ve.concat(ye,be),Me=ve.concat(be),we=["add"].concat(ve,ye,"has");const Se=U?ge(xe):C("Map"),Le=U?ge(Me):C("WeakMap"),Te=U?ge(we):C("Set"),ke=C("WeakSet");function Ae(e){for(var t=oe(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i}function Ee(e){for(var t=oe(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i}function Ce(e){for(var t={},n=oe(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t}function De(e){var t=[];for(var n in e)I(e[n])&&t.push(n);return t.sort()}function Oe(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var s=arguments[r],a=e(s),o=a.length,l=0;l<o;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=s[c])}return n}}const Pe=Oe(_e),Re=Oe(oe),ze=Oe(_e,!0);function Be(e){if(!L(e))return{};if(g)return g(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Ye(e,t){var n=Be(e);return t&&Re(n,t),n}function Fe(e){return L(e)?V(e)?e.slice():Pe({},e):e}function Ne(e,t){return t(e),e}function Ie(e){return V(e)?e:[e]}function He(e){return ue.toPath(e)}function je(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function Ue(e,t,n){var i=je(e,He(t));return k(i)?n:i}function We(e,t){for(var n=(t=He(t)).length,i=0;i<n;i++){var r=t[i];if(!q(e,r))return!1;e=e[r]}return!!n}function Ge(e){return e}function Ve(e){return e=Re({},e),function(t){return ce(t,e)}}function qe(e){return e=He(e),function(t){return je(t,e)}}function Xe(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,s){return e.call(t,n,i,r,s)}}return function(){return e.apply(t,arguments)}}function $e(e,t,n){return null==e?Ge:I(e)?Xe(e,t,n):L(e)&&!V(e)?Ve(e):qe(e)}function Je(e,t){return $e(e,t,1/0)}function Ke(e,t,n){return ue.iteratee!==Je?ue.iteratee(e,t):$e(e,t,n)}function Ze(e,t,n){t=Ke(t,n);for(var i=oe(e),r=i.length,s={},a=0;a<r;a++){var o=i[a];s[o]=t(e[o],o,e)}return s}function Qe(){}function et(e){return null==e?Qe:function(t){return Ue(e,t)}}function tt(e,t,n){var i=Array(Math.max(0,e));t=Xe(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i}function nt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ue.toPath=Ie,ue.iteratee=Je;const it=Date.now||function(){return(new Date).getTime()};function rt(e){var t=function(t){return e[t]},n="(?:"+oe(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}}const st={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},at=rt(st),ot=rt(Ce(st)),lt=ue.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ct=/(.)^/,ut={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ht=/\\|'|\r|\n|\u2028|\u2029/g;function dt(e){return"\\"+ut[e]}var ft=/^\s*(\w|\$)+\s*$/;function pt(e,t,n){!t&&n&&(t=n),t=ze({},t,ue.templateSettings);var i=RegExp([(t.escape||ct).source,(t.interpolate||ct).source,(t.evaluate||ct).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(i,(function(t,n,i,a,o){return s+=e.slice(r,o).replace(ht,dt),r=o+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(s+="';\n"+a+"\n__p+='"),t})),s+="';\n";var a,o=t.variable;if(o){if(!ft.test(o))throw new Error("variable is not a bare identifier: "+o)}else s="with(obj||{}){\n"+s+"}\n",o="obj";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{a=new Function(o,"_",s)}catch(e){throw e.source=s,e}var l=function(e){return a.call(this,e,ue)};return l.source="function("+o+"){\n"+s+"}",l}function mt(e,t,n){var i=(t=He(t)).length;if(!i)return I(n)?n.call(e):n;for(var r=0;r<i;r++){var s=null==e?void 0:e[t[r]];void 0===s&&(s=n,r=i),e=I(s)?s.call(e):s}return e}var _t=0;function gt(e){var t=++_t+"";return e?e+t:t}function yt(e){var t=ue(e);return t._chain=!0,t}function vt(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var s=Be(e.prototype),a=e.apply(s,r);return L(a)?a:s}var bt=S((function(e,t){var n=bt.placeholder,i=function(){for(var r=0,s=t.length,a=Array(s),o=0;o<s;o++)a[o]=t[o]===n?arguments[r++]:t[o];for(;r<arguments.length;)a.push(arguments[r++]);return vt(e,i,this,this,a)};return i}));bt.placeholder=ue;const xt=bt,Mt=S((function(e,t,n){if(!I(e))throw new TypeError("Bind must be called on a function");var i=S((function(r){return vt(e,i,t,this,n.concat(r))}));return i})),wt=Q(se);function St(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var r=i.length,s=0,a=se(e);s<a;s++){var o=e[s];if(wt(o)&&(V(o)||$(o)))if(t>1)St(o,t-1,n,i),r=i.length;else for(var l=0,c=o.length;l<c;)i[r++]=o[l++];else n||(i[r++]=o)}return i}const Lt=S((function(e,t){var n=(t=St(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=Mt(e[i],e)}return e}));function Tt(e,t){var n=function(i){var r=n.cache,s=""+(t?t.apply(this,arguments):i);return q(r,s)||(r[s]=e.apply(this,arguments)),r[s]};return n.cache={},n}const kt=S((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),At=xt(kt,ue,1);function Et(e,t,n){var i,r,s,a,o=0;n||(n={});var l=function(){o=!1===n.leading?0:it(),i=null,a=e.apply(r,s),i||(r=s=null)},c=function(){var c=it();o||!1!==n.leading||(o=c);var u=t-(c-o);return r=this,s=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),o=c,a=e.apply(r,s),i||(r=s=null)):i||!1===n.trailing||(i=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(i),o=0,i=r=s=null},c}function Ct(e,t,n){var i,r,s,a,o,l=function(){var c=it()-r;t>c?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,s)),i||(s=o=null))},c=S((function(c){return o=this,s=c,r=it(),i||(i=setTimeout(l,t),n&&(a=e.apply(o,s))),a}));return c.cancel=function(){clearTimeout(i),i=s=o=null},c}function Dt(e,t){return xt(t,e)}function Ot(e){return function(){return!e.apply(this,arguments)}}function Pt(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function Rt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function zt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const Bt=xt(zt,2);function Yt(e,t,n){t=Ke(t,n);for(var i,r=oe(e),s=0,a=r.length;s<a;s++)if(t(e[i=r[s]],i,e))return i}function Ft(e){return function(t,n,i){n=Ke(n,i);for(var r=se(t),s=e>0?0:r-1;s>=0&&s<r;s+=e)if(n(t[s],s,t))return s;return-1}}const Nt=Ft(1),It=Ft(-1);function Ht(e,t,n,i){for(var r=(n=Ke(n,i,1))(t),s=0,a=se(e);s<a;){var o=Math.floor((s+a)/2);n(e[o])<r?s=o+1:a=o}return s}function jt(e,t,n){return function(i,r,s){var a=0,o=se(i);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(n&&s&&o)return i[s=n(i,r)]===r?s:-1;if(r!=r)return(s=t(u.call(i,a,o),K))>=0?s+a:-1;for(s=e>0?a:o-1;s>=0&&s<o;s+=e)if(i[s]===r)return s;return-1}}const Ut=jt(1,Nt,Ht),Wt=jt(-1,It);function Gt(e,t,n){var i=(wt(e)?Nt:Yt)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function Vt(e,t){return Gt(e,Ve(t))}function qt(e,t,n){var i,r;if(t=Xe(t,n),wt(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var s=oe(e);for(i=0,r=s.length;i<r;i++)t(e[s[i]],s[i],e)}return e}function Xt(e,t,n){t=Ke(t,n);for(var i=!wt(e)&&oe(e),r=(i||e).length,s=Array(r),a=0;a<r;a++){var o=i?i[a]:a;s[a]=t(e[o],o,e)}return s}function $t(e){return function(t,n,i,r){var s=arguments.length>=3;return function(t,n,i,r){var s=!wt(t)&&oe(t),a=(s||t).length,o=e>0?0:a-1;for(r||(i=t[s?s[o]:o],o+=e);o>=0&&o<a;o+=e){var l=s?s[o]:o;i=n(i,t[l],l,t)}return i}(t,Xe(n,r,4),i,s)}}const Jt=$t(1),Kt=$t(-1);function Zt(e,t,n){var i=[];return t=Ke(t,n),qt(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function Qt(e,t,n){return Zt(e,Ot(Ke(t)),n)}function en(e,t,n){t=Ke(t,n);for(var i=!wt(e)&&oe(e),r=(i||e).length,s=0;s<r;s++){var a=i?i[s]:s;if(!t(e[a],a,e))return!1}return!0}function tn(e,t,n){t=Ke(t,n);for(var i=!wt(e)&&oe(e),r=(i||e).length,s=0;s<r;s++){var a=i?i[s]:s;if(t(e[a],a,e))return!0}return!1}function nn(e,t,n,i){return wt(e)||(e=Ae(e)),("number"!=typeof n||i)&&(n=0),Ut(e,t,n)>=0}const rn=S((function(e,t,n){var i,r;return I(t)?r=t:(t=He(t),i=t.slice(0,-1),t=t[t.length-1]),Xt(e,(function(e){var s=r;if(!s){if(i&&i.length&&(e=je(e,i)),null==e)return;s=e[t]}return null==s?s:s.apply(e,n)}))}));function sn(e,t){return Xt(e,qe(t))}function an(e,t){return Zt(e,Ve(t))}function on(e,t,n){var i,r,s=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var o=0,l=(e=wt(e)?e:Ae(e)).length;o<l;o++)null!=(i=e[o])&&i>s&&(s=i);else t=Ke(t,n),qt(e,(function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&s===-1/0)&&(s=e,a=r)}));return s}function ln(e,t,n){var i,r,s=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var o=0,l=(e=wt(e)?e:Ae(e)).length;o<l;o++)null!=(i=e[o])&&i<s&&(s=i);else t=Ke(t,n),qt(e,(function(e,n,i){((r=t(e,n,i))<a||r===1/0&&s===1/0)&&(s=e,a=r)}));return s}var cn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function un(e){return e?V(e)?u.call(e):D(e)?e.match(cn):wt(e)?Xt(e,Ge):Ae(e):[]}function hn(e,t,n){if(null==t||n)return wt(e)||(e=Ae(e)),e[nt(e.length-1)];var i=un(e),r=se(i);t=Math.max(Math.min(t,r),0);for(var s=r-1,a=0;a<t;a++){var o=nt(a,s),l=i[a];i[a]=i[o],i[o]=l}return i.slice(0,t)}function dn(e){return hn(e,1/0)}function fn(e,t,n){var i=0;return t=Ke(t,n),sn(Xt(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")}function pn(e,t){return function(n,i,r){var s=t?[[],[]]:{};return i=Ke(i,r),qt(n,(function(t,r){var a=i(t,r,n);e(s,t,a)})),s}}const mn=pn((function(e,t,n){q(e,n)?e[n].push(t):e[n]=[t]})),_n=pn((function(e,t,n){e[n]=t})),gn=pn((function(e,t,n){q(e,n)?e[n]++:e[n]=1})),yn=pn((function(e,t,n){e[n?0:1].push(t)}),!0);function vn(e){return null==e?0:wt(e)?e.length:oe(e).length}function bn(e,t,n){return t in n}const xn=S((function(e,t){var n={},i=t[0];if(null==e)return n;I(i)?(t.length>1&&(i=Xe(i,t[1])),t=_e(e)):(i=bn,t=St(t,!1,!1),e=Object(e));for(var r=0,s=t.length;r<s;r++){var a=t[r],o=e[a];i(o,a,e)&&(n[a]=o)}return n})),Mn=S((function(e,t){var n,i=t[0];return I(i)?(i=Ot(i),t.length>1&&(n=t[1])):(t=Xt(St(t,!1,!1),String),i=function(e,n){return!nn(t,n)}),xn(e,i,n)}));function wn(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Sn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:wn(e,e.length-t)}function Ln(e,t,n){return u.call(e,null==t||n?1:t)}function Tn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Ln(e,Math.max(0,e.length-t))}function kn(e){return Zt(e,Boolean)}function An(e,t){return St(e,t,!1)}const En=S((function(e,t){return t=St(t,!0,!0),Zt(e,(function(e){return!nn(t,e)}))})),Cn=S((function(e,t){return En(e,t)}));function Dn(e,t,n,i){A(t)||(i=n,n=t,t=!1),null!=n&&(n=Ke(n,i));for(var r=[],s=[],a=0,o=se(e);a<o;a++){var l=e[a],c=n?n(l,a,e):l;t&&!n?(a&&s===c||r.push(l),s=c):n?nn(s,c)||(s.push(c),r.push(l)):nn(r,l)||r.push(l)}return r}const On=S((function(e){return Dn(St(e,!0,!0))}));function Pn(e){for(var t=[],n=arguments.length,i=0,r=se(e);i<r;i++){var s=e[i];if(!nn(t,s)){var a;for(a=1;a<n&&nn(arguments[a],s);a++);a===n&&t.push(s)}}return t}function Rn(e){for(var t=e&&on(e,se).length||0,n=Array(t),i=0;i<t;i++)n[i]=sn(e,i);return n}const zn=S(Rn);function Bn(e,t){for(var n={},i=0,r=se(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function Yn(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),s=0;s<i;s++,e+=n)r[s]=e;return r}function Fn(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(u.call(e,i,i+=t));return n}function Nn(e,t){return e._chain?ue(t).chain():t}function In(e){return qt(De(e),(function(t){var n=ue[t]=e[t];ue.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),Nn(this,n.apply(ue,e))}})),ue}qt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];ue.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Nn(this,n)}})),qt(["concat","join","slice"],(function(e){var t=a[e];ue.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Nn(this,e)}}));const Hn=ue;var jn=In(i);jn._=jn;const Un=jn},1812:e=>{"use strict";e.exports={version:"0.5.43"}},8330:e=>{"use strict";e.exports=JSON.parse('{"name":"ipydatagrid","version":"1.4.0","description":"Fast Datagrid widget for the Jupyter Notebook and JupyterLab","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","lib/**/*.js.map","lib/**/*.ts","dist/*.js","dist/*.js.map","dist/*.png","style/**/*.*"],"homepage":"https://github.com/jupyter-widgets/ipydatagrid","bugs":{"url":"https://github.com/jupyter-widgets/ipydatagrid/issues"},"license":"BSD-3-Clause","author":{"name":"NumFOCUS","email":""},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/jupyter-widgets/ipydatagrid"},"scripts":{"build":"jlpm run build:lib && jlpm run build:nbextension && jlpm run build:labextension","build:dev":"jlpm run build:lib && jlpm run build:nbextension && jlpm run build:labextension:dev","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production --no-devtool","build:widget-examples":"cd widget-examples/basic && webpack --mode=production","build:all":"jlpm run build:labextension && jlpm run build:nbextension && jlpm run build:widget-examples","clean":"rimraf dist && jlpm run clean:lib && jlpm run clean:labextension && jlpm run clean:nbextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipydatagrid/labextension","clean:nbextension":"rimraf ipydatagrid/nbextension/index.*","lint":"eslint \'js/**/*.{js,ts}\' --quiet --fix","prepack":"jlpm run build:labextension && jlpm run build:nbextension","test":"jest --verbose","watch":"npm-run-all -p watch:lib watch:labextension watch:nbextension","watch:lib":"tsc -w","watch:nbextension":"webpack --watch","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^2 || ^3 || ^4 || ^6","@jupyterlab/apputils":"^3 || ^4","@lumino/algorithm":"^1 || ^2","@lumino/application":"^1 || ^2","@lumino/commands":"^1 || ^2","@lumino/coreutils":"^1 || ^2","@lumino/datagrid":"^1 || ^2","@lumino/default-theme":"^1 || ^2","@lumino/domutils":"^1 || ^2","@lumino/messaging":"^1 || ^2","@lumino/polling":"^1 || ^2","@lumino/signaling":"^1 || ^2","@lumino/virtualdom":"^1 || ^2","@lumino/widgets":"^1 || ^2","bqplot":"^0.5","core-js-pure":"^3.30.2","d3-array":"^2.2.0","d3-color":"^3.1.0","d3-format":"^1.3.2","d3-scale":"^3.0.0","d3-time-format":"^2.1.3","jest-environment-jsdom":"^28.1.3","moment":"^2.24.0","underscore":"^1.13.6","vega-expression":"^2.6.0","vega-format":"^1.1.1","vega-functions":"^5.3.0"},"devDependencies":{"@babel/cli":"^7.6.3","@babel/core":"^7.6.3","@babel/preset-env":"^7.6.3","@babel/preset-typescript":"^7.6.0","@jupyterlab/builder":"^4.0.5","@types/jest":"^27.4.1","@types/node":"^10.11.6","@types/underscore":"^1.11.4","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.5.0","@typescript-eslint/parser":"^3.5.0","acorn":"^6.2.0","babel-jest":"^28.1.3","babel-plugin-transform-es2015-modules-commonjs":"^6.26.2","css-loader":"^6.8.1","eslint":"^7.3.1","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","jest":"^28.1.3","jest-raw-loader":"^1.0.1","lint-staged":"^10.2.11","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","raw-loader":"^4.0.2","rimraf":"^2.6.2","source-map-loader":"^0.2.4","style-loader":"^3.3.3","svg-url-loader":"~3.0.3","ts-jest":"^28.0.8","ts-loader":"^6.0.4","typescript":"~4.2.4","url-loader":"^4.1.0","webpack":"^5.88.2","webpack-cli":"^4.4.0"},"jupyterlab":{"extension":"lib/plugin","webpackConfig":"webpack.lab.config.js","outputDir":"./ipydatagrid/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true},"bqplot":{"bundled":false,"singleton":true},"@lumino/algorithm":{"bundled":false,"singleton":true},"@lumino/commands":{"bundled":false,"singleton":true},"@lumino/coreutils":{"bundled":false,"singleton":true},"@lumino/polling":{"bundled":false,"singleton":true},"@lumino/datagrid":{"bundled":false,"singleton":true},"@lumino/default-theme":{"bundled":false,"singleton":true},"@lumino/domutils":{"bundled":false,"singleton":true},"@lumino/messaging":{"bundled":false,"singleton":true},"@lumino/virtualdom":{"bundled":false,"singleton":true},"@lumino/widgets":{"bundled":false,"singleton":true}}},"packageManager":"yarn@3.7.0"}')}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}return i.m=t,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i.b=document.baseURI||self.location.href,i.nc=void 0,i(976)})()));